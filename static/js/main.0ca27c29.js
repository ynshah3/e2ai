/*! For license information please see main.0ca27c29.js.LICENSE.txt */
!function(){var e={4525:function(e,t,n){(function(){"use strict";var e;function t(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var a=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function i(e,t){if(t)e:{var n=a;e=e.split(".");for(var i=0;i<e.length-1;i++){var o=e[i];if(!(o in n))break e;n=n[o]}(t=t(i=n[e=e[e.length-1]]))!=i&&null!=t&&r(n,e,{configurable:!0,writable:!0,value:t})}}function o(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function u(e){var n="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:t(e)}}function s(e){if(!(e instanceof Array)){e=u(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}i("Symbol",(function(e){function t(e,t){this.g=e,r(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",a=0;return function e(r){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(r||"")+"_"+a++,r)}})),i("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var n="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),i=0;i<n.length;i++){var u=a[n[i]];"function"===typeof u&&"function"!=typeof u.prototype[e]&&r(u.prototype,e,{configurable:!0,writable:!0,value:function(){return o(t(this))}})}return e}));var c,l="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)c=Object.setPrototypeOf;else{var f;e:{var h={};try{h.__proto__={a:!0},f=h.a;break e}catch(Ht){}f=!1}c=f?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var d=c;function p(e,t){if(e.prototype=l(t.prototype),e.prototype.constructor=e,d)d(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.na=t.prototype}function v(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.u=this.o=0,this.j=null}function g(e){if(e.l)throw new TypeError("Generator is already running");e.l=!0}function m(e,t){e.j={da:t,ea:!0},e.g=e.o||e.u}function y(e,t,n){return e.g=n,{value:t}}function b(e){this.g=new v,this.h=e}function x(e,t,n,r){try{var a=t.call(e.g.i,n);if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");if(!a.done)return e.g.l=!1,a;var i=a.value}catch(o){return e.g.i=null,m(e.g,o),w(e)}return e.g.i=null,r.call(e.g,i),w(e)}function w(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.l=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,m(e.g,n)}if(e.g.l=!1,e.g.j){if(t=e.g.j,e.g.j=null,t.ea)throw t.da;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function k(e){this.next=function(t){return g(e.g),e.g.i?t=x(e,e.g.i.next,t,e.g.s):(e.g.s(t),t=w(e)),t},this.throw=function(t){return g(e.g),e.g.i?t=x(e,e.g.i.throw,t,e.g.s):(m(e.g,t),t=w(e)),t},this.return=function(t){return function(e,t){g(e.g);var n=e.g.i;return n?x(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),w(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function _(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(r,a){!function e(i){i.done?r(i.value):Promise.resolve(i.value).then(t,n).then(e,a)}(e.next())}))}(new k(new b(e)))}v.prototype.s=function(e){this.h=e},v.prototype.return=function(e){this.j={return:e},this.g=this.u},i("Promise",(function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.s=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.g=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i((function(){t.l()}))}this.g.push(e)};var i=a.setTimeout;n.prototype.i=function(e){i(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.j(r)}}}this.g=null},n.prototype.j=function(e){this.i((function(){throw e}))},t.prototype.j=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.D),reject:e(this.l)}},t.prototype.D=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.H(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.A(e):this.o(e)}},t.prototype.A=function(e){var t=void 0;try{t=e.then}catch(n){return void this.l(n)}"function"==typeof t?this.I(t,e):this.o(e)},t.prototype.l=function(e){this.u(2,e)},t.prototype.o=function(e){this.u(1,e)},t.prototype.u=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.G(),this.B()},t.prototype.G=function(){var e=this;i((function(){if(e.C()){var t=a.console;"undefined"!==typeof t&&t.error(e.i)}}),1)},t.prototype.C=function(){if(this.s)return!1;var e=a.CustomEvent,t=a.Event,n=a.dispatchEvent;return"undefined"===typeof n||("function"===typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"===typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=a.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.B=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)o.h(this.g[e]);this.g=null}};var o=new n;return t.prototype.H=function(e){var t=this.j();e.M(t.resolve,t.reject)},t.prototype.I=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{a(e(t))}catch(n){i(n)}}:t}var a,i,o=new t((function(e,t){a=e,i=t}));return this.M(r(e,a),r(n,i)),o},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.M=function(e,t){function n(){switch(r.h){case 1:e(r.i);break;case 2:t(r.i);break;default:throw Error("Unexpected state: "+r.h)}}var r=this;null==this.g?o.h(n):this.g.push(n),this.s=!0},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var a=u(e),i=a.next();!i.done;i=a.next())r(i.value).M(t,n)}))},t.all=function(e){var n=u(e),a=n.next();return a.done?r([]):new t((function(e,t){function i(t){return function(n){o[t]=n,0==--u&&e(o)}}var o=[],u=0;do{o.push(void 0),u++,r(a.value).M(i(o.length-1),t),a=n.next()}while(!a.done)}))},t}));var S="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};i("Object.assign",(function(e){return e||S})),i("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}})),i("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(t=t||0)&&(t=Math.max(t+r,0));t<r;t++){var a=n[t];if(a===e||Object.is(a,e))return!0}return!1}})),i("String.prototype.includes",(function(e){return e||function(e,t){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(e,t||0)}})),i("Array.prototype.keys",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,a={next:function(){if(!r&&n<e.length){var a=n++;return{value:t(a,e[a]),done:!1}}return r=!0,{done:!0,value:void 0}}};return a[Symbol.iterator]=function(){return a},a}(this,(function(e){return e}))}}));var C=this||self;function E(e,t){e=e.split(".");var n,r=C;e[0]in r||"undefined"==typeof r.execScript||r.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===t?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t}function A(){throw Error("Invalid UTF8")}function N(e,t){return t=String.fromCharCode.apply(null,t),null==e?t:e+t}var T,M,D="undefined"!==typeof TextDecoder,F="undefined"!==typeof TextEncoder,I={},O=null;function R(e){var t;void 0===t&&(t=0),B(),t=I[t];for(var n=Array(Math.floor(e.length/3)),r=t[64]||"",a=0,i=0;a<e.length-2;a+=3){var o=e[a],u=e[a+1],s=e[a+2],c=t[o>>2];o=t[(3&o)<<4|u>>4],u=t[(15&u)<<2|s>>6],s=t[63&s],n[i++]=c+o+u+s}switch(c=0,s=r,e.length-a){case 2:s=t[(15&(c=e[a+1]))<<2]||r;case 1:e=e[a],n[i]=t[e>>2]+t[(3&e)<<4|c>>4]+s+r}return n.join("")}function Z(e){var t=e.length,n=3*t/4;n%3?n=Math.floor(n):-1!="=.".indexOf(e[t-1])&&(n=-1!="=.".indexOf(e[t-2])?n-2:n-1);var r=new Uint8Array(n),a=0;return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),a=O[n];if(null!=a)return a;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}B();for(var r=0;;){var a=n(-1),i=n(0),o=n(64),u=n(64);if(64===u&&-1===a)break;t(a<<2|i>>4),64!=o&&(t(i<<4&240|o>>2),64!=u&&t(o<<6&192|u))}}(e,(function(e){r[a++]=e})),a!==n?r.subarray(0,a):r}function B(){if(!O){O={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var r=e.concat(t[n].split(""));I[n]=r;for(var a=0;a<r.length;a++){var i=r[a];void 0===O[i]&&(O[i]=a)}}}}var z,L="function"===typeof Uint8Array;function P(e){return L&&null!=e&&e instanceof Uint8Array}function j(e){if(this.L=e,null!==e&&0===e.length)throw Error("ByteString should be constructed with non-empty values")}var U="function"===typeof Uint8Array.prototype.slice,W=0;function V(e,t){return Error("Invalid wire type: "+e+" (at position "+t+")")}function q(){return Error("Failed to read varint, encoding is invalid.")}function H(e,t){t=void 0!==(t=void 0===t?{}:t).v&&t.v,this.h=null,this.g=this.i=this.j=0,this.v=t,e&&G(this,e)}function G(e,t){e.h=function(e,t){if(e.constructor===Uint8Array)return e;if(e.constructor===ArrayBuffer)return new Uint8Array(e);if(e.constructor===Array)return new Uint8Array(e);if(e.constructor===String)return Z(e);if(e.constructor===j)return!t&&(t=e.L)&&t.constructor===Uint8Array?t:(t=null==(t=e.L)||P(t)?t:"string"===typeof t?Z(t):null,(e=e.L=t)?new Uint8Array(e):z||(z=new Uint8Array(0)));if(e instanceof Uint8Array)return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}(t,e.v),e.j=0,e.i=e.h.length,e.g=e.j}function X(e){if(e.g>e.i)throw Error("Tried to read past the end of the data "+e.g+" > "+e.i)}function Y(e){var t=e.h,n=t[e.g],r=127&n;if(128>n)return e.g+=1,X(e),r;if(r|=(127&(n=t[e.g+1]))<<7,128>n)return e.g+=2,X(e),r;if(r|=(127&(n=t[e.g+2]))<<14,128>n)return e.g+=3,X(e),r;if(r|=(127&(n=t[e.g+3]))<<21,128>n)return e.g+=4,X(e),r;if(n=t[e.g+4],e.g+=5,r|=(15&n)<<28,128>n)return X(e),r;if(128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++])throw q();return X(e),r}H.prototype.reset=function(){this.g=this.j};var K=[];function $(){this.g=[]}function Q(e,t){for(;127<t;)e.g.push(127&t|128),t>>>=7;e.g.push(t)}function J(e){var t={},n=void 0!==t.W&&t.W;this.l={v:void 0!==t.v&&t.v},this.W=n,t=this.l,K.length?(n=K.pop(),t&&(n.v=t.v),e&&G(n,e),e=n):e=new H(e,t),this.g=e,this.j=this.g.g,this.h=this.i=-1}function ee(e){var t=e.g;if(t.g==t.i)return!1;e.j=e.g.g;var n=Y(e.g)>>>0;if(t=n>>>3,!(0<=(n&=7)&&5>=n))throw V(n,e.j);if(1>t)throw Error("Invalid field number: "+t+" (at position "+e.j+")");return e.i=t,e.h=n,!0}function te(e){switch(e.h){case 0:if(0!=e.h)te(e);else e:{for(var t=(e=e.g).g,n=t+10;t<n;)if(0===(128&e.h[t++])){e.g=t,X(e);break e}throw q()}break;case 1:(e=e.g).g+=8,X(e);break;case 2:2!=e.h?te(e):(t=Y(e.g)>>>0,(e=e.g).g+=t,X(e));break;case 5:(e=e.g).g+=4,X(e);break;case 3:for(t=e.i;;){if(!ee(e))throw Error("Unmatched start-group tag: stream EOF");if(4==e.h){if(e.i!=t)throw Error("Unmatched end-group tag");break}te(e)}break;default:throw V(e.h,e.j)}}$.prototype.length=function(){return this.g.length},$.prototype.end=function(){var e=this.g;return this.g=[],e},J.prototype.reset=function(){this.g.reset(),this.j=this.g.g,this.h=this.i=-1};var ne=[];function re(){this.i=[],this.h=0,this.g=new $}function ae(e,t){0!==t.length&&(e.i.push(t),e.h+=t.length)}var ie="function"===typeof Symbol&&"symbol"===typeof Symbol()?Symbol(void 0):void 0;function oe(e,t){Object.isFrozen(e)||(ie?e[ie]|=t:void 0!==e.N?e.N|=t:Object.defineProperties(e,{N:{value:t,configurable:!0,writable:!0,enumerable:!1}}))}function ue(e){var t;return null==(t=ie?e[ie]:e.N)?0:t}function se(e){return oe(e,1),e}function ce(e){return!!Array.isArray(e)&&!!(2&ue(e))}function le(e){if(!Array.isArray(e))throw Error("cannot mark non-array as immutable");oe(e,2)}function fe(e){return null!==e&&"object"===typeof e&&!Array.isArray(e)&&e.constructor===Object}var he=Object.freeze(se([]));function de(e){if(ce(e.m))throw Error("Cannot mutate an immutable Message")}var pe,ve="undefined"!=typeof Symbol&&"undefined"!=typeof Symbol.hasInstance;function ge(e){return{value:e,configurable:!1,writable:!1,enumerable:!1}}function me(e,t,n){return-1===t?null:t>=e.i?e.g?e.g[t]:void 0:void 0!==n&&n&&e.g&&null!=(n=e.g[t])?n:e.m[t+e.h]}function ye(e,t,n,r){r=void 0!==r&&r,de(e),t<e.i&&!r?e.m[t+e.h]=n:(e.g||(e.g=e.m[e.i+e.h]={}))[t]=n}function be(e,t,n,r){n=void 0===n||n;var a=me(e,t,r=void 0!==r&&r);return null==a&&(a=he),ce(e.m)?n&&(le(a),Object.freeze(a)):(a===he||ce(a))&&ye(e,t,a=se(a.slice()),r),a}function xe(e,t,n){return null==(e=null==(e=me(e,t))?e:+e)?void 0===n?0:n:e}function we(e,t,n,r){e.j||(e.j={});var a=ce(e.m),i=e.j[n];if(!i){r=be(e,n,!0,void 0!==r&&r),i=[],a=a||ce(r);for(var o=0;o<r.length;o++)i[o]=new t(r[o]),a&&le(i[o].m);a&&(le(i),Object.freeze(i)),e.j[n]=i}return i}function ke(e,t,n,r,a){var i=void 0!==i&&i;return de(e),i=we(e,n,t,i),n=r||new n,e=be(e,t),void 0!=a?(i.splice(a,0,n),e.splice(a,0,n.m)):(i.push(n),e.push(n.m)),n}function _e(e,t){return null==(e=me(e,t))?0:e}function Se(e,t){return null==(e=me(e,t))?"":e}function Ce(e){var t=Ne;return Ae(e,t=void 0===t?Te:t)}function Ee(e,t){if(null!=e){if(Array.isArray(e))e=Ae(e,t);else if(fe(e)){var n,r={};for(n in e)r[n]=Ee(e[n],t);e=r}else e=t(e);return e}}function Ae(e,t){for(var n=e.slice(),r=0;r<n.length;r++)n[r]=Ee(n[r],t);return Array.isArray(e)&&1&ue(e)&&se(n),n}function Ne(e){return e&&"object"==typeof e&&e.toJSON?e.toJSON():(e=function(e){switch(typeof e){case"number":return isFinite(e)?e:String(e);case"object":if(e&&!Array.isArray(e)){if(P(e))return R(e);if(e instanceof j){var t=e.L;return t=null==t||"string"===typeof t?t:L&&t instanceof Uint8Array?R(t):null,(e.L=t)||""}}}return e}(e),Array.isArray(e)?Ce(e):e)}function Te(e){return P(e)?new Uint8Array(e):e}function Me(e,t,n){e||(e=pe),pe=null;var r=this.constructor.h;if(e||(e=r?[r]:[]),this.h=(r?0:-1)-(this.constructor.g||0),this.j=void 0,this.m=e,e=(r=this.m.length)-1,r&&fe(r=this.m[e])?(this.i=e-this.h,this.g=r):void 0!==t&&-1<t?(this.i=Math.max(t,e+1-this.h),this.g=void 0):this.i=Number.MAX_VALUE,n)for(t=0;t<n.length;t++)if((e=n[t])<this.i)e+=this.h,(r=this.m[e])?Array.isArray(r)&&se(r):this.m[e]=he;else{var a=(r=this.g||(this.g=this.m[this.i+this.h]={}))[e];a?Array.isArray(a)&&se(a):r[e]=he}}function De(){Me.apply(this,arguments)}if(Me.prototype.toJSON=function(){return Ce(this.m)},Me.prototype.toString=function(){return this.m.toString()},p(De,Me),ve){var Fe={};Object.defineProperties(De,(Fe[Symbol.hasInstance]=ge((function(){throw Error("Cannot perform instanceof checks for MutableMessage")})),Fe))}function Ie(e,t,n){if(n){var r,a={};for(r in n){var i=n[r],o=i.ha;o||(a.F=i.la||i.fa.P,i.aa?(a.U=Pe(i.aa),o=function(e){return function(t,n,r){return e.F(t,n,r,e.U)}}(a)):i.ca?(a.T=je(i.X.g,i.ca),o=function(e){return function(t,n,r){return e.F(t,n,r,e.T)}}(a)):o=a.F,i.ha=o),o(t,e,i.X),a={F:a.F,U:a.U,T:a.T}}}!function(e,t){if(t=t.ba){ae(e,e.g.end());for(var n=0;n<t.length;n++)ae(e,t[n])}}(t,e)}var Oe=Symbol();function Re(e,t,n){return e[Oe]||(e[Oe]=function(e,r){return t(e,r,n)})}function Ze(e){var t=e[Oe];if(!t){var n=Je(e);t=function(e,t){return et(e,t,n)},e[Oe]=t}return t}function Be(e){var t=function(e){var t=e.aa;return t?Ze(t):(t=e.ka)?Re(e.X.g,t,e.ca):void 0}(e),n=e.X,r=e.fa.O;return t?function(e,a){return r(e,a,n,t)}:function(e,t){return r(e,t,n)}}function ze(e,t,n,r,a,i){var o=0;for((e=e()).length&&"number"!==typeof e[0]&&(n(t,e[0]),o++);o<e.length;){n=e[o++];for(var u=o+1;u<e.length&&"number"!==typeof e[u];)u++;var s=e[o++];switch(u-=o){case 0:r(t,n,s);break;case 1:r(t,n,s,e[o++]);break;case 2:a(t,n,s,e[o++],e[o++]);break;case 3:u=e[o++];var c=e[o++],l=e[o++];Array.isArray(l)?a(t,n,s,u,c,l):i(t,n,s,u,c,l);break;case 4:i(t,n,s,e[o++],e[o++],e[o++],e[o++]);break;default:throw Error("unexpected number of binary field arguments: "+u)}}return t}var Le=Symbol();function Pe(e){var t=e[Le];if(!t){var n=Ge(e);t=function(e,t){return nt(e,t,n)},e[Le]=t}return t}function je(e,t){var n=e[Le];return n||(n=function(e,n){return Ie(e,n,t)},e[Le]=n),n}var Ue=Symbol();function We(e,t){e.push(t)}function Ve(e,t,n){e.push(t,n.P)}function qe(e,t,n,r,a){var i=Pe(a),o=n.P;e.push(t,(function(e,t,n){return o(e,t,n,r,i)}))}function He(e,t,n,r,a,i){var o=je(r,i),u=n.P;e.push(t,(function(e,t,n){return u(e,t,n,r,o)}))}function Ge(e){var t=e[Ue];return t||ze(e,e[Ue]=[],We,Ve,qe,He)}var Xe=Symbol();function Ye(e,t){e[0]=t}function Ke(e,t,n,r){var a=n.O;e[t]=r?function(e,t,n){return a(e,t,n,r)}:a}function $e(e,t,n,r,a,i){var o=n.O,u=Ze(a);e[t]=function(e,t,n){return o(e,t,n,r,u,i)}}function Qe(e,t,n,r,a,i,o){var u=n.O,s=Re(r,a,i);e[t]=function(e,t,n){return u(e,t,n,r,s,o)}}function Je(e){var t=e[Xe];return t||ze(e,e[Xe]={},Ye,Ke,$e,Qe)}function et(e,t,n){for(;ee(t)&&4!=t.h;){var r=t.i,a=n[r];if(!a){var i=n[0];i&&(i=i[r])&&(a=n[r]=Be(i))}if((!a||!a(t,e,r))&&(r=e,i=(a=t).j,te(a),!a.W)){var o=a.g.h;a=i===(a=a.g.g)?z||(z=new Uint8Array(0)):U?o.slice(i,a):new Uint8Array(o.subarray(i,a)),(i=r.ba)?i.push(a):r.ba=[a]}}return e}function tt(e,t,n){if(ne.length){var r=ne.pop();e&&(G(r.g,e),r.i=-1,r.h=-1),e=r}else e=new J(e);try{return et(new t,e,Je(n))}finally{(t=e.g).h=null,t.j=0,t.i=0,t.g=0,t.v=!1,e.i=-1,e.h=-1,100>ne.length&&ne.push(e)}}function nt(e,t,n){for(var r=n.length,a=1==r%2,i=a?1:0;i<r;i+=2)(0,n[i+1])(t,e,n[i]);Ie(e,t,a?n[0]:void 0)}function rt(e,t){var n=new re;nt(e,n,Ge(t)),ae(n,n.g.end()),e=new Uint8Array(n.h);for(var r=(t=n.i).length,a=0,i=0;i<r;i++){var o=t[i];e.set(o,a),a+=o.length}return n.i=[e],e}function at(e,t){return{O:e,P:t}}var it=at((function(e,t,n){if(5!==e.h)return!1;var r=(e=e.g).h[e.g],a=e.h[e.g+1],i=e.h[e.g+2],o=e.h[e.g+3];return e.g+=4,X(e),e=2*((a=(r<<0|a<<8|i<<16|o<<24)>>>0)>>31)+1,r=a>>>23&255,a&=8388607,ye(t,n,255==r?a?NaN:1/0*e:0==r?e*Math.pow(2,-149)*a:e*Math.pow(2,r-150)*(a+Math.pow(2,23))),!0}),(function(e,t,n){if(null!=(t=me(t,n))){Q(e.g,8*n+5),e=e.g;var r=t;0===(r=(n=0>r?1:0)?-r:r)?0<1/r?W=0:(0,W=2147483648):isNaN(r)?(0,W=2147483647):34028234663852886e22<r?(0,W=(n<<31|2139095040)>>>0):11754943508222875e-54>r?(r=Math.round(r/Math.pow(2,-149)),0,W=(n<<31|r)>>>0):(t=Math.floor(Math.log(r)/Math.LN2),r*=Math.pow(2,-t),16777216<=(r=Math.round(8388608*r))&&++t,0,W=(n<<31|t+127<<23|8388607&r)>>>0),n=W,e.g.push(n>>>0&255),e.g.push(n>>>8&255),e.g.push(n>>>16&255),e.g.push(n>>>24&255)}})),ot=at((function(e,t,n){if(0!==e.h)return!1;for(var r=e.g,a=128,i=0,o=e=0;4>o&&128<=a;o++)a=r.h[r.g++],X(r),i|=(127&a)<<7*o;if(128<=a&&(a=r.h[r.g++],X(r),i|=(127&a)<<28,e|=(127&a)>>4),128<=a)for(o=0;5>o&&128<=a;o++)a=r.h[r.g++],X(r),e|=(127&a)<<7*o+3;if(!(128>a))throw q();return r=i>>>0,(e=2147483648&(a=e>>>0))&&(a=~a>>>0,0==(r=1+~r>>>0)&&(a=a+1>>>0)),r=4294967296*a+(r>>>0),ye(t,n,e?-r:r),!0}),(function(e,t,n){if(null!=(t=me(t,n))&&null!=t){Q(e.g,8*n),e=e.g;var r=t;for(n=0>r,t=(r=Math.abs(r))>>>0,r=Math.floor((r-t)/4294967296),r>>>=0,n&&(r=~r>>>0,4294967295<(t=1+(~t>>>0))&&(t=0,4294967295<++r&&(r=0))),n=W=t,t=r;0<t||127<n;)e.g.push(127&n|128),n=(n>>>7|t<<25)>>>0,t>>>=7;e.g.push(n)}})),ut=at((function(e,t,n){return 0===e.h&&(ye(t,n,Y(e.g)),!0)}),(function(e,t,n){if(null!=(t=me(t,n))&&null!=t)if(Q(e.g,8*n),e=e.g,0<=(n=t))Q(e,n);else{for(t=0;9>t;t++)e.g.push(127&n|128),n>>=7;e.g.push(1)}})),st=at((function(e,t,n){if(2!==e.h)return!1;var r,a=Y(e.g)>>>0,i=(e=e.g).g;if(e.g+=a,X(e),e=e.h,D)(r=T)||(r=T=new TextDecoder("utf-8",{fatal:!0})),r=r.decode(e.subarray(i,i+a));else{a=i+a;for(var o,u,s,c=[],l=null;i<a;)128>(o=e[i++])?c.push(o):224>o?i>=a?A():(u=e[i++],194>o||128!==(192&u)?(i--,A()):c.push((31&o)<<6|63&u)):240>o?i>=a-1?A():128!==(192&(u=e[i++]))||224===o&&160>u||237===o&&160<=u||128!==(192&(r=e[i++]))?(i--,A()):c.push((15&o)<<12|(63&u)<<6|63&r):244>=o?i>=a-2?A():128!==(192&(u=e[i++]))||0!==u-144+(o<<28)>>30||128!==(192&(r=e[i++]))||128!==(192&(s=e[i++]))?(i--,A()):(o=(7&o)<<18|(63&u)<<12|(63&r)<<6|63&s,o-=65536,c.push(55296+(o>>10&1023),56320+(1023&o))):A(),8192<=c.length&&(l=N(l,c),c.length=0);r=N(l,c)}return ye(t,n,r),!0}),(function(e,t,n){if(null!=(t=me(t,n))){var r=!1;if(r=void 0!==r&&r,F){if(r&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(t))throw Error("Found an unpaired surrogate");t=(M||(M=new TextEncoder)).encode(t)}else{for(var a=0,i=new Uint8Array(3*t.length),o=0;o<t.length;o++){var u=t.charCodeAt(o);if(128>u)i[a++]=u;else{if(2048>u)i[a++]=u>>6|192;else{if(55296<=u&&57343>=u){if(56319>=u&&o<t.length){var s=t.charCodeAt(++o);if(56320<=s&&57343>=s){u=1024*(u-55296)+s-56320+65536,i[a++]=u>>18|240,i[a++]=u>>12&63|128,i[a++]=u>>6&63|128,i[a++]=63&u|128;continue}o--}if(r)throw Error("Found an unpaired surrogate");u=65533}i[a++]=u>>12|224,i[a++]=u>>6&63|128}i[a++]=63&u|128}}t=i.subarray(0,a)}Q(e.g,8*n+2),Q(e.g,t.length),ae(e,e.g.end()),ae(e,t)}})),ct=at((function(e,t,n,r,a){if(2!==e.h)return!1;t=ke(t,n,r),n=e.g.i,r=Y(e.g)>>>0;var i=e.g.g+r,o=i-n;if(0>=o&&(e.g.i=i,a(t,e),o=i-e.g.g),o)throw Error("Message parsing ended unexpectedly. Expected to read "+r+" bytes, instead read "+(r-o)+" bytes, either the data ended unexpectedly or the message misreported its own length");return e.g.g=i,e.g.i=n,!0}),(function(e,t,n,r,a){if(null!=(t=we(t,r,n)))for(r=0;r<t.length;r++){var i=e;Q(i.g,8*n+2);var o=i.g.end();ae(i,o),o.push(i.h),i=o,a(t[r],e),o=e;var u=i.pop();for(u=o.h+o.g.length()-u;127<u;)i.push(127&u|128),u>>>=7,o.h++;i.push(u),o.h++}}));function lt(){De.apply(this,arguments)}if(p(lt,De),ve){var ft={};Object.defineProperties(lt,(ft[Symbol.hasInstance]=ge(Object[Symbol.hasInstance]),ft))}function ht(e){lt.call(this,e)}function dt(){return[1,ut,2,it,3,st,4,st]}function pt(e){lt.call(this,e,-1,gt)}function vt(){return[1,ct,ht,dt]}p(ht,lt),p(pt,lt),pt.prototype.addClassification=function(e,t){return ke(this,1,ht,e,t),this};var gt=[1];function mt(e){lt.call(this,e)}function yt(){return[1,it,2,it,3,it,4,it,5,it]}function bt(e){lt.call(this,e,-1,wt)}function xt(){return[1,ct,mt,yt]}p(mt,lt),p(bt,lt);var wt=[1];function kt(e){lt.call(this,e)}function _t(){return[1,it,2,it,3,it,4,it,5,it,6,ot]}p(kt,lt);var St=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],Ct=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],Et=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],At=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],Nt=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],Tt=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],Mt=[].concat(s(St),s(Ct),s(Et),s(At),s(Nt),s(Tt));function Dt(e,t,n){if(n=e.createShader(0===n?e.VERTEX_SHADER:e.FRAGMENT_SHADER),e.shaderSource(n,t),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+e.getShaderInfoLog(n));return n}function Ft(e){return we(e,ht,1).map((function(e){return{index:_e(e,1),ga:xe(e,2),label:null!=me(e,3)?Se(e,3):void 0,displayName:null!=me(e,4)?Se(e,4):void 0}}))}function It(e){return{x:xe(e,1),y:xe(e,2),z:xe(e,3),visibility:null!=me(e,4)?xe(e,4):void 0}}function Ot(e,t){this.h=e,this.g=t,this.l=0}function Rt(e,t,n){return function(e,t){var n=e.g;if(void 0===e.o){var r=Dt(n,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),a=Dt(n,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),i=n.createProgram();if(n.attachShader(i,r),n.attachShader(i,a),n.linkProgram(i),!n.getProgramParameter(i,n.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+n.getProgramInfoLog(i));r=e.o=i,n.useProgram(r),a=n.getUniformLocation(r,"sampler0"),e.j={K:n.getAttribLocation(r,"aVertex"),J:n.getAttribLocation(r,"aTex"),ma:a},e.u=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.u),n.enableVertexAttribArray(e.j.K),n.vertexAttribPointer(e.j.K,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),e.s=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.s),n.enableVertexAttribArray(e.j.J),n.vertexAttribPointer(e.j.J,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.uniform1i(a,0)}r=e.j,n.useProgram(e.o),n.canvas.width=t.width,n.canvas.height=t.height,n.viewport(0,0,t.width,t.height),n.activeTexture(n.TEXTURE0),e.h.bindTexture2d(t.glName),n.enableVertexAttribArray(r.K),n.bindBuffer(n.ARRAY_BUFFER,e.u),n.vertexAttribPointer(r.K,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(r.J),n.bindBuffer(n.ARRAY_BUFFER,e.s),n.vertexAttribPointer(r.J,2,n.FLOAT,!1,0,0),n.bindFramebuffer(n.DRAW_FRAMEBUFFER?n.DRAW_FRAMEBUFFER:n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.colorMask(!0,!0,!0,!0),n.drawArrays(n.TRIANGLE_FAN,0,4),n.disableVertexAttribArray(r.K),n.disableVertexAttribArray(r.J),n.bindBuffer(n.ARRAY_BUFFER,null),e.h.bindTexture2d(0)}(e,t),"function"===typeof e.g.canvas.transferToImageBitmap?Promise.resolve(e.g.canvas.transferToImageBitmap()):n?Promise.resolve(e.g.canvas):"function"===typeof createImageBitmap?createImageBitmap(e.g.canvas):(void 0===e.i&&(e.i=document.createElement("canvas")),new Promise((function(t){e.i.height=e.g.canvas.height,e.i.width=e.g.canvas.width,e.i.getContext("2d",{}).drawImage(e.g.canvas,0,0,e.g.canvas.width,e.g.canvas.height),t(e.i)})))}function Zt(e){this.g=e}var Bt=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function zt(e,t){return t+e}function Lt(e,t){window[e]=t}function Pt(e){if(this.g=e,this.listeners={},this.j={},this.H={},this.o={},this.u={},this.I=this.s=this.Z=!0,this.D=Promise.resolve(),this.Y="",this.C={},this.locateFile=e&&e.locateFile||zt,"object"===typeof window)var t=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"===typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");t=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.$=t,e.options)for(var n=(t=u(Object.keys(e.options))).next();!n.done;n=t.next()){n=n.value;var r=e.options[n].default;void 0!==r&&(this.j[n]="function"===typeof r?r():r)}}function jt(e){var t,n,r,a,i,o,u,c,l,f,h;return _((function(d){switch(d.g){case 1:return e.Z?(t=void 0===e.g.files?[]:"function"===typeof e.g.files?e.g.files(e.j):e.g.files,y(d,_((function(e){switch(e.g){case 1:return e.o=2,y(e,WebAssembly.instantiate(Bt),4);case 4:e.g=3,e.o=0;break;case 2:return e.o=0,e.j=null,e.return(!1);case 3:return e.return(!0)}})),2)):d.return();case 2:if(n=d.h,"object"===typeof window)return Lt("createMediapipeSolutionsWasm",{locateFile:e.locateFile}),Lt("createMediapipeSolutionsPackedAssets",{locateFile:e.locateFile}),o=t.filter((function(e){return void 0!==e.data})),u=t.filter((function(e){return void 0===e.data})),c=Promise.all(o.map((function(t){var n=Ut(e,t.url);if(void 0!==t.path){var r=t.path;n=n.then((function(t){return e.overrideFile(r,t),Promise.resolve(t)}))}return n}))),l=Promise.all(u.map((function(t){return void 0===t.simd||t.simd&&n||!t.simd&&!n?function(e){var t=document.createElement("script");return t.setAttribute("src",e),t.setAttribute("crossorigin","anonymous"),new Promise((function(e){t.addEventListener("load",(function(){e()}),!1),t.addEventListener("error",(function(){e()}),!1),document.body.appendChild(t)}))}(e.locateFile(t.url,e.$)):Promise.resolve()}))).then((function(){var t,n,r;return _((function(a){if(1==a.g)return t=window.createMediapipeSolutionsWasm,n=window.createMediapipeSolutionsPackedAssets,r=e,y(a,t(n),2);r.h=a.h,a.g=0}))})),f=_((function(t){return e.g.graph&&e.g.graph.url?t=y(t,Ut(e,e.g.graph.url),0):(t.g=0,t=void 0),t})),y(d,Promise.all([l,c,f]),7);if("function"!==typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return r=t.filter((function(e){return void 0===e.simd||e.simd&&n||!e.simd&&!n})).map((function(t){return e.locateFile(t.url,e.$)})),importScripts.apply(null,s(r)),a=e,y(d,createMediapipeSolutionsWasm(Module),6);case 6:a.h=d.h,e.l=new OffscreenCanvas(1,1),e.h.canvas=e.l,i=e.h.GL.createContext(e.l,{antialias:!1,alpha:!1,ja:"undefined"!==typeof WebGL2RenderingContext?2:1}),e.h.GL.makeContextCurrent(i),d.g=4;break;case 7:if(e.l=document.createElement("canvas"),!(h=e.l.getContext("webgl2",{}))&&!(h=e.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),d.return();e.G=h,e.h.canvas=e.l,e.h.createContext(e.l,!0,!0,{});case 4:e.i=new e.h.SolutionWasm,e.Z=!1,d.g=0}}))}function Ut(e,t){var n,r;return _((function(a){return t in e.H?a.return(e.H[t]):(n=e.locateFile(t,""),r=fetch(n).then((function(e){return e.arrayBuffer()})),e.H[t]=r,a.return(r))}))}function Wt(e,t,n){var r,a,i,o,s,c,l,f,h,d,p,v,g,m;return _((function(b){switch(b.g){case 1:if(!n)return b.return(t);for(r={},a=0,i=u(Object.keys(n)),o=i.next();!o.done;o=i.next())s=o.value,"string"!==typeof(c=n[s])&&"texture"===c.type&&void 0!==t[c.stream]&&++a;1<a&&(e.I=!1),l=u(Object.keys(n)),o=l.next();case 2:if(o.done){b.g=4;break}if(f=o.value,"string"===typeof(h=n[f]))return g=r,m=f,y(b,function(e,t,n){var r;return _((function(a){return"number"===typeof n||n instanceof Uint8Array||n instanceof e.h.Uint8BlobList?a.return(n):n instanceof e.h.Texture2dDataOut?((r=e.u[t])||(r=new Ot(e.h,e.G),e.u[t]=r),a.return(Rt(r,n,e.I))):a.return(void 0)}))}(e,f,t[h]),14);if(d=t[h.stream],"detection_list"===h.type){if(d){for(var x=d.getRectList(),w=d.getLandmarksList(),k=d.getClassificationsList(),S=[],C=0;C<x.size();++C){var E=tt(x.get(C),kt,_t);E={boundingBox:{xCenter:xe(E,1),yCenter:xe(E,2),height:xe(E,3),width:xe(E,4),rotation:xe(E,5,0),rectId:_e(E,6)},landmarks:we(tt(w.get(C),bt,xt),mt,1).map(It),V:Ft(tt(k.get(C),pt,vt))},S.push(E)}x=S}else x=[];r[f]=x,b.g=7;break}if("proto_list"===h.type){if(d){for(x=Array(d.size()),w=0;w<d.size();w++)x[w]=d.get(w);d.delete()}else x=[];r[f]=x,b.g=7;break}if(void 0===d){b.g=3;break}if("float_list"===h.type){r[f]=d,b.g=7;break}if("proto"===h.type){r[f]=d,b.g=7;break}if("texture"!==h.type)throw Error("Unknown output config type: '"+h.type+"'");return(p=e.u[f])||(p=new Ot(e.h,e.G),e.u[f]=p),y(b,Rt(p,d,e.I),13);case 13:v=b.h,r[f]=v;case 7:h.transform&&r[f]&&(r[f]=h.transform(r[f])),b.g=3;break;case 14:g[m]=b.h;case 3:o=l.next(),b.g=2;break;case 4:return b.return(r)}}))}function Vt(e,t){for(var n=t.name||"$",r=[].concat(s(t.wants)),a=new e.h.StringList,i=u(t.wants),o=i.next();!o.done;o=i.next())a.push_back(o.value);i=e.h.PacketListener.implement({onResults:function(a){for(var i={},o=0;o<t.wants.length;++o)i[r[o]]=a.get(o);var u=e.listeners[n];u&&(e.D=Wt(e,i,t.outs).then((function(n){n=u(n);for(var a=0;a<t.wants.length;++a){var o=i[r[a]];"object"===typeof o&&o.hasOwnProperty&&o.hasOwnProperty("delete")&&o.delete()}n&&(e.D=n)})))}}),e.i.attachMultiListener(a,i),a.delete()}function qt(e){var t=this;e=e||{};var n={url:"face_detection_short.binarypb"},r={type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}};this.g=new Pt({locateFile:e.locateFile,files:[{data:!0,url:"face_detection_short.binarypb"},{data:!0,url:"face_detection_short_range.tflite"},{simd:!0,url:"face_detection_solution_simd_wasm_bin.js"},{simd:!1,url:"face_detection_solution_wasm_bin.js"}],graph:n,listeners:[{wants:["detections","image_transformed"],outs:{image:"image_transformed",detections:{type:"detection_list",stream:"detections"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"object"===typeof window&&void 0!==window.navigator&&("iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},model:{type:0,onChange:function(e){var a,i,o,s,c;return _((function(l){switch(l.g){case 1:a=u("short"===e?["face_detection_short_range.tflite"]:["face_detection_full_range_sparse.tflite"]),i=a.next();case 2:if(i.done){l.g=4;break}return o=i.value,s="third_party/mediapipe/modules/face_detection/"+o,y(l,Ut(t.g,o),5);case 5:c=l.h,t.g.overrideFile(s,c),i=a.next(),l.g=2;break;case 4:return n.url="short"===e?"face_detection_short.binarypb":"face_detection_full.binarypb",r.graphOptionXref.calculatorName="short"===e?"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator":"facedetectionfullrangegpu__facedetectionfullrangecommon__TensorsToDetectionsCalculator",l.return(!0)}}))}},minDetectionConfidence:r}})}(e=Pt.prototype).close=function(){return this.i&&this.i.delete(),Promise.resolve()},e.reset=function(){var e=this;return _((function(t){e.i&&(e.i.reset(),e.o={},e.u={}),t.g=0}))},e.setOptions=function(e,t){var n=this;if(t=t||this.g.options){for(var r=[],a=[],i={},o=u(Object.keys(e)),s=o.next();!s.done;i={R:i.R,S:i.S},s=o.next()){var c=s.value;c in this.j&&this.j[c]===e[c]||(this.j[c]=e[c],void 0!==(s=t[c])&&(s.onChange&&(i.R=s.onChange,i.S=e[c],r.push(function(e){return function(){return _((function(t){if(1==t.g)return y(t,e.R(e.S),2);!0===t.h&&(n.s=!0),t.g=0}))}}(i))),s.graphOptionXref&&(c={valueNumber:1===s.type?e[c]:0,valueBoolean:0===s.type&&e[c],valueString:2===s.type?e[c]:""},s=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),s.graphOptionXref),c),a.push(s))))}0===r.length&&0===a.length||(this.s=!0,this.B=(void 0===this.B?[]:this.B).concat(a),this.A=(void 0===this.A?[]:this.A).concat(r))}},e.initialize=function(){var e=this;return _((function(t){return 1==t.g?y(t,jt(e),2):3!=t.g?y(t,function(e){var t,n,r,a,i,o,s,c;return _((function(l){if(1==l.g)return e.g.graph&&e.g.graph.url&&e.Y===e.g.graph.url?l.return():(e.s=!0,e.g.graph&&e.g.graph.url?(e.Y=e.g.graph.url,y(l,Ut(e,e.g.graph.url),3)):void(l.g=2));for(2!=l.g&&(t=l.h,e.i.loadGraph(t)),n=u(Object.keys(e.C)),r=n.next();!r.done;r=n.next())a=r.value,e.i.overrideFile(a,e.C[a]);if(e.C={},e.g.listeners)for(i=u(e.g.listeners),o=i.next();!o.done;o=i.next())s=o.value,Vt(e,s);c=e.j,e.j={},e.setOptions(c),l.g=0}))}(e),3):y(t,function(e){var t,n,r,a,i,o;return _((function(s){switch(s.g){case 1:if(!e.s)return s.return();if(!e.A){s.g=2;break}t=u(e.A),n=t.next();case 3:if(n.done){s.g=5;break}return y(s,(0,n.value)(),4);case 4:n=t.next(),s.g=3;break;case 5:e.A=void 0;case 2:if(e.B){for(r=new e.h.GraphOptionChangeRequestList,a=u(e.B),i=a.next();!i.done;i=a.next())o=i.value,r.push_back(o);e.i.changeOptions(r),r.delete(),e.B=void 0}e.s=!1,s.g=0}}))}(e),0)}))},e.overrideFile=function(e,t){this.i?this.i.overrideFile(e,t):this.C[e]=t},e.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},e.send=function(e,t){var n,r,a,i,o,s,c,l,f,h=this;return _((function(d){switch(d.g){case 1:return h.g.inputs?(n=1e3*(void 0===t||null===t?performance.now():t),y(d,h.D,2)):d.return();case 2:return y(d,h.initialize(),3);case 3:for(r=new h.h.PacketDataList,a=u(Object.keys(e)),i=a.next();!i.done;i=a.next())if(o=i.value,s=h.g.inputs[o]){e:{var p=e[o];switch(s.type){case"video":var v=h.o[s.stream];if(v||(v=new Ot(h.h,h.G),h.o[s.stream]=v),0===v.l&&(v.l=v.h.createTexture()),"undefined"!==typeof HTMLVideoElement&&p instanceof HTMLVideoElement)var g=p.videoWidth,m=p.videoHeight;else"undefined"!==typeof HTMLImageElement&&p instanceof HTMLImageElement?(g=p.naturalWidth,m=p.naturalHeight):(g=p.width,m=p.height);m={glName:v.l,width:g,height:m},(g=v.g).canvas.width=m.width,g.canvas.height=m.height,g.activeTexture(g.TEXTURE0),v.h.bindTexture2d(v.l),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,p),v.h.bindTexture2d(0),v=m;break e;case"detections":for((v=h.o[s.stream])||(v=new Zt(h.h),h.o[s.stream]=v),v.data||(v.data=new v.g.DetectionListData),v.data.reset(p.length),m=0;m<p.length;++m){g=p[m];var b=v.data,x=b.setBoundingBox,w=m,k=g.boundingBox,_=new kt;if(ye(_,1,k.xCenter),ye(_,2,k.yCenter),ye(_,3,k.height),ye(_,4,k.width),ye(_,5,k.rotation),ye(_,6,k.rectId),k=rt(_,_t),x.call(b,w,k),g.landmarks)for(b=0;b<g.landmarks.length;++b){var S=!!(_=g.landmarks[b]).visibility;w=(x=v.data).addNormalizedLandmark,k=m,_=Object.assign(Object.assign({},_),{visibility:S?_.visibility:0}),ye(S=new mt,1,_.x),ye(S,2,_.y),ye(S,3,_.z),_.visibility&&ye(S,4,_.visibility),_=rt(S,yt),w.call(x,k,_)}if(g.V)for(b=0;b<g.V.length;++b)w=(x=v.data).addClassification,k=m,_=g.V[b],ye(S=new ht,2,_.ga),_.index&&ye(S,1,_.index),_.label&&ye(S,3,_.label),_.displayName&&ye(S,4,_.displayName),_=rt(S,dt),w.call(x,k,_)}v=v.data;break e;default:v={}}}switch(c=v,l=s.stream,s.type){case"video":r.pushTexture2d(Object.assign(Object.assign({},c),{stream:l,timestamp:n}));break;case"detections":(f=c).stream=l,f.timestamp=n,r.pushDetectionList(f);break;default:throw Error("Unknown input config type: '"+s.type+"'")}}return h.i.send(r),y(d,h.D,4);case 4:r.delete(),d.g=0}}))},e.onResults=function(e,t){this.listeners[t||"$"]=e},E("Solution",Pt),E("OptionType",{BOOL:0,NUMBER:1,ia:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(e=qt.prototype).close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(e){this.g.onResults(e)},e.initialize=function(){var e=this;return _((function(t){return y(t,e.g.initialize(),0)}))},e.reset=function(){this.g.reset()},e.send=function(e){var t=this;return _((function(n){return y(n,t.g.send(e),0)}))},e.setOptions=function(e){this.g.setOptions(e)},E("FaceDetection",qt),E("FACEDETECTION_LIPS",St),E("FACEDETECTION_LEFT_EYE",Ct),E("FACEDETECTION_LEFT_EYEBROW",Et),E("FACEDETECTION_RIGHT_EYE",At),E("FACEDETECTION_RIGHT_EYEBROW",Nt),E("FACEDETECTION_FACE_OVAL",Tt),E("FACEDETECTION_CONTOURS",Mt),E("FACEDETECTION_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),E("VERSION","0.4.1646425229")}).call(this)},4679:function(e,t,n){"use strict";n.d(t,{JL:function(){return i},Zu:function(){return o}});var r=n(7853),a=n(4531),i=function(){function e(t,n){(0,r.Z)(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return(0,a.Z)(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),o=function(){function e(){(0,r.Z)(this,e)}return(0,a.Z)(e,[{key:"refCount",value:function(e){return u("refCount")}},{key:"incRef",value:function(e){return u("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return u("time")}},{key:"read",value:function(e){return u("read")}},{key:"readSync",value:function(e){return u("readSync")}},{key:"readToGPU",value:function(e,t){return u("readToGPU")}},{key:"numDataIds",value:function(){return u("numDataIds")}},{key:"disposeData",value:function(e,t){return u("disposeData")}},{key:"write",value:function(e,t,n){return u("write")}},{key:"move",value:function(e,t,n,r,a){return u("move")}},{key:"createTensorFromGPUData",value:function(e,t,n){return u("createTensorFromGPUData")}},{key:"memory",value:function(){return u("memory")}},{key:"floatPrecision",value:function(){return u("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return u("dispose")}}]),e}();function u(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}},745:function(e,t,n){"use strict";n.d(t,{GP:function(){return o},qP:function(){return u},pA:function(){return s}});var r=n(1303);function a(e,t,n){var r=function(e,t,n){return function(e,t,n){var r=0,a=e.length,i=0,o=!1;for(;r<a;){var u=n(t,e[i=r+(a-r>>>1)]);u>0?r=i+1:(a=i,o=!u)}return o?r:-r-1}(e,t,n||i)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function i(e,t){return e>t?1:e<t?-1:0}function o(e,t,n,r,a){return c(e,t,n,r,a,0)}function u(e,t,n,r,a,i){return c(e,t,n,r,a,0,!1,i,!0)}function s(e,t,n,r,a,i){return c(e,t,n,r,a,i,!0)}function c(e,t,n,i,o,u){for(var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]&&arguments[7],d=arguments.length>8&&void 0!==arguments[8]&&arguments[8],p=[],v=0;v<t.length;v++)t[v]>o&&p.push({score:t[v],boxIndex:v,suppressBeginIndex:0});p.sort(h);for(var g=u>0?-.5/u:0,m=[],y=[];m.length<n&&p.length>0;){var b=p.pop(),x=b.score,w=b.boxIndex,k=b.suppressBeginIndex;if(x<o)break;for(var _=!1,S=m.length-1;S>=k;--S){var C=l(e,w,m[S]);if(C>=i){_=!0;break}if(b.score=b.score*f(i,g,C),b.score<=o)break}b.suppressBeginIndex=m.length,_||(b.score===x?(m.push(w),y.push(b.score)):b.score>o&&a(p,b,h))}var E=m.length,A=n-E;c&&A>0&&(m.push.apply(m,(0,r.Z)(new Array(A).fill(0))),y.push.apply(y,(0,r.Z)(new Array(A).fill(0))));var N={selectedIndices:m};return s&&(N.selectedScores=y),d&&(N.validOutputs=E),N}function l(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),u=Math.max(r[0],r[2]),s=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),l=Math.min(a[1],a[3]),f=Math.max(a[0],a[2]),h=Math.max(a[1],a[3]),d=(u-i)*(s-o),p=(f-c)*(h-l);if(d<=0||p<=0)return 0;var v=Math.max(i,c),g=Math.max(o,l),m=Math.min(u,f),y=Math.min(s,h),b=Math.max(m-v,0)*Math.max(y-g,0);return b/(d+p-b)}function f(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function h(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}},4189:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(7039);function a(e,t){for(var n=[],a=0;a<t.length;a++)t[a]&&n.push(a);for(var i=(0,r.f)(e,"int32"),o=(0,r.f)([n.length,e.length],"int32"),u=0;u<n.length;u++){var s=i.indexToLoc(n[u]),c=u*e.length;o.values.set(s,c)}return o.toTensor()}},318:function(e,t,n){"use strict";n.d(t,{BV:function(){return T},wv:function(){return N}});var r=n(9472),a=n(1303),i=n(3032),o=n(7853),u=n(4531),s=n(4322),c=n.n(s),l=n(4679),f=n(5050),h=n(6581),d=n(2145),p=n(8864),v=n(7269),g=n(115),m=n(6147),y=function(){function e(t,n){(0,o.Z)(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new b)}return(0,u.Z)(e,[{key:"profileKernel",value:function(e,t,n){var a,i,o=function(){a=n()},u=g.now();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(o);else{o();var s,c=(0,r.Z)(a);try{for(c.s();!(s=c.n()).done;){s.value.dataSync()}}catch(d){c.e(d)}finally{c.f()}i=Promise.resolve({kernelMs:g.now()-u})}if((0,f.OB)().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var l=function(t){var n=a[t];n.data().then((function(t){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(t,n.dtype,e)}))},h=0;h<a.length;h++)l(h);return{kernelName:e,outputs:a,inputs:t,timeMs:i.then((function(e){return e.kernelMs})),extraInfo:i.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,i=e.inputs,o=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,o]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],i,r[2])}))}))}}]),e}();var b=function(){function e(){(0,o.Z)(this,e)}return(0,u.Z)(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,i){var o="number"===typeof r?m.oj("".concat(r,"ms"),9):r.error,u=m.oj(e,25),s=t.rank,c=t.size,l=m.oj(t.shape.toString(),14),f="";for(var h in a){var d=a[h];if(null!=d){var p=d.shape||t.shape,v=p.length;f+="".concat(h,": ").concat(v,"D ").concat(v>0?p:""," ")}}console.log("%c".concat(u,"\t%c").concat(o,"\t%c").concat(s,"D ").concat(l,"\t%c").concat(c,"\t%c").concat(f,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();function x(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(var o=0;o<e.length;o++){var u=e[o],s=u.inputs;for(var c in s){for(var l=s[c],f=!1,h=0;h<t.length;h++)if(r[l.id]){u.outputs.forEach((function(e){return r[e.id]=!0})),f=!0,a[u.id]=!0;break}if(f)break}}var d={};d[n.id]=!0;for(var p={},v=e.length-1;v>=0;v--)for(var g=e[v],m=g.inputs,y=0;y<g.outputs.length;y++)if(d[g.outputs[y].id]){for(var b in m)d[m[b].id]=!0,p[g.id]=!0;break}for(var x=[],w=0;w<e.length;w++){var k=e[w];if(a[k.id]&&p[k.id]){var _={};for(var S in k.inputs){var C=k.inputs[S];r[C.id]&&(_[S]=C)}var E=Object.assign({},k);E.inputs=_,E.outputs=k.outputs,x.push(E)}}return x}function w(e,t,n,r){for(var a=function(a){var i=t[a],o=[];if(i.outputs.forEach((function(t){var n=e[t.id];null!=n?o.push(n):o.push(null)})),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(i.kernelName,"."));var u=i.gradient(o),s=function(t){if(!(t in u))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(u),"."));var a=n((function(){return u[t]()}));if("float32"!==a.dtype)throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(a.dtype,"'"));var o=i.inputs[t];if(!m.cO(a.shape,o.shape))throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(a.shape,"', which does not match ")+"the shape of the input '".concat(o.shape,"'"));if(null==e[o.id])e[o.id]=a;else{var s=e[o.id];e[o.id]=r(s,a),s.dispose()}};for(var c in i.inputs)s(c)},i=t.length-1;i>=0;i--)a(i)}var k=n(4376),_=n(9064);function S(e){return null!=e.kernelName}var C=function(){function e(){(0,o.Z)(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return(0,u.Z)(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),E=function(){function e(t){(0,o.Z)(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new C}return(0,u.Z)(e,[{key:"ready",value:function(){var e=(0,i.Z)(c().mark((function e(){var t,n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=18;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=15;break}return e.next=14,this.setBackend(r);case 14:return e.abrupt("return");case 15:n++,e.next=6;break;case 18:throw new Error("Could not initialize any backends, all backend initializations failed.");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(v.Z("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:function(){var e=(0,i.Z)(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=16;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=12;break}return e.next=9,r;case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=r;case 13:if(e.t0){e.next=16;break}return e.abrupt("return",!1);case 16:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new y(this.backendInstance),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var e=this;(0,p.tr)(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;(0,p.tr)(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof l.Zu||"function"!==typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,v.Z("Initialization of backend ".concat(e," failed")),v.Z(n.stack||n.message)),!1}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}catch(o){return v.Z("Initialization of backend ".concat(e," failed")),v.Z(o.stack||o.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(a){throw t(),a}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=T.runKernel(d.iJz,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e},n={dtype:"float32"};return T.runKernel(d.RFZ,t,n)}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==this.backendName&&this.backend,!(null!=(0,p.pI)(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-i;if(o>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(o," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r,a=this,i=[],o=this.isTapeOn(),u=this.state.numBytes,s=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var c=S(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(S(e)){var l=e.kernelName,f=e.inputs,h=e.attrs;null==this.backendName&&this.backend;var d=(0,p.pI)(l,this.backendName);m.hu(null!=d,(function(){return"Cannot find registered kernel '".concat(l,"' for backend '").concat(a.backendName,"'")})),n=function(){var e=a.backend.numDataIds();r=d.kernelFunc({inputs:f,attrs:h,backend:a.backend});var t=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(l,e,t);var n=t.map((function(e){return null!=e.rank?e:a.makeTensorFromTensorInfo(e)}));if(o){var u=a.getTensorsForGradient(l,f,n);i=a.saveTensorsForBackwardMode(u)}return n}}else{var v=e.forwardFunc,g=function(e){o&&(i=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return v(a.backend,g)}));var t=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,e,t),t}}var y,b=e.inputs,x=e.attrs,w=S(e)?null:e.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(y=a.profiler.profileKernel(c,b,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(y),t=y.outputs):t=n()})),o&&this.addTapeNode(c,b,t,w,i,x),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-u,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-s,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(b).map((function(e){return null!=b[e]?b[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:y.timeMs,extraInfo:y.extraInfo}),Array.isArray(r)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this,n=e.map((function(e){return t.keep(t.clone(e))}));return n}},{key:"getTensorsForGradient",value:function(e,t,n){var r=(0,p.uk)(e);if(null!=r){var a,i=r.inputsToSave||[],o=r.outputsToSave||[];r.saveAllInputs?(m.hu(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=i.map((function(e){return t[e]}));var u=n.filter((function(e,t){return o[t]}));return a.concat(u)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&m.HD(e[0])&&(a=e.map((function(e){return g.encodeString(e)})));var i=r.write(a,t,n),o=new k.es(t,n,i,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){var u=this.state.tensorInfo.get(i),s=(0,m.Ub)(a);this.state.numBytes+=s-u.bytes,u.bytes=s}return o}},{key:"makeTensorFromDataId",value:function(e,t,n,r){var a={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(a,r)}},{key:"makeTensorFromTensorInfo",value:function(e,t){var n=e.dataId,r=e.shape,a=e.dtype,i=new k.es(r,a,n,this.nextTensorId());return this.trackTensor(i,t),i}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new k._w(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*m.bT(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof k._w||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*m.bT(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:function(){var e=(0,i.Z)(c().mark((function e(t){var n,i,o,u,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,i=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=6,t();case 6:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,(0,a.Z)(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-i,o=(0,r.Z)(this.state.activeProfile.kernels),e.prev=12,o.s();case 14:if((u=o.n()).done){e.next=24;break}return s=u.value,e.next=18,s.kernelTimeMs;case 18:return s.kernelTimeMs=e.sent,e.next=21,s.extraInfo;case 21:s.extraInfo=e.sent;case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),o.e(e.t0);case 29:return e.prev=29,o.f(),e.finish(29);case 32:return e.abrupt("return",this.state.activeProfile);case 33:case"end":return e.stop()}}),e,this,[[12,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,i){var o=this,u={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},s=(0,p.uk)(e);null!=s&&(r=s.gradFunc),null!=r&&(u.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=m.wT(r.size,r.dtype);return o.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,i)}),this.state.activeTape.push(u)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=(0,_.getTensorsInContainer)(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||r.has(i.id)||i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==o.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var a=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(m.hu(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var o=this.scopedRun((function(){return a.startTape()}),(function(){return a.endTape()}),(function(){return a.tidy("forward",e)}));m.hu(o instanceof k.es,(function(){return"The result y returned by f() must be a tensor."}));var u=x(this.state.activeTape,t,o);if(!i&&0===u.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[o.id]=null==n?A(o.shape):n,w(e,u,(function(e){return a.tidy(e)}),M);var i=t.map((function(t){return e[t.id]}));return 0===a.state.gradientDepth&&(a.state.activeTape.forEach((function(e){var t,n=(0,r.Z)(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(a){n.e(a)}finally{n.f()}})),a.state.activeTape=null),{value:o,grads:i}}))}},{key:"customGrad",value:function(e){var t=this;return m.hu(m.mf(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i;m.hu(r.every((function(e){return e instanceof k.es})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};r.forEach((function(e,t){o[t]=e}));var u=function(t,n){return i=e.apply(void 0,[].concat(r,[n])),m.hu(i.value instanceof k.es,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),m.hu(m.mf(i.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),i.value},s=function(e,t){var n=i.gradFunc(e,t),a=Array.isArray(n)?n:[n];m.hu(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),m.hu(a.every((function(e){return e instanceof k.es})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(e,t){o[t]=function(){return e}})),o};return t.runKernelFunc({forwardFunc:u,backwardsFunc:s,inputs:o})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"readToGPU",value:function(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}},{key:"time",value:function(){var e=(0,i.Z)(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,g.now)(),e.next=3,this.backend.time(t);case 3:return(r=e.sent).wallMs=(0,g.now)()-n,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new C,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}();function A(e){var t=(0,m.p8)((0,m.NA)(e),"float32");return T.makeTensor(t,e,"float32")}function N(){var e=(0,h.D)();if(null==e._tfengine){var t=new f.qA(e);e._tfengine=new E(t)}return(0,f.iG)(e._tfengine.ENV),(0,k.Vi)((function(){return e._tfengine})),e._tfengine}E.nextTensorId=0,E.nextVariableId=0;var T=N();function M(e,t){var n={a:e,b:t};return T.runKernel(d.mm_,n)}},5050:function(e,t,n){"use strict";n.d(t,{OB:function(){return p},Vi:function(){return v},iG:function(){return g},qA:function(){return f}});var r=n(678),a=n(3032),i=n(7853),o=n(4531),u=n(4322),s=n.n(u),c=n(6147),l="tfjsflags",f=function(){function e(t){(0,i.Z)(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=h,this.populateURLFlags()}return(0,o.Z)(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&(p().getBool("IS_TEST")||p().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];p().getBool("IS_TEST")||p().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:function(){var e=(0,a.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=2;break}return e.abrupt("return",this.flags[t]);case 2:return e.next=4,this.evaluateFlag(t);case 4:return this.flags[t]=e.sent,e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if((0,c.tI)(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getString",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if("undefined"!==typeof this.global&&"undefined"!==typeof this.global.location&&"undefined"!==typeof this.global.location.search){var t=this.getQueryParams(this.global.location.search);if(l in t)t.tfjsflags.split(",").forEach((function(t){var n=t.split(":"),a=(0,r.Z)(n,2),i=a[0],o=a[1];e.urlFlags[i]=function(e,t){var n=t.toLowerCase();return"true"===n||"false"===n?"true"===n:"".concat(+n)===n?+n:t}(0,o)}))}}}]),e}();function h(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return d(t,r[0],r[1]),r.join("=")})),t}function d(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function p(){return v}var v=null;function g(e){v=e}},6581:function(e,t,n){"use strict";var r;function a(){if(null==r){var e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}r=e}return r}function i(e,t){var n=function(){var e=a();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}n.d(t,{D:function(){return a},R:function(){return i}})},5875:function(e,t,n){"use strict";n.d(t,{B9:function(){return g},CQ:function(){return b},Cd:function(){return x},Cn:function(){return m},G4:function(){return u},MX:function(){return l},N5:function(){return p},N8:function(){return f},N_:function(){return w},R:function(){return s},SR:function(){return h},VY:function(){return A},XV:function(){return y},cF:function(){return c},cj:function(){return k},jq:function(){return C},lu:function(){return v},sq:function(){return d},x3:function(){return _},y3:function(){return E},ze:function(){return S}});var r=n(318),a=n(5050),i=n(4376),o=n(9064);function u(){(0,a.OB)().set("PROD",!0)}function s(){(0,a.OB)().set("DEBUG",!0)}function c(){(0,a.OB)().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function l(e){(0,a.OB)().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function f(){r.BV.disposeVariables()}function h(){return r.BV}function d(){return r.BV.memory()}function p(e){return r.BV.profile(e)}function v(e,t){return r.BV.tidy(e,t)}function g(e){(0,o.getTensorsInContainer)(e).forEach((function(e){return e.dispose()}))}function m(e){return r.BV.keep(e)}function y(e){return r.BV.time(e)}function b(e){return r.BV.setBackend(e)}function x(){return r.BV.ready()}function w(){return r.BV.backendName}function k(e){r.BV.removeBackend(e)}function _(e){return r.BV.findBackend(e)}function S(e){return r.BV.findBackendFactory(e)}function C(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return r.BV.registerBackend(e,t,n)}function E(){return r.BV.backend}function A(e,t){(0,a.OB)().setPlatform(e,t)}(0,i.FZ)(l)},6450:function(e,t,n){"use strict";n.d(t,{UQ:function(){return s},cb:function(){return d},fN:function(){return f},h7:function(){return l},pn:function(){return h},ti:function(){return c}});var r=n(1303),a=n(318),i=n(4376),o=n(8354),u=n(6147);function s(e){return u.hu(u.mf(e),(function(){return"The f passed in grad(f) must be a function"})),function(t,n){var r=(0,o._1)(t,"x","tf.grad","string_or_numeric"),i=null!=n?(0,o._1)(n,"dy","tf.grad"):null;return a.BV.tidy((function(){var t=a.BV.gradients((function(){return e(r)}),[r],i),n=t.value,o=t.grads;return null!=i&&u.k5(n.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),p(o),o[0]}))}}function c(e){return u.hu(u.mf(e),(function(){return"The f passed in grads(f) must be a function"})),function(t,n){u.hu(Array.isArray(t),(function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"}));var i=(0,o.sI)(t,"args","tf.grads","string_or_numeric"),s=null!=n?(0,o._1)(n,"dy","tf.grads"):null;return a.BV.tidy((function(){var t=a.BV.gradients((function(){return e.apply(void 0,(0,r.Z)(i))}),i,s),n=t.value,o=t.grads;return null!=s&&u.k5(n.shape,s.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),p(o),o}))}}function l(e){return u.hu(u.mf(e),(function(){return"The f passed in valueAndGrad(f) must be a function"})),function(t,n){u.hu(t instanceof i.es,(function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"})),u.hu(null==n||n instanceof i.es,(function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"}));var r=a.BV.gradients((function(){return e(t)}),[t],n),o=r.grads,s=r.value;return p(o),{grad:o[0],value:s}}}function f(e){return u.hu(u.mf(e),(function(){return"The f passed in valueAndGrads(f) must be a function"})),function(t,n){u.hu(Array.isArray(t)&&t.every((function(e){return e instanceof i.es})),(function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"})),u.hu(null==n||n instanceof i.es,(function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"}));var o=a.BV.gradients((function(){return e.apply(void 0,(0,r.Z)(t))}),t,n);return null!=n&&u.k5(o.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),p(o.grads),o}}function h(e,t){u.hu(u.mf(e),(function(){return"The f passed in variableGrads(f) must be a function"})),u.hu(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof i._w})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],a.BV.registeredVariables)t.push(a.BV.registeredVariables[r]);var o=n?t.filter((function(e){return!e.trainable})):null,s=t.length;t=t.filter((function(e){return e.trainable})),u.hu(t.length>0,(function(){return"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(s," variables is ")+"trainable."}));var c=a.BV.gradients(e,t,null,!0),l=c.value,f=c.grads;u.hu(f.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),u.hu(0===l.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(l.rank," tensor")}));var h={};return t.forEach((function(e,t){null!=f[t]&&(h[e.name]=f[t])})),null!=o&&o.forEach((function(e){return h[e.name]=null})),{value:l,grads:h}}function d(e){return a.BV.customGrad(e)}function p(e){if(e.filter((function(e){return null==e})).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}},3613:function(e,t,n){"use strict";n.r(t),n.d(t,{Abs:function(){return Bt.SYM},Acos:function(){return Bt.VGw},Acosh:function(){return Bt.SpW},AdadeltaOptimizer:function(){return Ve},AdagradOptimizer:function(){return He},AdamOptimizer:function(){return Ye},AdamaxOptimizer:function(){return Qe},Add:function(){return Bt.mm_},AddN:function(){return Bt.Xze},All:function(){return Bt.oT6},Any:function(){return Bt.IKK},ArgMax:function(){return Bt.sJF},ArgMin:function(){return Bt.aJk},Asin:function(){return Bt.M2y},Asinh:function(){return Bt.qw7},Atan:function(){return Bt.jMg},Atan2:function(){return Bt.QCc},Atanh:function(){return Bt.Oyi},AvgPool:function(){return Bt.JhU},AvgPool3D:function(){return Bt._k9},AvgPool3DGrad:function(){return Bt.IMb},AvgPoolGrad:function(){return Bt.ROF},BatchMatMul:function(){return Bt.XLW},BatchToSpaceND:function(){return Bt.zws},Bincount:function(){return Bt.zvY},BitwiseAnd:function(){return Bt.hCO},BroadcastArgs:function(){return Bt.eEB},BroadcastTo:function(){return Bt.Ly9},Cast:function(){return Bt.RFZ},Ceil:function(){return Bt.gJX},ClipByValue:function(){return Bt.xnO},Complex:function(){return Bt.Zz9},ComplexAbs:function(){return Bt.yj2},Concat:function(){return Bt.Eh3},Conv2D:function(){return Bt.mhS},Conv2DBackpropFilter:function(){return Bt.wUP},Conv2DBackpropInput:function(){return Bt.wm},Conv3D:function(){return Bt.x12},Conv3DBackpropFilterV2:function(){return Bt.o2y},Conv3DBackpropInputV2:function(){return Bt.ik2},Cos:function(){return Bt.mc4},Cosh:function(){return Bt.TR1},CropAndResize:function(){return Bt.VcC},Cumprod:function(){return Bt.Byc},Cumsum:function(){return Bt.iHb},DataStorage:function(){return Fr.JL},DenseBincount:function(){return Bt.QRR},DepthToSpace:function(){return Bt.T0n},DepthwiseConv2dNative:function(){return Bt.cie},DepthwiseConv2dNativeBackpropFilter:function(){return Bt.sL$},DepthwiseConv2dNativeBackpropInput:function(){return Bt.y7R},Diag:function(){return Bt.$w},Dilation2D:function(){return Bt.p4S},Dilation2DBackpropFilter:function(){return Bt.Vn9},Dilation2DBackpropInput:function(){return Bt.ekb},Draw:function(){return Bt.hGc},ENV:function(){return y.Vi},Einsum:function(){return Bt.$g6},Elu:function(){return Bt.SX0},EluGrad:function(){return Bt.HEU},Environment:function(){return y.qA},Equal:function(){return Bt.hdR},Erf:function(){return Bt.Omj},Exp:function(){return Bt.NEP},ExpandDims:function(){return Bt.YFo},Expm1:function(){return Bt.Y0y},FFT:function(){return Bt.vwp},Fill:function(){return Bt.deh},FlipLeftRight:function(){return Bt.Uyb},Floor:function(){return Bt.OR},FloorDiv:function(){return Bt.jeX},FromPixels:function(){return Bt.eBW},FusedBatchNorm:function(){return Bt.sHE},FusedConv2D:function(){return Bt._V0},FusedDepthwiseConv2D:function(){return Bt.luS},GatherNd:function(){return Bt.q1x},GatherV2:function(){return Bt.qi_},Greater:function(){return Bt.iZT},GreaterEqual:function(){return Bt.Acj},IFFT:function(){return Bt.Qg5},Identity:function(){return Bt.iJz},Imag:function(){return Bt.J_u},IsFinite:function(){return Bt.avt},IsInf:function(){return Bt.iWB},IsNan:function(){return Bt.r7n},KernelBackend:function(){return Fr.Zu},LRN:function(){return Bt.eZ0},LRNGrad:function(){return Bt.Hhh},LeakyRelu:function(){return Bt.J$2},Less:function(){return Bt.vtC},LessEqual:function(){return Bt.CAk},LinSpace:function(){return Bt.e7N},Log:function(){return Bt.ZbH},Log1p:function(){return Bt.kU},LogSoftmax:function(){return Bt.qCd},LogicalAnd:function(){return Bt.PYm},LogicalNot:function(){return Bt.VfG},LogicalOr:function(){return Bt.MZg},LogicalXor:function(){return Bt.w6g},LowerBound:function(){return Bt.qIC},MatrixBandPart:function(){return Bt.J7O},Max:function(){return Bt.YoZ},MaxPool:function(){return Bt.mTV},MaxPool3D:function(){return Bt.OAf},MaxPool3DGrad:function(){return Bt.OU7},MaxPoolGrad:function(){return Bt.OV7},MaxPoolWithArgmax:function(){return Bt.vFR},Maximum:function(){return Bt.BMI},Mean:function(){return Bt.q2K},Min:function(){return Bt.c17},Minimum:function(){return Bt.q8u},MirrorPad:function(){return Bt.jQs},Mod:function(){return Bt.Vbg},MomentumOptimizer:function(){return et},Multinomial:function(){return Bt.NZg},Multiply:function(){return Bt.wYn},Neg:function(){return Bt.kuV},NonMaxSuppressionV3:function(){return Bt.uv1},NonMaxSuppressionV4:function(){return Bt.cye},NonMaxSuppressionV5:function(){return Bt.W0H},NotEqual:function(){return Bt.yQU},OP_SCOPE_SUFFIX:function(){return bn.zvA},OneHot:function(){return Bt.we_},OnesLike:function(){return Bt.qWM},Optimizer:function(){return We},OptimizerConstructors:function(){return mn},Pack:function(){return Bt.QiL},PadV2:function(){return Bt.lyA},Pool:function(){return Bt.Kgp},Pow:function(){return Bt.pe_},Prelu:function(){return Bt.o0g},Prod:function(){return Bt.DlI},RMSPropOptimizer:function(){return tt},RaggedGather:function(){return Bt.dDz},RaggedRange:function(){return Bt.CQl},RaggedTensorToTensor:function(){return Bt.BiW},Range:function(){return Bt.e6w},Rank:function(){return yn.yw},Real:function(){return Bt.xJR},RealDiv:function(){return Bt.oHH},Reciprocal:function(){return Bt.$HU},Reduction:function(){return xn.I},Relu:function(){return Bt.qkr},Relu6:function(){return Bt.SbG},Reshape:function(){return Bt.HZH},ResizeBilinear:function(){return Bt._Yw},ResizeBilinearGrad:function(){return Bt.zbQ},ResizeNearestNeighbor:function(){return Bt.dpD},ResizeNearestNeighborGrad:function(){return Bt.Hmb},Reverse:function(){return Bt.mKl},RotateWithOffset:function(){return Bt.b9H},Round:function(){return Bt.e07},Rsqrt:function(){return Bt.bV0},SGDOptimizer:function(){return Je},ScatterNd:function(){return Bt.xQA},SearchSorted:function(){return Bt.nr8},Select:function(){return Bt.PhF},Selu:function(){return Bt.oFR},Sigmoid:function(){return Bt.a5O},Sign:function(){return Bt.i5y},Sin:function(){return Bt.RQH},Sinh:function(){return Bt.wYB},Slice:function(){return Bt.p2w},Softmax:function(){return Bt.Gcp},Softplus:function(){return Bt.MRv},SpaceToBatchND:function(){return Bt.TQc},SparseFillEmptyRows:function(){return Bt.O3z},SparseReshape:function(){return Bt.nhH},SparseSegmentMean:function(){return Bt.w3H},SparseSegmentSum:function(){return Bt.ZjV},SparseToDense:function(){return Bt.D2d},SplitV:function(){return Bt.L8s},Sqrt:function(){return Bt.FKq},Square:function(){return Bt.bK0},SquaredDifference:function(){return Bt._tC},StaticRegexReplace:function(){return Bt.e0R},Step:function(){return Bt.h8e},StridedSlice:function(){return Bt.jQk},StringNGrams:function(){return Bt._JP},StringSplit:function(){return Bt.s1s},StringToHashBucketFast:function(){return Bt.XkS},Sub:function(){return Bt.Tr8},Sum:function(){return Bt.GBy},Tan:function(){return Bt.sEM},Tanh:function(){return Bt.MIZ},Tensor:function(){return _e.es},TensorBuffer:function(){return _e.YD},TensorScatterUpdate:function(){return Bt.SIB},Tile:function(){return Bt.n9L},TopK:function(){return Bt.cWu},Transform:function(){return Bt.wx7},Transpose:function(){return Bt.G3Y},Unique:function(){return Bt.kpP},Unpack:function(){return Bt.ToN},UnsortedSegmentSum:function(){return Bt.Qvg},UpperBound:function(){return Bt.XDQ},Variable:function(){return _e._w},ZerosLike:function(){return Bt.RuY},_FusedMatMul:function(){return Bt.usg},abs:function(){return bn.WnP},acos:function(){return bn.Khb},acosh:function(){return bn.__u},add:function(){return bn.IHx},addN:function(){return bn.QBD},all:function(){return bn.$6P},any:function(){return bn.YjB},argMax:function(){return bn.NqF},argMin:function(){return bn.vHJ},asin:function(){return bn.ZRM},asinh:function(){return bn.VfV},atan:function(){return bn.z4N},atan2:function(){return bn.fvJ},atanh:function(){return bn.C80},avgPool:function(){return bn.wS1},avgPool3d:function(){return bn.uR5},backend:function(){return Ne.y3},backend_util:function(){return f},basicLSTMCell:function(){return bn.zEQ},batchNorm:function(){return bn.tgs},batchNorm2d:function(){return bn.Dxk},batchNorm3d:function(){return bn.JY5},batchNorm4d:function(){return bn.p3b},batchToSpaceND:function(){return bn.E4h},bincount:function(){return bn.yE8},bitwiseAnd:function(){return bn.ycw},booleanMaskAsync:function(){return bn.anm},broadcastArgs:function(){return bn.XsQ},broadcastTo:function(){return bn.UFq},broadcast_util:function(){return Zt},browser:function(){return u},buffer:function(){return bn.f3b},cast:function(){return bn.pju},ceil:function(){return bn.mDi},clipByValue:function(){return bn.iUl},clone:function(){return bn.d9v},complex:function(){return bn.PYB},concat:function(){return bn.zoF},concat1d:function(){return bn.gME},concat2d:function(){return bn.Izb},concat3d:function(){return bn.MNy},concat4d:function(){return bn.ZaL},conv1d:function(){return bn.PAt},conv2d:function(){return bn.Tek},conv2dTranspose:function(){return bn.bc},conv3d:function(){return bn.pdZ},conv3dTranspose:function(){return bn.$QV},copyRegisteredKernels:function(){return zt.T3},cos:function(){return bn.mCk},cosh:function(){return bn.f9Y},cosineWindow:function(){return bn.mew},cumprod:function(){return bn.$Gn},cumsum:function(){return bn.zbp},customGrad:function(){return Re.cb},denseBincount:function(){return bn.ppE},deprecationWarn:function(){return Ne.MX},depthToSpace:function(){return bn.nTT},depthwiseConv2d:function(){return bn.B10},device_util:function(){return r},diag:function(){return bn.Ka3},dilation2d:function(){return bn.WmZ},disableDeprecationWarnings:function(){return Ne.cF},dispose:function(){return Ne.B9},disposeVariables:function(){return Ne.N8},div:function(){return bn.hiC},divNoNan:function(){return bn.NTj},dot:function(){return bn.AKD},dropout:function(){return bn.rvX},einsum:function(){return bn.WYO},elu:function(){return bn.pyx},enableDebugMode:function(){return Ne.R},enableProdMode:function(){return Ne.G4},enclosingPowerOfTwo:function(){return bn.GRh},engine:function(){return Ne.SR},ensureShape:function(){return bn.EDe},env:function(){return y.OB},equal:function(){return bn.DgJ},erf:function(){return bn.qNN},euclideanNorm:function(){return bn.d2q},exp:function(){return bn.Qqt},expandDims:function(){return bn.dt4},expm1:function(){return bn.t$B},eye:function(){return bn.iyy},fft:function(){return bn.kp_},fill:function(){return bn.hlL},findBackend:function(){return Ne.x3},findBackendFactory:function(){return Ne.ze},floor:function(){return bn.GWj},floorDiv:function(){return bn.qPi},fused:function(){return bn.imm},gather:function(){return bn.Iqj},gatherND:function(){return bn.dbB},gather_util:function(){return s},getBackend:function(){return Ne.N_},getGradient:function(){return zt.uk},getKernel:function(){return zt.pI},getKernelsForBackend:function(){return zt.tr},grad:function(){return Re.UQ},grads:function(){return Re.ti},greater:function(){return bn.pjt},greaterEqual:function(){return bn.brS},ifft:function(){return bn.Sxn},imag:function(){return bn.asL},image:function(){return bn.BHj},inTopKAsync:function(){return bn.V3u},io:function(){return i},irfft:function(){return bn.wx0},isFinite:function(){return bn.xVT},isInf:function(){return bn.UWc},isNaN:function(){return bn.i2d},keep:function(){return Ne.Cn},kernel_impls:function(){return h},leakyRelu:function(){return bn.hi7},less:function(){return bn.d9m},lessEqual:function(){return bn.zN1},linalg:function(){return bn.$r2},linspace:function(){return bn.SX3},localResponseNormalization:function(){return bn.G9k},log:function(){return bn.cM7},log1p:function(){return bn.Krr},logSigmoid:function(){return bn.e_t},logSoftmax:function(){return bn.CmS},logSumExp:function(){return bn.l_t},logicalAnd:function(){return bn.HvI},logicalNot:function(){return bn.hJK},logicalOr:function(){return bn.K5V},logicalXor:function(){return bn.egP},losses:function(){return bn.MB5},lowerBound:function(){return bn.eab},matMul:function(){return bn.OI3},math:function(){return o},max:function(){return bn.Fp7},maxPool:function(){return bn._sB},maxPool3d:function(){return bn.YQQ},maxPoolWithArgmax:function(){return bn.Ip$},maximum:function(){return bn.gWQ},mean:function(){return bn.J69},memory:function(){return Ne.sq},meshgrid:function(){return bn.ry_},min:function(){return bn.VV$},minimum:function(){return bn.LTh},mirrorPad:function(){return bn.VdP},mod:function(){return bn.wQq},moments:function(){return bn.Gi7},movingAverage:function(){return bn.p_},mul:function(){return bn.dC7},multiRNNCell:function(){return bn.rq4},multinomial:function(){return bn.SJ_},neg:function(){return bn.W76},nextFrame:function(){return _n},norm:function(){return bn.KOy},notEqual:function(){return bn.Quu},oneHot:function(){return bn.lfX},ones:function(){return bn.iUs},onesLike:function(){return bn.JpU},op:function(){return bn.op},outerProduct:function(){return bn.N2O},pad:function(){return bn.vku},pad1d:function(){return bn.pNR},pad2d:function(){return bn.koy},pad3d:function(){return bn.t1L},pad4d:function(){return bn.lGY},pool:function(){return bn.d_R},pow:function(){return bn.sQ3},prelu:function(){return bn.AL3},print:function(){return bn.S0v},prod:function(){return bn.WVs},profile:function(){return Ne.N5},raggedGather:function(){return bn.$gW},raggedRange:function(){return bn.VT$},raggedTensorToTensor:function(){return bn.N89},rand:function(){return bn.TN_},randomGamma:function(){return bn.wzB},randomNormal:function(){return bn.nGf},randomStandardNormal:function(){return bn.ruB},randomUniform:function(){return bn.LGj},randomUniformInt:function(){return bn.pe5},range:function(){return bn.w6H},ready:function(){return Ne.Cd},real:function(){return bn.kwC},reciprocal:function(){return bn.M25},registerBackend:function(){return Ne.jq},registerGradient:function(){return zt.Li},registerKernel:function(){return zt.wC},relu:function(){return bn.UYe},relu6:function(){return bn.btT},removeBackend:function(){return Ne.cj},reshape:function(){return bn.XLQ},reverse:function(){return bn.GYS},reverse1d:function(){return bn.SDf},reverse2d:function(){return bn.diP},reverse3d:function(){return bn.sx7},reverse4d:function(){return bn.mG2},rfft:function(){return bn.QEs},round:function(){return bn.NMM},rsqrt:function(){return bn.bp0},scalar:function(){return bn.iD$},scatterND:function(){return bn.snQ},scatter_util:function(){return $t},searchSorted:function(){return bn.zcT},selu:function(){return bn.U8D},separableConv2d:function(){return bn.U_I},serialization:function(){return a},setBackend:function(){return Ne.CQ},setPlatform:function(){return Ne.VY},setdiff1dAsync:function(){return bn.ODp},sigmoid:function(){return bn.XD2},sign:function(){return bn.Xxe},signal:function(){return bn.tdS},sin:function(){return bn.O$l},sinh:function(){return bn.R_K},slice:function(){return bn.tPi},slice1d:function(){return bn.jZU},slice2d:function(){return bn.SmN},slice3d:function(){return bn.CnO},slice4d:function(){return bn.p0P},slice_util:function(){return Qt},softmax:function(){return bn.XAC},softplus:function(){return bn.Wvh},spaceToBatchND:function(){return bn.fBT},sparse:function(){return bn.rVs},sparseToDense:function(){return bn.ers},spectral:function(){return bn.uN7},split:function(){return bn.Vl2},sqrt:function(){return bn._b3},square:function(){return bn.h62},squaredDifference:function(){return bn.$i},squeeze:function(){return bn.L9e},stack:function(){return bn.knu},step:function(){return bn.Nbs},stridedSlice:function(){return bn.NXj},string:function(){return bn.Z_8},sub:function(){return bn.luU},sum:function(){return bn.Smz},sumOutType:function(){return yn.z4},tan:function(){return bn.ORZ},tanh:function(){return bn.AEp},tensor:function(){return bn.XeE},tensor1d:function(){return bn.RRF},tensor2d:function(){return bn.odF},tensor3d:function(){return bn.wOQ},tensor4d:function(){return bn.yXz},tensor5d:function(){return bn.Bfx},tensor6d:function(){return bn.xZs},tensorScatterUpdate:function(){return bn.Pg0},tensor_util:function(){return Jt},test_util:function(){return c},tidy:function(){return Ne.lu},tile:function(){return bn.Gg6},time:function(){return Ne.XV},topk:function(){return bn.hg7},train:function(){return wn},transpose:function(){return bn.p4s},truncatedNormal:function(){return bn.Xu6},unique:function(){return bn.Two},unregisterGradient:function(){return zt.bt},unregisterKernel:function(){return zt.nE},unsortedSegmentSum:function(){return bn.pUJ},unstack:function(){return bn.HHK},upcastType:function(){return yn.x8},upperBound:function(){return bn.GaM},util:function(){return en},valueAndGrad:function(){return Re.h7},valueAndGrads:function(){return Re.fN},variable:function(){return bn.VD$},variableGrads:function(){return Re.pn},version_core:function(){return gn},where:function(){return bn.arb},whereAsync:function(){return bn.itS},zeros:function(){return bn.lls},zerosLike:function(){return bn.P84}});var r={};n.r(r),n.d(r,{isBrowser:function(){return m},isMobile:function(){return g},mockIsMobile:function(){return v}});var a={};n.r(a),n.d(a,{Serializable:function(){return Le},SerializationMap:function(){return Pe},getRegisteredName:function(){return Ue},registerClass:function(){return je}});var i={};n.r(i),n.d(i,{CompositeArrayBuffer:function(){return F.w},browserFiles:function(){return ot},browserHTTPRequest:function(){return wt},concatenateArrayBuffers:function(){return E.JY},copyModel:function(){return le},decodeWeights:function(){return E.dI},decodeWeightsStream:function(){return E.r},encodeWeights:function(){return E.yz},fromMemory:function(){return Ct},fromMemorySync:function(){return Et},getLoadHandlers:function(){return D},getModelArtifactsForJSON:function(){return E.jN},getModelArtifactsForJSONSync:function(){return E.ji},getModelArtifactsInfoForJSON:function(){return E.Q},getSaveHandlers:function(){return M},getWeightSpecs:function(){return E.hu},http:function(){return xt},isHTTPScheme:function(){return yt},listModels:function(){return oe},loadWeights:function(){return dt},moveModel:function(){return he},registerLoadRouter:function(){return T},registerSaveRouter:function(){return N},removeModel:function(){return se},weightsLoaderFactory:function(){return vt},withSaveHandler:function(){return At},withSaveHandlerSync:function(){return Nt}});var o={};n.r(o),n.d(o,{confusionMatrix:function(){return Rt}});var u={};n.r(u),n.d(u,{draw:function(){return Xt},fromPixels:function(){return Yt},fromPixelsAsync:function(){return Wt},toPixels:function(){return Ht}});var s={};n.r(s),n.d(s,{prepareAndValidate:function(){return Kt}});var c={};n.r(c),n.d(c,{TEST_EPSILON_FLOAT16:function(){return tn},createVideoElement:function(){return dn},encodeStrings:function(){return hn},expectArrayBuffersEqual:function(){return fn},expectArraysClose:function(){return nn},expectArraysEqual:function(){return un},expectNumbersClose:function(){return sn},expectPromiseToFail:function(){return on},expectValuesInRange:function(){return ln},play:function(){return pn},testEpsilon:function(){return rn}});var l={};n.r(l),n.d(l,{collectGatherOpShapeInfo:function(){return Ar},computeOutShape:function(){return Er},segOpComputeOptimalWindowSize:function(){return Cr}});var f={};n.r(f),n.d(f,{ERF_A1:function(){return Vn},ERF_A2:function(){return qn},ERF_A3:function(){return Hn},ERF_A4:function(){return Gn},ERF_A5:function(){return Xn},ERF_P:function(){return Wn},PARALLELIZE_THRESHOLD:function(){return On},RowPartitionType:function(){return An},SELU_SCALE:function(){return Un.$},SELU_SCALEALPHA:function(){return Un.y},applyActivation:function(){return Tn.QH},assertAndGetBroadcastShape:function(){return Zt.assertAndGetBroadcastShape},assertAxesAreInnerMostDims:function(){return Sn.lB},assertParamsConsistent:function(){return Cn},assignToTypedArray:function(){return tr},axesAreInnerMostDims:function(){return Sn.YB},calculateShapes:function(){return $t.calculateShapes},checkEinsumDimSizes:function(){return sr},checkPadOnDimRoundingMode:function(){return Nn.m},combineLocations:function(){return Sn.Vh},combineRaggedTensorToTensorShapes:function(){return Mn},complexWithEvenIndex:function(){return Qn},complexWithOddIndex:function(){return Jn},computeConv2DInfo:function(){return Nn.Ix},computeConv3DInfo:function(){return Nn.jw},computeDefaultPad:function(){return Nn.aO},computeDilation2DInfo:function(){return Nn.Rf},computeOptimalWindowSize:function(){return Rn},computeOutAndReduceShapes:function(){return Sn.kz},computeOutShape:function(){return En},computePool2DInfo:function(){return Nn.Xw},computePool3DInfo:function(){return Nn.pl},convertConv2DDataFormat:function(){return Nn.sl},decodeEinsumEquation:function(){return or},eitherStridesOrDilationsAreOne:function(){return Nn.jT},expandShapeToKeepDim:function(){return Sn.rv},exponent:function(){return rr},exponents:function(){return nr},fromStringArrayToUint8:function(){return Tr},fromUint8ToStringArray:function(){return Nr},getAxesPermutation:function(){return Sn.Q3},getBroadcastDims:function(){return Zt.getBroadcastDims},getComplexWithIndex:function(){return er},getEinsumComputePath:function(){return cr},getEinsumPermutation:function(){return ur},getFusedBiasGradient:function(){return Tn.pf},getFusedDyActivation:function(){return Tn.Fr},getImageCenter:function(){return Zn},getInnerMostAxes:function(){return Sn.sY},getPermuted:function(){return zn},getRaggedRank:function(){return Fn},getReductionAxes:function(){return Zt.getReductionAxes},getReshaped:function(){return Bn},getReshapedPermuted:function(){return Ln},getRowPartitionTypesHelper:function(){return Dn},getSliceBeginCoords:function(){return Pn},getSliceSize:function(){return jn},getSparseFillEmptyRowsIndicesDenseShapeMismatch:function(){return dr},getSparseFillEmptyRowsNegativeIndexErrorMessage:function(){return pr},getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:function(){return vr},getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:function(){return yr},getSparseReshapeInputOutputMismatchErrorMessage:function(){return xr},getSparseReshapeInputOutputMultipleErrorMessage:function(){return br},getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:function(){return gr},getSparseReshapeNegativeOutputDimErrorMessage:function(){return mr},getSparseSegmentReductionIndicesOutOfRangeErrorMessage:function(){return Sr},getSparseSegmentReductionNegativeSegmentIdsErrorMessage:function(){return wr},getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:function(){return kr},getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:function(){return _r},getUndoAxesPermutation:function(){return Sn.LJ},isIdentityPermutation:function(){return lr},log:function(){return Yn.c},mergeRealAndImagArrays:function(){return Kn},prepareAndValidate:function(){return Kt},prepareSplitSize:function(){return hr},segment_util:function(){return l},shouldFuse:function(){return Tn.uy},slice_util:function(){return Qt},splitRealAndImagArrays:function(){return $n},stridesOrDilationsArePositive:function(){return Nn.U3},tupleValuesAreOne:function(){return Nn.I0},upcastType:function(){return yn.x8},validateDefaultValueShape:function(){return In},validateInput:function(){return $t.validateInput},validateUpdateShape:function(){return $t.validateUpdateShape},warn:function(){return Yn.Z}});var h={};n.r(h),n.d(h,{nonMaxSuppressionV3Impl:function(){return Mr.GP},nonMaxSuppressionV4Impl:function(){return Mr.qP},nonMaxSuppressionV5Impl:function(){return Mr.pA},whereImpl:function(){return Dr.Z}});var d,p=n(318);function v(e){d=e}function g(e){if(void 0!==d)return d;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;var t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){var n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function m(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}var y=n(5050),b=(0,y.OB)();b.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),b.registerFlag("IS_BROWSER",(function(){return m()})),b.registerFlag("IS_NODE",(function(){return"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node})),b.registerFlag("IS_CHROME",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),b.registerFlag("IS_SAFARI",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)})),b.registerFlag("PROD",(function(){return!1})),b.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return b.getBool("DEBUG")})),b.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),b.registerFlag("IS_TEST",(function(){return!1})),b.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return b.getBool("DEBUG")})),b.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1})),b.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",(function(){return!1})),b.registerFlag("USE_SETTIMEOUTCUSTOM",(function(){return!1}));var x=n(7853),w=n(4531),k=n(9472),_=n(3032),S=n(4322),C=n.n(S),E=n(1434),A=function(){function e(){(0,x.Z)(this,e),this.saveRouters=[],this.loadRouters=[]}return(0,w.Z)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),N=function(e){return A.registerSaveRouter(e)},T=function(e){return A.registerLoadRouter(e)},M=function(e){return A.getSaveHandlers(e)},D=function(e,t){return A.getLoadHandlers(e,t)},F=n(5714),I="tensorflowjs",O="models_store",R="model_info_store";function Z(){if(!(0,y.OB)().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function B(e){var t=e.result;t.createObjectStore(O,{keyPath:"modelPath"}),t.createObjectStore(R,{keyPath:"modelPath"})}var z=function(){function e(t){if((0,x.Z)(this,e),this.indexedDB=Z(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return(0,w.Z)(e,[{key:"save",value:function(){var e=(0,_.Z)(C().mark((function e(t){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=(0,_.Z)(C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open(I,1);a.onupgradeneeded=function(){return B(a)},a.onsuccess=function(){var i=a.result;if(null==t){var o=i.transaction(O,"readonly"),u=o.objectStore(O).get(n.modelPath);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));e(u.result.modelArtifacts)},u.onerror=function(e){return i.close(),r(u.error)},o.oncomplete=function(){return i.close()}}else{t.weightData=F.w.join(t.weightData);var s,c,l=(0,E.Q)(t),f=i.transaction(R,"readwrite"),h=f.objectStore(R);try{s=h.put({modelPath:n.modelPath,modelArtifactsInfo:l})}catch(d){return r(d)}s.onsuccess=function(){var a,o=(c=i.transaction(O,"readwrite")).objectStore(O);try{a=o.put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:l})}catch(d){return r(d)}a.onsuccess=function(){return e({modelArtifactsInfo:l})},a.onerror=function(e){var t=(h=f.objectStore(R)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(a.error)},t.onerror=function(e){return i.close(),r(a.error)}}},s.onerror=function(e){return i.close(),r(s.error)},f.oncomplete=function(){null==c?i.close():c.oncomplete=function(){return i.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();z.URL_SCHEME="indexeddb://";var L=function(e){return(0,y.OB)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(z.URL_SCHEME)?(t=e.slice(z.URL_SCHEME.length),new z(t)):null;var t};A.registerSaveRouter(L),A.registerLoadRouter(L);var P=function(){function e(){(0,x.Z)(this,e),this.indexedDB=Z()}return(0,w.Z)(e,[{key:"listModels",value:function(){var e=(0,_.Z)(C().mark((function e(){var t=this;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open(I,1);r.onupgradeneeded=function(){return B(r)},r.onsuccess=function(){var t=r.result,a=t.transaction(R,"readonly"),i=a.objectStore(R).getAll();i.onsuccess=function(){var t,n={},r=(0,k.Z)(i.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(o){r.e(o)}finally{r.f()}e(n)},i.onerror=function(e){return t.close(),n(i.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=(0,_.Z)(C().mark((function e(t){var n=this;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(r=t).startsWith(z.URL_SCHEME)?r.slice(z.URL_SCHEME.length):r,e.abrupt("return",new Promise((function(e,r){var a=n.indexedDB.open(I,1);a.onupgradeneeded=function(){return B(a)},a.onsuccess=function(){var n,i=a.result,o=i.transaction(R,"readwrite"),u=o.objectStore(R),s=u.get(t);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));var a=u.delete(t),o=function(){var a=(n=i.transaction(O,"readwrite")).objectStore(O).delete(t);a.onsuccess=function(){return e(s.result.modelArtifactsInfo)},a.onerror=function(e){return r(s.error)}};a.onsuccess=o,a.onerror=function(e){return o(),i.close(),r(s.error)}},s.onerror=function(e){return i.close(),r(s.error)},o.oncomplete=function(){null==n?i.close():n.oncomplete=function(){return i.close()}}},a.onerror=function(e){return r(a.error)}})));case 2:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),j=n(6147),U="/",W="tensorflowjs_models",V="info",q="model_topology",H="weight_specs",G="weight_data",X="model_metadata";function Y(e){return{info:[W,e,V].join(U),topology:[W,e,q].join(U),weightSpecs:[W,e,H].join(U),weightData:[W,e,G].join(U),modelMetadata:[W,e,X].join(U)}}function K(e){for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];window.localStorage.removeItem(r)}}function $(e){var t=e.split(U);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(U)}var Q=function(){function e(t){if((0,x.Z)(this,e),!(0,y.OB)().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=Y(this.modelPath)}return(0,w.Z)(e,[{key:"save",value:function(){var e=(0,_.Z)(C().mark((function e(t){var n,r,a,i,o;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=4;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 4:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=(0,E.Q)(t),i=F.w.join(t.weightData),e.prev=8,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,(0,E._n)(i)),o={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,initializerSignature:null!=t.initializerSignature?t.initializerSignature:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0},this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),e.abrupt("return",{modelArtifactsInfo:a});case 18:throw e.prev=18,e.t0=e.catch(8),K(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."));case 22:case"end":return e.stop()}}),e,this,[[8,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=(0,_.Z)(C().mark((function e(){var t,n,r,a,i,o,u;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=9;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 9:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=13;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 13:if(n.weightSpecs=a,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,null!=o.signature&&(n.signature=o.signature),null!=o.userDefinedMetadata&&(n.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(n.modelInitializer=o.modelInitializer),null!=o.initializerSignature&&(n.initializerSignature=o.initializerSignature),null!=o.trainingConfig&&(n.trainingConfig=o.trainingConfig)),null!=(u=this.LS.getItem(this.keys.weightData))){e.next=19;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 19:return n.weightData=(0,E.n7)(u),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();Q.URL_SCHEME="localstorage://";var J=function(e){return(0,y.OB)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Q.URL_SCHEME)?(t=e.slice(Q.URL_SCHEME.length),new Q(t)):null;var t};A.registerSaveRouter(J),A.registerLoadRouter(J);var ee=function(){function e(){(0,x.Z)(this,e),(0,j.hu)((0,y.OB)().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),(0,j.hu)("undefined"===typeof window||"undefined"!==typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return(0,w.Z)(e,[{key:"listModels",value:function(){var e=(0,_.Z)(C().mark((function e(){var t,n,r,a,i,o;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=W+U,r=U+V,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(n)&&i.endsWith(r)&&(o=$(i),t[o]=JSON.parse(this.LS.getItem(i)));return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=(0,_.Z)(C().mark((function e(t){var n,r;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(a=t).startsWith(Q.URL_SCHEME)?a.slice(Q.URL_SCHEME.length):a,n=Y(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 4:return r=JSON.parse(this.LS.getItem(n.info)),K(n),e.abrupt("return",r);case 7:case"end":return e.stop()}var a}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),te="://",ne=function(){function e(){(0,x.Z)(this,e),this.managers={}}return(0,w.Z)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){(0,j.hu)(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(te)&&(t=t.slice(0,t.indexOf(te))),(0,j.hu)(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();(0,j.hu)(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(t){var n=e.getInstance().managers[t];if(null==n)throw new Error("Cannot find model manager for scheme '".concat(t,"'"));return n}},{key:"getSchemes",value:function(){return Object.keys(e.getInstance().managers)}}]),e}();function re(e){if(-1===e.indexOf(te))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(ne.getSchemes().join(",")));return{scheme:e.split(te)[0],path:e.split(te)[1]}}function ae(e,t){return ie.apply(this,arguments)}function ie(){return ie=(0,_.Z)(C().mark((function e(t,n){var r,a,i,o,u,s,c,l,f,h,d=arguments;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>2&&void 0!==d[2]&&d[2],(0,j.hu)(t!==n,(function(){return"Old path and new path are the same: '".concat(t,"'")})),a=A.getLoadHandlers(t),(0,j.hu)(a.length>0,(function(){return"Copying failed because no load handler is found for source URL ".concat(t,".")})),(0,j.hu)(a.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"load handlers for source URL ".concat(t,".")})),i=a[0],o=A.getSaveHandlers(n),(0,j.hu)(o.length>0,(function(){return"Copying failed because no save handler is found for destination "+"URL ".concat(n,".")})),(0,j.hu)(o.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"save handlers for destination URL ".concat(n,".")})),u=o[0],s=re(t).scheme,c=re(t).path,l=s===re(t).scheme,e.next=15,i.load();case 15:if(f=e.sent,!r||!l){e.next=19;break}return e.next=19,ne.getManager(s).removeModel(c);case 19:return e.next=21,u.save(f);case 21:if(h=e.sent,!r||l){e.next=25;break}return e.next=25,ne.getManager(s).removeModel(c);case 25:return e.abrupt("return",h.modelArtifactsInfo);case 26:case"end":return e.stop()}}),e)}))),ie.apply(this,arguments)}function oe(){return ue.apply(this,arguments)}function ue(){return(ue=(0,_.Z)(C().mark((function e(){var t,n,r,a,i,o,u;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=ne.getSchemes(),n={},r=(0,k.Z)(t),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=13;break}return i=a.value,e.next=9,ne.getManager(i).listModels();case 9:for(u in o=e.sent)n[i+te+u]=o[u];case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})))).apply(this,arguments)}function se(e){return ce.apply(this,arguments)}function ce(){return(ce=(0,_.Z)(C().mark((function e(t){var n,r;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=re(t),r=ne.getManager(n.scheme),e.abrupt("return",r.removeModel(n.path));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(e,t){return fe.apply(this,arguments)}function fe(){return(fe=(0,_.Z)(C().mark((function e(t,n){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.abrupt("return",ae(t,n,false));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e,t){return de.apply(this,arguments)}function de(){return(de=(0,_.Z)(C().mark((function e(t,n){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.abrupt("return",ae(t,n,true));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pe=n(1539),ve=function(){function e(){(0,x.Z)(this,e),this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}return(0,w.Z)(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}},{key:"setTimeoutCustom",value:function(e,t){var n=this;"undefined"!==typeof window&&(0,y.OB)().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout((function(){window.postMessage({name:n.messageName,index:n.functionRefs.length-1},"*")}),t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",(function(e){e.source===window&&e.data.name===n.messageName&&(e.stopPropagation(),(0,n.functionRefs[e.data.index])(),n.handledMessageCount++,n.handledMessageCount===n.functionRefs.length&&(n.functionRefs=[],n.handledMessageCount=0))}),!0))):setTimeout(e,t)}},{key:"isTypedArray",value:function(e){return(0,pe.j)(e)}}]),e}();if((0,y.OB)().get("IS_BROWSER")){(0,y.OB)().setPlatform("browser",new ve);try{ne.registerManager(Q.URL_SCHEME,new ee)}catch(Ir){}try{ne.registerManager(z.URL_SCHEME,new P)}catch(Ir){}}var ge,me=function(){return n(5410)};var ye=function(){function e(){(0,x.Z)(this,e),this.util=n(8628),this.textEncoder=new this.util.TextEncoder}return(0,w.Z)(e,[{key:"fetch",value:function(e,t){return null!=(0,y.OB)().global.fetch?(0,y.OB)().global.fetch(e,t):(null==ge&&(ge=me()),ge(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}},{key:"isTypedArray",value:function(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}]),e}();(0,y.OB)().get("IS_NODE")&&!(0,y.OB)().get("IS_BROWSER")&&(0,y.OB)().setPlatform("node",new ye);var be=n(7039),xe=n(9118),we=n(672),ke=n(4600),_e=n(4376);(0,p.wv)();var Se={buffer:be.f,cast:xe.p,clone:we.d,print:ke.S};(0,_e.Vp)(Se);var Ce=n(1303),Ee=n(1020),Ae=n(804),Ne=n(5875),Te=n(3312),Me=n(5750),De=n(651),Fe=n(6902),Ie=n(7391),Oe=n(7293),Re=n(6450),Ze=n(7067),Be=new Map,ze=new Map,Le=function(){function e(){(0,x.Z)(this,e)}return(0,w.Z)(e,[{key:"getClassName",value:function(){return this.constructor.className}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),e}(),Pe=function(){function e(){(0,x.Z)(this,e),this.classNameMap={}}return(0,w.Z)(e,null,[{key:"getMap",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"register",value:function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}}]),e}();function je(e,t,n){(0,j.hu)(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),(0,j.hu)("string"===typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),(0,j.hu)(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),"undefined"===typeof t&&(t="Custom"),"undefined"===typeof n&&(n=e.className);var r=t+">"+n;return Pe.register(e),Be.set(r,e),ze.set(e,r),e}function Ue(e){return ze.has(e)?ze.get(e):e.className}var We=function(e){(0,Ee.Z)(n,e);var t=(0,Ae.Z)(n);function n(){return(0,x.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n,[{key:"minimize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.computeGradients(e,n),a=r.value,i=r.grads;if(null!=n){var o=n.map((function(e){return{name:e.name,tensor:i[e.name]}}));this.applyGradients(o)}else this.applyGradients(i);return(0,Ne.B9)(i),t?a:(a.dispose(),null)}},{key:"iterations",get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}},{key:"incrementIterations",value:function(){this.iterations_=this.iterations+1}},{key:"computeGradients",value:function(e,t){return(0,Re.pn)(e,t)}},{key:"dispose",value:function(){null!=this.iterations_&&(0,Ne.B9)(this.iterations_)}},{key:"saveIterations",value:function(){var e=(0,_.Z)(C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==this.iterations_&&(this.iterations_=0),e.abrupt("return",{name:"iter",tensor:(0,Ze.i)(this.iterations_,"int32")});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWeights",value:function(){var e=(0,_.Z)(C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for this optimizer yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,_.Z)(C().mark((function e(t){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"extractIterations",value:function(){var e=(0,_.Z)(C().mark((function e(t){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].tensor.data();case 2:return this.iterations_=e.sent[0],e.abrupt("return",t.slice(1));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Le);Object.defineProperty(We,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var Ve=function(e){(0,Ee.Z)(n,e);var t=(0,Ae.Z)(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,x.Z)(this,n),(a=t.call(this)).learningRate=e,a.rho=r,a.epsilon=i,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==i&&(a.epsilon=p.BV.backend.epsilon()),a}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=p.BV.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:"".concat(n,"/accum_grad"),variable:(0,Ne.lu)((function(){return(0,Oe.P)(a).variable(false)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:"".concat(n,"/accum_var"),variable:(0,Ne.lu)((function(){return(0,Oe.P)(a).variable(false)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable,u=t.accumulatedUpdates[r].variable;(0,Ne.lu)((function(){var e=(0,Te.I)((0,De.d)(o,t.rho),(0,De.d)((0,Ie.h)(i),1-t.rho)),n=(0,De.d)((0,Me.h)((0,Fe._)((0,Te.I)(u,t.epsilon)),(0,Fe._)((0,Te.I)(o,t.epsilon))),i),r=(0,Te.I)((0,De.d)(u,t.rho),(0,De.d)((0,Ie.h)(n),1-t.rho));o.assign(e),u.assign(r);var s=(0,Te.I)((0,De.d)(n,-t.learningRate),a);a.assign(s)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedUpdates&&((0,Ne.B9)(this.accumulatedGrads.map((function(e){return e.variable}))),(0,Ne.B9)(this.accumulatedUpdates.map((function(e){return e.variable}))))}},{key:"getWeights",value:function(){var e=(0,_.Z)(C().mark((function e(){var t;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,Ce.Z)(this.accumulatedGrads),(0,Ce.Z)(this.accumulatedUpdates)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,_.Z)(C().mark((function e(t){var n;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=t.length/2,!1,this.accumulatedGrads=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedUpdates=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}}],[{key:"className",get:function(){return"Adadelta"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}]),n}(We),qe=n(8582),He=function(e){(0,Ee.Z)(n,e);var t=(0,Ae.Z)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return(0,x.Z)(this,n),(r=t.call(this)).learningRate=e,r.initialAccumulatorValue=a,r.accumulatedGrads=[],r}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=p.BV.registeredVariables[n];if(null==t.accumulatedGrads[r]){t.accumulatedGrads[r]={originalName:"".concat(n,"/accumulator"),variable:(0,Ne.lu)((function(){return(0,qe.h)(a.shape,t.initialAccumulatorValue).variable(false)}))}}var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable;(0,Ne.lu)((function(){var e=(0,Te.I)(o,(0,Ie.h)(i));o.assign(e);var n=(0,Te.I)((0,De.d)((0,Me.h)(i,(0,Fe._)((0,Te.I)(e,p.BV.backend.epsilon()))),-t.learningRate),a);a.assign(n)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedGrads&&(0,Ne.B9)(this.accumulatedGrads.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,_.Z)(C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,_.Z)(C().mark((function e(t){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulatedGrads=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}}],[{key:"className",get:function(){return"Adagrad"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}]),n}(We),Ge=n(4334),Xe=n(4774),Ye=function(e){(0,Ee.Z)(n,e);var t=(0,Ae.Z)(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,x.Z)(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],(0,Ne.lu)((function(){i.accBeta1=(0,Ze.i)(r).variable(),i.accBeta2=(0,Ze.i)(a).variable()})),null==o&&(i.epsilon=p.BV.backend.epsilon()),i}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);(0,Ne.lu)((function(){var r=(0,Xe.l)(1,t.accBeta1),a=(0,Xe.l)(1,t.accBeta2);n.forEach((function(n,i){var o=p.BV.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:(0,Ne.lu)((function(){return(0,Oe.P)(o).variable(false)}))}),null==t.accumulatedSecondMoment[i]&&(t.accumulatedSecondMoment[i]={originalName:"".concat(n,"/v"),variable:(0,Ne.lu)((function(){return(0,Oe.P)(o).variable(false)}))});var u=Array.isArray(e)?e[i].tensor:e[n];if(null!=u){var s=t.accumulatedFirstMoment[i].variable,c=t.accumulatedSecondMoment[i].variable,l=(0,Te.I)((0,De.d)(s,t.beta1),(0,De.d)(u,1-t.beta1)),f=(0,Te.I)((0,De.d)(c,t.beta2),(0,De.d)((0,Ie.h)(u),1-t.beta2)),h=(0,Me.h)(l,r),d=(0,Me.h)(f,a);s.assign(l),c.assign(f);var v=(0,Te.I)((0,De.d)((0,Me.h)(h,(0,Te.I)((0,Fe._)(d),t.epsilon)),-t.learningRate),o);o.assign(v)}})),t.accBeta1.assign((0,De.d)(t.accBeta1,t.beta1)),t.accBeta2.assign((0,De.d)(t.accBeta2,t.beta2))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&(0,Ne.B9)(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&(0,Ne.B9)(this.accumulatedSecondMoment.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,_.Z)(C().mark((function e(){var t;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,Ce.Z)(this.accumulatedFirstMoment),(0,Ce.Z)(this.accumulatedSecondMoment)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,_.Z)(C().mark((function e(t){var n,r=this;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,(0,Ne.lu)((function(){r.accBeta1.assign((0,Ge.s)(r.beta1,r.iterations_+1)),r.accBeta2.assign((0,Ge.s)(r.beta2,r.iterations_+1))})),n=t.length/2,!1,this.accumulatedFirstMoment=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedSecondMoment=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}}],[{key:"className",get:function(){return"Adam"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}]),n}(We),Ke=n(7613),$e=n(705),Qe=function(e){(0,Ee.Z)(n,e);var t=(0,Ae.Z)(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return(0,x.Z)(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.decay=u,i.accumulatedFirstMoment=[],i.accumulatedWeightedInfNorm=[],(0,Ne.lu)((function(){i.iteration=(0,Ze.i)(0).variable(),i.accBeta1=(0,Ze.i)(r).variable()})),null==o&&(i.epsilon=p.BV.backend.epsilon()),i}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);(0,Ne.lu)((function(){var r=(0,Xe.l)(1,t.accBeta1),a=(0,Me.h)(-t.learningRate,(0,Te.I)((0,De.d)(t.iteration,t.decay),1));n.forEach((function(n,i){var o=p.BV.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:(0,Oe.P)(o).variable(false)}),null==t.accumulatedWeightedInfNorm[i]&&(t.accumulatedWeightedInfNorm[i]={originalName:"".concat(n,"/v"),variable:(0,Oe.P)(o).variable(false)});var u=Array.isArray(e)?e[i].tensor:e[n];if(null!=u){var s=t.accumulatedFirstMoment[i].variable,c=t.accumulatedWeightedInfNorm[i].variable,l=(0,Te.I)((0,De.d)(s,t.beta1),(0,De.d)(u,1-t.beta1)),f=(0,De.d)(c,t.beta2),h=(0,Ke.W)(u),d=(0,$e.g)(f,h);s.assign(l),c.assign(d);var v=(0,Te.I)((0,De.d)((0,Me.h)(a,r),(0,Me.h)(l,(0,Te.I)(d,t.epsilon))),o);o.assign(v)}})),t.iteration.assign((0,Te.I)(t.iteration,1)),t.accBeta1.assign((0,De.d)(t.accBeta1,t.beta1))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&(0,Ne.B9)(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&(0,Ne.B9)(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,_.Z)(C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,_.Z)(C().mark((function e(t){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}}],[{key:"className",get:function(){return"Adamax"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}]),n}(We),Je=function(e){(0,Ee.Z)(n,e);var t=(0,Ae.Z)(n);function n(e){var r;return(0,x.Z)(this,n),(r=t.call(this)).learningRate=e,r.setLearningRate(e),r}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=p.BV.registeredVariables[n];(0,Ne.lu)((function(){var e=(0,Te.I)((0,De.d)(t.c,a),i);i.assign(e)}))}})),this.incrementIterations()}},{key:"setLearningRate",value:function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=(0,Ne.Cn)((0,Ze.i)(-e))}},{key:"dispose",value:function(){this.c.dispose()}},{key:"getWeights",value:function(){var e=(0,_.Z)(C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,_.Z)(C().mark((function e(t){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:if(0===(t=e.sent).length){e.next=5;break}throw new Error("SGD optimizer does not have settable weights.");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate}}}],[{key:"className",get:function(){return"SGD"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate)}}]),n}(We),et=function(e){(0,Ee.Z)(n,e);var t=(0,Ae.Z)(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,x.Z)(this,n),(a=t.call(this,e)).learningRate=e,a.momentum=r,a.useNesterov=i,a.accumulations=[],a.m=(0,Ze.i)(a.momentum),a}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=p.BV.registeredVariables[n];if(null==t.accumulations[r]){t.accumulations[r]={originalName:"".concat(n,"/momentum"),variable:(0,Ne.lu)((function(){return(0,Oe.P)(a).variable(false)}))}}var i=t.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];null!=o&&(0,Ne.lu)((function(){var e,n=(0,Te.I)((0,De.d)(t.m,i),o);e=t.useNesterov?(0,Te.I)((0,De.d)(t.c,(0,Te.I)(o,(0,De.d)(n,t.m))),a):(0,Te.I)((0,De.d)(t.c,n),a),i.assign(n),a.assign(e)}))})),this.incrementIterations()}},{key:"dispose",value:function(){this.m.dispose(),null!=this.accumulations&&(0,Ne.B9)(this.accumulations.map((function(e){return e.variable})))}},{key:"setMomentum",value:function(e){this.momentum=e}},{key:"getWeights",value:function(){var e=(0,_.Z)(C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,_.Z)(C().mark((function e(t){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulations=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}}],[{key:"className",get:function(){return"Momentum"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}]),n}(Je),tt=function(e){(0,Ee.Z)(n,e);var t=(0,Ae.Z)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if((0,x.Z)(this,n),(r=t.call(this)).learningRate=e,r.decay=a,r.momentum=i,r.epsilon=o,r.accumulatedMeanSquares=[],r.accumulatedMoments=[],r.accumulatedMeanGrads=[],r.centered=u,null==o&&(r.epsilon=p.BV.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return r}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=p.BV.registeredVariables[n],i=!1;null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:"".concat(n,"/rms"),variable:(0,Ne.lu)((function(){return(0,Oe.P)(a).variable(i)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:"".concat(n,"/momentum"),variable:(0,Ne.lu)((function(){return(0,Oe.P)(a).variable(i)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:"".concat(n,"/mg"),variable:(0,Ne.lu)((function(){return(0,Oe.P)(a).variable(i)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var u=t.accumulatedMeanSquares[r].variable,s=t.accumulatedMoments[r].variable;(0,Ne.lu)((function(){var e=(0,Te.I)((0,De.d)(u,t.decay),(0,De.d)((0,Ie.h)(o),1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,i=(0,Te.I)((0,De.d)(n,t.decay),(0,De.d)(o,1-t.decay)),c=(0,Me.h)((0,De.d)(o,t.learningRate),(0,Fe._)((0,Xe.l)(e,(0,Te.I)((0,Ie.h)(i),t.epsilon)))),l=(0,Te.I)((0,De.d)(s,t.momentum),c);u.assign(e),n.assign(i),s.assign(l);var f=(0,Xe.l)(a,l);a.assign(f)}else{var h=(0,Te.I)((0,De.d)(u,t.decay),(0,De.d)((0,Ie.h)(o),1-t.decay)),d=(0,Te.I)((0,De.d)(s,t.momentum),(0,Me.h)((0,De.d)(o,t.learningRate),(0,Fe._)((0,Te.I)(h,t.epsilon))));u.assign(h),s.assign(d);var p=(0,Xe.l)(a,d);a.assign(p)}}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedMeanSquares&&(0,Ne.B9)(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&(0,Ne.B9)(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&(0,Ne.B9)(this.accumulatedMoments.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,_.Z)(C().mark((function e(){var t;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,Ce.Z)(this.accumulatedMeanSquares),(0,Ce.Z)(this.accumulatedMoments)),this.centered&&t.push.apply(t,(0,Ce.Z)(this.accumulatedMeanGrads)),e.next=4,this.saveIterations();case 4:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,_.Z)(C().mark((function e(t){var n,r;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=this.centered?t.length/3:t.length/2,r=!1,this.accumulatedMeanSquares=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.accumulatedMoments=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*n,3*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}}],[{key:"className",get:function(){return"RMSProp"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}]),n}(We),nt=[Ve,He,Ye,Qe,et,tt,Je];function rt(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var at=function(){function e(t){if((0,x.Z)(this,e),!(0,y.OB)().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelJsonFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return(0,w.Z)(e,[{key:"save",value:function(){var e=(0,_.Z)(C().mark((function e(t){var n,r,a,i,o,u,s;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=F.w.join(t.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=8;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 8:return a=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],i=(0,E.Yd)(t,a),o=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),(u=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor).download=this.modelJsonFileName,u.href=o,e.next=16,rt((function(){return u.dispatchEvent(new MouseEvent("click"))}));case 16:if(null==t.weightData){e.next=22;break}return(s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=r,e.next=22,rt((function(){return s.dispatchEvent(new MouseEvent("click"))}));case 22:return e.abrupt("return",{modelArtifactsInfo:(0,E.Q)(t)});case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();at.URL_SCHEME="downloads://";var it=function(){function e(t){if((0,x.Z)(this,e),null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(t));this.jsonFile=t[0],this.weightsFiles=t.slice(1)}return(0,w.Z)(e,[{key:"load",value:function(){var e=(0,_.Z)(C().mark((function e(){var t=this;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(r){var a=JSON.parse(r.target.result),i=a.modelTopology;if(null!=i)if(null!=a.weightsManifest)if(0!==t.weightsFiles.length){var o=(0,E.jN)(a,(function(e){return t.loadWeights(e)}));e(o)}else e({modelTopology:i});else n(new Error("weightManifest field is missing from file ".concat(t.jsonFile.name)));else n(new Error("modelTopology field is missing from file ".concat(t.jsonFile.name)))},r.onerror=function(e){return n("Failed to read model topology and weights manifest JSON "+"from file '".concat(t.jsonFile.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only.")},r.readAsText(t.jsonFile)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(e){var t,n=this,r=[],a=[],i=(0,k.Z)(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;r.push.apply(r,(0,Ce.Z)(o.weights)),a.push.apply(a,(0,Ce.Z)(o.paths))}}catch(Ir){i.e(Ir)}finally{i.f()}var u=this.checkManifestAndWeightFiles(e),s=a.map((function(e){return n.loadWeightsFile(e,u[e])}));return Promise.all(s).then((function(e){return[r,e]}))}},{key:"loadWeightsFile",value:function(e,t){return new Promise((function(n,r){var a=new FileReader;a.onload=function(e){var t=e.target.result;n(t)},a.onerror=function(t){return r("Failed to weights data from file of path '".concat(e,"'."))},a.readAsArrayBuffer(t)}))}},{key:"checkManifestAndWeightFiles",value:function(e){var t,n=this,r=[],a=this.weightsFiles.map((function(e){return(0,E.EZ)(e.name)})),i={},o=(0,k.Z)(e);try{for(o.s();!(t=o.n()).done;){t.value.paths.forEach((function(e){var t=(0,E.EZ)(e);if(-1!==r.indexOf(t))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(t,"'"));if(r.push(t),-1===a.indexOf(t))throw new Error("Weight file with basename '".concat(t,"' is not provided."));i[e]=n.weightsFiles[a.indexOf(t)]}))}}catch(Ir){o.e(Ir)}finally{o.f()}if(r.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(r.length,") and the number of weight files provided ")+"(".concat(this.weightsFiles.length,")."));return i}}]),e}();function ot(e){return new it(e)}A.registerSaveRouter((function(e){return(0,y.OB)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(at.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new at(e)}(e.slice(at.URL_SCHEME.length)):null}));var ut=n(678);function st(e,t,n,r){!function(e){(0,j.hu)(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){(0,j.hu)(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)})),(0,j.hu)(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)})),(0,j.hu)(t>=e,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(i){return i.then((function(i){var o=n+ ++a/e.length*(r-n);return t(o),i})),i})))}var ct=n(1988);function lt(e,t){return ft.apply(this,arguments)}function ft(){return(ft=(0,_.Z)(C().mark((function e(t,n){var r,a,i,o,u,s,c,l,f;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?(0,y.OB)().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),i=0,o=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,st(a,n.onProgress,i,o);case 13:e.t0=e.sent;case 14:if(u=e.t0,s=u.map((function(e){return e.arrayBuffer()})),c=.5,l=1,null!=n.onProgress){e.next=24;break}return e.next=21,Promise.all(s);case 21:e.t1=e.sent,e.next=27;break;case 24:return e.next=26,st(s,n.onProgress,c,l);case 26:e.t1=e.sent;case 27:return f=e.t1,e.abrupt("return",f);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ht(e,t){var n,r,a=null==t.fetchFunc?(0,y.OB)().platform.fetch:t.fetchFunc,i=0;return null===(n=t.onProgress)||void 0===n||n.call(t,0),new ReadableStream({pull:function(){var n=(0,_.Z)(C().mark((function n(o){var u,s,c,l,f;return C().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(i<e.length)){n.next=20;break}if(r){n.next=6;break}return n.next=4,a(e[i],t.requestInit,{isBinary:!0});case 4:s=n.sent.body,r=s.getReader();case 6:return n.next=8,r.read();case 8:if(c=n.sent,l=c.done,f=c.value,!l){n.next=16;break}return i++,r=void 0,null===(u=t.onProgress)||void 0===u||u.call(t,i/e.length),n.abrupt("continue",0);case 16:return o.enqueue(f),n.abrupt("return");case 20:o.close();case 21:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()})}function dt(e){return pt.apply(this,arguments)}function pt(){return pt=(0,_.Z)(C().mark((function e(t){var n,r,a,i,o=arguments;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"",r=o.length>2?o[2]:void 0,a=o.length>3?o[3]:void 0,i=vt((function(e){return lt(e,{requestInit:a})})),e.abrupt("return",i(t,n,r));case 6:case"end":return e.stop()}}),e)}))),pt.apply(this,arguments)}function vt(e){return function(){var t=(0,_.Z)(C().mark((function t(n){var r,a,i,o,u,s,c,l,f,h,d,p,v=arguments;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=v.length>1&&void 0!==v[1]?v[1]:"",a=v.length>2?v[2]:void 0,i=n.map((function(){return!1})),o={},u=null!=a?a.map((function(){return!1})):[],s=[],n.forEach((function(e,t){var n=0;e.weights.forEach((function(e){var r="quantization"in e?e.quantization.dtype:e.dtype,c=ct.J[r]*j.NA(e.shape),l=function(){i[t]=!0,null==o[t]&&(o[t]=[]),o[t].push({manifestEntry:e,groupOffset:n,sizeBytes:c})};null!=a?a.forEach((function(t,n){t===e.name&&(l(),u[n]=!0)})):l(),s.push(e.name),n+=c}))})),u.every((function(e){return e}))){t.next=10;break}throw c=a.filter((function(e,t){return!u[t]})),new Error("Could not find weights in manifest with names: "+"".concat(c.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(s.join(", "),"."));case 10:return l=i.reduce((function(e,t,n){return t&&e.push(n),e}),[]),f=[],l.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;f.push(t)}))})),t.next=15,e(f);case 15:return h=t.sent,d={},p=0,l.forEach((function(e){var t=n[e].paths.length,r=new F.w(h.slice(p,p+t));o[e].forEach((function(e){var t=r.slice(e.groupOffset,e.groupOffset+e.sizeBytes),n=(0,E.dI)(t,[e.manifestEntry]);for(var a in n)d[a]=n[a]})),p+=t})),t.abrupt("return",d);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var gt=function(){function e(t,n){if((0,x.Z)(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?((0,j.hu)("function"===typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=(0,y.OB)().platform.fetch,(0,j.hu)(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&(0,j.hu)(2===t.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}return(0,w.Z)(e,[{key:"save",value:function(){var e=(0,_.Z)(C().mark((function e(t){var n,r,a,i,o;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a=(0,E.Yd)(t,r),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&(i=F.w.join(t.weightData),n.body.append("model.weights.bin",new Blob([i],{type:"application/octet-stream"}),"model.weights.bin")),e.next=10,this.fetch(this.path,n);case 10:if(!(o=e.sent).ok){e.next=15;break}return e.abrupt("return",{modelArtifactsInfo:(0,E.Q)(t),responses:[o]});case 15:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(o.status,"."));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadModelJSON",value:function(){var e=(0,_.Z)(C().mark((function e(){var t,n,r,a,i;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 16:if(a=n.modelTopology,i=n.weightsManifest,null!=a||null!=i){e.next=20;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=(0,_.Z)(C().mark((function e(){var t,n=this;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loadOptions.streamWeights){e.next=2;break}return e.abrupt("return",this.loadStream());case 2:return e.next=4,this.loadModelJSON();case 4:return t=e.sent,e.abrupt("return",(0,E.jN)(t,(function(e){return n.loadWeights(e)})));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadStream",value:function(){var e=(0,_.Z)(C().mark((function e(){var t,n,r,a,i=this;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadModelJSON();case 2:return t=e.sent,e.next=5,this.getWeightUrls(t.weightsManifest);case 5:return n=e.sent,r=(0,E.hu)(t.weightsManifest),a=function(){return ht(n,i.loadOptions)},e.abrupt("return",Object.assign(Object.assign({},t),{weightSpecs:r,getWeightStream:a}));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWeightUrls",value:function(){var e=(0,_.Z)(C().mark((function e(t){var n,r,a,i,o,u,s,c,l,f,h,d,p,v;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=mt(n),a=(0,ut.Z)(r,2),i=a[0],o=a[1],u=this.weightPathPrefix||i,s=[],c=[],l=(0,k.Z)(t);try{for(l.s();!(f=l.n()).done;){h=f.value,d=(0,k.Z)(h.paths);try{for(d.s();!(p=d.n()).done;)v=p.value,null!=this.weightUrlConverter?c.push(this.weightUrlConverter(v)):s.push(u+v+o)}catch(Ir){d.e(Ir)}finally{d.f()}}}catch(Ir){l.e(Ir)}finally{l.f()}if(!this.weightUrlConverter){e.next=16;break}return e.t0=s.push,e.t1=s,e.t2=Ce.Z,e.next=13,Promise.all(c);case 13:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 16:return e.abrupt("return",s);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var e=(0,_.Z)(C().mark((function e(t){var n,r,a;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getWeightUrls(t);case 2:return n=e.sent,r=(0,E.hu)(t),e.next=6,lt(n,this.loadOptions);case 6:return a=e.sent,e.abrupt("return",[r,a]);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function mt(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function yt(e){return null!=e.match(gt.URL_SCHEME_REGEX)}gt.URL_SCHEME_REGEX=/^https?:\/\//;var bt=function(e,t){if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return yt(e)})):yt(e))?xt(e,t):null};function xt(e,t){return new gt(e,t)}function wt(e,t){return xt(e,t)}A.registerSaveRouter(bt),A.registerLoadRouter(bt);var kt=function(){function e(t){(0,x.Z)(this,e),this.modelArtifacts=t}return(0,w.Z)(e,[{key:"load",value:function(){return this.modelArtifacts}}]),e}(),_t=function(){function e(t){(0,x.Z)(this,e),this.saveHandler=t}return(0,w.Z)(e,[{key:"save",value:function(e){return this.saveHandler(e)}}]),e}(),St=(0,w.Z)((function e(t){(0,x.Z)(this,e),t.load&&(this.load=function(){return Promise.resolve(t.load())}),t.save&&(this.save=function(e){return Promise.resolve(t.save(e))})}));function Ct(e,t,n,r){var a=arguments;return new St(Et.apply(void 0,(0,Ce.Z)(a)))}function Et(e,t,n,r){if(1===arguments.length){var a=null!=e.modelTopology||null!=e.weightSpecs;return a?new kt(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new kt({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new kt({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})}function At(e){return new _t(e)}function Nt(e){return new _t(e)}var Tt=n(8354),Mt=n(7221),Dt=n(4326),Ft=n(8640),It=n(1240);var Ot,Rt=(0,Ft.op)({confusionMatrix_:function(e,t,n){var r=(0,Tt._1)(e,"labels","confusionMatrix"),a=(0,Tt._1)(t,"predictions","confusionMatrix");j.hu(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, "+"but got ".concat(n)})),j.hu(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got ".concat(r.rank)})),j.hu(1===a.rank,(function(){return"Expected the rank of predictions to be 1, "+"but got ".concat(a.rank)})),j.hu(r.shape[0]===a.shape[0],(function(){return"Mismatch in the number of examples: "+"".concat(r.shape[0]," vs. ").concat(a.shape[0],". ")+"Labels and predictions should have the same number of elements."})),j.hu(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+"".concat(n)}));var i=(0,Dt.l)((0,xe.p)(r,"int32"),n),o=(0,Dt.l)((0,xe.p)(a,"int32"),n),u=(0,It.p)(i),s=(0,Mt.O)(u,o);return(0,xe.p)(s,"int32")}}),Zt=n(5774),Bt=n(2145),zt=n(8864),Lt=n(3123),Pt=!1;function jt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,i=!1,o=!1,u=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else if(null!=e.getContext)o=!0;else{if(!("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(e.constructor.name));u=!0}var s=(0,zt.pI)(Bt.eBW,p.BV.backendName);if(null!=s){var c={pixels:e},l={numChannels:t};return p.BV.runKernel(Bt.eBW,c,l)}var f,h,d=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],v=(0,ut.Z)(d,2),g=v[0],m=v[1];if(o)f=e.getContext("2d").getImageData(0,0,g,m).data;else if(r||n)f=e.data;else if(i||a||u){if(null==Ot)if("undefined"===typeof document){if("undefined"===typeof OffscreenCanvas||"undefined"===typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");Ot=new OffscreenCanvas(1,1).getContext("2d")}else Ot=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Ot.canvas.width=g,Ot.canvas.height=m,Ot.drawImage(e,0,0,g,m),f=Ot.getImageData(0,0,g,m).data}if(4===t)h=new Int32Array(f);else{var y=g*m;h=new Int32Array(y*t);for(var b=0;b<y;b++)for(var x=0;x<t;++x)h[b*t+x]=f[4*b+x]}var w=[m,g,t];return(0,Lt.w)(h,w,"int32")}function Ut(e){return"undefined"!==typeof window&&"undefined"!==typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")&&!(e instanceof ImageBitmap)&&function(e){return null!=e&&0!==e.width&&0!==e.height}(e)&&!function(e){return null!=e&&e.data instanceof Uint8Array}(e)}function Wt(e){return Vt.apply(this,arguments)}function Vt(){return Vt=(0,_.Z)(C().mark((function e(t){var n,r,a,i=arguments;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:3,r=null,!(0,y.OB)().getBool("WRAP_TO_IMAGEBITMAP")||!Ut(t)){e.next=15;break}return e.prev=3,e.next=6,createImageBitmap(t,{premultiplyAlpha:"none"});case 6:a=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),a=null;case 12:r=null!=a&&a.width===t.width&&a.height===t.height?a:t,e.next=16;break;case 15:r=t;case 16:return e.abrupt("return",jt(r,n));case 17:case"end":return e.stop()}}),e,null,[[3,9]])}))),Vt.apply(this,arguments)}function qt(e){if(2!==e.rank&&3!==e.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank ".concat(e.rank,"."));var t=2===e.rank?1:e.shape[2];if(t>4||2===t)throw new Error("toPixels only supports depth of size "+"1, 3 or 4 but got ".concat(t));if("float32"!==e.dtype&&"int32"!==e.dtype)throw new Error("Unsupported type for toPixels: ".concat(e.dtype,".")+" Please use float32 or int32 tensors.")}function Ht(e,t){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,_.Z)(C().mark((function e(t,n){var r,a,i,o,u,s,c,l,f,h,d,v,g,m,y,b,x;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,Tt._1)(t,"img","toPixels"),t instanceof _e.es||(a=r,r=(0,xe.p)(a,"int32"),a.dispose()),qt(r),i=r.shape.slice(0,2),o=(0,ut.Z)(i,2),u=o[0],s=o[1],c=2===r.rank?1:r.shape[2],e.next=7,r.data();case 7:l=e.sent,f="float32"===r.dtype?255:1,h=new Uint8ClampedArray(s*u*4),d=0;case 11:if(!(d<u*s)){e.next=36;break}v=[0,0,0,255],g=0;case 14:if(!(g<c)){e.next=28;break}if(m=l[d*c+g],"float32"!==r.dtype){e.next=21;break}if(!(m<0||m>1)){e.next=19;break}throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(m,"."));case 19:e.next=24;break;case 21:if("int32"!==r.dtype){e.next=24;break}if(!(m<0||m>255)){e.next=24;break}throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(m,"."));case 24:1===c?(v[0]=m*f,v[1]=m*f,v[2]=m*f):v[g]=m*f;case 25:g++,e.next=14;break;case 28:h[(y=4*d)+0]=Math.round(v[0]),h[y+1]=Math.round(v[1]),h[y+2]=Math.round(v[2]),h[y+3]=Math.round(v[3]);case 33:++d,e.next=11;break;case 36:return null!=n&&(Pt||null!=(0,zt.pI)(Bt.hGc,p.BV.backendName)&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),Pt=!0),n.width=s,n.height=u,b=n.getContext("2d"),x=new ImageData(h,s,u),b.putImageData(x,0,0)),r!==t&&r.dispose(),e.abrupt("return",h);case 39:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xt(e,t,n){var r=(0,Tt._1)(e,"img","draw");if(!(e instanceof _e.es)){var a=r;r=(0,xe.p)(a,"int32"),a.dispose()}qt(r),function(e){var t=(null===e||void 0===e?void 0:e.alpha)||1;if(t>1||t<0)throw new Error("Alpha value ".concat(t," is suppoed to be in range [0 - 1]."))}(null===n||void 0===n?void 0:n.imageOptions);var i={image:r},o={canvas:t,options:n};p.BV.runKernel(Bt.hGc,i,o)}var Yt=(0,Ft.op)({fromPixels_:jt});function Kt(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===(0,j.NA)(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));for(var a=t.shape,i=a[a.length-1],o=1,u=0;u<a.length-1;++u)o*=a[u];var s=e.shape,c=a.slice();c.pop();for(var l=1,f=i;f<n;++f)l*=s[f],c.push(s[f]);var h=[].concat((0,Ce.Z)((0,j.e3)(e.shape).map((function(e){return e/l}))),[1]).slice(0,i);return[c,o,l,h]}var $t=n(8604),Qt=n(2875),Jt=n(9064),en=n(115),tn=.1;function nn(e,t,n){return null==n&&(n=rn()),an(e,t,(function(e,t){return cn(e,t,n)}))}function rn(){return 32===p.BV.backend.floatPrecision()?.001:tn}function an(e,t,n){var r=!0;if(((0,en.isTypedArray)(e)||(0,en.isTypedArray)(t))&&(r=!1),(0,en.isTypedArray)(e)&&(0,en.isTypedArray)(t)&&(r=!0),r){var a=e.constructor.name,i=t.constructor.name;if(a!==i)throw new Error("Arrays are of different type. Actual: ".concat(a,". ")+"Expected: ".concat(i))}if(Array.isArray(e)&&Array.isArray(t)){var o=(0,Tt.C)(e),u=(0,Tt.C)(t);if(!(0,j.cO)(o,u))throw new Error("Arrays have different shapes. "+"Actual: [".concat(o,"]. Expected: [").concat(u,"]"))}var s=(0,en.isTypedArray)(e)?e:(0,en.flatten)(e),c=(0,en.isTypedArray)(t)?t:(0,en.flatten)(t);if(s.length!==c.length)throw new Error("Arrays have different lengths actual: ".concat(s.length," vs ")+"expected: ".concat(c.length,".\n")+"Actual:   ".concat(s,".\n")+"Expected: ".concat(c,"."));for(var l=0;l<c.length;++l){var f=s[l],h=c[l];if(!n(f,h))throw new Error("Arrays differ: actual[".concat(l,"] = ").concat(f,", expected[").concat(l,"] = ").concat(h,".\n")+"Actual:   ".concat(s,".\n")+"Expected: ".concat(c,"."))}"undefined"!==typeof expect&&expect().nothing()}function on(e,t){e().then((function(){return t.fail()}),(function(){return t()})),"undefined"!==typeof expect&&expect().nothing()}function un(e,t){var n="string"===typeof t||"number"===typeof t||"boolean"===typeof t?[t]:t;return(0,j.HD)(e)||(0,j.HD)(e[0])||(0,j.HD)(t)||(0,j.HD)(t[0])?an(e,n,(function(e,t){return e==t})):an(e,t,(function(e,t){return cn(e,t,0)}))}function sn(e,t,n){if(null==n&&(n=rn()),!cn(e,t,n))throw new Error("Numbers differ: actual === ".concat(e,", expected === ").concat(t));"undefined"!==typeof expect&&expect().nothing()}function cn(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function ln(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:".concat(e[r]," low: ").concat(t,", high: ").concat(n))}function fn(e,t){var n=new Float32Array(e),r=new Float32Array(t);if(n.length!==r.length)throw new Error("Expected ArrayBuffer to be of length "+"".concat(r.length,", but it was ").concat(n.length));for(var a=0;a<r.length;a++)if(n[a]!==r[a])throw new Error("Expected ArrayBuffer value at ".concat(a," to be ")+"".concat(r[a]," but got ").concat(n[a]," instead"))}function hn(e){for(var t=0;t<e.length;t++){var n=e[t];Array.isArray(n)?hn(n):e[t]=(0,en.encodeString)(n)}return e}function dn(e){var t=document.createElement("video");return"playsInline"in t&&(t.playsInline=!0),t.muted=!0,t.loop=!0,t.style.position="fixed",t.style.left="0px",t.style.top="0px",t.preload="auto",t.appendChild(e),new Promise((function(e){t.addEventListener("loadeddata",(function(n){return e(t)})),t.load()}))}function pn(e){return vn.apply(this,arguments)}function vn(){return(vn=(0,_.Z)(C().mark((function e(t){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.play();case 2:if(!("requestVideoFrameCallback"in t)){e.next=5;break}return e.next=5,new Promise((function(e){t.requestVideoFrameCallback(e)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var gn="4.17.0",mn=function(){function e(){(0,x.Z)(this,e)}return(0,w.Z)(e,null,[{key:"sgd",value:function(e){return new Je(e)}},{key:"momentum",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new et(e,t,n)}},{key:"rmsprop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new tt(e,t,n,r,a)}},{key:"adam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Ye(e,t,n,r)}},{key:"adadelta",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Ve(e,t,n)}},{key:"adamax",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return new Qe(e,t,n,r,a)}},{key:"adagrad",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return new He(e,t)}}]),e}(),yn=n(3525),bn=n(9503),xn=n(7627),wn=mn,kn="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:function(e){return e()};function _n(){return new Promise((function(e){return kn((function(){return e()}))}))}var Sn=n(8473);function Cn(e,t){var n=e[0].length;e.forEach((function(e,t){j.hu(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),j.hu(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var i=0;i<n;i++)j.hu(i===t||e[i]===r[i],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,".")}))}))}function En(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}var An,Nn=n(9151),Tn=n(5171);function Mn(e,t,n){var r=new Array;if(null==n&&null==t)return r;if(null==t)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(null==n)return r;if(e+n.length!==r.length)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.rank = ").concat(e+n.length,", but shape.rank = ").concat(r.length));for(var a=1;a<n.length;++a){var i=n[a],o=r[r.length-n.length+a],u=r[o];if(i>=0)if(u>=0){if(u!==i)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.shape[").concat(a+e,"] = ").concat(i," but shape[").concat(a+e,"] = ").concat(u))}else r[o]=i}return r}function Dn(e){var t,n={FIRST_DIM_SIZE:An.FIRST_DIM_SIZE,VALUE_ROWIDS:An.VALUE_ROWIDS,ROW_LENGTHS:An.ROW_LENGTHS,ROW_SPLITS:An.ROW_SPLITS,ROW_LIMITS:An.ROW_LIMITS,ROW_STARTS:An.ROW_STARTS},r=[],a=(0,k.Z)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(!(i in n))break;r.push(n[i])}}catch(Ir){a.e(Ir)}finally{a.f()}return r}function Fn(e){return 0===e.length?0:e[0]===An.FIRST_DIM_SIZE?e.length-1:e.length}function In(e,t){if(null!=e&&null!=t){var n=e.length,r=t.length;if(n>=r)throw new Error("defaultValue.shape=".concat(e," and ragged tensor flatValues.shape=").concat(t,", are incompatible: defaultValue.rank = ").concat(n," must be less than ragged tensor input flatValues.rank = ").concat(r,")"));for(var a=0;a<Math.min(n,r-1);++a){var i=e[a],o=t[a+1];if(i>=0&&o>=0&&1!==i&&i!==o)throw new Error("defaultValue.shape=".concat(e,", and ragged tensor input flatValues.shape=").concat(t," are incompatible: defaultValue.shape[").concat(a-e.length,"] = ").concat(i," but ragged tensor input.flatValues.shape[").concat(a-e.length,"] = ").concat(o))}}}!function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(An||(An={}));var On=30;function Rn(e){return e<=On?e:(0,j.jP)(e,Math.floor(Math.sqrt(e)))}function Zn(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function Bn(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=t.length,o=0;o<i;++o)a=a.concat([e[o+1]/t[o],t[o]]);a=a.concat(e.slice(i+1))}return a}function zn(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var i=[],o=[],u=1;u<e;++u)u>=2*t+1||u%2===1?o.push(u):i.push(u);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function Ln(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function Pn(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function jn(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}var Un=n(349),Wn=.3275911,Vn=.254829592,qn=-.284496736,Hn=1.421413741,Gn=-1.453152027,Xn=1.061405429,Yn=n(7269);function Kn(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function $n(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function Qn(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function Jn(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function er(e,t){return{real:e[2*t],imag:e[2*t+1]}}function tr(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function nr(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function rr(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}var ar="->",ir=/->/g;function or(e,t){var n=((e=e.replace(/\s/g,"")).length-e.replace(ir,"").length)/ar.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(ar,'").'));var r=e.split(ar),a=(0,ut.Z)(r,2),i=a[0],o=a[1];(0,j.hu)(-1===i.indexOf("..."),(function(){return'The ellipsis notation ("'.concat("...",'") is not supported yet.')}));var u=i.split(","),s=u.length;if(t!==s)throw new Error("Expected ".concat(s," input tensors, received ").concat(t));if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");for(var c=[],l=function(e){var t=o[e];if(!u.some((function(e){return-1!==e.indexOf(t)})))throw new Error("Output subscripts contain the label ".concat(t," ")+"not present in the input subscripts.");-1===c.indexOf(t)&&c.push(t)},f=0;f<o.length;++f)l(f);for(var h=0;h<i.length;++h){var d=i[h];-1===c.indexOf(d)&&","!==d&&c.push(d)}for(var p=new Array(u.length),v=0;v<s;++v){if(new Set(u[v].split("")).size!==u[v].length)throw new Error("Found duplicate axes in input component ".concat(u[v],". ")+"Support for duplicate axes in input is not implemented yet.");p[v]=[];for(var g=0;g<u[v].length;++g)p[v].push(c.indexOf(u[v][g]))}for(var m=c.length,y=[],b=o.length;b<m;++b)y.push(b);return{allDims:c,summedDims:y,idDims:p}}function ur(e,t){var n=new Array(e);n.fill(-1);for(var r=0;r<t.length;++r)n[t[r]]=r;for(var a=[],i=0;i<e;++i)-1===n[i]&&a.push(i);return{permutationIndices:n=n.filter((function(e){return-1!==e})),expandDims:a}}function sr(e,t,n){for(var r=new Array(e),a=function(e){for(var a=n[e].shape,i=function(n){void 0===r[t[e][n]]?r[t[e][n]]=a[n]:(0,j.hu)(r[t[e][n]]===a[n],(function(){return"Expected dimension ".concat(r[t[e][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(a),", ")+"but got dimension ".concat(a[n])}))},o=0;o<t[e].length;++o)i(o)},i=0;i<n.length;++i)a(i)}function cr(e,t){var n,r=e,a=[];0===e.length&&r.push(-1),n=e.length+1;for(var i=0;i<n;++i)a.push([]);for(var o=[],u=0;u<r.length;++u){var s,c=fr(t,r[u]),l=(0,k.Z)(c);try{for(l.s();!(s=l.n()).done;){var f=s.value;-1===o.indexOf(f)&&(a[u].push(f),o.push(f))}}catch(Ir){l.e(Ir)}finally{l.f()}}return{path:r,steps:a}}function lr(e){return e.every((function(e,t){return e===t}))}function fr(e,t){for(var n=[],r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function hr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)(0,j.hu)(e.shape[n]%t===0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{var a=t.reduce((function(e,t){return-1===t&&(e+=1),e}),0);(0,j.hu)(a<=1,(function(){return"There should be only one negative value in split array."}));var i=t.indexOf(-1);if(-1!==i){var o=t.reduce((function(e,t){return t>0?e+t:e}));t[i]=e.shape[n]-o}(0,j.hu)(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}function dr(e){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(e)}function pr(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function vr(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function gr(e,t){return"only one output dimension may be -1, not both ".concat(e," and ").concat(t)}function mr(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function yr(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function br(e,t){var n=(0,j.NA)(e),r=(0,j.NA)(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}function xr(e,t){var n=(0,j.NA)(e),r=(0,j.NA)(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}function wr(){return"segment ids must be >= 0"}function kr(){return"segment ids are not increasing"}function _r(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function Sr(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function Cr(e,t){var n,r=!1;for(e<=On?(n=e,r=!0):n=(0,j.jP)(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=(0,j.jP)(e,n+1);return n}function Er(e,t,n){for(var r=[],a=e.length,i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}function Ar(e,t,n,r){var a=t.shape.length,i=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var o=0;o<r;++o)if(e.shape[o]!==t.shape[o])throw new Error("x.shape[".concat(o,"]: ").concat(e.shape[o]," should be equal to indices.shape[").concat(o,"]: ").concat(t.shape[o],"."));for(var u=e.shape[n],s=[],c=1,l=1,f=1,h=0;h<r;++h)s.push(e.shape[h]),c*=e.shape[h];for(var d=r;d<n;d++)s.push(e.shape[d]),l*=e.shape[d];for(var p=r;p<a;p++)s.push(t.shape[p]);for(var v=n+1;v<i;v++)s.push(e.shape[v]),f*=e.shape[v];return{batchSize:c,sliceSize:f,outerSize:l,dimSize:u,outputShape:s}}function Nr(e){try{return e.map((function(e){return(0,en.decodeString)(e)}))}catch(Ir){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(Ir))}}function Tr(e){return e.map((function(e){return(0,en.encodeString)(e)}))}var Mr=n(745),Dr=n(4189),Fr=n(4679);!function(){var e,t=(0,k.Z)(nt);try{for(t.s();!(e=t.n()).done;){je(e.value)}}catch(Ir){t.e(Ir)}finally{t.f()}}()},5714:function(e,t,n){"use strict";n.d(t,{w:function(){return o}});var r=n(7853),a=n(4531),i=n(115),o=function(){function e(t){if((0,r.Z)(this,e),this.shards=[],this.previousShardIndex=0,null!=t&&(t instanceof Array||(t=[t]),0!==(t=t.map((function(e){return i.isTypedArray(e)?e.buffer:e}))).length)){this.bufferUniformSize=t[0].byteLength;for(var n=0,a=0;a<t.length;a++){var o=t[a];a!==t.length-1&&o.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);var u=n+o.byteLength;this.shards.push({buffer:o,start:n,end:u}),n=u}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}}return(0,a.Z)(e,[{key:"slice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength;if(0===this.shards.length)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),(t=Math.min(this.byteLength,t))<=e)return new ArrayBuffer(0);var n=this.findShardForByte(e);if(-1===n)throw new Error("Could not find start shard for byte ".concat(e));for(var r=t-e,a=new ArrayBuffer(r),i=new Uint8Array(a),o=0,u=n;u<this.shards.length;u++){var s=this.shards[u],c=e+o,l=c-s.start,f=o,h=Math.min(t,s.end),d=h-s.start,p=new Uint8Array(s.buffer,l,d-l);if(i.set(p,f),o+=p.length,t<s.end)break}return a}},{key:"findShardForByte",value:function(e){if(0===this.shards.length||e<0||e>=this.byteLength)return-1;if(null!=this.bufferUniformSize)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(t){return e<t.start?-1:e>=t.end?1:0}if(0===t(this.shards[this.previousShardIndex]))return this.previousShardIndex;var n=function(e,t){var n=0,r=e.length;for(;n<=r;){var a=Math.floor((r-n)/2)+n,i=t(e[a]);if(0===i)return a;i<0?r=a:n=a+1}return-1}(this.shards,t);return-1===n?-1:(this.previousShardIndex=n,this.previousShardIndex)}}],[{key:"join",value:function(t){return new e(t).slice()}}]),e}()},1434:function(e,t,n){"use strict";n.d(t,{EZ:function(){return I},JY:function(){return F},Q:function(){return z},Yd:function(){return O},_n:function(){return M},dI:function(){return y},hu:function(){return L},jN:function(){return Z},ji:function(){return R},n7:function(){return D},r:function(){return C},yz:function(){return g}});var r=n(678),a=n(1303),i=n(9472),o=n(3032),u=n(4322),s=n.n(u),c=n(9253),l=n(2442),f=n(6147),h=n(1988),d=n(5714),p=n(5875),v=n(5050);function g(e,t){return m.apply(this,arguments)}function m(){return m=(0,o.Z)(s().mark((function e(t,n){var r,a,i,u,c,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],a=[],i=Array.isArray(t)?t.map((function(e){return e.name})):Object.keys(t),u=function(e){var u=i[e],c=Array.isArray(t)?t[e].tensor:t[u];if("float32"!==c.dtype&&"int32"!==c.dtype&&"bool"!==c.dtype&&"string"!==c.dtype&&"complex64"!==c.dtype)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c.dtype));var l={name:u,shape:c.shape,dtype:c.dtype};if("string"===c.dtype){var f=new Promise(function(){var e=(0,o.Z)(s().mark((function e(t){var n,r,a,i,o,u,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.bytes();case 2:for(n=e.sent,r=n.reduce((function(e,t){return e+t.length}),0)+4*n.length,a=new Uint8Array(r),i=0,o=0;o<n.length;o++)u=n[o],l=new Uint8Array(new Uint32Array([u.length]).buffer),a.set(l,i),i+=4,a.set(u,i),i+=u.length;t(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());a.push(f)}else a.push(c.data());null!=n&&(l.group=n),r.push(l)},c=0;c<i.length;++c)u(c);return e.next=7,Promise.all(a);case 7:return l=e.sent,e.abrupt("return",{data:A(l),specs:r});case 9:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function y(e,t){var n,r=new d.w(e),a={},o=0,u=(0,i.Z)(t);try{for(u.s();!(n=u.n()).done;){var s=n.value,c=b(s,(function(e,t){return r.slice(o+e,o+t)}));a[s.name]=k(s,r.slice(o,o+c)),o+=c}}catch(l){u.e(l)}finally{u.f()}return a}function b(e,t){var n,r=(0,f.NA)(e.shape);if("quantization"in e){var a=e.quantization;n=h.J[a.dtype]}else{if("string"===e.dtype){for(var i=0,o=0;o<r;o++)i+=4+new Uint32Array(t(i,i+4))[0];return i}n=h.J[e.dtype]}return r*n}function x(e,t){return w.apply(this,arguments)}function w(){return(w=(0,o.Z)(s().mark((function e(t,n){var r,a,i,o,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,f.NA)(t.shape),!("quantization"in t)){e.next=6;break}i=t.quantization,a=h.J[i.dtype],e.next=25;break;case 6:if("string"!==t.dtype){e.next=24;break}o=0,u=0;case 9:if(!(u<r)){e.next=21;break}return e.t0=o,e.t1=4,e.t2=Uint32Array,e.next=15,n(o,o+4);case 15:e.t3=e.sent,e.t4=new e.t2(e.t3)[0],o=e.t0+=e.t1+e.t4;case 18:u++,e.next=9;break;case 21:return e.abrupt("return",o);case 24:a=h.J[t.dtype];case 25:return e.abrupt("return",r*a);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t){var n,r=e.name,a=e.dtype,i=e.shape,o=(0,f.NA)(i),u=0;if("quantization"in e){var s=e.quantization;if("uint8"===s.dtype||"uint16"===s.dtype){if(!("min"in s)||!("scale"in s))throw new Error("Weight ".concat(e.name," with quantization ").concat(s.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==s.dtype)throw new Error("Weight ".concat(e.name," has unknown ")+"quantization dtype ".concat(s.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==a)throw new Error("Weight ".concat(e.name," is quantized with ").concat(s.dtype," ")+"which only supports weights of type float32 not ".concat(a,"."))}var d=h.J[s.dtype],p="uint8"===s.dtype?new Uint8Array(t):new Uint16Array(t);if("float32"===a)if("uint8"===s.dtype||"uint16"===s.dtype){n=new Float32Array(p.length);for(var v=0;v<p.length;v++){var g=p[v];n[v]=g*s.scale+s.min}}else{if("float16"!==s.dtype)throw new Error("Unsupported quantization type ".concat(s.dtype," ")+"for weight type float32.");var m=function(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0===(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|(n+=947912704)},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(r){for(var a=new ArrayBuffer(4*r.length),i=new Uint32Array(a),o=0;o<r.length;o++){var u=r[o],s=e[n[u>>10]+(1023&u)]+t[u>>10];i[o]=s}return new Float32Array(a)}}();n=m(p)}else{if("int32"!==a)throw new Error("Unsupported dtype in weight '".concat(r,"': ").concat(a));if("uint8"!==s.dtype&&"uint16"!==s.dtype)throw new Error("Unsupported quantization type ".concat(s.dtype," ")+"for weight type int32.");n=new Int32Array(p.length);for(var y=0;y<p.length;y++){var b=p[y];n[y]=Math.round(b*s.scale+s.min)}}u+=o*d}else if("string"===a){var x=(0,f.NA)(e.shape);n=[];for(var w=0;w<x;w++){var k=new Uint32Array(t.slice(u,u+4))[0];u+=4;var _=new Uint8Array(t.slice(u,u+k));n.push(_),u+=k}}else{var S=h.J[a];if("float32"===a)n=new Float32Array(t);else if("int32"===a)n=new Int32Array(t);else{if("bool"!==a){if("complex64"===a){n=new Float32Array(t);for(var C=new Float32Array(n.length/2),E=new Float32Array(n.length/2),A=0;A<C.length;A++)C[A]=n[2*A],E[A]=n[2*A+1];var N=(0,l.X)(C,i,"float32"),T=(0,l.X)(E,i,"float32"),M=(0,c.P)(N,T);return N.dispose(),T.dispose(),M}throw new Error("Unsupported dtype in weight '".concat(r,"': ").concat(a))}n=new Uint8Array(t)}u+=o*S}return(0,l.X)(n,i,a)}function _(e,t,n){return S.apply(this,arguments)}function S(){return(S=(0,o.Z)(s().mark((function e(t,n,r){var a,i,o,u,c,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new Uint8Array(n);case 1:if(!(a.byteLength<r)){e.next=16;break}return e.next=4,t.read();case 4:if(i=e.sent,o=i.done,u=i.value,!o||null!=u){e.next=10;break}throw c=r-a.byteLength,new Error("Reader is done but ".concat(c," bytes are still expected"));case 10:(l=new Uint8Array(a.length+u.byteLength)).set(a,0),l.set(new Uint8Array(u),a.length),a=l,e.next=1;break;case 16:return e.abrupt("return",a.buffer);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t){return E.apply(this,arguments)}function E(){return E=(0,o.Z)(s().mark((function e(t,n){var r,a,u,c,l,h,d,g,m,y;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={},a=t.getReader(),u=new ArrayBuffer(0),c=(0,i.Z)(n),e.prev=4,c.s();case 6:if((l=c.n()).done){e.next=21;break}return h=l.value,e.next=10,x(h,function(){var e=(0,o.Z)(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(a,u,n);case 2:return u=e.sent,e.abrupt("return",u.slice(t,n));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 10:return d=e.sent,e.next=13,_(a,u,d);case 13:u=e.sent,g=u.slice(0,d),u=u.slice(d),m=k(h,g),r[h.name]=m,"webgpu"===(0,p.N_)()&&"uploadToGPU"in(y=(0,p.y3)())&&(0,f.NA)(m.shape)>=(0,v.OB)().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&y.uploadToGPU(m.dataId);case 19:e.next=6;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(4),c.e(e.t0);case 26:return e.prev=26,c.f(),e.finish(26);case 29:return e.abrupt("return",r);case 30:case"end":return e.stop()}}),e,null,[[4,23,26,29]])}))),E.apply(this,arguments)}function A(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var N="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function T(e){return N?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function M(e){if(N)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function D(e){if(N){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}function F(e){return d.w.join(e)}function I(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function O(e,t){var n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function R(e,t,n){var r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(r.initializerSignature=e.initializerSignature),r}function Z(e,t){return B.apply(this,arguments)}function B(){return(B=(0,o.Z)(s().mark((function e(t,n){var a,i,o,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.weightsManifest){e.next=7;break}return e.next=3,n(t.weightsManifest);case 3:o=e.sent,u=(0,r.Z)(o,2),a=u[0],i=u[1];case 7:return e.abrupt("return",R(t,a,i));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:T(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:T(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:new d.w(e.weightData).byteLength}}function L(e){var t,n=[],r=(0,i.Z)(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;n.push.apply(n,(0,a.Z)(o.weights))}}catch(u){r.e(u)}finally{r.f()}return n}},1988:function(e,t,n){"use strict";n.d(t,{J:function(){return r}});var r={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8}},2145:function(e,t,n){"use strict";n.d(t,{$HU:function(){return yt},$g6:function(){return te},$w:function(){return Y},Acj:function(){return ye},BMI:function(){return je},BiW:function(){return vt},Byc:function(){return j},CAk:function(){return Ae},CQl:function(){return pt},D2d:function(){return Yt},DlI:function(){return ht},Eh3:function(){return F},FKq:function(){return Pt},G3Y:function(){return ln},GBy:function(){return jt},Gcp:function(){return Vt},HEU:function(){return re},HZH:function(){return xt},Hhh:function(){return ze},Hmb:function(){return kt},IKK:function(){return c},IMb:function(){return x},J$2:function(){return Ce},J7O:function(){return Le},J_u:function(){return we},JhU:function(){return m},Kgp:function(){return ct},L8s:function(){return Wt},Ly9:function(){return C},M2y:function(){return h},MIZ:function(){return on},MRv:function(){return Lt},MZg:function(){return Ie},NEP:function(){return oe},NZg:function(){return Qe},O3z:function(){return qt},OAf:function(){return Ve},OR:function(){return he},OU7:function(){return qe},OV7:function(){return We},Omj:function(){return ae},Oyi:function(){return v},PYm:function(){return De},PhF:function(){return Ft},QCc:function(){return g},QRR:function(){return V},Qg5:function(){return xe},QiL:function(){return ut},Qvg:function(){return dn},RFZ:function(){return A},ROF:function(){return y},RQH:function(){return Rt},RuY:function(){return vn},SIB:function(){return Mt},SX0:function(){return ne},SYM:function(){return r},SbG:function(){return Ct},SpW:function(){return i},T0n:function(){return q},TQc:function(){return Ut},TR1:function(){return P},ToN:function(){return hn},Tr8:function(){return rn},Uyb:function(){return fe},VGw:function(){return a},Vbg:function(){return $e},VcC:function(){return W},VfG:function(){return Fe},Vn9:function(){return Q},W0H:function(){return at},XDQ:function(){return pn},XLW:function(){return w},XkS:function(){return nn},Xze:function(){return u},Y0y:function(){return se},YFo:function(){return ue},YoZ:function(){return Pe},ZbH:function(){return Te},ZjV:function(){return Xt},Zz9:function(){return M},_JP:function(){return en},_V0:function(){return xn},_Yw:function(){return _t},_k9:function(){return b},_tC:function(){return Kt},a5O:function(){return zt},aJk:function(){return f},avt:function(){return ke},b9H:function(){return yn},bK0:function(){return $t},bV0:function(){return Nt},c17:function(){return Xe},cWu:function(){return sn},cie:function(){return H},cye:function(){return rt},dDz:function(){return dt},deh:function(){return le},dpD:function(){return wt},e07:function(){return At},e0R:function(){return Qt},e6w:function(){return gt},e7N:function(){return Ne},eBW:function(){return mn},eEB:function(){return E},eZ0:function(){return Be},ekb:function(){return $},gJX:function(){return N},h8e:function(){return gn},hCO:function(){return S},hGc:function(){return J},hdR:function(){return ie},i5y:function(){return Bt},iHb:function(){return U},iJz:function(){return be},iWB:function(){return _e},iZT:function(){return me},ik2:function(){return z},jMg:function(){return p},jQk:function(){return Jt},jQs:function(){return Ke},jeX:function(){return de},kU:function(){return Me},kpP:function(){return fn},kuV:function(){return et},luS:function(){return wn},lyA:function(){return st},mKl:function(){return Et},mTV:function(){return Ue},mc4:function(){return L},mhS:function(){return I},mm_:function(){return o},n9L:function(){return un},nhH:function(){return Ht},nr8:function(){return Dt},o0g:function(){return ft},o2y:function(){return B},oFR:function(){return It},oHH:function(){return ee},oT6:function(){return s},p2w:function(){return Ot},p4S:function(){return K},pe_:function(){return lt},q1x:function(){return ge},q2K:function(){return Ge},q8u:function(){return Ye},qCd:function(){return Re},qIC:function(){return Ze},qWM:function(){return it},qi_:function(){return ve},qkr:function(){return bt},qw7:function(){return d},r7n:function(){return Se},s1s:function(){return tn},sEM:function(){return an},sHE:function(){return pe},sJF:function(){return l},sL$:function(){return G},usg:function(){return bn},uv1:function(){return nt},vFR:function(){return He},vtC:function(){return Ee},vwp:function(){return ce},w3H:function(){return Gt},w6g:function(){return Oe},wUP:function(){return O},wYB:function(){return Zt},wYn:function(){return Je},we_:function(){return ot},wm:function(){return R},wx7:function(){return cn},x12:function(){return Z},xJR:function(){return mt},xQA:function(){return Tt},xnO:function(){return T},y7R:function(){return X},yQU:function(){return tt},yj2:function(){return D},zbQ:function(){return St},zvY:function(){return _},zws:function(){return k}});var r="Abs",a="Acos",i="Acosh",o="Add",u="AddN",s="All",c="Any",l="ArgMax",f="ArgMin",h="Asin",d="Asinh",p="Atan",v="Atanh",g="Atan2",m="AvgPool",y="AvgPoolGrad",b="AvgPool3D",x="AvgPool3DGrad",w="BatchMatMul",k="BatchToSpaceND",_="Bincount",S="BitwiseAnd",C="BroadcastTo",E="BroadcastArgs",A="Cast",N="Ceil",T="ClipByValue",M="Complex",D="ComplexAbs",F="Concat",I="Conv2D",O="Conv2DBackpropFilter",R="Conv2DBackpropInput",Z="Conv3D",B="Conv3DBackpropFilterV2",z="Conv3DBackpropInputV2",L="Cos",P="Cosh",j="Cumprod",U="Cumsum",W="CropAndResize",V="DenseBincount",q="DepthToSpace",H="DepthwiseConv2dNative",G="DepthwiseConv2dNativeBackpropFilter",X="DepthwiseConv2dNativeBackpropInput",Y="Diag",K="Dilation2D",$="Dilation2DBackpropInput",Q="Dilation2DBackpropFilter",J="Draw",ee="RealDiv",te="Einsum",ne="Elu",re="EluGrad",ae="Erf",ie="Equal",oe="Exp",ue="ExpandDims",se="Expm1",ce="FFT",le="Fill",fe="FlipLeftRight",he="Floor",de="FloorDiv",pe="FusedBatchNorm",ve="GatherV2",ge="GatherNd",me="Greater",ye="GreaterEqual",be="Identity",xe="IFFT",we="Imag",ke="IsFinite",_e="IsInf",Se="IsNan",Ce="LeakyRelu",Ee="Less",Ae="LessEqual",Ne="LinSpace",Te="Log",Me="Log1p",De="LogicalAnd",Fe="LogicalNot",Ie="LogicalOr",Oe="LogicalXor",Re="LogSoftmax",Ze="LowerBound",Be="LRN",ze="LRNGrad",Le="MatrixBandPart",Pe="Max",je="Maximum",Ue="MaxPool",We="MaxPoolGrad",Ve="MaxPool3D",qe="MaxPool3DGrad",He="MaxPoolWithArgmax",Ge="Mean",Xe="Min",Ye="Minimum",Ke="MirrorPad",$e="Mod",Qe="Multinomial",Je="Multiply",et="Neg",tt="NotEqual",nt="NonMaxSuppressionV3",rt="NonMaxSuppressionV4",at="NonMaxSuppressionV5",it="OnesLike",ot="OneHot",ut="Pack",st="PadV2",ct="Pool",lt="Pow",ft="Prelu",ht="Prod",dt="RaggedGather",pt="RaggedRange",vt="RaggedTensorToTensor",gt="Range",mt="Real",yt="Reciprocal",bt="Relu",xt="Reshape",wt="ResizeNearestNeighbor",kt="ResizeNearestNeighborGrad",_t="ResizeBilinear",St="ResizeBilinearGrad",Ct="Relu6",Et="Reverse",At="Round",Nt="Rsqrt",Tt="ScatterNd",Mt="TensorScatterUpdate",Dt="SearchSorted",Ft="Select",It="Selu",Ot="Slice",Rt="Sin",Zt="Sinh",Bt="Sign",zt="Sigmoid",Lt="Softplus",Pt="Sqrt",jt="Sum",Ut="SpaceToBatchND",Wt="SplitV",Vt="Softmax",qt="SparseFillEmptyRows",Ht="SparseReshape",Gt="SparseSegmentMean",Xt="SparseSegmentSum",Yt="SparseToDense",Kt="SquaredDifference",$t="Square",Qt="StaticRegexReplace",Jt="StridedSlice",en="StringNGrams",tn="StringSplit",nn="StringToHashBucketFast",rn="Sub",an="Tan",on="Tanh",un="Tile",sn="TopK",cn="Transform",ln="Transpose",fn="Unique",hn="Unpack",dn="UnsortedSegmentSum",pn="UpperBound",vn="ZerosLike",gn="Step",mn="FromPixels",yn="RotateWithOffset",bn="_FusedMatMul",xn="FusedConv2D",wn="FusedDepthwiseConv2D"},8864:function(e,t,n){"use strict";n.d(t,{Li:function(){return d},T3:function(){return g},bt:function(){return v},nE:function(){return p},pI:function(){return c},tr:function(){return f},uk:function(){return l},wC:function(){return h}});var r=n(678),a=n(5050),i=n(6581),o=n(7269),u=(0,i.R)("kernelRegistry",(function(){return new Map})),s=(0,i.R)("gradRegistry",(function(){return new Map}));function c(e,t){var n=m(e,t);return u.get(n)}function l(e){return s.get(e)}function f(e){for(var t=u.entries(),n=[];;){var a=t.next(),i=a.done,o=a.value;if(i)break;var s=(0,r.Z)(o,2),c=s[0],l=s[1],f=c.split("_");(0,r.Z)(f,1)[0]===e&&n.push(l)}return n}function h(e){var t=e.kernelName,n=e.backendName,r=m(t,n);u.has(r)&&o.Z("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),u.set(r,e)}function d(e){var t=e.kernelName;s.has(t)&&(0,a.OB)().getBool("DEBUG")&&o.Z("Overriding the gradient for '".concat(t,"'")),s.set(t,e)}function p(e,t){var n=m(e,t);if(!u.has(n))throw new Error("The kernel '".concat(e,"' for backend ")+"'".concat(t,"' is not registered"));u.delete(n)}function v(e){if(!s.has(e))throw new Error("The gradient '".concat(e,"' for backend is not registered"));s.delete(e)}function g(e,t){f(e).forEach((function(e){h(Object.assign({},e,{backendName:t}))}))}function m(e,t){return"".concat(t,"_").concat(e)}},7269:function(e,t,n){"use strict";n.d(t,{Z:function(){return a},c:function(){return i}});var r=n(5050);function a(){var e;(0,r.OB)().getBool("IS_TEST")||(0,r.OB)().getBool("PROD")||(e=console).warn.apply(e,arguments)}function i(){var e;(0,r.OB)().getBool("IS_TEST")||(0,r.OB)().getBool("PROD")||(e=console).log.apply(e,arguments)}},7613:function(e,t,n){"use strict";n.d(t,{W:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({abs_:function(e){var t=(0,i._1)(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return r.BV.runKernel(a.yj2,n)}var o={x:t};return r.BV.runKernel(a.SYM,o)}})},1719:function(e,t,n){"use strict";n.d(t,{K:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({acos_:function(e){var t={x:(0,i._1)(e,"x","acos")};return r.BV.runKernel(a.VGw,t)}})},4502:function(e,t,n){"use strict";n.d(t,{_:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({acosh_:function(e){var t={x:(0,i._1)(e,"x","acosh")};return r.BV.runKernel(a.SpW,t)}})},3312:function(e,t,n){"use strict";n.d(t,{I:function(){return s}});var r=n(678),a=n(318),i=n(2145),o=n(9064),u=n(8354);var s=(0,n(8640).op)({add_:function(e,t){var n=(0,u._1)(e,"a","add"),s=(0,u._1)(t,"b","add"),c=(0,o.makeTypesMatch)(n,s),l=(0,r.Z)(c,2),f={a:n=l[0],b:s=l[1]};return a.BV.runKernel(i.mm_,f)}})},4108:function(e,t,n){"use strict";n.d(t,{$:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=(0,i._1)(e,"x","all","bool"),u={x:o},s={axis:t,keepDims:n};return r.BV.runKernel(a.oT6,u,s)}})},8543:function(e,t,n){"use strict";n.d(t,{Y:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=(0,i._1)(e,"x","any","bool"),u={x:o},s={axis:t,keepDims:n};return r.BV.runKernel(a.IKK,u,s)}})},9995:function(e,t,n){"use strict";n.d(t,{N:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,i._1)(e,"x","argMax"),o={x:n},u={axis:t};return r.BV.runKernel(a.sJF,o,u)}})},5157:function(e,t,n){"use strict";n.d(t,{v:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,i._1)(e,"x","argMin"),o={x:n},u={axis:t};return r.BV.runKernel(a.aJk,o,u)}})},3053:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({asin_:function(e){var t={x:(0,i._1)(e,"x","asin")};return r.BV.runKernel(a.M2y,t)}})},54:function(e,t,n){"use strict";n.d(t,{V:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({asinh_:function(e){var t={x:(0,i._1)(e,"x","asinh")};return r.BV.runKernel(a.qw7,t)}})},4778:function(e,t,n){"use strict";n.d(t,{z:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({atan_:function(e){var t={x:(0,i._1)(e,"x","atan")};return r.BV.runKernel(a.jMg,t)}})},2227:function(e,t,n){"use strict";n.d(t,{f:function(){return s}});var r=n(678),a=n(318),i=n(2145),o=n(9064),u=n(8354);var s=(0,n(8640).op)({atan2_:function(e,t){var n=(0,u._1)(e,"a","atan2"),s=(0,u._1)(t,"b","atan2"),c=(0,o.makeTypesMatch)(n,s),l=(0,r.Z)(c,2),f={a:n=l[0],b:s=l[1]};return a.BV.runKernel(i.QCc,f)}})},7897:function(e,t,n){"use strict";n.d(t,{C:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({atanh_:function(e){var t={x:(0,i._1)(e,"x","atanh")};return r.BV.runKernel(a.Oyi,t)}})},9204:function(e,t,n){"use strict";n.d(t,{w:function(){return f}});var r=n(318),a=n(2145),i=n(8354),o=n(6147),u=n(9118),s=n(9151),c=n(8640),l=n(5561);var f=(0,c.op)({avgPool_:function(e,t,n,c,f){var h=(0,i._1)(e,"x","avgPool","float32");o.hu(s.jT(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")}));var d=h,p=!1;3===h.rank&&(p=!0,d=(0,l.X)(h,[1,h.shape[0],h.shape[1],h.shape[2]])),o.hu(4===d.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(d.rank,".")})),s.m("avgPool",c,f);var v={x:d},g={filterSize:t,strides:n,pad:c,dimRoundingMode:f},m=r.BV.runKernel(a.JhU,v,g);return m=(0,u.p)(m,h.dtype),p?(0,l.X)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}})},8473:function(e,t,n){"use strict";n.d(t,{LJ:function(){return l},Q3:function(){return c},Vh:function(){return i},YB:function(){return a},kz:function(){return o},lB:function(){return s},rv:function(){return u},sY:function(){return f}});var r=n(6147);function a(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function i(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,u=0;u<r;u++)-1===n.indexOf(u)?a.push(e[i++]):a.push(t[o++]);return a}function o(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);var i=t.map((function(t){return e[t]}));return[n,i]}function u(e,t){return i(e,t.map((function(e){return 1})),t)}function s(e,t,n){r.hu(a(t,n),(function(){return"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")}))}function c(e,t){if(a(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function l(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function f(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}},6994:function(e,t,n){"use strict";n.d(t,{E:function(){return u}});var r=n(318),a=n(2145),i=n(8354),o=n(6147);var u=(0,n(8640).op)({batchToSpaceND_:function(e,t,n){var u=(0,i._1)(e,"x","batchToSpaceND"),s=t.reduce((function(e,t){return e*t}));o.hu(u.rank>=1+t.length,(function(){return"input rank is ".concat(u.rank," but should be > than blockShape.length ").concat(t.length)})),o.hu(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),o.hu(u.shape[0]%s===0,(function(){return"input tensor batch is ".concat(u.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(s)}));var c={x:u},l={blockShape:t,crops:n};return r.BV.runKernel(a.zws,c,l)}})},3700:function(e,t,n){"use strict";n.d(t,{t:function(){return s}});var r=n(318),a=n(2145),i=n(8354),o=n(6147),u=n(5561);var s=(0,n(8640).op)({batchNorm_:function(e,t,n,s,c,l){null==l&&(l=.001);var f,h,d=(0,i._1)(e,"x","batchNorm"),p=(0,i._1)(t,"mean","batchNorm"),v=(0,i._1)(n,"variance","batchNorm");null!=c&&(f=(0,i._1)(c,"scale","batchNorm")),null!=s&&(h=(0,i._1)(s,"offset","batchNorm")),o.hu(p.rank===v.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),o.hu(null==h||p.rank===h.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),o.hu(null==f||p.rank===f.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var g=function(e){return 0===e.rank||1===e.rank?(0,u.X)(e,[1,1,1,e.size]):2===e.rank?(0,u.X)(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?(0,u.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}(d),m={x:g,scale:f,offset:h,mean:p,variance:v},y={varianceEpsilon:l},b=r.BV.runKernel(a.sHE,m,y);return(0,u.X)(b,d.shape)}})},9742:function(e,t,n){"use strict";n.d(t,{U:function(){return l}});var r=n(318),a=n(2145),i=n(8354),o=n(6147),u=n(672),s=n(8640),c=n(5561);var l=(0,s.op)({broadcastTo_:function(e,t){var n=(0,i._1)(e,"broadcastTo","x"),s=n.shape;if((0,o.Mu)(t),t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var l=n.shape.slice();l.length<t.length;)l.unshift(1);n=(0,c.X)(n,l)}for(var f=n.shape,h=Array.from(t),d=t.length-1;d>=0;d--)if(f[d]===t[d])h[d]=1;else if(1!==n.shape[d])throw new Error("broadcastTo(): [".concat(s,"] cannot be broadcast to [").concat(t,"]."));var p=h.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));if(0===p.length)return(0,u.d)(n);var v={x:n},g={reps:h};return r.BV.runKernel(a.n9L,v,g)}})},5774:function(e,t,n){"use strict";function r(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function a(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}function i(e,t){for(var n=Math.max(e.length,t.length),r=new Array(n),a=0;a<n;a++){var i=e[e.length-a-1];null==i&&(i=1);var o=t[t.length-a-1];if(null==o&&(o=1),1===i)r[n-a-1]=o;else if(1===o)r[n-a-1]=i;else{if(i!==o){var u="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(u)}r[n-a-1]=i}}return r}n.r(t),n.d(t,{assertAndGetBroadcastShape:function(){return i},getBroadcastDims:function(){return r},getReductionAxes:function(){return a}})},7039:function(e,t,n){"use strict";n.d(t,{f:function(){return i}});var r=n(4376),a=n(6147);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",a.Mu(e),new r.YD(e,t,n)}},9118:function(e,t,n){"use strict";n.d(t,{p:function(){return u}});var r=n(318),a=n(2145),i=n(8354),o=n(6147);var u=(0,n(8640).op)({cast_:function(e,t){var n=(0,i._1)(e,"x","cast");if(!o.LP(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var u={x:n},s={dtype:t};return r.BV.runKernel(a.RFZ,u,s)}})},1396:function(e,t,n){"use strict";n.d(t,{m:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({ceil_:function(e){var t={x:(0,i._1)(e,"x","ceil","float32")};return r.BV.runKernel(a.gJX,t)}})},9836:function(e,t,n){"use strict";n.d(t,{i:function(){return s}});var r=n(318),a=n(2145),i=n(8354),o=n(6147),u=n(8582);var s=(0,n(8640).op)({clipByValue_:function(e,t,n){var s=(0,i._1)(e,"x","clipByValue");if(o.hu(t<=n,(function(){return"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")})),t===n)return(0,u.h)(s.shape,t,s.dtype);var c={x:s},l={clipValueMin:t,clipValueMax:n};return r.BV.runKernel(a.xnO,c,l)}})},672:function(e,t,n){"use strict";n.d(t,{d:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({clone_:function(e){var t={x:(0,i._1)(e,"x","clone","string_or_numeric")};return r.BV.runKernel(a.iJz,t)}})},9253:function(e,t,n){"use strict";n.d(t,{P:function(){return u}});var r=n(318),a=n(2145),i=n(8354),o=n(6147);var u=(0,n(8640).op)({complex_:function(e,t){var n=(0,i._1)(e,"real","complex"),u=(0,i._1)(t,"imag","complex");o.k5(n.shape,u.shape,"real and imag shapes, ".concat(n.shape," and ").concat(u.shape,", ")+"must match in call to tf.complex().");var s={real:n,imag:u};return r.BV.runKernel(a.Zz9,s)}})},4836:function(e,t,n){"use strict";n.d(t,{z:function(){return s}});var r=n(318),a=n(2145),i=n(8354),o=n(6147),u=n(672);var s=(0,n(8640).op)({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,o.hu)(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=(0,i.sI)(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return(0,u.d)(n[0]);var s=n,c={axis:t};return r.BV.runKernel(a.Eh3,s,c)}})},4918:function(e,t,n){"use strict";n.d(t,{P:function(){return c}});var r=n(8354),a=n(6147),i=n(3457),o=n(9151),u=n(8640),s=n(5561);var c=(0,u.op)({conv1d_:function(e,t,n,u){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,f=arguments.length>6?arguments[6]:void 0,h=(0,r._1)(e,"x","conv1d"),d=(0,r._1)(t,"filter","conv1d"),p=h,v=!1;2===h.rank&&(v=!0,p=(0,s.X)(h,[1,h.shape[0],h.shape[1]])),a.hu(3===p.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(p.rank,".")})),a.hu(3===d.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(d.rank,".")})),o.m("conv1d",u,f),a.hu(p.shape[2]===d.shape[1],(function(){return"Error in conv1d: depth of input (".concat(p.shape[2],") must match ")+"input depth for filter ".concat(d.shape[1],".")})),a.hu(o.jT(n,l),(function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(l,"'")})),a.hu(o.U3(l),(function(){return"Error in conv1D: Dilated rates should be larger than 0."})),a.hu(o.U3(n),(function(){return"Error in conv1D: Stride should be larger than 0."})),a.hu("NWC"===c,(function(){return"Error in conv1d: got dataFormat of ".concat(c," but only NWC is currently supported.")}));var g=(0,s.X)(d,[1,d.shape[0],d.shape[1],d.shape[2]]),m=(0,s.X)(p,[p.shape[0],1,p.shape[1],p.shape[2]]),y=[1,n],b=[1,l],x="NHWC",w=(0,i.T)(m,g,y,u,x,b,f);return v?(0,s.X)(w,[w.shape[2],w.shape[3]]):(0,s.X)(w,[w.shape[0],w.shape[2],w.shape[3]])}})},3457:function(e,t,n){"use strict";n.d(t,{T:function(){return l}});var r=n(318),a=n(2145),i=n(8354),o=n(6147),u=n(9151),s=n(8640),c=n(5561);var l=(0,s.op)({conv2d_:function(e,t,n,s){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],h=arguments.length>6?arguments[6]:void 0,d=(0,i._1)(e,"x","conv2d","float32"),p=(0,i._1)(t,"filter","conv2d","float32"),v=d,g=!1;3===d.rank&&(g=!0,v=(0,c.X)(d,[1,d.shape[0],d.shape[1],d.shape[2]])),o.hu(4===v.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(v.rank,".")})),o.hu(4===p.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(p.rank,".")})),u.m("conv2d",s,h);var m="NHWC"===l?v.shape[3]:v.shape[1];o.hu(m===p.shape[2],(function(){return"Error in conv2d: depth of input (".concat(m,") must match ")+"input depth for filter ".concat(p.shape[2],".")})),o.hu(u.jT(n,f),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(f,"'")})),o.hu(u.U3(f),(function(){return"Error in conv2D: Dilated rates should be larger than 0."})),o.hu(u.U3(n),(function(){return"Error in conv2D: Strides should be larger than 0."}));var y={x:v,filter:p},b={strides:n,pad:s,dataFormat:l,dilations:f,dimRoundingMode:h},x=r.BV.runKernel(a.mhS,y,b);return g?(0,c.X)(x,[x.shape[1],x.shape[2],x.shape[3]]):x}})},8744:function(e,t,n){"use strict";n.d(t,{p:function(){return c}});var r=n(318),a=n(2145),i=n(6147),o=n(9151),u=n(8640),s=n(5561);var c=(0,u.op)({conv2DBackpropFilter_:function(e,t,n,u,c){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",f=arguments.length>6?arguments[6]:void 0,h=e;3===e.rank&&(h=(0,s.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var d=t;3===d.rank&&(d=(0,s.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]])),i.hu(4===h.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(h.shape,".")})),i.hu(4===d.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(d.shape,".")})),i.hu(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")}));var p="NHWC"===l?h.shape[3]:h.shape[1],v="NHWC"===l?d.shape[3]:d.shape[1];i.hu(p===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(p,") must ")+"match input depth in filter (".concat(n[2],".")})),i.hu(v===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(v,") must ")+"match output depth for filter (".concat(n[3],").")})),o.m("conv2dDerFilter",c,f);var g={x:h,dy:d},m={strides:u,pad:c,dataFormat:l,dimRoundingMode:f,filterShape:n};return r.BV.runKernel(a.wUP,g,m)}})},1045:function(e,t,n){"use strict";n.d(t,{_:function(){return c}});var r=n(318),a=n(2145),i=n(6147),o=n(9151),u=n(8640),s=n(5561);var c=(0,u.op)({conv2DBackpropInput_:function(e,t,n,u,c){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",f=arguments.length>6?arguments[6]:void 0;i.hu(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var h=e,d=t,p=!1;3===t.rank&&(p=!0,d=(0,s.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]]),h=[1,e[0],e[1],e[2]]),i.hu(4===h.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(h.length,".")})),i.hu(4===d.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(d.rank)})),i.hu(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)}));var v="NHWC"===l?h[3]:h[1],g="NHWC"===l?d.shape[3]:d.shape[1];i.hu(v===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(v,") must ")+"match input depth for filter ".concat(n.shape[2],".")})),i.hu(g===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(g,") must ")+"match output depth for filter ".concat(n.shape[3],".")})),o.m("conv2dDerInput",c,f);var m={dy:d,filter:n},y={strides:u,pad:c,dataFormat:l,dimRoundingMode:f,inputShape:h},b=r.BV.runKernel(a.wm,m,y);return p?(0,s.X)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}})},1732:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});var r=n(8354),a=n(1045);var i=(0,n(8640).op)({conv2dTranspose_:function(e,t,n,i,o,u){var s=(0,r._1)(e,"x","conv2dTranspose"),c=(0,r._1)(t,"filter","conv2dTranspose");return(0,a._)(n,s,c,i,o,"NHWC",u)}})},1873:function(e,t,n){"use strict";n.d(t,{_:function(){return s}});var r=n(318),a=n(2145),i=n(6147),o=n(8640),u=n(5561);var s=(0,o.op)({conv3DBackpropInput_:function(e,t,n,o,s){i.hu(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var c=e,l=t,f=!1;4===t.rank&&(f=!0,l=(0,u.X)(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),c=[1,e[0],e[1],e[2],e[3]]);var h=c[4],d=l.shape[4];i.hu(5===c.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(c.length,".")})),i.hu(5===l.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(l.rank)})),i.hu(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)})),i.hu(h===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(h,") must ")+"match input depth for filter ".concat(n.shape[3],".")})),i.hu(d===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(d,") must ")+"match output depth for filter ".concat(n.shape[4],".")}));var p={dy:l,filter:n},v={pad:s,strides:o,inputShape:c},g=r.BV.runKernel(a.ik2,p,v);return f?(0,u.X)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}})},9151:function(e,t,n){"use strict";n.d(t,{I0:function(){return y},Ix:function(){return c},Rf:function(){return o},U3:function(){return x},Xw:function(){return u},aO:function(){return f},jT:function(){return b},jw:function(){return l},m:function(){return k},pl:function(){return s},sl:function(){return w}});var r=n(678),a=n(1303),i=n(6147);function o(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5?arguments[5]:void 0,u=e[3],s=[].concat((0,a.Z)(t),[u]),l=w(i);return c(e,s,n,o,r,null,null,l)}function u(e,t,n,a,i,o){var u,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",l=h(t),f=(0,r.Z)(l,2),d=f[0],p=f[1];if("channelsLast"===s)u=[d,p,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));u=[d,p,e[1],e[1]]}return c(e,u,n,a,i,o,!1,s)}function s(e,t,n,a,i,o){var u,s,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",f=d(t),h=(0,r.Z)(f,3),p=h[0],v=h[1],g=h[2];if("NDHWC"===c)s="channelsLast",u=[p,v,g,e[4],e[4]];else{if("NCDHW"!==c)throw new Error("Unknown dataFormat ".concat(c));s="channelsFirst",u=[p,v,g,e[1],e[1]]}return l(e,u,n,a,i,!1,s,o)}function c(e,t,n,a,i,o){var u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",c=-1,l=-1,f=-1,d=-1;if("channelsLast"===s){var g=(0,r.Z)(e,4);c=g[0],l=g[1],f=g[2],d=g[3]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var m=(0,r.Z)(e,4);c=m[0],d=m[1],l=m[2],f=m[3]}var y,b=(0,r.Z)(t,4),x=b[0],w=b[1],k=b[3],_=h(n),S=(0,r.Z)(_,2),C=S[0],E=S[1],A=h(a),N=(0,r.Z)(A,2),T=N[0],M=N[1],D=p(x,T),F=p(w,M),I=v(i,l,f,C,E,D,F,o,s),O=I.padInfo,R=I.outHeight,Z=I.outWidth,B=u?k*d:k;return"channelsFirst"===s?y=[c,B,R,Z]:"channelsLast"===s&&(y=[c,R,Z,B]),{batchSize:c,dataFormat:s,inHeight:l,inWidth:f,inChannels:d,outHeight:R,outWidth:Z,outChannels:B,padInfo:O,strideHeight:C,strideWidth:E,filterHeight:x,filterWidth:w,effectiveFilterHeight:D,effectiveFilterWidth:F,dilationHeight:T,dilationWidth:M,inShape:e,outShape:y,filterShape:t}}function l(e,t,n,a,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,c=-1,l=-1,f=-1,h=-1,v=-1;if("channelsLast"===u){var m=(0,r.Z)(e,5);c=m[0],l=m[1],f=m[2],h=m[3],v=m[4]}else{if("channelsFirst"!==u)throw new Error("Unknown dataFormat ".concat(u));var y=(0,r.Z)(e,5);c=y[0],v=y[1],l=y[2],f=y[3],h=y[4]}var b,x=(0,r.Z)(t,5),w=x[0],k=x[1],_=x[2],S=x[4],C=d(n),E=(0,r.Z)(C,3),A=E[0],N=E[1],T=E[2],M=d(a),D=(0,r.Z)(M,3),F=D[0],I=D[1],O=D[2],R=p(w,F),Z=p(k,I),B=p(_,O),z=g(i,l,f,h,A,N,T,R,Z,B,s),L=z.padInfo,P=z.outDepth,j=z.outHeight,U=z.outWidth,W=o?S*v:S;return"channelsFirst"===u?b=[c,W,P,j,U]:"channelsLast"===u&&(b=[c,P,j,U,W]),{batchSize:c,dataFormat:u,inDepth:l,inHeight:f,inWidth:h,inChannels:v,outDepth:P,outHeight:j,outWidth:U,outChannels:W,padInfo:L,strideDepth:A,strideHeight:N,strideWidth:T,filterDepth:w,filterHeight:k,filterWidth:_,effectiveFilterDepth:R,effectiveFilterHeight:Z,effectiveFilterWidth:B,dilationDepth:F,dilationHeight:I,dilationWidth:O,inShape:e,outShape:b,filterShape:t}}function f(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=p(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function h(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function d(e){return"number"===typeof e?[e,e,e]:e}function p(e,t){return t<=1?e:e+(e-1)*(t-1)}function v(e,t,n,r,a,i,o,u,s){var c,l,h;if("number"===typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var d=function(e,t,n,r,a){null==r&&(r=f(e,t,n));var i=e[0],o=e[1];return[m((i-t+2*r)/n+1,a),m((o-t+2*r)/n+1,a)]}([t,n],i,r,e,u);l=d[0],h=d[1]}else if("same"===e){l=Math.ceil(t/r),h=Math.ceil(n/a);var p=Math.max(0,(l-1)*r+i-t),v=Math.max(0,(h-1)*a+o-n),g=Math.floor(p/2),y=p-g,b=Math.floor(v/2);c={top:g,bottom:y,left:b,right:v-b,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-i+1)/r),h=Math.ceil((n-o+1)/a);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));var x="channelsLast"===s?e[1][0]:e[2][0],w="channelsLast"===s?e[1][1]:e[2][1],k="channelsLast"===s?e[2][0]:e[3][0],_="channelsLast"===s?e[2][1]:e[3][1];c={top:x,bottom:w,left:k,right:_,type:0===x&&0===w&&0===k&&0===_?"VALID":"EXPLICIT"},l=m((t-i+x+w)/r+1,u),h=m((n-o+k+_)/a+1,u)}return{padInfo:c,outHeight:l,outWidth:h}}function g(e,t,n,r,a,i,o,u,s,c,l){var h,d,p,v;if("valid"===e&&(e=0),"number"===typeof e){h={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var g=function(e,t,n,r,a,i){null==a&&(a=f(e,t[0],r[0]));for(var o=[0,0,0,n],u=0;u<3;u++)e[u]+2*a>=t[u]&&(o[u]=m((e[u]-t[u]+2*a)/r[u]+1,i));return o}([t,n,r,1],[u,s,c],1,[a,i,o],e,l);d=g[0],p=g[1],v=g[2]}else{if("same"!==e)throw Error("Unknown padding parameter: ".concat(e));var y=((d=Math.ceil(t/a))-1)*a+u-t,b=((p=Math.ceil(n/i))-1)*i+s-n,x=((v=Math.ceil(r/o))-1)*o+c-r,w=Math.floor(y/2),k=y-w,_=Math.floor(b/2),S=b-_,C=Math.floor(x/2);h={top:_,bottom:S,left:C,right:x-C,front:w,back:k,type:"SAME"}}return{padInfo:h,outDepth:d,outHeight:p,outWidth:v}}function m(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function y(e){var t=h(e),n=(0,r.Z)(t,3),a=n[0],i=n[1],o=n[2];return 1===a&&1===i&&1===o}function b(e,t){return y(e)||y(t)}function x(e){return h(e).every((function(e){return e>0}))}function w(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function k(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)i.hu(i.GN(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach((function(t){t.forEach((function(t){i.hu(i.GN(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}))}))}))}}}},1227:function(e,t,n){"use strict";n.d(t,{m:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({cos_:function(e){var t={x:(0,i._1)(e,"x","cos","float32")};return r.BV.runKernel(a.mc4,t)}})},6679:function(e,t,n){"use strict";n.d(t,{f:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({cosh_:function(e){var t={x:(0,i._1)(e,"x","cosh","float32")};return r.BV.runKernel(a.TR1,t)}})},9457:function(e,t,n){"use strict";n.d(t,{$:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({cumprod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=(0,i._1)(e,"x","cumprod"),s={x:u},c={axis:t,exclusive:n,reverse:o};return r.BV.runKernel(a.Byc,s,c)}})},8862:function(e,t,n){"use strict";n.d(t,{z:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=(0,i._1)(e,"x","cumsum"),s={x:u},c={axis:t,exclusive:n,reverse:o};return r.BV.runKernel(a.iHb,s,c)}})},1878:function(e,t,n){"use strict";n.d(t,{n:function(){return u}});var r=n(318),a=n(2145),i=n(8354),o=n(6147);var u=(0,n(8640).op)({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",u=(0,i._1)(e,"x","depthToSpace","float32"),s="NHWC"===n?u.shape[1]:u.shape[2],c="NHWC"===n?u.shape[2]:u.shape[3],l="NHWC"===n?u.shape[3]:u.shape[1];o.hu(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(t)})),o.hu(s*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(s," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(u.shape)})),o.hu(c*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(c," and ").concat(t," for depthToSpace with input shape\n        ").concat(u.shape)})),o.hu(l%(t*t)===0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(l," for depthToSpace with input shape ").concat(u.shape)}));var f={x:u},h={blockSize:t,dataFormat:n};return r.BV.runKernel(a.T0n,f,h)}})},1147:function(e,t,n){"use strict";n.d(t,{B:function(){return l}});var r=n(318),a=n(2145),i=n(8354),o=n(6147),u=n(9151),s=n(8640),c=n(5561);var l=(0,s.op)({depthwiseConv2d_:function(e,t,n,s){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],h=arguments.length>6?arguments[6]:void 0,d=(0,i._1)(e,"x","depthwiseConv2d","float32"),p=(0,i._1)(t,"filter","depthwiseConv2d","float32"),v=d,g=!1;3===d.rank&&(g=!0,v=(0,c.X)(d,[1,d.shape[0],d.shape[1],d.shape[2]])),o.hu(4===v.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(v.rank,".")})),o.hu(4===p.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(p.rank,".")}));var m="NHWC"===l?v.shape[3]:v.shape[1];o.hu(m===p.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(m,") must match the inChannels dimension in ")+"filter ".concat(p.shape[2],".")})),u.m("depthwiseConv2d",s,h);var y={x:v,filter:p},b={strides:n,pad:s,dataFormat:l,dilations:f,dimRoundingMode:h},x=r.BV.runKernel(a.cie,y,b);return g?(0,c.X)(x,[x.shape[1],x.shape[2],x.shape[3]]):x}})},288:function(e,t,n){"use strict";n.d(t,{z:function(){return u}});var r=n(318),a=n(2145),i=n(8640),o=n(5561);var u=(0,i.op)({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,i,u){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],c=arguments.length>6?arguments[6]:void 0,l=e;3===e.rank&&(l=(0,o.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var f=t;3===f.rank&&(f=(0,o.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var h={x:l,dy:f},d={strides:i,pad:u,dimRoundingMode:c,dilations:s,filterShape:n};return r.BV.runKernel(a.sL$,h,d)}})},6939:function(e,t,n){"use strict";n.d(t,{v:function(){return u}});var r=n(318),a=n(2145),i=n(8640),o=n(5561);var u=(0,i.op)({depthwiseConv2dNativeBackpropInput_:function(e,t,n,i,u){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],c=arguments.length>6?arguments[6]:void 0,l=t,f=!1;3===t.rank&&(f=!0,l=(0,o.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var h={dy:l,filter:n},d={strides:i,pad:u,dimRoundingMode:c,dilations:s,inputShape:e},p=r.BV.runKernel(a.y7R,h,d);return f?(0,o.X)(p,[p.shape[1],p.shape[2],p.shape[3]]):p}})},7580:function(e,t,n){"use strict";n.d(t,{W:function(){return c}});var r=n(318),a=n(2145),i=n(8354),o=n(6147),u=n(8640),s=n(5561);var c=(0,u.op)({dilation2d_:function(e,t,n,u){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",f=(0,i._1)(e,"x","dilation2d"),h=(0,i._1)(t,"filter","dilation2d");o.hu(3===f.rank||4===f.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(f.rank,".")})),o.hu(3===h.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(h.rank,".")})),o.hu("NHWC"===l,(function(){return"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(l)}));var d=f,p=!1;3===f.rank&&(d=(0,s.X)(f,[1,f.shape[0],f.shape[1],f.shape[2]]),p=!0),o.hu(d.shape[3]===h.shape[2],(function(){return"Error in dilation2d:  input and filter must have the same depth: ".concat(d.shape[3]," vs ").concat(h.shape[2])}));var v={x:d,filter:h},g={strides:n,pad:u,dilations:c},m=r.BV.runKernel(a.p4S,v,g);return p?(0,s.X)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}})},5750:function(e,t,n){"use strict";n.d(t,{h:function(){return c}});var r=n(678),a=n(318),i=n(2145),o=n(9064),u=n(8354),s=n(7145);var c=(0,n(8640).op)({div_:function(e,t){var n=(0,u._1)(e,"a","div"),c=(0,u._1)(t,"b","div"),l=(0,o.makeTypesMatch)(n,c),f=(0,r.Z)(l,2);if(n=f[0],c=f[1],"int32"===n.dtype&&"int32"===c.dtype)return(0,s.q)(n,c);var h={a:n,b:c};return a.BV.runKernel(i.oHH,h,{})}})},5923:function(e,t,n){"use strict";n.d(t,{N:function(){return f}});var r=n(678),a=n(9064),i=n(8354),o=n(5750),u=n(3254),s=n(8640),c=n(329),l=n(7293);var f=(0,s.op)({divNoNan_:function(e,t){var n=(0,i._1)(e,"a","div"),s=(0,i._1)(t,"b","div"),f=(0,a.makeTypesMatch)(n,s),h=(0,r.Z)(f,2);n=h[0],s=h[1];var d=(0,o.h)(n,s),p=(0,l.P)(d),v=(0,u.D)(s,p);return(0,c.a)(v,p,d)}})},5043:function(e,t,n){"use strict";n.d(t,{A:function(){return s}});var r=n(8354),a=n(6147),i=n(7221),o=n(8640),u=n(5561);var s=(0,o.op)({dot_:function(e,t){var n=(0,r._1)(e,"t1","dot"),o=(0,r._1)(t,"t2","dot");a.hu((1===n.rank||2===n.rank)&&(1===o.rank||2===o.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(o.rank,".")}));var s=1===n.rank?n.size:n.shape[1],c=1===o.rank?o.size:o.shape[0];if(a.hu(s===c,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+"".concat(s," and ").concat(c,".")})),1===n.rank&&1===o.rank){var l=(0,u.X)(n,[1,-1]),f=(0,u.X)(o,[-1,1]),h=(0,i.O)(l,f);return(0,u.X)(h,[])}if(1===n.rank&&2===o.rank){var d=(0,u.X)(n,[1,-1]),p=(0,u.X)(o,[o.shape[0],o.shape[1]]),v=(0,i.O)(d,p);return(0,u.X)(v,[v.size])}if(2===n.rank&&1===o.rank){var g=(0,u.X)(o,[-1,1]),m=(0,i.O)(n,g);return(0,u.X)(m,[m.size])}var y=(0,u.X)(o,[o.shape[0],o.shape[1]]);return(0,i.O)(n,y)}})},2353:function(e,t,n){"use strict";n.d(t,{p:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({elu_:function(e){var t={x:(0,i._1)(e,"x","elu","float32")};return r.BV.runKernel(a.SX0,t)}})},3254:function(e,t,n){"use strict";n.d(t,{D:function(){return c}});var r=n(678),a=n(318),i=n(2145),o=n(9064),u=n(8354),s=n(5774);var c=(0,n(8640).op)({equal_:function(e,t){var n=(0,u._1)(e,"a","equal","string_or_numeric"),c=(0,u._1)(t,"b","equal","string_or_numeric"),l=(0,o.makeTypesMatch)(n,c),f=(0,r.Z)(l,2);n=f[0],c=f[1],(0,s.assertAndGetBroadcastShape)(n.shape,c.shape);var h={a:n,b:c};return a.BV.runKernel(i.hdR,h)}})},3891:function(e,t,n){"use strict";n.d(t,{q:function(){return s}});var r=n(318),a=n(2145),i=n(8354),o=n(6147),u=n(9118);var s=(0,n(8640).op)({erf_:function(e){var t=(0,i._1)(e,"x","erf");o.hu("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=(0,u.p)(t,"float32"));var n={x:t};return r.BV.runKernel(a.Omj,n)}})},3313:function(e,t,n){"use strict";n.d(t,{d:function(){return a}});var r=n(6662);var a=(0,n(8640).op)({euclideanNorm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,r.K)(e,"euclidean",t,n)}})},411:function(e,t,n){"use strict";n.d(t,{Q:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({exp_:function(e){var t={x:(0,i._1)(e,"x","exp")};return r.BV.runKernel(a.NEP,t)}})},2975:function(e,t,n){"use strict";n.d(t,{d:function(){return u}});var r=n(318),a=n(2145),i=n(8354),o=n(6147);var u=(0,n(8640).op)({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,i._1)(e,"x","expandDims","string_or_numeric");o.hu(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var u={input:n},s={dim:t};return r.BV.runKernel(a.YFo,u,s)}})},5682:function(e,t,n){"use strict";n.d(t,{t:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({expm1_:function(e){var t={x:(0,i._1)(e,"x","expm1")};return r.BV.runKernel(a.Y0y,t)}})},8582:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var r=n(318),a=n(2145),i=n(6147);function o(e,t,n){(0,i.Mu)(e);var o={shape:e,value:t,dtype:n=n||(0,i.D2)(t)};return r.BV.runKernel(a.deh,{},o)}},2628:function(e,t,n){"use strict";n.d(t,{G:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({floor_:function(e){var t={x:(0,i._1)(e,"x","floor","float32")};return r.BV.runKernel(a.OR,t)}})},7145:function(e,t,n){"use strict";n.d(t,{q:function(){return s}});var r=n(678),a=n(318),i=n(2145),o=n(9064),u=n(8354);var s=(0,n(8640).op)({floorDiv_:function(e,t){var n=(0,u._1)(e,"a","floorDiv"),s=(0,u._1)(t,"b","floorDiv"),c=(0,o.makeTypesMatch)(n,s),l=(0,r.Z)(c,2),f={a:n=l[0],b:s=l[1]};return a.BV.runKernel(i.jeX,f)}})},5171:function(e,t,n){"use strict";n.d(t,{Fr:function(){return p},QH:function(){return g},pf:function(){return v},uy:function(){return m}});var r=n(5774),a=n(2353),i=n(4419),o=n(651),u=n(6859),s=n(7539),c=n(5900),l=n(5561),f=n(7643),h=n(4031),d=n(227);function p(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return(0,o.d)(e,(0,h.N)(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function v(e,t){var n=t,a=r.getReductionAxes(e.shape,t.shape);return a.length>0&&(n=(0,d.S)(n,a)),(0,l.X)(n,e.shape)}function g(e,t,n,r){if("linear"===t)return e;if("relu"===t)return(0,s.U)(e);if("elu"===t)return(0,a.p)(e);if("relu6"===t)return(0,c.b)(e);if("prelu"===t)return(0,u.A)(e,n);if("leakyrelu"===t)return(0,i.h)(e,r);if("sigmoid"===t)return(0,f.X)(e);throw new Error("Unknown fused activation ".concat(t,"."))}var m=function(e,t){return!(e>0)||"linear"===t}},9498:function(e,t,n){"use strict";n.d(t,{I:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=(0,i._1)(e,"x","gather"),s=(0,i._1)(t,"indices","gather","int32"),c={x:u,indices:s},l={axis:n,batchDims:o};return r.BV.runKernel(a.qi_,c,l)}})},5014:function(e,t,n){"use strict";n.d(t,{p:function(){return c}});var r=n(678),a=n(318),i=n(2145),o=n(9064),u=n(8354),s=n(5774);var c=(0,n(8640).op)({greater_:function(e,t){var n=(0,u._1)(e,"a","greater","string_or_numeric"),c=(0,u._1)(t,"b","greater","string_or_numeric"),l=(0,o.makeTypesMatch)(n,c),f=(0,r.Z)(l,2);n=f[0],c=f[1],(0,s.assertAndGetBroadcastShape)(n.shape,c.shape);var h={a:n,b:c};return a.BV.runKernel(i.iZT,h)}})},8327:function(e,t,n){"use strict";n.d(t,{b:function(){return c}});var r=n(678),a=n(318),i=n(2145),o=n(9064),u=n(8354),s=n(5774);var c=(0,n(8640).op)({greaterEqual_:function(e,t){var n=(0,u._1)(e,"a","greaterEqual","string_or_numeric"),c=(0,u._1)(t,"b","greaterEqual","string_or_numeric"),l=(0,o.makeTypesMatch)(n,c),f=(0,r.Z)(l,2);n=f[0],c=f[1],(0,s.assertAndGetBroadcastShape)(n.shape,c.shape);var h={a:n,b:c};return a.BV.runKernel(i.Acj,h)}})},6996:function(e,t,n){"use strict";n.d(t,{a:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({imag_:function(e){var t={input:(0,i._1)(e,"input","imag")};return r.BV.runKernel(a.J_u,t)}})},464:function(e,t,n){"use strict";n.d(t,{I:function(){return l}});var r=n(4528),a=n(318),i=n(2145),o=n(8354),u=n(6147),s=n(8640),c=n(5561);var l=(0,s.op)({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=(0,o._1)(e,"images","resizeBilinear");u.hu(3===l.rank||4===l.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(l.rank,".")})),u.hu(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")})),u.hu(!1===s||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var f=l,h=!1;3===l.rank&&(h=!0,f=(0,c.X)(l,[1,l.shape[0],l.shape[1],l.shape[2]])),(0,r.Z)(t);var d={images:f},p={alignCorners:n,halfPixelCenters:s,size:t},v=a.BV.runKernel(i._Yw,d,p);return h?(0,c.X)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}})},8600:function(e,t,n){"use strict";n.d(t,{j:function(){return l}});var r=n(4528),a=n(318),i=n(2145),o=n(8354),u=n(6147),s=n(8640),c=n(5561);var l=(0,s.op)({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=(0,o._1)(e,"images","resizeNearestNeighbor");u.hu(3===l.rank||4===l.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(l.rank,".")})),u.hu(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")})),u.hu("float32"===l.dtype||"int32"===l.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),u.hu(!1===s||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var f=l,h=!1;3===l.rank&&(h=!0,f=(0,c.X)(l,[1,l.shape[0],l.shape[1],l.shape[2]])),(0,r.Z)(t);var d={images:f},p={alignCorners:n,halfPixelCenters:s,size:t},v=a.BV.runKernel(i.dpD,d,p);return h?(0,c.X)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}})},300:function(e,t,n){"use strict";n.d(t,{x:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({isFinite_:function(e){var t={x:(0,i._1)(e,"x","isFinite")};return r.BV.runKernel(a.avt,t)}})},4652:function(e,t,n){"use strict";n.d(t,{U:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({isInf_:function(e){var t={x:(0,i._1)(e,"x","isInf")};return r.BV.runKernel(a.iWB,t)}})},7005:function(e,t,n){"use strict";n.d(t,{i:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({isNaN_:function(e){var t={x:(0,i._1)(e,"x","isNaN")};return r.BV.runKernel(a.r7n,t)}})},4419:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=(0,i._1)(e,"x","leakyRelu"),o={x:n},u={alpha:t};return r.BV.runKernel(a.J$2,o,u)}})},4920:function(e,t,n){"use strict";n.d(t,{d:function(){return c}});var r=n(678),a=n(318),i=n(2145),o=n(9064),u=n(8354),s=n(5774);var c=(0,n(8640).op)({less_:function(e,t){var n=(0,u._1)(e,"a","less","string_or_numeric"),c=(0,u._1)(t,"b","less","string_or_numeric"),l=(0,o.makeTypesMatch)(n,c),f=(0,r.Z)(l,2);n=f[0],c=f[1],(0,s.assertAndGetBroadcastShape)(n.shape,c.shape);var h={a:n,b:c};return a.BV.runKernel(i.vtC,h)}})},2642:function(e,t,n){"use strict";n.d(t,{z:function(){return c}});var r=n(678),a=n(318),i=n(2145),o=n(9064),u=n(8354),s=n(5774);var c=(0,n(8640).op)({lessEqual_:function(e,t){var n=(0,u._1)(e,"a","lessEqual","string_or_numeric"),c=(0,u._1)(t,"b","lessEqual","string_or_numeric"),l=(0,o.makeTypesMatch)(n,c),f=(0,r.Z)(l,2);n=f[0],c=f[1],(0,s.assertAndGetBroadcastShape)(n.shape,c.shape);var h={a:n,b:c};return a.BV.runKernel(i.CAk,h)}})},936:function(e,t,n){"use strict";n.d(t,{G:function(){return c}});var r=n(318),a=n(2145),i=n(8354),o=n(6147),u=n(8640),s=n(5561);var c=(0,u.op)({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,l=(0,i._1)(e,"x","localResponseNormalization");o.hu(4===l.rank||3===l.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(l.rank,".")})),o.hu(o.GN(t),(function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")}));var f=l,h=!1;3===l.rank&&(h=!0,f=(0,s.X)(l,[1,l.shape[0],l.shape[1],l.shape[2]]));var d={x:f},p={depthRadius:t,bias:n,alpha:u,beta:c},v=r.BV.runKernel(a.eZ0,d,p);return h?(0,s.X)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}})},378:function(e,t,n){"use strict";n.d(t,{c:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({log_:function(e){var t={x:(0,i._1)(e,"x","log","float32")};return r.BV.runKernel(a.ZbH,t)}})},5341:function(e,t,n){"use strict";n.d(t,{K:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({log1p_:function(e){var t={x:(0,i._1)(e,"x","log1p")};return r.BV.runKernel(a.kU,t)}})},5113:function(e,t,n){"use strict";n.d(t,{e:function(){return l}});var r=n(6450),a=n(8354),i=n(651),o=n(4362),u=n(8640),s=n(7643),c=n(4626);var l=(0,u.op)({logSigmoid_:function(e){var t=(0,a._1)(e,"x","logSigmoid"),n=(0,r.cb)((function(e){return{value:(0,o.W)((0,c.W)((0,o.W)(e))),gradFunc:function(t){return(0,i.d)(t,(0,s.X)((0,o.W)(e)))}}}));return n(t)}})},4561:function(e,t,n){"use strict";n.d(t,{C:function(){return p}});var r=n(678),a=n(6450),i=n(8354),o=n(9118),u=n(411),s=n(378),c=n(6176),l=n(651),f=n(8640),h=n(4774),d=n(227);var p=(0,f.op)({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=(0,i._1)(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));var f=(0,a.cb)((function(e,n){var a=(0,c.F)(e,t,!0),i=(0,h.l)(e,a),f=(0,h.l)((0,o.p)(i,"float32"),(0,s.c)((0,d.S)((0,u.Q)(i),t,!0)));n([f]);return{value:f,gradFunc:function(e,n){var a=(0,r.Z)(n,1)[0],i=(0,u.Q)(a);return(0,h.l)(e,(0,l.d)((0,d.S)(e,t,!0),i))}}}));return f(n)}})},5530:function(e,t,n){"use strict";n.d(t,{l:function(){return p}});var r=n(8354),a=n(6147),i=n(3312),o=n(8473),u=n(411),s=n(378),c=n(6176),l=n(8640),f=n(5561),h=n(4774),d=n(227);var p=(0,l.op)({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=(0,r._1)(e,"x","logSumExp"),p=(0,a.EC)(t,l.shape),v=(0,c.F)(l,p,!0),g=(0,h.l)(l,v),m=(0,u.Q)(g),y=(0,d.S)(m,p),b=(0,s.c)(y),x=(0,i.I)((0,f.X)(v,b.shape),b);if(n){var w=(0,o.rv)(x.shape,p);return(0,f.X)(x,w)}return x}})},2177:function(e,t,n){"use strict";n.d(t,{H:function(){return u}});var r=n(318),a=n(2145),i=n(8354),o=n(5774);var u=(0,n(8640).op)({logicalAnd_:function(e,t){var n=(0,i._1)(e,"a","logicalAnd","bool"),u=(0,i._1)(t,"b","logicalAnd","bool");(0,o.assertAndGetBroadcastShape)(n.shape,u.shape);var s={a:n,b:u};return r.BV.runKernel(a.PYm,s)}})},875:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({logicalNot_:function(e){var t={x:(0,i._1)(e,"x","logicalNot","bool")};return r.BV.runKernel(a.VfG,t)}})},5117:function(e,t,n){"use strict";n.d(t,{K:function(){return u}});var r=n(318),a=n(2145),i=n(8354),o=n(5774);var u=(0,n(8640).op)({logicalOr_:function(e,t){var n=(0,i._1)(e,"a","logicalOr","bool"),u=(0,i._1)(t,"b","logicalOr","bool");(0,o.assertAndGetBroadcastShape)(n.shape,u.shape);var s={a:n,b:u};return r.BV.runKernel(a.MZg,s)}})},1712:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var r=n(8354),a=n(5774),i=n(2177),o=n(875),u=n(5117);var s=(0,n(8640).op)({logicalXor_:function(e,t){var n=(0,r._1)(e,"a","logicalXor","bool"),s=(0,r._1)(t,"b","logicalXor","bool");return(0,a.assertAndGetBroadcastShape)(n.shape,s.shape),(0,i.H)((0,u.K)(e,t),(0,o.h)((0,i.H)(e,t)))}})},7627:function(e,t,n){"use strict";var r;n.d(t,{I:function(){return r}}),function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(r||(r={}))},7221:function(e,t,n){"use strict";n.d(t,{O:function(){return s}});var r=n(678),a=n(318),i=n(2145),o=n(9064),u=n(8354);var s=(0,n(8640).op)({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=(0,u._1)(e,"a","matMul"),l=(0,u._1)(t,"b","matMul"),f=(0,o.makeTypesMatch)(c,l),h=(0,r.Z)(f,2),d={a:c=h[0],b:l=h[1]},p={transposeA:n,transposeB:s};return a.BV.runKernel(i.XLW,d,p)}})},6176:function(e,t,n){"use strict";n.d(t,{F:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=(0,i._1)(e,"x","max"),u={x:o},s={reductionIndices:t,keepDims:n};return r.BV.runKernel(a.YoZ,u,s)}})},5777:function(e,t,n){"use strict";n.d(t,{_:function(){return l}});var r=n(318),a=n(2145),i=n(8354),o=n(6147),u=n(9151),s=n(8640),c=n(5561);var l=(0,s.op)({maxPool_:function(e,t,n,s,l){var f=(0,i._1)(e,"x","maxPool"),h=f,d=!1;3===f.rank&&(d=!0,h=(0,c.X)(f,[1,f.shape[0],f.shape[1],f.shape[2]])),o.hu(4===h.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(h.rank,".")})),o.hu(u.jT(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")})),u.m("maxPool",s,l);var p={x:h},v={filterSize:t,strides:n,pad:s,dimRoundingMode:l},g=r.BV.runKernel(a.mTV,p,v);return d?(0,c.X)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}})},705:function(e,t,n){"use strict";n.d(t,{g:function(){return l}});var r=n(678),a=n(318),i=n(2145),o=n(9064),u=n(8354),s=n(5774),c=n(9118);var l=(0,n(8640).op)({maximum_:function(e,t){var n=(0,u._1)(e,"a","maximum"),l=(0,u._1)(t,"b","maximum"),f=(0,o.makeTypesMatch)(n,l),h=(0,r.Z)(f,2);n=h[0],l=h[1],"bool"===n.dtype&&(n=(0,c.p)(n,"int32"),l=(0,c.p)(l,"int32")),(0,s.assertAndGetBroadcastShape)(n.shape,l.shape);var d={a:n,b:l};return a.BV.runKernel(i.BMI,d)}})},6568:function(e,t,n){"use strict";n.d(t,{J:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=(0,i._1)(e,"x","mean"),u={x:o},s={axis:t,keepDims:n};return r.BV.runKernel(a.q2K,u,s)}})},7891:function(e,t,n){"use strict";n.d(t,{V:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=(0,i._1)(e,"x","min"),u={x:o},s={axis:t,keepDims:n};return r.BV.runKernel(a.c17,u,s)}})},2273:function(e,t,n){"use strict";n.d(t,{L:function(){return l}});var r=n(678),a=n(318),i=n(2145),o=n(9064),u=n(8354),s=n(5774),c=n(9118);var l=(0,n(8640).op)({minimum_:function(e,t){var n=(0,u._1)(e,"a","minimum"),l=(0,u._1)(t,"b","minimum"),f=(0,o.makeTypesMatch)(n,l),h=(0,r.Z)(f,2);n=h[0],l=h[1],"bool"===n.dtype&&(n=(0,c.p)(n,"int32"),l=(0,c.p)(l,"int32")),(0,s.assertAndGetBroadcastShape)(n.shape,l.shape);var d={a:n,b:l};return a.BV.runKernel(i.q8u,d)}})},9719:function(e,t,n){"use strict";n.d(t,{V:function(){return u}});var r=n(318),a=n(2145),i=n(8354),o=n(6147);var u=(0,n(8640).op)({mirrorPad_:function(e,t,n){o.hu("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")}));var u=(0,i._1)(e,"x","mirrorPad");if(0===u.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");o.hu(t.length===u.rank,(function(){return"Padding doesn't match input. Must be ".concat(u.rank,". ")+"Got ".concat(t.length,".")}));for(var s="reflect"===n?1:0,c=function(e){o.hu(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),o.hu(t[e][0]>=0&&t[e][0]<=u.shape[e]-s&&t[e][1]>=0&&t[e][1]<=u.shape[e]-s,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal ")+"to ".concat(u.shape[e]-s," or less than 0 for input of ")+"shape ".concat(u.shape)}))},l=0;l<u.rank;l++)c(l);var f={paddings:t,mode:n},h={x:u};return r.BV.runKernel(a.jQs,h,f)}})},4645:function(e,t,n){"use strict";n.d(t,{w:function(){return s}});var r=n(678),a=n(318),i=n(2145),o=n(9064),u=n(8354);var s=(0,n(8640).op)({mod_:function(e,t){var n=(0,u._1)(e,"a","mod"),s=(0,u._1)(t,"b","mod"),c=(0,o.makeTypesMatch)(n,s),l=(0,r.Z)(c,2),f={a:n=l[0],b:s=l[1]};return a.BV.runKernel(i.Vbg,f)}})},651:function(e,t,n){"use strict";n.d(t,{d:function(){return s}});var r=n(678),a=n(318),i=n(2145),o=n(9064),u=n(8354);var s=(0,n(8640).op)({mul_:function(e,t){var n=(0,u._1)(e,"a","mul"),s=(0,u._1)(t,"b","mul"),c=(0,o.makeTypesMatch)(n,s),l=(0,r.Z)(c,2),f={a:n=l[0],b:s=l[1]};return a.BV.runKernel(i.wYn,f)}})},4362:function(e,t,n){"use strict";n.d(t,{W:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({neg_:function(e){var t={x:(0,i._1)(e,"x","neg")};return r.BV.runKernel(a.kuV,t)}})},6662:function(e,t,n){"use strict";n.d(t,{K:function(){return m}});var r=n(8354),a=n(6147),i=n(7613),o=n(8473),u=n(6176),s=n(7891),c=n(8640),l=n(4334),f=n(5561),h=n(7067),d=n(6902),p=n(7391),v=n(227);function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return(0,i.W)(e);if(1!==e.rank&&null===n)return g((0,f.X)(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return(0,v.S)((0,i.W)(e),n);if(t===1/0)return(0,u.F)((0,i.W)(e),n);if(t===-1/0)return(0,s.V)((0,i.W)(e),n);if("euclidean"===t||2===t)return(0,d._)((0,v.S)((0,l.s)((0,i.W)(e),(0,h.i)(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return(0,u.F)((0,v.S)((0,i.W)(e),n[0]),n[1]-1);if(t===1/0)return(0,u.F)((0,v.S)((0,i.W)(e),n[1]),n[0]);if(t===-1/0)return(0,s.V)((0,v.S)((0,i.W)(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return(0,d._)((0,v.S)((0,p.h)(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var m=(0,c.op)({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=g(e=(0,r._1)(e,"x","norm"),t,n),s=u.shape;if(i){var c=(0,a.EC)(n,e.shape);s=o.rv(u.shape,c)}return(0,f.X)(u,s)}})},5549:function(e,t,n){"use strict";n.d(t,{Q:function(){return c}});var r=n(678),a=n(318),i=n(2145),o=n(9064),u=n(8354),s=n(5774);var c=(0,n(8640).op)({notEqual_:function(e,t){var n=(0,u._1)(e,"a","notEqual","string_or_numeric"),c=(0,u._1)(t,"b","notEqual","string_or_numeric"),l=(0,o.makeTypesMatch)(n,c),f=(0,r.Z)(l,2);n=f[0],c=f[1],(0,s.assertAndGetBroadcastShape)(n.shape,c.shape);var h={a:n,b:c};return a.BV.runKernel(i.yQU,h)}})},4326:function(e,t,n){"use strict";n.d(t,{l:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"int32";if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var s=(0,i._1)(e,"indices","oneHot","int32"),c={indices:s},l={dtype:u,depth:t,onValue:n,offValue:o};return r.BV.runKernel(a.we_,c,l)}})},6100:function(e,t,n){"use strict";n.d(t,{i:function(){return u}});var r=n(318),a=n(6147),i=n(9253),o=n(7742);function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if((0,a.Mu)(e),"complex64"===t){var n=u(e,"float32"),s=(0,o.l)(e,"float32");return(0,i.P)(n,s)}var c=(0,a.p8)((0,a.NA)(e),t);return r.BV.makeTensor(c,e,t)}},773:function(e,t,n){"use strict";n.d(t,{J:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({onesLike_:function(e){var t={x:(0,i._1)(e,"x","onesLike")};return r.BV.runKernel(a.qWM,t)}})},8640:function(e,t,n){"use strict";n.d(t,{op:function(){return o},z:function(){return i}});var r=n(318),a=n(6147),i="__op";function o(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],o=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=i;var u=function(){r.BV.startScope(n);try{var e=o.apply(void 0,arguments);return(0,a.tI)(e)&&console.error("Cannot return a Promise inside of tidy."),r.BV.endScope(e),e}catch(t){throw r.BV.endScope(null),t}};return Object.defineProperty(u,"name",{value:n,configurable:!0}),u}},9503:function(e,t,n){"use strict";n.d(t,{zvA:function(){return h.z},WnP:function(){return a.W},Khb:function(){return i.K},__u:function(){return o._},IHx:function(){return u.I},QBD:function(){return d},$6P:function(){return p.$},YjB:function(){return v.Y},NqF:function(){return g.N},vHJ:function(){return m.v},ZRM:function(){return y.Z},VfV:function(){return b.V},z4N:function(){return x.z},fvJ:function(){return w.f},C80:function(){return k.C},wS1:function(){return _.w},uR5:function(){return A},zEQ:function(){return O},tgs:function(){return Z.t},Dxk:function(){return B},JY5:function(){return z},p3b:function(){return L},E4h:function(){return R.E},yE8:function(){return P},ycw:function(){return j},anm:function(){return lr},XsQ:function(){return U},UFq:function(){return W.U},f3b:function(){return V.f},pju:function(){return S.p},mDi:function(){return q.m},iUl:function(){return H.i},d9v:function(){return G.d},PYB:function(){return X.P},zoF:function(){return N.z},gME:function(){return Y},Izb:function(){return K},MNy:function(){return $},ZaL:function(){return Q},PAt:function(){return J.P},Tek:function(){return ee.T},bc:function(){return te.b},pdZ:function(){return ne},$QV:function(){return ae},mCk:function(){return ie.m},f9Y:function(){return oe.f},mew:function(){return wr},$Gn:function(){return ue.$},zbp:function(){return se.z},ppE:function(){return ce},nTT:function(){return le.n},B10:function(){return fe.B},Ka3:function(){return he},WmZ:function(){return de.W},hiC:function(){return pe.h},NTj:function(){return ve.N},AKD:function(){return ge.A},rvX:function(){return br},WYO:function(){return me},pyx:function(){return ye.p},GRh:function(){return xr},EDe:function(){return be},DgJ:function(){return xe.D},qNN:function(){return we.q},d2q:function(){return ke.d},Qqt:function(){return _e.Q},dt4:function(){return Se.d},t$B:function(){return Ce.t},iyy:function(){return Ae},kp_:function(){return An.k},hlL:function(){return Ne.h},GWj:function(){return Te.G},qPi:function(){return Me.q},imm:function(){return r},Iqj:function(){return De.I},dbB:function(){return yr},pjt:function(){return Fe.p},brS:function(){return Ie.b},Sxn:function(){return Nn.S},asL:function(){return Oe.a},BHj:function(){return Ia},V3u:function(){return _r},wx0:function(){return Tn.w},xVT:function(){return Re.x},UWc:function(){return Ze.U},i2d:function(){return Be.i},hi7:function(){return ze.h},d9m:function(){return Le.d},zN1:function(){return Pe.z},$r2:function(){return Oa},SX3:function(){return je},G9k:function(){return Ue.G},cM7:function(){return We.c},Krr:function(){return Ve.K},e_t:function(){return qe.e},CmS:function(){return He.C},l_t:function(){return Ge.l},HvI:function(){return Xe.H},hJK:function(){return Ye.h},K5V:function(){return Ke.K},egP:function(){return $e.e},MB5:function(){return Ra},eab:function(){return et},OI3:function(){return T.O},Fp7:function(){return tt.F},_sB:function(){return nt._},YQQ:function(){return rt},Ip$:function(){return at},gWQ:function(){return it.g},J69:function(){return ot.J},ry_:function(){return ct},VV$:function(){return lt.V},LTh:function(){return ft.L},VdP:function(){return ht.V},wQq:function(){return dt.w},Gi7:function(){return mt},p_:function(){return pr},dC7:function(){return M.d},rq4:function(){return yt},SJ_:function(){return bt},W76:function(){return xt.W},KOy:function(){return hr.K},Quu:function(){return wt.Q},lfX:function(){return kt.l},iUs:function(){return ut.i},JpU:function(){return _t.J},op:function(){return h.op},N2O:function(){return St},vku:function(){return Ct.v},pNR:function(){return Et},koy:function(){return At},t1L:function(){return Nt},lGY:function(){return Tt},d_R:function(){return Mt.d},sQ3:function(){return Dt.s},AL3:function(){return Ft.A},S0v:function(){return It.S},WVs:function(){return Ot.W},$gW:function(){return Rt},VT$:function(){return Zt},N89:function(){return Bt},TN_:function(){return zt},wzB:function(){return qt},nGf:function(){return Ht},ruB:function(){return Gt},LGj:function(){return Xt},pe5:function(){return Yt},w6H:function(){return Kt},kwC:function(){return $t.k},M25:function(){return Qt.M},UYe:function(){return Jt.U},btT:function(){return en.b},XLQ:function(){return E.X},GYS:function(){return tn.G},SDf:function(){return nn},diP:function(){return rn},sx7:function(){return an},mG2:function(){return on},QEs:function(){return Mn.Q},NMM:function(){return un.N},bp0:function(){return sn.b},iD$:function(){return cn.i},snQ:function(){return vr},zcT:function(){return Je},U8D:function(){return ln.U},U_I:function(){return fn.U},ODp:function(){return gn},XD2:function(){return D.X},Xxe:function(){return mn.X},tdS:function(){return Fa},O$l:function(){return yn.O},R_K:function(){return bn.R},tPi:function(){return F.t},jZU:function(){return xn},SmN:function(){return wn},CnO:function(){return kn},p0P:function(){return _n},XAC:function(){return Sn.X},Wvh:function(){return Cn.W},fBT:function(){return En.f},rVs:function(){return Za},ers:function(){return mr},uN7:function(){return Da},Vl2:function(){return Dn.V},_b3:function(){return Fn._},h62:function(){return vt.h},$i:function(){return In.$},L9e:function(){return On.L},knu:function(){return Rn.k},Nbs:function(){return Zn.N},NXj:function(){return Bn.N},Z_8:function(){return Ba},luU:function(){return gt.l},Smz:function(){return zn.S},ORZ:function(){return Ln.O},AEp:function(){return I.A},XeE:function(){return Pn.X},RRF:function(){return Un},odF:function(){return Wn},wOQ:function(){return Vn.w},yXz:function(){return qn},Bfx:function(){return Hn},xZs:function(){return Gn},Pg0:function(){return Yn},Gg6:function(){return Ee.G},hg7:function(){return Kn.h},p4s:function(){return fr.p},Xu6:function(){return $n},Two:function(){return Qn.T},pUJ:function(){return Jn.p},HHK:function(){return er.H},GaM:function(){return tr},VD$:function(){return nr},arb:function(){return rr.a},itS:function(){return or},lls:function(){return ur.l},P84:function(){return sr.P}});var r={};n.r(r),n.d(r,{conv2d:function(){return Mr},depthwiseConv2d:function(){return Ir},matMul:function(){return Or}});var a=n(7613),i=n(1719),o=n(4502),u=n(3312),s=n(318),c=n(2145),l=n(8354),f=n(6147),h=n(8640);var d=(0,h.op)({addN_:function(e){f.hu(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),f.hu(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+"".concat(e.length)}));var t=e.map((function(e,t){return(0,l._1)(e,"tensors".concat(t),"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!f.cO(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return s.BV.runKernel(c.Xze,r)}}),p=n(4108),v=n(8543),g=n(9995),m=n(5157),y=n(3053),b=n(54),x=n(4778),w=n(2227),k=n(7897),_=n(9204),S=n(9118),C=n(9151),E=n(5561);var A=(0,h.op)({avgPool3d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=(0,l._1)(e,"x","avgPool3d","float32"),u=o,h=!1;4===o.rank&&(h=!0,u=(0,E.X)(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),f.hu(5===u.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(u.rank,".")})),f.hu("NDHWC"===i,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),f.hu("number"===typeof n&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,(function(){return"Error in avgPool3d: Stride must be > 0, but got '".concat(n,"'")})),(0,C.m)("avgPool3d",r,a);var d={x:u},p={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},v=s.BV.runKernel(c._k9,d,p);return v=(0,S.p)(v,u.dtype),h?(0,E.X)(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}}),N=n(4836),T=n(7221),M=n(651),D=n(7643),F=n(9238),I=n(1744);var O=(0,h.op)({basicLSTMCell_:function(e,t,n,r,a,i){var o=(0,l._1)(e,"forgetBias","basicLSTMCell"),s=(0,l._1)(t,"lstmKernel","basicLSTMCell"),c=(0,l._1)(n,"lstmBias","basicLSTMCell"),f=(0,l._1)(r,"data","basicLSTMCell"),h=(0,l._1)(a,"c","basicLSTMCell"),d=(0,l._1)(i,"h","basicLSTMCell"),p=(0,N.z)([f,d],1),v=(0,T.O)(p,s),g=(0,u.I)(v,c),m=g.shape[0],y=g.shape[1]/4,b=[m,y],x=(0,F.t)(g,[0,0],b),w=(0,F.t)(g,[0,y],b),k=(0,F.t)(g,[0,2*y],b),_=(0,F.t)(g,[0,3*y],b),S=(0,u.I)((0,M.d)((0,D.X)(x),(0,I.A)(w)),(0,M.d)(h,(0,D.X)((0,u.I)(o,k))));return[S,(0,M.d)((0,I.A)(S),(0,D.X)(_))]}}),R=n(6994),Z=n(3700);var B=(0,h.op)({batchNorm2d_:function(e,t,n,r,a,i){var o,u,s=(0,l._1)(e,"x","batchNorm"),c=(0,l._1)(t,"mean","batchNorm"),h=(0,l._1)(n,"variance","batchNorm");return null!=a&&(o=(0,l._1)(a,"scale","batchNorm")),null!=r&&(u=(0,l._1)(r,"offset","batchNorm")),f.hu(2===s.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(s.rank,".")})),f.hu(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(c.rank,".")})),f.hu(2===h.rank||1===h.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(h.rank,".")})),null!=o&&f.hu(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=u&&f.hu(2===u.rank||1===u.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(u.rank,".")})),(0,Z.t)(s,c,h,u,o,i)}});var z=(0,h.op)({batchNorm3d_:function(e,t,n,r,a,i){var o,u,s=(0,l._1)(e,"x","batchNorm"),c=(0,l._1)(t,"mean","batchNorm"),h=(0,l._1)(n,"variance","batchNorm");return null!=a&&(o=(0,l._1)(a,"scale","batchNorm")),null!=r&&(u=(0,l._1)(r,"offset","batchNorm")),f.hu(3===s.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(s.rank,".")})),f.hu(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(c.rank,".")})),f.hu(3===h.rank||1===h.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(h.rank,".")})),null!=o&&f.hu(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=u&&f.hu(3===u.rank||1===u.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(u.rank,".")})),(0,Z.t)(s,c,h,u,o,i)}});var L=(0,h.op)({batchNorm4d_:function(e,t,n,r,a,i){var o,u,s=(0,l._1)(e,"x","batchNorm"),c=(0,l._1)(t,"mean","batchNorm"),h=(0,l._1)(n,"variance","batchNorm");return null!=a&&(o=(0,l._1)(a,"scale","batchNorm")),null!=r&&(u=(0,l._1)(r,"offset","batchNorm")),f.hu(4===s.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(s.rank,".")})),f.hu(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(c.rank,".")})),f.hu(4===h.rank||1===h.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(h.rank,".")})),null!=o&&f.hu(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=u&&f.hu(4===u.rank||1===u.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(u.rank,".")})),(0,Z.t)(s,c,h,u,o,i)}});var P=(0,h.op)({bincount_:function(e,t,n){var r=(0,l._1)(e,"x","bincount"),a=(0,l._1)(t,"weights","bincount");f.hu("int32"===r.dtype,(function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype)})),f.hu(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),f.hu(a.size===r.size||0===a.size,(function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(a.shape,".")}));var i={x:r,weights:a},o={size:n};return s.BV.runKernel(c.zvY,i,o)}});var j=(0,h.op)({bitwiseAnd_:function(e,t){var n=(0,l._1)(e,"x","bitwiseAnd"),r=(0,l._1)(t,"y","bitwiseAnd");if(!(0,f.cO)(n.shape,r.shape))throw new Error("BitwiseAnd: Tensors must have the same shape. x: ".concat(n.shape,", y: ").concat(r.shape));if("int32"!==n.dtype||"int32"!==r.dtype)throw new Error("BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ".concat(n.dtype," and type of y: ").concat(r.dtype));var a={a:n,b:r};return s.BV.runKernel(c.hCO,a)}});var U=(0,h.op)({broadcastArgs_:function(e,t){var n=(0,l._1)(e,"s0","broadcastArgs","int32"),r=(0,l._1)(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). "+"Has rank ".concat(n.rank));if(1!==r.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). "+"Has rank ".concat(r.rank));var a={s0:n,s1:r};return s.BV.runKernel(c.eEB,a)}}),W=n(9742),V=n(7039),q=n(1396),H=n(9836),G=n(672),X=n(9253);var Y=(0,h.op)({concat1d_:function(e){return(0,N.z)(e,0)}});var K=(0,h.op)({concat2d_:function(e,t){return(0,N.z)(e,t)}});var $=(0,h.op)({concat3d_:function(e,t){return(0,N.z)(e,t)}});var Q=(0,h.op)({concat4d_:function(e,t){return(0,N.z)(e,t)}}),J=n(4918),ee=n(3457),te=n(1732);var ne=(0,h.op)({conv3d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],o=(0,l._1)(e,"x","conv3d"),u=(0,l._1)(t,"filter","conv3d"),h=o,d=!1;4===o.rank&&(d=!0,h=(0,E.X)(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),f.hu(5===h.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(h.rank,".")})),f.hu(5===u.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(u.rank,".")})),f.hu(h.shape[4]===u.shape[3],(function(){return"Error in conv3d: depth of input (".concat(h.shape[4],") must match ")+"input depth for filter ".concat(u.shape[3],".")})),f.hu((0,C.jT)(n,i),(function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")})),f.hu("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")})),f.hu((0,C.U3)(i),(function(){return"Error in conv3D: Dilated rates should be larger than 0."})),f.hu((0,C.U3)(n),(function(){return"Error in conv3D: Strides should be larger than 0."}));var p={x:h,filter:u},v={strides:n,pad:r,dataFormat:a,dilations:i},g=s.BV.runKernel(c.x12,p,v);return d?(0,E.X)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}}),re=n(1873);var ae=(0,h.op)({conv3dTranspose_:function(e,t,n,r,a){var i=(0,l._1)(e,"x","conv3dTranspose"),o=(0,l._1)(t,"filter","conv3dTranspose");return(0,re._)(n,i,o,r,a)}}),ie=n(1227),oe=n(6679),ue=n(9457),se=n(8862);var ce=(0,h.op)({denseBincount_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=(0,l._1)(e,"x","denseBincount"),i=(0,l._1)(t,"weights","denseBincount");f.hu("int32"===a.dtype,(function(){return"Error in denseBincount: input "+"dtype must be int32, but got ".concat(a.dtype)})),f.hu(a.rank<=2,(function(){return"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(a.rank,".")})),f.hu(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),f.hu(i.size===a.size||0===i.size,(function(){return"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(a.shape,", weights shape: ")+"".concat(i.shape,".")}));var o={x:a,weights:i},u={size:n,binaryOutput:r};return s.BV.runKernel(c.QRR,o,u)}}),le=n(1878),fe=n(1147);var he=(0,h.op)({diag_:function(e){var t={x:(0,l._1)(e,"x","diag")};return s.BV.runKernel(c.$w,t)}}),de=n(7580),pe=n(5750),ve=n(5923),ge=n(5043);var me=(0,h.op)({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map((function(e,t){return(0,l._1)(e,"tensors".concat(t),"einsum")})),i={equation:e};return s.BV.runKernel(c.$g6,a,i)}}),ye=n(2353);var be=(0,h.op)({ensureShape_:function(e,t){var n=(0,l._1)(e,"x","ensureShape","string_or_numeric");if(!(0,f.DK)(n.shape,t))throw new Error("EnsureShape: Shape of tensor ".concat(n.shape," is not compatible with expected shape ").concat(t));return e}}),xe=n(3254),we=n(3891),ke=n(3313),_e=n(411),Se=n(2975),Ce=n(5682),Ee=n(2343);var Ae=(0,h.op)({eye_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";null==t&&(t=e);for(var a=(0,V.f)([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var u=(0,E.X)(a.toTensor(),[e,t]);if(null==n)return u;if(1===n.length)return(0,Ee.G)((0,Se.d)(u,0),[n[0],1,1]);if(2===n.length)return(0,Ee.G)((0,Se.d)((0,Se.d)(u,0),0),[n[0],n[1],1,1]);if(3===n.length)return(0,Ee.G)((0,Se.d)((0,Se.d)((0,Se.d)(u,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}}),Ne=n(8582),Te=n(2628),Me=n(7145),De=n(9498),Fe=n(5014),Ie=n(8327),Oe=n(6996),Re=n(300),Ze=n(4652),Be=n(7005),ze=n(4419),Le=n(4920),Pe=n(2642);function je(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");var r={start:e,stop:t,num:n};return s.BV.runKernel(c.e7N,{},r)}var Ue=n(936),We=n(378),Ve=n(5341),qe=n(5113),He=n(4561),Ge=n(5530),Xe=n(2177),Ye=n(875),Ke=n(5117),$e=n(1712),Qe=2147483648;var Je=(0,h.op)({searchSorted_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",r=(0,l._1)(e,"sortedSequence","searchSorted"),a=(0,l._1)(t,"values","searchSorted"),i=r.shape[r.shape.length-1],o=a.shape[a.shape.length-1],u=(0,E.X)(r,[-1,i]),h=(0,E.X)(a,[-1,o]);if(u.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(u.shape[0]!==h.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if((0,f.NA)(h.shape)>=Qe)throw new Error("values tensor size must less than ".concat(Qe));if(u.shape[1]>=Qe)throw new Error("trailing dim_size must less than ".concat(Qe," for int32 output type, was ").concat(u.shape[1]));var d={sortedSequence:u,values:h},p={side:n};return s.BV.runKernel(c.nr8,d,p)}});function et(e,t){return Je(e,t,"left")}var tt=n(6176),nt=n(5777);var rt=(0,h.op)({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=(0,l._1)(e,"x","maxPool3d"),u=o,h=!1;4===o.rank&&(h=!0,u=(0,E.X)(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),f.hu(5===u.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(u.rank,".")})),f.hu("NDHWC"===i,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),(0,C.m)("maxPool3d",r,a);var d={x:u},p={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},v=s.BV.runKernel(c.OAf,d,p);return h?(0,E.X)(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}});var at=(0,h.op)({maxPoolWithArgmax_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=(0,l._1)(e,"x","maxPoolWithArgmax"),o={x:i},u={filterSize:t,strides:n,pad:r,includeBatchInIndex:a},f=s.BV.runKernel(c.vFR,o,u);return{result:f[0],indexes:f[1]}}}),it=n(705),ot=n(6568),ut=n(6100),st=n(4376);function ct(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.indexing,a=void 0===r?"xy":r;if("xy"!==a&&"ij"!==a)throw new TypeError("".concat(a," is not a valid third argument to meshgrid"));if(void 0===e)return[];var i=(0,l._1)(e,"x","meshgrid",e instanceof st.es?e.dtype:"float32");if(void 0===t)return[i];var o=(0,l._1)(t,"y","meshgrid",t instanceof st.es?t.dtype:"float32"),u=(0,f.NA)(i.shape),s=(0,f.NA)(o.shape);return"xy"===a?(i=(0,E.X)(i,[1,-1]),o=(0,E.X)(o,[-1,1]),[(0,T.O)((0,ut.i)([s,1],i.dtype),i),(0,T.O)(o,(0,ut.i)([1,u],o.dtype))]):(i=(0,E.X)(i,[-1,1]),o=(0,E.X)(o,[1,-1]),[(0,T.O)(i,(0,ut.i)([1,s],i.dtype)),(0,T.O)((0,ut.i)([u,1],o.dtype),o)])}var lt=n(7891),ft=n(2273),ht=n(9719),dt=n(4645),pt=n(8473),vt=n(7391),gt=n(4774);var mt=(0,h.op)({moments_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=(0,l._1)(e,"x","moments");var r=(0,f.EC)(t,e.shape),a=(0,ot.J)(e,r,n),i=a.shape;n||(i=(0,pt.rv)(a.shape,r));var o=(0,vt.h)((0,gt.l)((0,S.p)(e,"float32"),(0,E.X)(a,i))),u=(0,ot.J)(o,r,n);return{mean:a,variance:u}}});var yt=(0,h.op)({multiRNNCell_:function(e,t,n,r){for(var a=(0,l._1)(t,"data","multiRNNCell"),i=(0,l.sI)(n,"c","multiRNNCell"),o=(0,l.sI)(r,"h","multiRNNCell"),u=a,s=[],c=0;c<e.length;c++){var f=e[c](u,i[c],o[c]);s.push(f[0]),s.push(f[1]),u=f[1]}for(var h=[],d=[],p=0;p<s.length;p+=2)h.push(s[p]),d.push(s[p+1]);return[h,d]}});var bt=(0,h.op)({multinomial_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=(0,l._1)(e,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(i,"."));if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(o));n=n||Math.random();var u=1===o?(0,E.X)(a,[1,-1]):a,f={logits:u},h={numSamples:t,seed:n,normalized:r},d=s.BV.runKernel(c.NZg,f,h);return 1===o?(0,E.X)(d,[d.size]):d}}),xt=n(4362),wt=n(5549),kt=n(4326),_t=n(773);var St=(0,h.op)({outerProduct_:function(e,t){var n=(0,l._1)(e,"v1","outerProduct"),r=(0,l._1)(t,"v2","outerProduct");f.hu(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=(0,E.X)(n,[-1,1]),i=(0,E.X)(r,[1,-1]);return(0,T.O)(a,i)}}),Ct=n(1970);var Et=(0,h.op)({pad1d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,f.hu)(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),(0,Ct.v)(e,[t],n)}});var At=(0,h.op)({pad2d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,f.hu)(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),(0,Ct.v)(e,t,n)}});var Nt=(0,h.op)({pad3d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,f.hu)(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),(0,Ct.v)(e,t,n)}});var Tt=(0,h.op)({pad4d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,f.hu)(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),(0,Ct.v)(e,t,n)}}),Mt=n(7226),Dt=n(4334),Ft=n(6859),It=n(4600),Ot=n(7722);var Rt=(0,h.op)({raggedGather_:function(e,t,n,r){var a={paramsNestedSplits:e.map((function(e,t){return(0,l._1)(e,"tensors".concat(t),"raggedGather","int32")})),paramsDenseValues:(0,l._1)(t,"paramsDenseValues","raggedGather"),indices:(0,l._1)(n,"indices","raggedGather","int32")},i={outputRaggedRank:r},o=s.BV.runKernel(c.dDz,a,i);return{outputNestedSplits:o.slice(0,o.length-1),outputDenseValues:o[o.length-1]}}});var Zt=(0,h.op)({raggedRange_:function(e,t,n){var r=(0,l._1)(e,"starts","raggedRange"),a={starts:r,limits:(0,l._1)(t,"limits","raggedRange",r.dtype),deltas:(0,l._1)(n,"deltas","raggedRange",r.dtype)},i=s.BV.runKernel(c.CQl,a);return{rtNestedSplits:i[0],rtDenseValues:i[1]}}});var Bt=(0,h.op)({raggedTensorToTensor_:function(e,t,n,r,a){var i=(0,l._1)(e,"shape","raggedTensorToTensor","int32"),o=(0,l._1)(t,"values","raggedTensorToTensor"),u={shape:i,values:o,defaultValue:(0,l._1)(n,"defaultValue","raggedTensorToTensor",o.dtype),rowPartitionTensors:r.map((function(e,t){return(0,l._1)(e,"tensors".concat(t),"raggedTensorToTensor","int32")}))},f={rowPartitionTypes:a};return s.BV.runKernel(c.BiW,u,f)}});var zt=(0,h.op)({rand_:function(e,t,n){(0,f.Mu)(e);var r=(0,f.NA)(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=t();return s.BV.makeTensor(a,e,n)}}),Lt=n(7853),Pt=n(4531),jt=n(6699),Ut=function(){function e(t,n,r,a,i){(0,Lt.Z)(this,e),this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=jt.alea(o.toString())}return(0,Pt.Z)(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,i=void 0,o=void 0;do{o=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i}while(o>=1||0===o);var u=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*a*u,n=this.mean+this.stdDev*i*u,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}(),Wt=function(){function e(t,n,r,a){(0,Lt.Z)(this,e),this.alpha=t,this.beta=1/n,this.dtype=r;var i=a||Math.random();this.randu=jt.alea(i.toString()),this.randn=new Ut(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return(0,Pt.Z)(e,[{key:"nextValue",value:function(){for(var e,t,n,r,a,i;;){do{r=this.randn.nextValue(),i=1+this.c*r}while(i<=0);if(i*=i*i,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-i+Math.log(i)),(a=this.randu())<t||Math.log(a)<n)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}},{key:"convertValue",value:function(e){return"float32"===this.dtype?e:Math.round(e)}}]),e}(),Vt=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if((0,Lt.Z)(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=r-n,this.dtype=a,null==i&&(i=Math.random()),"number"===typeof i&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(r," <= 1 and dtype is not float"));this.random=jt.alea(i)}return(0,Pt.Z)(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}();var qt=(0,h.op)({randomGamma_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;if((0,f.Mu)(e),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type ".concat(r));for(var i=new Wt(t,n,r,a),o=(0,V.f)(e,r),u=0;u<o.values.length;u++)o.values[u]=i.nextValue();return o.toTensor()}});var Ht=(0,h.op)({randomNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if((0,f.Mu)(e),null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));for(var i=new Ut(t,n,r,!1,a),o=(0,V.f)(e,r),u=0;u<o.values.length;u++)o.values[u]=i.nextValue();return o.toTensor()}});var Gt=(0,h.op)({randomStandardNormal_:function(e,t,n){if(null!=t&&"bool"===t)throw new Error("Unsupported data type ".concat(t));return Ht(e,0,1,t,n)}});var Xt=(0,h.op)({randomUniform_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;(0,f.Mu)(e);for(var i=(0,V.f)(e,r),o=new Vt(t,n,null,a),u=0;u<i.values.length;u++)i.values[u]=o.nextValue();return i.toTensor()}});var Yt=(0,h.op)({randomUniformInt_:function(e,t,n,r){return Xt(e,t,n,"int32",r)}});function Kt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var a={start:e,stop:t,step:n,dtype:r};return s.BV.runKernel(c.e6w,{},a)}var $t=n(6972),Qt=n(2209),Jt=n(7539),en=n(5900),tn=n(4933);var nn=(0,h.op)({reverse1d_:function(e){var t=(0,l._1)(e,"x","reverse");return f.hu(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")})),(0,tn.G)(t,0)}});var rn=(0,h.op)({reverse2d_:function(e,t){var n=(0,l._1)(e,"x","reverse");return f.hu(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")})),(0,tn.G)(n,t)}});var an=(0,h.op)({reverse3d_:function(e,t){var n=(0,l._1)(e,"x","reverse");return f.hu(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")})),(0,tn.G)(n,t)}});var on=(0,h.op)({reverse4d_:function(e,t){var n=(0,l._1)(e,"x","reverse");return f.hu(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")})),(0,tn.G)(n,t)}}),un=n(766),sn=n(5115),cn=n(7067),ln=n(413),fn=n(119),hn=n(3032),dn=n(4322),pn=n.n(dn);function vn(){return vn=(0,hn.Z)(pn().mark((function e(t,n){var r,a,i,o,u,s,c,h,d,p,v;return pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,l._1)(t,"x","setdiff1d"),a=(0,l._1)(n,"y","setdiff1d"),f.hu(r.dtype===a.dtype,(function(){return"x and y should have the same dtype, but got x (".concat(r.dtype,") and y (").concat(a.dtype,").")})),f.hu(1===r.rank,(function(){return"x should be 1D tensor, but got x (".concat(r.shape,").")})),f.hu(1===a.rank,(function(){return"y should be 1D tensor, but got y (".concat(a.shape,").")})),e.next=7,r.data();case 7:return i=e.sent,e.next=10,a.data();case 10:for(o=e.sent,u=new Set(o),s=0,c=0;c<i.length;c++)u.has(i[c])||s++;for(h=new st.YD([s],r.dtype),d=new st.YD([s],"int32"),p=0,v=0;p<i.length;p++)u.has(i[p])||(h.values[v]=i[p],d.values[v]=p,v++);return e.abrupt("return",[h.toTensor(),d.toTensor()]);case 18:case"end":return e.stop()}}),e)}))),vn.apply(this,arguments)}var gn=function(e,t){return vn.apply(this,arguments)},mn=n(2070),yn=n(7254),bn=n(7657);var xn=(0,h.op)({slice1d_:function(e,t,n){var r=(0,l._1)(e,"x","slice1d");return f.hu(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")})),(0,F.t)(r,[t],[n])}});var wn=(0,h.op)({slice2d_:function(e,t,n){var r=(0,l._1)(e,"x","slice2d");return f.hu(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")})),(0,F.t)(r,t,n)}});var kn=(0,h.op)({slice3d_:function(e,t,n){var r=(0,l._1)(e,"x","slice3d");return f.hu(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")})),(0,F.t)(r,t,n)}});var _n=(0,h.op)({slice4d_:function(e,t,n){var r=(0,l._1)(e,"x","slice4d");return f.hu(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")})),(0,F.t)(r,t,n)}}),Sn=n(4910),Cn=n(4626),En=n(5696),An=n(7635),Nn=n(530),Tn=n(774),Mn=n(4617),Dn=n(2588),Fn=n(6902),In=n(7993),On=n(3931),Rn=n(8306),Zn=n(4031),Bn=n(9017),zn=n(227),Ln=n(6999),Pn=n(2442),jn=n(7960);function Un(e,t){(0,f.Cq)(e);var n=(0,l.C)(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return(0,jn.H)(e,null,n,t)}function Wn(e,t,n){if((0,f.Cq)(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=(0,l.C)(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return(0,jn.H)(e,t,r,n)}var Vn=n(3123);function qn(e,t,n){if((0,f.Cq)(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=(0,l.C)(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return(0,jn.H)(e,t,r,n)}function Hn(e,t,n){if((0,f.Cq)(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=(0,l.C)(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return(0,jn.H)(e,t,r,n)}function Gn(e,t,n){if((0,f.Cq)(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=(0,l.C)(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||r,(0,jn.H)(e,t,r,n)}var Xn=n(8604);var Yn=(0,h.op)({tensorScatterUpdate_:function(e,t,n){var r=(0,l._1)(e,"tensor","tensorScatterupdate"),a=(0,l._1)(t,"indices","tensorScatterupdate","int32"),i=(0,l._1)(n,"updates","tensorScatterupdate");if(Xn.validateInput(i,a,r.shape),r.dtype!==i.dtype)throw new Error("tensor and updates must have the same dtype, instead they are ".concat(r.dtype," and ").concat(i.dtype,"."));var o={tensor:r,indices:a,updates:i};return s.BV.runKernel(c.SIB,o,{})}}),Kn=n(9085);var $n=(0,h.op)({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if((0,f.Mu)(e),null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var i=new Ut(t,n,r,!0,a),o=(0,V.f)(e,r),u=0;u<o.values.length;u++)o.values[u]=i.nextValue();return o.toTensor()}}),Qn=n(4860),Jn=n(6918),er=n(4566);function tr(e,t){return Je(e,t,"right")}function nr(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return s.BV.makeVariable(e,t,n,r)}var rr=n(329),ar=n(4189);function ir(){return(ir=(0,hn.Z)(pn().mark((function e(t){var n,r,a;return pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,l._1)(t,"condition","whereAsync","bool"),e.next=3,n.data();case 3:return r=e.sent,a=(0,ar.Z)(n.shape,r),t!==n&&n.dispose(),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var or=function(e){return ir.apply(this,arguments)},ur=n(7742),sr=n(7293);function cr(){return cr=(0,hn.Z)(pn().mark((function e(t,n,r){var a,i,o,u,s,c,h,d,p,v,g,m,y;return pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=(0,l._1)(t,"tensor","boolMask"),i=(0,l._1)(n,"mask","boolMask","bool"),o=null==r?0:r,u=i.rank,s=a.shape,f.hu(u>0,(function(){return"mask cannot be scalar"})),f.k5(s.slice(o,o+u),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,h=o;h<o+u;h++)c*=s[h];return d=s.slice(0,o).concat([c],s.slice(o+u)),p=(0,E.X)(a,d),v=(0,E.X)(i,[-1]),e.next=14,or(v);case 14:return g=e.sent,m=(0,On.L)(g,[1]),y=(0,De.I)(p,m,o),t!==a&&a.dispose(),n!==i&&i.dispose(),m.dispose(),p.dispose(),v.dispose(),g.dispose(),e.abrupt("return",y);case 24:case"end":return e.stop()}}),e)}))),cr.apply(this,arguments)}var lr=function(e,t,n){return cr.apply(this,arguments)},fr=n(1240),hr=n(6662),dr=n(9064);var pr=(0,h.op)({movingAverage_:function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=(0,l._1)(e,"v","movingAverage"),o=(0,l._1)(t,"x","movingAverage"),s=(0,l._1)(n,"decay","movingAverage");(0,dr.assertTypesMatch)(i,o),f.hu(f.cO(i.shape,o.shape),(function(){return"Shape mismatch in v and x"}));var c=(0,cn.i)(1),h=(0,gt.l)(c,s),d=(0,M.d)((0,gt.l)(o,i),h);if(a){f.hu(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var p=(0,l._1)(r,"step","movingAverage");d=(0,pe.h)(d,(0,gt.l)(c,(0,Dt.s)(s,p)))}return(0,u.I)(i,d)}});var vr=(0,h.op)({scatterND_:function(e,t,n){(0,f.Mu)(n);var r=(0,l._1)(e,"indices","scatterND","int32"),a=(0,l._1)(t,"updates","scatterND");Xn.validateInput(a,r,n);var i={indices:r,updates:a},o={shape:n};return s.BV.runKernel(c.xQA,i,o)}});function gr(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(e.shape,"."));var a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(i,"."));var o=t.size;if(0!==t.rank&&(1!==t.rank||o!==a))throw new Error("sparseValues has incorrect shape "+"".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}var mr=(0,h.op)({sparseToDense_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,f.Mu)(n);var a=(0,l._1)(e,"sparseIndices","sparseToDense","int32"),i=(0,l._1)(t,"sparseValues","sparseToDense","string_or_numeric"),o=(0,l._1)(r,"defaultValue","sparseToDense",i.dtype);gr(a,i,n,o);var u={sparseIndices:a,sparseValues:i,defaultValue:o},h={outputShape:n};return s.BV.runKernel(c.D2d,u,h)}});var yr=(0,h.op)({gatherND_:function(e,t){var n=(0,l._1)(t,"indices","gatherND","int32"),r={params:(0,l._1)(e,"x","gatherND","string_or_numeric"),indices:n};return s.BV.runKernel(c.q1x,r)}});var br=(0,h.op)({dropout_:function(e,t,n,r){var a=(0,l._1)(e,"x","dropout");if(f.hu("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")})),f.hu(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")})),0===t)return e instanceof st.es?a.clone():a;var i=function(e,t){if(null==t)return e.shape.slice();if(f.cO(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),o=1-t,s=(0,pe.h)((0,Te.G)((0,u.I)(Xt(i,0,1,"float32",r),o)),o);return(0,M.d)(a,s)}});function xr(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function wr(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return Un(a,"float32")}function kr(){return kr=(0,hn.Z)(pn().mark((function e(t,n){var r,a,i,o,u,s,c,h,d,p,v,g,m,y,b,x=arguments;return pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x.length>2&&void 0!==x[2]?x[2]:1,a=(0,l._1)(t,"predictions","inTopK"),i=(0,l._1)(n,"targets","inTopK"),(0,f.hu)(a.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, "+"but got ".concat(a.rank)})),(0,f.hu)(a.rank-1===i.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+"".concat(a.rank," and targets rank ").concat(i.rank)})),(0,f.k5)(a.shape.slice(0,a.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=a.shape[a.shape.length-1],(0,f.hu)(r>0&&r<=o,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last "+"dimension (".concat(o,"), but got ").concat(r)})),e.next=10,a.data();case 10:return u=e.sent,e.next=13,i.data();case 13:s=e.sent,c=u.length/o,h=o,d=(0,f.WP)("bool",c),p=0;case 17:if(!(p<c)){e.next=35;break}for(v=p*h,g=u.subarray(v,v+h),m=[],y=0;y<g.length;y++)m.push({value:g[y],index:y});m.sort((function(e,t){return t.value-e.value})),d[p]=0,b=0;case 25:if(!(b<r)){e.next=32;break}if(m[b].index!==s[p]){e.next=29;break}return d[p]=1,e.abrupt("break",32);case 29:b++,e.next=25;break;case 32:p++,e.next=17;break;case 35:return t!==a&&a.dispose(),n!==i&&i.dispose(),e.abrupt("return",(0,Pn.X)(d,i.shape,"bool"));case 38:case"end":return e.stop()}}),e)}))),kr.apply(this,arguments)}var _r=function(e,t){return kr.apply(this,arguments)},Sr=n(678),Cr=n(6450),Er=n(5774),Ar=n(8744),Nr=n(1045),Tr=n(5171);var Mr=(0,h.op)({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,h=e.dilations,d=void 0===h?[1,1]:h,p=e.dimRoundingMode,v=e.bias,g=e.activation,m=void 0===g?"linear":g,y=e.preluActivationWeights,b=e.leakyreluAlpha;if(m=m||"linear",!1===(0,Tr.uy)(s.BV.state.gradientDepth,m)){f.hu("NHWC"===o,(function(){return"Error in fused conv2d: got dataFormat of ".concat(o," but ")+"only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear."}));var x=(0,ee.T)(t,n,r,a,o,d,p);return null!=v&&(x=(0,u.I)(x,v)),(0,Tr.QH)(x,m,y,b)}var w=(0,l._1)(t,"x","conv2d","float32"),k=(0,l._1)(n,"filter","conv2d","float32"),_=w,S=!1;3===w.rank&&(S=!0,_=(0,E.X)(w,[1,w.shape[0],w.shape[1],w.shape[2]])),f.hu(4===_.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(_.rank,".")})),f.hu(4===k.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(k.rank,".")})),C.m("fused conv2d",a,p);var A="NHWC"===o?_.shape[3]:_.shape[1];f.hu(k.shape[2]===A,(function(){return"Error in conv2d: depth of input (".concat(A,") must match ")+"input depth for filter ".concat(k.shape[2],".")})),f.hu(C.jT(r,d),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(d,"'")}));var N,T,M=C.Ix(_.shape,k.shape,r,d,a,p);if(null!=v){N=(0,l._1)(v,"bias","fused conv2d");var D=(0,dr.makeTypesMatch)(N,w),F=(0,Sr.Z)(D,1);N=F[0],"NHWC"===o?Er.assertAndGetBroadcastShape(M.outShape,N.shape):(f.hu(N.shape.length<=1,(function(){return"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+"rank-".concat(N.shape.length,".")})),f.hu(0===N.shape.length||N.shape[0]===M.outChannels||1===N.shape[0],(function(){return"Error in fused conv2d: bias shape (".concat(N.shape,") is not ")+"compatible with the number of output channels "+"(".concat(M.outChannels,")")})))}if(null!=y){var I=y.shape;if(f.hu(I.length<=1||3===I.length,(function(){return"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+"rank-".concat(I.length,".")})),1===I.length)f.hu(1===I[0]||I[0]===M.outChannels,(function(){return"Error in fused conv2d: PReLU activation weights "+"(".concat(I,") is not compatible with the number of output ")+"channels (".concat(M.outChannels,").")}));else if(3===I.length)try{Er.assertAndGetBroadcastShape(I,M.outShape)}catch(P){var O="Error in fused conv2d: PReLU activation weights (".concat(I,") ")+"is not compatible with the output shape of the conv2d "+"(".concat(M.outShape,").");throw Error(O)}T=(0,l._1)(y,"prelu weights","fused conv2d")}var R=function(e,t){f.hu("NHWC"===o,(function(){return"Error in gradient of fused conv2D: got dataFormat of ".concat(o," but only NHWC is currently supported.")}));var n=(0,Sr.Z)(t,4),i=n[0],u=n[1],s=n[2],c=n[3],l=(0,Tr.Fr)(e,s,m);f.hu(C.I0(d),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(d,"'")}));var h=[(0,Nr._)(u.shape,l,i,r,a),(0,Ar.p)(u,l,i.shape,r,a)];if(null!=c){var p=(0,Tr.pf)(c,l);h.push(p)}return h},Z={x:_,filter:k,bias:N,preluActivationWeights:T},B={strides:r,pad:a,dataFormat:o,dilations:d,dimRoundingMode:p,activation:m,leakyreluAlpha:b};if(null==v){var z=(0,Cr.cb)((function(e,t,n){var r=s.BV.runKernel(c._V0,Z,B);return n([t,e,r]),S&&(r=(0,E.X)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:R}}));return z(_,k)}var L=(0,Cr.cb)((function(e,t,n,r){var a=s.BV.runKernel(c._V0,Z,B);return r([t,e,a,n]),S&&(a=(0,E.X)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:R}}));return L(_,k,N)}}),Dr=n(288),Fr=n(6939);var Ir=(0,h.op)({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,h=e.dilations,d=void 0===h?[1,1]:h,p=e.dimRoundingMode,v=e.bias,g=e.activation,m=void 0===g?"linear":g,y=e.preluActivationWeights,b=e.leakyreluAlpha;if(!1===(0,Tr.uy)(s.BV.state.gradientDepth,m)){var x=(0,fe.B)(t,n,r,a,o,d,p);return null!=v&&(x=(0,u.I)(x,v)),(0,Tr.QH)(x,m,y,b)}var w=(0,l._1)(t,"x","depthwiseConv2d","float32"),k=(0,l._1)(n,"filter","depthwiseConv2d","float32"),_=w,S=!1;3===w.rank&&(S=!0,_=(0,E.X)(w,[1,w.shape[0],w.shape[1],w.shape[2]])),f.hu(4===_.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(_.rank,".")})),f.hu(4===k.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(k.rank,".")})),f.hu(_.shape[3]===k.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels "+"(".concat(_.shape[3],") must match the inChannels dimension in ")+"filter ".concat(k.shape[2],".")})),null==d&&(d=[1,1]),f.hu(C.jT(r,d),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(r," and dilations '").concat(d,"'")})),C.m("fused depthwiseConv2d",a,p);var A,N,T=C.Ix(_.shape,k.shape,r,d,a,p,!0);if(null!=v){A=(0,l._1)(v,"bias","fused conv2d");var M=(0,dr.makeTypesMatch)(A,w),D=(0,Sr.Z)(M,1);A=D[0],Er.assertAndGetBroadcastShape(T.outShape,A.shape)}null!=y&&(N=(0,l._1)(y,"prelu weights","fused depthwiseConv2d"));var F=function(e,t){f.hu(C.I0(d),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(d,"'")}));var n=(0,Sr.Z)(t,4),i=n[0],o=n[1],u=n[2],s=n[3],c=(0,Tr.Fr)(e,u,m),l=(0,Fr.v)(o.shape,c,i,r,a,d,p),h=(0,Dr.z)(o,c,i.shape,r,a,d,p);return null!=s?[l,h,(0,Tr.pf)(A,c)]:[l,h]},I={x:_,filter:k,bias:A,preluActivationWeights:N},O={strides:r,pad:a,dataFormat:o,dilations:d,dimRoundingMode:p,activation:m,leakyreluAlpha:b};if(null==v){var R=(0,Cr.cb)((function(e,t,n){var r=s.BV.runKernel(c.luS,I,O);return n([t,e,r]),S&&(r=(0,E.X)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:F}}));return R(_,k)}var Z=(0,Cr.cb)((function(e,t,n,r){var a=s.BV.runKernel(c.luS,I,O);return r([t,e,a,n]),S&&(a=(0,E.X)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:F}}));return Z(_,k,A)}});var Or=(0,h.op)({fusedMatMul_:function(e){var t=e.a,n=e.b,r=e.transposeA,a=void 0!==r&&r,i=e.transposeB,o=void 0!==i&&i,h=e.bias,d=e.activation,p=void 0===d?"linear":d,v=e.preluActivationWeights,g=e.leakyreluAlpha,m=void 0===g?.2:g;if(!1===(0,Tr.uy)(s.BV.state.gradientDepth,p)){var y=(0,T.O)(t,n,a,o);return null!=h&&(y=(0,u.I)(y,h)),(0,Tr.QH)(y,p,v,m)}var b=(0,l._1)(t,"a","fused matMul"),x=(0,l._1)(n,"b","fused matMul"),w=(0,dr.makeTypesMatch)(b,x),k=(0,Sr.Z)(w,2);b=k[0],x=k[1];var _=a?b.shape[b.rank-2]:b.shape[b.rank-1],S=o?x.shape[x.rank-1]:x.shape[x.rank-2],C=a?b.shape[b.rank-1]:b.shape[b.rank-2],A=o?x.shape[x.rank-2]:x.shape[x.rank-1],N=b.shape.slice(0,-2),M=x.shape.slice(0,-2),D=f.NA(N),F=f.NA(M);f.hu(_===S,(function(){return"Error in fused matMul: inner shapes (".concat(_,") and (")+"".concat(S,") of Tensors with shapes ").concat(b.shape," and ")+"".concat(x.shape," and transposeA=").concat(a)+" and transposeB=".concat(o," must match.")}));var I,O,R=Er.assertAndGetBroadcastShape(b.shape.slice(0,-2),x.shape.slice(0,-2)).concat([C,A]),Z=a?(0,E.X)(b,[D,_,C]):(0,E.X)(b,[D,C,_]),B=o?(0,E.X)(x,[F,A,S]):(0,E.X)(x,[F,S,A]);if(null!=h){I=(0,l._1)(h,"bias","fused matMul");var z=(0,dr.makeTypesMatch)(I,b);I=(0,Sr.Z)(z,1)[0],Er.assertAndGetBroadcastShape(R,I.shape)}null!=v&&(O=(0,l._1)(v,"prelu weights","fused matMul"));var L=function(e,t){var n,r,i=(0,Sr.Z)(t,4),u=i[0],s=i[1],c=i[2],l=i[3],f=(0,Tr.Fr)((0,E.X)(e,c.shape),c,p);return a||o?!a&&o?(n=(0,T.O)(f,s,!1,!1),r=(0,T.O)(f,u,!0,!1)):a&&!o?(n=(0,T.O)(s,f,!1,!0),r=(0,T.O)(u,f,!1,!1)):(n=(0,T.O)(s,f,!0,!0),r=(0,T.O)(f,u,!0,!0)):(n=(0,T.O)(f,s,!1,!0),r=(0,T.O)(u,f,!0,!1)),null!=h?[n,r,(0,Tr.pf)(l,f)]:[n,r]},P={a:Z,b:B,bias:I,preluActivationWeights:O},j={transposeA:a,transposeB:o,activation:p,leakyreluAlpha:m};if(null==h){var U=(0,Cr.cb)((function(e,t,n){var r=s.BV.runKernel(c.usg,P,j);return n([e,t,r]),{value:(0,E.X)(r,R),gradFunc:L}}));return U(Z,B)}var W=(0,Cr.cb)((function(e,t,n,r){var a=s.BV.runKernel(c.usg,P,j);return r([e,t,a,n]),{value:(0,E.X)(a,R),gradFunc:L}}));return W(Z,B,I)}});var Rr=(0,h.op)({hammingWindow_:function(e){return wr(e,.54,.46)}});var Zr=(0,h.op)({hannWindow_:function(e){return wr(e,.5,.5)}});var Br=(0,h.op)({frame_:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=0,o=[];i+t<=e.size;)o.push((0,F.t)(e,i,t)),i+=n;if(r)for(;i<e.size;){var u=i+t-e.size,s=(0,N.z)([(0,F.t)(e,i,t-u),(0,Ne.h)([u],a)]);o.push(s),i+=n}return 0===o.length?Wn([],[0,t]):(0,E.X)((0,N.z)(o),[o.length,t])}});var zr=(0,h.op)({stft_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Zr;null==r&&(r=xr(t));var i=Br(e,t,n),o=(0,M.d)(i,a(t));return(0,Mn.Q)(o,r)}});var Lr=(0,h.op)({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=(0,l._1)(e,"image","cropAndResize"),u=(0,l._1)(t,"boxes","cropAndResize","float32"),h=(0,l._1)(n,"boxInd","cropAndResize","int32"),d=u.shape[0];f.hu(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),f.hu(2===u.rank&&4===u.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(d,",4] ")+"but had shape ".concat(u.shape,".")})),f.hu(1===h.rank&&h.shape[0]===d,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(d,"] ")+"but had shape ".concat(u.shape,".")})),f.hu(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")})),f.hu(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),f.hu("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var p={image:o,boxes:u,boxInd:h},v={method:a,extrapolationValue:i,cropSize:r},g=s.BV.runKernel(c.VcC,p,v);return g}});var Pr=(0,h.op)({flipLeftRight_:function(e){var t=(0,l._1)(e,"image","flipLeftRight","float32");f.hu(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")}));var n={image:t};return s.BV.runKernel(c.Uyb,n,{})}});var jr=(0,h.op)({grayscaleToRGB_:function(e){var t=(0,l._1)(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];f.hu(t.rank>=2,(function(){return"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")})),f.hu(1===r,(function(){return"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,".")}));var a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,(0,Ee.G)(t,a)}});var Ur=(0,h.op)({rgbToGrayscale_:function(e){var t=(0,l._1)(e,"image","RGBToGrayscale"),n=t.rank-1,r=t.shape[n];f.hu(t.rank>=2,(function(){return"Error in RGBToGrayscale: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")})),f.hu(3===r,(function(){return"Error in RGBToGrayscale: last dimension of an RGB image "+"should be size 3, but got size ".concat(r,".")}));var a,i=t.dtype,o=(0,S.p)(t,"float32"),u=Un([.2989,.587,.114]);switch(t.rank){case 2:a=me("ij,j->i",o,u);break;case 3:a=me("ijk,k->ij",o,u);break;case 4:a=me("ijkl,l->ijk",o,u);break;case 5:a=me("ijklm,m->ijkl",o,u);break;case 6:a=me("ijklmn,n->ijklm",o,u);break;default:throw new Error("Not a valid tensor rank.")}return a=(0,Se.d)(a,-1),(0,S.p)(a,i)}});var Wr=(0,h.op)({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=(0,l._1)(e,"image","rotateWithOffset","float32");f.hu(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,".")}));var i={image:a},o={radians:t,fillValue:n,center:r},u=s.BV.runKernel(c.b9H,i,o);return u}});function Vr(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=e.shape[0];return n=Math.min(n,o),f.hu(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),f.hu(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),f.hu(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),f.hu(1===t.rank,(function(){return"scores must be a 1D tensor"})),f.hu(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected ".concat(o,", ")+"but was ".concat(t.shape[0])})),f.hu(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(i,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var qr=(0,h.op)({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=(0,l._1)(e,"boxes","nonMaxSuppression","float32"),o=(0,l._1)(t,"scores","nonMaxSuppression","float32"),u=Vr(i,o,n,r,a),f={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold};return s.BV.runKernel(c.uv1,{boxes:i,scores:o},f)}}),Hr=n(745);function Gr(){return Gr=(0,hn.Z)(pn().mark((function e(t,n,r){var a,i,o,u,s,c,f,h,d,p,v=arguments;return pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.length>3&&void 0!==v[3]?v[3]:.5,i=v.length>4&&void 0!==v[4]?v[4]:Number.NEGATIVE_INFINITY,o=(0,l._1)(t,"boxes","nonMaxSuppressionAsync"),u=(0,l._1)(n,"scores","nonMaxSuppressionAsync"),s=Vr(o,u,r,a,i),r=s.maxOutputSize,a=s.iouThreshold,i=s.scoreThreshold,e.next=10,Promise.all([o.data(),u.data()]);case 10:return c=e.sent,f=c[0],h=c[1],d=(0,Hr.GP)(f,h,r,a,i),p=d.selectedIndices,o!==t&&o.dispose(),u!==n&&u.dispose(),e.abrupt("return",Un(p,"int32"));case 17:case"end":return e.stop()}}),e)}))),Gr.apply(this,arguments)}var Xr=function(e,t,n){return Gr.apply(this,arguments)};var Yr=(0,h.op)({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=(0,l._1)(e,"boxes","nonMaxSuppression"),u=(0,l._1)(t,"scores","nonMaxSuppression"),f=Vr(o,u,n,r,a,i),h={boxes:o,scores:u},d={maxOutputSize:n=f.maxOutputSize,iouThreshold:r=f.iouThreshold,scoreThreshold:a=f.scoreThreshold,softNmsSigma:i=f.softNmsSigma},p=s.BV.runKernel(c.W0H,h,d);return{selectedIndices:p[0],selectedScores:p[1]}}});function Kr(){return Kr=(0,hn.Z)(pn().mark((function e(t,n,r){var a,i,o,u,s,c,f,h,d,p,v,g,m=arguments;return pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=m.length>3&&void 0!==m[3]?m[3]:.5,i=m.length>4&&void 0!==m[4]?m[4]:Number.NEGATIVE_INFINITY,o=m.length>5&&void 0!==m[5]?m[5]:0,u=(0,l._1)(t,"boxes","nonMaxSuppressionAsync"),s=(0,l._1)(n,"scores","nonMaxSuppressionAsync"),c=Vr(u,s,r,a,i,o),r=c.maxOutputSize,a=c.iouThreshold,i=c.scoreThreshold,o=c.softNmsSigma,e.next=12,Promise.all([u.data(),s.data()]);case 12:return f=e.sent,h=f[0],d=f[1],p=(0,Hr.pA)(h,d,r,a,i,o),v=p.selectedIndices,g=p.selectedScores,u!==t&&u.dispose(),s!==n&&s.dispose(),e.abrupt("return",{selectedIndices:Un(v,"int32"),selectedScores:Un(g)});case 19:case"end":return e.stop()}}),e)}))),Kr.apply(this,arguments)}var $r=function(e,t,n){return Kr.apply(this,arguments)};var Qr=(0,h.op)({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=(0,l._1)(e,"boxes","nonMaxSuppression"),u=(0,l._1)(t,"scores","nonMaxSuppression"),f=Vr(o,u,n,r,a,null),h=f.maxOutputSize,d=f.iouThreshold,p=f.scoreThreshold,v={boxes:o,scores:u},g={maxOutputSize:h,iouThreshold:d,scoreThreshold:p,padToMaxOutputSize:i},m=s.BV.runKernel(c.cye,v,g);return{selectedIndices:m[0],validOutputs:m[1]}}});function Jr(){return Jr=(0,hn.Z)(pn().mark((function e(t,n,r){var a,i,o,u,s,c,f,h,d,p,v,g,m,y,b,x,w=arguments;return pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=w.length>3&&void 0!==w[3]?w[3]:.5,i=w.length>4&&void 0!==w[4]?w[4]:Number.NEGATIVE_INFINITY,o=w.length>5&&void 0!==w[5]&&w[5],u=(0,l._1)(t,"boxes","nonMaxSuppressionAsync"),s=(0,l._1)(n,"scores","nonMaxSuppressionAsync"),c=Vr(u,s,r,a,i,null),f=c.maxOutputSize,h=c.iouThreshold,d=c.scoreThreshold,e.next=11,Promise.all([u.data(),s.data()]);case 11:return p=e.sent,v=(0,Sr.Z)(p,2),g=v[0],m=v[1],y=(0,Hr.qP)(g,m,f,h,d,o),b=y.selectedIndices,x=y.validOutputs,u!==t&&u.dispose(),s!==n&&s.dispose(),e.abrupt("return",{selectedIndices:Un(b,"int32"),validOutputs:(0,cn.i)(x,"int32")});case 19:case"end":return e.stop()}}),e)}))),Jr.apply(this,arguments)}var ea=function(e,t,n){return Jr.apply(this,arguments)},ta=n(464),na=n(8600);function ra(e,t){for(var n,r,a,i,o,s,c=Un([-1]),l=Un([0]),f=Un([0]),h=0;h<e.size-1;h++){n=(0,F.t)(e,0,h+1),r=(0,F.t)(e,h+1),o=(0,pe.h)((0,zn.S)(n),t),s=(0,pe.h)((0,zn.S)(r),t);var d=(0,zn.S)((0,M.d)(n,Kt(0,n.size)));a=(0,pe.h)(d,(0,zn.S)(n));var p=(0,Ne.h)(r.shape,n.size),v=(0,u.I)(Kt(0,r.size),p),g=(0,M.d)(r,v);i=(0,pe.h)((0,zn.S)(g),(0,zn.S)(r));var m=(0,gt.l)(a,i),y=(0,gt.l)(a,i),b=(0,M.d)(o,s);f=(0,M.d)((0,M.d)(b,m),y);var x=(0,Fe.p)(f,l);l=(0,rr.a)(x,f,l),c=(0,rr.a)(x,Un([h]),c)}return c}var aa=(0,h.op)({threshold_:function(e){var t,n,r,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,c=(0,l._1)(e,"image","threshold"),h=.2989,d=.587,p=.114,v=c.shape[0]*c.shape[1],g=(0,M.d)(Un([s]),255);if(f.hu(3===c.rank,(function(){return"Error in threshold: image must be rank 3,"+"but got rank ".concat(c.rank,".")})),f.hu(3===c.shape[2]||1===c.shape[2],(function(){return"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(c.shape[2],".")})),f.hu("int32"===c.dtype||"float32"===c.dtype,(function(){return"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(c.dtype,".")})),f.hu("otsu"===i||"binary"===i,(function(){return"Method must be binary or otsu, but was ".concat(i)})),3===c.shape[2]){var m=(0,Dn.V)(c,[1,1,1],-1),y=(0,Sr.Z)(m,3);t=y[0],n=y[1],r=y[2];var b=(0,M.d)(t,h),x=(0,M.d)(n,d),w=(0,M.d)(r,p);a=(0,u.I)((0,u.I)(b,x),w)}else a=e;if("otsu"===i){var k=P((0,S.p)((0,un.N)(a),"int32"),(0,Pn.X)([]),256);g=ra(k,v)}var _=o?(0,Pe.z)(a,g):(0,Fe.p)(a,g),C=(0,S.p)((0,M.d)(_,255),"int32");return C}});var ia=(0,h.op)({transform_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0,o=(0,l._1)(e,"image","transform","float32"),u=(0,l._1)(t,"transforms","transform","float32");f.hu(4===o.rank,(function(){return"Error in transform: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),f.hu(2===u.rank&&(u.shape[0]===o.shape[0]||1===u.shape[0])&&8===u.shape[1],(function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"})),f.hu(null==i||2===i.length,(function(){return"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(i,".")}));var h={image:o,transforms:u},d={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return s.BV.runKernel(c.wx7,h,d)}});var oa=(0,h.op)({bandPart_:function(e,t,n){var r=(0,l._1)(e,"a","bandPart");(0,f.hu)(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")}));var a,i,o=r.shape,u=r.shape.slice(-2),s=(0,Sr.Z)(u,2),c=s[0],h=s[1];"number"===typeof t?((0,f.hu)(t%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),(0,f.hu)(t<=c,(function(){return"bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(c,").")})),a=(0,l._1)(t<0?c:t,"numLower","bandPart")):((0,f.hu)("int32"===t.dtype,(function(){return"bandPart(): numLower's dtype must be an int32."})),a=(0,rr.a)((0,Le.d)(t,0),c,(0,ft.L)(t,c))),"number"===typeof n?((0,f.hu)(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")})),(0,f.hu)(n<=h,(function(){return"bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(h,").")})),i=(0,l._1)(n<0?h:n,"numUpper","bandPart")):((0,f.hu)("int32"===n.dtype,(function(){return"bandPart(): numUpper's dtype must be an int32."})),i=(0,rr.a)((0,Le.d)(n,0),h,(0,ft.L)(n,h)));var d=(0,E.X)(Kt(0,c,1,"int32"),[-1,1]),p=Kt(0,h,1,"int32"),v=(0,gt.l)(d,p),g=(0,Xe.H)((0,Pe.z)(v,a),(0,Ie.b)(v,(0,xt.W)(i))),m=(0,ur.l)([c,h],r.dtype);return(0,E.X)((0,Rn.k)((0,er.H)((0,E.X)(r,[-1,c,h])).map((function(e){return(0,rr.a)(g,e,m)}))),o)}});var ua=(0,h.op)({gramSchmidt_:function(e){var t;Array.isArray(e)?function(){t=!1,(0,f.hu)(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){(0,f.hu)(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}():(t=!0,e=(0,Dn.V)(e,e.shape[0],0).map((function(e){return(0,On.L)(e,[0])}))),(0,f.hu)(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")}));for(var n=[],r=e,a=function(e){n.push(s.BV.tidy((function(){var t=r[e];if(e>0)for(var a=0;a<e;++a){var i=(0,M.d)((0,zn.S)((0,M.d)(n[a],t)),n[a]);t=(0,gt.l)(t,i)}return(0,pe.h)(t,(0,hr.K)(t,"euclidean"))})))},i=0;i<e.length;++i)a(i);return t?(0,Rn.k)(n,0):n}}),sa=n(5875);function ca(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return s.BV.tidy((function(){(0,f.hu)(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],r=e.shape[1],a=Ae(n),i=(0,G.d)(e),o=Wn([[1]],[1,1]),u=(0,G.d)(o),c=n>=r?r:n,l=function(e){var t=i,c=u,l=a,f=s.BV.tidy((function(){var t=(0,F.t)(i,[e,e],[n-e,1]),s=(0,hr.K)(t),c=(0,F.t)(i,[e,e],[1,1]),l=(0,rr.a)((0,Fe.p)(c,0),Wn([[-1]]),Wn([[1]])),f=(0,gt.l)(c,(0,M.d)(l,s)),h=(0,pe.h)(t,f);u=1===h.shape[0]?(0,G.d)(o):(0,N.z)([o,(0,F.t)(h,[1,0],[h.shape[0]-1,h.shape[1]])],0);var d=(0,xt.W)((0,pe.h)((0,T.O)(l,f),s)),p=(0,F.t)(i,[e,0],[n-e,r]),v=(0,M.d)(d,u),g=(0,fr.p)(u);if(0===e)i=(0,gt.l)(p,(0,T.O)(v,(0,T.O)(g,p)));else{var m=(0,gt.l)(p,(0,T.O)(v,(0,T.O)(g,p)));i=(0,N.z)([(0,F.t)(i,[0,0],[e,r]),m],0)}var y=(0,fr.p)(v),b=(0,F.t)(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=(0,gt.l)(b,(0,T.O)((0,T.O)(b,u),y));else{var x=(0,gt.l)(b,(0,T.O)((0,T.O)(b,u),y));a=(0,N.z)([(0,F.t)(a,[0,0],[n,e]),x],1)}return[u,i,a]})),h=(0,Sr.Z)(f,3);u=h[0],i=h[1],a=h[2],(0,sa.B9)([t,c,l])},h=0;h<c;++h)l(h);return!t&&n>r&&(a=(0,F.t)(a,[0,0],[n,r]),i=(0,F.t)(i,[0,0],[r,r])),[a,i]}))}var la=(0,h.op)({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((0,f.hu)(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return ca(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=(0,er.H)((0,E.X)(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];r.forEach((function(e){var n=ca(e,t),r=(0,Sr.Z)(n,2),o=r[0],u=r[1];a.push(o),i.push(u)}));var o=(0,E.X)((0,Rn.k)(a,0),e.shape),u=(0,E.X)((0,Rn.k)(i,0),e.shape);return[o,u]}}),fa=n(7627);var ha=(0,h.op)({computeWeightedLoss_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fa.I.SUM_BY_NONZERO_WEIGHTS,r=(0,l._1)(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=(0,l._1)(t,"weights","computeWeightedLoss"));var i=null==a?r:(0,M.d)(r,a);if(n===fa.I.NONE)return i;if(n===fa.I.SUM)return(0,zn.S)(i);if(n===fa.I.MEAN){if(null==a)return(0,ot.J)(i);var o=r.size/a.size,u=(0,pe.h)((0,zn.S)(i),(0,zn.S)(a));return o>1?(0,pe.h)(u,(0,cn.i)(o)):u}if(n===fa.I.SUM_BY_NONZERO_WEIGHTS){if(null==a)return(0,pe.h)((0,zn.S)(i),(0,cn.i)(r.size));var s=(0,M.d)(a,(0,ut.i)(r.shape)),c=(0,S.p)((0,zn.S)((0,wt.Q)(s,(0,cn.i)(0))),"float32");return(0,pe.h)((0,zn.S)(i),c)}throw Error("Unknown reduction: ".concat(n))}});var da=(0,h.op)({absoluteDifference_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fa.I.SUM_BY_NONZERO_WEIGHTS,i=(0,l._1)(e,"labels","absoluteDifference"),o=(0,l._1)(t,"predictions","absoluteDifference"),u=null;null!=n&&(u=(0,l._1)(n,"weights","absoluteDifference")),(0,f.k5)(i.shape,o.shape,"Error in absoluteDifference: ");var s=(0,a.W)((0,gt.l)(i,o));return ha(s,u,r)}});var pa=(0,h.op)({cosineDistance_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:fa.I.SUM_BY_NONZERO_WEIGHTS,i=(0,l._1)(e,"labels","cosineDistance"),o=(0,l._1)(t,"predictions","cosineDistance"),u=null;null!=r&&(u=(0,l._1)(r,"weights","cosineDistance")),(0,f.k5)(i.shape,o.shape,"Error in cosineDistance: ");var s=(0,cn.i)(1),c=(0,gt.l)(s,(0,zn.S)((0,M.d)(i,o),n,!0));return ha(c,u,a)}});var va=(0,h.op)({hingeLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fa.I.SUM_BY_NONZERO_WEIGHTS,a=(0,l._1)(e,"labels","hingeLoss"),i=(0,l._1)(t,"predictions","hingeLoss"),o=null;null!=n&&(o=(0,l._1)(n,"weights","hingeLoss")),(0,f.k5)(a.shape,i.shape,"Error in hingeLoss: ");var u=(0,cn.i)(1);a=(0,gt.l)((0,M.d)((0,cn.i)(2),a),u);var s=(0,Jt.U)((0,gt.l)(u,(0,M.d)(a,i)));return ha(s,o,r)}});var ga=(0,h.op)({huberLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:fa.I.SUM_BY_NONZERO_WEIGHTS,o=(0,l._1)(e,"labels","huberLoss"),s=(0,l._1)(t,"predictions","huberLoss"),c=null;null!=n&&(c=(0,l._1)(n,"weights","huberLoss")),(0,f.k5)(o.shape,s.shape,"Error in huberLoss: ");var h=(0,cn.i)(r),d=(0,a.W)((0,gt.l)(s,o)),p=(0,ft.L)(d,h),v=(0,gt.l)(d,p),g=(0,u.I)((0,M.d)((0,cn.i)(.5),(0,vt.h)(p)),(0,M.d)(h,v));return ha(g,c,i)}});var ma=(0,h.op)({logLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:fa.I.SUM_BY_NONZERO_WEIGHTS,i=(0,l._1)(e,"labels","logLoss"),o=(0,l._1)(t,"predictions","logLoss"),s=null;null!=n&&(s=(0,l._1)(n,"weights","logLoss")),(0,f.k5)(i.shape,o.shape,"Error in logLoss: ");var c=(0,cn.i)(1),h=(0,cn.i)(r),d=(0,xt.W)((0,M.d)(i,(0,We.c)((0,u.I)(o,h)))),p=(0,M.d)((0,gt.l)(c,i),(0,We.c)((0,u.I)((0,gt.l)(c,o),h))),v=(0,gt.l)(d,p);return ha(v,s,a)}});var ya=(0,h.op)({meanSquaredError_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fa.I.SUM_BY_NONZERO_WEIGHTS,a=(0,l._1)(e,"labels","meanSquaredError"),i=(0,l._1)(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=(0,l._1)(n,"weights","meanSquaredError")),(0,f.k5)(a.shape,i.shape,"Error in meanSquaredError: ");var u=(0,In.$)(a,i);return ha(u,o,r)}});function ba(e,t){var n=(0,l._1)(e,"labels","sigmoidCrossEntropyWithLogits"),r=(0,l._1)(t,"logits","sigmoidCrossEntropyWithLogits");(0,f.k5)(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var i=(0,Jt.U)(r),o=(0,M.d)(r,n),s=(0,Ve.K)((0,_e.Q)((0,xt.W)((0,a.W)(r))));return(0,u.I)((0,gt.l)(i,o),s)}var xa=(0,h.op)({sigmoidCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:fa.I.SUM_BY_NONZERO_WEIGHTS,i=(0,l._1)(e,"multiClassLabels","sigmoidCrossEntropy"),o=(0,l._1)(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=(0,l._1)(n,"weights","sigmoidCrossEntropy")),(0,f.k5)(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var c=(0,cn.i)(r),h=(0,cn.i)(1),d=(0,cn.i)(.5);i=(0,u.I)((0,M.d)(i,(0,gt.l)(h,c)),(0,M.d)(d,c))}var p=ba(i,o);return ha(p,s,a)}});function wa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));var r=(0,Cr.cb)((function(e,t,r){var a=(0,Ge.l)(t,[n],!0),i=(0,gt.l)((0,S.p)(t,"float32"),a);r([e,i]);var o=(0,xt.W)((0,M.d)(i,e));return{value:(0,zn.S)(o,[n]),gradFunc:function(e,t){var r=(0,Sr.Z)(t,2),a=r[0],i=r[1],o=(0,pt.rv)(e.shape,[n]);return[(0,M.d)((0,E.X)(e,o),(0,gt.l)((0,S.p)(a,"float32"),(0,_e.Q)(i))),(0,M.d)((0,E.X)(e,o),(0,gt.l)((0,_e.Q)(i),(0,S.p)(a,"float32")))]}}}));return r(e,t)}var ka=(0,h.op)({softmaxCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:fa.I.SUM_BY_NONZERO_WEIGHTS,i=(0,l._1)(e,"onehotLabels","softmaxCrossEntropy"),o=(0,l._1)(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=(0,l._1)(n,"weights","softmaxCrossEntropy")),(0,f.k5)(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var c=(0,cn.i)(r),h=(0,cn.i)(1),d=(0,cn.i)(i.shape[1]);i=(0,u.I)((0,M.d)(i,(0,gt.l)(h,c)),(0,pe.h)(c,d))}var p=wa(i,o);return ha(p,s,a)}});var _a=(0,h.op)({sparseFillEmptyRows_:function(e,t,n,r){var a=(0,l._1)(e,"indices","sparseFillEmptyRows","int32"),i=(0,l._1)(t,"values","sparseFillEmptyRows"),o=(0,l._1)(n,"denseShape","sparseFillEmptyRows","int32"),u=(0,l._1)(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==i.rank)throw new Error("Values should be Tensor1D but received shape ".concat(i.shape));if(1!==o.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(o.shape));if(0!==u.rank)throw new Error("Default value should be a scalar but received shape ".concat(u.shape));var f={indices:a,values:i,denseShape:o,defaultValue:u},h=s.BV.runKernel(c.O3z,f);return{outputIndices:h[0],outputValues:h[1],emptyRowIndicator:h[2],reverseIndexMap:h[3]}}});var Sa=(0,h.op)({sparseReshape_:function(e,t,n){var r=(0,l._1)(e,"inputIndices","sparseReshape","int32"),a=(0,l._1)(t,"inputShape","sparseReshape","int32"),i=(0,l._1)(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(1!==i.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(i.shape));var o={inputIndices:r,inputShape:a,newShape:i},u=s.BV.runKernel(c.nhH,o);return{outputIndices:u[0],outputShape:u[1]}}});var Ca=(0,h.op)({sparseSegmentMean_:function(e,t,n){var r=(0,l._1)(e,"data","sparseSegmentMean"),a=(0,l._1)(t,"indices","sparseSegmentMean","int32"),i=(0,l._1)(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return s.BV.runKernel(c.w3H,o)}});var Ea=(0,h.op)({sparseSegmentSum_:function(e,t,n){var r=(0,l._1)(e,"data","sparseSegmentSum"),a=(0,l._1)(t,"indices","sparseSegmentSum","int32"),i=(0,l._1)(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return s.BV.runKernel(c.ZjV,o)}});var Aa=(0,h.op)({stringNGrams_:function(e,t,n,r,a,i,o,u){var f=(0,l._1)(e,"data","stringNGrams","string");if("string"!==f.dtype)throw new Error("Data must be of datatype string");if(1!==f.shape.length)throw new Error("Data must be a vector, saw: ".concat(f.shape));var h=(0,l._1)(t,"dataSplits","stringNGrams");if("int32"!==h.dtype)throw new Error("Data splits must be of datatype int32");var d={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:o,preserveShortSequences:u},p={data:f,dataSplits:h},v=s.BV.runKernel(c._JP,p,d);return{nGrams:v[0],nGramsSplits:v[1]}}});var Na=(0,h.op)({stringSplit_:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=(0,l._1)(e,"input","stringSplit","string"),a=(0,l._1)(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));var i={skipEmpty:n},o={input:r,delimiter:a},u=s.BV.runKernel(c.s1s,o,i);return{indices:u[0],values:u[1],shape:u[2]}}});var Ta=(0,h.op)({stringToHashBucketFast_:function(e,t){var n=(0,l._1)(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");var a={input:n};return s.BV.runKernel(c.XkS,a,r)}});var Ma=(0,h.op)({staticRegexReplace_:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=(0,l._1)(e,"input","staticRegexReplace","string"),i={pattern:t,rewrite:n,replaceGlobal:r};return s.BV.runKernel(c.e0R,{x:a},i)}}),Da={fft:An.k,ifft:Nn.S,rfft:Mn.Q,irfft:Tn.w},Fa={hammingWindow:Rr,hannWindow:Zr,frame:Br,stft:zr},Ia={flipLeftRight:Pr,grayscaleToRGB:jr,resizeNearestNeighbor:na.j,resizeBilinear:ta.I,rgbToGrayscale:Ur,rotateWithOffset:Wr,cropAndResize:Lr,nonMaxSuppression:qr,nonMaxSuppressionAsync:Xr,nonMaxSuppressionWithScore:Yr,nonMaxSuppressionWithScoreAsync:$r,nonMaxSuppressionPadded:Qr,nonMaxSuppressionPaddedAsync:ea,threshold:aa,transform:ia},Oa={bandPart:oa,gramSchmidt:ua,qr:la},Ra={absoluteDifference:da,computeWeightedLoss:ha,cosineDistance:pa,hingeLoss:va,huberLoss:ga,logLoss:ma,meanSquaredError:ya,sigmoidCrossEntropy:xa,softmaxCrossEntropy:ka},Za={sparseFillEmptyRows:_a,sparseReshape:Sa,sparseSegmentMean:Ca,sparseSegmentSum:Ea},Ba={stringNGrams:Aa,stringSplit:Na,stringToHashBucketFast:Ta,staticRegexReplace:Ma}},1970:function(e,t,n){"use strict";n.d(t,{v:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=(0,i._1)(e,"x","pad");if(0===o.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var u={paddings:t,constantValue:n},s={x:o};return r.BV.runKernel(a.lyA,s,u)}})},7226:function(e,t,n){"use strict";n.d(t,{d:function(){return d}});var r=n(678),a=n(8354),i=n(6147),o=n(9204),u=n(6994),s=n(9151),c=n(5777),l=n(8640),f=n(5561),h=n(5696);var d=(0,l.op)({pool_:function(e,t,n,l,d,p,v){null==d&&(d=[1,1]),null==p&&(p=1),0===l&&(l="valid");var g=(0,a._1)(e,"x","maxPool"),m=g,y=!1;3===g.rank&&(y=!0,m=(0,f.X)(g,[1,g.shape[0],g.shape[1],g.shape[2]])),i.hu(s.jT(p,d),(function(){return"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(p," and dilations '").concat(d,"'")}));var b,x=s.Xw(m.shape,t,p,d,l),w=[x.dilationHeight,x.dilationWidth];b="same"===l?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),a=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],a[t]]}))}([x.filterHeight,x.filterWidth],w):[[0,0],[0,0]];var k=1===w[0]&&1===w[1],_=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),i=e.concat(r,a),o=t.map((function(e,t){return(e-i[t]%e)%e})),u=a.map((function(e,t){return e+o[t]})),s=t.map((function(e,t){return[r[t],u[t]]})),c=t.map((function(e,t){return[0,o[t]]}));return[s,c]}([x.inHeight,x.inWidth],w,b),S=(0,r.Z)(_,2),C=S[0],E=S[1],A=k?l:"valid",N=k?m:(0,h.f)(m,w,C),T=("avg"===n?function(){return(0,o.w)(N,t,p,A,v)}:function(){return(0,c._)(N,t,p,A,v)})(),M=k?T:(0,u.E)(T,w,E);return y?(0,f.X)(M,[M.shape[1],M.shape[2],M.shape[3]]):M}})},4334:function(e,t,n){"use strict";n.d(t,{s:function(){return s}});var r=n(678),a=n(318),i=n(2145),o=n(9064),u=n(8354);var s=(0,n(8640).op)({pow_:function(e,t){var n=(0,u._1)(e,"base","pow"),s=(0,u._1)(t,"exp","pow"),c=(0,o.makeTypesMatch)(n,s),l=(0,r.Z)(c,2),f={a:n=l[0],b:s=l[1]};return a.BV.runKernel(i.pe_,f)}})},6859:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({prelu_:function(e,t){var n={x:(0,i._1)(e,"x","prelu"),alpha:(0,i._1)(t,"alpha","prelu")};return r.BV.runKernel(a.o0g,n)}})},4600:function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}n.d(t,{S:function(){return r}})},7722:function(e,t,n){"use strict";n.d(t,{W:function(){return u}});var r=n(318),a=n(2145),i=n(8354),o=n(9118);var u=(0,n(8640).op)({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=(0,i._1)(e,"x","prod");"bool"===u.dtype&&(u=(0,o.p)(u,"int32"));var s={x:u},c={axis:t,keepDims:n};return r.BV.runKernel(a.DlI,s,c)}})},6972:function(e,t,n){"use strict";n.d(t,{k:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({real_:function(e){var t={input:(0,i._1)(e,"input","real")};return r.BV.runKernel(a.xJR,t)}})},2209:function(e,t,n){"use strict";n.d(t,{M:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({reciprocal_:function(e){var t={x:(0,i._1)(e,"x","reciprocal")};return r.BV.runKernel(a.$HU,t)}})},7539:function(e,t,n){"use strict";n.d(t,{U:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({relu_:function(e){var t={x:(0,i._1)(e,"x","relu")};return r.BV.runKernel(a.qkr,t)}})},5900:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({relu6_:function(e){var t={x:(0,i._1)(e,"x","relu6")};return r.BV.runKernel(a.SbG,t)}})},5561:function(e,t,n){"use strict";n.d(t,{X:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({reshape_:function(e,t){var n={x:(0,i._1)(e,"x","reshape","string_or_numeric")},o={shape:t};return r.BV.runKernel(a.HZH,n,o)}})},4933:function(e,t,n){"use strict";n.d(t,{G:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({reverse_:function(e,t){var n={x:(0,i._1)(e,"x","reverse")},o={dims:t};return r.BV.runKernel(a.mKl,n,o)}})},766:function(e,t,n){"use strict";n.d(t,{N:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({round_:function(e){var t={x:(0,i._1)(e,"x","round")};return r.BV.runKernel(a.e07,t)}})},5115:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({rsqrt_:function(e){var t={x:(0,i._1)(e,"x","rsqrt","float32")};return r.BV.runKernel(a.bV0,t)}})},7067:function(e,t,n){"use strict";n.d(t,{i:function(){return i}});var r=n(115),a=n(7960);function i(e,t){if(((0,r.isTypedArray)(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&(0,r.isTypedArray)(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return(0,a.H)(e,[],[],t)}},8604:function(e,t,n){"use strict";n.r(t),n.d(t,{calculateShapes:function(){return u},validateInput:function(){return o},validateUpdateShape:function(){return i}});var r=n(1303),a=n(6147);function i(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(i+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != ".concat(a+e.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape[".concat(o,"] (").concat(n.shape[o],") != indices.shape[").concat(o,"] (").concat(t.shape[o],")."));for(var u=0;u<n.rank-a;++u)if(n.shape[u+a]!==e[u+r])throw new Error(i+" updates.shape[".concat(u+a,"] (").concat(n.shape[u+a],") != shape[").concat(u+a,"] (").concat(e[u+a],")"))}function o(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}i(n,t,e)}function u(e,t,n){for(var i=t.shape.length,o=i>1?t.shape[i-1]:1,u=n.length,s=1,c=o;c<u;++c)s*=n[c];var l=o<1?1:o;return{sliceRank:o,numUpdates:(0,a.NA)(t.shape)/l,sliceSize:s,strides:[].concat((0,r.Z)((0,a.e3)(n.slice(0,o))),[1]),outputSize:(0,a.NA)(n)}}},413:function(e,t,n){"use strict";n.d(t,{U:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({selu_:function(e){var t={x:(0,i._1)(e,"x","selu")};return r.BV.runKernel(a.oFR,t)}})},349:function(e,t,n){"use strict";n.d(t,{$:function(){return a},y:function(){return r}});var r=1.7580993408473768,a=1.0507009873554805},119:function(e,t,n){"use strict";n.d(t,{U:function(){return c}});var r=n(8354),a=n(6147),i=n(3457),o=n(1147),u=n(8640),s=n(5561);var c=(0,u.op)({separableConv2d_:function(e,t,n,u,c){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",h=(0,r._1)(e,"x","separableConv2d"),d=(0,r._1)(t,"depthwiseFilter","separableConv2d"),p=(0,r._1)(n,"pointwiseFilter","separableConv2d"),v=h,g=!1;if(3===h.rank&&(g=!0,v=(0,s.X)(h,[1,h.shape[0],h.shape[1],h.shape[2]])),"NCHW"===f)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");a.hu(4===v.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(v.rank,".")})),a.hu(4===d.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(d.rank,".")})),a.hu(4===p.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(d.rank,".")})),a.hu(1===p.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(p.shape[0],".")})),a.hu(1===p.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(p.shape[1],".")}));var m=d.shape[2],y=d.shape[3];a.hu(p.shape[2]===m*y,(function(){return"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(m*y,", ")+"but got ".concat(p.shape[2],".")}));var b=(0,o.B)(v,d,u,c,f,l),x=1,w=(0,i.T)(b,p,x,"valid",f);return g?(0,s.X)(w,[w.shape[1],w.shape[2],w.shape[3]]):w}})},7643:function(e,t,n){"use strict";n.d(t,{X:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({sigmoid_:function(e){var t={x:(0,i._1)(e,"x","sigmoid","float32")};return r.BV.runKernel(a.a5O,t)}})},2070:function(e,t,n){"use strict";n.d(t,{X:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({sign_:function(e){var t={x:(0,i._1)(e,"x","sign")};return r.BV.runKernel(a.i5y,t)}})},7254:function(e,t,n){"use strict";n.d(t,{O:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({sin_:function(e){var t={x:(0,i._1)(e,"x","sin","float32")};return r.BV.runKernel(a.RQH,t)}})},7657:function(e,t,n){"use strict";n.d(t,{R:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({sinh_:function(e){var t={x:(0,i._1)(e,"x","sinh")};return r.BV.runKernel(a.wYB,t)}})},9238:function(e,t,n){"use strict";n.d(t,{t:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({slice_:function(e,t,n){var o=(0,i._1)(e,"x","slice","string_or_numeric");if(0===o.rank)throw new Error("Slicing scalar is not possible");var u={x:o},s={begin:t,size:n};return r.BV.runKernel(a.p2w,u,s)}})},2875:function(e,t,n){"use strict";n.r(t),n.d(t,{assertParamsValid:function(){return i},computeFlatOffset:function(){return y},computeOutShape:function(){return u},getNormalizedAxes:function(){return f},isSliceContinous:function(){return m},maskToAxes:function(){return o},parseSliceParams:function(){return b},sliceInfo:function(){return x},startForAxis:function(){return v},startIndicesWithElidedDims:function(){return h},stopForAxis:function(){return g},stopIndicesWithElidedDims:function(){return d},stridesForAxis:function(){return p},stridesWithElidedDims:function(){return s}});var r=n(1303),a=n(6147);function i(e,t,n){var r=e.shape.length;a.hu(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,").")})),a.hu(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")}));for(var i=function(i){a.hu(t[i]+n[i]<=e.shape[i],(function(){return"Error in slice".concat(r,"D: begin[").concat(i,"] + size[").concat(i,"] ")+"(".concat(t[i]+n[i],") would overflow input.shape[").concat(i,"] (").concat(e.shape[i],")")}))},o=0;o<r;++o)i(o)}function o(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function u(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function s(e,t,n,a){for(var i=(0,r.Z)(e),o=i.length;o<a.length;o++)i.push(1);for(var u=0;u<n;u++)0===u?i[t]=1:(i.splice(t,0,1),i.pop());return i}function c(e,t,n){return n<=e?n:n-(t-1)}function l(e,t){for(var n=[],r=0;r<e;r++)n.push(t+r);return n}function f(e,t,n,r,a,i,o,u,c){var l=e.length,f=new Array(l),m=new Array(l),y=new Array(l);if(t.length&&n>0){var b=t[0],x=n+1;f=h(o,b,x,r,e),m=d(u,b,x,a,e),y=s(i,b,x,e)}else for(var w=0;w<l;w++)f[w]=v(o,r,i,e,w,c),m[w]=g(u,a,i,e,w,c),y[w]=p(i,w,c);return{begin:f,end:m,strides:y}}function h(e,t,n,a,i){for(var o=(0,r.Z)(i),u=l(n,t),s=0;s<o.length;s++)if(u.indexOf(s)>-1)o[s]=0;else{var f=c(t,n,s),h=a[f];e&1<<f&&(h=0),o[s]=h}return o}function d(e,t,n,i,o){for(var u=(0,r.Z)(o),s=l(n,t),f=0;f<u.length;f++)if(s.indexOf(f)>-1)u[f]=Number.MAX_SAFE_INTEGER;else{var h=c(t,n,f),d=i[h];e&1<<h&&(d=Number.MAX_SAFE_INTEGER),u[f]=d}for(var p=0;p<u.length;p++){var v=o[p];u[p]<0&&(u[p]+=v),u[p]=a.uZ(0,u[p],o[p])}return u}function p(e,t,n){var r=e[t];return(n&1<<t||null==r)&&(r=1),r}function v(e,t,n,r,i,o){var u=t[i],s=n[i]||1;(e&1<<i||o&1<<i||null==u)&&(u=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var c=r[i];return u<0&&(u+=c),u=a.uZ(0,u,c-1)}function g(e,t,n,r,i,o){var u=t[i],s=n[i]||1;(e&1<<i||o&1<<i||null==u)&&(u=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var c=r[i];return u<0&&(u+=c),u=s>0?a.uZ(0,u,c):a.uZ(-1,u,c-1)}function m(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function y(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function b(e,t,n){var i,o,u=e.shape.length;return(i="number"===typeof t?[t].concat((0,r.Z)(new Array(u-1).fill(0))):t.length<u?t.concat(new Array(u-t.length).fill(0)):t.slice()).forEach((function(e){a.hu(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),o=(o=null==n?new Array(u).fill(-1):"number"===typeof n?[n].concat((0,r.Z)(new Array(u-1).fill(-1))):n.length<u?n.concat(new Array(u-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(a.hu(-1===t,(function(){return"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-i[n])})),[i,o]}function x(e,t,n,r,a,i,o,u,s){var c;if(null==r?(c=new Array(t.length)).fill(1):c=r,null!=o&&0!==(o&o-1))throw new Error("Multiple ellipses in slice is not allowed.");for(var l=!1,f={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:u,shrinkAxisMask:s},h=0;h<f.dims;h++)l&&0!==(1<<h&u)&&f.numAddAxisAfterEllipsis++,1<<h&o&&(l=!0);l||(f.ellipsisMask|=1<<f.dims,f.dims++);var d={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;var n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(var r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask)for(var a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r;else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(f,d);for(var p=!0,v=!0,g=!0,m=[],y=[],b=0;b<e.length;++b){if(0===d.strides[b])throw Error("strides[".concat(b,"] must be non-zero"));var x=!!(d.shrinkAxisMask&1<<b),k=e[b];if(-1!==k){var _=[d.beginMask&1<<b,d.endMask&1<<b],S=[d.strides[b]>0?0:-1,d.strides[b]>0?k:k-1];if(x&&d.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");g=g&&1===d.strides[b];var C=!!(d.beginMask&1<<b&&d.endMask&1<<b);if(d.beginValid&&d.endValid){if(x){var E=d.begin[b]<0?k+d.begin[b]:d.begin[b];if(d.begin[b]=E,d.end[b]=d.begin[b]+1,E<0||E>=k)throw Error("slice index ".concat(d.begin[b]," of dimension ").concat(b," out of bounds."))}else d.begin[b]=w(d.begin[b],0,d.strides[b],k,_,S),d.end[b]=w(d.end[b],1,d.strides[b],k,_,S);var A=1===d.strides[b]&&0===d.begin[b]&&d.end[b]===k;p=p&&A,v=v&&(0===b&&1===d.strides[b]||A)}else p=p&&1===d.strides[b]&&C,v=v&&(0===b&&1===d.strides[b]||C);var N=void 0,T=!1;if(d.beginValid&&d.endValid?(N=d.end[b]-d.begin[b],T=!0):x?(N=1,T=!0):C&&k>=0&&(N=d.strides[b]<0?-k:k,T=!0),T){var M=void 0;M=0===N||N<0!==d.strides[b]<0?0:Math.trunc(N/d.strides[b])+(N%d.strides[b]!==0?1:0),m.push(M)}else m.push(-1)}else m.push(x?1:-1)}for(var D=0;D<d.finalShapeGatherIndices.length;++D){var F=d.finalShapeGatherIndices[D];F>=0?y.push(m[F]):-2===F&&y.push(1)}var I=y.filter((function(e,t){return-2!==d.finalShapeGatherIndices[t]}));return{finalShapeSparse:I,finalShape:y,isIdentity:p,sliceDim0:v,isSimpleSlice:g,begin:d.begin,end:d.end,strides:d.strides}}function w(e,t,n,r,a,i){if(a[t])return n>0?i[t]:i[t+1&1];var o=e<0?r+e:e;return o<i[0]?i[0]:o>i[1]?i[1]:o}},4910:function(e,t,n){"use strict";n.d(t,{X:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=(0,i._1)(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));var o={logits:n},u={dim:t};return r.BV.runKernel(a.Gcp,o,u)}})},4626:function(e,t,n){"use strict";n.d(t,{W:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({softplus_:function(e){var t={x:(0,i._1)(e,"x","softplus")};return r.BV.runKernel(a.MRv,t)}})},5696:function(e,t,n){"use strict";n.d(t,{f:function(){return u}});var r=n(318),a=n(2145),i=n(8354),o=n(6147);var u=(0,n(8640).op)({spaceToBatchND_:function(e,t,n){var u=(0,i._1)(e,"x","spaceToBatchND");o.hu(u.rank>=1+t.length,(function(){return"input rank ".concat(u.rank," should be > than [blockShape] ").concat(t.length)})),o.hu(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),o.hu(u.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e}),!0),(function(){return"input spatial dimensions ".concat(u.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())}));var s={x:u},c={blockShape:t,paddings:n};return r.BV.runKernel(a.TQc,s,c)}})},7635:function(e,t,n){"use strict";n.d(t,{k:function(){return o}});var r=n(318),a=n(2145),i=n(6147);var o=(0,n(8640).op)({fft_:function(e){(0,i.hu)("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return r.BV.runKernel(a.vwp,t)}})},530:function(e,t,n){"use strict";n.d(t,{S:function(){return o}});var r=n(318),a=n(2145),i=n(6147);var o=(0,n(8640).op)({ifft_:function(e){(0,i.hu)("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return r.BV.runKernel(a.Qg5,t)}})},774:function(e,t,n){"use strict";n.d(t,{w:function(){return p}});var r=n(9253),a=n(4836),i=n(6996),o=n(651),u=n(8640),s=n(6972),c=n(5561),l=n(4933),f=n(7067),h=n(9238),d=n(530);var p=(0,u.op)({irfft_:function(e){var t,n=e.shape[e.shape.length-1],u=e.size/n;if(n<=2){var p=(0,c.X)(e,[u,n]);t=(0,d.S)(p)}else{var v=[u,2*(n-1)],g=(0,c.X)((0,s.k)(e),[u,n]),m=(0,c.X)((0,i.a)(e),[u,n]),y=(0,l.G)((0,h.t)(g,[0,1],[u,n-2]),1),b=(0,o.d)((0,l.G)((0,h.t)(m,[0,1],[u,n-2]),1),(0,f.i)(-1)),x=(0,a.z)([g,y],1),w=(0,a.z)([m,b],1),k=(0,c.X)((0,r.P)(x,w),[v[0],v[1]]);t=(0,d.S)(k)}if(t=(0,s.k)(t),3===e.rank&&0!==e.shape[0]){var _=t,S=e.shape[0];t=(0,c.X)(t,[S,t.shape[0]/S,t.shape[1]]),_.dispose()}return t}})},4617:function(e,t,n){"use strict";n.d(t,{Q:function(){return v}});var r=n(6147),a=n(9253),i=n(4836),o=n(6996),u=n(8640),s=n(6972),c=n(5561),l=n(9238),f=n(2588),h=n(7742),d=n(7293),p=n(7635);var v=(0,u.op)({rfft_:function(e,t){(0,r.hu)("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,u=e.shape[e.shape.length-1],v=e.size/u;if(null!=t&&t<u){var g=e.shape.map((function(e){return 0})),m=e.shape.map((function(e){return e}));m[e.shape.length-1]=t,n=(0,l.t)(e,g,m),u=t}else if(null!=t&&t>u){var y=e.shape.map((function(e){return e}));y[e.shape.length-1]=t-u,n=(0,i.z)([e,(0,h.l)(y)],e.shape.length-1),u=t}else n=e;var b=(0,d.P)(n),x=(0,c.X)((0,a.P)(n,b),[v,u]),w=(0,p.k)(x),k=Math.floor(u/2)+1,_=(0,s.k)(w),S=(0,o.a)(w),C=(0,f.V)(_,[k,u-k],_.shape.length-1),E=(0,f.V)(S,[k,u-k],S.shape.length-1),A=n.shape.slice();return A[n.shape.length-1]=k,(0,c.X)((0,a.P)(C[0],E[0]),A)}})},2588:function(e,t,n){"use strict";n.d(t,{V:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=(0,i._1)(e,"x","split"),u={x:o},s={numOrSizeSplits:t,axis:n};return r.BV.runKernel(a.L8s,u,s)}})},6902:function(e,t,n){"use strict";n.d(t,{_:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({sqrt_:function(e){var t={x:(0,i._1)(e,"x","sqrt","float32")};return r.BV.runKernel(a.FKq,t)}})},7391:function(e,t,n){"use strict";n.d(t,{h:function(){return i}});var r=n(318),a=n(8354);var i=(0,n(8640).op)({square_:function(e){var t=(0,a._1)(e,"x","square");return r.BV.runKernel("Square",{x:t},{})}})},7993:function(e,t,n){"use strict";n.d(t,{$:function(){return c}});var r=n(678),a=n(318),i=n(2145),o=n(9064),u=n(8354),s=n(5774);var c=(0,n(8640).op)({squaredDifference_:function(e,t){var n=(0,u._1)(e,"a","squaredDifference"),c=(0,u._1)(t,"b","squaredDifference"),l=(0,o.makeTypesMatch)(n,c),f=(0,r.Z)(l,2);n=f[0],c=f[1],(0,s.assertAndGetBroadcastShape)(n.shape,c.shape);var h={a:n,b:c};return a.BV.runKernel(i._tC,h,{})}})},3931:function(e,t,n){"use strict";n.d(t,{L:function(){return u}});var r=n(8354),a=n(6147),i=n(8640),o=n(5561);var u=(0,i.op)({squeeze_:function(e,t){var n=(0,r._1)(e,"x","squeeze","string_or_numeric");return(0,o.X)(n,(0,a.bp)(n.shape,t).newShape)}})},8306:function(e,t,n){"use strict";n.d(t,{k:function(){return u}});var r=n(318),a=n(2145),i=n(8354),o=n(6147);var u=(0,n(8640).op)({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,i.sI)(e,"tensors","stack","string_or_numeric");o.hu(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&o.hu(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var u=n,s={axis:t};return r.BV.runKernel(a.QiL,u,s)}})},4031:function(e,t,n){"use strict";n.d(t,{N:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,i._1)(e,"x","step"),o={x:n},u={alpha:t};return r.BV.runKernel(a.h8e,o,u)}})},9017:function(e,t,n){"use strict";n.d(t,{N:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({stridedSlice_:function(e,t,n,o){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,h=(0,i._1)(e,"x","stridedSlice","string_or_numeric"),d={x:h},p={begin:t,end:n,strides:o,beginMask:u,endMask:s,ellipsisMask:c,newAxisMask:l,shrinkAxisMask:f};return r.BV.runKernel(a.jQk,d,p)}})},4774:function(e,t,n){"use strict";n.d(t,{l:function(){return s}});var r=n(678),a=n(318),i=n(2145),o=n(9064),u=n(8354);var s=(0,n(8640).op)({sub_:function(e,t){var n=(0,u._1)(e,"a","sub"),s=(0,u._1)(t,"b","sub"),c=(0,o.makeTypesMatch)(n,s),l=(0,r.Z)(c,2),f={a:n=l[0],b:s=l[1]};return a.BV.runKernel(i.Tr8,f)}})},227:function(e,t,n){"use strict";n.d(t,{S:function(){return u}});var r=n(318),a=n(2145),i=n(8354),o=n(9118);var u=(0,n(8640).op)({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=(0,i._1)(e,"x","sum");"bool"===u.dtype&&(u=(0,o.p)(u,"int32"));var s={x:u},c={axis:t,keepDims:n};return r.BV.runKernel(a.GBy,s,c)}})},6999:function(e,t,n){"use strict";n.d(t,{O:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({tan_:function(e){var t={x:(0,i._1)(e,"x","tan","float32")};return r.BV.runKernel(a.sEM,t)}})},1744:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({tanh_:function(e){var t={x:(0,i._1)(e,"x","tanh","float32")};return r.BV.runKernel(a.MIZ,t)}})},2442:function(e,t,n){"use strict";n.d(t,{X:function(){return i}});var r=n(8354),a=n(7960);function i(e,t,n){var i=(0,r.C)(e,n);return(0,a.H)(e,t,i,n)}},3123:function(e,t,n){"use strict";n.d(t,{w:function(){return o}});var r=n(8354),a=n(6147),i=n(7960);function o(e,t,n){if((0,a.Cq)(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var o=(0,r.C)(e,n);if(3!==o.length&&1!==o.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===o.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return(0,i.H)(e,t,o,n)}},7960:function(e,t,n){"use strict";n.d(t,{H:function(){return u}});var r=n(318),a=n(3525),i=n(6147),o=n(115);function u(e,t,n,u){if(null==u)u=(0,i.D2)(e);else if("complex64"===u)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if((0,a.$F)(e)||(0,a.Oq)(e)){if("float32"!==u&&"int32"!==u)throw new Error("Creating tensor from GPU data only supports "+"'float32'|'int32' dtype, while the dtype is ".concat(u,"."));return r.BV.backend.createTensorFromGPUData(e,t||n,u)}if(!(0,o.isTypedArray)(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){(0,i.Mu)(t);var s=(0,i.NA)(t),c=(0,i.NA)(n);(0,i.hu)(s===c,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(s," values but has ").concat(c)}));for(var l=0;l<n.length;++l){var f=n[l],h=l!==n.length-1||f!==(0,i.NA)(t.slice(l));(0,i.hu)(n[l]===t[l]||!h,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")}))}}return(0,o.isTypedArray)(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==u?(0,o.toTypedArray)(e,u):(0,o.flatten)(e,[],!0),r.BV.makeTensor(e,t,u)}},2343:function(e,t,n){"use strict";n.d(t,{G:function(){return u}});var r=n(318),a=n(2145),i=n(8354),o=n(6147);var u=(0,n(8640).op)({tile_:function(e,t){var n=(0,i._1)(e,"x","tile","string_or_numeric");o.hu(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")}));var u={x:n},s={reps:t};return r.BV.runKernel(a.n9L,u,s)}})},9085:function(e,t,n){"use strict";n.d(t,{h:function(){return u}});var r=n(678),a=n(318),i=n(2145),o=n(8354);var u=(0,n(8640).op)({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],u=(0,o._1)(e,"x","topk");if(0===u.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var s=u.shape[u.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>s)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(s,") ")+"but got ".concat(t));var c={x:u},l={k:t,sorted:n},f=a.BV.runKernel(i.cWu,c,l),h=(0,r.Z)(f,2),d=h[0],p=h[1];return{values:d,indices:p}}})},1240:function(e,t,n){"use strict";n.d(t,{p:function(){return d}});var r=n(318),a=n(5875),i=n(2145),o=n(8354),u=n(6147),s=n(9253),c=n(6996),l=n(4362),f=n(8640),h=n(6972);var d=(0,f.op)({transpose_:function(e,t,n){var f=(0,o._1)(e,"x","transpose");if(null==t&&(t=f.shape.map((function(e,t){return t})).reverse()),u.hu(f.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(f.rank," ")+"must match length of perm ".concat(t,".")})),t.forEach((function(e){u.hu(e>=0&&e<f.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(f.rank-1)+" but got ".concat(t)}))})),f.rank<=1)return f.clone();var d={x:f},p={perm:t};return"complex64"===f.dtype?(0,a.lu)((function(){var e=(0,h.k)(f),t=(0,c.a)(f);return e=r.BV.runKernel(i.G3Y,{x:e},p),t=r.BV.runKernel(i.G3Y,{x:t},p),n&&(t=(0,l.W)(t)),(0,s.P)(e,t)})):r.BV.runKernel(i.G3Y,d,p)}})},4860:function(e,t,n){"use strict";n.d(t,{T:function(){return s}});var r=n(678),a=n(318),i=n(2145),o=n(8354),u=n(6147);var s=(0,n(8640).op)({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,o._1)(e,"x","unique","string_or_numeric");(0,u.hu)(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var s={x:n},c={axis:t},l=a.BV.runKernel(i.kpP,s,c),f=(0,r.Z)(l,2),h=f[0],d=f[1];return{values:h,indices:d}}})},6918:function(e,t,n){"use strict";n.d(t,{p:function(){return u}});var r=n(318),a=n(2145),i=n(8354),o=n(6147);var u=(0,n(8640).op)({unsortedSegmentSum_:function(e,t,n){var u=(0,i._1)(e,"x","unsortedSegmentSum"),s=(0,i._1)(t,"segmentIds","unsortedSegmentSum","int32");(0,o.hu)((0,o.GN)(n),(function(){return"numSegments must be of dtype int"}));var c={x:u,segmentIds:s},l={numSegments:n};return r.BV.runKernel(a.Qvg,c,l)}})},4566:function(e,t,n){"use strict";n.d(t,{H:function(){return u}});var r=n(318),a=n(2145),i=n(8354),o=n(6147);var u=(0,n(8640).op)({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,i._1)(e,"x","unstack","string_or_numeric");o.hu(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var u={value:n},s={axis:t};return r.BV.runKernel(a.ToN,u,s)}})},329:function(e,t,n){"use strict";n.d(t,{a:function(){return s}});var r=n(318),a=n(2145),i=n(8354),o=n(9742),u=n(5774);var s=(0,n(8640).op)({where_:function(e,t,n){var s=(0,i._1)(t,"a","where"),c=(0,i._1)(n,"b","where"),l=(0,i._1)(e,"condition","where","bool"),f=(0,u.assertAndGetBroadcastShape)((0,u.assertAndGetBroadcastShape)(l.shape,s.shape),c.shape),h={condition:(0,o.U)(l,f),t:(0,o.U)(s,f),e:(0,o.U)(c,f)};return r.BV.runKernel(a.PhF,h)}})},7742:function(e,t,n){"use strict";n.d(t,{l:function(){return o}});var r=n(318),a=n(6147),i=n(9253);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if((0,a.Mu)(e),"complex64"===t){var n=o(e,"float32"),u=o(e,"float32");return(0,i.P)(n,u)}var s=(0,a.wT)((0,a.NA)(e),t);return r.BV.makeTensor(s,e,t)}},7293:function(e,t,n){"use strict";n.d(t,{P:function(){return o}});var r=n(318),a=n(2145),i=n(8354);var o=(0,n(8640).op)({zerosLike_:function(e){var t={x:(0,i._1)(e,"x","zerosLike")};return r.BV.runKernel(a.RuY,t)}})},1539:function(e,t,n){"use strict";function r(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}n.d(t,{j:function(){return r}})},4672:function(e,t,n){"use strict";n.r(t);var r=n(7613),a=n(4376);(0,a.t3)().prototype.abs=function(){return this.throwIfDisposed(),(0,r.W)(this)};var i=n(1719);(0,a.t3)().prototype.acos=function(){return this.throwIfDisposed(),(0,i.K)(this)};var o=n(4502);(0,a.t3)().prototype.acosh=function(){return this.throwIfDisposed(),(0,o._)(this)};var u=n(3312);(0,a.t3)().prototype.add=function(e){return this.throwIfDisposed(),(0,u.I)(this,e)};var s=n(4108);(0,a.t3)().prototype.all=function(e,t){return this.throwIfDisposed(),(0,s.$)(this,e,t)};var c=n(8543);(0,a.t3)().prototype.any=function(e,t){return this.throwIfDisposed(),(0,c.Y)(this,e,t)};var l=n(9995);(0,a.t3)().prototype.argMax=function(e){return this.throwIfDisposed(),(0,l.N)(this,e)};var f=n(5157);(0,a.t3)().prototype.argMin=function(e){return this.throwIfDisposed(),(0,f.v)(this,e)};var h=n(5561),d=n(6147);(0,a.t3)().prototype.asScalar=function(){return this.throwIfDisposed(),(0,d.hu)(1===this.size,(function(){return"The array must have only 1 element."})),(0,h.X)(this,[])};var p=n(9118);(0,a.t3)().prototype.asType=function(e){return this.throwIfDisposed(),(0,p.p)(this,e)},(0,a.t3)().prototype.as1D=function(){return this.throwIfDisposed(),(0,h.X)(this,[this.size])},(0,a.t3)().prototype.as2D=function(e,t){return this.throwIfDisposed(),(0,h.X)(this,[e,t])},(0,a.t3)().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),(0,h.X)(this,[e,t,n])},(0,a.t3)().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),(0,h.X)(this,[e,t,n,r])},(0,a.t3)().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),(0,h.X)(this,[e,t,n,r,a])};var v=n(3053);(0,a.t3)().prototype.asin=function(){return this.throwIfDisposed(),(0,v.Z)(this)};var g=n(54);(0,a.t3)().prototype.asinh=function(){return this.throwIfDisposed(),(0,g.V)(this)};var m=n(4778);(0,a.t3)().prototype.atan=function(){return this.throwIfDisposed(),(0,m.z)(this)};var y=n(2227);(0,a.t3)().prototype.atan2=function(e){return this.throwIfDisposed(),(0,y.f)(this,e)};var b=n(7897);(0,a.t3)().prototype.atanh=function(){return this.throwIfDisposed(),(0,b.C)(this)};var x=n(9204);(0,a.t3)().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),(0,x.w)(this,e,t,n,r)};var w=n(6994);(0,a.t3)().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),(0,w.E)(this,e,t)};var k=n(3700);(0,a.t3)().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),(0,k.t)(this,e,t,n,r,a)};var _=n(9742);(0,a.t3)().prototype.broadcastTo=function(e){return this.throwIfDisposed(),(0,_.U)(this,e)},(0,a.t3)().prototype.cast=function(e){return this.throwIfDisposed(),(0,p.p)(this,e)};var S=n(1396);(0,a.t3)().prototype.ceil=function(){return this.throwIfDisposed(),(0,S.m)(this)};var C=n(9836);(0,a.t3)().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),(0,C.i)(this,e,t)};var E=n(1303),A=n(4836);(0,a.t3)().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof a.es&&(e=[e]),(0,A.z)([this].concat((0,E.Z)(e)),t)};var N=n(4918);(0,a.t3)().prototype.conv1d=function(e,t,n,r,a,i){return this.throwIfDisposed(),(0,N.P)(this,e,t,n,r,a,i)};var T=n(1732);(0,a.t3)().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),(0,T.b)(this,e,t,n,r,a)};var M=n(3457);(0,a.t3)().prototype.conv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),(0,M.T)(this,e,t,n,r,a,i)};var D=n(1227);(0,a.t3)().prototype.cos=function(){return this.throwIfDisposed(),(0,D.m)(this)};var F=n(6679);(0,a.t3)().prototype.cosh=function(){return this.throwIfDisposed(),(0,F.f)(this)};var I=n(9457);(0,a.t3)().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),(0,I.$)(this,e,t,n)};var O=n(8862);(0,a.t3)().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),(0,O.z)(this,e,t,n)};var R=n(1878);(0,a.t3)().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),(0,R.n)(this,e,t)};var Z=n(1147);(0,a.t3)().prototype.depthwiseConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),(0,Z.B)(this,e,t,n,r,a,i)};var B=n(7580);(0,a.t3)().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),(0,B.W)(this,e,t,n,r,a)};var z=n(5923);(0,a.t3)().prototype.divNoNan=function(e){return this.throwIfDisposed(),(0,z.N)(this,e)};var L=n(5750);(0,a.t3)().prototype.div=function(e){return this.throwIfDisposed(),(0,L.h)(this,e)};var P=n(5043);(0,a.t3)().prototype.dot=function(e){return this.throwIfDisposed(),(0,P.A)(this,e)};var j=n(2353);(0,a.t3)().prototype.elu=function(){return this.throwIfDisposed(),(0,j.p)(this)};var U=n(3254);(0,a.t3)().prototype.equal=function(e){return this.throwIfDisposed(),(0,U.D)(this,e)};var W=n(3891);(0,a.t3)().prototype.erf=function(){return this.throwIfDisposed(),(0,W.q)(this)};var V=n(3313);(0,a.t3)().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),(0,V.d)(this,e,t)};var q=n(411);(0,a.t3)().prototype.exp=function(){return this.throwIfDisposed(),(0,q.Q)(this)};var H=n(2975);(0,a.t3)().prototype.expandDims=function(e){return this.throwIfDisposed(),(0,H.d)(this,e)};var G=n(5682);(0,a.t3)().prototype.expm1=function(){return this.throwIfDisposed(),(0,G.t)(this)};var X=n(7635);(0,a.t3)().prototype.fft=function(){return this.throwIfDisposed(),(0,X.k)(this)},(0,a.t3)().prototype.flatten=function(){return this.throwIfDisposed(),(0,h.X)(this,[this.size])};var Y=n(2628);(0,a.t3)().prototype.floor=function(){return this.throwIfDisposed(),(0,Y.G)(this)};var K=n(7145);(0,a.t3)().prototype.floorDiv=function(e){return this.throwIfDisposed(),(0,K.q)(this,e)};var $=n(9498);(0,a.t3)().prototype.gather=function(e,t,n){return this.throwIfDisposed(),(0,$.I)(this,e,t,n)};var Q=n(8327);(0,a.t3)().prototype.greaterEqual=function(e){return this.throwIfDisposed(),(0,Q.b)(this,e)};var J=n(5014);(0,a.t3)().prototype.greater=function(e){return this.throwIfDisposed(),(0,J.p)(this,e)};var ee=n(530);(0,a.t3)().prototype.ifft=function(){return this.throwIfDisposed(),(0,ee.S)(this)};var te=n(774);(0,a.t3)().prototype.irfft=function(){return this.throwIfDisposed(),(0,te.w)(this)};var ne=n(300);(0,a.t3)().prototype.isFinite=function(){return this.throwIfDisposed(),(0,ne.x)(this)};var re=n(4652);(0,a.t3)().prototype.isInf=function(){return this.throwIfDisposed(),(0,re.U)(this)};var ae=n(7005);(0,a.t3)().prototype.isNaN=function(){return this.throwIfDisposed(),(0,ae.i)(this)};var ie=n(4419);(0,a.t3)().prototype.leakyRelu=function(e){return this.throwIfDisposed(),(0,ie.h)(this,e)};var oe=n(2642);(0,a.t3)().prototype.lessEqual=function(e){return this.throwIfDisposed(),(0,oe.z)(this,e)};var ue=n(4920);(0,a.t3)().prototype.less=function(e){return this.throwIfDisposed(),(0,ue.d)(this,e)};var se=n(936);(0,a.t3)().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),(0,se.G)(this,e,t,n,r)};var ce=n(5113);(0,a.t3)().prototype.logSigmoid=function(){return this.throwIfDisposed(),(0,ce.e)(this)};var le=n(4561);(0,a.t3)().prototype.logSoftmax=function(e){return this.throwIfDisposed(),(0,le.C)(this,e)};var fe=n(5530);(0,a.t3)().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),(0,fe.l)(this,e,t)};var he=n(378);(0,a.t3)().prototype.log=function(){return this.throwIfDisposed(),(0,he.c)(this)};var de=n(5341);(0,a.t3)().prototype.log1p=function(){return this.throwIfDisposed(),(0,de.K)(this)};var pe=n(2177);(0,a.t3)().prototype.logicalAnd=function(e){return this.throwIfDisposed(),(0,pe.H)(this,e)};var ve=n(875);(0,a.t3)().prototype.logicalNot=function(){return this.throwIfDisposed(),(0,ve.h)(this)};var ge=n(5117);(0,a.t3)().prototype.logicalOr=function(e){return this.throwIfDisposed(),(0,ge.K)(this,e)};var me=n(1712);(0,a.t3)().prototype.logicalXor=function(e){return this.throwIfDisposed(),(0,me.e)(this,e)};var ye=n(7221);(0,a.t3)().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),(0,ye.O)(this,e,t,n)};var be=n(5777);(0,a.t3)().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),(0,be._)(this,e,t,n,r)};var xe=n(6176);(0,a.t3)().prototype.max=function(e,t){return this.throwIfDisposed(),(0,xe.F)(this,e,t)};var we=n(705);(0,a.t3)().prototype.maximum=function(e){return this.throwIfDisposed(),(0,we.g)(this,e)};var ke=n(6568);(0,a.t3)().prototype.mean=function(e,t){return this.throwIfDisposed(),(0,ke.J)(this,e,t)};var _e=n(7891);(0,a.t3)().prototype.min=function(e,t){return this.throwIfDisposed(),(0,_e.V)(this,e,t)};var Se=n(2273);(0,a.t3)().prototype.minimum=function(e){return this.throwIfDisposed(),(0,Se.L)(this,e)};var Ce=n(9719);(0,a.t3)().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),(0,Ce.V)(this,e,t)};var Ee=n(4645);(0,a.t3)().prototype.mod=function(e){return this.throwIfDisposed(),(0,Ee.w)(this,e)};var Ae=n(651);(0,a.t3)().prototype.mul=function(e){return this.throwIfDisposed(),(0,Ae.d)(this,e)};var Ne=n(4362);(0,a.t3)().prototype.neg=function(){return this.throwIfDisposed(),(0,Ne.W)(this)};var Te=n(6662);(0,a.t3)().prototype.norm=function(e,t,n){return this.throwIfDisposed(),(0,Te.K)(this,e,t,n)};var Me=n(5549);(0,a.t3)().prototype.notEqual=function(e){return this.throwIfDisposed(),(0,Me.Q)(this,e)};var De=n(4326);(0,a.t3)().prototype.oneHot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),(0,De.l)(this,e,t,n)};var Fe=n(773);(0,a.t3)().prototype.onesLike=function(){return this.throwIfDisposed(),(0,Fe.J)(this)};var Ie=n(1970);(0,a.t3)().prototype.pad=function(e,t){return this.throwIfDisposed(),(0,Ie.v)(this,e,t)};var Oe=n(7226);(0,a.t3)().prototype.pool=function(e,t,n,r,a,i){return this.throwIfDisposed(),(0,Oe.d)(this,e,t,n,r,a,i)};var Re=n(4334);(0,a.t3)().prototype.pow=function(e){return this.throwIfDisposed(),(0,Re.s)(this,e)};var Ze=n(6859);(0,a.t3)().prototype.prelu=function(e){return this.throwIfDisposed(),(0,Ze.A)(this,e)};var Be=n(7722);(0,a.t3)().prototype.prod=function(e,t){return this.throwIfDisposed(),(0,Be.W)(this,e,t)};var ze=n(2209);(0,a.t3)().prototype.reciprocal=function(){return this.throwIfDisposed(),(0,ze.M)(this)};var Le=n(7539);(0,a.t3)().prototype.relu=function(){return this.throwIfDisposed(),(0,Le.U)(this)};var Pe=n(5900);(0,a.t3)().prototype.relu6=function(){return this.throwIfDisposed(),(0,Pe.b)(this)},(0,a.t3)().prototype.reshapeAs=function(e){return this.throwIfDisposed(),(0,h.X)(this,e.shape)},(0,a.t3)().prototype.reshape=function(e){return this.throwIfDisposed(),(0,h.X)(this,e)};var je=n(464);(0,a.t3)().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),(0,je.I)(this,e,t,n)};var Ue=n(8600);(0,a.t3)().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),(0,Ue.j)(this,e,t,n)};var We=n(4933);(0,a.t3)().prototype.reverse=function(e){return this.throwIfDisposed(),(0,We.G)(this,e)};var Ve=n(4617);(0,a.t3)().prototype.rfft=function(){return this.throwIfDisposed(),(0,Ve.Q)(this)};var qe=n(766);(0,a.t3)().prototype.round=function(){return this.throwIfDisposed(),(0,qe.N)(this)};var He=n(5115);(0,a.t3)().prototype.rsqrt=function(){return this.throwIfDisposed(),(0,He.b)(this)};var Ge=n(413);(0,a.t3)().prototype.selu=function(){return this.throwIfDisposed(),(0,Ge.U)(this)};var Xe=n(119);(0,a.t3)().prototype.separableConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),(0,Xe.U)(this,e,t,n,r,a,i)};var Ye=n(7643);(0,a.t3)().prototype.sigmoid=function(){return this.throwIfDisposed(),(0,Ye.X)(this)};var Ke=n(2070);(0,a.t3)().prototype.sign=function(){return this.throwIfDisposed(),(0,Ke.X)(this)};var $e=n(7254);(0,a.t3)().prototype.sin=function(){return this.throwIfDisposed(),(0,$e.O)(this)};var Qe=n(7657);(0,a.t3)().prototype.sinh=function(){return this.throwIfDisposed(),(0,Qe.R)(this)};var Je=n(9238);(0,a.t3)().prototype.slice=function(e,t){return this.throwIfDisposed(),(0,Je.t)(this,e,t)};var et=n(4910);(0,a.t3)().prototype.softmax=function(e){return this.throwIfDisposed(),(0,et.X)(this,e)};var tt=n(4626);(0,a.t3)().prototype.softplus=function(){return this.throwIfDisposed(),(0,tt.W)(this)};var nt=n(5696);(0,a.t3)().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),(0,nt.f)(this,e,t)};var rt=n(2588);(0,a.t3)().prototype.split=function(e,t){return this.throwIfDisposed(),(0,rt.V)(this,e,t)};var at=n(6902);(0,a.t3)().prototype.sqrt=function(){return this.throwIfDisposed(),(0,at._)(this)};var it=n(7391);(0,a.t3)().prototype.square=function(){return this.throwIfDisposed(),(0,it.h)(this)};var ot=n(7993);(0,a.t3)().prototype.squaredDifference=function(e){return this.throwIfDisposed(),(0,ot.$)(this,e)};var ut=n(3931);(0,a.t3)().prototype.squeeze=function(e){return this.throwIfDisposed(),(0,ut.L)(this,e)};var st=n(8306);(0,a.t3)().prototype.stack=function(e,t){this.throwIfDisposed();var n=e instanceof a.es?[this,e]:[this].concat((0,E.Z)(e));return(0,st.k)(n,t)};var ct=n(4031);(0,a.t3)().prototype.step=function(e){return this.throwIfDisposed(),(0,ct.N)(this,e)};var lt=n(9017);(0,a.t3)().prototype.stridedSlice=function(e,t,n,r,a,i,o,u){return this.throwIfDisposed(),(0,lt.N)(this,e,t,n,r,a,i,o,u)};var ft=n(4774);(0,a.t3)().prototype.sub=function(e){return this.throwIfDisposed(),(0,ft.l)(this,e)};var ht=n(227);(0,a.t3)().prototype.sum=function(e,t){return this.throwIfDisposed(),(0,ht.S)(this,e,t)};var dt=n(6999);(0,a.t3)().prototype.tan=function(){return this.throwIfDisposed(),(0,dt.O)(this)};var pt=n(1744);(0,a.t3)().prototype.tanh=function(){return this.throwIfDisposed(),(0,pt.A)(this)};var vt=n(2343);(0,a.t3)().prototype.tile=function(e){return this.throwIfDisposed(),(0,vt.G)(this,e)},(0,a.t3)().prototype.toBool=function(){return this.throwIfDisposed(),(0,p.p)(this,"bool")},(0,a.t3)().prototype.toFloat=function(){return this.throwIfDisposed(),(0,p.p)(this,"float32")},(0,a.t3)().prototype.toInt=function(){return this.throwIfDisposed(),(0,p.p)(this,"int32")};var gt=n(9085);(0,a.t3)().prototype.topk=function(e,t){return this.throwIfDisposed(),(0,gt.h)(this,e,t)};var mt=n(1240);(0,a.t3)().prototype.transpose=function(e){return this.throwIfDisposed(),(0,mt.p)(this,e)};var yt=n(4860);(0,a.t3)().prototype.unique=function(e){return this.throwIfDisposed(),(0,yt.T)(this,e)};var bt=n(6918);(0,a.t3)().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),(0,bt.p)(this,e,t)};var xt=n(4566);(0,a.t3)().prototype.unstack=function(e){return this.throwIfDisposed(),(0,xt.H)(this,e)};var wt=n(329);(0,a.t3)().prototype.where=function(e,t){return this.throwIfDisposed(),(0,wt.a)(e,this,t)};var kt=n(7293);(0,a.t3)().prototype.zerosLike=function(){return this.throwIfDisposed(),(0,kt.P)(this)}},4376:function(e,t,n){"use strict";n.d(t,{es:function(){return C},YD:function(){return b},_w:function(){return A},t3:function(){return E},FZ:function(){return S},Vp:function(){return _},Vi:function(){return k}});var r=n(1020),a=n(804),i=n(3032),o=n(7853),u=n(4531),s=n(4322),c=n.n(s),l=n(6581),f=n(1303),h=n(6147);function d(e,t,n,r){var a=(0,h.e3)(t),i=function(e,t,n,r){var a=(0,h.NA)(t),i=r[r.length-1],o=new Array(i).fill(0),u=t.length,s="complex64"===n?m(e):e;if(u>1)for(var c=0;c<a/i;c++)for(var l=c*i,f=0;f<i;f++)o[f]=Math.max(o[f],p(s[l+f],0,n).length);return o}(e,t,n,a),o=t.length,u=g(e,t,n,a,i),s=["Tensor"];return r&&(s.push("  dtype: ".concat(n)),s.push("  rank: ".concat(o)),s.push("  shape: [".concat(t,"]")),s.push("  values:")),s.push(u.map((function(e){return"    "+e})).join("\n")),s.join("\n")}function p(e,t,n){var r;return r=Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ")+"".concat(parseFloat(e[1].toFixed(7)),"j"):(0,h.HD)(e)?"'".concat(e,"'"):"bool"===n?v(e):parseFloat(e.toFixed(7)).toString(),(0,h.oj)(r,t)}function v(e){return 0===e?"false":"true"}function g(e,t,n,r,a){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o="complex64"===n?2:1,u=t[0],s=t.length;if(0===s){if("complex64"===n){var c=m(e);return[p(c[0],0,n)]}return"bool"===n?[v(e[0])]:[e[0].toString()]}if(1===s){if(u>20){var l=3*o,h=Array.from(e.slice(0,l)),d=Array.from(e.slice((u-3)*o,u*o));return"complex64"===n&&(h=m(h),d=m(d)),["["+h.map((function(e,t){return p(e,a[t],n)})).join(", ")+", ..., "+d.map((function(e,t){return p(e,a[u-3+t],n)})).join(", ")+"]"]}var y="complex64"===n?m(e):Array.from(e);return["["+y.map((function(e,t){return p(e,a[t],n)})).join(", ")+"]"]}var b=t.slice(1),x=r.slice(1),w=r[0]*o,k=[];if(u>20){for(var _=0;_<3;_++){var S=_*w,C=S+w;k.push.apply(k,(0,f.Z)(g(e.slice(S,C),b,n,x,a,!1)))}k.push("...");for(var E=u-3;E<u;E++){var A=E*w,N=A+w;k.push.apply(k,(0,f.Z)(g(e.slice(A,N),b,n,x,a,E===u-1)))}}else for(var T=0;T<u;T++){var M=T*w,D=M+w;k.push.apply(k,(0,f.Z)(g(e.slice(M,D),b,n,x,a,T===u-1)))}var F=2===s?",":"";k[0]="["+(u>0?k[0]+F:"");for(var I=1;I<k.length-1;I++)k[I]=" "+k[I]+F;for(var O=",\n",R=2;R<s;R++)O+="\n";return k[k.length-1]=" "+k[k.length-1]+"]"+(i?"":O),k}function m(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var y=n(115),b=function(){function e(t,n,r){var a=this;if((0,o.Z)(this,e),this.dtype=n,this.shape=t.slice(),this.size=h.NA(t),null!=r){var i=r.length;h.hu(i===this.size,(function(){return"Length of values '".concat(i,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||h.rQ(n,this.size),this.strides=(0,h.e3)(t)}return(0,u.Z)(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),h.hu(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(t.rank,")")}));var i=this.locToIndex(r);this.values[i]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,i=t;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var u="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(u)}r++}for(var s=t[t.length-1],c=0;c<t.length-1;++c)s+=this.strides[c]*t[c];return this.values[s]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return x().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),x=null,w=null;function k(e){x=e}function _(e){w=e}function S(e){e}var C=function(){function e(t,n,r,a){(0,o.Z)(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=h.NA(t),this.strides=(0,h.e3)(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return(0,u.Z)(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:function(){var e=(0,i.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",w.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return w.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var e=(0,i.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",(0,h.GX)(this.shape,t,"complex64"===this.dtype));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"arraySync",value:function(){return(0,h.GX)(this.shape,this.dataSync(),"complex64"===this.dtype)}},{key:"data",value:function(){var e=(0,i.Z)(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=x().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return y.decodeString(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"dataToGPU",value:function(e){return this.throwIfDisposed(),x().readToGPU(this.dataId,e)}},{key:"dataSync",value:function(){this.throwIfDisposed();var e=x().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return y.decodeString(e)}))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:function(){var e=(0,i.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,x().read(this.dataId);case 3:if(t=e.sent,"string"!==this.dtype){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",new Uint8Array(t.buffer));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),x().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return w.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),w.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.dataSync();return d(t,this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),w.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),x().makeVariable(this,e,t,n)}}]),e}();function E(){return(0,l.R)("Tensor",(function(){return C}))}Object.defineProperty(C,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),E();var A=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e,r,a,i){var u;return(0,o.Z)(this,n),(u=t.call(this,e.shape,e.dtype,e.dataId,i)).trainable=r,u.name=a,u}return(0,u.Z)(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!h.cO(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));x().disposeTensor(this),this.dataId=e.dataId,x().incRef(this,null)}},{key:"dispose",value:function(){x().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(C);Object.defineProperty(A,Symbol.hasInstance,{value:function(e){return e instanceof C&&null!=e.assign&&e.assign instanceof Function}})},9064:function(e,t,n){"use strict";n.r(t),n.d(t,{assertTypesMatch:function(){return u},getTensorsInContainer:function(){return c},isTensorInList:function(){return s},makeTypesMatch:function(){return o}});var r=n(4376),a=n(3525),i=n(6147);function o(e,t){if(e.dtype===t.dtype)return[e,t];var n=(0,a.x8)(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function u(e,t){(0,i.hu)(e.dtype===t.dtype,(function(){return"The dtypes of the first(".concat(e.dtype,") and")+" second(".concat(t.dtype,") input must match")}))}function s(e,t){return t.some((function(t){return t.id===e.id}))}function c(e){var t=[];return l(e,t,new Set),t}function l(e,t,n){if(null!=e)if(e instanceof r.es)t.push(e);else if(a=e,Array.isArray(a)||"object"===typeof a){var a,i=e;for(var o in i){var u=i[o];n.has(u)||(n.add(u),l(u,t,n))}}}},8354:function(e,t,n){"use strict";n.d(t,{C:function(){return c},_1:function(){return h},sI:function(){return d}});var r=n(318),a=n(5050),i=n(4376),o=n(3525),u=n(115),s=n(6147);function c(e,t){var n=e;if((0,u.isTypedArray)(e))return"string"===t?[]:[e.length];if((0,o.Oq)(e)){var r=e.channels||"RGBA";return[e.height,e.width*r.length]}if((0,o.$F)(e))return[e.buffer.size/(null==t?4:(0,s.bT)(t))];if(!Array.isArray(e))return[];for(var i=[];Array.isArray(n)||(0,u.isTypedArray)(n)&&"string"!==t;)i.push(n.length),n=n[0];return Array.isArray(e)&&(0,a.OB)().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&l(e,i,[]),i}function l(e,t,n){if(n=n||[],Array.isArray(e)||(0,u.isTypedArray)(e)){(0,s.hu)(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")})),(0,s.hu)(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)l(e[a],r,n.concat(a))}else(0,s.hu)(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")}))}function f(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function h(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof(0,i.t3)())return f(a,e.dtype,t,n),e;var o=(0,s.D2)(e);if("string"!==o&&["bool","int32","float32"].indexOf(a)>=0&&(o=a),f(a,o,t,n),null==e||!(0,u.isTypedArray)(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){var l=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(l,"'"))}var h=c(e,o);(0,u.isTypedArray)(e)||Array.isArray(e)||(e=[e]);var d=!0,p="string"!==o?(0,u.toTypedArray)(e,o):(0,u.flatten)(e,[],d);return r.BV.makeTensor(p,h,o)}function d(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");var a=e;return a.map((function(e,a){return h(e,"".concat(t,"[").concat(a,"]"),n,r)}))}},3525:function(e,t,n){"use strict";var r,a,i,o,u;n.d(t,{$F:function(){return h},Oq:function(){return f},x8:function(){return c},yw:function(){return r},z4:function(){return l}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(r||(r={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(a||(a={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(i||(i={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(o||(o={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(u||(u={}));var s={float32:o,int32:a,bool:i,complex64:u};function c(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return s[e][t]}function l(e){return c(e,"int32")}function f(e){return null!=e&&"object"===typeof e&&"texture"in e&&e.texture instanceof WebGLTexture}function h(e){return"undefined"!==typeof GPUBuffer&&null!=e&&"object"===typeof e&&"buffer"in e&&e.buffer instanceof GPUBuffer}},115:function(e,t,n){"use strict";n.r(t),n.d(t,{arraysEqual:function(){return i.cO},arraysEqualWithNull:function(){return i.DK},assert:function(){return i.hu},assertNonNegativeIntegerDimensions:function(){return i.Mu},assertNonNull:function(){return i.Cq},assertShapesMatch:function(){return i.k5},bytesFromStringArray:function(){return i.Ub},bytesPerElement:function(){return i.bT},checkConversionForErrors:function(){return i.D5},clamp:function(){return i.uZ},computeStrides:function(){return i.e3},convertBackendValuesAndArrayBuffer:function(){return i.KS},createScalarValue:function(){return _},createShuffledIndices:function(){return i.U$},decodeString:function(){return N},distSquared:function(){return i.E7},encodeString:function(){return A},fetch:function(){return E},fingerPrint64:function(){return k},flatten:function(){return M},getArrayFromDType:function(){return i.rQ},getTypedArrayFromDType:function(){return i.WP},hasEncodingLoss:function(){return i.QB},hexToLong:function(){return s},indexToLoc:function(){return i.NE},inferDtype:function(){return i.D2},inferFromImplicitShape:function(){return i.JZ},isBoolean:function(){return i.jn},isFunction:function(){return i.mf},isInt:function(){return i.GN},isNumber:function(){return i.hj},isPromise:function(){return i.tI},isScalarShape:function(){return i.xH},isString:function(){return i.HD},isTypedArray:function(){return T},isValidDtype:function(){return i.LP},locToIndex:function(){return i.qy},makeOnesTypedArray:function(){return i.p8},makeZerosNestedTypedArray:function(){return i.l6},makeZerosTypedArray:function(){return i.wT},nearestDivisor:function(){return i.jP},nearestLargerEven:function(){return i.nY},now:function(){return C},parseAxisParam:function(){return i.EC},randUniform:function(){return i.bj},repeatedTry:function(){return i.WD},rightPad:function(){return i.oj},shuffle:function(){return i.TV},shuffleCombo:function(){return i.d7},sizeFromShape:function(){return i.NA},sizeToSquarishShape:function(){return i.YP},squeezeShape:function(){return i.bp},sum:function(){return i.Sm},swap:function(){return i.LF},tanh:function(){return i.AE},toNestedArray:function(){return i.GX},toTypedArray:function(){return S}});var r=n(5050),a=n(1539),i=n(6147),o=n(8097),u=n.n(o)()||o;function s(e){return u.fromString(e,!0,16)}var c=s("c3a5c85c97cb3127"),l=s("b492b66fbe98f273"),f=s("9ae16a3b2f90404f");function h(e){return e.xor(e.shru(47))}function d(e,t,n){var r=e.slice(t,t+n);return u.fromBytes(Array.from(r),!0,!0)}function p(e,t){return d(e,t,8)}function v(e,t){return d(e,t,4)}function g(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));var a=t.xor(r).mul(n);return a=(a=a.xor(a.shru(47))).mul(n)}function y(e,t,n,r){return function(e,t,n,r,a,i){a=a.add(e),i=g(i.add(a).add(r),21);var o=a;return a=(a=a.add(t)).add(n),i=i.add(g(a,44)),[a.add(r),i.add(o)]}(p(e,t),p(e,t+8),p(e,t+16),p(e,t+24),n,r)}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){var n=f.add(2*t),r=p(e,0).add(f),a=p(e,t-8),i=g(a,37).mul(n).add(r),o=g(r,25).add(a).mul(n);return m(i,o,n)}if(t>=4){var u=f.add(2*t),s=v(e,0);return m(s.shl(3).add(t),v(e,t-4),u)}if(t>0){var l=e[0],d=e[t>>1],y=e[t-1],b=l+(d<<8),x=t+(y<<2);return h(f.mul(b).xor(c.mul(x))).mul(f)}return f}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=f.add(2*t),r=p(e,0).mul(l),a=p(e,8),i=p(e,t-8).mul(n),o=p(e,t-16).mul(f);return m(g(r.add(a),43).add(g(i,30)).add(o),r.add(g(a.add(f),18)).add(i),n)}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=f.add(2*t),r=p(e,0).mul(f),a=p(e,8),i=p(e,t-8).mul(n),o=p(e,t-16).mul(f),u=g(r.add(a),43).add(g(i,30)).add(o),s=m(u,r.add(g(a.add(f),18)).add(i),n),c=p(e,16).mul(n),l=p(e,24),h=u.add(p(e,t-32)).mul(n),d=s.add(p(e,t-24)).mul(n);return m(g(c.add(l),43).add(g(h,30)).add(d),c.add(g(l.add(r),18)).add(h),n)}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=u.fromNumber(81,!0);if(t<=32)return t<=16?b(e,t):x(e,t);if(t<=64)return w(e,t);var r=n,a=n.mul(l).add(113),i=h(a.mul(f).add(113)).mul(f),o=[u.UZERO,u.UZERO],s=[u.UZERO,u.UZERO];r=r.mul(f).add(p(e,0));var d=0,v=64*(t-1>>6),k=v+(t-1&63)-63;do{r=g(r.add(a).add(o[0]).add(p(e,d+8)),37).mul(l),a=g(a.add(o[1]).add(p(e,d+48)),42).mul(l),r=r.xor(s[1]),a=a.add(o[0]).add(p(e,d+40)),i=g(i.add(s[0]),33).mul(l),o=y(e,d,o[1].mul(l),r.add(s[0])),s=y(e,d+32,i.add(s[1]),a.add(p(e,d+16)));var _=[r,i];i=_[0],r=_[1],d+=64}while(d!==v);var S=l.add(i.and(255).shl(1));d=k,s[0]=s[0].add(t-1&63),o[0]=o[0].add(s[0]),s[0]=s[0].add(o[0]),r=g(r.add(a).add(o[0]).add(p(e,d+8)),37).mul(S),a=g(a.add(o[1]).add(p(e,d+48)),42).mul(S),r=r.xor(s[1].mul(9)),a=a.add(o[0].mul(9).add(p(e,d+40))),i=g(i.add(s[0]),33).mul(S),o=y(e,d,o[1].mul(S),r.add(s[0])),s=y(e,d+32,i.add(s[1]),a.add(p(e,d+16)));var C=[r,i];return i=C[0],r=C[1],m(m(o[0],s[0],S).add(h(a).mul(c)).add(i),m(o[1],s[1],S).add(r),S)}function _(e,t){return"string"===t?A(e):S([e],t)}function S(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=M(e)),(0,r.OB)().getBool("DEBUG")&&i.D5(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),a=0;a<n.length;++a)0!==Math.round(e[a])&&(n[a]=1);return n}throw new Error("Unknown data type ".concat(t))}function C(){return(0,r.OB)().platform.now()}function E(e,t){return(0,r.OB)().platform.fetch(e,t)}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",(0,r.OB)().platform.encode(e,t)}function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",(0,r.OB)().platform.decode(e,t)}function T(e){return null!=(0,r.OB)().platform.isTypedArray?(0,r.OB)().platform.isTypedArray(e):(0,a.j)(e)}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),"boolean"===typeof e||"number"===typeof e||"string"===typeof e||i.tI(e)||null==e||T(e)&&n)t.push(e);else if(Array.isArray(e)||T(e))for(var r=0;r<e.length;++r)M(e[r],t,n);else{for(var a=-1,o=0,u=Object.keys(e);o<u.length;o++){var s=u[o];/^([1-9]+[0-9]*|0)$/.test(s)&&(a=Math.max(a,Number(s)))}for(var c=0;c<=a;c++)M(e[c],t,n)}return t}},6147:function(e,t,n){"use strict";function r(e){for(var t=e.length,n=0;t>0;)n=Math.random()*t|0,u(e,--t,n)}function a(e,t){if(e.length!==t.length)throw new Error("Array sizes must match to be shuffled together "+"First array length was ".concat(e.length)+"Second array length was ".concat(t.length));for(var n=e.length,r=0;n>0;)r=Math.random()*n|0,u(e,--n,r),u(t,n,r)}function i(e,t,n){return Math.max(e,Math.min(t,n))}function o(e){return e%2===0?e:e+1}function u(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function s(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function c(e,t){var n=Math.random();return t*n+(1-n)*e}function l(e,t){for(var n=0,r=0;r<e.length;r++){var a=Number(e[r])-Number(t[r]);n+=a*a}return n}function f(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";f(m(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function d(e){f(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function p(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function v(e){return 0===e.length}function g(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(null!==e[n]&&null!==t[n]&&e[n]!==t[n])return!1;return!0}function m(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function y(e){return e%1===0}function b(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function x(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function w(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return r(t),t}function k(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return new Promise((function(a,i){var o=0;!function u(){if(e())a();else{o++;var s=t(o);null!=n&&o>=n?i():null!=r?r(u,s):setTimeout(u,s)}}()}))}function S(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));var i=e.slice();return i[r]=t/n,i}function C(e,t){var n=t.length;return f((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)})),f(e.every((function(e){return y(e)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function E(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:C(t,e).sort(),o=0,u=0;u<e.length;++u){if(null!=i){if(i[o]===u&&1!==e[u])throw new Error("Can't squeeze axis ".concat(u," since its dim '").concat(e[u],"' is not 1"));(null==i[o]||i[o]>u)&&1===e[u]&&(n.push(e[u]),r.push(u)),i[o]<=u&&o++}1!==e[u]&&(n.push(e[u]),r.push(u))}return{newShape:n,keptDims:r}}function A(e,t){return N(e,t)}function N(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function T(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}function M(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function D(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function F(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function I(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}function O(e){return"string"===typeof e||e instanceof String}function R(e){return"boolean"===typeof e}function Z(e){return"number"===typeof e}function B(e){return Array.isArray(e)?B(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":Z(e)?"float32":O(e)?"string":R(e)?"bool":"float32"}function z(e){return!!(e&&e.constructor&&e.call&&e.apply)}function L(e,t){for(var n=t;n<e;++n)if(e%n===0)return n;return e}function P(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function j(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array;if(1===t.length)for(var i=t[0]*(r?2:1),o=0;o<i;o++)a[o]=n[e+o];else for(var u=t[0],s=t.slice(1),c=s.reduce((function(e,t){return e*t}))*(r?2:1),l=0;l<u;l++)a[l]=j(e+l*c,s,n,r);return a}function U(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];var r=e.reduce((function(e,t){return e*t}))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return j(0,e,t,n)}function W(e,t){if(Array.isArray(e))return e;if("float32"===t)return e instanceof Float32Array?e:new Float32Array(e);if("int32"===t)return e instanceof Int32Array?e:new Int32Array(e);if("bool"===t||"string"===t)return Uint8Array.from(new Int32Array(e));throw new Error("Unknown dtype ".concat(t))}function V(e,t){for(var n=q(e,t),r=0;r<n.length;r++)n[r]=1;return n}function q(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function H(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return U(e,new Float32Array(n));if("int32"===t)return U(e,new Int32Array(n));if("bool"===t)return U(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function G(e){e.forEach((function(t){f(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")}))}))}function X(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function Y(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function K(e){return e&&e.then&&"function"===typeof e.then}n.d(t,{AE:function(){return b},Cq:function(){return d},D2:function(){return B},D5:function(){return T},DK:function(){return g},E7:function(){return l},EC:function(){return C},GN:function(){return y},GX:function(){return U},HD:function(){return O},JZ:function(){return S},KS:function(){return W},LF:function(){return u},LP:function(){return M},Mu:function(){return G},NA:function(){return p},NE:function(){return Y},QB:function(){return D},Sm:function(){return s},TV:function(){return r},U$:function(){return w},Ub:function(){return I},WD:function(){return _},WP:function(){return A},YP:function(){return x},bT:function(){return F},bj:function(){return c},bp:function(){return E},cO:function(){return m},d7:function(){return a},e3:function(){return P},hj:function(){return Z},hu:function(){return f},jP:function(){return L},jn:function(){return R},k5:function(){return h},l6:function(){return H},mf:function(){return z},nY:function(){return o},oj:function(){return k},p8:function(){return V},qy:function(){return X},rQ:function(){return N},tI:function(){return K},uZ:function(){return i},wT:function(){return q},xH:function(){return v}})},8097:function(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(C){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var a={},i={};function o(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=i[e])?r:(n=s(e,(0|e)<0?-1:0,!0),o&&(i[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=a[e])?r:(n=s(e,e<0?-1:0,!1),o&&(a[e]=n),n)}function u(e,t){if(isNaN(e))return t?m:g;if(t){if(e<0)return m;if(e>=d)return k}else{if(e<=-p)return _;if(e+1>=p)return w}return e<0?u(-e,t).neg():s(e%h|0,e/h|0,t)}function s(e,t,r){return new n(e,t,r)}n.fromInt=o,n.fromNumber=u,n.fromBits=s;var c=Math.pow;function l(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return l(e.substring(1),t,n).neg();for(var a=u(c(n,8)),i=g,o=0;o<e.length;o+=8){var s=Math.min(8,e.length-o),f=parseInt(e.substring(o,o+s),n);if(s<8){var h=u(c(n,s));i=i.mul(h).add(u(f))}else i=(i=i.mul(a)).add(u(f))}return i.unsigned=t,i}function f(e,t){return"number"===typeof e?u(e,t):"string"===typeof e?l(e,t):s(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=l,n.fromValue=f;var h=4294967296,d=h*h,p=d/2,v=o(1<<24),g=o(0);n.ZERO=g;var m=o(0,!0);n.UZERO=m;var y=o(1);n.ONE=y;var b=o(1,!0);n.UONE=b;var x=o(-1);n.NEG_ONE=x;var w=s(-1,2147483647,!1);n.MAX_VALUE=w;var k=s(-1,-1,!0);n.MAX_UNSIGNED_VALUE=k;var _=s(0,-2147483648,!1);n.MIN_VALUE=_;var S=n.prototype;S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},S.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(_)){var t=u(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=u(c(e,6),this.unsigned),i=this,o="";;){var s=i.div(a),l=(i.sub(s.mul(a)).toInt()>>>0).toString(e);if((i=s).isZero())return l+o;for(;l.length<6;)l="0"+l;o=""+l+o}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(_)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},S.isZero=function(){return 0===this.high&&0===this.low},S.eqz=S.isZero,S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return 1===(1&this.low)},S.isEven=function(){return 0===(1&this.low)},S.equals=function(e){return r(e)||(e=f(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},S.eq=S.equals,S.notEquals=function(e){return!this.eq(e)},S.neq=S.notEquals,S.ne=S.notEquals,S.lessThan=function(e){return this.comp(e)<0},S.lt=S.lessThan,S.lessThanOrEqual=function(e){return this.comp(e)<=0},S.lte=S.lessThanOrEqual,S.le=S.lessThanOrEqual,S.greaterThan=function(e){return this.comp(e)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(e){return this.comp(e)>=0},S.gte=S.greaterThanOrEqual,S.ge=S.greaterThanOrEqual,S.compare=function(e){if(r(e)||(e=f(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(_)?_:this.not().add(y)},S.neg=S.negate,S.add=function(e){r(e)||(e=f(e));var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,i=65535&this.low,o=e.high>>>16,u=65535&e.high,c=e.low>>>16,l=0,h=0,d=0,p=0;return d+=(p+=i+(65535&e.low))>>>16,h+=(d+=a+c)>>>16,l+=(h+=n+u)>>>16,l+=t+o,s((d&=65535)<<16|(p&=65535),(l&=65535)<<16|(h&=65535),this.unsigned)},S.subtract=function(e){return r(e)||(e=f(e)),this.add(e.neg())},S.sub=S.subtract,S.multiply=function(e){if(this.isZero())return g;if(r(e)||(e=f(e)),t)return s(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(_))return e.isOdd()?_:g;if(e.eq(_))return this.isOdd()?_:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(v)&&e.lt(v))return u(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,a=65535&this.high,i=this.low>>>16,o=65535&this.low,c=e.high>>>16,l=65535&e.high,h=e.low>>>16,d=65535&e.low,p=0,m=0,y=0,b=0;return y+=(b+=o*d)>>>16,m+=(y+=i*d)>>>16,y&=65535,m+=(y+=o*h)>>>16,p+=(m+=a*d)>>>16,m&=65535,p+=(m+=i*h)>>>16,m&=65535,p+=(m+=o*l)>>>16,p+=n*d+a*h+i*l+o*c,s((y&=65535)<<16|(b&=65535),(p&=65535)<<16|(m&=65535),this.unsigned)},S.mul=S.multiply,S.divide=function(e){if(r(e)||(e=f(e)),e.isZero())throw Error("division by zero");var n,a,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?s((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?m:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return m;if(e.gt(this.shru(1)))return b;i=m}else{if(this.eq(_))return e.eq(y)||e.eq(x)?_:e.eq(_)?y:(n=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?y:x:(a=this.sub(e.mul(n)),i=n.add(a.div(e)));if(e.eq(_))return this.unsigned?m:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=g}for(a=this;a.gte(e);){n=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),l=o<=48?1:c(2,o-48),h=u(n),d=h.mul(e);d.isNegative()||d.gt(a);)d=(h=u(n-=l,this.unsigned)).mul(e);h.isZero()&&(h=y),i=i.add(h),a=a.sub(d)}return i},S.div=S.divide,S.modulo=function(e){return r(e)||(e=f(e)),t?s((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},S.mod=S.modulo,S.rem=S.modulo,S.not=function(){return s(~this.low,~this.high,this.unsigned)},S.and=function(e){return r(e)||(e=f(e)),s(this.low&e.low,this.high&e.high,this.unsigned)},S.or=function(e){return r(e)||(e=f(e)),s(this.low|e.low,this.high|e.high,this.unsigned)},S.xor=function(e){return r(e)||(e=f(e)),s(this.low^e.low,this.high^e.high,this.unsigned)},S.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?s(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):s(0,this.low<<e-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?s(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):s(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?s(this.low>>>e|t<<32-e,t>>>e,this.unsigned):s(32===e?t:t>>>e-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.shr_u=S.shiftRightUnsigned,S.toSigned=function(){return this.unsigned?s(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:s(this.low,this.high,!0)},S.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},S.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},6377:function(e,t,n){"use strict";var r=n(8064).default,a=n(8231).default,i=n(9137).default,o=n(3744).default;Object.defineProperty(t,"__esModule",{value:!0});var u=n(8294),s=n(7938),c=function(e){i(n,e);var t=o(n);function n(){return r(this,n),t.apply(this,arguments)}return a(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.name,n=e.tab;this.props.registerSurface(t,n,this)}},{key:"componentDidUpdate",value:function(){return!1}},{key:"render",value:function(){var e=this,t=this.props,r=t.name,a=t.visible,i=t.styles,o=Object.assign({},n.defaultStyles,i),c=o.width,l=o.height,f=o.maxHeight,h=o.maxWidth;f=l===n.defaultStyles.height?f:l,h=c===n.defaultStyles.width?h:c;var d=s.css({display:a?"block":"none",backgroundColor:"white",marginTop:"10px",marginBottom:"10px",boxShadow:"0 0 6px -3px #777",padding:"10px !important",height:l,width:c,maxHeight:f,maxWidth:h,overflow:"auto"}),p=s.css({backgroundColor:"white",boxSizing:"border-box",borderBottom:"1px solid #357EDD",lineHeight:"2em",marginBottom:"20px",fontWeight:"600",textAlign:"center"}),v=s.css({boxSizing:"border-box"});return u.h("div",{className:"".concat(d," tf-surface"),ref:function(t){return e.container=t},"data-visible":a},u.h("div",{className:"".concat(p," tf-label"),ref:function(t){return e.label=t}},r),u.h("div",{className:"".concat(v," tf-draw-area"),ref:function(t){return e.drawArea=t}}))}}]),n}(u.Component);c.defaultStyles={maxWidth:"550px",maxHeight:"580px",height:"auto",width:"auto"},t.SurfaceComponent=c},7733:function(e,t,n){"use strict";var r=n(8064).default,a=n(8231).default,i=n(9137).default,o=n(3744).default;Object.defineProperty(t,"__esModule",{value:!0});var u=n(8294),s=n(7938),c=function(e){i(n,e);var t=o(n);function n(){return r(this,n),t.apply(this,arguments)}return a(n,[{key:"render",value:function(){var e=this.props,t=e.tabNames,n=e.activeTab,r=e.handleClick,a=t.length>0?t.map((function(e){return u.h(l,{key:e,id:e,handleClick:r,isActive:e===n},e)})):null,i=s.css({overflowX:"scroll",overflowY:"hidden",whiteSpace:"nowrap",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"#eee",paddingBottom:"1rem",marginTop:"1rem"});return u.h("div",{className:"".concat(i," visor-tabs")},a)}}]),n}(u.Component);t.Tabs=c;var l=function(e){i(n,e);var t=o(n);function n(){return r(this,n),t.apply(this,arguments)}return a(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.isActive,r=e.handleClick,a=e.id,i=s.css({borderBottomColor:n?"#357EDD":"#AAAAAA",borderBottomWidth:"1px",borderBottomStyle:"solid",cursor:"pointer",":hover":{color:"#357EDD"},display:"inline-block",marginRight:"1rem",padding:".5rem",fontSize:"1rem",fontWeight:"bold"});return u.h("a",{className:"".concat(i," tf-tab"),"data-isactive":n,onClick:function(){return r(a)}},t)}}]),n}(u.Component)},1042:function(e,t,n){"use strict";var r=n(9504).default,a=n(8064).default,i=n(8231).default,o=n(4587).default,u=n(9137).default,s=n(3744).default;Object.defineProperty(t,"__esModule",{value:!0});var c=n(8294),l=n(7938),f=n(6377),h=n(7733),d=function(e){u(n,e);var t=s(n);function n(e){var r;a(this,n),(r=t.call(this,e)).surfaces=new Map;var i=null==e.startOpen||e.startOpen;return r.state={isOpen:i,isFullscreen:!1,activeTab:null,tabs:new Set},r.keyHandler=r.keyHandler.bind(o(r)),r}return i(n,[{key:"close",value:function(){this.setState({isOpen:!1})}},{key:"open",value:function(){this.setState({isOpen:!0})}},{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"toggleFullScreen",value:function(){this.setState({isFullscreen:!this.state.isFullscreen})}},{key:"isOpen",value:function(){return this.state.isOpen}},{key:"isFullscreen",value:function(){return this.state.isFullscreen}},{key:"getSurface",value:function(e,t){var n,r=this.surfaceId(e,t);if(!this.surfaces.has(r))throw Error("Surface not found with id: ".concat(r));return{container:(n=this.surfaces.get(r)).container,label:n.label,drawArea:n.drawArea}}},{key:"bindKeys",value:function(){document.addEventListener("keydown",this.keyHandler,!1)}},{key:"unbindKeys",value:function(){document.removeEventListener("keydown",this.keyHandler)}},{key:"surfaceId",value:function(e,t){return e+t}},{key:"setTabs",value:function(e){var t,n,a=e.map((function(e){return e.tab})),i=this.state.tabs,o=r(a);try{for(o.s();!(n=o.n()).done;){var u=n.value;i.has(u)||(i.add(u),t=u)}}catch(s){o.e(s)}finally{o.f()}null!=t&&this.setState({tabs:i,activeTab:t})}},{key:"getTabs",value:function(){return this.state.tabs}},{key:"registerSurface",value:function(e,t,n){var r=this.surfaceId(e,t);this.surfaces.set(r,n)}},{key:"keyHandler",value:function(e){192===e.keyCode&&(e.shiftKey?this.toggleFullScreen():this.toggle())}},{key:"setActiveTab",value:function(e){this.setState({activeTab:e})}},{key:"componentDidMount",value:function(){this.bindKeys()}},{key:"componentWillMount",value:function(){this.setTabs(this.props.surfaceList)}},{key:"componentWillReceiveProps",value:function(e){this.setTabs(e.surfaceList)}},{key:"render",value:function(){var e=this,t=this.state,n=t.isOpen,r=t.isFullscreen,a=t.activeTab,i=this.props.surfaceList,o=Array.from(this.getTabs().values()),u=r?"90vw":"550px",s=l.css({width:u,height:"100%",backgroundColor:"#fafafa",boxSizing:"border-box",padding:"10px",position:"fixed",top:"0px",transition:"right 0.5s cubic-bezier(0.645, 0.045, 0.355, 1), width 0.5s cubic-bezier(0.645, 0.045, 0.355, 1)",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.12), 0 2px 5px rgba(0, 0, 0, 0.24)",overflow:"auto",fontFamily:"sans-serif",fontSize:"14px",zIndex:1e3}),d=l.css({right:"0"}),v=l.css({right:"calc(-".concat(u," - 10px)")}),g=n?d:v,m=l.css({});return c.h("div",{className:"".concat(s," ").concat(g," visor"),"data-isopen":n,"data-isfullscreen":r},c.h(p,{fullScreenHandler:this.toggleFullScreen.bind(this),closeHandler:this.close.bind(this),isFullScreen:r}),c.h(h.Tabs,{tabNames:o,activeTab:a,handleClick:this.setActiveTab.bind(this)}),c.h("div",{className:"".concat(m," visor-surfaces")},i.map((function(t){return c.h(f.SurfaceComponent,{key:t.name+t.tab,name:t.name,tab:t.tab,styles:t.styles,registerSurface:e.registerSurface.bind(e),visible:a===t.tab})}))))}}],[{key:"render",value:function(e,t,r){return c.render(c.h(n,Object.assign({},r)),e,t)}}]),n}(c.Component);function p(e){var t=e.isFullScreen,n=e.fullScreenHandler,r=e.closeHandler,a=l.css({display:"flex",backgroundColor:"white",border:"1px solid white",padding:"6px",paddingTop:"10px",marginBottom:"10px",borderRadius:"6px",marginTop:"-16px"}),i=l.css({fontSize:".875rem",borderRadius:".25rem",paddingLeft:"1rem",paddingRight:"1rem",paddingTop:".5rem",paddingBottom:".5rem",textDecoration:"none",transition:"color .15s ease-in",color:"#111"}),o=l.css({marginLeft:"auto"});return c.h("div",{className:"".concat(a," visor-controls")},c.h("button",{className:"".concat(i),onClick:n},t?"Minimize":"Maximize"),c.h("button",{className:"".concat(i," ").concat(o),onClick:r},"Hide"))}t.VisorComponent=d},386:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(3613),n(4672);var r=n(3168),a=n(8249),i=n(5342),o=n(6863),u=n(298),s=n(6623),c=n(3413),l=n(4469),f=n(9653),h=n(2150),d=n(3936),p=n(1207),v=n(74);t.version_vis=v.version;var g={barchart:r.barchart,table:c.table,histogram:o.histogram,linechart:u.linechart,scatterplot:s.scatterplot,confusionMatrix:a.confusionMatrix,heatmap:i.heatmap};t.render=g;var m={accuracy:p.accuracy,perClassAccuracy:p.perClassAccuracy,confusionMatrix:p.confusionMatrix};t.metrics=m;var y={history:l.history,fitCallbacks:l.fitCallbacks,perClassAccuracy:h.perClassAccuracy,valuesDistribution:d.valuesDistribution,layer:f.layer,modelSummary:f.modelSummary};t.show=y;var b=n(2890);t.visor=b.visor,function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(9263))},3168:function(e,t,n){"use strict";var r=n(4322),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(593)),u=n(1522),s=n(1253);t.barchart=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a(this,void 0,void 0,r.mark((function a(){var i,f,h,d,p,v,g,m,y,b,x,w,k,_,S,C;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=s.getDrawArea(e),f=t,h=Object.assign({},c,n),!l.has(i)){r.next=13;break}if(d=l.get(i),!s.shallowEquals(h,d.lastOptions)){r.next=13;break}return r.next=8,s.nextFrame();case 8:return p=d.view,v=p.changeset().remove((function(){return!0})).insert(f),r.next=12,p.change("values",v).runAsync();case 12:return r.abrupt("return");case 13:return g=h.xLabel,m=h.yLabel,y=h.xType,b=h.yType,x=null,null!=g&&(x={title:g}),w=null,null!=m&&(w={title:m}),k={actions:!1,mode:"vega-lite",defaultStyle:!1},_=null!=h.color?Array.isArray(h.color)?{field:"index",type:"nominal",scale:{range:h.color}}:{value:h.color}:{value:"#4C78A0"},S={width:h.width||u.getDefaultWidth(i),height:h.height||u.getDefaultHeight(i),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:h.fontSize,titleFontSize:h.fontSize},text:{fontSize:h.fontSize},legend:{labelFontSize:h.fontSize,titleFontSize:h.fontSize}},data:{values:f,name:"values"},mark:{type:"bar",tooltip:!0},encoding:{x:{field:"index",type:y,axis:x},y:{field:"value",type:b,axis:w},color:_}},r.next=23,s.nextFrame();case 23:return r.next=25,o.default(i,S,k);case 25:C=r.sent,l.set(i,{view:C.view,lastOptions:h});case 27:case"end":return r.stop()}}),a)})))};var c={xLabel:"",yLabel:"",xType:"ordinal",yType:"quantitative",fontSize:11},l=new Map},8249:function(e,t,n){"use strict";var r=n(4322),a=n(9504).default,i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=o(n(593)),s=n(1522),c=n(1253);t.confusionMatrix=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i(this,void 0,void 0,r.mark((function i(){var o,f,h,d,p,v,g,m,y,b,x,w,k,_,S,C,E,A;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(o=Object.assign({},l,n),f=c.getDrawArea(e),h=[],d=t.values,p=t.tickLabels||[],v=0===p.length,g=!0,m=0;m<d.length;m++)for(y=v?"Class ".concat(m):p[m],v&&p.push(y),b=0;b<d[m].length;b++)x=v?"Class ".concat(b):p[b],w=d[m][b],m!==b||o.shadeDiagonal?(h.push({label:y,prediction:x,count:w,scaleCount:w}),0!==w&&(g=!1)):h.push({label:y,prediction:x,count:w,noFill:!0});if(!o.shadeDiagonal&&g){k=a(h);try{for(k.s();!(_=k.n()).done;)!0===(S=_.value).noFill&&(S.noFill=!1,S.scaleCount=S.count)}catch(i){k.e(i)}finally{k.f()}}return C={actions:!1,mode:"vega-lite",defaultStyle:!1},E={width:o.width||s.getDefaultWidth(f),height:o.height||s.getDefaultHeight(f),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:o.fontSize,titleFontSize:o.fontSize},text:{fontSize:o.fontSize},legend:{labelFontSize:o.fontSize,titleFontSize:o.fontSize}},data:{values:h},encoding:{x:{field:"prediction",type:"ordinal",title:o.xLabel||"prediction",scale:{domain:p}},y:{field:"label",type:"ordinal",title:o.yLabel||"label",scale:{domain:p}}},layer:[{transform:[{filter:"datum.noFill != true"}],mark:{type:"rect"},encoding:{color:{field:"scaleCount",type:"quantitative",scale:{range:o.colorMap}},tooltip:[{field:"label",type:"nominal"},{field:"prediction",type:"nominal"},{field:"count",type:"quantitative"}]}}]},!1===o.shadeDiagonal&&E.layer.push({transform:[{filter:"datum.noFill == true"}],mark:{type:"rect",fill:"white"},encoding:{tooltip:[{field:"label",type:"nominal"},{field:"prediction",type:"nominal"},{field:"count",type:"quantitative"}]}}),o.showTextOverlay&&E.layer.push({mark:{type:"text",baseline:"middle"},encoding:{text:{field:"count",type:"nominal"}}}),A="string"===typeof o.colorMap?{scheme:o.colorMap}:o.colorMap,E.layer[0].encoding.color.scale.range=A,r.next=17,u.default(f,E,C);case 17:case"end":return r.stop()}}),i)})))};var l={xLabel:null,yLabel:null,xType:"nominal",yType:"nominal",shadeDiagonal:!0,fontSize:12,showTextOverlay:!0,height:400,colorMap:["#f7fbff","#4292c6"]}},5342:function(e,t,n){"use strict";var r=n(4322),a=n(4534).default,i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(3613)),c=u(n(593)),l=n(1522),f=n(5330),h=n(1253);function d(e){return i(this,void 0,void 0,r.mark((function t(){var n,a,i,o;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e instanceof s.Tensor?(n=e.shape,a=e.transpose()):(n=[e.length,e[0].length],a=s.tidy((function(){return s.tensor2d(e).transpose()}))),f.assert(2===a.rank,"Input to renderHeatmap must be a 2d array or Tensor2d"),t.next=4,a.array();case 4:return i=t.sent,a.dispose(),o=[i.length,i[0].length],f.assert(n[0]===o[1]&&n[1]===o[0],"Unexpected transposed shape. Original ".concat(n," : Transposed ").concat(o)),t.abrupt("return",i);case 9:case"end":return t.stop()}}),t)})))}function p(e,t,n){var r=e instanceof s.Tensor?e.shape:[e.length,e[0].length];0===n?f.assert(r[0]===t.length,"Length of xTickLabels (".concat(t.length,") must match number of rows")+" (".concat(r[0],")")):1===n&&f.assert(r[1]===t.length,"Length of yTickLabels (".concat(t.length,") must match number of columns (").concat(r[1],")"))}t.heatmap=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i(this,void 0,void 0,r.mark((function i(){var o,u,g,m,y,b,x,w,k,_,S,C,E,A,N,T,M,D,F,I,O,R,Z,B,z,L,P,j;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=Object.assign({},v,n),u=h.getDrawArea(e),g=t.values,!o.rowMajor){r.next=7;break}return r.next=6,d(t.values);case 6:g=r.sent;case 7:if(m=t.xTickLabels,y=t.yTickLabels,null!=m&&(0,p(g,m,0)),null!=y&&(1,p(g,y,1)),b="@tfidx@",x=[],!(g instanceof s.Tensor)){r.next=21;break}return f.assert(2===g.rank,"Input to renderHeatmap must be a 2d array or Tensor2d"),r.next=16,g.data();case 16:for(w=r.sent,k=a(g.shape,2),_=k[0],S=k[1],C=0;C<_;C++)for(E=m?"".concat(m[C]).concat(b).concat(C):C,A=0;A<S;A++)N=y?"".concat(y[A]).concat(b).concat(A):A,T=w[C*S+A],x.push({x:E,y:N,value:T});r.next=23;break;case 21:for(M=g,D=0;D<M.length;D++)for(F=m?"".concat(m[D]).concat(b).concat(D):D,I=0;I<M[D].length;I++)O=y?"".concat(y[I]).concat(b).concat(I):I,R=M[D][I],x.push({x:F,y:O,value:R});case 23:Z={actions:!1,mode:"vega-lite",defaultStyle:!1},B={width:o.width||l.getDefaultWidth(u),height:o.height||l.getDefaultHeight(u),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:o.fontSize,titleFontSize:o.fontSize},text:{fontSize:o.fontSize},legend:{labelFontSize:o.fontSize,titleFontSize:o.fontSize},scale:{bandPaddingInner:0,bandPaddingOuter:0}},data:{values:x},mark:{type:"rect",tooltip:!0},encoding:{x:{field:"x",type:o.xType,title:o.xLabel,sort:!1},y:{field:"y",type:o.yType,title:o.yLabel,sort:!1},fill:{field:"value",type:"quantitative"}}},z="".concat(b,"\\d+$"),L=new RegExp(z),m&&(B.encoding.x.axis={labelExpr:"replace(datum.value, regexp(/".concat(z,"/), '')")}),y&&(B.encoding.y.axis={labelExpr:"replace(datum.value, regexp(/".concat(z,"/), '')")}),(m||y)&&(Z.tooltip={sanitize:function(e){return String(e).replace(L,"")}}),r.t0=o.colorMap,r.next="blues"===r.t0?33:"greyscale"===r.t0?35:(r.t0,37);break;case 33:return P=["#f7fbff","#4292c6"],r.abrupt("break",39);case 35:return P=["#000000","#ffffff"],r.abrupt("break",39);case 37:return P="viridis",r.abrupt("break",39);case 39:return"viridis"!==P&&(B.encoding.fill.scale={range:P}),o.domain&&(null!=(j=B.encoding.fill).scale?j.scale=Object.assign({},j.scale,{domain:o.domain}):j.scale={domain:o.domain}),r.next=43,c.default(u,B,Z);case 43:case"end":return r.stop()}}),i)})))};var v={xLabel:null,yLabel:null,xType:"ordinal",yType:"ordinal",colorMap:"viridis",fontSize:12,domain:null,rowMajor:!1}},6863:function(e,t,n){"use strict";var r=n(4322),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3082),u=i(n(593)),s=n(1522),c=n(1207),l=n(3413),f={maxBins:12,fontSize:11};function h(e,t,n){var r=o.format(",.4~f"),a=o.format(".4~p"),i=[],u=[];if(null!=e.numVals&&(i.push("Num Vals"),u.push(r(e.numVals))),null!=e.min&&(i.push("Min"),u.push(r(e.min))),null!=e.max&&(i.push("Max"),u.push(r(e.max))),null!=e.numZeros){i.push("# Zeros");var s="";e.numVals&&(s=e.numZeros>0?"(".concat(a(e.numZeros/e.numVals),")"):""),u.push("".concat(r(e.numZeros)," ").concat(s))}if(null!=e.numNans){i.push("# NaNs");var c="";e.numVals&&(c=e.numNans>0?"(".concat(a(e.numNans/e.numVals),")"):""),u.push("".concat(r(e.numNans)," ").concat(c))}if(null!=e.numInfs){i.push("# Infinity");var f="";e.numVals&&(f=e.numInfs>0?"(".concat(a(e.numInfs/e.numVals),")"):""),u.push("".concat(r(e.numInfs)," ").concat(f))}l.table(t,{headers:i,values:[u]},n)}function d(e){if(null==e.length)throw new Error("input data must be an array");if(0===e.length)return[];if("object"===typeof e[0]){if(null==e[0].value)throw new Error("input data must have a value field");return e}for(var t=Array(e.length),n=0;n<e.length;n++)t[n]={value:e[n]};return t}t.histogram=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a(this,void 0,void 0,r.mark((function a(){var i,o,l,p,v,g,m,y,b;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=d(t),o=Object.assign({},f,n),l={actions:!1,mode:"vega-lite",defaultStyle:!1},p=s.subSurface(e,"histogram"),!1!==n.stats&&(v=s.subSurface(e,"stats",{prepend:!0}),h(n.stats?n.stats:c.arrayStats(i.map((function(e){return e.value}))),v,{fontSize:o.fontSize})),0!==i.length){r.next=7;break}return r.abrupt("return",void 0);case 7:for(g=[],m=0;m<i.length;m++)null!=(y=i[m].value)&&isFinite(y)&&g.push(i[m]);return b={width:o.width||s.getDefaultWidth(p),height:o.height||s.getDefaultHeight(p),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},data:{values:g},mark:{type:"bar",tooltip:!0},config:{axis:{labelFontSize:o.fontSize,titleFontSize:o.fontSize},text:{fontSize:o.fontSize},legend:{labelFontSize:o.fontSize,titleFontSize:o.fontSize}},encoding:{x:{bin:{maxbins:o.maxBins},field:"value",type:"quantitative"},y:{aggregate:"count",type:"quantitative"},color:{value:o.color||"#001B44"}}},r.abrupt("return",u.default(p,b,l));case 11:case"end":return r.stop()}}),a)})))}},298:function(e,t,n){"use strict";var r=n(4322),a=n(8485).default,i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=o(n(593)),s=n(1522),c=n(5330),l=n(1253);t.linechart=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i(this,void 0,void 0,r.mark((function i(){var o,h,d,p,v,g,m,y,b,x,w,k,_,S;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(o=Array.isArray(t.values[0])?t.values:[t.values],h=o[0].length,d=t.series?t.series:o.map((function(e,t){return"Series ".concat(t+1)})),c.assert(d.length===o.length,"Must have an equal number of series labels as there are data series"),null!=n.seriesColors&&c.assert(n.seriesColors.length===o.length,"Must have an equal number of series colors as there are data series"),p=[],v=function(e){var t={x:e};d.forEach((function(n,r){var a=o[r][e].y;t[n]=a,t["".concat(n,"-name")]=n})),p.push(t)},g=0;g<h;g++)v(g);return m=Object.assign({},f,n),y=function(){return m.zoomToFit?{zero:!1}:null!=m.yAxisDomain?{domain:m.yAxisDomain}:void 0},b={x:{field:"x",type:m.xType,title:m.xLabel},tooltip:[{field:"x",type:"quantitative"}].concat(a(d.map((function(e){return{field:e,type:"quantitative"}}))))},x=d.map((function(e){return{data:void 0,mark:{type:"line",clip:!0},encoding:{y:{field:e,type:m.yType,title:m.yLabel,scale:y()},color:{field:"".concat(e,"-name"),type:"nominal",legend:{values:d,title:null},scale:{range:m.seriesColors}}}}})),w={mark:"rule",selection:{hover:{type:"single",on:"mouseover",nearest:!0,clear:"mouseout"}},encoding:{color:{value:"grey",condition:{selection:{not:"hover"},value:"transparent"}}}},k=l.getDrawArea(e),_={width:m.width||s.getDefaultWidth(k),height:m.height||s.getDefaultHeight(k),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:m.fontSize,titleFontSize:m.fontSize},text:{fontSize:m.fontSize},legend:{labelFontSize:m.fontSize,titleFontSize:m.fontSize}},data:{values:p},encoding:b,layer:[].concat(a(x),[w])},S={actions:!1,mode:"vega-lite",defaultStyle:!1},r.next=18,u.default(k,_,S);case 18:return r.abrupt("return",Promise.resolve());case 19:case"end":return r.stop()}}),i)})))};var f={xLabel:"x",yLabel:"y",xType:"quantitative",yType:"quantitative",zoomToFit:!1,fontSize:11}},1253:function(e,t,n){"use strict";var r=n(4322),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=n(9263),o=n(2890);t.getDrawArea=function(e){if(e instanceof HTMLElement)return e;if(i.isSurface(e))return e.drawArea;if(i.isSurfaceInfo(e))return o.visor().surface({name:e.name,tab:e.tab,styles:e.styles}).drawArea;throw new Error("Not a drawable")},t.shallowEquals=function(e,t){var n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(t);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++){var i=n[a];if(e[i]!==t[i])return!1}return!0},t.nextFrame=function(){return a(this,void 0,void 0,r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return requestAnimationFrame(e)}));case 2:case"end":return e.stop()}}),e)})))}},6623:function(e,t,n){"use strict";var r=n(4322),a=n(8485).default,i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=o(n(593)),s=n(1522),c=n(5330),l=n(1253);t.scatterplot=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i(this,void 0,void 0,r.mark((function i(){var o,h,d,p,v,g,m,y,b;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=t.values,h=null==t.series?[]:t.series,o=Array.isArray(o[0])?o:[o],d=[],o.forEach((function(e,t){var n=null!=h[t]?h[t]:"Series ".concat(t+1),r=e.map((function(e){return Object.assign({},e,{series:n})}));d.push.apply(d,a(r))})),null!=n.seriesColors&&c.assert(n.seriesColors.length===o.length,"Must have an equal number of series colors as there are data series"),p=l.getDrawArea(e),v=Object.assign({},f,n),g={actions:!1,mode:"vega-lite",defaultStyle:!1},m=function(){return v.zoomToFit?{zero:!1}:null!=v.xAxisDomain?{domain:v.xAxisDomain}:void 0},y=function(){return v.zoomToFit?{zero:!1}:null!=v.yAxisDomain?{domain:v.yAxisDomain}:void 0},b={width:v.width||s.getDefaultWidth(p),height:v.height||s.getDefaultHeight(p),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:v.fontSize,titleFontSize:v.fontSize},text:{fontSize:v.fontSize},legend:{labelFontSize:v.fontSize,titleFontSize:v.fontSize}},data:{values:d},mark:{type:"point",clip:!0,tooltip:{content:"data"}},encoding:{x:{field:"x",type:v.xType,title:v.xLabel,scale:m()},y:{field:"y",type:v.yType,title:v.yLabel,scale:y()},color:{field:"series",type:"nominal",scale:{range:v.seriesColors}},shape:{field:"series",type:"nominal"}}},r.next=14,u.default(p,b,g);case 14:return r.abrupt("return",Promise.resolve());case 15:case"end":return r.stop()}}),i)})))};var f={xLabel:"x",yLabel:"y",xType:"quantitative",yType:"quantitative",zoomToFit:!1,fontSize:11}},3413:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3082),a=n(6360),i=n(7938),o=n(1253);t.table=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t&&null==t.headers)throw new Error('Data to render must have a "headers" property');if(t&&null==t.values)throw new Error('Data to render must have a "values" property');var s=o.getDrawArea(e),c=Object.assign({},u,n),l=a.select(s).select("table.tf-table"),f=i.css({fontSize:c.fontSize||".875rem",width:"100%",maxWidth:"64rem",marginRight:"auto",marginLeft:"auto"});if(0===l.size()&&((l=a.select(s).append("table")).attr("class"," ".concat(f," tf-table")),l.append("thead").append("tr"),l.append("tbody")),1!==l.size())throw new Error("Error inserting table");var h=i.css({fontWeight:"600",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgba( 0, 0, 0, .2 )",textAlign:"left",paddingBottom:"1rem",paddingRight:"1rem",backgroundColor:"#fff"}),d=l.select("thead").select("tr").selectAll("th").data(t.headers),p=d.enter().append("th").attr("class","".concat(h));d.merge(p).html((function(e){return e})),d.exit().remove();var v=r.format(",.4~f"),g=l.select("tbody").selectAll("tr").data(t.values),m=g.enter().append("tr"),y=i.css({padding:"0.25rem",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgba( 0, 0, 0, .2 )"}),b=g.merge(m).selectAll("td").data((function(e){return e})),x=b.enter().append("td").attr("class","".concat(y));b.merge(x).html((function(e){return"number"===typeof e?v(e):e})),b.exit().remove(),g.exit().remove()};var u={fontSize:14}},4469:function(e,t,n){"use strict";var r=n(1955).default,a=n(4322),i=n(9504).default,o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var u=n(298),s=n(1253),c=n(1522);function l(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return o(this,void 0,void 0,a.mark((function o(){var l,d,p,v,g,m,y,b,x,w,k,_,S,C,E,A,N,T;return a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:l=s.getDrawArea(e),d={},p=i(n);try{for(p.s();!(v=p.n()).done;)g=v.value,/val_/.test(g)?(y=g.replace("val_",""),f(d,y),b=h(t,g,n.indexOf(g)),d[y].series.push(g),d[y].values.push(b)):(m=h(t,g,n.indexOf(g)),f(d,g),d[g].series.push(g),d[g].values.push(m))}catch(o){p.e(o)}finally{p.f()}for(x=Object.keys(d),w=Object.assign({},{xLabel:"Iteration",yLabel:"Value"},r),k=[],_=0,S=x;_<S.length;_++)C=S[_],E=c.subSurface(l,C),A=d[C].series,N=d[C].values,A.every((function(e){return Boolean(e.match("acc"))}))&&(w.zoomToFitAccuracy?w.zoomToFit=!0:(w.yAxisDomain=[0,1],delete w.zoomToFit)),T=u.linechart(E,{values:N,series:A},w),k.push(T);return a.next=10,Promise.all(k);case 10:case"end":return a.stop()}}),o)})))}function f(e,t){null==e[t]&&(e[t]={series:[],values:[]})}function h(e,t,n){if(Array.isArray(e)){for(var r=Array.isArray(e[0])?e[n]:e,a=[],i=0;i<r.length;i++){var o=r[i];a.push({x:i,y:o[t]})}return a}return e.history[t].map((function(e,t){return{x:t,y:e}}))}function d(e,t,n){return null==e[t]&&(e[t]={}),null==e[t][n]&&(e[t][n]=[]),e[t][n]}t.history=l,t.fitCallbacks=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u={},f=n.callbacks||["onEpochEnd","onBatchEnd"],h=s.getDrawArea(e),p=Object.assign({},n);function v(e){var n=this;return function(f,v){return o(n,void 0,void 0,a.mark((function n(){var o,f,g,m,y,b;return a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:/batch/i.test(e)?p.xLabel="Batch":/epoch/i.test(e)&&(p.xLabel="Epoch"),o=[],f=[],g=i(t);try{for(g.s();!(m=g.n()).done;)y=m.value,null!=v[y]&&(f.push(y),(b=d(u,e,y)).push(r({},y,v[y])),o.push(b))}catch(a){g.e(a)}finally{g.f()}return l(c.subSurface(h,e,{title:e}),o,f,p),n.next=9,s.nextFrame();case 9:case"end":return n.stop()}}),n)})))}}delete p.callbacks;var g={};return f.forEach((function(e){g[e]=v(e)})),g}},9653:function(e,t,n){"use strict";var r=n(4322),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=n(6863),o=n(1253),u=n(3413),s=n(1522),c=n(1207);function l(e){return{layers:e.layers.map(f)}}function f(e){var t;if(Array.isArray(e.outputShape[0])){var n=e.outputShape.map((function(e){return d(e)}));t="[".concat(n.join(", "),"]")}else t=d(e.outputShape);return{name:e.name,trainable:e.trainable,parameters:e.countParams(),outputShape:t}}function h(e){return a(this,void 0,void 0,r.mark((function t(){var n,a,i,o,u;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.getWeights(),a=e.weights,i=n.map(c.tensorStats),t.next=5,Promise.all(i);case 5:return o=t.sent,u=n.map((function(e){return e.shape})),t.abrupt("return",n.map((function(e,t){return{name:a[t].name,stats:o[t],shape:d(u[t]),weight:e}})));case 8:case"end":return t.stop()}}),t)})))}function d(e){var t=e.slice();return 0===t.length?"Scalar":(null===t[0]&&(t[0]="batch"),"[".concat(t.join(","),"]"))}function p(e,t,n){var r="\n    <select>\n      ".concat(e.map((function(e){return"<option value=".concat(e,">").concat(e,"</option>")})),"\n    </select>\n  "),a="<div>".concat("<button>Show Values Distribution for:</button>").concat(r,"</div>");t.innerHTML=a;var i=t.querySelector("button"),o=t.querySelector("select");i.addEventListener("click",(function(){n(o.selectedOptions[0].label)}))}t.modelSummary=function(e,t){return a(this,void 0,void 0,r.mark((function n(){var a,i,s,c;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=o.getDrawArea(e),i=l(t),s=["Layer Name","Output Shape","# Of Params","Trainable"],c=i.layers.map((function(e){return[e.name,e.outputShape,e.parameters,e.trainable]})),u.table(a,{headers:s,values:c});case 5:case"end":return n.stop()}}),n)})))},t.layer=function(e,t){return a(this,void 0,void 0,r.mark((function n(){var c,l,f,d,v,g,m,y,b=this;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=o.getDrawArea(e),n.next=3,h(t);case 3:l=n.sent,f=["Weight Name","Shape","Min","Max","# Params","# Zeros","# NaNs","# Infinity"],d=s.subSurface(c,"layer-weights-info"),v=l.map((function(e){return[e.name,e.shape,e.stats.min,e.stats.max,e.weight.size,e.stats.numZeros,e.stats.numNans,e.stats.numInfs]})),u.table(d,{headers:f,values:v}),g=s.subSurface(c,"select-layer"),m=s.subSurface(c,"param-distribution"),y=function(e){return a(b,void 0,void 0,r.mark((function t(){var n,a;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.filter((function(t){return t.name===e}))[0],t.next=3,n.weight.data();case 3:a=t.sent,i.histogram(m,a,{height:150,width:460,stats:!1});case 5:case"end":return t.stop()}}),t)})))},p(l.map((function(e){return e.name})),g,y);case 12:case"end":return n.stop()}}),n)})))}},2150:function(e,t,n){"use strict";var r=n(4322),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1253),o=n(3413);t.perClassAccuracy=function(e,t,n){return a(this,void 0,void 0,r.mark((function a(){var u,s,c,l,f,h;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(u=i.getDrawArea(e),s=["Class","Accuracy","# Samples"],c=[],l=0;l<t.length;l++)f=n?n[l]:l.toString(),h=t[l],c.push([f,h.accuracy,h.count]);return r.abrupt("return",o.table(u,{headers:s,values:c}));case 5:case"end":return r.stop()}}),a)})))}},3936:function(e,t,n){"use strict";var r=n(4322),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=n(6863),o=n(1253),u=n(1207);t.valuesDistribution=function(e,t){return a(this,void 0,void 0,r.mark((function n(){var a,s,c;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=o.getDrawArea(e),n.next=3,u.tensorStats(t);case 3:return s=n.sent,n.next=6,t.data();case 6:c=n.sent,i.histogram(a,c,{height:150,stats:s});case 8:case"end":return n.stop()}}),n)})))}},9263:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSurfaceInfo=function(e){return null!=e.name},t.isSurface=function(e){return e.drawArea instanceof HTMLElement}},1522:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7938),a=n(1253),i={prepend:!1};t.subSurface=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.getDrawArea(e),u=r.css({"& canvas":{display:"block"},marginTop:".5rem",marginBottom:".5rem"}),s=r.css({backgroundColor:"white",display:"inline-block",boxSizing:"border-box",borderBottom:"1px solid #357EDD",lineHeight:"2em",padding:"0 10px 0 10px",marginBottom:"20px",fontWeight:"600",textAlign:"left"}),c=Object.assign({},i,n),l=o.querySelector("div[data-name=".concat(t,"]"));if(!l){if((l=document.createElement("div")).setAttribute("class","".concat(u)),l.dataset.name=t,c.title){var f=document.createElement("div");f.setAttribute("class","subsurface-title ".concat(s)),f.innerText=c.title,l.appendChild(f)}c.prepend?o.insertBefore(l,o.firstChild):o.appendChild(l)}return l},t.getDefaultWidth=function(e){for(var t=0,n=e;n&&0===n.clientWidth;)n=n.parentElement,t=50;return n.clientWidth-t},t.getDefaultHeight=function(e){return 0===e.clientHeight?200:e.clientHeight}},1207:function(e,t,n){"use strict";var r=n(4322),a=n(4534).default,i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3613),u=n(5330);t.arrayStats=function(e){if(!Array.isArray(e))throw new Error("input must be an array");if(0===e.length)return{numVals:0,numNans:0,numZeros:0,max:void 0,min:void 0};for(var t=e.length,n=-1/0,r=1/0,a=0,i=0,o=0,u=0;u<t;u++){var s=e[u];s>n&&(n=s),s<r&&(r=s),0===s&&(a+=1),isNaN(s)?i+=1:isFinite(s)||(o+=1)}var c={numVals:t,numZeros:a,numNans:i,max:n,min:r,numInfs:o};return c.max===-1/0&&(c.max=NaN),c.min===1/0&&(c.min=NaN),c},t.tensorStats=function(e){return i(this,void 0,void 0,r.mark((function t(){var n,i,u,s,c;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.tidy((function(){var t=o.scalar(0,e.dtype);return[e.min(),e.max(),e.equal(t).sum()]})),i=a(n,3),u=i[0],s=i[1],c=i[2],t.abrupt("return",Promise.all([e.data(),u.data(),s.data(),c.data()]).then((function(e){for(var t=a(e,4),n=t[0],r=t[1],i=t[2],o=t[3],u=n.length,s=0,c=0,l=0;l<u;l++){var f=n[l];isNaN(f)?s+=1:isFinite(f)||(c+=1)}var h=r[0],d=i[0];return s===u&&(h=NaN,d=NaN),{numVals:u,numZeros:o[0],numNans:s,min:h,max:d,numInfs:c}})));case 2:case"end":return t.stop()}}),t)})))},t.confusionMatrix=function(e,t,n,s){return i(this,void 0,void 0,r.mark((function i(){var c,l,f;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u.assert(1===e.rank,"labels must be a 1D tensor"),u.assert(1===t.rank,"predictions must be a 1D tensor"),u.assert(e.size===t.size,"labels and predictions must be the same length"),null!=s&&u.assert(s.size===t.size,"labels and predictions must be the same length"),c=e.cast("int32"),l=t.cast("int32"),null==n&&(n=o.tidy((function(){return o.maximum(c.max(),l.max()).cast("int32").dataSync()[0]+1}))),f=Promise.resolve(null),null!=s&&(f=s.data()),r.abrupt("return",Promise.all([c.data(),l.data(),f]).then((function(e){for(var t=a(e,3),r=t[0],i=t[1],o=t[2],u=Array(n).fill(0),s=0;s<n;s++)u[s]=Array(n).fill(0);for(var c=0;c<r.length;c++){var l=r[c],f=i[c];u[l][f]+=null!=o?o[c]:1}return u})));case 10:case"end":return r.stop()}}),i)})))},t.accuracy=function(e,t){return i(this,void 0,void 0,r.mark((function n(){var a,i,s;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u.assertShapesMatch(e.shape,t.shape,"Error computing accuracy."),a=e.equal(t),i=a.mean(),n.next=5,i.data();case 5:return s=n.sent[0],o.dispose([a,i]),n.abrupt("return",s);case 8:case"end":return n.stop()}}),n)})))},t.perClassAccuracy=function(e,t,n){return i(this,void 0,void 0,r.mark((function i(){return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u.assert(1===e.rank,"labels must be a 1D tensor"),u.assert(1===t.rank,"predictions must be a 1D tensor"),u.assert(e.size===t.size,"labels and predictions must be the same length"),null==n&&(n=o.tidy((function(){return o.maximum(e.max(),t.max()).dataSync()[0]+1}))),r.abrupt("return",Promise.all([e.data(),t.data()]).then((function(e){for(var t=a(e,2),r=t[0],i=t[1],o=Array(n).fill(0),u=Array(n).fill(0),s=0;s<r.length;s++){var c=r[s],l=i[s];o[c]+=1,c===l&&(u[c]+=1)}for(var f=[],h=0;h<o.length;h++)f.push({count:o[h],accuracy:0===o[h]?0:u[h]/o[h]});return f})));case 5:case"end":return r.stop()}}),i)})))}},5330:function(e,t){"use strict";function n(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function r(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.assert=n,t.assertShapesMatch=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";n(r(e,t),a+" Shapes ".concat(e," and ").concat(t," must match"))},t.arraysEqual=r,t.DECIMAL_PLACES_TO_CHECK=4},74:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.version="1.5.1"},2890:function(e,t,n){"use strict";var r=n(8064).default,a=n(8231).default;Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(1042),u="tfjs-visor-container";t.visor=function(){if("undefined"===typeof document)throw new Error("No document defined. This library needs a browser/dom to work");if(document.getElementById(u)&&null!=i)return i;var e,t=document.getElementById(u);function n(t,n){var r=null;return e=o.VisorComponent.render(t,e,{ref:function(e){return r=e},surfaceList:Array.from(n.values())}),r}null==t&&((t=document.createElement("div")).id=u,document.body.appendChild(t));var r=new Map,a=n(t,r);return i=new s(a,t,r,n)};var s=function(){function e(t,n,a,i){r(this,e),this.visorComponent=t,this.el=n,this.surfaceList=a,this.renderVisor=i}return a(e,[{key:"surface",value:function(e){var t=e.name,n=null==e.tab?"Visor":e.tab;if(null==t||!("string"===typeof t||t instanceof String))throw new Error("You must pass a config object with a 'name' property to create or retrieve a surface");var r=Object.assign({},e,{tab:n}),a="".concat(t,"-").concat(n);return this.surfaceList.has(a)||this.surfaceList.set(a,r),this.renderVisor(this.el,this.surfaceList),this.visorComponent.getSurface(t,n)}},{key:"isFullscreen",value:function(){return this.visorComponent.isFullscreen()}},{key:"isOpen",value:function(){return this.visorComponent.isOpen()}},{key:"close",value:function(){return this.visorComponent.close()}},{key:"open",value:function(){return this.visorComponent.open()}},{key:"toggle",value:function(){return this.visorComponent.toggle()}},{key:"toggleFullScreen",value:function(){return this.visorComponent.toggleFullScreen()}},{key:"bindKeys",value:function(){return this.visorComponent.bindKeys()}},{key:"unbindKeys",value:function(){return this.visorComponent.unbindKeys()}},{key:"setActiveTab",value:function(e){if(!this.visorComponent.state.tabs.has(e))throw new Error("Tab '".concat(e,"' does not exist"));this.visorComponent.setState({activeTab:e})}}]),e}();t.Visor=s},3082:function(e,t,n){"use strict";function r(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function a(e){return(e=r(Math.abs(e)))?e[1]:NaN}n.r(t),n.d(t,{format:function(){return d},formatDefaultLocale:function(){return m},formatLocale:function(){return g},formatPrefix:function(){return p},formatSpecifier:function(){return u},precisionFixed:function(){return y},precisionPrefix:function(){return b},precisionRound:function(){return x}});var i,o=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function u(e){return new s(e)}function s(e){if(!(t=o.exec(e)))throw new Error("invalid format: "+e);var t;this.fill=t[1]||" ",this.align=t[2]||">",this.sign=t[3]||"-",this.symbol=t[4]||"",this.zero=!!t[5],this.width=t[6]&&+t[6],this.comma=!!t[7],this.precision=t[8]&&+t[8].slice(1),this.trim=!!t[9],this.type=t[10]||""}function c(e,t){var n=r(e,t);if(!n)return e+"";var a=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+a:a.length>i+1?a.slice(0,i+1)+"."+a.slice(i+1):a+new Array(i-a.length+2).join("0")}u.prototype=s.prototype,s.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var l={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return c(100*e,t)},r:c,s:function(e,t){var n=r(e,t);if(!n)return e+"";var a=n[0],o=n[1],u=o-(i=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,s=a.length;return u===s?a:u>s?a+new Array(u-s+1).join("0"):u>0?a.slice(0,u)+"."+a.slice(u):"0."+new Array(1-u).join("0")+r(e,Math.max(0,t+u-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function f(e){return e}var h,d,p,v=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function g(e){var t,n,r=e.grouping&&e.thousands?(t=e.grouping,n=e.thousands,function(e,r){for(var a=e.length,i=[],o=0,u=t[0],s=0;a>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),i.push(e.substring(a-=u,a+u)),!((s+=u+1)>r));)u=t[o=(o+1)%t.length];return i.reverse().join(n)}):f,o=e.currency,s=e.decimal,c=e.numerals?function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(e.numerals):f,h=e.percent||"%";function d(e){var t=(e=u(e)).fill,n=e.align,a=e.sign,f=e.symbol,d=e.zero,p=e.width,g=e.comma,m=e.precision,y=e.trim,b=e.type;"n"===b?(g=!0,b="g"):l[b]||(null==m&&(m=12),y=!0,b="g"),(d||"0"===t&&"="===n)&&(d=!0,t="0",n="=");var x="$"===f?o[0]:"#"===f&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",w="$"===f?o[1]:/[%p]/.test(b)?h:"",k=l[b],_=/[defgprs%]/.test(b);function S(e){var o,u,l,f=x,h=w;if("c"===b)h=k(e)+h,e="";else{var S=(e=+e)<0;if(e=k(Math.abs(e),m),y&&(e=function(e){e:for(var t,n=e.length,r=1,a=-1;r<n;++r)switch(e[r]){case".":a=t=r;break;case"0":0===a&&(a=r),t=r;break;default:if(a>0){if(!+e[r])break e;a=0}}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),S&&0===+e&&(S=!1),f=(S?"("===a?a:"-":"-"===a||"("===a?"":a)+f,h=("s"===b?v[8+i/3]:"")+h+(S&&"("===a?")":""),_)for(o=-1,u=e.length;++o<u;)if(48>(l=e.charCodeAt(o))||l>57){h=(46===l?s+e.slice(o+1):e.slice(o))+h,e=e.slice(0,o);break}}g&&!d&&(e=r(e,1/0));var C=f.length+e.length+h.length,E=C<p?new Array(p-C+1).join(t):"";switch(g&&d&&(e=r(E+e,E.length?p-h.length:1/0),E=""),n){case"<":e=f+e+h+E;break;case"=":e=f+E+e+h;break;case"^":e=E.slice(0,C=E.length>>1)+f+e+h+E.slice(C);break;default:e=E+f+e+h}return c(e)}return m=null==m?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),S.toString=function(){return e+""},S}return{format:d,formatPrefix:function(e,t){var n=d(((e=u(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(a(t)/3))),i=Math.pow(10,-r),o=v[8+r/3];return function(e){return n(i*e)+o}}}}function m(e){return h=g(e),d=h.format,p=h.formatPrefix,h}function y(e){return Math.max(0,-a(Math.abs(e)))}function b(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(a(t)/3)))-a(Math.abs(e)))}function x(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,a(t)-a(e))+1}m({decimal:".",thousands:",",grouping:[3],currency:["$",""]})},3991:function(e){var t=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var t,n,r;try{t=Map}catch(u){t=function(){}}try{n=Set}catch(u){n=function(){}}try{r=Promise}catch(u){r=function(){}}function a(i,u,s,c,l){"object"===typeof u&&(s=u.depth,c=u.prototype,l=u.includeNonEnumerable,u=u.circular);var f=[],h=[],d="undefined"!=typeof Buffer;return"undefined"==typeof u&&(u=!0),"undefined"==typeof s&&(s=1/0),function i(s,p){if(null===s)return null;if(0===p)return s;var v,g;if("object"!=typeof s)return s;if(e(s,t))v=new t;else if(e(s,n))v=new n;else if(e(s,r))v=new r((function(e,t){s.then((function(t){e(i(t,p-1))}),(function(e){t(i(e,p-1))}))}));else if(a.__isArray(s))v=[];else if(a.__isRegExp(s))v=new RegExp(s.source,o(s)),s.lastIndex&&(v.lastIndex=s.lastIndex);else if(a.__isDate(s))v=new Date(s.getTime());else{if(d&&Buffer.isBuffer(s))return v=Buffer.allocUnsafe?Buffer.allocUnsafe(s.length):new Buffer(s.length),s.copy(v),v;e(s,Error)?v=Object.create(s):"undefined"==typeof c?(g=Object.getPrototypeOf(s),v=Object.create(g)):(v=Object.create(c),g=c)}if(u){var m=f.indexOf(s);if(-1!=m)return h[m];f.push(s),h.push(v)}for(var y in e(s,t)&&s.forEach((function(e,t){var n=i(t,p-1),r=i(e,p-1);v.set(n,r)})),e(s,n)&&s.forEach((function(e){var t=i(e,p-1);v.add(t)})),s){var b;g&&(b=Object.getOwnPropertyDescriptor(g,y)),b&&null==b.set||(v[y]=i(s[y],p-1))}if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(s);for(y=0;y<x.length;y++){var w=x[y];(!(_=Object.getOwnPropertyDescriptor(s,w))||_.enumerable||l)&&(v[w]=i(s[w],p-1),_.enumerable||Object.defineProperty(v,w,{enumerable:!1}))}}if(l){var k=Object.getOwnPropertyNames(s);for(y=0;y<k.length;y++){var _,S=k[y];(_=Object.getOwnPropertyDescriptor(s,S))&&_.enumerable||(v[S]=i(s[S],p-1),Object.defineProperty(v,S,{enumerable:!1}))}}return v}(i,s)}function i(e){return Object.prototype.toString.call(e)}function o(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return a.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},a.__objToStr=i,a.__isDate=function(e){return"object"===typeof e&&"[object Date]"===i(e)},a.__isArray=function(e){return"object"===typeof e&&"[object Array]"===i(e)},a.__isRegExp=function(e){return"object"===typeof e&&"[object RegExp]"===i(e)},a.__getRegExpFlags=o,a}();e.exports&&(e.exports=t)},8546:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e)};var r,a=n(7630),i=(r=a)&&r.__esModule?r:{default:r};e.exports=t.default},5216:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"string"===typeof e&&n.test(e)};var n=/-webkit-|-moz-|-ms-/;e.exports=t.default},6360:function(e,t,n){"use strict";n.r(t),n.d(t,{clientPoint:function(){return _e},create:function(){return ye},creator:function(){return s},customEvent:function(){return ce},event:function(){return re},local:function(){return xe},matcher:function(){return g},mouse:function(){return Se},namespace:function(){return i},namespaces:function(){return a},select:function(){return me},selectAll:function(){return Ce},selection:function(){return ge},selector:function(){return l},selectorAll:function(){return h},style:function(){return F},touch:function(){return Ee},touches:function(){return Ae},window:function(){return N}});var r="http://www.w3.org/1999/xhtml",a={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function i(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),a.hasOwnProperty(t)?{space:a[t],local:e}:e}function o(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===r&&t.documentElement.namespaceURI===r?t.createElement(e):t.createElementNS(n,e)}}function u(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function s(e){var t=i(e);return(t.local?u:o)(t)}function c(){}function l(e){return null==e?c:function(){return this.querySelector(e)}}function f(){return[]}function h(e){return null==e?f:function(){return this.querySelectorAll(e)}}var d=function(e){return function(){return this.matches(e)}};if("undefined"!==typeof document){var p=document.documentElement;if(!p.matches){var v=p.webkitMatchesSelector||p.msMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector;d=function(e){return function(){return v.call(this,e)}}}}var g=d;function m(e){return new Array(e.length)}function y(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}y.prototype={constructor:y,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function b(e,t,n,r,a,i){for(var o,u=0,s=t.length,c=i.length;u<c;++u)(o=t[u])?(o.__data__=i[u],r[u]=o):n[u]=new y(e,i[u]);for(;u<s;++u)(o=t[u])&&(a[u]=o)}function x(e,t,n,r,a,i,o){var u,s,c,l={},f=t.length,h=i.length,d=new Array(f);for(u=0;u<f;++u)(s=t[u])&&(d[u]=c="$"+o.call(s,s.__data__,u,t),c in l?a[u]=s:l[c]=s);for(u=0;u<h;++u)(s=l[c="$"+o.call(e,i[u],u,i)])?(r[u]=s,s.__data__=i[u],l[c]=null):n[u]=new y(e,i[u]);for(u=0;u<f;++u)(s=t[u])&&l[d[u]]===s&&(a[u]=s)}function w(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function k(e){return function(){this.removeAttribute(e)}}function _(e){return function(){this.removeAttributeNS(e.space,e.local)}}function S(e,t){return function(){this.setAttribute(e,t)}}function C(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function E(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function A(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function N(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function T(e){return function(){this.style.removeProperty(e)}}function M(e,t,n){return function(){this.style.setProperty(e,t,n)}}function D(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function F(e,t){return e.style.getPropertyValue(t)||N(e).getComputedStyle(e,null).getPropertyValue(t)}function I(e){return function(){delete this[e]}}function O(e,t){return function(){this[e]=t}}function R(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Z(e){return e.trim().split(/^|\s+/)}function B(e){return e.classList||new z(e)}function z(e){this._node=e,this._names=Z(e.getAttribute("class")||"")}function L(e,t){for(var n=B(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function P(e,t){for(var n=B(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function j(e){return function(){L(this,e)}}function U(e){return function(){P(this,e)}}function W(e,t){return function(){(t.apply(this,arguments)?L:P)(this,e)}}function V(){this.textContent=""}function q(e){return function(){this.textContent=e}}function H(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function G(){this.innerHTML=""}function X(e){return function(){this.innerHTML=e}}function Y(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function K(){this.nextSibling&&this.parentNode.appendChild(this)}function $(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Q(){return null}function J(){var e=this.parentNode;e&&e.removeChild(this)}function ee(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function te(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}z.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var ne={},re=null;"undefined"!==typeof document&&("onmouseenter"in document.documentElement||(ne={mouseenter:"mouseover",mouseleave:"mouseout"}));function ae(e,t,n){return e=ie(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function ie(e,t,n){return function(r){var a=re;re=r;try{e.call(this,this.__data__,t,n)}finally{re=a}}}function oe(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function ue(e){return function(){var t=this.__on;if(t){for(var n,r=0,a=-1,i=t.length;r<i;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++a]=n:this.removeEventListener(n.type,n.listener,n.capture);++a?t.length=a:delete this.__on}}}function se(e,t,n){var r=ne.hasOwnProperty(e.type)?ae:ie;return function(a,i,o){var u,s=this.__on,c=r(t,i,o);if(s)for(var l=0,f=s.length;l<f;++l)if((u=s[l]).type===e.type&&u.name===e.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=c,u.capture=n),void(u.value=t);this.addEventListener(e.type,c,n),u={type:e.type,name:e.name,value:t,listener:c,capture:n},s?s.push(u):this.__on=[u]}}function ce(e,t,n,r){var a=re;e.sourceEvent=re,re=e;try{return t.apply(n,r)}finally{re=a}}function le(e,t,n){var r=N(e),a=r.CustomEvent;"function"===typeof a?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function fe(e,t){return function(){return le(this,e,t)}}function he(e,t){return function(){return le(this,e,t.apply(this,arguments))}}var de=[null];function pe(e,t){this._groups=e,this._parents=t}function ve(){return new pe([[document.documentElement]],de)}pe.prototype=ve.prototype={constructor:pe,select:function(e){"function"!==typeof e&&(e=l(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o,u=t[a],s=u.length,c=r[a]=new Array(s),f=0;f<s;++f)(i=u[f])&&(o=e.call(i,i.__data__,f,u))&&("__data__"in i&&(o.__data__=i.__data__),c[f]=o);return new pe(r,this._parents)},selectAll:function(e){"function"!==typeof e&&(e=h(e));for(var t=this._groups,n=t.length,r=[],a=[],i=0;i<n;++i)for(var o,u=t[i],s=u.length,c=0;c<s;++c)(o=u[c])&&(r.push(e.call(o,o.__data__,c,u)),a.push(o));return new pe(r,a)},filter:function(e){"function"!==typeof e&&(e=g(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o=t[a],u=o.length,s=r[a]=[],c=0;c<u;++c)(i=o[c])&&e.call(i,i.__data__,c,o)&&s.push(i);return new pe(r,this._parents)},data:function(e,t){if(!e)return p=new Array(this.size()),l=-1,this.each((function(e){p[++l]=e})),p;var n,r=t?x:b,a=this._parents,i=this._groups;"function"!==typeof e&&(n=e,e=function(){return n});for(var o=i.length,u=new Array(o),s=new Array(o),c=new Array(o),l=0;l<o;++l){var f=a[l],h=i[l],d=h.length,p=e.call(f,f&&f.__data__,l,a),v=p.length,g=s[l]=new Array(v),m=u[l]=new Array(v);r(f,h,g,m,c[l]=new Array(d),p,t);for(var y,w,k=0,_=0;k<v;++k)if(y=g[k]){for(k>=_&&(_=k+1);!(w=m[_])&&++_<v;);y._next=w||null}}return(u=new pe(u,a))._enter=s,u._exit=c,u},enter:function(){return new pe(this._enter||this._groups.map(m),this._parents)},exit:function(){return new pe(this._exit||this._groups.map(m),this._parents)},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,a=n.length,i=Math.min(r,a),o=new Array(r),u=0;u<i;++u)for(var s,c=t[u],l=n[u],f=c.length,h=o[u]=new Array(f),d=0;d<f;++d)(s=c[d]||l[d])&&(h[d]=s);for(;u<r;++u)o[u]=t[u];return new pe(o,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,a=e[t],i=a.length-1,o=a[i];--i>=0;)(r=a[i])&&(o&&o!==r.nextSibling&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=w);for(var n=this._groups,r=n.length,a=new Array(r),i=0;i<r;++i){for(var o,u=n[i],s=u.length,c=a[i]=new Array(s),l=0;l<s;++l)(o=u[l])&&(c[l]=o);c.sort(t)}return new pe(a,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each((function(){e[++t]=this})),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,i=r.length;a<i;++a){var o=r[a];if(o)return o}return null},size:function(){var e=0;return this.each((function(){++e})),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a,i=t[n],o=0,u=i.length;o<u;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this},attr:function(e,t){var n=i(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?_:k:"function"===typeof t?n.local?A:E:n.local?C:S)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?T:"function"===typeof t?D:M)(e,t,null==n?"":n)):F(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?I:"function"===typeof t?R:O)(e,t)):this.node()[e]},classed:function(e,t){var n=Z(e+"");if(arguments.length<2){for(var r=B(this.node()),a=-1,i=n.length;++a<i;)if(!r.contains(n[a]))return!1;return!0}return this.each(("function"===typeof t?W:t?j:U)(n,t))},text:function(e){return arguments.length?this.each(null==e?V:("function"===typeof e?H:q)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?G:("function"===typeof e?Y:X)(e)):this.node().innerHTML},raise:function(){return this.each(K)},lower:function(){return this.each($)},append:function(e){var t="function"===typeof e?e:s(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:s(e),r=null==t?Q:"function"===typeof t?t:l(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(J)},clone:function(e){return this.select(e?te:ee)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,a,i=oe(e+""),o=i.length;if(!(arguments.length<2)){for(u=t?se:ue,null==n&&(n=!1),r=0;r<o;++r)this.each(u(i[r],t,n));return this}var u=this.node().__on;if(u)for(var s,c=0,l=u.length;c<l;++c)for(r=0,s=u[c];r<o;++r)if((a=i[r]).type===s.type&&a.name===s.name)return s.value},dispatch:function(e,t){return this.each(("function"===typeof t?he:fe)(e,t))}};var ge=ve;function me(e){return"string"===typeof e?new pe([[document.querySelector(e)]],[document.documentElement]):new pe([[e]],de)}function ye(e){return me(s(e).call(document.documentElement))}var be=0;function xe(){return new we}function we(){this._="@"+(++be).toString(36)}function ke(){for(var e,t=re;e=t.sourceEvent;)t=e;return t}function _e(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}function Se(e){var t=ke();return t.changedTouches&&(t=t.changedTouches[0]),_e(e,t)}function Ce(e){return"string"===typeof e?new pe([document.querySelectorAll(e)],[document.documentElement]):new pe([null==e?[]:e],de)}function Ee(e,t,n){arguments.length<3&&(n=t,t=ke().changedTouches);for(var r,a=0,i=t?t.length:0;a<i;++a)if((r=t[a]).identifier===n)return _e(e,r);return null}function Ae(e,t){null==t&&(t=ke().touches);for(var n=0,r=t?t.length:0,a=new Array(r);n<r;++n)a[n]=_e(e,t[n]);return a}we.prototype=xe.prototype={constructor:we,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}}},8262:function(e){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,a,i;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(a=r;0!==a--;)if(!e(t[a],n[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(a=r;0!==a--;)if(!Object.prototype.hasOwnProperty.call(n,i[a]))return!1;for(a=r;0!==a--;){var o=i[a];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}},2248:function(e){"use strict";e.exports=function(e,t){t||(t={}),"function"===typeof t&&(t={cmp:t});var n,r="boolean"===typeof t.cycles&&t.cycles,a=t.cmp&&(n=t.cmp,function(e){return function(t,r){var a={key:t,value:e[t]},i={key:r,value:e[r]};return n(a,i)}}),i=[];return function e(t){if(t&&t.toJSON&&"function"===typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!==typeof t)return JSON.stringify(t);var n,o;if(Array.isArray(t)){for(o="[",n=0;n<t.length;n++)n&&(o+=","),o+=e(t[n])||"null";return o+"]"}if(null===t)return"null";if(-1!==i.indexOf(t)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=i.push(t)-1,s=Object.keys(t).sort(a&&a(t));for(o="",n=0;n<s.length;n++){var c=s[n],l=e(t[c]);l&&(o&&(o+=","),o+=JSON.stringify(c)+":"+l)}return i.splice(u,1),"{"+o+"}"}}(e)}},6514:function(e){"use strict";var t=/-(.)/g;e.exports=function(e){return e.replace(t,(function(e,t){return t.toUpperCase()}))}},4023:function(e,t,n){"use strict";var r=n(6514),a=/^-ms-/;e.exports=function(e){return r(e.replace(a,"ms-"))}},9394:function(e){"use strict";function t(e){return function(){return e}}var n=function(){};n.thatReturns=t,n.thatReturnsFalse=t(!1),n.thatReturnsTrue=t(!0),n.thatReturnsNull=t(null),n.thatReturnsThis=function(){return this},n.thatReturnsArgument=function(e){return e},e.exports=n},8186:function(e){"use strict";var t=/([A-Z])/g;e.exports=function(e){return e.replace(t,"-$1").toLowerCase()}},3476:function(e,t,n){"use strict";var r=n(8186),a=/^ms-/;e.exports=function(e){return r(e).replace(a,"-ms-")}},7983:function(e){"use strict";e.exports=function(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}},3255:function(e,t,n){"use strict";var r=n(9394);e.exports=r},4100:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowStart:!0,gridRowEnd:!0,gridColumn:!0,gridColumnStart:!0,gridColumnEnd:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};var r=["Webkit","ms","Moz","O"];Object.keys(n).forEach((function(e){r.forEach((function(t){n[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(t,e)]=n[e]}))}));var a={isUnitlessNumber:n,shorthandPropertyExpansions:{background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}}};t.default=a},1934:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(4100));a(n(3255));function a(e){return e&&e.__esModule?e:{default:e}}var i=r.default.isUnitlessNumber;t.default=function(e,t,n){return null==t||"boolean"===typeof t||""===t?"":isNaN(t)||0===t||i.hasOwnProperty(e)&&i[e]?""+t:("string"===typeof t&&(t=t.trim()),t+"px")}},7811:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processStyleName=void 0,t.createMarkupForStyles=function(e,t){var n="";for(var a in e){var i=0===a.indexOf("--");if(e.hasOwnProperty(a)&&"label"!==a){var o=e[a];0,null!=o&&(i?n+=a+":"+o+";":(n+=u(a)+":",n+=(0,r.default)(a,o,t)+";"))}}return n||null};o(n(4023));var r=o(n(1934)),a=o(n(3476)),i=o(n(7983));o(n(3255));function o(e){return e&&e.__esModule?e:{default:e}}var u=t.processStyleName=(0,i.default)(a.default)},5758:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e){if(function(e){return null===e||void 0===e||!1===e||"object"===("undefined"===typeof e?"undefined":n(e))&&0===Object.keys(e).length}(e))return null;if("object"!==("undefined"===typeof e?"undefined":n(e)))return e;for(var t={},r=Object.keys(e),i=!1,o=0;o<r.length;o++){var u=e[r[o]],s=a(u);null!==s&&s===u||(i=!0),null!==s&&(t[r[o]]=s)}return 0===Object.keys(t).length?null:i?t:e}function a(e){return Array.isArray(e)?function(e){var t=!1,n=[];return e.forEach((function(e){var r=a(e);null!==r&&r===e||(t=!0),null!==r&&n.push(r)})),0==n.length?null:t?n:e}(e):r(e)}t.default=a},7595:function(e,t){"use strict";function n(e,t){return e.charCodeAt(t++)+(e.charCodeAt(t++)<<8)+(e.charCodeAt(t++)<<16)+(e.charCodeAt(t)<<24)}function r(e,t){return e.charCodeAt(t++)+(e.charCodeAt(t++)<<8)}function a(e,t){return(65535&(e|=0))*(t|=0)+(((e>>>16)*t&65535)<<16)|0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var i=1540483477,o=t^e.length,u=e.length,s=0;for(;u>=4;){var c=n(e,s);c=a(c,i),c=a(c^=c>>>24,i),o=a(o,i),o^=c,s+=4,u-=4}switch(u){case 3:o^=r(e,s),o=a(o^=e.charCodeAt(s+2)<<16,i);break;case 2:o=a(o^=r(e,s),i);break;case 1:o=a(o^=e.charCodeAt(s),i)}return o=a(o^=o>>>13,i),(o^=o>>>15)>>>0}},7938:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compose=t.merge=t.$=t.style=t.presets=t.keyframes=t.fontFace=t.insertGlobal=t.insertRule=t.plugins=t.styleSheet=void 0,t.speedy=function(e){return f.speedy(e)},t.simulations=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];v=!!e},t.simulate=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!(t=(0,o.default)(t)))return{};if(!v)return g||(console.warn("can't simulate without once calling simulations(true)"),g=!0),m||(console.warn("don't use simulation outside dev"),m=!0),{};return t.reduce((function(e,t){return e["data-simulate-"+b(t)]="",e}),{})},t.cssLabels=function(e){y=!!e},t.isLikeRule=w,t.idFor=k,t.css=V,t.rehydrate=function(e){(0,r.default)(T,e.reduce((function(e,t){return e[t]=!0,e}),{}))},t.flush=function(){T=f.inserted={},M=f.registered={},F={},f.flush(),f.inject()},t.select=H,t.parent=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return V(l({},e+" &",n))},t.media=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return V(l({},"@media "+e,n))},t.pseudo=G,t.active=function(e){return G(":active",e)},t.any=function(e){return G(":any",e)},t.checked=function(e){return G(":checked",e)},t.disabled=function(e){return G(":disabled",e)},t.empty=function(e){return G(":empty",e)},t.enabled=function(e){return G(":enabled",e)},t._default=function(e){return G(":default",e)},t.first=function(e){return G(":first",e)},t.firstChild=function(e){return G(":first-child",e)},t.firstOfType=function(e){return G(":first-of-type",e)},t.fullscreen=function(e){return G(":fullscreen",e)},t.focus=function(e){return G(":focus",e)},t.hover=function(e){return G(":hover",e)},t.indeterminate=function(e){return G(":indeterminate",e)},t.inRange=function(e){return G(":in-range",e)},t.invalid=function(e){return G(":invalid",e)},t.lastChild=function(e){return G(":last-child",e)},t.lastOfType=function(e){return G(":last-of-type",e)},t.left=function(e){return G(":left",e)},t.link=function(e){return G(":link",e)},t.onlyChild=function(e){return G(":only-child",e)},t.onlyOfType=function(e){return G(":only-of-type",e)},t.optional=function(e){return G(":optional",e)},t.outOfRange=function(e){return G(":out-of-range",e)},t.readOnly=function(e){return G(":read-only",e)},t.readWrite=function(e){return G(":read-write",e)},t.required=function(e){return G(":required",e)},t.right=function(e){return G(":right",e)},t.root=function(e){return G(":root",e)},t.scope=function(e){return G(":scope",e)},t.target=function(e){return G(":target",e)},t.valid=function(e){return G(":valid",e)},t.visited=function(e){return G(":visited",e)},t.dir=function(e,t){return G(":dir("+e+")",t)},t.lang=function(e,t){return G(":lang("+e+")",t)},t.not=function(e,t){var n=e.split(",").map((function(e){return e.trim()})).map((function(e){return":not("+e+")"}));if(1===n.length)return G(":not("+e+")",t);return H(n.join(""),t)},t.nthChild=function(e,t){return G(":nth-child("+e+")",t)},t.nthLastChild=function(e,t){return G(":nth-last-child("+e+")",t)},t.nthLastOfType=function(e,t){return G(":nth-last-of-type("+e+")",t)},t.nthOfType=function(e,t){return G(":nth-of-type("+e+")",t)},t.after=function(e){return G("::after",e)},t.before=function(e){return G("::before",e)},t.firstLetter=function(e){return G("::first-letter",e)},t.firstLine=function(e){return G("::first-line",e)},t.selection=function(e){return G("::selection",e)},t.backdrop=function(e){return G("::backdrop",e)},t.placeholder=function(e){return V({"::placeholder":e})},t.cssFor=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(t=(0,o.default)(t))?t.map((function(e){var t={label:[]};return z(t,{src:e}),N(x(t),A(t)).join("")})).join(""):""},t.attribsFor=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=(t=(0,o.default)(t))?t.map((function(e){k(e);var t=Object.keys(e)[0];return t+'="'+(e[t]||"")+'"'})).join(" "):"";return r};var r=c(n(4368)),a=n(1431),i=n(7811),o=c(n(5758)),u=n(63),s=c(n(7595));function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=t.styleSheet=new a.StyleSheet;f.inject();var h=t.plugins=f.plugins=new u.PluginSet([u.prefixes,u.contentWrap,u.fallbacks]);h.media=new u.PluginSet,h.fontFace=new u.PluginSet,h.keyframes=new u.PluginSet([u.prefixes,u.fallbacks]);var d=!1,p="undefined"!==typeof window,v=d,g=!1,m=!1;var y=d;function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.toLowerCase().replace(/[^a-z0-9]/g,t)}function x(e){var t=JSON.stringify(e),n=(0,s.default)(t).toString(36);return e.label&&e.label.length,n}function w(e){var t=Object.keys(e).filter((function(e){return"toString"!==e}));return 1===t.length&&!!/data\-css\-([a-zA-Z0-9\-_]+)/.exec(t[0])}function k(e){var t=Object.keys(e).filter((function(e){return"toString"!==e}));if(1!==t.length)throw new Error("not a rule");var n=/data\-css\-([a-zA-Z0-9\-_]+)/.exec(t[0]);if(!n)throw new Error("not a rule");return n[1]}var _=/[(),]|"(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\//g;function S(e){if(-1===e.indexOf(","))return[e];for(var t,n=[],r=[],a=0;t=_.exec(e);)switch(t[0]){case"(":a++;break;case")":a--;break;case",":if(a)break;n.push(t.index)}for(t=n.length;t--;)r.unshift(e.slice(n[t]+1)),e=e.slice(0,n[t]);return r.unshift(e),r}function C(e,t){if(!e)return t.replace(/\&/g,"");if(!t)return".css-"+e+",[data-css-"+e+"]";var n=S(t).map((function(t){return t.indexOf("&")>=0?[t.replace(/\&/gm,".css-"+e),t.replace(/\&/gm,"[data-css-"+e+"]")].join(","):".css-"+e+t+",[data-css-"+e+"]"+t})).join(",");return v&&/^\&\:/.exec(t)&&!/\s/.exec(t)&&(n+=",.css-"+e+"[data-simulate-"+b(t)+"],[data-css-"+e+"][data-simulate-"+b(t)+"]"),n}function E(e){var t=e.selector,n=e.style,r=h.transform({selector:t,style:n});return r.selector+"{"+(0,i.createMarkupForStyles)(r.style)+"}"}function A(e){var t=void 0,n=void 0,r=void 0,a=void 0;return Object.keys(e).forEach((function(i){i.indexOf("&")>=0?(n=n||{})[i]=e[i]:0===i.indexOf("@media")?(r=r||{})[i]=A(e[i]):0===i.indexOf("@supports")?(a=a||{})[i]=A(e[i]):"label"===i?e.label.length>0&&((t=t||{}).label=y?e.label.join("."):""):(t=t||{})[i]=e[i]})),{plain:t,selects:n,medias:r,supports:a}}function N(e,t){var n=[],r=t.plain,a=t.selects,i=t.medias,o=t.supports;return r&&n.push(E({style:r,selector:C(e)})),a&&Object.keys(a).forEach((function(t){return n.push(E({style:a[t],selector:C(e,t)}))})),i&&Object.keys(i).forEach((function(t){return n.push(t+"{"+N(e,i[t]).join("")+"}")})),o&&Object.keys(o).forEach((function(t){return n.push(t+"{"+N(e,o[t]).join("")+"}")})),n}var T=f.inserted={};var M=f.registered={};function D(e){M[e.id]||(M[e.id]=e)}var F={};function I(e){if(D(e),function(e){if(!T[e.id]){T[e.id]=!0;var t=A(e.style),n=N(e.id,t);T[e.id]=!!p||n,n.forEach((function(e){return f.insert(e)}))}}(e),F[e.id])return F[e.id];var t=l({},"data-css-"+e.id,y&&e.label||"");return Object.defineProperty(t,"toString",{enumerable:!1,value:function(){return"css-"+e.id}}),F[e.id]=t,t}function O(e,t){var n=S(e).map((function(e){return e.indexOf("&")>=0?e:"&"+e})),r=S(t).map((function(e){return e.indexOf("&")>=0?e:"&"+e}));return r.reduce((function(e,t){return e.concat(n.map((function(e){return t.replace(/\&/g,e)})))}),[]).join(",")}function R(e,t){return e?"@supports "+e.substring(9)+" and "+t.substring(9):t}function Z(e){for(var t=[],n=0;n<e.length;n++)t=Array.isArray(e[n])?t.concat(Z(e[n])):t.concat(e[n]);return t}var B={"::placeholder":["::-webkit-input-placeholder","::-moz-placeholder","::-ms-input-placeholder"],":fullscreen":[":-webkit-full-screen",":-moz-full-screen",":-ms-fullscreen"]};function z(e,t){var n=t.selector,r=void 0===n?"":n,a=t.mq,i=void 0===a?"":a,u=t.supp,s=void 0===u?"":u,c=t.src,l=void 0===c?{}:c;Array.isArray(l)||(l=[l]),(l=Z(l)).forEach((function(t){if(w(t)){var n=function(e){if(w(e)){var t=M[k(e)];if(null==t)throw new Error("[glamor] an unexpected rule cache miss occurred. This is probably a sign of multiple glamor instances in your app. See https://github.com/threepointone/glamor/issues/79");return t}return e}(t);if("css"!==n.type)throw new Error("cannot merge this rule");t=n.style}(t=(0,o.default)(t))&&t.composes&&z(e,{selector:r,mq:i,supp:s,src:t.composes}),Object.keys(t||{}).forEach((function(n){if(function(e){for(var t=[":",".","[",">"," "],n=!1,r=e.charAt(0),a=0;a<t.length;a++)if(r===t[a]){n=!0;break}return n||e.indexOf("&")>=0}(n))B[n]&&B[n].forEach((function(a){return z(e,{selector:O(r,a),mq:i,supp:s,src:t[n]})})),z(e,{selector:O(r,n),mq:i,supp:s,src:t[n]});else if(function(e){return 0===e.indexOf("@media")}(n))z(e,{selector:r,mq:(o=i,u=n,o?"@media "+o.substring(6)+" and "+u.substring(6):u),supp:s,src:t[n]});else if(function(e){return 0===e.indexOf("@supports")}(n))z(e,{selector:r,mq:i,supp:R(s,n),src:t[n]});else if("composes"===n);else{var a=e;s&&(a[s]=a[s]||{},a=a[s]),i&&(a[i]=a[i]||{},a=a[i]),r&&(a[r]=a[r]||{},a=a[r]),"label"===n?y&&(e.label=e.label.concat(t.label)):a[n]=t[n]}var o,u}))}))}function L(e){var t={label:[]};return z(t,{src:e}),I({id:x(t),style:t,label:y?t.label.join("."):"",type:"css"})}var P={};Object.defineProperty(P,"toString",{enumerable:!1,value:function(){return"css-nil"}});var j="undefined"!==typeof WeakMap?[P,new WeakMap,new WeakMap,new WeakMap]:[P];var U,W="undefined"!==typeof WeakMap?(U=L,function(e){if(j[e.length]){for(var t=j[e.length],n=0;n<e.length-1;)t.has(e[n])||t.set(e[n],new WeakMap),t=t.get(e[n]),n++;if(t.has(e[e.length-1])){var r=t.get(e[n]);if(M[r.toString().substring(4)])return r}}var a=U(e);if(j[e.length]){for(var i=0,o=j[e.length];i<e.length-1;)o=o.get(e[i]),i++;try{o.set(e[i],a)}catch(u){}}return a}):L;function V(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t[0]&&t[0].length&&t[0].raw)throw new Error("you forgot to include glamor/babel in your babel plugins.");return(t=(0,o.default)(t))?W(t):P}V.insert=function(e){var t={id:x(e),css:e,type:"raw"};D(t),T[t.id]||(f.insert(t.css),T[t.id]=!!p||[t.css])};t.insertRule=V.insert;V.global=function(e,t){if(t=(0,o.default)(t))return V.insert(E({selector:e,style:t}))};t.insertGlobal=V.global;V.keyframes=function(e,t){t||(t=e,e="animation");var n={id:x({name:e,kfs:t=(0,o.default)(t)||{}}),type:"keyframes",name:e,keyframes:t};return D(n),function(e){if(!T[e.id]){var t=Object.keys(e.keyframes).map((function(t){var n=h.keyframes.transform({id:e.id,name:t,style:e.keyframes[t]});return n.name+"{"+(0,i.createMarkupForStyles)(n.style)+"}"})).join(""),n=["-webkit-","-moz-","-o-",""].map((function(n){return"@"+n+"keyframes "+e.name+"_"+e.id+"{"+t+"}"}));n.forEach((function(e){return f.insert(e)})),T[e.id]=!!p||n}}(n),e+"_"+n.id},V.fontFace=function(e){var t={id:x(e=(0,o.default)(e)),type:"font-face",font:e};return D(t),function(e){if(!T[e.id]){var t="@font-face{"+(0,i.createMarkupForStyles)(e.font)+"}";f.insert(t),T[e.id]=!!p||[t]}}(t),e.fontFamily};t.fontFace=V.fontFace,t.keyframes=V.keyframes;t.presets={mobile:"(min-width: 400px)",Mobile:"@media (min-width: 400px)",phablet:"(min-width: 550px)",Phablet:"@media (min-width: 550px)",tablet:"(min-width: 750px)",Tablet:"@media (min-width: 750px)",desktop:"(min-width: 1000px)",Desktop:"@media (min-width: 1000px)",hd:"(min-width: 1200px)",Hd:"@media (min-width: 1200px)"};var q=t.style=V;function H(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e?V(l({},e,n)):q(n)}t.$=H;t.merge=V,t.compose=V;function G(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return V(l({},e,n))}},63:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.PluginSet=s,t.fallbacks=function(e){if(Object.keys(e.style).map((function(t){return Array.isArray(e.style[t])})).indexOf(!0)>=0){var t=e.style,n=Object.keys(t).reduce((function(e,n){return e[n]=Array.isArray(t[n])?t[n].join("; "+(0,i.processStyleName)(n)+": "):t[n],e}),{});return(0,a.default)({},e,{style:n})}return e},t.contentWrap=function(e){if(e.style.content){var t=e.style.content;return c.indexOf(t)>=0||/^(attr|calc|counters?|url)\(/.test(t)?e:t.charAt(0)!==t.charAt(t.length-1)||'"'!==t.charAt(0)&&"'"!==t.charAt(0)?r({},e,{style:r({},e.style,{content:'"'+t+'"'})}):e}return e},t.prefixes=function(e){return(0,a.default)({},e,{style:(0,o.default)(r({},e.style))})};var a=u(n(4368)),i=n(7811),o=u(n(5824));function u(e){return e&&e.__esModule?e:{default:e}}function s(e){this.fns=e||[]}(0,a.default)(s.prototype,{add:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){e.fns.indexOf(t)>=0||(e.fns=[t].concat(e.fns))}))},remove:function(e){this.fns=this.fns.filter((function(t){return t!==e}))},clear:function(){this.fns=[]},transform:function(e){return this.fns.reduce((function(e,t){return t(e)}),e)}});var c=["normal","none","counter","open-quote","close-quote","no-open-quote","no-close-quote","initial","inherit"]},5824:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t in e){var n=e[t],r=(0,i.default)(m,t,n,e,y);r&&(e[t]=r),(0,a.default)(y,t,e)}return e};var r=g(n(9169)),a=g(n(8183)),i=g(n(4715)),o=g(n(4053)),u=g(n(4370)),s=g(n(6840)),c=g(n(4751)),l=g(n(48)),f=g(n(4810)),h=g(n(8574)),d=g(n(9091)),p=g(n(6312)),v=g(n(4500));function g(e){return e&&e.__esModule?e:{default:e}}var m=[u.default,o.default,s.default,l.default,f.default,h.default,d.default,p.default,v.default,c.default],y=r.default.prefixMap},1431:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StyleSheet=h;var r,a=n(4368),i=(r=a)&&r.__esModule?r:{default:r};function o(e){return e[e.length-1]}function u(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}var s="undefined"!==typeof window,c=!1,l=function(){if(s){var e=document.createElement("div");return e.innerHTML="\x3c!--[if lt IE 10]><i></i><![endif]--\x3e",1===e.getElementsByTagName("i").length}}();function f(){var e=document.createElement("style");return e.type="text/css",e.setAttribute("data-glamor",""),e.appendChild(document.createTextNode("")),(document.head||document.getElementsByTagName("head")[0]).appendChild(e),e}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.speedy,n=void 0===t||t,r=e.maxLength,a=void 0===r?s&&l?4e3:65e3:r;this.isSpeedy=n,this.sheet=void 0,this.tags=[],this.maxLength=a,this.ctr=0}(0,i.default)(h.prototype,{getSheet:function(){return u(o(this.tags))},inject:function(){var e=this;if(this.injected)throw new Error("already injected stylesheet!");s?this.tags[0]=f():this.sheet={cssRules:[],insertRule:function(t){e.sheet.cssRules.push({cssText:t})}},this.injected=!0},speedy:function(e){if(0!==this.ctr)throw new Error("cannot change speedy mode after inserting any rule to sheet. Either call speedy("+e+") earlier in your app, or call flush() before speedy("+e+")");this.isSpeedy=!!e},_insert:function(e){try{var t=this.getSheet();t.insertRule(e,-1!==e.indexOf("@import")?0:t.cssRules.length)}catch(n){c}},insert:function(e){if(s)if(this.isSpeedy&&this.getSheet().insertRule)this._insert(e);else if(-1!==e.indexOf("@import")){var t=o(this.tags);t.insertBefore(document.createTextNode(e),t.firstChild)}else o(this.tags).appendChild(document.createTextNode(e));else this.sheet.insertRule(e,-1!==e.indexOf("@import")?0:this.sheet.cssRules.length);return this.ctr++,s&&this.ctr%this.maxLength===0&&this.tags.push(f()),this.ctr-1},delete:function(e){return this.replace(e,"")},flush:function(){s?(this.tags.forEach((function(e){return e.parentNode.removeChild(e)})),this.tags=[],this.sheet=null,this.ctr=0):this.sheet.cssRules=[],this.injected=!1},rules:function(){if(!s)return this.sheet.cssRules;var e=[];return this.tags.forEach((function(t){return e.splice.apply(e,[e.length,0].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(Array.from(u(t).cssRules))))})),e}})},7630:function(e,t,n){"use strict";n.r(t);var r=/[A-Z]/g,a=/^ms-/,i={};function o(e){return"-"+e.toLowerCase()}t.default=function(e){if(i.hasOwnProperty(e))return i[e];var t=e.replace(r,o);return i[e]=a.test(t)?"-"+t:t}},4370:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"===typeof t&&!(0,i.default)(t)&&t.indexOf("cross-fade(")>-1)return o.map((function(e){return t.replace(/cross-fade\(/g,e+"cross-fade(")}))};var r,a=n(5216),i=(r=a)&&r.__esModule?r:{default:r};var o=["-webkit-",""];e.exports=t.default},4053:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("cursor"===e&&r.hasOwnProperty(t))return n.map((function(e){return e+t}))};var n=["-webkit-","-moz-",""],r={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};e.exports=t.default},6840:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"===typeof t&&!(0,i.default)(t)&&t.indexOf("filter(")>-1)return o.map((function(e){return t.replace(/filter\(/g,e+"filter(")}))};var r,a=n(5216),i=(r=a)&&r.__esModule?r:{default:r};var o=["-webkit-",""];e.exports=t.default},4751:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("display"===e&&n.hasOwnProperty(t))return n[t]};var n={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]};e.exports=t.default},48:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){"flexDirection"===e&&"string"===typeof t&&(t.indexOf("column")>-1?a.WebkitBoxOrient="vertical":a.WebkitBoxOrient="horizontal",t.indexOf("reverse")>-1?a.WebkitBoxDirection="reverse":a.WebkitBoxDirection="normal");r.hasOwnProperty(e)&&(a[r[e]]=n[t]||t)};var n={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple"},r={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines"};e.exports=t.default},4810:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"===typeof t&&!(0,i.default)(t)&&u.test(t))return o.map((function(e){return e+t}))};var r,a=n(5216),i=(r=a)&&r.__esModule?r:{default:r};var o=["-webkit-","-moz-",""],u=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/;e.exports=t.default},8574:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"===typeof t&&!(0,i.default)(t)&&t.indexOf("image-set(")>-1)return o.map((function(e){return t.replace(/image-set\(/g,e+"image-set(")}))};var r,a=n(5216),i=(r=a)&&r.__esModule?r:{default:r};var o=["-webkit-",""];e.exports=t.default},9091:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("position"===e&&"sticky"===t)return["-webkit-sticky","sticky"]},e.exports=t.default},6312:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(r.hasOwnProperty(e)&&a.hasOwnProperty(t))return n.map((function(e){return e+t}))};var n=["-webkit-","-moz-",""],r={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},a={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};e.exports=t.default},4500:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,o){if("string"===typeof t&&u.hasOwnProperty(e)){var c=function(e,t){if((0,a.default)(e))return e;for(var n=e.split(/,(?![^()]*(?:\([^()]*\))?\))/g),i=0,o=n.length;i<o;++i){var u=n[i],c=[u];for(var l in t){var f=(0,r.default)(l);if(u.indexOf(f)>-1&&"order"!==f)for(var h=t[l],d=0,p=h.length;d<p;++d)c.unshift(u.replace(f,s[h[d]]+f))}n[i]=c.join(",")}return n.join(",")}(t,o),l=c.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(e){return!/-moz-|-ms-/.test(e)})).join(",");if(e.indexOf("Webkit")>-1)return l;var f=c.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(e){return!/-webkit-|-ms-/.test(e)})).join(",");return e.indexOf("Moz")>-1?f:(n["Webkit"+(0,i.default)(e)]=l,n["Moz"+(0,i.default)(e)]=f,c)}};var r=o(n(8546)),a=o(n(5216)),i=o(n(7255));function o(e){return e&&e.__esModule?e:{default:e}}var u={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},s={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};e.exports=t.default},9169:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["Webkit"],r=["Moz"],a=["ms"],i=["Webkit","Moz"],o=["Webkit","ms"],u=["Webkit","Moz","ms"];t.default={plugins:[],prefixMap:{appearance:i,userSelect:u,textEmphasisPosition:n,textEmphasis:n,textEmphasisStyle:n,textEmphasisColor:n,boxDecorationBreak:n,clipPath:n,maskImage:n,maskMode:n,maskRepeat:n,maskPosition:n,maskClip:n,maskOrigin:n,maskSize:n,maskComposite:n,mask:n,maskBorderSource:n,maskBorderMode:n,maskBorderSlice:n,maskBorderWidth:n,maskBorderOutset:n,maskBorderRepeat:n,maskBorder:n,maskType:n,textDecorationStyle:n,textDecorationSkip:n,textDecorationLine:n,textDecorationColor:n,filter:n,fontFeatureSettings:n,breakAfter:u,breakBefore:u,breakInside:u,columnCount:i,columnFill:i,columnGap:i,columnRule:i,columnRuleColor:i,columnRuleStyle:i,columnRuleWidth:i,columns:i,columnSpan:i,columnWidth:i,writingMode:o,flex:n,flexBasis:n,flexDirection:n,flexGrow:n,flexFlow:n,flexShrink:n,flexWrap:n,alignContent:n,alignItems:n,alignSelf:n,justifyContent:n,order:n,transform:n,transformOrigin:n,transformOriginX:n,transformOriginY:n,backfaceVisibility:n,perspective:n,perspectiveOrigin:n,transformStyle:n,transformOriginZ:n,animation:n,animationDelay:n,animationDirection:n,animationFillMode:n,animationDuration:n,animationIterationCount:n,animationName:n,animationPlayState:n,animationTimingFunction:n,backdropFilter:n,fontKerning:n,scrollSnapType:o,scrollSnapPointsX:o,scrollSnapPointsY:o,scrollSnapDestination:o,scrollSnapCoordinate:o,shapeImageThreshold:n,shapeImageMargin:n,shapeImageOutside:n,hyphens:u,flowInto:o,flowFrom:o,regionFragment:o,textAlignLast:r,tabSize:r,wrapFlow:a,wrapThrough:a,wrapMargin:a,gridTemplateColumns:a,gridTemplateRows:a,gridTemplateAreas:a,gridTemplate:a,gridAutoColumns:a,gridAutoRows:a,gridAutoFlow:a,grid:a,gridRowStart:a,gridColumnStart:a,gridRowEnd:a,gridRow:a,gridColumn:a,gridColumnEnd:a,gridColumnGap:a,gridRowGap:a,gridArea:a,gridGap:a,textSizeAdjust:o,borderImage:n,borderImageOutset:n,borderImageRepeat:n,borderImageSlice:n,borderImageSource:n,borderImageWidth:n,transitionDelay:n,transitionDuration:n,transitionProperty:n,transitionTimingFunction:n}},e.exports=t.default},7255:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.exports=t.default},8183:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(e.hasOwnProperty(t))for(var r=e[t],a=0,o=r.length;a<o;++a)n[r[a]+(0,i.default)(t)]=n[t]};var r,a=n(7255),i=(r=a)&&r.__esModule?r:{default:r};e.exports=t.default},4715:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,a){for(var i=0,o=e.length;i<o;++i){var u=e[i](t,n,r,a);if(u)return u}},e.exports=t.default},2176:function(e){"use strict";e.exports=function(e,t,n,r,a,i,o,u){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,a,i,o,u],l=0;(s=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},9341:function(e,t,n){"use strict";var r=n(8064).default,a=n(8231).default,i=n(400),o=Symbol("max"),u=Symbol("length"),s=Symbol("lengthCalculator"),c=Symbol("allowStale"),l=Symbol("maxAge"),f=Symbol("dispose"),h=Symbol("noDisposeOnSet"),d=Symbol("lruList"),p=Symbol("cache"),v=Symbol("updateAgeOnGet"),g=function(){return 1},m=function(){function e(t){if(r(this,e),"number"===typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!==typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[o]=t.max||1/0;var n=t.length||g;if(this[s]="function"!==typeof n?g:n,this[c]=t.stale||!1,t.maxAge&&"number"!==typeof t.maxAge)throw new TypeError("maxAge must be a number");this[l]=t.maxAge||0,this[f]=t.dispose,this[h]=t.noDisposeOnSet||!1,this[v]=t.updateAgeOnGet||!1,this.reset()}return a(e,[{key:"max",get:function(){return this[o]},set:function(e){if("number"!==typeof e||e<0)throw new TypeError("max must be a non-negative number");this[o]=e||1/0,x(this)}},{key:"allowStale",get:function(){return this[c]},set:function(e){this[c]=!!e}},{key:"maxAge",get:function(){return this[l]},set:function(e){if("number"!==typeof e)throw new TypeError("maxAge must be a non-negative number");this[l]=e,x(this)}},{key:"lengthCalculator",get:function(){return this[s]},set:function(e){var t=this;"function"!==typeof e&&(e=g),e!==this[s]&&(this[s]=e,this[u]=0,this[d].forEach((function(e){e.length=t[s](e.value,e.key),t[u]+=e.length}))),x(this)}},{key:"length",get:function(){return this[u]}},{key:"itemCount",get:function(){return this[d].length}},{key:"rforEach",value:function(e,t){t=t||this;for(var n=this[d].tail;null!==n;){var r=n.prev;_(this,e,n,t),n=r}}},{key:"forEach",value:function(e,t){t=t||this;for(var n=this[d].head;null!==n;){var r=n.next;_(this,e,n,t),n=r}}},{key:"keys",value:function(){return this[d].toArray().map((function(e){return e.key}))}},{key:"values",value:function(){return this[d].toArray().map((function(e){return e.value}))}},{key:"reset",value:function(){var e=this;this[f]&&this[d]&&this[d].length&&this[d].forEach((function(t){return e[f](t.key,t.value)})),this[p]=new Map,this[d]=new i,this[u]=0}},{key:"dump",value:function(){var e=this;return this[d].map((function(t){return!b(e,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}})).toArray().filter((function(e){return e}))}},{key:"dumpLru",value:function(){return this[d]}},{key:"set",value:function(e,t,n){if((n=n||this[l])&&"number"!==typeof n)throw new TypeError("maxAge must be a number");var r=n?Date.now():0,a=this[s](t,e);if(this[p].has(e)){if(a>this[o])return w(this,this[p].get(e)),!1;var i=this[p].get(e).value;return this[f]&&(this[h]||this[f](e,i.value)),i.now=r,i.maxAge=n,i.value=t,this[u]+=a-i.length,i.length=a,this.get(e),x(this),!0}var c=new k(e,t,a,r,n);return c.length>this[o]?(this[f]&&this[f](e,t),!1):(this[u]+=c.length,this[d].unshift(c),this[p].set(e,this[d].head),x(this),!0)}},{key:"has",value:function(e){if(!this[p].has(e))return!1;var t=this[p].get(e).value;return!b(this,t)}},{key:"get",value:function(e){return y(this,e,!0)}},{key:"peek",value:function(e){return y(this,e,!1)}},{key:"pop",value:function(){var e=this[d].tail;return e?(w(this,e),e.value):null}},{key:"del",value:function(e){w(this,this[p].get(e))}},{key:"load",value:function(e){this.reset();for(var t=Date.now(),n=e.length-1;n>=0;n--){var r=e[n],a=r.e||0;if(0===a)this.set(r.k,r.v);else{var i=a-t;i>0&&this.set(r.k,r.v,i)}}}},{key:"prune",value:function(){var e=this;this[p].forEach((function(t,n){return y(e,n,!1)}))}}]),e}(),y=function(e,t,n){var r=e[p].get(t);if(r){var a=r.value;if(b(e,a)){if(w(e,r),!e[c])return}else n&&(e[v]&&(r.value.now=Date.now()),e[d].unshiftNode(r));return a.value}},b=function(e,t){if(!t||!t.maxAge&&!e[l])return!1;var n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[l]&&n>e[l]},x=function(e){if(e[u]>e[o])for(var t=e[d].tail;e[u]>e[o]&&null!==t;){var n=t.prev;w(e,t),t=n}},w=function(e,t){if(t){var n=t.value;e[f]&&e[f](n.key,n.value),e[u]-=n.length,e[p].delete(n.key),e[d].removeNode(t)}},k=a((function e(t,n,a,i,o){r(this,e),this.key=t,this.value=n,this.length=a,this.now=i,this.maxAge=o||0})),_=function(e,t,n,r){var a=n.value;b(e,a)&&(w(e,n),e[c]||(a=void 0)),a&&t.call(r,a.value,a.key,e)};e.exports=m},4368:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(a){return!1}}()?Object.assign:function(e,i){for(var o,u,s=a(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(s[l]=o[l]);if(t){u=t(o);for(var f=0;f<u.length;f++)r.call(o,u[f])&&(s[u[f]]=o[u[f]])}}return s}},8294:function(e,t,n){"use strict";function r(){}n.r(t),n.d(t,{Component:function(){return Z},cloneElement:function(){return l},createElement:function(){return u},h:function(){return u},options:function(){return a},render:function(){return B},rerender:function(){return p}});var a={},i=[],o=[];function u(e,t){var n,u,s,c,l=o;for(c=arguments.length;c-- >2;)i.push(arguments[c]);for(t&&null!=t.children&&(i.length||i.push(t.children),delete t.children);i.length;)if((u=i.pop())&&void 0!==u.pop)for(c=u.length;c--;)i.push(u[c]);else"boolean"===typeof u&&(u=null),(s="function"!==typeof e)&&(null==u?u="":"number"===typeof u?u=String(u):"string"!==typeof u&&(s=!1)),s&&n?l[l.length-1]+=u:l===o?l=[u]:l.push(u),n=s;var f=new r;return f.nodeName=e,f.children=l,f.attributes=null==t?void 0:t,f.key=null==t?void 0:t.key,void 0!==a.vnode&&a.vnode(f),f}function s(e,t){for(var n in t)e[n]=t[n];return e}var c="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function l(e,t){return u(e.nodeName,s(s({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}var f=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,h=[];function d(e){!e._dirty&&(e._dirty=!0)&&1==h.push(e)&&(a.debounceRendering||c)(p)}function p(){var e,t=h;for(h=[];e=t.pop();)e._dirty&&O(e)}function v(e,t,n){return"string"===typeof t||"number"===typeof t?void 0!==e.splitText:"string"===typeof t.nodeName?!e._componentConstructor&&g(e,t.nodeName):n||e._componentConstructor===t.nodeName}function g(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function m(e){var t=s({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t}function y(e){var t=e.parentNode;t&&t.removeChild(e)}function b(e,t,n,r,a){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),r&&r(e);else if("class"!==t||a)if("style"===t){if(r&&"string"!==typeof r&&"string"!==typeof n||(e.style.cssText=r||""),r&&"object"===typeof r){if("string"!==typeof n)for(var i in n)i in r||(e.style[i]="");for(var i in r)e.style[i]="number"===typeof r[i]&&!1===f.test(i)?r[i]+"px":r[i]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var o=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,x,o):e.removeEventListener(t,x,o),(e._listeners||(e._listeners={}))[t]=r}else if("list"!==t&&"type"!==t&&!a&&t in e)!function(e,t,n){try{e[t]=n}catch(r){}}(e,t,null==r?"":r),null!=r&&!1!==r||e.removeAttribute(t);else{var u=a&&t!==(t=t.replace(/^xlink:?/,""));null==r||!1===r?u?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!==typeof r&&(u?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""}function x(e){return this._listeners[e.type](a.event&&a.event(e)||e)}var w=[],k=0,_=!1,S=!1;function C(){for(var e;e=w.pop();)a.afterMount&&a.afterMount(e),e.componentDidMount&&e.componentDidMount()}function E(e,t,n,r,a,i){k++||(_=null!=a&&void 0!==a.ownerSVGElement,S=null!=e&&!("__preactattr_"in e));var o=A(e,t,n,r,i);return a&&o.parentNode!==a&&a.appendChild(o),--k||(S=!1,i||C()),o}function A(e,t,n,r,a){var i=e,o=_;if(null!=t&&"boolean"!==typeof t||(t=""),"string"===typeof t||"number"===typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||a)?e.nodeValue!=t&&(e.nodeValue=t):(i=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),N(e,!0))),i.__preactattr_=!0,i;var u=t.nodeName;if("function"===typeof u)return function(e,t,n,r){var a=e&&e._component,i=a,o=e,u=a&&e._componentConstructor===t.nodeName,s=u,c=m(t);for(;a&&!s&&(a=a._parentComponent);)s=a.constructor===t.nodeName;a&&s&&(!r||a._component)?(I(a,c,3,n,r),e=a.base):(i&&!u&&(R(i),e=o=null),a=D(t.nodeName,c,n),e&&!a.nextBase&&(a.nextBase=e,o=null),I(a,c,1,n,r),e=a.base,o&&e!==o&&(o._component=null,N(o,!1)));return e}(e,t,n,r);if(_="svg"===u||"foreignObject"!==u&&_,u=String(u),(!e||!g(e,u))&&(i=function(e,t){var n=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.normalizedNodeName=e,n}(u,_),e)){for(;e.firstChild;)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),N(e,!0)}var s=i.firstChild,c=i.__preactattr_,l=t.children;if(null==c){c=i.__preactattr_={};for(var f=i.attributes,h=f.length;h--;)c[f[h].name]=f[h].value}return!S&&l&&1===l.length&&"string"===typeof l[0]&&null!=s&&void 0!==s.splitText&&null==s.nextSibling?s.nodeValue!=l[0]&&(s.nodeValue=l[0]):(l&&l.length||null!=s)&&function(e,t,n,r,a){var i,o,u,s,c,l=e.childNodes,f=[],h={},d=0,p=0,g=l.length,m=0,b=t?t.length:0;if(0!==g)for(var x=0;x<g;x++){var w=l[x],k=w.__preactattr_;null!=(_=b&&k?w._component?w._component.__key:k.key:null)?(d++,h[_]=w):(k||(void 0!==w.splitText?!a||w.nodeValue.trim():a))&&(f[m++]=w)}if(0!==b)for(x=0;x<b;x++){var _;if(c=null,null!=(_=(s=t[x]).key))d&&void 0!==h[_]&&(c=h[_],h[_]=void 0,d--);else if(!c&&p<m)for(i=p;i<m;i++)if(void 0!==f[i]&&v(o=f[i],s,a)){c=o,f[i]=void 0,i===m-1&&m--,i===p&&p++;break}c=A(c,s,n,r),u=l[x],c&&c!==e&&c!==u&&(null==u?e.appendChild(c):c===u.nextSibling?y(u):e.insertBefore(c,u))}if(d)for(var x in h)void 0!==h[x]&&N(h[x],!1);for(;p<=m;)void 0!==(c=f[m--])&&N(c,!1)}(i,l,n,r,S||null!=c.dangerouslySetInnerHTML),function(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||b(e,r,n[r],n[r]=void 0,_);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||b(e,r,n[r],n[r]=t[r],_)}(i,t.attributes,c),_=o,i}function N(e,t){var n=e._component;n?R(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||y(e),T(e))}function T(e){for(e=e.lastChild;e;){var t=e.previousSibling;N(e,!0),e=t}}var M={};function D(e,t,n){var r,a=M[e.name];if(e.prototype&&e.prototype.render?(r=new e(t,n),Z.call(r,t,n)):((r=new Z(t,n)).constructor=e,r.render=F),a)for(var i=a.length;i--;)if(a[i].constructor===e){r.nextBase=a[i].nextBase,a.splice(i,1);break}return r}function F(e,t,n){return this.constructor(e,n)}function I(e,t,n,r,i){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===a.syncComponentUpdates&&e.base?d(e):O(e,1,i)),e.__ref&&e.__ref(e))}function O(e,t,n,r){if(!e._disable){var i,o,u,c=e.props,l=e.state,f=e.context,h=e.prevProps||c,d=e.prevState||l,p=e.prevContext||f,v=e.base,g=e.nextBase,y=v||g,b=e._component,x=!1;if(v&&(e.props=h,e.state=d,e.context=p,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(c,l,f)?x=!0:e.componentWillUpdate&&e.componentWillUpdate(c,l,f),e.props=c,e.state=l,e.context=f),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!x){i=e.render(c,l,f),e.getChildContext&&(f=s(s({},f),e.getChildContext()));var _,S,A=i&&i.nodeName;if("function"===typeof A){var T=m(i);(o=b)&&o.constructor===A&&T.key==o.__key?I(o,T,1,f,!1):(_=o,e._component=o=D(A,T,f),o.nextBase=o.nextBase||g,o._parentComponent=e,I(o,T,0,f,!1),O(o,1,n,!0)),S=o.base}else u=y,(_=b)&&(u=e._component=null),(y||1===t)&&(u&&(u._component=null),S=E(u,i,f,n||!v,y&&y.parentNode,!0));if(y&&S!==y&&o!==b){var M=y.parentNode;M&&S!==M&&(M.replaceChild(S,y),_||(y._component=null,N(y,!1)))}if(_&&R(_),e.base=S,S&&!r){for(var F=e,Z=e;Z=Z._parentComponent;)(F=Z).base=S;S._component=F,S._componentConstructor=F.constructor}}if(!v||n?w.unshift(e):x||(e.componentDidUpdate&&e.componentDidUpdate(h,d,p),a.afterUpdate&&a.afterUpdate(e)),null!=e._renderCallbacks)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);k||r||C()}}function R(e){a.beforeUnmount&&a.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?R(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.nextBase=t,y(t),function(e){var t=e.constructor.name;(M[t]||(M[t]=[])).push(e)}(e),T(t)),e.__ref&&e.__ref(null)}function Z(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{}}function B(e,t,n){return E(n,e,{},!1,t,!1)}s(Z.prototype,{setState:function(e,t){var n=this.state;this.prevState||(this.prevState=s({},n)),s(n,"function"===typeof e?e(n,this.props):e),t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),d(this)},forceUpdate:function(e){e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),O(this,2)},render:function(){}});var z={h:u,createElement:u,cloneElement:l,Component:Z,render:B,rerender:p,options:a};t.default=z},3573:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];function r(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=null;return t.forEach((function(e){if(null==a){var t=e.apply(void 0,n);null!=t&&(a=t)}})),a}return(0,i.default)(r)};var r,a=n(6054),i=(r=a)&&r.__esModule?r:{default:r};e.exports=t.default},6054:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,a,i,o){var u=a||"<<anonymous>>",s=o||r;if(null==n[r])return t?new Error("Required "+i+" `"+s+"` was not specified in `"+u+"`."):null;for(var c=arguments.length,l=Array(c>6?c-6:0),f=6;f<c;f++)l[f-6]=arguments[f];return e.apply(void 0,[n,r,u,i,s].concat(l))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n},e.exports=t.default},888:function(e,t,n){"use strict";var r=n(9047);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,i,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4463:function(e,t,n){"use strict";var r=n(2791),a=n(5296);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,y);g[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,y);g[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,y);g[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),A=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),F=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var Z,B=Object.assign;function z(e){if(void 0===Z)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Z=t&&t[1]||""}return"\n"+Z+e}var L=!1;function P(e,t){if(!e||L)return"";L=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),i=r.stack.split("\n"),o=a.length-1,u=i.length-1;1<=o&&0<=u&&a[o]!==i[u];)u--;for(;1<=o&&0<=u;o--,u--)if(a[o]!==i[u]){if(1!==o||1!==u)do{if(o--,0>--u||a[o]!==i[u]){var s="\n"+a[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{L=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function j(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=P(e.type,!1);case 11:return e=P(e.type.render,!1);case 1:return e=P(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case k:return"Portal";case C:return"Profiler";case S:return"StrictMode";case T:return"Suspense";case M:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case F:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return B({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function K(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Q(e,t){$(e,t);var n=V(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return B({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function ie(e,t){var n=V(t.value),r=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,_e=null,Se=null;function Ce(e){if(e=ba(e)){if("function"!==typeof ke)throw Error(i(280));var t=e.stateNode;t&&(t=wa(t),ke(e.stateNode,e.type,t))}}function Ee(e){_e?Se?Se.push(e):Se=[e]:_e=e}function Ae(){if(_e){var e=_e,t=Se;if(Se=_e=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ne(e,t){return e(t)}function Te(){}var Me=!1;function De(e,t,n){if(Me)return e(t,n);Me=!0;try{return Ne(e,t,n)}finally{Me=!1,(null!==_e||null!==Se)&&(Te(),Ae())}}function Fe(e,t){var n=e.stateNode;if(null===n)return null;var r=wa(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Ie=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Ie=!1}function Re(e,t,n,r,a,i,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Ze=!1,Be=null,ze=!1,Le=null,Pe={onError:function(e){Ze=!0,Be=e}};function je(e,t,n,r,a,i,o,u,s){Ze=!1,Be=null,Re.apply(Pe,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(Ue(e)!==e)throw Error(i(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return Ve(a),e;if(o===r)return Ve(a),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=o;else{for(var u=!1,s=a.child;s;){if(s===n){u=!0,n=a,r=o;break}if(s===r){u=!0,r=a,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=a;break}if(s===r){u=!0,r=o,n=a;break}s=s.sibling}if(!u)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=a.unstable_scheduleCallback,Xe=a.unstable_cancelCallback,Ye=a.unstable_shouldYield,Ke=a.unstable_requestPaint,$e=a.unstable_now,Qe=a.unstable_getCurrentPriorityLevel,Je=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~a;0!==u?r=ft(u):0!==(i&=o)&&(r=ft(i))}else 0!==(o=n&~a)?r=ft(o):0!==i&&(r=ft(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(i=t&-t)||16===a&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-ot(t)),r|=e[n],t&=~a;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,_t,St,Ct,Et=!1,At=[],Nt=null,Tt=null,Mt=null,Dt=new Map,Ft=new Map,It=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Mt=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ft.delete(t.pointerId)}}function Zt(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Bt(e){var t=ya(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void Ct(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ba(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Lt(e,t,n){zt(e)&&n.delete(t)}function Pt(){Et=!1,null!==Nt&&zt(Nt)&&(Nt=null),null!==Tt&&zt(Tt)&&(Tt=null),null!==Mt&&zt(Mt)&&(Mt=null),Dt.forEach(Lt),Ft.forEach(Lt)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Pt)))}function Ut(e){function t(t){return jt(t,e)}if(0<At.length){jt(At[0],e);for(var n=1;n<At.length;n++){var r=At[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Nt&&jt(Nt,e),null!==Tt&&jt(Tt,e),null!==Mt&&jt(Mt,e),Dt.forEach(t),Ft.forEach(t),n=0;n<It.length;n++)(r=It[n]).blockedOn===e&&(r.blockedOn=null);for(;0<It.length&&null===(n=It[0]).blockedOn;)Bt(n),null===n.blockedOn&&It.shift()}var Wt=x.ReactCurrentBatchConfig,Vt=!0;function qt(e,t,n,r){var a=bt,i=Wt.transition;Wt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=a,Wt.transition=i}}function Ht(e,t,n,r){var a=bt,i=Wt.transition;Wt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=a,Wt.transition=i}}function Gt(e,t,n,r){if(Vt){var a=Yt(e,t,n,r);if(null===a)Vr(e,t,r,Xt,n),Rt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Nt=Zt(Nt,e,t,n,r,a),!0;case"dragenter":return Tt=Zt(Tt,e,t,n,r,a),!0;case"mouseover":return Mt=Zt(Mt,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Dt.set(i,Zt(Dt.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Ft.set(i,Zt(Ft.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Rt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==a;){var i=ba(a);if(null!==i&&wt(i),null===(i=Yt(e,t,n,r))&&Vr(e,t,r,Xt,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else Vr(e,t,r,null,n)}}var Xt=null;function Yt(e,t,n,r){if(Xt=null,null!==(e=ya(e=we(r))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Qt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Qt,r=n.length,a="value"in $t?$t.value:$t.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return Jt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=B({},cn,{view:0,detail:0}),hn=an(fn),dn=B({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(B({},dn,{dataTransfer:0})),gn=an(B({},fn,{relatedTarget:0})),mn=an(B({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=B({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),xn=an(B({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Cn(){return Sn}var En=B({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=an(En),Nn=an(B({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=an(B({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Mn=an(B({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=B({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Fn=an(Dn),In=[9,13,27,32],On=l&&"CompositionEvent"in window,Rn=null;l&&"documentMode"in document&&(Rn=document.documentMode);var Zn=l&&"TextEvent"in window&&!Rn,Bn=l&&(!On||Rn&&8<Rn&&11>=Rn),zn=String.fromCharCode(32),Ln=!1;function Pn(e,t){switch(e){case"keyup":return-1!==In.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function qn(e,t,n,r){Ee(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Gn=null;function Xn(e){zr(e,0)}function Yn(e){if(G(xa(e)))return e}function Kn(e,t){if("change"===e)return t}var $n=!1;if(l){var Qn;if(l){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Qn=Jn}else Qn=!1;$n=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Gn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];qn(t,Gn,e,we(e)),De(Xn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function ir(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!f.call(t,a)||!ur(e[a],t[a]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=void 0===r.end?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=lr(n,i);var o=lr(n,r);a&&o&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,gr=null,mr=null,yr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==X(r)||("selectionStart"in(r=gr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&sr(yr,r)||(yr=r,0<(r=Hr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Sr={};function Cr(e){if(_r[e])return _r[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return _r[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Er=Cr("animationend"),Ar=Cr("animationiteration"),Nr=Cr("animationstart"),Tr=Cr("transitionend"),Mr=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fr(e,t){Mr.set(e,t),s(t,[e])}for(var Ir=0;Ir<Dr.length;Ir++){var Or=Dr[Ir];Fr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Fr(Er,"onAnimationEnd"),Fr(Ar,"onAnimationIteration"),Fr(Nr,"onAnimationStart"),Fr("dblclick","onDoubleClick"),Fr("focusin","onFocus"),Fr("focusout","onBlur"),Fr(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Br(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,o,u,s,c){if(je.apply(this,arguments),Ze){if(!Ze)throw Error(i(198));var l=Be;Ze=!1,Be=null,ze||(ze=!0,Le=l)}}(r,t,void 0,e),e.currentTarget=null}function zr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==i&&a.isPropagationStopped())break e;Br(a,u,c),i=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==i&&a.isPropagationStopped())break e;Br(a,u,c),i=s}}}if(ze)throw e=Le,ze=!1,Le=null,e}function Lr(e,t){var n=t[va];void 0===n&&(n=t[va]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function Pr(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function Ur(e){if(!e[jr]){e[jr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Zr.has(t)||Pr(t,!1,e),Pr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,Pr("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Kt(t)){case 1:var a=qt;break;case 4:a=Ht;break;default:a=Gt}n=a.bind(null,t,n,e),a=void 0,!Ie||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Vr(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===a||8===u.nodeType&&u.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===a||8===s.nodeType&&s.parentNode===a))return;o=o.return}for(;null!==u;){if(null===(o=ya(u)))return;if(5===(s=o.tag)||6===s){r=i=o;continue e}u=u.parentNode}}r=r.return}De((function(){var r=i,a=we(n),o=[];e:{var u=Mr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=An;break;case"focusin":c="focus",s=gn;break;case"focusout":c="blur",s=gn;break;case"beforeblur":case"afterblur":s=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Tn;break;case Er:case Ar:case Nr:s=mn;break;case Tr:s=Mn;break;case"scroll":s=hn;break;case"wheel":s=Fn;break;case"copy":case"cut":case"paste":s=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Nn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Fe(p,h))&&l.push(qr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,a),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!ya(c)&&!c[pa])&&(s||u)&&(u=a.window===a?a:(u=a.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?ya(c):null)&&(c!==(f=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Nn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:xa(s),d=null==c?u:xa(c),(u=new l(v,p+"leave",s,n,a)).target=f,u.relatedTarget=d,v=null,ya(a)===r&&((l=new l(h,p+"enter",c,n,a)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Gr(d))p++;for(d=0,v=h;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)h=Gr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Gr(l),h=Gr(h)}l=null}else l=null;null!==s&&Xr(o,u,s,l,!1),null!==c&&null!==f&&Xr(o,f,c,l,!0)}if("select"===(s=(u=r?xa(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var g=Kn;else if(Vn(u))if($n)g=or;else{g=ar;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(g=ir);switch(g&&(g=g(e,r))?qn(o,g,n,a):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?xa(r):window,e){case"focusin":(Vn(m)||"true"===m.contentEditable)&&(gr=m,mr=r,yr=null);break;case"focusout":yr=mr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(o,n,a);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":xr(o,n,a)}var y;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Un?Pn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Bn&&"ko"!==n.locale&&(Un||"onCompositionStart"!==b?"onCompositionEnd"===b&&Un&&(y=en()):(Qt="value"in($t=a)?$t.value:$t.textContent,Un=!0)),0<(m=Hr(r,b)).length&&(b=new xn(b,e,null,n,a),o.push({event:b,listeners:m}),y?b.data=y:null!==(y=jn(n))&&(b.data=y))),(y=Zn?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Ln=!0,zn);case"textInput":return(e=t.data)===zn&&Ln?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!On&&Pn(e,t)?(e=en(),Jt=Qt=$t=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(a=new xn("onBeforeInput","beforeinput",null,n,a),o.push({event:a,listeners:r}),a.data=y))}zr(o,t)}))}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=Fe(e,n))&&r.unshift(qr(e,i,a)),null!=(i=Fe(e,t))&&r.push(qr(e,i,a))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,a?null!=(s=Fe(n,i))&&o.unshift(qr(n,s,u)):a||null!=(s=Fe(n,i))&&o.push(qr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Kr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Kr,"")}function Qr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(i(425))}function Jr(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,ia="function"===typeof Promise?Promise:void 0,oa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ia?function(e){return ia.resolve(null).then(e).catch(ua)}:ra;function ua(e){setTimeout((function(){throw e}))}function sa(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Ut(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Ut(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function la(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fa=Math.random().toString(36).slice(2),ha="__reactFiber$"+fa,da="__reactProps$"+fa,pa="__reactContainer$"+fa,va="__reactEvents$"+fa,ga="__reactListeners$"+fa,ma="__reactHandles$"+fa;function ya(e){var t=e[ha];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pa]||n[ha]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=la(e);null!==e;){if(n=e[ha])return n;e=la(e)}return t}n=(e=n).parentNode}return null}function ba(e){return!(e=e[ha]||e[pa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function wa(e){return e[da]||null}var ka=[],_a=-1;function Sa(e){return{current:e}}function Ca(e){0>_a||(e.current=ka[_a],ka[_a]=null,_a--)}function Ea(e,t){_a++,ka[_a]=e.current,e.current=t}var Aa={},Na=Sa(Aa),Ta=Sa(!1),Ma=Aa;function Da(e,t){var n=e.type.contextTypes;if(!n)return Aa;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Fa(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ia(){Ca(Ta),Ca(Na)}function Oa(e,t,n){if(Na.current!==Aa)throw Error(i(168));Ea(Na,t),Ea(Ta,n)}function Ra(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(i(108,W(e)||"Unknown",a));return B({},n,r)}function Za(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Aa,Ma=Na.current,Ea(Na,e),Ea(Ta,Ta.current),!0}function Ba(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Ra(e,t,Ma),r.__reactInternalMemoizedMergedChildContext=e,Ca(Ta),Ca(Na),Ea(Na,e)):Ca(Ta),Ea(Ta,n)}var za=null,La=!1,Pa=!1;function ja(e){null===za?za=[e]:za.push(e)}function Ua(){if(!Pa&&null!==za){Pa=!0;var e=0,t=bt;try{var n=za;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}za=null,La=!1}catch(a){throw null!==za&&(za=za.slice(e+1)),Ge(Je,Ua),a}finally{bt=t,Pa=!1}}return null}var Wa=x.ReactCurrentBatchConfig;function Va(e,t){if(e&&e.defaultProps){for(var n in t=B({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var qa=Sa(null),Ha=null,Ga=null,Xa=null;function Ya(){Xa=Ga=Ha=null}function Ka(e){var t=qa.current;Ca(qa),e._currentValue=t}function $a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Qa(e,t){Ha=e,Xa=Ga=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wu=!0),e.firstContext=null)}function Ja(e){var t=e._currentValue;if(Xa!==e)if(e={context:e,memoizedValue:t,next:null},null===Ga){if(null===Ha)throw Error(i(308));Ga=e,Ha.dependencies={lanes:0,firstContext:e}}else Ga=Ga.next=e;return t}var ei=null,ti=!1;function ni(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ri(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ai(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ii(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,tc(e)?(null===(e=n.interleaved)?(t.next=t,null===ei?ei=[n]:ei.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function oi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function ui(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function si(e,t,n,r){var a=e.updateQueue;ti=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,u=a.shared.pending;if(null!==u){a.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?i=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==i){var f=a.baseState;for(o=0,l=c=s=null,u=i;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=B({},f,h);break e;case 2:ti=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=a.shared.pending))break;u=(h=u).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===l&&(s=f),a.baseState=s,a.firstBaseUpdate=c,a.lastBaseUpdate=l,null!==(t=a.shared.interleaved)){a=t;do{o|=a.lane,a=a.next}while(a!==t)}else null===i&&(a.shared.lanes=0);Is|=o,e.lanes=o,e.memoizedState=f}}function ci(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(i(191,a));a.call(r)}}}var li=(new r.Component).refs;function fi(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:B({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var hi={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=$s(),a=Qs(e),i=ai(r,a);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),ii(e,i),null!==(t=Js(e,a,r))&&oi(t,e,a)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=$s(),a=Qs(e),i=ai(r,a);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),ii(e,i),null!==(t=Js(e,a,r))&&oi(t,e,a)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=$s(),r=Qs(e),a=ai(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),ii(e,a),null!==(t=Js(e,r,n))&&oi(t,e,r)}};function di(e,t,n,r,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(a,i))}function pi(e,t,n){var r=!1,a=Aa,i=t.contextType;return"object"===typeof i&&null!==i?i=Ja(i):(a=Fa(t)?Ma:Na.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Da(e,a):Aa),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=hi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function vi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&hi.enqueueReplaceState(t,t.state,null)}function gi(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=li,ni(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=Ja(i):(i=Fa(t)?Ma:Na.current,a.context=Da(e,i)),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(fi(e,t,i,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&hi.enqueueReplaceState(a,a.state,null),si(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}var mi=[],yi=0,bi=null,xi=0,wi=[],ki=0,_i=null,Si=1,Ci="";function Ei(e,t){mi[yi++]=xi,mi[yi++]=bi,bi=e,xi=t}function Ai(e,t,n){wi[ki++]=Si,wi[ki++]=Ci,wi[ki++]=_i,_i=e;var r=Si;e=Ci;var a=32-ot(r)-1;r&=~(1<<a),n+=1;var i=32-ot(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Si=1<<32-ot(t)+a|n<<a|r,Ci=i+e}else Si=1<<i|n<<a|r,Ci=e}function Ni(e){null!==e.return&&(Ei(e,1),Ai(e,1,0))}function Ti(e){for(;e===bi;)bi=mi[--yi],mi[yi]=null,xi=mi[--yi],mi[yi]=null;for(;e===_i;)_i=wi[--ki],wi[ki]=null,Ci=wi[--ki],wi[ki]=null,Si=wi[--ki],wi[ki]=null}var Mi=null,Di=null,Fi=!1,Ii=null;function Oi(e,t){var n=Mc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Ri(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Mi=e,Di=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Mi=e,Di=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==_i?{id:Si,overflow:Ci}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Mc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Mi=e,Di=null,!0);default:return!1}}function Zi(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Bi(e){if(Fi){var t=Di;if(t){var n=t;if(!Ri(e,t)){if(Zi(e))throw Error(i(418));t=ca(n.nextSibling);var r=Mi;t&&Ri(e,t)?Oi(r,n):(e.flags=-4097&e.flags|2,Fi=!1,Mi=e)}}else{if(Zi(e))throw Error(i(418));e.flags=-4097&e.flags|2,Fi=!1,Mi=e}}}function zi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Mi=e}function Li(e){if(e!==Mi)return!1;if(!Fi)return zi(e),Fi=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=Di)){if(Zi(e)){for(e=Di;e;)e=ca(e.nextSibling);throw Error(i(418))}for(;t;)Oi(e,t),t=ca(t.nextSibling)}if(zi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Di=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Di=null}}else Di=Mi?ca(e.stateNode.nextSibling):null;return!0}function Pi(){Di=Mi=null,Fi=!1}function ji(e){null===Ii?Ii=[e]:Ii.push(e)}function Ui(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var a=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=a.refs;t===li&&(t=a.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function Wi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Vi(e){return(0,e._init)(e._payload)}function qi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Fc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Zc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===F&&Vi(i)===t.type)?((r=a(t,n.props)).ref=Ui(e,t,n),r.return=e,r):((r=Ic(n.type,n.key,n.props,null,e.mode,r)).ref=Ui(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function f(e,t,n,r,i){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Zc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Ic(t.type,t.key,t.props,null,e.mode,n)).ref=Ui(e,null,t),n.return=e,n;case k:return(t=Bc(t,e.mode,n)).return=e,t;case F:return h(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Oc(t,e.mode,n,null)).return=e,t;Wi(e,t)}return null}function d(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===a?c(e,t,n,r):null;case k:return n.key===a?l(e,t,n,r):null;case F:return d(e,t,(a=n._init)(n._payload),r)}if(te(n)||R(n))return null!==a?null:f(e,t,n,r,null);Wi(e,n)}return null}function p(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case k:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a);case F:return p(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||R(r))return f(t,e=e.get(n)||null,r,a,null);Wi(t,r)}return null}function v(a,i,u,s){for(var c=null,l=null,f=i,v=i=0,g=null;null!==f&&v<u.length;v++){f.index>v?(g=f,f=null):g=f.sibling;var m=d(a,f,u[v],s);if(null===m){null===f&&(f=g);break}e&&f&&null===m.alternate&&t(a,f),i=o(m,i,v),null===l?c=m:l.sibling=m,l=m,f=g}if(v===u.length)return n(a,f),Fi&&Ei(a,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(a,u[v],s))&&(i=o(f,i,v),null===l?c=f:l.sibling=f,l=f);return Fi&&Ei(a,v),c}for(f=r(a,f);v<u.length;v++)null!==(g=p(f,a,v,u[v],s))&&(e&&null!==g.alternate&&f.delete(null===g.key?v:g.key),i=o(g,i,v),null===l?c=g:l.sibling=g,l=g);return e&&f.forEach((function(e){return t(a,e)})),Fi&&Ei(a,v),c}function g(a,u,s,c){var l=R(s);if("function"!==typeof l)throw Error(i(150));if(null==(s=l.call(s)))throw Error(i(151));for(var f=l=null,v=u,g=u=0,m=null,y=s.next();null!==v&&!y.done;g++,y=s.next()){v.index>g?(m=v,v=null):m=v.sibling;var b=d(a,v,y.value,c);if(null===b){null===v&&(v=m);break}e&&v&&null===b.alternate&&t(a,v),u=o(b,u,g),null===f?l=b:f.sibling=b,f=b,v=m}if(y.done)return n(a,v),Fi&&Ei(a,g),l;if(null===v){for(;!y.done;g++,y=s.next())null!==(y=h(a,y.value,c))&&(u=o(y,u,g),null===f?l=y:f.sibling=y,f=y);return Fi&&Ei(a,g),l}for(v=r(a,v);!y.done;g++,y=s.next())null!==(y=p(v,a,g,y.value,c))&&(e&&null!==y.alternate&&v.delete(null===y.key?g:y.key),u=o(y,u,g),null===f?l=y:f.sibling=y,f=y);return e&&v.forEach((function(e){return t(a,e)})),Fi&&Ei(a,g),l}return function e(r,i,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=i;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(i=a(l,o.props.children)).return=r,r=i;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===F&&Vi(c)===l.type){n(r,l.sibling),(i=a(l,o.props)).ref=Ui(r,l,o),i.return=r,r=i;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((i=Oc(o.props.children,r.mode,s,o.key)).return=r,r=i):((s=Ic(o.type,o.key,o.props,null,r.mode,s)).ref=Ui(r,i,o),s.return=r,r=s)}return u(r);case k:e:{for(l=o.key;null!==i;){if(i.key===l){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(r,i.sibling),(i=a(i,o.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Bc(o,r.mode,s)).return=r,r=i}return u(r);case F:return e(r,i,(l=o._init)(o._payload),s)}if(te(o))return v(r,i,o,s);if(R(o))return g(r,i,o,s);Wi(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==i&&6===i.tag?(n(r,i.sibling),(i=a(i,o)).return=r,r=i):(n(r,i),(i=Zc(o,r.mode,s)).return=r,r=i),u(r)):n(r,i)}}var Hi=qi(!0),Gi=qi(!1),Xi={},Yi=Sa(Xi),Ki=Sa(Xi),$i=Sa(Xi);function Qi(e){if(e===Xi)throw Error(i(174));return e}function Ji(e,t){switch(Ea($i,t),Ea(Ki,e),Ea(Yi,Xi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ca(Yi),Ea(Yi,t)}function eo(){Ca(Yi),Ca(Ki),Ca($i)}function to(e){Qi($i.current);var t=Qi(Yi.current),n=se(t,e.type);t!==n&&(Ea(Ki,e),Ea(Yi,n))}function no(e){Ki.current===e&&(Ca(Yi),Ca(Ki))}var ro=Sa(0);function ao(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var io=[];function oo(){for(var e=0;e<io.length;e++)io[e]._workInProgressVersionPrimary=null;io.length=0}var uo=x.ReactCurrentDispatcher,so=x.ReactCurrentBatchConfig,co=0,lo=null,fo=null,ho=null,po=!1,vo=!1,go=0,mo=0;function yo(){throw Error(i(321))}function bo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function xo(e,t,n,r,a,o){if(co=o,lo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,uo.current=null===e||null===e.memoizedState?ru:au,e=n(r,a),vo){o=0;do{if(vo=!1,go=0,25<=o)throw Error(i(301));o+=1,ho=fo=null,t.updateQueue=null,uo.current=iu,e=n(r,a)}while(vo)}if(uo.current=nu,t=null!==fo&&null!==fo.next,co=0,ho=fo=lo=null,po=!1,t)throw Error(i(300));return e}function wo(){var e=0!==go;return go=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ho?lo.memoizedState=ho=e:ho=ho.next=e,ho}function _o(){if(null===fo){var e=lo.alternate;e=null!==e?e.memoizedState:null}else e=fo.next;var t=null===ho?lo.memoizedState:ho.next;if(null!==t)ho=t,fo=e;else{if(null===e)throw Error(i(310));e={memoizedState:(fo=e).memoizedState,baseState:fo.baseState,baseQueue:fo.baseQueue,queue:fo.queue,next:null},null===ho?lo.memoizedState=ho=e:ho=ho.next=e}return ho}function So(e,t){return"function"===typeof t?t(e):t}function Co(e){var t=_o(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=fo,a=r.baseQueue,o=n.pending;if(null!==o){if(null!==a){var u=a.next;a.next=o.next,o.next=u}r.baseQueue=a=o,n.pending=null}if(null!==a){o=a.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((co&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,lo.lanes|=f,Is|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(wu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{o=a.lane,lo.lanes|=o,Is|=o,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Eo(e){var t=_o(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var u=a=a.next;do{o=e(o,u.action),u=u.next}while(u!==a);ur(o,t.memoizedState)||(wu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function No(e,t){var n=lo,r=_o(),a=t(),o=!ur(r.memoizedState,a);if(o&&(r.memoizedState=a,wu=!0),r=r.queue,Lo(Do.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==ho&&1&ho.memoizedState.tag){if(n.flags|=2048,Oo(9,Mo.bind(null,n,r,a,t),void 0,null),null===Es)throw Error(i(349));0!==(30&co)||To(n,t,a)}return a}function To(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Mo(e,t,n,r){t.value=n,t.getSnapshot=r,Fo(t)&&Js(e,1,-1)}function Do(e,t,n){return n((function(){Fo(t)&&Js(e,1,-1)}))}function Fo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Io(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:So,lastRenderedState:e},t.queue=e,e=e.dispatch=$o.bind(null,lo,e),[t.memoizedState,e]}function Oo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ro(){return _o().memoizedState}function Zo(e,t,n,r){var a=ko();lo.flags|=e,a.memoizedState=Oo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var a=_o();r=void 0===r?null:r;var i=void 0;if(null!==fo){var o=fo.memoizedState;if(i=o.destroy,null!==r&&bo(r,o.deps))return void(a.memoizedState=Oo(t,n,i,r))}lo.flags|=e,a.memoizedState=Oo(1|t,n,i,r)}function zo(e,t){return Zo(8390656,8,e,t)}function Lo(e,t){return Bo(2048,8,e,t)}function Po(e,t){return Bo(4,2,e,t)}function jo(e,t){return Bo(4,4,e,t)}function Uo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Wo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Uo.bind(null,t,e),n)}function Vo(){}function qo(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&bo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ho(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&bo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Go(e,t,n){return 0===(21&co)?(e.baseState&&(e.baseState=!1,wu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),lo.lanes|=n,Is|=n,e.baseState=!0),t)}function Xo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=so.transition;so.transition={};try{e(!1),t()}finally{bt=n,so.transition=r}}function Yo(){return _o().memoizedState}function Ko(e,t,n){var r=Qs(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qo(e)?Jo(t,n):(eu(e,t,n),null!==(e=Js(e,r,n=$s()))&&tu(e,t,r))}function $o(e,t,n){var r=Qs(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))Jo(t,a);else{eu(e,t,a);var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=i(o,n);if(a.hasEagerState=!0,a.eagerState=u,ur(u,o))return}catch(s){}null!==(e=Js(e,r,n=$s()))&&tu(e,t,r)}}function Qo(e){var t=e.alternate;return e===lo||null!==t&&t===lo}function Jo(e,t){vo=po=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function eu(e,t,n){tc(e)?(null===(e=t.interleaved)?(n.next=n,null===ei?ei=[t]:ei.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function tu(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var nu={readContext:Ja,useCallback:yo,useContext:yo,useEffect:yo,useImperativeHandle:yo,useInsertionEffect:yo,useLayoutEffect:yo,useMemo:yo,useReducer:yo,useRef:yo,useState:yo,useDebugValue:yo,useDeferredValue:yo,useTransition:yo,useMutableSource:yo,useSyncExternalStore:yo,useId:yo,unstable_isNewReconciler:!1},ru={readContext:Ja,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:Ja,useEffect:zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Zo(4194308,4,Uo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Zo(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ko.bind(null,lo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:Io,useDebugValue:Vo,useDeferredValue:function(e){return ko().memoizedState=e},useTransition:function(){var e=Io(!1),t=e[0];return e=Xo.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=lo,a=ko();if(Fi){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Es)throw Error(i(349));0!==(30&co)||To(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,zo(Do.bind(null,r,o,e),[e]),r.flags|=2048,Oo(9,Mo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=Es.identifierPrefix;if(Fi){var n=Ci;t=":"+t+"R"+(n=(Si&~(1<<32-ot(Si)-1)).toString(32)+n),0<(n=go++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=mo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},au={readContext:Ja,useCallback:qo,useContext:Ja,useEffect:Lo,useImperativeHandle:Wo,useInsertionEffect:Po,useLayoutEffect:jo,useMemo:Ho,useReducer:Co,useRef:Ro,useState:function(){return Co(So)},useDebugValue:Vo,useDeferredValue:function(e){return Go(_o(),fo.memoizedState,e)},useTransition:function(){return[Co(So)[0],_o().memoizedState]},useMutableSource:Ao,useSyncExternalStore:No,useId:Yo,unstable_isNewReconciler:!1},iu={readContext:Ja,useCallback:qo,useContext:Ja,useEffect:Lo,useImperativeHandle:Wo,useInsertionEffect:Po,useLayoutEffect:jo,useMemo:Ho,useReducer:Eo,useRef:Ro,useState:function(){return Eo(So)},useDebugValue:Vo,useDeferredValue:function(e){var t=_o();return null===fo?t.memoizedState=e:Go(t,fo.memoizedState,e)},useTransition:function(){return[Eo(So)[0],_o().memoizedState]},useMutableSource:Ao,useSyncExternalStore:No,useId:Yo,unstable_isNewReconciler:!1};function ou(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a}}function uu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var su,cu,lu,fu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=ai(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){js||(js=!0,Us=r),uu(0,t)},n}function du(e,t,n){(n=ai(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){uu(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){uu(0,t),"function"!==typeof r&&(null===Ws?Ws=new Set([this]):Ws.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function pu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fu;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function vu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ai(-1,1)).tag=2,ii(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}function mu(e,t){if(!Fi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function yu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function bu(e,t,n){var r=t.pendingProps;switch(Ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yu(t),null;case 1:case 17:return Fa(t.type)&&Ia(),yu(t),null;case 3:return r=t.stateNode,eo(),Ca(Ta),Ca(Na),oo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Li(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Ii&&(ic(Ii),Ii=null))),yu(t),null;case 5:no(t);var a=Qi($i.current);if(n=t.type,null!==e&&null!=t.stateNode)cu(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return yu(t),null}if(e=Qi(Yi.current),Li(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ha]=t,r[da]=o,e=0!==(1&t.mode),n){case"dialog":Lr("cancel",r),Lr("close",r);break;case"iframe":case"object":case"embed":Lr("load",r);break;case"video":case"audio":for(a=0;a<Rr.length;a++)Lr(Rr[a],r);break;case"source":Lr("error",r);break;case"img":case"image":case"link":Lr("error",r),Lr("load",r);break;case"details":Lr("toggle",r);break;case"input":K(r,o),Lr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Lr("invalid",r);break;case"textarea":ae(r,o),Lr("invalid",r)}for(var s in ye(n,o),a=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Qr(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Qr(r.textContent,c,e),a=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Lr("scroll",r)}switch(n){case"input":H(r),J(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Jr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[ha]=t,e[da]=r,su(e,t),t.stateNode=e;e:{switch(s=be(n,r),n){case"dialog":Lr("cancel",e),Lr("close",e),a=r;break;case"iframe":case"object":case"embed":Lr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Rr.length;a++)Lr(Rr[a],e);a=r;break;case"source":Lr("error",e),a=r;break;case"img":case"image":case"link":Lr("error",e),Lr("load",e),a=r;break;case"details":Lr("toggle",e),a=r;break;case"input":K(e,r),a=Y(e,r),Lr("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=B({},r,{value:void 0}),Lr("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),Lr("invalid",e)}for(o in ye(n,a),c=a)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ge(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Lr("scroll",e):null!=l&&b(e,o,l,s))}switch(n){case"input":H(e),J(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+V(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return yu(t),null;case 6:if(e&&null!=t.stateNode)lu(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Qi($i.current),Qi(Yi.current),Li(t)){if(r=t.stateNode,n=t.memoizedProps,r[ha]=t,(o=r.nodeValue!==n)&&null!==(e=Mi))switch(e.tag){case 3:Qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ha]=t,t.stateNode=r}return yu(t),null;case 13:if(Ca(ro),r=t.memoizedState,Fi&&null!==Di&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Di;r;)r=ca(r.nextSibling);return Pi(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Li(t),null===e){if(!r)throw Error(i(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(i(317));r[ha]=t}else Pi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return yu(t),null}return null!==Ii&&(ic(Ii),Ii=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Li(t):n=null!==e.memoizedState,r!==n&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ro.current)?0===Ds&&(Ds=3):pc())),null!==t.updateQueue&&(t.flags|=4),yu(t),null);case 4:return eo(),null===e&&Ur(t.stateNode.containerInfo),yu(t),null;case 10:return Ka(t.type._context),yu(t),null;case 19:if(Ca(ro),null===(o=t.memoizedState))return yu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)mu(o,!1);else{if(0!==Ds||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=ao(e))){for(t.flags|=128,mu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ea(ro,1&ro.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>Ls&&(t.flags|=128,r=!0,mu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ao(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),mu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!Fi)return yu(t),null}else 2*$e()-o.renderingStartTime>Ls&&1073741824!==n&&(t.flags|=128,r=!0,mu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=ro.current,Ea(ro,r?1&n|2:1&n),t):(yu(t),null);case 22:case 23:return lc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ts)&&(yu(t),6&t.subtreeFlags&&(t.flags|=8192)):yu(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}su=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},cu=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Qi(Yi.current);var i,o=null;switch(n){case"input":a=Y(e,a),r=Y(e,r),o=[];break;case"select":a=B({},a,{value:void 0}),r=B({},r,{value:void 0}),o=[];break;case"textarea":a=re(e,a),r=re(e,r),o=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(l in ye(n,r),n=null,a)if(!r.hasOwnProperty(l)&&a.hasOwnProperty(l)&&null!=a[l])if("style"===l){var s=a[l];for(i in s)s.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=a?a[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(i in s)!s.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&s[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Lr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var xu=x.ReactCurrentOwner,wu=!1;function ku(e,t,n,r){t.child=null===e?Gi(t,null,n,r):Hi(t,e.child,n,r)}function _u(e,t,n,r,a){n=n.render;var i=t.ref;return Qa(t,a),r=xo(e,t,n,r,i,a),n=wo(),null===e||wu?(Fi&&n&&Ni(t),t.flags|=1,ku(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Vu(e,t,a))}function Su(e,t,n,r,a){if(null===e){var i=n.type;return"function"!==typeof i||Dc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ic(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Cu(e,t,i,r,a))}if(i=e.child,0===(e.lanes&a)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Vu(e,t,a)}return t.flags|=1,(e=Fc(i,r)).ref=t.ref,e.return=t,t.child=e}function Cu(e,t,n,r,a){if(null!==e){var i=e.memoizedProps;if(sr(i,r)&&e.ref===t.ref){if(wu=!1,t.pendingProps=r=i,0===(e.lanes&a))return t.lanes=e.lanes,Vu(e,t,a);0!==(131072&e.flags)&&(wu=!0)}}return Nu(e,t,n,r,a)}function Eu(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ea(Ms,Ts),Ts|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ea(Ms,Ts),Ts|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Ea(Ms,Ts),Ts|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ea(Ms,Ts),Ts|=r;return ku(e,t,a,n),t.child}function Au(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Nu(e,t,n,r,a){var i=Fa(n)?Ma:Na.current;return i=Da(t,i),Qa(t,a),n=xo(e,t,n,r,i,a),r=wo(),null===e||wu?(Fi&&r&&Ni(t),t.flags|=1,ku(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Vu(e,t,a))}function Tu(e,t,n,r,a){if(Fa(n)){var i=!0;Za(t)}else i=!1;if(Qa(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),pi(t,n,r),gi(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ja(c):c=Da(t,c=Fa(n)?Ma:Na.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&vi(t,o,r,c),ti=!1;var h=t.memoizedState;o.state=h,si(t,r,o,a),s=t.memoizedState,u!==r||h!==s||Ta.current||ti?("function"===typeof l&&(fi(t,n,l,r),s=t.memoizedState),(u=ti||di(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ri(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Va(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ja(s):s=Da(t,s=Fa(n)?Ma:Na.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&vi(t,o,r,s),ti=!1,h=t.memoizedState,o.state=h,si(t,r,o,a);var p=t.memoizedState;u!==f||h!==p||Ta.current||ti?("function"===typeof d&&(fi(t,n,d,r),p=t.memoizedState),(c=ti||di(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Mu(e,t,n,r,i,a)}function Mu(e,t,n,r,a,i){Au(e,t);var o=0!==(128&t.flags);if(!r&&!o)return a&&Ba(t,n,!1),Vu(e,t,i);r=t.stateNode,xu.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Hi(t,e.child,null,i),t.child=Hi(t,null,u,i)):ku(e,t,u,i),t.memoizedState=r.state,a&&Ba(t,n,!0),t.child}function Du(e){var t=e.stateNode;t.pendingContext?Oa(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oa(0,t.context,!1),Ji(e,t.containerInfo)}function Fu(e,t,n,r,a){return Pi(),ji(a),t.flags|=256,ku(e,t,n,r),t.child}var Iu={dehydrated:null,treeContext:null,retryLane:0};function Ou(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ru(e,t){return{baseLanes:e.baseLanes|t,cachePool:null,transitions:e.transitions}}function Zu(e,t,n){var r,a=t.pendingProps,o=ro.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ea(ro,1&o),null===e)return Bi(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=a.children,e=a.fallback,u?(a=t.mode,u=t.child,o={mode:"hidden",children:o},0===(1&a)&&null!==u?(u.childLanes=0,u.pendingProps=o):u=Rc(o,a,0,null),e=Oc(e,a,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Ou(n),t.memoizedState=Iu,e):Bu(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(s)return 256&t.flags?(t.flags&=-257,Pu(e,t,n,Error(i(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(u=a.fallback,o=t.mode,a=Rc({mode:"visible",children:a.children},o,0,null),(u=Oc(u,o,n,null)).flags|=2,a.return=t,u.return=t,a.sibling=u,t.child=a,0!==(1&t.mode)&&Hi(t,e.child,null,n),t.child.memoizedState=Ou(n),t.memoizedState=Iu,u);if(0===(1&t.mode))t=Pu(e,t,n,null);else if("$!"===r.data)t=Pu(e,t,n,Error(i(419)));else if(a=0!==(n&e.childLanes),wu||a){if(null!==(a=Es)){switch(n&-n){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}0!==(a=0!==(u&(a.suspendedLanes|n))?0:u)&&a!==o.retryLane&&(o.retryLane=a,Js(e,a,-1))}pc(),t=Pu(e,t,n,Error(i(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Di=ca(r.nextSibling),Mi=t,Fi=!0,Ii=null,null!==n&&(wi[ki++]=Si,wi[ki++]=Ci,wi[ki++]=_i,Si=n.id,Ci=n.overflow,_i=t),(t=Bu(t,t.pendingProps.children)).flags|=4096);return t}return u?(a=Lu(e,t,a.children,a.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Ou(n):Ru(o,n),u.childLanes=e.childLanes&~n,t.memoizedState=Iu,a):(n=zu(e,t,a.children,n),t.memoizedState=null,n)}return u?(a=Lu(e,t,a.children,a.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Ou(n):Ru(o,n),u.childLanes=e.childLanes&~n,t.memoizedState=Iu,a):(n=zu(e,t,a.children,n),t.memoizedState=null,n)}function Bu(e,t){return(t=Rc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zu(e,t,n,r){var a=e.child;return e=a.sibling,n=Fc(a,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Lu(e,t,n,r,a){var i=t.mode,o=(e=e.child).sibling,u={mode:"hidden",children:n};return 0===(1&i)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=u,t.deletions=null):(n=Fc(e,u)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=Fc(o,r):(r=Oc(r,i,a,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Pu(e,t,n,r){return null!==r&&ji(r),Hi(t,e.child,null,n),(e=Bu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ju(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),$a(e.return,t,n)}function Uu(e,t,n,r,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function Wu(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(ku(e,t,r.children,n),0!==(2&(r=ro.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ju(e,n,t);else if(19===e.tag)ju(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ea(ro,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ao(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Uu(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ao(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Uu(t,!0,n,null,i);break;case"together":Uu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Is|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Fc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qu(e,t){switch(Ti(t),t.tag){case 1:return Fa(t.type)&&Ia(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),Ca(Ta),Ca(Na),oo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(Ca(ro),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));Pi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ca(ro),null;case 4:return eo(),null;case 10:return Ka(t.type._context),null;case 22:case 23:return lc(),null;default:return null}}var Hu=!1,Gu=!1,Xu="function"===typeof WeakSet?WeakSet:Set,Yu=null;function Ku(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){_c(e,t,r)}else n.current=null}function $u(e,t,n){try{n()}catch(r){_c(e,t,r)}}var Qu=!1;function Ju(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&$u(t,n,i)}a=a.next}while(a!==r)}}function es(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ts(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ns(e){var t=e.alternate;null!==t&&(e.alternate=null,ns(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ha],delete t[da],delete t[va],delete t[ga],delete t[ma])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rs(e){return 5===e.tag||3===e.tag||4===e.tag}function as(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||rs(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function is(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(is(e,t,n),e=e.sibling;null!==e;)is(e,t,n),e=e.sibling}function os(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(os(e,t,n),e=e.sibling;null!==e;)os(e,t,n),e=e.sibling}var us=null,ss=!1;function cs(e,t,n){for(n=n.child;null!==n;)ls(e,t,n),n=n.sibling}function ls(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(at,n)}catch(u){}switch(n.tag){case 5:Gu||Ku(n,t);case 6:var r=us,a=ss;us=null,cs(e,t,n),ss=a,null!==(us=r)&&(ss?(e=us,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):us.removeChild(n.stateNode));break;case 18:null!==us&&(ss?(e=us,n=n.stateNode,8===e.nodeType?sa(e.parentNode,n):1===e.nodeType&&sa(e,n),Ut(e)):sa(us,n.stateNode));break;case 4:r=us,a=ss,us=n.stateNode.containerInfo,ss=!0,cs(e,t,n),us=r,ss=a;break;case 0:case 11:case 14:case 15:if(!Gu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,void 0!==o&&(0!==(2&i)||0!==(4&i))&&$u(n,t,o),a=a.next}while(a!==r)}cs(e,t,n);break;case 1:if(!Gu&&(Ku(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){_c(n,t,u)}cs(e,t,n);break;case 21:cs(e,t,n);break;case 22:1&n.mode?(Gu=(r=Gu)||null!==n.memoizedState,cs(e,t,n),Gu=r):cs(e,t,n);break;default:cs(e,t,n)}}function fs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xu),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function hs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:us=s.stateNode,ss=!1;break e;case 3:case 4:us=s.stateNode.containerInfo,ss=!0;break e}s=s.return}if(null===us)throw Error(i(160));ls(o,u,a),us=null,ss=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(l){_c(a,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ds(t,e),t=t.sibling}function ds(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hs(t,e),ps(e),4&r){try{Ju(3,e,e.return),es(3,e)}catch(v){_c(e,e.return,v)}try{Ju(5,e,e.return)}catch(v){_c(e,e.return,v)}}break;case 1:hs(t,e),ps(e),512&r&&null!==n&&Ku(n,n.return);break;case 5:if(hs(t,e),ps(e),512&r&&null!==n&&Ku(n,n.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(v){_c(e,e.return,v)}}if(4&r&&null!=(a=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&$(a,o),be(s,u);var l=be(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?ge(a,h):"dangerouslySetInnerHTML"===f?fe(a,h):"children"===f?he(a,h):b(a,f,h,l)}switch(s){case"input":Q(a,o);break;case"textarea":ie(a,o);break;case"select":var d=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(a,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(a,!!o.multiple,o.defaultValue,!0):ne(a,!!o.multiple,o.multiple?[]:"",!1))}a[da]=o}catch(v){_c(e,e.return,v)}}break;case 6:if(hs(t,e),ps(e),4&r){if(null===e.stateNode)throw Error(i(162));l=e.stateNode,f=e.memoizedProps;try{l.nodeValue=f}catch(v){_c(e,e.return,v)}}break;case 3:if(hs(t,e),ps(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(v){_c(e,e.return,v)}break;case 4:default:hs(t,e),ps(e);break;case 13:hs(t,e),ps(e),8192&(l=e.child).flags&&null!==l.memoizedState&&(null===l.alternate||null===l.alternate.memoizedState)&&(zs=$e()),4&r&&fs(e);break;case 22:if(l=null!==n&&null!==n.memoizedState,1&e.mode?(Gu=(f=Gu)||l,hs(t,e),Gu=f):hs(t,e),ps(e),8192&r){f=null!==e.memoizedState;e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{a=d.stateNode,f?"function"===typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=d.stateNode,u=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(v){_c(e,e.return,v)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=f?"":d.memoizedProps}catch(v){_c(e,e.return,v)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}if(f&&!l&&0!==(1&e.mode))for(Yu=e,e=e.child;null!==e;){for(l=Yu=e;null!==Yu;){switch(h=(f=Yu).child,f.tag){case 0:case 11:case 14:case 15:Ju(4,f,f.return);break;case 1:if(Ku(f,f.return),"function"===typeof(o=f.stateNode).componentWillUnmount){d=f,p=f.return;try{a=d,o.props=a.memoizedProps,o.state=a.memoizedState,o.componentWillUnmount()}catch(v){_c(d,p,v)}}break;case 5:Ku(f,f.return);break;case 22:if(null!==f.memoizedState){ys(l);continue}}null!==h?(h.return=f,Yu=h):ys(l)}e=e.sibling}}break;case 19:hs(t,e),ps(e),4&r&&fs(e);case 21:}}function ps(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(rs(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(he(a,""),r.flags&=-33),os(e,as(e),a);break;case 3:case 4:var o=r.stateNode.containerInfo;is(e,as(e),o);break;default:throw Error(i(161))}}catch(u){_c(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vs(e,t,n){Yu=e,gs(e,t,n)}function gs(e,t,n){for(var r=0!==(1&e.mode);null!==Yu;){var a=Yu,i=a.child;if(22===a.tag&&r){var o=null!==a.memoizedState||Hu;if(!o){var u=a.alternate,s=null!==u&&null!==u.memoizedState||Gu;u=Hu;var c=Gu;if(Hu=o,(Gu=s)&&!c)for(Yu=a;null!==Yu;)s=(o=Yu).child,22===o.tag&&null!==o.memoizedState?bs(a):null!==s?(s.return=o,Yu=s):bs(a);for(;null!==i;)Yu=i,gs(i,t,n),i=i.sibling;Yu=a,Hu=u,Gu=c}ms(e)}else 0!==(8772&a.subtreeFlags)&&null!==i?(i.return=a,Yu=i):ms(e)}}function ms(e){for(;null!==Yu;){var t=Yu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Gu||es(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Gu)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Va(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ci(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ci(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Ut(h)}}}break;default:throw Error(i(163))}Gu||512&t.flags&&ts(t)}catch(d){_c(t,t.return,d)}}if(t===e){Yu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Yu=n;break}Yu=t.return}}function ys(e){for(;null!==Yu;){var t=Yu;if(t===e){Yu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Yu=n;break}Yu=t.return}}function bs(e){for(;null!==Yu;){var t=Yu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{es(4,t)}catch(s){_c(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(s){_c(t,a,s)}}var i=t.return;try{ts(t)}catch(s){_c(t,i,s)}break;case 5:var o=t.return;try{ts(t)}catch(s){_c(t,o,s)}}}catch(s){_c(t,t.return,s)}if(t===e){Yu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Yu=u;break}Yu=t.return}}var xs,ws=Math.ceil,ks=x.ReactCurrentDispatcher,_s=x.ReactCurrentOwner,Ss=x.ReactCurrentBatchConfig,Cs=0,Es=null,As=null,Ns=0,Ts=0,Ms=Sa(0),Ds=0,Fs=null,Is=0,Os=0,Rs=0,Zs=null,Bs=null,zs=0,Ls=1/0,Ps=null,js=!1,Us=null,Ws=null,Vs=!1,qs=null,Hs=0,Gs=0,Xs=null,Ys=-1,Ks=0;function $s(){return 0!==(6&Cs)?$e():-1!==Ys?Ys:Ys=$e()}function Qs(e){return 0===(1&e.mode)?1:0!==(2&Cs)&&0!==Ns?Ns&-Ns:null!==Wa.transition?(0===Ks&&(Ks=vt()),Ks):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function Js(e,t,n){if(50<Gs)throw Gs=0,Xs=null,Error(i(185));var r=ec(e,t);return null===r?null:(mt(r,t,n),0!==(2&Cs)&&r===Es||(r===Es&&(0===(2&Cs)&&(Os|=t),4===Ds&&oc(r,Ns)),nc(r,n),1===t&&0===Cs&&0===(1&e.mode)&&(Ls=$e()+500,La&&Ua())),r)}function ec(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function tc(e){return(null!==Es||null!==ei)&&0!==(1&e.mode)&&0===(2&Cs)}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),u=1<<o,s=a[o];-1===s?0!==(u&n)&&0===(u&r)||(a[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),i&=~u}}(e,t);var r=ht(e,e===Es?Ns:0);if(0===r)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){La=!0,ja(e)}(uc.bind(null,e)):ja(uc.bind(null,e)),oa((function(){0===Cs&&Ua()})),n=null;else{switch(xt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Ys=-1,Ks=0,0!==(6&Cs))throw Error(i(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=ht(e,e===Es?Ns:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var a=Cs;Cs|=2;var o=dc();for(Es===e&&Ns===t||(Ps=null,Ls=$e()+500,fc(e,t));;)try{mc();break}catch(s){hc(e,s)}Ya(),ks.current=o,Cs=a,null!==As?t=0:(Es=null,Ns=0,t=Ds)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(r=a,t=ac(e,a))),1===t)throw n=Fs,fc(e,0),oc(e,r),nc(e,$e()),n;if(6===t)oc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!ur(i(),a))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=vc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Fs,fc(e,0),oc(e,r),nc(e,$e()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:xc(e,Bs,Ps);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=zs+500-$e())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&r)!==r){$s(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(xc.bind(null,e,Bs,Ps),t);break}xc(e,Bs,Ps);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>a&&(a=u),r&=~o}if(r=a,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ws(r/1960))-r)){e.timeoutHandle=ra(xc.bind(null,e,Bs,Ps),r);break}xc(e,Bs,Ps);break;default:throw Error(i(329))}}}return nc(e,$e()),e.callbackNode===n?rc.bind(null,e):null}function ac(e,t){var n=Zs;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Bs,Bs=n,null!==t&&ic(t)),e}function ic(e){null===Bs?Bs=e:Bs.push.apply(Bs,e)}function oc(e,t){for(t&=~Rs,t&=~Os,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&Cs))throw Error(i(327));wc();var t=ht(e,0);if(0===(1&t))return nc(e,$e()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Fs,fc(e,0),oc(e,t),nc(e,$e()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Bs,Ps),nc(e,$e()),null}function sc(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&(Ls=$e()+500,La&&Ua())}}function cc(e){null!==qs&&0===qs.tag&&0===(6&Cs)&&wc();var t=Cs;Cs|=1;var n=Ss.transition,r=bt;try{if(Ss.transition=null,bt=1,e)return e()}finally{bt=r,Ss.transition=n,0===(6&(Cs=t))&&Ua()}}function lc(){Ts=Ms.current,Ca(Ms)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(Ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ia();break;case 3:eo(),Ca(Ta),Ca(Na),oo();break;case 5:no(r);break;case 4:eo();break;case 13:case 19:Ca(ro);break;case 10:Ka(r.type._context);break;case 22:case 23:lc()}n=n.return}if(Es=e,As=e=Fc(e.current,null),Ns=Ts=t,Ds=0,Fs=null,Rs=Os=Is=0,Bs=Zs=null,null!==ei){for(t=0;t<ei.length;t++)if(null!==(r=(n=ei[t]).interleaved)){n.interleaved=null;var a=r.next,i=n.pending;if(null!==i){var o=i.next;i.next=a,r.next=o}n.pending=r}ei=null}return e}function hc(e,t){for(;;){var n=As;try{if(Ya(),uo.current=nu,po){for(var r=lo.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}po=!1}if(co=0,ho=fo=lo=null,vo=!1,go=0,_s.current=null,null===n||null===n.return){Ds=1,Fs=t,As=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ns,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=vu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&pu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var g=new Set;g.add(c),t.updateQueue=g}else v.add(c);break e}if(0===(1&t)){pu(o,l,t),pc();break e}c=Error(i(426))}else if(Fi&&1&s.mode){var m=vu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),ji(c);break e}}o=c,4!==Ds&&(Ds=2),null===Zs?Zs=[o]:Zs.push(o),c=ou(c,s),s=u;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,ui(s,hu(0,c,t));break e;case 1:o=c;var y=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Ws||!Ws.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,ui(s,du(s,o,t));break e}}s=s.return}while(null!==s)}bc(n)}catch(x){t=x,As===n&&null!==n&&(As=n=n.return);continue}break}}function dc(){var e=ks.current;return ks.current=nu,null===e?nu:e}function pc(){0!==Ds&&3!==Ds&&2!==Ds||(Ds=4),null===Es||0===(268435455&Is)&&0===(268435455&Os)||oc(Es,Ns)}function vc(e,t){var n=Cs;Cs|=2;var r=dc();for(Es===e&&Ns===t||(Ps=null,fc(e,t));;)try{gc();break}catch(a){hc(e,a)}if(Ya(),Cs=n,ks.current=r,null!==As)throw Error(i(261));return Es=null,Ns=0,Ds}function gc(){for(;null!==As;)yc(As)}function mc(){for(;null!==As&&!Ye();)yc(As)}function yc(e){var t=xs(e.alternate,e,Ts);e.memoizedProps=e.pendingProps,null===t?bc(e):As=t,_s.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=bu(n,t,Ts)))return void(As=n)}else{if(null!==(n=qu(n,t)))return n.flags&=32767,void(As=n);if(null===e)return Ds=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Ds&&(Ds=5)}function xc(e,t,n){var r=bt,a=Ss.transition;try{Ss.transition=null,bt=1,function(e,t,n,r){do{wc()}while(null!==qs);if(0!==(6&Cs))throw Error(i(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-ot(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}(e,o),e===Es&&(As=Es=null,Ns=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Vs||(Vs=!0,Nc(tt,(function(){return wc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ss.transition,Ss.transition=null;var u=bt;bt=1;var s=Cs;Cs|=4,_s.current=null,function(e,t){if(ea=Vt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(k){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==a&&3!==h.nodeType||(s=u+a),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===a&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Vt=!1,Yu=t;null!==Yu;)if(e=(t=Yu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Yu=e;else for(;null!==Yu;){t=Yu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var g=v.memoizedProps,m=v.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:Va(t.type,g),m);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;if(1===x.nodeType)x.textContent="";else if(9===x.nodeType){var w=x.body;null!=w&&(w.textContent="")}break;default:throw Error(i(163))}}catch(k){_c(t,t.return,k)}if(null!==(e=t.sibling)){e.return=t.return,Yu=e;break}Yu=t.return}v=Qu,Qu=!1}(e,n),ds(n,e),pr(ta),Vt=!!ea,ta=ea=null,e.current=n,vs(n,e,a),Ke(),Cs=s,bt=u,Ss.transition=o}else e.current=n;if(Vs&&(Vs=!1,qs=e,Hs=a),0===(o=e.pendingLanes)&&(Ws=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r(t[n]);if(js)throw js=!1,e=Us,Us=null,e;0!==(1&Hs)&&0!==e.tag&&wc(),0!==(1&(o=e.pendingLanes))?e===Xs?Gs++:(Gs=0,Xs=e):Gs=0,Ua()}(e,t,n,r)}finally{Ss.transition=a,bt=r}return null}function wc(){if(null!==qs){var e=xt(Hs),t=Ss.transition,n=bt;try{if(Ss.transition=null,bt=16>e?16:e,null===qs)var r=!1;else{if(e=qs,qs=null,Hs=0,0!==(6&Cs))throw Error(i(331));var a=Cs;for(Cs|=4,Yu=e.current;null!==Yu;){var o=Yu,u=o.child;if(0!==(16&Yu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Yu=l;null!==Yu;){var f=Yu;switch(f.tag){case 0:case 11:case 15:Ju(8,f,o)}var h=f.child;if(null!==h)h.return=f,Yu=h;else for(;null!==Yu;){var d=(f=Yu).sibling,p=f.return;if(ns(f),f===l){Yu=null;break}if(null!==d){d.return=p,Yu=d;break}Yu=p}}}var v=o.alternate;if(null!==v){var g=v.child;if(null!==g){v.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(null!==g)}}Yu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Yu=u;else e:for(;null!==Yu;){if(0!==(2048&(o=Yu).flags))switch(o.tag){case 0:case 11:case 15:Ju(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Yu=y;break e}Yu=o.return}}var b=e.current;for(Yu=b;null!==Yu;){var x=(u=Yu).child;if(0!==(2064&u.subtreeFlags)&&null!==x)x.return=u,Yu=x;else e:for(u=b;null!==Yu;){if(0!==(2048&(s=Yu).flags))try{switch(s.tag){case 0:case 11:case 15:es(9,s)}}catch(k){_c(s,s.return,k)}if(s===u){Yu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Yu=w;break e}Yu=s.return}}if(Cs=a,Ua(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(at,e)}catch(k){}r=!0}return r}finally{bt=n,Ss.transition=t}}return!1}function kc(e,t,n){ii(e,t=hu(0,t=ou(n,t),1)),t=$s(),null!==(e=ec(e,1))&&(mt(e,1,t),nc(e,t))}function _c(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ws||!Ws.has(r))){ii(t,e=du(t,e=ou(n,e),1)),e=$s(),null!==(t=ec(t,1))&&(mt(t,1,e),nc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=$s(),e.pingedLanes|=e.suspendedLanes&n,Es===e&&(Ns&n)===n&&(4===Ds||3===Ds&&(130023424&Ns)===Ns&&500>$e()-zs?fc(e,0):Rs|=n),nc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=$s();null!==(e=ec(e,t))&&(mt(e,t,n),nc(e,n))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Cc(e,n)}function Nc(e,t){return Ge(e,t)}function Tc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mc(e,t,n,r){return new Tc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fc(e,t){var n=e.alternate;return null===n?((n=Mc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ic(e,t,n,r,a,o){var u=2;if(r=e,"function"===typeof e)Dc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Oc(n.children,a,o,t);case S:u=8,a|=8;break;case C:return(e=Mc(12,n,t,2|a)).elementType=C,e.lanes=o,e;case T:return(e=Mc(13,n,t,a)).elementType=T,e.lanes=o,e;case M:return(e=Mc(19,n,t,a)).elementType=M,e.lanes=o,e;case I:return Rc(n,a,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:u=10;break e;case A:u=9;break e;case N:u=11;break e;case D:u=14;break e;case F:u=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Mc(u,n,t,a)).elementType=e,t.type=r,t.lanes=o,t}function Oc(e,t,n,r){return(e=Mc(7,e,r,t)).lanes=n,e}function Rc(e,t,n,r){return(e=Mc(22,e,r,t)).elementType=I,e.lanes=n,e.stateNode={},e}function Zc(e,t,n){return(e=Mc(6,e,null,t)).lanes=n,e}function Bc(e,t,n){return(t=Mc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Lc(e,t,n,r,a,i,o,u,s){return e=new zc(e,t,n,u,s),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Mc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ni(i),e}function Pc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function jc(e){if(!e)return Aa;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Fa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Fa(n))return Ra(e,n,t)}return t}function Uc(e,t,n,r,a,i,o,u,s){return(e=Lc(n,r,!0,e,0,i,0,u,s)).context=jc(null),n=e.current,(i=ai(r=$s(),a=Qs(n))).callback=void 0!==t&&null!==t?t:null,ii(n,i),e.current.lanes=a,mt(e,a,r),nc(e,r),e}function Wc(e,t,n,r){var a=t.current,i=$s(),o=Qs(a);return n=jc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ai(i,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ii(a,t),null!==(e=Js(a,o,i))&&oi(e,a,o),o}function Vc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}xs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ta.current)wu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wu=!1,function(e,t,n){switch(t.tag){case 3:Du(t),Pi();break;case 5:to(t);break;case 1:Fa(t.type)&&Za(t);break;case 4:Ji(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ea(qa,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ea(ro,1&ro.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Zu(e,t,n):(Ea(ro,1&ro.current),null!==(e=Vu(e,t,n))?e.sibling:null);Ea(ro,1&ro.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Wu(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ea(ro,ro.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return Vu(e,t,n)}(e,t,n);wu=0!==(131072&e.flags)}else wu=!1,Fi&&0!==(1048576&t.flags)&&Ai(t,xi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var a=Da(t,Na.current);Qa(t,n),a=xo(null,t,r,e,a,n);var o=wo();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Fa(r)?(o=!0,Za(t)):o=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,ni(t),a.updater=hi,t.stateNode=a,a._reactInternals=t,gi(t,r,e,n),t=Mu(null,t,r,!0,o,n)):(t.tag=0,Fi&&o&&Ni(t),ku(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===D)return 14}return 2}(r),e=Va(r,e),a){case 0:t=Nu(null,t,r,e,n);break e;case 1:t=Tu(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=Su(null,t,r,Va(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Nu(e,t,r,a=t.elementType===r?a:Va(r,a),n);case 1:return r=t.type,a=t.pendingProps,Tu(e,t,r,a=t.elementType===r?a:Va(r,a),n);case 3:e:{if(Du(t),null===e)throw Error(i(387));r=t.pendingProps,a=(o=t.memoizedState).element,ri(e,t),si(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Fu(e,t,r,n,a=Error(i(423)));break e}if(r!==a){t=Fu(e,t,r,n,a=Error(i(424)));break e}for(Di=ca(t.stateNode.containerInfo.firstChild),Mi=t,Fi=!0,Ii=null,n=Gi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Pi(),r===a){t=Vu(e,t,n);break e}ku(e,t,r,n)}t=t.child}return t;case 5:return to(t),null===e&&Bi(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,u=a.children,na(r,a)?u=null:null!==o&&na(r,o)&&(t.flags|=32),Au(e,t),ku(e,t,u,n),t.child;case 6:return null===e&&Bi(t),null;case 13:return Zu(e,t,n);case 4:return Ji(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Hi(t,null,r,n):ku(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,_u(e,t,r,a=t.elementType===r?a:Va(r,a),n);case 7:return ku(e,t,t.pendingProps,n),t.child;case 8:case 12:return ku(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,u=a.value,Ea(qa,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===a.children&&!Ta.current){t=Vu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=ai(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),$a(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(i(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),$a(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}ku(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Qa(t,n),r=r(a=Ja(a)),t.flags|=1,ku(e,t,r,n),t.child;case 14:return a=Va(r=t.type,t.pendingProps),Su(e,t,r,a=Va(r.type,a),n);case 15:return Cu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Va(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Fa(r)?(e=!0,Za(t)):e=!1,Qa(t,n),pi(t,r,a),gi(t,r,a,n),Mu(null,t,r,!0,e,n);case 19:return Wu(e,t,n);case 22:return Eu(e,t,n)}throw Error(i(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Kc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Jc(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if("function"===typeof a){var u=a;a=function(){var e=Vc(o);u.call(e)}}Wc(t,o,e,a)}else o=function(e,t,n,r,a){if(a){if("function"===typeof r){var i=r;r=function(){var e=Vc(o);i.call(e)}}var o=Uc(t,r,e,0,null,!1,0,"",Qc);return e._reactRootContainer=o,e[pa]=o.current,Ur(8===e.nodeType?e.parentNode:e),cc(),o}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var u=r;r=function(){var e=Vc(s);u.call(e)}}var s=Lc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=s,e[pa]=s.current,Ur(8===e.nodeType?e.parentNode:e),cc((function(){Wc(t,s,n,r)})),s}(n,t,e,a,r);return Vc(o)}Yc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Wc(e,t,null,null)},Yc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc((function(){Wc(null,e,null,null)})),t[pa]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<It.length&&0!==t&&t<It[n].priority;n++);It.splice(n,0,e),0===n&&Bt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(yt(t,1|n),nc(t,$e()),0===(6&Cs)&&(Ls=$e()+500,Ua()))}break;case 13:var r=$s();cc((function(){return Js(e,1,r)})),Hc(e,1)}},kt=function(e){13===e.tag&&(Js(e,134217728,$s()),Hc(e,134217728))},_t=function(e){if(13===e.tag){var t=$s(),n=Qs(e);Js(e,n,t),Hc(e,n)}},St=function(){return bt},Ct=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=wa(r);if(!a)throw Error(i(90));G(r),Q(r,a)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ne=sc,Te=cc;var el={usingClientEntryPoint:!1,Events:[ba,xa,wa,Ee,Ae,sc]},tl={findFiberByHostInstance:ya,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},nl={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{at=rl.inject(nl),it=rl}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=el,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kc(t))throw Error(i(200));return Pc(e,t,null,n)},t.createRoot=function(e,t){if(!Kc(e))throw Error(i(299));var n=!1,r="",a=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Lc(e,1,!1,null,0,n,0,r,a),e[pa]=t.current,Ur(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(i(200));return Jc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Kc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,a=!1,o="",u=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Uc(t,null,e,1,null!=n?n:null,a,0,o,u),e[pa]=t.current,Ur(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Yc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(i(200));return Jc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(i(40));return!!e._reactRootContainer&&(cc((function(){Jc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pa]=null}))})),!0)},t.unstable_batchedUpdates=sc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Jc(e,t,n,!1,r)},t.version="18.1.0-next-22edb9f77-20220426"},1250:function(e,t,n){"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},6374:function(e,t,n){"use strict";var r=n(2791),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:l,props:i,_owner:u.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,g={};function m(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var x=b.prototype=new y;x.constructor=b,v(x,m.prototype),x.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,_={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var a,i={},o=null,u=null;if(null!=t)for(a in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,a)&&!S.hasOwnProperty(a)&&(i[a]=t[a]);var s=arguments.length-2;if(1===s)i.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(a in s=e.defaultProps)void 0===i[a]&&(i[a]=s[a]);return{$$typeof:n,type:e,key:o,ref:u,props:i,_owner:_.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,a,i,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===i?"."+N(s,0):i,w(o)?(a="",null!=e&&(a=e.replace(A,"$&/")+"/"),T(o,t,a,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,a+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(A,"$&/")+"/")+e)),t.push(o)),1;if(s=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var l=i+N(u=e[c],c);s+=T(u,t,a,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=T(u=u.value,t,a,l=i+N(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function M(e,t,n){if(null==e)return e;var r=[],a=0;return T(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var F={current:null},I={transition:null},O={ReactCurrentDispatcher:F,ReactCurrentBatchConfig:I,ReactCurrentOwner:_};t.Children={map:M,forEach:function(e,t,n){M(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return M(e,(function(){t++})),t},toArray:function(e){return M(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=a,t.Profiler=o,t.PureComponent=b,t.StrictMode=i,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=v({},e.props),i=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)k.call(t,c)&&!S.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];a.children=s}return{$$typeof:n,type:e.type,key:i,ref:o,props:a,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return F.current.useCallback(e,t)},t.useContext=function(e){return F.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return F.current.useDeferredValue(e)},t.useEffect=function(e,t){return F.current.useEffect(e,t)},t.useId=function(){return F.current.useId()},t.useImperativeHandle=function(e,t,n){return F.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return F.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return F.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return F.current.useMemo(e,t)},t.useReducer=function(e,t,n){return F.current.useReducer(e,t,n)},t.useRef=function(e){return F.current.useRef(e)},t.useState=function(e){return F.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return F.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return F.current.useTransition()},t.version="18.1.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},9727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(D){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),o=new N(r||[]);return i._invoke=function(e,t,n){var r=f;return function(a,i){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===a)throw i;return M()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var u=C(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function g(){}function m(){}function y(){}var b={};s(b,i,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(T([])));w&&w!==n&&r.call(w,i)&&(b=w);var k=y.prototype=g.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(a,i,o,u){var s=l(e[a],e,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var a;this._invoke=function(e,r){function i(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(i,i):i()}}function C(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var a=l(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function T(e){if(e){var n=e[i];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:M}}function M(){return{value:t,done:!0}}return m.prototype=y,s(k,"constructor",y),s(y,"constructor",m),m.displayName=s(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},_(S.prototype),s(S.prototype,o,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new S(c(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(k),s(k,u,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=T,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return u.type="throw",u.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],u=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;A(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:T(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,o=a>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>i(s,n))c<a&&0>i(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<a&&0>i(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,g=!1,m="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(l);null!==t;){if(null===t.callback)a(l);else{if(!(t.startTime<=e))break;a(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(g=!1,x(e),!v)if(null!==r(c))v=!0,I(k);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function k(e,n){v=!1,g&&(g=!1,y(E),E=-1),p=!0;var i=d;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!T());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&a(c),x(n)}else a(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),s=!1}return s}finally{h=null,d=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,S=!1,C=null,E=-1,A=5,N=-1;function T(){return!(t.unstable_now()-N<A)}function M(){if(null!==C){var e=t.unstable_now();N=e;var n=!0;try{n=C(!0,e)}finally{n?_():(S=!1,C=null)}}else S=!1}if("function"===typeof b)_=function(){b(M)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,F=D.port2;D.port1.onmessage=M,_=function(){F.postMessage(null)}}else _=function(){m(M,0)};function I(e){C=e,S||(S=!0,_())}function O(e,n){E=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,I(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,a,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:a,priorityLevel:e,startTime:i,expirationTime:u=i+u,sortIndex:-1},i>o?(e.sortIndex=i,n(l,e),null===r(c)&&e===r(l)&&(g?(y(E),E=-1):g=!0,O(w,i-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,I(k))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},6699:function(e,t,n){var r=n(2501),a=n(9112),i=n(2132),o=n(890),u=n(4113),s=n(1725),c=n(3411);c.alea=r,c.xor128=a,c.xorwow=i,c.xorshift7=o,c.xor4096=u,c.tychei=s,e.exports=c},2501:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n=function(){var e=4022871197;return function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function u(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.alea=s}(0,e=n.nmd(e),n.amdD)},1725:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function u(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.tychei=s}(0,e=n.nmd(e),n.amdD)},9112:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function u(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xor128=s}(0,e=n.nmd(e),n.amdD)},4113:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,u=[],s=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,s=Math.max(s,t.length)),a=0,i=-32;i<s;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=u[127&i]^=r+o)?a+1:0);for(a>=128&&(u[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=u[a+34&127],n=u[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,u[a]=r^n;e.w=o,e.X=u,e.i=a}(t,e)}function u(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xor4096=s}(0,e=n.nmd(e),n.amdD)},890:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function u(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xorshift7=s}(0,e=n.nmd(e),n.amdD)},2132:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function u(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xorwow=s}(0,e=n.nmd(e),n.amdD)},3411:function(e,t,n){var r;!function(a,i,o){var u,s=256,c=o.pow(s,6),l=o.pow(2,52),f=2*l,h=255;function d(e,t,n){var r=[],h=m(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(i)]:null==e?function(){try{var e;return u&&(e=u.randomBytes)?e=e(s):(e=new Uint8Array(s),(a.crypto||a.msCrypto).getRandomValues(e)),y(e)}catch(r){var t=a.navigator,n=t&&t.plugins;return[+new Date,a,n,a.screen,y(i)]}}():e,3),r),d=new p(r),b=function(){for(var e=d.g(6),t=c,n=0;e<l;)e=(e+n)*s,t*=s,n=d.g(1);for(;e>=f;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|d.g(4)},b.quick=function(){return d.g(4)/4294967296},b.double=b,m(y(d.S),i),(t.pass||n||function(e,t,n,r){return r&&(r.S&&v(r,d),e.state=function(){return v(d,{})}),n?(o.random=e,t):e})(b,h,"global"in t?t.global:this==o,t.state)}function p(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<s;)o[a]=a++;for(a=0;a<s;a++)o[a]=o[i=h&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=h&a+1],n=n*s+o[h&(o[a]=o[i=h&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(s)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(g(e[n],t-1))}catch(i){}return r.length?r:"string"==a?e:e+"\0"}function m(e,t){for(var n,r=e+"",a=0;a<r.length;)t[h&a]=h&(n^=19*t[h&a])+r.charCodeAt(a++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(m(o.random(),i),e.exports){e.exports=d;try{u=n(5042)}catch(b){}}else void 0===(r=function(){return d}.call(t,n,t,e))||(e.exports=r)}("undefined"!==typeof self?self:this,[],Math)},8981:function(e,t,n){var r=n(8064).default,a=n(8231).default,i=Symbol("SemVer ANY"),o=function(){"use strict";function e(t,n){if(r(this,e),n=u(n),t instanceof e){if(t.loose===!!n.loose)return t;t=t.value}h("comparator",t,n),this.options=n,this.loose=!!n.loose,this.parse(t),this.semver===i?this.value="":this.value=this.operator+this.semver.version,h("comp",this)}return a(e,[{key:"parse",value:function(e){var t=this.options.loose?c[l.COMPARATORLOOSE]:c[l.COMPARATOR],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: ".concat(e));this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new d(n[2],this.options.loose):this.semver=i}},{key:"toString",value:function(){return this.value}},{key:"test",value:function(e){if(h("Comparator.test",e,this.options.loose),this.semver===i||e===i)return!0;if("string"===typeof e)try{e=new d(e,this.options)}catch(t){return!1}return f(e,this.operator,this.semver,this.options)}},{key:"intersects",value:function(t,n){if(!(t instanceof e))throw new TypeError("a Comparator is required");if(n&&"object"===typeof n||(n={loose:!!n,includePrerelease:!1}),""===this.operator)return""===this.value||new p(t.value,n).test(this.value);if(""===t.operator)return""===t.value||new p(this.value,n).test(t.semver);var r=(">="===this.operator||">"===this.operator)&&(">="===t.operator||">"===t.operator),a=("<="===this.operator||"<"===this.operator)&&("<="===t.operator||"<"===t.operator),i=this.semver.version===t.semver.version,o=(">="===this.operator||"<="===this.operator)&&(">="===t.operator||"<="===t.operator),u=f(this.semver,"<",t.semver,n)&&(">="===this.operator||">"===this.operator)&&("<="===t.operator||"<"===t.operator),s=f(this.semver,">",t.semver,n)&&("<="===this.operator||"<"===this.operator)&&(">="===t.operator||">"===t.operator);return r||a||i&&o||u||s}}],[{key:"ANY",get:function(){return i}}]),e}();e.exports=o;var u=n(8270),s=n(5446),c=s.re,l=s.t,f=n(2907),h=n(9304),d=n(3298),p=n(487)},487:function(e,t,n){var r=n(8485).default,a=n(9504).default,i=n(8064).default,o=n(8231).default,u=function(){"use strict";function e(t,n){var r=this;if(i(this,e),n=c(n),t instanceof e)return t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease?t:new e(t.raw,n);if(t instanceof l)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=t,this.set=t.split("||").map((function(e){return r.parseRange(e.trim())})).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(t));if(this.set.length>1){var o=this.set[0];if(this.set=this.set.filter((function(e){return!b(e[0])})),0===this.set.length)this.set=[o];else if(this.set.length>1){var u,s=a(this.set);try{for(s.s();!(u=s.n()).done;){var f=u.value;if(1===f.length&&x(f[0])){this.set=[f];break}}}catch(h){s.e(h)}finally{s.f()}}}this.format()}return o(e,[{key:"format",value:function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range}},{key:"toString",value:function(){return this.range}},{key:"parseRange",value:function(e){var t=this;e=e.trim();var n=Object.keys(this.options).join(","),i="parseRange:".concat(n,":").concat(e),o=s.get(i);if(o)return o;var u=this.options.loose,c=u?p[v.HYPHENRANGELOOSE]:p[v.HYPHENRANGE];e=e.replace(c,F(this.options.includePrerelease)),f("hyphen replace",e),e=e.replace(p[v.COMPARATORTRIM],g),f("comparator trim",e);var h=(e=(e=(e=e.replace(p[v.TILDETRIM],m)).replace(p[v.CARETTRIM],y)).split(/\s+/).join(" ")).split(" ").map((function(e){return k(e,t.options)})).join(" ").split(/\s+/).map((function(e){return D(e,t.options)}));u&&(h=h.filter((function(e){return f("loose invalid filter",e,t.options),!!e.match(p[v.COMPARATORLOOSE])}))),f("range list",h);var d,x=new Map,w=h.map((function(e){return new l(e,t.options)})),_=a(w);try{for(_.s();!(d=_.n()).done;){var S=d.value;if(b(S))return[S];x.set(S.value,S)}}catch(E){_.e(E)}finally{_.f()}x.size>1&&x.has("")&&x.delete("");var C=r(x.values());return s.set(i,C),C}},{key:"intersects",value:function(t,n){if(!(t instanceof e))throw new TypeError("a Range is required");return this.set.some((function(e){return w(e,n)&&t.set.some((function(t){return w(t,n)&&e.every((function(e){return t.every((function(t){return e.intersects(t,n)}))}))}))}))}},{key:"test",value:function(e){if(!e)return!1;if("string"===typeof e)try{e=new h(e,this.options)}catch(n){return!1}for(var t=0;t<this.set.length;t++)if(I(this.set[t],e,this.options))return!0;return!1}}]),e}();e.exports=u;var s=new(n(9341))({max:1e3}),c=n(8270),l=n(8981),f=n(9304),h=n(3298),d=n(5446),p=d.re,v=d.t,g=d.comparatorTrimReplace,m=d.tildeTrimReplace,y=d.caretTrimReplace,b=function(e){return"<0.0.0-0"===e.value},x=function(e){return""===e.value},w=function(e,t){for(var n=!0,r=e.slice(),a=r.pop();n&&r.length;)n=r.every((function(e){return a.intersects(e,t)})),a=r.pop();return n},k=function(e,t){return f("comp",e,t),e=E(e,t),f("caret",e),e=S(e,t),f("tildes",e),e=N(e,t),f("xrange",e),e=M(e,t),f("stars",e),e},_=function(e){return!e||"x"===e.toLowerCase()||"*"===e},S=function(e,t){return e.trim().split(/\s+/).map((function(e){return C(e,t)})).join(" ")},C=function(e,t){var n=t.loose?p[v.TILDELOOSE]:p[v.TILDE];return e.replace(n,(function(t,n,r,a,i){var o;return f("tilde",e,t,n,r,a,i),_(n)?o="":_(r)?o=">=".concat(n,".0.0 <").concat(+n+1,".0.0-0"):_(a)?o=">=".concat(n,".").concat(r,".0 <").concat(n,".").concat(+r+1,".0-0"):i?(f("replaceTilde pr",i),o=">=".concat(n,".").concat(r,".").concat(a,"-").concat(i," <").concat(n,".").concat(+r+1,".0-0")):o=">=".concat(n,".").concat(r,".").concat(a," <").concat(n,".").concat(+r+1,".0-0"),f("tilde return",o),o}))},E=function(e,t){return e.trim().split(/\s+/).map((function(e){return A(e,t)})).join(" ")},A=function(e,t){f("caret",e,t);var n=t.loose?p[v.CARETLOOSE]:p[v.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,(function(t,n,a,i,o){var u;return f("caret",e,t,n,a,i,o),_(n)?u="":_(a)?u=">=".concat(n,".0.0").concat(r," <").concat(+n+1,".0.0-0"):_(i)?u="0"===n?">=".concat(n,".").concat(a,".0").concat(r," <").concat(n,".").concat(+a+1,".0-0"):">=".concat(n,".").concat(a,".0").concat(r," <").concat(+n+1,".0.0-0"):o?(f("replaceCaret pr",o),u="0"===n?"0"===a?">=".concat(n,".").concat(a,".").concat(i,"-").concat(o," <").concat(n,".").concat(a,".").concat(+i+1,"-0"):">=".concat(n,".").concat(a,".").concat(i,"-").concat(o," <").concat(n,".").concat(+a+1,".0-0"):">=".concat(n,".").concat(a,".").concat(i,"-").concat(o," <").concat(+n+1,".0.0-0")):(f("no pr"),u="0"===n?"0"===a?">=".concat(n,".").concat(a,".").concat(i).concat(r," <").concat(n,".").concat(a,".").concat(+i+1,"-0"):">=".concat(n,".").concat(a,".").concat(i).concat(r," <").concat(n,".").concat(+a+1,".0-0"):">=".concat(n,".").concat(a,".").concat(i," <").concat(+n+1,".0.0-0")),f("caret return",u),u}))},N=function(e,t){return f("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return T(e,t)})).join(" ")},T=function(e,t){e=e.trim();var n=t.loose?p[v.XRANGELOOSE]:p[v.XRANGE];return e.replace(n,(function(n,r,a,i,o,u){f("xRange",e,n,r,a,i,o,u);var s=_(a),c=s||_(i),l=c||_(o),h=l;return"="===r&&h&&(r=""),u=t.includePrerelease?"-0":"",s?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&h?(c&&(i=0),o=0,">"===r?(r=">=",c?(a=+a+1,i=0,o=0):(i=+i+1,o=0)):"<="===r&&(r="<",c?a=+a+1:i=+i+1),"<"===r&&(u="-0"),n="".concat(r+a,".").concat(i,".").concat(o).concat(u)):c?n=">=".concat(a,".0.0").concat(u," <").concat(+a+1,".0.0-0"):l&&(n=">=".concat(a,".").concat(i,".0").concat(u," <").concat(a,".").concat(+i+1,".0-0")),f("xRange return",n),n}))},M=function(e,t){return f("replaceStars",e,t),e.trim().replace(p[v.STAR],"")},D=function(e,t){return f("replaceGTE0",e,t),e.trim().replace(p[t.includePrerelease?v.GTE0PRE:v.GTE0],"")},F=function(e){return function(t,n,r,a,i,o,u,s,c,l,f,h,d){return n=_(r)?"":_(a)?">=".concat(r,".0.0").concat(e?"-0":""):_(i)?">=".concat(r,".").concat(a,".0").concat(e?"-0":""):o?">=".concat(n):">=".concat(n).concat(e?"-0":""),s=_(c)?"":_(l)?"<".concat(+c+1,".0.0-0"):_(f)?"<".concat(c,".").concat(+l+1,".0-0"):h?"<=".concat(c,".").concat(l,".").concat(f,"-").concat(h):e?"<".concat(c,".").concat(l,".").concat(+f+1,"-0"):"<=".concat(s),"".concat(n," ").concat(s).trim()}},I=function(e,t,n){for(var r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(var a=0;a<e.length;a++)if(f(e[a].semver),e[a].semver!==l.ANY&&e[a].semver.prerelease.length>0){var i=e[a].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}},3298:function(e,t,n){var r=n(8064).default,a=n(8231).default,i=n(9304),o=n(7918),u=o.MAX_LENGTH,s=o.MAX_SAFE_INTEGER,c=n(5446),l=c.re,f=c.t,h=n(8270),d=n(3228).compareIdentifiers,p=function(){"use strict";function e(t,n){if(r(this,e),n=h(n),t instanceof e){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if("string"!==typeof t)throw new TypeError("Invalid Version: ".concat(t));if(t.length>u)throw new TypeError("version is longer than ".concat(u," characters"));i("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;var a=t.trim().match(n.loose?l[f.LOOSE]:l[f.FULL]);if(!a)throw new TypeError("Invalid Version: ".concat(t));if(this.raw=t,this.major=+a[1],this.minor=+a[2],this.patch=+a[3],this.major>s||this.major<0)throw new TypeError("Invalid major version");if(this.minor>s||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>s||this.patch<0)throw new TypeError("Invalid patch version");a[4]?this.prerelease=a[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<s)return t}return e})):this.prerelease=[],this.build=a[5]?a[5].split("."):[],this.format()}return a(e,[{key:"format",value:function(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}},{key:"toString",value:function(){return this.version}},{key:"compare",value:function(t){if(i("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if("string"===typeof t&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}},{key:"compareMain",value:function(t){return t instanceof e||(t=new e(t,this.options)),d(this.major,t.major)||d(this.minor,t.minor)||d(this.patch,t.patch)}},{key:"comparePre",value:function(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var n=0;do{var r=this.prerelease[n],a=t.prerelease[n];if(i("prerelease compare",n,r,a),void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return-1;if(r!==a)return d(r,a)}while(++n)}},{key:"compareBuild",value:function(t){t instanceof e||(t=new e(t,this.options));var n=0;do{var r=this.build[n],a=t.build[n];if(i("prerelease compare",n,r,a),void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return-1;if(r!==a)return d(r,a)}while(++n)}},{key:"inc",value:function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"===typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(0===d(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: ".concat(e))}return this.format(),this.raw=this.version,this}}]),e}();e.exports=p},5365:function(e,t,n){var r=n(7985);e.exports=function(e,t){var n=r(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null}},2907:function(e,t,n){var r=n(5378),a=n(9078),i=n(4544),o=n(6310),u=n(4562),s=n(7532);e.exports=function(e,t,n,c){switch(t){case"===":return"object"===typeof e&&(e=e.version),"object"===typeof n&&(n=n.version),e===n;case"!==":return"object"===typeof e&&(e=e.version),"object"===typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return r(e,n,c);case"!=":return a(e,n,c);case">":return i(e,n,c);case">=":return o(e,n,c);case"<":return u(e,n,c);case"<=":return s(e,n,c);default:throw new TypeError("Invalid operator: ".concat(t))}}},5071:function(e,t,n){var r=n(3298),a=n(7985),i=n(5446),o=i.re,u=i.t;e.exports=function(e,t){if(e instanceof r)return e;if("number"===typeof e&&(e=String(e)),"string"!==typeof e)return null;var n=null;if((t=t||{}).rtl){for(var i;(i=o[u.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&i.index+i[0].length===n.index+n[0].length||(n=i),o[u.COERCERTL].lastIndex=i.index+i[1].length+i[2].length;o[u.COERCERTL].lastIndex=-1}else n=e.match(o[u.COERCE]);return null===n?null:a("".concat(n[2],".").concat(n[3]||"0",".").concat(n[4]||"0"),t)}},136:function(e,t,n){var r=n(3298);e.exports=function(e,t,n){var a=new r(e,n),i=new r(t,n);return a.compare(i)||a.compareBuild(i)}},832:function(e,t,n){var r=n(2384);e.exports=function(e,t){return r(e,t,!0)}},2384:function(e,t,n){var r=n(3298);e.exports=function(e,t,n){return new r(e,n).compare(new r(t,n))}},639:function(e,t,n){var r=n(7985),a=n(5378);e.exports=function(e,t){if(a(e,t))return null;var n=r(e),i=r(t),o=n.prerelease.length||i.prerelease.length,u=o?"pre":"",s=o?"prerelease":"";for(var c in n)if(("major"===c||"minor"===c||"patch"===c)&&n[c]!==i[c])return u+c;return s}},5378:function(e,t,n){var r=n(2384);e.exports=function(e,t,n){return 0===r(e,t,n)}},4544:function(e,t,n){var r=n(2384);e.exports=function(e,t,n){return r(e,t,n)>0}},6310:function(e,t,n){var r=n(2384);e.exports=function(e,t,n){return r(e,t,n)>=0}},6778:function(e,t,n){var r=n(3298);e.exports=function(e,t,n,a){"string"===typeof n&&(a=n,n=void 0);try{return new r(e instanceof r?e.version:e,n).inc(t,a).version}catch(i){return null}}},4562:function(e,t,n){var r=n(2384);e.exports=function(e,t,n){return r(e,t,n)<0}},7532:function(e,t,n){var r=n(2384);e.exports=function(e,t,n){return r(e,t,n)<=0}},2750:function(e,t,n){var r=n(3298);e.exports=function(e,t){return new r(e,t).major}},4184:function(e,t,n){var r=n(3298);e.exports=function(e,t){return new r(e,t).minor}},9078:function(e,t,n){var r=n(2384);e.exports=function(e,t,n){return 0!==r(e,t,n)}},7985:function(e,t,n){var r=n(7918).MAX_LENGTH,a=n(5446),i=a.re,o=a.t,u=n(3298),s=n(8270);e.exports=function(e,t){if(t=s(t),e instanceof u)return e;if("string"!==typeof e)return null;if(e.length>r)return null;if(!(t.loose?i[o.LOOSE]:i[o.FULL]).test(e))return null;try{return new u(e,t)}catch(n){return null}}},5093:function(e,t,n){var r=n(3298);e.exports=function(e,t){return new r(e,t).patch}},9361:function(e,t,n){var r=n(7985);e.exports=function(e,t){var n=r(e,t);return n&&n.prerelease.length?n.prerelease:null}},8111:function(e,t,n){var r=n(2384);e.exports=function(e,t,n){return r(t,e,n)}},6658:function(e,t,n){var r=n(136);e.exports=function(e,t){return e.sort((function(e,n){return r(n,e,t)}))}},2529:function(e,t,n){var r=n(487);e.exports=function(e,t,n){try{t=new r(t,n)}catch(a){return!1}return t.test(e)}},3462:function(e,t,n){var r=n(136);e.exports=function(e,t){return e.sort((function(e,n){return r(e,n,t)}))}},6793:function(e,t,n){var r=n(7985);e.exports=function(e,t){var n=r(e,t);return n?n.version:null}},724:function(e,t,n){var r=n(5446);e.exports={re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:n(7918).SEMVER_SPEC_VERSION,SemVer:n(3298),compareIdentifiers:n(3228).compareIdentifiers,rcompareIdentifiers:n(3228).rcompareIdentifiers,parse:n(7985),valid:n(6793),clean:n(5365),inc:n(6778),diff:n(639),major:n(2750),minor:n(4184),patch:n(5093),prerelease:n(9361),compare:n(2384),rcompare:n(8111),compareLoose:n(832),compareBuild:n(136),sort:n(3462),rsort:n(6658),gt:n(4544),lt:n(4562),eq:n(5378),neq:n(9078),gte:n(6310),lte:n(7532),cmp:n(2907),coerce:n(5071),Comparator:n(8981),Range:n(487),satisfies:n(2529),toComparators:n(7545),maxSatisfying:n(2103),minSatisfying:n(6088),minVersion:n(1219),validRange:n(1383),outside:n(2643),gtr:n(7281),ltr:n(5675),intersects:n(8772),simplifyRange:n(4934),subset:n(6669)}},7918:function(e){var t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:t,MAX_SAFE_COMPONENT_LENGTH:16}},9304:function(e){var t="object"===typeof process&&{NODE_ENV:"production",PUBLIC_URL:"/e2ai",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NODE_DEBUG&&/\bsemver\b/i.test({NODE_ENV:"production",PUBLIC_URL:"/e2ai",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NODE_DEBUG)?function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=console).error.apply(e,["SEMVER"].concat(n))}:function(){};e.exports=t},3228:function(e){var t=/^[0-9]+$/,n=function(e,n){var r=t.test(e),a=t.test(n);return r&&a&&(e=+e,n=+n),e===n?0:r&&!a?-1:a&&!r?1:e<n?-1:1};e.exports={compareIdentifiers:n,rcompareIdentifiers:function(e,t){return n(t,e)}}},8270:function(e){var t=["includePrerelease","loose","rtl"];e.exports=function(e){return e?"object"!==typeof e?{loose:!0}:t.filter((function(t){return e[t]})).reduce((function(e,t){return e[t]=!0,e}),{}):{}}},5446:function(e,t,n){var r=n(7918).MAX_SAFE_COMPONENT_LENGTH,a=n(9304),i=(t=e.exports={}).re=[],o=t.src=[],u=t.t={},s=0,c=function(e,t,n){var r=s++;a(e,r,t),u[e]=r,o[r]=t,i[r]=new RegExp(t,n?"g":void 0)};c("NUMERICIDENTIFIER","0|[1-9]\\d*"),c("NUMERICIDENTIFIERLOOSE","[0-9]+"),c("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),c("MAINVERSION","(".concat(o[u.NUMERICIDENTIFIER],")\\.")+"(".concat(o[u.NUMERICIDENTIFIER],")\\.")+"(".concat(o[u.NUMERICIDENTIFIER],")")),c("MAINVERSIONLOOSE","(".concat(o[u.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(o[u.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(o[u.NUMERICIDENTIFIERLOOSE],")")),c("PRERELEASEIDENTIFIER","(?:".concat(o[u.NUMERICIDENTIFIER],"|").concat(o[u.NONNUMERICIDENTIFIER],")")),c("PRERELEASEIDENTIFIERLOOSE","(?:".concat(o[u.NUMERICIDENTIFIERLOOSE],"|").concat(o[u.NONNUMERICIDENTIFIER],")")),c("PRERELEASE","(?:-(".concat(o[u.PRERELEASEIDENTIFIER],"(?:\\.").concat(o[u.PRERELEASEIDENTIFIER],")*))")),c("PRERELEASELOOSE","(?:-?(".concat(o[u.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(o[u.PRERELEASEIDENTIFIERLOOSE],")*))")),c("BUILDIDENTIFIER","[0-9A-Za-z-]+"),c("BUILD","(?:\\+(".concat(o[u.BUILDIDENTIFIER],"(?:\\.").concat(o[u.BUILDIDENTIFIER],")*))")),c("FULLPLAIN","v?".concat(o[u.MAINVERSION]).concat(o[u.PRERELEASE],"?").concat(o[u.BUILD],"?")),c("FULL","^".concat(o[u.FULLPLAIN],"$")),c("LOOSEPLAIN","[v=\\s]*".concat(o[u.MAINVERSIONLOOSE]).concat(o[u.PRERELEASELOOSE],"?").concat(o[u.BUILD],"?")),c("LOOSE","^".concat(o[u.LOOSEPLAIN],"$")),c("GTLT","((?:<|>)?=?)"),c("XRANGEIDENTIFIERLOOSE","".concat(o[u.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),c("XRANGEIDENTIFIER","".concat(o[u.NUMERICIDENTIFIER],"|x|X|\\*")),c("XRANGEPLAIN","[v=\\s]*(".concat(o[u.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(o[u.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(o[u.XRANGEIDENTIFIER],")")+"(?:".concat(o[u.PRERELEASE],")?").concat(o[u.BUILD],"?")+")?)?"),c("XRANGEPLAINLOOSE","[v=\\s]*(".concat(o[u.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(o[u.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(o[u.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(o[u.PRERELEASELOOSE],")?").concat(o[u.BUILD],"?")+")?)?"),c("XRANGE","^".concat(o[u.GTLT],"\\s*").concat(o[u.XRANGEPLAIN],"$")),c("XRANGELOOSE","^".concat(o[u.GTLT],"\\s*").concat(o[u.XRANGEPLAINLOOSE],"$")),c("COERCE","".concat("(^|[^\\d])(\\d{1,").concat(r,"})")+"(?:\\.(\\d{1,".concat(r,"}))?")+"(?:\\.(\\d{1,".concat(r,"}))?")+"(?:$|[^\\d])"),c("COERCERTL",o[u.COERCE],!0),c("LONETILDE","(?:~>?)"),c("TILDETRIM","(\\s*)".concat(o[u.LONETILDE],"\\s+"),!0),t.tildeTrimReplace="$1~",c("TILDE","^".concat(o[u.LONETILDE]).concat(o[u.XRANGEPLAIN],"$")),c("TILDELOOSE","^".concat(o[u.LONETILDE]).concat(o[u.XRANGEPLAINLOOSE],"$")),c("LONECARET","(?:\\^)"),c("CARETTRIM","(\\s*)".concat(o[u.LONECARET],"\\s+"),!0),t.caretTrimReplace="$1^",c("CARET","^".concat(o[u.LONECARET]).concat(o[u.XRANGEPLAIN],"$")),c("CARETLOOSE","^".concat(o[u.LONECARET]).concat(o[u.XRANGEPLAINLOOSE],"$")),c("COMPARATORLOOSE","^".concat(o[u.GTLT],"\\s*(").concat(o[u.LOOSEPLAIN],")$|^$")),c("COMPARATOR","^".concat(o[u.GTLT],"\\s*(").concat(o[u.FULLPLAIN],")$|^$")),c("COMPARATORTRIM","(\\s*)".concat(o[u.GTLT],"\\s*(").concat(o[u.LOOSEPLAIN],"|").concat(o[u.XRANGEPLAIN],")"),!0),t.comparatorTrimReplace="$1$2$3",c("HYPHENRANGE","^\\s*(".concat(o[u.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(o[u.XRANGEPLAIN],")")+"\\s*$"),c("HYPHENRANGELOOSE","^\\s*(".concat(o[u.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(o[u.XRANGEPLAINLOOSE],")")+"\\s*$"),c("STAR","(<|>)?=?\\s*\\*"),c("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),c("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},7281:function(e,t,n){var r=n(2643);e.exports=function(e,t,n){return r(e,t,">",n)}},8772:function(e,t,n){var r=n(487);e.exports=function(e,t,n){return e=new r(e,n),t=new r(t,n),e.intersects(t)}},5675:function(e,t,n){var r=n(2643);e.exports=function(e,t,n){return r(e,t,"<",n)}},2103:function(e,t,n){var r=n(3298),a=n(487);e.exports=function(e,t,n){var i=null,o=null,u=null;try{u=new a(t,n)}catch(s){return null}return e.forEach((function(e){u.test(e)&&(i&&-1!==o.compare(e)||(o=new r(i=e,n)))})),i}},6088:function(e,t,n){var r=n(3298),a=n(487);e.exports=function(e,t,n){var i=null,o=null,u=null;try{u=new a(t,n)}catch(s){return null}return e.forEach((function(e){u.test(e)&&(i&&1!==o.compare(e)||(o=new r(i=e,n)))})),i}},1219:function(e,t,n){var r=n(3298),a=n(487),i=n(4544);e.exports=function(e,t){e=new a(e,t);var n=new r("0.0.0");if(e.test(n))return n;if(n=new r("0.0.0-0"),e.test(n))return n;n=null;for(var o=function(t){var a=e.set[t],o=null;a.forEach((function(e){var t=new r(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":o&&!i(t,o)||(o=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: ".concat(e.operator))}})),!o||n&&!i(n,o)||(n=o)},u=0;u<e.set.length;++u)o(u);return n&&e.test(n)?n:null}},2643:function(e,t,n){var r=n(3298),a=n(8981),i=a.ANY,o=n(487),u=n(2529),s=n(4544),c=n(4562),l=n(7532),f=n(6310);e.exports=function(e,t,n,h){var d,p,v,g,m;switch(e=new r(e,h),t=new o(t,h),n){case">":d=s,p=l,v=c,g=">",m=">=";break;case"<":d=c,p=f,v=s,g="<",m="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(u(e,t,h))return!1;for(var y=function(n){var r=t.set[n],o=null,u=null;return r.forEach((function(e){e.semver===i&&(e=new a(">=0.0.0")),o=o||e,u=u||e,d(e.semver,o.semver,h)?o=e:v(e.semver,u.semver,h)&&(u=e)})),o.operator===g||o.operator===m?{v:!1}:u.operator&&u.operator!==g||!p(e,u.semver)?u.operator===m&&v(e,u.semver)?{v:!1}:void 0:{v:!1}},b=0;b<t.set.length;++b){var x=y(b);if("object"===typeof x)return x.v}return!0}},4934:function(e,t,n){var r=n(4534).default,a=n(9504).default,i=n(2529),o=n(2384);e.exports=function(e,t,n){var u,s=[],c=null,l=null,f=e.sort((function(e,t){return o(e,t,n)})),h=a(f);try{for(h.s();!(u=h.n()).done;){var d=u.value;i(d,t,n)?(l=d,c||(c=d)):(l&&s.push([c,l]),l=null,c=null)}}catch(k){h.e(k)}finally{h.f()}c&&s.push([c,null]);for(var p=[],v=0,g=s;v<g.length;v++){var m=r(g[v],2),y=m[0],b=m[1];y===b?p.push(y):b||y!==f[0]?b?y===f[0]?p.push("<=".concat(b)):p.push("".concat(y," - ").concat(b)):p.push(">=".concat(y)):p.push("*")}var x=p.join(" || "),w="string"===typeof t.raw?t.raw:String(t);return x.length<w.length?x:t}},6669:function(e,t,n){var r=n(9504).default,a=n(487),i=n(8981),o=i.ANY,u=n(2529),s=n(2384),c=function(e,t,n){if(e===t)return!0;if(1===e.length&&e[0].semver===o){if(1===t.length&&t[0].semver===o)return!0;e=n.includePrerelease?[new i(">=0.0.0-0")]:[new i(">=0.0.0")]}if(1===t.length&&t[0].semver===o){if(n.includePrerelease)return!0;t=[new i(">=0.0.0")]}var a,c,h,d,p=new Set,v=r(e);try{for(v.s();!(h=v.n()).done;){var g=h.value;">"===g.operator||">="===g.operator?a=l(a,g,n):"<"===g.operator||"<="===g.operator?c=f(c,g,n):p.add(g.semver)}}catch(F){v.e(F)}finally{v.f()}if(p.size>1)return null;if(a&&c){if((d=s(a.semver,c.semver,n))>0)return null;if(0===d&&(">="!==a.operator||"<="!==c.operator))return null}var m,y,b,x,w,k=r(p);try{for(k.s();!(m=k.n()).done;){var _=m.value;if(a&&!u(_,String(a),n))return null;if(c&&!u(_,String(c),n))return null;var S,C=r(t);try{for(C.s();!(S=C.n()).done;){var E=S.value;if(!u(_,String(E),n))return!1}}catch(F){C.e(F)}finally{C.f()}return!0}}catch(F){k.e(F)}finally{k.f()}var A=!(!c||n.includePrerelease||!c.semver.prerelease.length)&&c.semver,N=!(!a||n.includePrerelease||!a.semver.prerelease.length)&&a.semver;A&&1===A.prerelease.length&&"<"===c.operator&&0===A.prerelease[0]&&(A=!1);var T,M=r(t);try{for(M.s();!(T=M.n()).done;){var D=T.value;if(w=w||">"===D.operator||">="===D.operator,x=x||"<"===D.operator||"<="===D.operator,a)if(N&&D.semver.prerelease&&D.semver.prerelease.length&&D.semver.major===N.major&&D.semver.minor===N.minor&&D.semver.patch===N.patch&&(N=!1),">"===D.operator||">="===D.operator){if((y=l(a,D,n))===D&&y!==a)return!1}else if(">="===a.operator&&!u(a.semver,String(D),n))return!1;if(c)if(A&&D.semver.prerelease&&D.semver.prerelease.length&&D.semver.major===A.major&&D.semver.minor===A.minor&&D.semver.patch===A.patch&&(A=!1),"<"===D.operator||"<="===D.operator){if((b=f(c,D,n))===D&&b!==c)return!1}else if("<="===c.operator&&!u(c.semver,String(D),n))return!1;if(!D.operator&&(c||a)&&0!==d)return!1}}catch(F){M.e(F)}finally{M.f()}return!(a&&x&&!c&&0!==d)&&(!(c&&w&&!a&&0!==d)&&(!N&&!A))},l=function(e,t,n){if(!e)return t;var r=s(e.semver,t.semver,n);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},f=function(e,t,n){if(!e)return t;var r=s(e.semver,t.semver,n);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e===t)return!0;e=new a(e,n),t=new a(t,n);var i,o=!1,u=r(e.set);try{e:for(u.s();!(i=u.n()).done;){var s,l=i.value,f=r(t.set);try{for(f.s();!(s=f.n()).done;){var h=s.value,d=c(l,h,n);if(o=o||null!==d,d)continue e}}catch(p){f.e(p)}finally{f.f()}if(o)return!1}}catch(p){u.e(p)}finally{u.f()}return!0}},7545:function(e,t,n){var r=n(487);e.exports=function(e,t){return new r(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))}},1383:function(e,t,n){var r=n(487);e.exports=function(e,t){try{return new r(e,t).range||"*"}catch(n){return null}}},593:function(e,t,n){"use strict";n.r(t),n.d(t,{DEFAULT_ACTIONS:function(){return x1e},default:function(){return R1e},guessMode:function(){return T1e},vega:function(){return m1e},vegaLite:function(){return y1e}});var r={};n.r(r),n.d(r,{JsonPatchError:function(){return Z},_areEquals:function(){return H},applyOperation:function(){return j},applyPatch:function(){return U},applyReducer:function(){return W},deepClone:function(){return B},getValueByPointer:function(){return P},validate:function(){return q},validator:function(){return V}});var a={};n.r(a),n.d(a,{compare:function(){return ee},generate:function(){return Q},observe:function(){return $},unobserve:function(){return K}});var i={};n.r(i),n.d(i,{aggregate:function(){return Pl},bin:function(){return jl},collect:function(){return Wl},compare:function(){return Vl},countpattern:function(){return Hl},cross:function(){return Gl},density:function(){return $l},dotbin:function(){return nf},expression:function(){return rf},extent:function(){return of},facet:function(){return sf},field:function(){return cf},filter:function(){return ff},flatten:function(){return hf},fold:function(){return df},formula:function(){return pf},generate:function(){return vf},impute:function(){return yf},joinaggregate:function(){return bf},kde:function(){return xf},key:function(){return wf},load:function(){return _f},lookup:function(){return Cf},multiextent:function(){return Ef},multivalues:function(){return Nf},params:function(){return Mf},pivot:function(){return Df},prefacet:function(){return Ff},project:function(){return If},proxy:function(){return Of},quantile:function(){return Rf},relay:function(){return Zf},sample:function(){return Bf},sequence:function(){return zf},sieve:function(){return Lf},subflow:function(){return uf},timeunit:function(){return Pf},tupleindex:function(){return Uf},values:function(){return Wf},window:function(){return Xf}});var o={};n.r(o),n.d(o,{interpolate:function(){return ex},interpolateArray:function(){return Hb},interpolateBasis:function(){return Ib},interpolateBasisClosed:function(){return Ob},interpolateCubehelix:function(){return Qx},interpolateCubehelixLong:function(){return Jx},interpolateDate:function(){return Xb},interpolateDiscrete:function(){return tx},interpolateHcl:function(){return Zx},interpolateHclLong:function(){return Bx},interpolateHsl:function(){return px},interpolateHslLong:function(){return vx},interpolateHue:function(){return nx},interpolateLab:function(){return Ox},interpolateNumber:function(){return Yb},interpolateNumberArray:function(){return Vb},interpolateObject:function(){return Kb},interpolateRgb:function(){return Pb},interpolateRgbBasis:function(){return Ub},interpolateRgbBasisClosed:function(){return Wb},interpolateRound:function(){return rx},interpolateString:function(){return Jb},interpolateTransformCss:function(){return cx},interpolateTransformSvg:function(){return lx},interpolateZoom:function(){return hx},piecewise:function(){return ew},quantize:function(){return tw}});var u={};n.r(u),n.d(u,{bound:function(){return NA},identifier:function(){return DA},mark:function(){return FA},overlap:function(){return IA},render:function(){return PA},viewlayout:function(){return sN}});var s={};n.r(s),n.d(s,{axisticks:function(){return hT},datajoin:function(){return dT},encode:function(){return vT},legendentries:function(){return gT},linkpath:function(){return wT},pie:function(){return ET},scale:function(){return TT},sortitems:function(){return IT},stack:function(){return zT}});var c={};n.r(c),n.d(c,{contour:function(){return mR},geojson:function(){return xR},geopath:function(){return wR},geopoint:function(){return kR},geoshape:function(){return _R},graticule:function(){return SR},heatmap:function(){return CR},isocontour:function(){return uR},kde2d:function(){return pR},projection:function(){return AR}});var l={};n.r(l),n.d(l,{force:function(){return _Z}});var f={};n.r(f),n.d(f,{nest:function(){return EB},pack:function(){return FB},partition:function(){return OB},stratify:function(){return RB},tree:function(){return zB},treelinks:function(){return LB},treemap:function(){return UB}});var h={};n.r(h),n.d(h,{label:function(){return cz}});var d={};n.r(d),n.d(d,{loess:function(){return fz},regression:function(){return dz}});var p={};n.r(p),n.d(p,{voronoi:function(){return Lz}});var v={};n.r(v),n.d(v,{wordcloud:function(){return eL}});var g={};n.r(g),n.d(g,{crossfilter:function(){return fL},resolvefilter:function(){return hL}});var m={};n.r(m),n.d(m,{interpolate:function(){return XJ},interpolateArray:function(){return PJ},interpolateBasis:function(){return AJ},interpolateBasisClosed:function(){return NJ},interpolateCubehelix:function(){return X1},interpolateCubehelixLong:function(){return Y1},interpolateDate:function(){return UJ},interpolateDiscrete:function(){return Q0},interpolateHcl:function(){return F1},interpolateHclLong:function(){return I1},interpolateHsl:function(){return l1},interpolateHslLong:function(){return f1},interpolateHue:function(){return J0},interpolateLab:function(){return M1},interpolateNumber:function(){return WJ},interpolateNumberArray:function(){return zJ},interpolateObject:function(){return VJ},interpolateRgb:function(){return OJ},interpolateRgbBasis:function(){return ZJ},interpolateRgbBasisClosed:function(){return BJ},interpolateRound:function(){return YJ},interpolateString:function(){return GJ},interpolateTransformCss:function(){return i1},interpolateTransformSvg:function(){return o1},interpolateZoom:function(){return s1},piecewise:function(){return j0},quantize:function(){return K1}});var y={};n.r(y),n.d(y,{interpolate:function(){return fT},interpolateArray:function(){return rT},interpolateBasis:function(){return VN},interpolateBasisClosed:function(){return qN},interpolateCubehelix:function(){return kte},interpolateCubehelixLong:function(){return _te},interpolateDate:function(){return iT},interpolateDiscrete:function(){return Nee},interpolateHcl:function(){return ste},interpolateHclLong:function(){return cte},interpolateHsl:function(){return Pee},interpolateHslLong:function(){return jee},interpolateHue:function(){return Tee},interpolateLab:function(){return ote},interpolateNumber:function(){return oT},interpolateNumberArray:function(){return tT},interpolateObject:function(){return uT},interpolateRgb:function(){return $N},interpolateRgbBasis:function(){return JN},interpolateRgbBasisClosed:function(){return eT},interpolateRound:function(){return lN},interpolateString:function(){return lT},interpolateTransformCss:function(){return Ree},interpolateTransformSvg:function(){return Zee},interpolateZoom:function(){return zee},piecewise:function(){return Cee},quantize:function(){return Ste}});var b={};n.r(b),n.d(b,{interpolate:function(){return Wme},interpolateArray:function(){return Rme},interpolateBasis:function(){return kme},interpolateBasisClosed:function(){return _me},interpolateCubehelix:function(){return Eke},interpolateCubehelixLong:function(){return Ake},interpolateDate:function(){return Bme},interpolateDiscrete:function(){return Cwe},interpolateHcl:function(){return ike},interpolateHclLong:function(){return oke},interpolateHsl:function(){return Bwe},interpolateHslLong:function(){return zwe},interpolateHue:function(){return Ewe},interpolateLab:function(){return rke},interpolateNumber:function(){return zme},interpolateNumberArray:function(){return Ime},interpolateObject:function(){return Lme},interpolateRgb:function(){return Tme},interpolateRgbBasis:function(){return Dme},interpolateRgbBasisClosed:function(){return Fme},interpolateRound:function(){return Vme},interpolateString:function(){return Ume},interpolateTransformCss:function(){return Fwe},interpolateTransformSvg:function(){return Iwe},interpolateZoom:function(){return Rwe},piecewise:function(){return bwe},quantize:function(){return Nke}});var x={};n.r(x),n.d(x,{Bounds:function(){return H3},CanvasHandler:function(){return _6},CanvasRenderer:function(){return N6},DATE:function(){return Fj},DAY:function(){return Ij},DAYOFYEAR:function(){return Oj},Dataflow:function(){return lc},Debug:function(){return Se},Error:function(){return we},EventStream:function(){return Vs},Gradient:function(){return J2},GroupItem:function(){return X3},HOURS:function(){return Rj},Handler:function(){return i6},Info:function(){return _e},Item:function(){return G3},MILLISECONDS:function(){return zj},MINUTES:function(){return Zj},MONTH:function(){return Mj},Marks:function(){return W5},MultiPulse:function(){return rc},None:function(){return xe},Operator:function(){return js},Parameters:function(){return zs},Pulse:function(){return Js},QUARTER:function(){return Tj},RenderType:function(){return m8},Renderer:function(){return u6},ResourceLoader:function(){return Y3},SECONDS:function(){return Bj},SVGHandler:function(){return M6},SVGRenderer:function(){return e8},SVGStringRenderer:function(){return p8},Scenegraph:function(){return $5},TIME_UNITS:function(){return Lj},Transform:function(){return hc},View:function(){return xhe},WEEK:function(){return Dj},Warn:function(){return ke},YEAR:function(){return Nj},accessor:function(){return ae},accessorFields:function(){return oe},accessorName:function(){return ie},array:function(){return $e},ascending:function(){return tt},bandwidthNRD:function(){return yL},bin:function(){return bL},bootstrapCI:function(){return kL},boundClip:function(){return C8},boundContext:function(){return g4},boundItem:function(){return V5},boundMark:function(){return H5},boundStroke:function(){return Q3},changeset:function(){return Zs},clampRange:function(){return Qe},codegenExpression:function(){return _Be},compare:function(){return et},constant:function(){return it},cumulativeLogNormal:function(){return BL},cumulativeNormal:function(){return DL},cumulativeUniform:function(){return WL},dayofyear:function(){return Hj},debounce:function(){return ot},defaultLocale:function(){return dpe},definition:function(){return pc},densityLogNormal:function(){return ZL},densityNormal:function(){return ML},densityUniform:function(){return UL},domChild:function(){return t6},domClear:function(){return n6},domCreate:function(){return J5},domFind:function(){return e6},dotbin:function(){return _L},error:function(){return le},expressionFunction:function(){return VDe},extend:function(){return ut},extent:function(){return st},extentIndex:function(){return ct},falsy:function(){return ye},fastmap:function(){return dt},field:function(){return he},flush:function(){return pt},font:function(){return R5},fontFamily:function(){return O5},fontSize:function(){return T5},format:function(){return QH},formatLocale:function(){return ipe},formats:function(){return JH},hasOwnProperty:function(){return ft},id:function(){return de},identity:function(){return pe},inferType:function(){return qH},inferTypes:function(){return HH},ingest:function(){return Ms},inherits:function(){return vt},inrange:function(){return gt},interpolate:function(){return gre},interpolateColors:function(){return pre},interpolateRange:function(){return dre},intersect:function(){return x8},intersectBoxLine:function(){return A4},intersectPath:function(){return _4},intersectPoint:function(){return S4},intersectRule:function(){return E4},isArray:function(){return Ee},isBoolean:function(){return mt},isDate:function(){return yt},isFunction:function(){return Je},isIterable:function(){return bt},isNumber:function(){return xt},isObject:function(){return Ae},isRegExp:function(){return wt},isString:function(){return kt},isTuple:function(){return As},key:function(){return _t},lerp:function(){return St},lineHeight:function(){return M5},loader:function(){return nG},locale:function(){return hpe},logger:function(){return Ce},lruCache:function(){return Ct},markup:function(){return G6},merge:function(){return Et},mergeConfig:function(){return Te},multiLineOffset:function(){return F5},one:function(){return ge},pad:function(){return Nt},panLinear:function(){return Pe},panLog:function(){return je},panPow:function(){return Ue},panSymlog:function(){return We},parse:function(){return HRe},parseExpression:function(){return xBe},parseSelector:function(){return MBe},pathCurves:function(){return t3},pathEqual:function(){return A8},pathParse:function(){return a3},pathRectangle:function(){return N3},pathRender:function(){return v3},pathSymbols:function(){return b3},pathTrail:function(){return T3},peek:function(){return Fe},point:function(){return a6},projection:function(){return ooe},quantileLogNormal:function(){return zL},quantileNormal:function(){return FL},quantileUniform:function(){return VL},quantiles:function(){return gL},quantizeInterpolator:function(){return vre},quarter:function(){return Ye},quartiles:function(){return mL},random:function(){return xL},randomInteger:function(){return CL},randomKDE:function(){return OL},randomLCG:function(){return SL},randomLogNormal:function(){return LL},randomMixture:function(){return PL},randomNormal:function(){return IL},randomUniform:function(){return qL},read:function(){return tG},regressionExp:function(){return QL},regressionLinear:function(){return KL},regressionLoess:function(){return rP},regressionLog:function(){return $L},regressionPoly:function(){return tP},regressionPow:function(){return JL},regressionQuad:function(){return eP},renderModule:function(){return b8},repeat:function(){return At},resetDefaultLocale:function(){return ppe},resetSVGClipId:function(){return V3},resetSVGDefIds:function(){return N8},responseType:function(){return eG},runtimeContext:function(){return _fe},sampleCurve:function(){return uP},sampleLogNormal:function(){return RL},sampleNormal:function(){return TL},sampleUniform:function(){return jL},scale:function(){return fre},sceneEqual:function(){return E8},sceneFromJSON:function(){return Y5},scenePickVisit:function(){return z4},sceneToJSON:function(){return X5},sceneVisit:function(){return B4},sceneZOrder:function(){return Z4},scheme:function(){return xre},serializeXML:function(){return X6},setRandom:function(){return wL},span:function(){return Tt},splitAccessPath:function(){return fe},stringValue:function(){return Mt},textMetrics:function(){return _5},timeBin:function(){return ZU},timeFloor:function(){return sU},timeFormatLocale:function(){return lpe},timeInterval:function(){return pU},timeOffset:function(){return mU},timeSequence:function(){return xU},timeUnitSpecifier:function(){return Wj},timeUnits:function(){return jj},toBoolean:function(){return Dt},toDate:function(){return It},toNumber:function(){return Ie},toSet:function(){return Rt},toString:function(){return Ot},transform:function(){return vc},transforms:function(){return dc},truncate:function(){return Zt},truthy:function(){return me},tupleid:function(){return Ns},typeParsers:function(){return UH},utcFloor:function(){return fU},utcInterval:function(){return vU},utcOffset:function(){return yU},utcSequence:function(){return wU},utcdayofyear:function(){return Qj},utcquarter:function(){return Ke},utcweek:function(){return Jj},version:function(){return RBe},visitArray:function(){return Bt},week:function(){return Gj},writeConfig:function(){return Me},zero:function(){return ve},zoomLinear:function(){return qe},zoomLog:function(){return He},zoomPow:function(){return Ge},zoomSymlog:function(){return Xe}});var w={};n.r(w),n.d(w,{compile:function(){return KJe},extractTransforms:function(){return t0e},normalize:function(){return MHe},version:function(){return n0e}});var k={};n.r(k),n.d(k,{carbong10:function(){return n1e},carbong100:function(){return a1e},carbong90:function(){return r1e},carbonwhite:function(){return t1e},dark:function(){return u0e},excel:function(){return c0e},fivethirtyeight:function(){return p0e},ggplot2:function(){return g0e},googlecharts:function(){return B0e},latimes:function(){return k0e},powerbi:function(){return K0e},quartz:function(){return C0e},urbaninstitute:function(){return I0e},version:function(){return i1e},vox:function(){return A0e}});var _=n(4322),S=n.n(_),C=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),E=Object.prototype.hasOwnProperty;function A(e,t){return E.call(e,t)}function N(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var a in e)A(e,a)&&r.push(a);return r}function T(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function M(e){for(var t,n=0,r=e.length;n<r;){if(!((t=e.charCodeAt(n))>=48&&t<=57))return!1;n++}return!0}function D(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function F(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function I(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(I(e[t]))return!0}else if("object"===typeof e)for(var r=N(e),a=r.length,i=0;i<a;i++)if(I(e[r[i]]))return!0;return!1}function O(e,t){var n=[e];for(var r in t){var a="object"===typeof t[r]?JSON.stringify(t[r],null,2):t[r];"undefined"!==typeof a&&n.push(r+": "+a)}return n.join("\n")}var R=function(e){function t(t,n,r,a,i){var o=this.constructor,u=e.call(this,O(t,{name:n,index:r,operation:a,tree:i}))||this;return u.name=n,u.index=r,u.operation=a,u.tree=i,Object.setPrototypeOf(u,o.prototype),u.message=O(t,{name:n,index:r,operation:a,tree:i}),u}return C(t,e),t}(Error),Z=R,B=T,z={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=P(n,this.path);r&&(r=T(r));var a=j(n,{op:"remove",path:this.from}).removed;return j(n,{op:"add",path:this.path,value:a}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=P(n,this.from);return j(n,{op:"add",path:this.path,value:T(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:H(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},L={add:function(e,t,n){return M(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:z.move,copy:z.copy,test:z.test,_get:z._get};function P(e,t){if(""==t)return e;var n={op:"_get",path:t};return j(e,n),n.value}function j(e,t,n,r,a,i){if(void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===a&&(a=!0),void 0===i&&(i=0),n&&("function"==typeof n?n(t,0,e,t.path):V(t,0)),""===t.path){var o={newDocument:e};if("add"===t.op)return o.newDocument=t.value,o;if("replace"===t.op)return o.newDocument=t.value,o.removed=e,o;if("move"===t.op||"copy"===t.op)return o.newDocument=P(e,t.from),"move"===t.op&&(o.removed=e),o;if("test"===t.op){if(o.test=H(e,t.value),!1===o.test)throw new Z("Test operation failed","TEST_OPERATION_FAILED",i,t,e);return o.newDocument=e,o}if("remove"===t.op)return o.removed=e,o.newDocument=null,o;if("_get"===t.op)return t.value=e,o;if(n)throw new Z("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",i,t,e);return o}r||(e=T(e));var u=(t.path||"").split("/"),s=e,c=1,l=u.length,f=void 0,h=void 0,d=void 0;for(d="function"==typeof n?n:V;;){if((h=u[c])&&-1!=h.indexOf("~")&&(h=F(h)),a&&("__proto__"==h||"prototype"==h&&c>0&&"constructor"==u[c-1]))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===f&&(void 0===s[h]?f=u.slice(0,c).join("/"):c==l-1&&(f=t.path),void 0!==f&&d(t,0,e,f)),c++,Array.isArray(s)){if("-"===h)h=s.length;else{if(n&&!M(h))throw new Z("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",i,t,e);M(h)&&(h=~~h)}if(c>=l){if(n&&"add"===t.op&&h>s.length)throw new Z("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",i,t,e);if(!1===(o=L[t.op].call(t,s,h,e)).test)throw new Z("Test operation failed","TEST_OPERATION_FAILED",i,t,e);return o}}else if(c>=l){if(!1===(o=z[t.op].call(t,s,h,e)).test)throw new Z("Test operation failed","TEST_OPERATION_FAILED",i,t,e);return o}if(s=s[h],n&&c<l&&(!s||"object"!==typeof s))throw new Z("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",i,t,e)}}function U(e,t,n,r,a){if(void 0===r&&(r=!0),void 0===a&&(a=!0),n&&!Array.isArray(t))throw new Z("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=T(e));for(var i=new Array(t.length),o=0,u=t.length;o<u;o++)i[o]=j(e,t[o],n,!0,a,o),e=i[o].newDocument;return i.newDocument=e,i}function W(e,t,n){var r=j(e,t);if(!1===r.test)throw new Z("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function V(e,t,n,r){if("object"!==typeof e||null===e||Array.isArray(e))throw new Z("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(!z[e.op])throw new Z("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n);if("string"!==typeof e.path)throw new Z("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new Z('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!==typeof e.from)throw new Z("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new Z("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&I(e.value))throw new Z("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n)if("add"==e.op){var a=e.path.split("/").length,i=r.split("/").length;if(a!==i+1&&a!==i)throw new Z("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==r)throw new Z("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if("move"===e.op||"copy"===e.op){var o=q([{op:"_get",path:e.from,value:void 0}],n);if(o&&"OPERATION_PATH_UNRESOLVABLE"===o.name)throw new Z("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}function q(e,t,n){try{if(!Array.isArray(e))throw new Z("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)U(T(t),T(e),n||!0);else{n=n||V;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(a){if(a instanceof Z)return a;throw a}}function H(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n,r,a,i=Array.isArray(e),o=Array.isArray(t);if(i&&o){if((r=e.length)!=t.length)return!1;for(n=r;0!==n--;)if(!H(e[n],t[n]))return!1;return!0}if(i!=o)return!1;var u=Object.keys(e);if((r=u.length)!==Object.keys(t).length)return!1;for(n=r;0!==n--;)if(!t.hasOwnProperty(u[n]))return!1;for(n=r;0!==n--;)if(!H(e[a=u[n]],t[a]))return!1;return!0}return e!==e&&t!==t}var G=new WeakMap,X=function(e){this.observers=new Map,this.obj=e},Y=function(e,t){this.callback=e,this.observer=t};function K(e,t){t.unobserve()}function $(e,t){var n,r=function(e){return G.get(e)}(e);if(r){var a=function(e,t){return e.observers.get(t)}(r,t);n=a&&a.observer}else r=new X(e),G.set(e,r);if(n)return n;if(n={},r.value=T(e),t){n.callback=t,n.next=null;var i=function(){Q(n)},o=function(){clearTimeout(n.next),n.next=setTimeout(i)};"undefined"!==typeof window&&(window.addEventListener("mouseup",o),window.addEventListener("keyup",o),window.addEventListener("mousedown",o),window.addEventListener("keydown",o),window.addEventListener("change",o))}return n.patches=[],n.object=e,n.unobserve=function(){Q(n),clearTimeout(n.next),function(e,t){e.observers.delete(t.callback)}(r,n),"undefined"!==typeof window&&(window.removeEventListener("mouseup",o),window.removeEventListener("keyup",o),window.removeEventListener("mousedown",o),window.removeEventListener("keydown",o),window.removeEventListener("change",o))},r.observers.set(t,new Y(t,n)),n}function Q(e,t){void 0===t&&(t=!1);var n=G.get(e.object);J(n.value,e.object,e.patches,"",t),e.patches.length&&U(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function J(e,t,n,r,a){if(t!==e){"function"===typeof t.toJSON&&(t=t.toJSON());for(var i=N(t),o=N(e),u=!1,s=o.length-1;s>=0;s--){var c=e[f=o[s]];if(!A(t,f)||void 0===t[f]&&void 0!==c&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(a&&n.push({op:"test",path:r+"/"+D(f),value:T(c)}),n.push({op:"remove",path:r+"/"+D(f)}),u=!0):(a&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}),!0);else{var l=t[f];"object"==typeof c&&null!=c&&"object"==typeof l&&null!=l&&Array.isArray(c)===Array.isArray(l)?J(c,l,n,r+"/"+D(f),a):c!==l&&(!0,a&&n.push({op:"test",path:r+"/"+D(f),value:T(c)}),n.push({op:"replace",path:r+"/"+D(f),value:T(l)}))}}if(u||i.length!=o.length)for(s=0;s<i.length;s++){var f;A(e,f=i[s])||void 0===t[f]||n.push({op:"add",path:r+"/"+D(f),value:T(t[f])})}}}function ee(e,t,n){void 0===n&&(n=!1);var r=[];return J(e,t,r,"",n),r}Object.assign({},r,a,{JsonPatchError:R,deepClone:T,escapePathComponent:D,unescapePathComponent:F});var te=n(3333),ne=n.n(te),re=n(724);function ae(e,t,n){return e.fields=t||[],e.fname=n,e}function ie(e){return null==e?null:e.fname}function oe(e){return null==e?null:e.fields}function ue(e){return 1===e.length?se(e[0]):ce(e)}var se=function(e){return function(t){return t[e]}},ce=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function le(e){throw Error(e)}function fe(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n),s+=e.substring(++n,++n),t=n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&c(),u=t=n+1):"]"===r&&(u||le("Access path missing open bracket: "+e),u>0&&c(),u=0,t=n+1):n>t?c():t=n+1}return u&&le("Access path missing closing bracket: "+e),o&&le("Access path missing closing quote: "+e),n>t&&(n++,c()),a}function he(e,t,n){var r=fe(e);return e=1===r.length?r[0]:e,ae((n&&n.get||ue)(r),[e],t||e)}var de=he("id"),pe=ae((function(e){return e}),[],"identity"),ve=ae((function(){return 0}),[],"zero"),ge=ae((function(){return 1}),[],"one"),me=ae((function(){return!0}),[],"true"),ye=ae((function(){return!1}),[],"false");function be(e,t,n){var r=[t].concat([].slice.call(n));console[e].apply(console,r)}var xe=0,we=1,ke=2,_e=3,Se=4;function Ce(e,t){var n=e||xe;return{level:function(e){return arguments.length?(n=+e,this):n},error:function(){return n>=we&&be(t||"error","ERROR",arguments),this},warn:function(){return n>=ke&&be(t||"warn","WARN",arguments),this},info:function(){return n>=_e&&be(t||"log","INFO",arguments),this},debug:function(){return n>=Se&&be(t||"log","DEBUG",arguments),this}}}var Ee=Array.isArray;function Ae(e){return e===Object(e)}var Ne=function(e){return"__proto__"!==e};function Te(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){for(var n in t)if("signals"===n)e.signals=De(e.signals,t.signals);else{var r="legend"===n?{layout:1}:"style"===n||null;Me(e,n,t[n],r)}return e}),{})}function Me(e,t,n,r){var a,i;if(Ne(t))if(Ae(n)&&!Ee(n))for(a in i=Ae(e[t])?e[t]:e[t]={},n)r&&(!0===r||r[a])?Me(i,a,n[a]):Ne(a)&&(i[a]=n[a]);else e[t]=n}function De(e,t){if(null==e)return t;var n={},r=[];function a(e){n[e.name]||(n[e.name]=1,r.push(e))}return t.forEach(a),e.forEach(a),r}function Fe(e){return e[e.length-1]}function Ie(e){return null==e||""===e?null:+e}var Oe=function(e){return function(t){return e*Math.exp(t)}},Re=function(e){return function(t){return Math.log(e*t)}},Ze=function(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}},Be=function(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}},ze=function(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}};function Le(e,t,n,r){var a=n(e[0]),i=n(Fe(e)),o=(i-a)*t;return[r(a-o),r(i-o)]}function Pe(e,t){return Le(e,t,Ie,pe)}function je(e,t){var n=Math.sign(e[0]);return Le(e,t,Re(n),Oe(n))}function Ue(e,t,n){return Le(e,t,ze(n),ze(1/n))}function We(e,t,n){return Le(e,t,Ze(n),Be(n))}function Ve(e,t,n,r,a){var i=r(e[0]),o=r(Fe(e)),u=null!=t?r(t):(i+o)/2;return[a(u+(i-u)*n),a(u+(o-u)*n)]}function qe(e,t,n){return Ve(e,t,n,Ie,pe)}function He(e,t,n){var r=Math.sign(e[0]);return Ve(e,t,n,Re(r),Oe(r))}function Ge(e,t,n,r){return Ve(e,t,n,ze(r),ze(1/r))}function Xe(e,t,n,r){return Ve(e,t,n,Ze(r),Be(r))}function Ye(e){return 1+~~(new Date(e).getMonth()/3)}function Ke(e){return 1+~~(new Date(e).getUTCMonth()/3)}function $e(e){return null!=e?Ee(e)?e:[e]:[]}function Qe(e,t,n){var r,a=e[0],i=e[1];return i<a&&(r=i,i=a,a=r),(r=i-a)>=n-t?[t,n]:[a=Math.min(Math.max(a,t),n-r),a+r]}function Je(e){return"function"===typeof e}function et(e,t,n){n=n||{},t=$e(t)||[];var r=[],a=[],i={},o=n.comparator||nt;return $e(e).forEach((function(e,o){null!=e&&(r.push("descending"===t[o]?-1:1),a.push(e=Je(e)?e:he(e,null,n)),(oe(e)||[]).forEach((function(e){return i[e]=1})))})),0===a.length?null:ae(o(a,r),Object.keys(i))}var tt=function(e,t){return(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0)},nt=function(e,t){return 1===e.length?rt(e[0],t[0]):at(e,t,e.length)},rt=function(e,t){return function(n,r){return tt(e(n),e(r))*t}},at=function(e,t,n){return t.push(0),function(r,a){for(var i,o=0,u=-1;0===o&&++u<n;)i=e[u],o=tt(i(r),i(a));return o*t[u]}};function it(e){return Je(e)?e:function(){return e}}function ot(e,t){var n;return function(r){n&&clearTimeout(n),n=setTimeout((function(){return t(r),n=null}),e)}}function ut(e){for(var t,n,r=1,a=arguments.length;r<a;++r)for(n in t=arguments[r])e[n]=t[n];return e}function st(e,t){var n,r,a,i,o=0;if(e&&(n=e.length))if(null==t){for(r=e[o];o<n&&(null==r||r!==r);r=e[++o]);for(a=i=r;o<n;++o)null!=(r=e[o])&&(r<a&&(a=r),r>i&&(i=r))}else{for(r=t(e[o]);o<n&&(null==r||r!==r);r=t(e[++o]));for(a=i=r;o<n;++o)null!=(r=t(e[o]))&&(r<a&&(a=r),r>i&&(i=r))}return[a,i]}function ct(e,t){var n,r,a,i,o,u=e.length,s=-1;if(null==t){for(;++s<u;)if(null!=(r=e[s])&&r>=r){n=a=r;break}if(s===u)return[-1,-1];for(i=o=s;++s<u;)null!=(r=e[s])&&(n>r&&(n=r,i=s),a<r&&(a=r,o=s))}else{for(;++s<u;)if(null!=(r=t(e[s],s,e))&&r>=r){n=a=r;break}if(s===u)return[-1,-1];for(i=o=s;++s<u;)null!=(r=t(e[s],s,e))&&(n>r&&(n=r,i=s),a<r&&(a=r,o=s))}return[i,o]}var lt=Object.prototype.hasOwnProperty;function ft(e,t){return lt.call(e,t)}var ht={};function dt(e){var t,n={};function r(e){return ft(n,e)&&n[e]!==ht}var a={size:0,empty:0,object:n,has:r,get:function(e){return r(e)?n[e]:void 0},set:function(e,t){return r(e)||(++a.size,n[e]===ht&&--a.empty),n[e]=t,this},delete:function(e){return r(e)&&(--a.size,++a.empty,n[e]=ht),this},clear:function(){a.size=a.empty=0,a.object=n={}},test:function(e){return arguments.length?(t=e,a):t},clean:function(){var e={},r=0;for(var i in n){var o=n[i];o===ht||t&&t(o)||(e[i]=o,++r)}a.size=r,a.empty=0,a.object=n=e}};return e&&Object.keys(e).forEach((function(t){a.set(t,e[t])})),a}function pt(e,t,n,r,a,i){if(!n&&0!==n)return i;var o,u=+n,s=e[0],c=Fe(e);c<s&&(o=s,s=c,c=o),o=Math.abs(t-s);var l=Math.abs(c-t);return o<l&&o<=u?r:l<=u?a:i}function vt(e,t,n){var r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),ut(r,n)}function gt(e,t,n,r){var a,i=t[0],o=t[t.length-1];return i>o&&(a=i,i=o,o=a),r=void 0===r||r,((n=void 0===n||n)?i<=e:i<e)&&(r?e<=o:e<o)}function mt(e){return"boolean"===typeof e}function yt(e){return"[object Date]"===Object.prototype.toString.call(e)}function bt(e){return e&&Je(e[Symbol.iterator])}function xt(e){return"number"===typeof e}function wt(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function kt(e){return"string"===typeof e}function _t(e,t,n){e&&(e=t?$e(e).map((function(e){return e.replace(/\\(.)/g,"$1")})):$e(e));var r,a=e&&e.length,i=n&&n.get||ue,o=function(e){return i(t?[e]:fe(e))};if(a)if(1===a){var u=o(e[0]);r=function(e){return""+u(e)}}else{var s=e.map(o);r=function(e){for(var t=""+s[0](e),n=0;++n<a;)t+="|"+s[n](e);return t}}else r=function(){return""};return ae(r,e,"key")}function St(e,t){var n=e[0],r=Fe(e),a=+t;return a?1===a?r:n+a*(r-n):n}function Ct(e){var t,n,r;e=+e||1e4;var a=function(){t={},n={},r=0},i=function(a,i){return++r>e&&(n=t,t={},r=1),t[a]=i};return a(),{clear:a,has:function(e){return ft(t,e)||ft(n,e)},get:function(e){return ft(t,e)?t[e]:ft(n,e)?i(e,n[e]):void 0},set:function(e,n){return ft(t,e)?t[e]=n:i(e,n)}}}function Et(e,t,n,r){var a=t.length,i=n.length;if(!i)return t;if(!a)return n;for(var o=r||new t.constructor(a+i),u=0,s=0,c=0;u<a&&s<i;++c)o[c]=e(t[u],n[s])>0?n[s++]:t[u++];for(;u<a;++u,++c)o[c]=t[u];for(;s<i;++s,++c)o[c]=n[s];return o}function At(e,t){for(var n="";--t>=0;)n+=e;return n}function Nt(e,t,n,r){var a=n||" ",i=e+"",o=t-i.length;return o<=0?i:"left"===r?At(a,o)+i:"center"===r?At(a,~~(o/2))+i+At(a,Math.ceil(o/2)):i+At(a,o)}function Tt(e){return e&&Fe(e)-e[0]||0}function Mt(e){return Ee(e)?"["+e.map(Mt)+"]":Ae(e)||kt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function Dt(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e)&&!!e}var Ft=function(e){return xt(e)||yt(e)?e:Date.parse(e)};function It(e,t){return t=t||Ft,null==e||""===e?null:t(e)}function Ot(e){return null==e||""===e?null:e+""}function Rt(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return t}function Zt(e,t,n,r){var a=null!=r?r:"\u2026",i=e+"",o=i.length,u=Math.max(0,t-a.length);return o<=t?i:"left"===n?a+i.slice(o-u):"center"===n?i.slice(0,Math.ceil(u/2))+a+i.slice(o-~~(u/2)):i.slice(0,u)+a}function Bt(e,t,n){if(e)if(t)for(var r=e.length,a=0;a<r;++a){var i=t(e[a]);i&&n(i,a,e)}else e.forEach(n)}var zt=n(9472),Lt=n(3032);function Pt(e,t,n){return e.fields=t||[],e.fname=n,e}function jt(e){return null==e?null:e.fname}function Ut(e){return null==e?null:e.fields}function Wt(e){return 1===e.length?Vt(e[0]):qt(e)}var Vt=function(e){return function(t){return t[e]}},qt=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function Ht(e){throw Error(e)}function Gt(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n++),t=n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&c(),u=t=n+1):"]"===r&&(u||Ht("Access path missing open bracket: "+e),u>0&&c(),u=0,t=n+1):n>t?c():t=n+1}return u&&Ht("Access path missing closing bracket: "+e),o&&Ht("Access path missing closing quote: "+e),n>t&&(n++,c()),a}function Xt(e,t,n){var r=Gt(e);return e=1===r.length?r[0]:e,Pt((n&&n.get||Wt)(r),[e],t||e)}var Yt=Xt("id"),Kt=Pt((function(e){return e}),[],"identity"),$t=Pt((function(){return 0}),[],"zero"),Qt=Pt((function(){return 1}),[],"one"),Jt=Pt((function(){return!0}),[],"true"),en=Pt((function(){return!1}),[],"false");function tn(e,t,n){var r=[t].concat([].slice.call(n));console[e].apply(console,r)}var nn=Array.isArray;function rn(e){return e===Object(e)}var an=function(e){return"__proto__"!==e};function on(e,t,n,r){var a,i;if(an(t))if(rn(n)&&!nn(n))for(a in i=rn(e[t])?e[t]:e[t]={},n)r&&(!0===r||r[a])?on(i,a,n[a]):an(a)&&(i[a]=n[a]);else e[t]=n}function un(e,t){if(null==e)return t;var n={},r=[];function a(e){n[e.name]||(n[e.name]=1,r.push(e))}return t.forEach(a),e.forEach(a),r}function sn(e){return e[e.length-1]}function cn(e){return null==e||""===e?null:+e}var ln=function(e){return function(t){return e*Math.exp(t)}},fn=function(e){return function(t){return Math.log(e*t)}},hn=function(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}},dn=function(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}},pn=function(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}};function vn(e,t,n,r){var a=n(e[0]),i=n(sn(e)),o=(i-a)*t;return[r(a-o),r(i-o)]}function gn(e,t,n,r,a){var i=r(e[0]),o=r(sn(e)),u=null!=t?r(t):(i+o)/2;return[a(u+(i-u)*n),a(u+(o-u)*n)]}function mn(e,t,n){return gn(e,t,n,cn,Kt)}function yn(e,t,n){var r=Math.sign(e[0]);return gn(e,t,n,fn(r),ln(r))}function bn(e,t,n,r){return gn(e,t,n,pn(r),pn(1/r))}function xn(e,t,n,r){return gn(e,t,n,hn(r),dn(r))}function wn(e){return null!=e?nn(e)?e:[e]:[]}function kn(e){return"function"===typeof e}function _n(e,t,n){n=n||{},t=wn(t)||[];var r=[],a=[],i={},o=n.comparator||Cn;return wn(e).forEach((function(e,o){null!=e&&(r.push("descending"===t[o]?-1:1),a.push(e=kn(e)?e:Xt(e,null,n)),(Ut(e)||[]).forEach((function(e){return i[e]=1})))})),0===a.length?null:Pt(o(a,r),Object.keys(i))}var Sn=function(e,t){return(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0)},Cn=function(e,t){return 1===e.length?En(e[0],t[0]):An(e,t,e.length)},En=function(e,t){return function(n,r){return Sn(e(n),e(r))*t}},An=function(e,t,n){return t.push(0),function(r,a){for(var i,o=0,u=-1;0===o&&++u<n;)i=e[u],o=Sn(i(r),i(a));return o*t[u]}};function Nn(e){return kn(e)?e:function(){return e}}function Tn(e,t){var n;return function(r){n&&clearTimeout(n),n=setTimeout((function(){return t(r),n=null}),e)}}function Mn(e){for(var t,n,r=1,a=arguments.length;r<a;++r)for(n in t=arguments[r])e[n]=t[n];return e}function Dn(e,t){var n,r,a,i,o=0;if(e&&(n=e.length))if(null==t){for(r=e[o];o<n&&(null==r||r!==r);r=e[++o]);for(a=i=r;o<n;++o)null!=(r=e[o])&&(r<a&&(a=r),r>i&&(i=r))}else{for(r=t(e[o]);o<n&&(null==r||r!==r);r=t(e[++o]));for(a=i=r;o<n;++o)null!=(r=t(e[o]))&&(r<a&&(a=r),r>i&&(i=r))}return[a,i]}var Fn=Object.prototype.hasOwnProperty;function In(e,t){return Fn.call(e,t)}var On={};function Rn(e){var t,n={};function r(e){return In(n,e)&&n[e]!==On}var a={size:0,empty:0,object:n,has:r,get:function(e){return r(e)?n[e]:void 0},set:function(e,t){return r(e)||(++a.size,n[e]===On&&--a.empty),n[e]=t,this},delete:function(e){return r(e)&&(--a.size,++a.empty,n[e]=On),this},clear:function(){a.size=a.empty=0,a.object=n={}},test:function(e){return arguments.length?(t=e,a):t},clean:function(){var e={},r=0;for(var i in n){var o=n[i];o===On||t&&t(o)||(e[i]=o,++r)}a.size=r,a.empty=0,a.object=n=e}};return e&&Object.keys(e).forEach((function(t){a.set(t,e[t])})),a}function Zn(e,t,n){var r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Mn(r,n)}function Bn(e,t,n,r){var a,i=t[0],o=t[t.length-1];return i>o&&(a=i,i=o,o=a),r=void 0===r||r,((n=void 0===n||n)?i<=e:i<e)&&(r?e<=o:e<o)}function zn(e){return"[object Date]"===Object.prototype.toString.call(e)}function Ln(e){return"number"===typeof e}function Pn(e){return"string"===typeof e}function jn(e,t,n){e&&(e=t?wn(e).map((function(e){return e.replace(/\\(.)/g,"$1")})):wn(e));var r,a=e&&e.length,i=n&&n.get||Wt,o=function(e){return i(t?[e]:Gt(e))};if(a)if(1===a){var u=o(e[0]);r=function(e){return""+u(e)}}else{var s=e.map(o);r=function(e){for(var t=""+s[0](e),n=0;++n<a;)t+="|"+s[n](e);return t}}else r=function(){return""};return Pt(r,e,"key")}function Un(e,t){for(var n="";--t>=0;)n+=e;return n}function Wn(e){return e&&sn(e)-e[0]||0}function Vn(e){return nn(e)?"["+e.map(Vn)+"]":rn(e)||Pn(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function qn(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e)&&!!e}var Hn=function(e){return Ln(e)||zn(e)?e:Date.parse(e)};function Gn(e,t){return t=t||Hn,null==e||""===e?null:t(e)}function Xn(e){return null==e||""===e?null:e+""}function Yn(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return t}function Kn(e,t,n){if(e)if(t)for(var r=e.length,a=0;a<r;++a){var i=t(e[a]);i&&n(i,a,e)}else e.forEach(n)}var $n=n(1303),Qn={},Jn={};function er(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function tr(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function nr(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function rr(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),a=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":function(e){return e<0?"-"+nr(-e,6):e>9999?"+"+nr(e,6):nr(e,4)}(e.getUTCFullYear())+"-"+nr(e.getUTCMonth()+1,2)+"-"+nr(e.getUTCDate(),2)+(a?"T"+nr(t,2)+":"+nr(n,2)+":"+nr(r,2)+"."+nr(a,3)+"Z":r?"T"+nr(t,2)+":"+nr(n,2)+":"+nr(r,2)+"Z":n||t?"T"+nr(t,2)+":"+nr(n,2)+"Z":"")}function ar(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,a=[],i=e.length,o=0,u=0,s=i<=0,c=!1;function l(){if(s)return Jn;if(c)return c=!1,Qn;var t,r,a=o;if(34===e.charCodeAt(a)){for(;o++<i&&34!==e.charCodeAt(o)||34===e.charCodeAt(++o););return(t=o)>=i?s=!0:10===(r=e.charCodeAt(o++))?c=!0:13===r&&(c=!0,10===e.charCodeAt(o)&&++o),e.slice(a+1,t-1).replace(/""/g,'"')}for(;o<i;){if(10===(r=e.charCodeAt(t=o++)))c=!0;else if(13===r)c=!0,10===e.charCodeAt(o)&&++o;else if(r!==n)continue;return e.slice(a,t)}return s=!0,e.slice(a,i)}for(10===e.charCodeAt(i-1)&&--i,13===e.charCodeAt(i-1)&&--i;(r=l())!==Jn;){for(var f=[];r!==Qn&&r!==Jn;)f.push(r),r=l();t&&null==(f=t(f,u++))||a.push(f)}return a}function a(t,n){return t.map((function(t){return n.map((function(e){return o(t[e])})).join(e)}))}function i(t){return t.map(o).join(e)}function o(e){return null==e?"":e instanceof Date?rr(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,a,i=r(e,(function(e,r){if(n)return n(e,r-1);a=e,n=t?function(e,t){var n=er(e);return function(r,a){return t(n(r),a,e)}}(e,t):er(e)}));return i.columns=a||[],i},parseRows:r,format:function(t,n){return null==n&&(n=tr(t)),[n.map(o).join(e)].concat(a(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=tr(e)),a(e,t).join("\n")},formatRows:function(e){return e.map(i).join("\n")},formatRow:i,formatValue:o}}function ir(e){return e}function or(e,t){return"string"===typeof t&&(t=e.objects[t]),"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map((function(t){return ur(e,t)}))}:ur(e,t)}function ur(e,t){var n=t.id,r=t.bbox,a=null==t.properties?{}:t.properties,i=sr(e,t);return null==n&&null==r?{type:"Feature",properties:a,geometry:i}:null==r?{type:"Feature",id:n,properties:a,geometry:i}:{type:"Feature",id:n,bbox:r,properties:a,geometry:i}}function sr(e,t){var n=function(e){if(null==e)return ir;var t,n,r=e.scale[0],a=e.scale[1],i=e.translate[0],o=e.translate[1];return function(e,u){u||(t=n=0);var s=2,c=e.length,l=new Array(c);for(l[0]=(t+=e[0])*r+i,l[1]=(n+=e[1])*a+o;s<c;)l[s]=e[s],++s;return l}}(e.transform),r=e.arcs;function a(e,t){t.length&&t.pop();for(var a=r[e<0?~e:e],i=0,o=a.length;i<o;++i)t.push(n(a[i],i));e<0&&function(e,t){for(var n,r=e.length,a=r-t;a<--r;)n=e[a],e[a++]=e[r],e[r]=n}(t,o)}function i(e){return n(e)}function o(e){for(var t=[],n=0,r=e.length;n<r;++n)a(e[n],t);return t.length<2&&t.push(t[0]),t}function u(e){for(var t=o(e);t.length<4;)t.push(t[0]);return t}function s(e){return e.map(u)}return function e(t){var n,r=t.type;switch(r){case"GeometryCollection":return{type:r,geometries:t.geometries.map(e)};case"Point":n=i(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(i);break;case"LineString":n=o(t.arcs);break;case"MultiLineString":n=t.arcs.map(o);break;case"Polygon":n=s(t.arcs);break;case"MultiPolygon":n=t.arcs.map(s);break;default:return null}return{type:r,coordinates:n}}(t)}function cr(e,t){var n={},r={},a={},i=[],o=-1;function u(e,t){for(var r in e){var a=e[r];delete t[a.start],delete a.start,delete a.end,a.forEach((function(e){n[e<0?~e:e]=1})),i.push(a)}}return t.forEach((function(n,r){var a,i=e.arcs[n<0?~n:n];i.length<3&&!i[1][0]&&!i[1][1]&&(a=t[++o],t[o]=n,t[r]=a)})),t.forEach((function(t){var n,i,o=function(t){var n,r=e.arcs[t<0?~t:t],a=r[0];e.transform?(n=[0,0],r.forEach((function(e){n[0]+=e[0],n[1]+=e[1]}))):n=r[r.length-1];return t<0?[n,a]:[a,n]}(t),u=o[0],s=o[1];if(n=a[u])if(delete a[n.end],n.push(t),n.end=s,i=r[s]){delete r[i.start];var c=i===n?n:n.concat(i);r[c.start=n.start]=a[c.end=i.end]=c}else r[n.start]=a[n.end]=n;else if(n=r[s])if(delete r[n.start],n.unshift(t),n.start=u,i=a[u]){delete a[i.end];var l=i===n?n:i.concat(n);r[l.start=i.start]=a[l.end=n.end]=l}else r[n.start]=a[n.end]=n;else r[(n=[t]).start=u]=a[n.end=s]=n})),u(a,r),u(r,a),t.forEach((function(e){n[e<0?~e:e]||i.push([e])})),i}function lr(e){return sr(e,fr.apply(this,arguments))}function fr(e,t,n){var r,a,i;if(arguments.length>1)r=hr(e,t,n);else for(a=0,r=new Array(i=e.arcs.length);a<i;++a)r[a]=a;return{type:"MultiLineString",arcs:cr(e,r)}}function hr(e,t,n){var r,a=[],i=[];function o(e){var t=e<0?~e:e;(i[t]||(i[t]=[])).push({i:e,g:r})}function u(e){e.forEach(o)}function s(e){e.forEach(u)}return function e(t){switch(r=t,t.type){case"GeometryCollection":t.geometries.forEach(e);break;case"LineString":u(t.arcs);break;case"MultiLineString":case"Polygon":s(t.arcs);break;case"MultiPolygon":!function(e){e.forEach(s)}(t.arcs)}}(t),i.forEach(null==n?function(e){a.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&a.push(e[0].i)}),a}var dr=Math.sqrt(50),pr=Math.sqrt(10),vr=Math.sqrt(2);function gr(e,t,n){var r,a,i,o=(t-e)/Math.max(0,n),u=Math.floor(Math.log10(o)),s=o/Math.pow(10,u),c=s>=dr?10:s>=pr?5:s>=vr?2:1;return u<0?(i=Math.pow(10,-u)/c,(r=Math.round(e*i))/i<e&&++r,(a=Math.round(t*i))/i>t&&--a,i=-i):(i=Math.pow(10,u)*c,(r=Math.round(e/i))*i<e&&++r,(a=Math.round(t/i))*i>t&&--a),a<r&&.5<=n&&n<2?gr(e,t,2*n):[r,a,i]}function mr(e,t,n){return gr(e=+e,t=+t,n=+n)[2]}var yr,br=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function xr(e){if(!(t=br.exec(e)))throw new Error("invalid format: "+e);var t;return new wr({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function wr(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function kr(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function _r(e){return(e=kr(Math.abs(e)))?e[1]:NaN}function Sr(e,t){var n=kr(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}xr.prototype=wr.prototype,wr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Cr={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return Sr(100*e,t)},r:Sr,s:function(e,t){var n=kr(e,t);if(!n)return e+"";var r=n[0],a=n[1],i=a-(yr=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+kr(e,Math.max(0,t+i-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function Er(e){return e}var Ar,Nr,Tr,Mr=Array.prototype.map,Dr=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function Fr(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?Er:(t=Mr.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var a=e.length,i=[],o=0,u=t[0],s=0;a>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),i.push(e.substring(a-=u,a+u)),!((s+=u+1)>r));)u=t[o=(o+1)%t.length];return i.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",u=void 0===e.numerals?Er:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Mr.call(e.numerals,String)),s=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",l=void 0===e.nan?"NaN":e.nan+"";function f(e){var t=(e=xr(e)).fill,n=e.align,f=e.sign,h=e.symbol,d=e.zero,p=e.width,v=e.comma,g=e.precision,m=e.trim,y=e.type;"n"===y?(v=!0,y="g"):Cr[y]||(void 0===g&&(g=12),m=!0,y="g"),(d||"0"===t&&"="===n)&&(d=!0,t="0",n="=");var b="$"===h?a:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===h?i:/[%p]/.test(y)?s:"",w=Cr[y],k=/[defgprs%]/.test(y);function _(e){var a,i,s,h=b,_=x;if("c"===y)_=w(e)+_,e="";else{var S=(e=+e)<0||1/e<0;if(e=isNaN(e)?l:w(Math.abs(e),g),m&&(e=function(e){e:for(var t,n=e.length,r=1,a=-1;r<n;++r)switch(e[r]){case".":a=t=r;break;case"0":0===a&&(a=r),t=r;break;default:if(!+e[r])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),S&&0===+e&&"+"!==f&&(S=!1),h=(S?"("===f?f:c:"-"===f||"("===f?"":f)+h,_=("s"===y?Dr[8+yr/3]:"")+_+(S&&"("===f?")":""),k)for(a=-1,i=e.length;++a<i;)if(48>(s=e.charCodeAt(a))||s>57){_=(46===s?o+e.slice(a+1):e.slice(a))+_,e=e.slice(0,a);break}}v&&!d&&(e=r(e,1/0));var C=h.length+e.length+_.length,E=C<p?new Array(p-C+1).join(t):"";switch(v&&d&&(e=r(E+e,E.length?p-_.length:1/0),E=""),n){case"<":e=h+e+_+E;break;case"=":e=h+E+e+_;break;case"^":e=E.slice(0,C=E.length>>1)+h+e+_+E.slice(C);break;default:e=E+h+e+_}return u(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),_.toString=function(){return e+""},_}return{format:f,formatPrefix:function(e,t){var n=f(((e=xr(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(_r(t)/3))),a=Math.pow(10,-r),i=Dr[8+r/3];return function(e){return n(a*e)+i}}}}!function(e){Ar=Fr(e),Nr=Ar.format,Tr=Ar.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});var Ir=n(6222),Or=new Date,Rr=new Date;function Zr(e,t,n,r){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=function(t){return e(t=new Date(+t)),t},a.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},a.round=function(e){var t=a(e),n=a.ceil(e);return e-t<n-e?t:n},a.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},a.range=function(n,r,i){var o,u=[];if(n=a.ceil(n),i=null==i?1:Math.floor(i),!(n<r)||!(i>0))return u;do{u.push(o=new Date(+n)),t(n,i),e(n)}while(o<n&&n<r);return u},a.filter=function(n){return Zr((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(a.count=function(t,r){return Or.setTime(+t),Rr.setTime(+r),e(Or),e(Rr),Math.floor(n(Or,Rr))},a.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(r?function(t){return r(t)%e===0}:function(t){return a.count(0,t)%e===0}):a:null}),a}var Br=1e3,zr=6e4,Lr=36e5,Pr=864e5,jr=6048e5,Ur=Zr((function(e){return e.setHours(0,0,0,0)}),(function(e,t){return e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*zr)/Pr}),(function(e){return e.getDate()-1})),Wr=(Ur.range,Zr((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/Pr}),(function(e){return e.getUTCDate()-1}))),Vr=(Wr.range,Zr((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/Pr}),(function(e){return Math.floor(e/Pr)})));Vr.range;function qr(e){return Zr((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*zr)/jr}))}var Hr=qr(0),Gr=qr(1),Xr=qr(2),Yr=qr(3),Kr=qr(4),$r=qr(5),Qr=qr(6);Hr.range,Gr.range,Xr.range,Yr.range,Kr.range,$r.range,Qr.range;function Jr(e){return Zr((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/jr}))}var ea=Jr(0),ta=Jr(1),na=Jr(2),ra=Jr(3),aa=Jr(4),ia=Jr(5),oa=Jr(6),ua=(ea.range,ta.range,na.range,ra.range,aa.range,ia.range,oa.range,Zr((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()})));ua.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Zr((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};ua.range;var sa=Zr((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));sa.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Zr((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};sa.range;var ca=Zr((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()})),la=(ca.range,Zr((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()}))),fa=(la.range,Zr((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Br-e.getMinutes()*zr)}),(function(e,t){e.setTime(+e+t*Lr)}),(function(e,t){return(t-e)/Lr}),(function(e){return e.getHours()}))),ha=(fa.range,Zr((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*Lr)}),(function(e,t){return(t-e)/Lr}),(function(e){return e.getUTCHours()}))),da=(ha.range,Zr((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Br)}),(function(e,t){e.setTime(+e+t*zr)}),(function(e,t){return(t-e)/zr}),(function(e){return e.getMinutes()}))),pa=(da.range,Zr((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*zr)}),(function(e,t){return(t-e)/zr}),(function(e){return e.getUTCMinutes()}))),va=(pa.range,Zr((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*Br)}),(function(e,t){return(t-e)/Br}),(function(e){return e.getUTCSeconds()}))),ga=(va.range,Zr((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e})));ga.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?Zr((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):ga:null};ga.range;function ma(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ya(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ba(){return 0}var xa,wa,ka,_a,Sa,Ca,Ea,Aa=Math.sqrt(50),Na=Math.sqrt(10),Ta=Math.sqrt(2);function Ma(e,t,n){var r,a,i,o=(t-e)/Math.max(0,n),u=Math.floor(Math.log10(o)),s=o/Math.pow(10,u),c=s>=Aa?10:s>=Na?5:s>=Ta?2:1;return u<0?(i=Math.pow(10,-u)/c,(r=Math.round(e*i))/i<e&&++r,(a=Math.round(t*i))/i>t&&--a,i=-i):(i=Math.pow(10,u)*c,(r=Math.round(e/i))*i<e&&++r,(a=Math.round(t/i))*i>t&&--a),a<r&&.5<=n&&n<2?Ma(e,t,2*n):[r,a,i]}function Da(e,t,n){return Ma(e=+e,t=+t,n=+n)[2]}function Fa(e,t,n){n=+n;var r=(t=+t)<(e=+e),a=r?Da(t,e,n):Da(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}var Ia="year",Oa="quarter",Ra="month",Za="week",Ba="date",za="day",La="dayofyear",Pa="hours",ja="minutes",Ua="seconds",Wa="milliseconds",Va=[Ia,Oa,Ra,Za,Ba,za,La,Pa,ja,Ua,Wa],qa=Va.reduce((function(e,t,n){return e[t]=1+n,e}),{});function Ha(e){var t=wn(e).slice(),n={};return t.length||Ht("Missing time unit."),t.forEach((function(e){In(qa,e)?n[e]=1:Ht("Invalid time unit: ".concat(e,"."))})),(n.week||n.day?1:0)+(n.quarter||n.month||n.date?1:0)+(n.dayofyear?1:0)>1&&Ht("Incompatible time units: ".concat(e)),t.sort((function(e,t){return qa[e]-qa[t]})),t}var Ga=(xa={},(0,Ir.Z)(xa,Ia,"%Y "),(0,Ir.Z)(xa,Oa,"Q%q "),(0,Ir.Z)(xa,Ra,"%b "),(0,Ir.Z)(xa,Ba,"%d "),(0,Ir.Z)(xa,Za,"W%U "),(0,Ir.Z)(xa,za,"%a "),(0,Ir.Z)(xa,La,"%j "),(0,Ir.Z)(xa,Pa,"%H:00"),(0,Ir.Z)(xa,ja,"00:%M"),(0,Ir.Z)(xa,Ua,":%S"),(0,Ir.Z)(xa,Wa,".%L"),(0,Ir.Z)(xa,"".concat(Ia,"-").concat(Ra),"%Y-%m "),(0,Ir.Z)(xa,"".concat(Ia,"-").concat(Ra,"-").concat(Ba),"%Y-%m-%d "),(0,Ir.Z)(xa,"".concat(Pa,"-").concat(ja),"%H:%M"),xa);var Xa=new Date;function Ya(e){return Xa.setFullYear(e),Xa.setMonth(0),Xa.setDate(1),Xa.setHours(0,0,0,0),Xa}function Ka(e){return Ur.count(Ya(e.getFullYear())-1,e)}function $a(e){return Hr.count(Ya(e.getFullYear())-1,e)}function Qa(e){return Ya(e).getDay()}function Ja(e,t,n,r,a,i,o){if(0<=e&&e<100){var u=new Date(-1,t,n,r,a,i,o);return u.setFullYear(e),u}return new Date(e,t,n,r,a,i,o)}function ei(e){var t=Date.UTC(e.getUTCFullYear(),0,1);return Wr.count(t-1,e)}function ti(e){var t=Date.UTC(e.getUTCFullYear(),0,1);return ea.count(t-1,e)}function ni(e){return Xa.setTime(Date.UTC(e,0,1)),Xa.getUTCDay()}function ri(e,t,n,r,a,i,o){if(0<=e&&e<100){var u=new Date(Date.UTC(-1,t,n,r,a,i,o));return u.setUTCFullYear(n.y),u}return new Date(Date.UTC(e,t,n,r,a,i,o))}function ai(e,t,n,r,a){var i=t||1,o=sn(e),u=function(e,t,a){return function(e,t,n,r){var a=n<=1?e:r?function(t,a){return r+n*Math.floor((e(t,a)-r)/n)}:function(t,r){return n*Math.floor(e(t,r)/n)};return t?function(e,n){return t(a(e,n),n)}:a}(n[a=a||e],r[a],e===o&&i,t)},s=new Date,c=Yn(e),l=c.year?u(Ia):Nn(2012),f=c.month?u(Ra):c.quarter?u(Oa):$t,h=c.week&&c.day?u(za,1,Za+za):c.week?u(Za,1):c.day?u(za,1):c.date?u(Ba,1):c.dayofyear?u(La,1):Qt,d=c.hours?u(Pa):$t,p=c.minutes?u(ja):$t,v=c.seconds?u(Ua):$t,g=c.milliseconds?u(Wa):$t;return function(e){s.setTime(+e);var t=l(s);return a(t,f(s),h(s,t),d(s),p(s),v(s),g(s))}}function ii(e,t,n){return t+7*e-(n+6)%7}var oi=(wa={},(0,Ir.Z)(wa,Ia,(function(e){return e.getFullYear()})),(0,Ir.Z)(wa,Oa,(function(e){return Math.floor(e.getMonth()/3)})),(0,Ir.Z)(wa,Ra,(function(e){return e.getMonth()})),(0,Ir.Z)(wa,Ba,(function(e){return e.getDate()})),(0,Ir.Z)(wa,Pa,(function(e){return e.getHours()})),(0,Ir.Z)(wa,ja,(function(e){return e.getMinutes()})),(0,Ir.Z)(wa,Ua,(function(e){return e.getSeconds()})),(0,Ir.Z)(wa,Wa,(function(e){return e.getMilliseconds()})),(0,Ir.Z)(wa,La,(function(e){return Ka(e)})),(0,Ir.Z)(wa,Za,(function(e){return $a(e)})),(0,Ir.Z)(wa,Za+za,(function(e,t){return ii($a(e),e.getDay(),Qa(t))})),(0,Ir.Z)(wa,za,(function(e,t){return ii(1,e.getDay(),Qa(t))})),wa),ui=(ka={},(0,Ir.Z)(ka,Oa,(function(e){return 3*e})),(0,Ir.Z)(ka,Za,(function(e,t){return ii(e,0,Qa(t))})),ka);function si(e,t){return ai(e,t||1,oi,ui,Ja)}var ci=(_a={},(0,Ir.Z)(_a,Ia,(function(e){return e.getUTCFullYear()})),(0,Ir.Z)(_a,Oa,(function(e){return Math.floor(e.getUTCMonth()/3)})),(0,Ir.Z)(_a,Ra,(function(e){return e.getUTCMonth()})),(0,Ir.Z)(_a,Ba,(function(e){return e.getUTCDate()})),(0,Ir.Z)(_a,Pa,(function(e){return e.getUTCHours()})),(0,Ir.Z)(_a,ja,(function(e){return e.getUTCMinutes()})),(0,Ir.Z)(_a,Ua,(function(e){return e.getUTCSeconds()})),(0,Ir.Z)(_a,Wa,(function(e){return e.getUTCMilliseconds()})),(0,Ir.Z)(_a,La,(function(e){return ei(e)})),(0,Ir.Z)(_a,Za,(function(e){return ti(e)})),(0,Ir.Z)(_a,za,(function(e,t){return ii(1,e.getUTCDay(),ni(t))})),(0,Ir.Z)(_a,Za+za,(function(e,t){return ii(ti(e),e.getUTCDay(),ni(t))})),_a),li=(Sa={},(0,Ir.Z)(Sa,Oa,(function(e){return 3*e})),(0,Ir.Z)(Sa,Za,(function(e,t){return ii(e,0,ni(t))})),Sa);function fi(e,t){return ai(e,t||1,ci,li,ri)}var hi=(Ca={},(0,Ir.Z)(Ca,Ia,ua),(0,Ir.Z)(Ca,Oa,ca.every(3)),(0,Ir.Z)(Ca,Ra,ca),(0,Ir.Z)(Ca,Za,Hr),(0,Ir.Z)(Ca,Ba,Ur),(0,Ir.Z)(Ca,za,Ur),(0,Ir.Z)(Ca,La,Ur),(0,Ir.Z)(Ca,Pa,fa),(0,Ir.Z)(Ca,ja,da),(0,Ir.Z)(Ca,Ua,va),(0,Ir.Z)(Ca,Wa,ga),Ca),di=(Ea={},(0,Ir.Z)(Ea,Ia,sa),(0,Ir.Z)(Ea,Oa,la.every(3)),(0,Ir.Z)(Ea,Ra,la),(0,Ir.Z)(Ea,Za,ea),(0,Ir.Z)(Ea,Ba,Wr),(0,Ir.Z)(Ea,za,Wr),(0,Ir.Z)(Ea,La,Wr),(0,Ir.Z)(Ea,Pa,ha),(0,Ir.Z)(Ea,ja,pa),(0,Ir.Z)(Ea,Ua,va),(0,Ir.Z)(Ea,Wa,ga),Ea);function pi(e){return hi[e]}function vi(e){return di[e]}function gi(e,t,n){return e?e.offset(t,n):void 0}function mi(e,t,n,r){return e?e.range(t,n,r):void 0}var yi=1e3,bi=6e4,xi=36e5,wi=864e5,ki=2592e6,_i=31536e6,Si=[Ia,Ra,Ba,Pa,ja,Ua,Wa],Ci=Si.slice(0,-1),Ei=Ci.slice(0,-1),Ai=Ei.slice(0,-1),Ni=Ai.slice(0,-1),Ti=[Ia,Ra],Mi=[Ia],Di=[[Ci,1,yi],[Ci,5,5e3],[Ci,15,15e3],[Ci,30,3e4],[Ei,1,bi],[Ei,5,3e5],[Ei,15,9e5],[Ei,30,18e5],[Ai,1,xi],[Ai,3,108e5],[Ai,6,216e5],[Ai,12,432e5],[Ni,1,wi],[[Ia,Za],1,6048e5],[Ti,1,ki],[Ti,3,7776e6],[Mi,1,_i]];function Fi(e){var t,n,r=e.extent,a=e.maxbins||40,i=Math.abs(Wn(r))/a,o=function(e){var t,n,r;function a(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<i){if(0!==t(r,r))return i;do{var o=a+i>>>1;n(e[o],r)<0?a=o+1:i=o}while(a<i)}return a}return 2!==e.length?(t=ma,n=function(t,n){return ma(e(t),n)},r=function(t,n){return e(t)-n}):(t=e===ma||e===ya?e:ba,n=e,r=e),{left:a,center:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=a(e,t,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return i>n&&r(e[i-1],t)>-r(e[i],t)?i-1:i},right:function(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<i){if(0!==t(r,r))return i;do{var o=a+i>>>1;n(e[o],r)<=0?a=o+1:i=o}while(a<i)}return a}}}((function(e){return e[2]})).right(Di,i);return o===Di.length?(t=Mi,n=Fa(r[0]/_i,r[1]/_i,a)):o?(t=(o=Di[i/Di[o-1][2]<Di[o][2]/i?o-1:o])[0],n=o[1]):(t=Si,n=Math.max(Fa(r[0],r[1],a),1)),{units:t,step:n}}var Ii=new Date,Oi=new Date;function Ri(e,t,n,r){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=function(t){return e(t=new Date(+t)),t},a.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},a.round=function(e){var t=a(e),n=a.ceil(e);return e-t<n-e?t:n},a.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},a.range=function(n,r,i){var o,u=[];if(n=a.ceil(n),i=null==i?1:Math.floor(i),!(n<r)||!(i>0))return u;do{u.push(o=new Date(+n)),t(n,i),e(n)}while(o<n&&n<r);return u},a.filter=function(n){return Ri((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(a.count=function(t,r){return Ii.setTime(+t),Oi.setTime(+r),e(Ii),e(Oi),Math.floor(n(Ii,Oi))},a.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(r?function(t){return r(t)%e===0}:function(t){return a.count(0,t)%e===0}):a:null}),a}var Zi=6e4,Bi=864e5,zi=6048e5;function Li(e){return Ri((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Zi)/zi}))}var Pi=Li(0),ji=Li(1),Ui=Li(2),Wi=Li(3),Vi=Li(4),qi=Li(5),Hi=Li(6);Pi.range,ji.range,Ui.range,Wi.range,Vi.range,qi.range,Hi.range;function Gi(e){return Ri((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/zi}))}var Xi=Gi(0),Yi=Gi(1),Ki=Gi(2),$i=Gi(3),Qi=Gi(4),Ji=Gi(5),eo=Gi(6),to=(Xi.range,Yi.range,Ki.range,$i.range,Qi.range,Ji.range,eo.range,Ri((function(e){return e.setHours(0,0,0,0)}),(function(e,t){return e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Zi)/Bi}),(function(e){return e.getDate()-1}))),no=(to.range,Ri((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/Bi}),(function(e){return e.getUTCDate()-1}))),ro=(no.range,Ri((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/Bi}),(function(e){return Math.floor(e/Bi)}))),ao=(ro.range,Ri((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()})));ao.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Ri((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};ao.range;var io=Ri((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));io.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Ri((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};io.range;function oo(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function uo(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function so(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function co(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,i=e.days,o=e.shortDays,u=e.months,s=e.shortMonths,c=So(a),l=Co(a),f=So(i),h=Co(i),d=So(o),p=Co(o),v=So(u),g=Co(u),m=So(s),y=Co(s),b={a:function(e){return o[e.getDay()]},A:function(e){return i[e.getDay()]},b:function(e){return s[e.getMonth()]},B:function(e){return u[e.getMonth()]},c:null,d:Ho,e:Ho,f:$o,g:su,G:lu,H:Go,I:Xo,j:Yo,L:Ko,m:Qo,M:Jo,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Iu,s:Ou,S:eu,u:tu,U:nu,V:au,w:iu,W:ou,x:null,X:null,y:uu,Y:cu,Z:fu,"%":Fu},x={a:function(e){return o[e.getUTCDay()]},A:function(e){return i[e.getUTCDay()]},b:function(e){return s[e.getUTCMonth()]},B:function(e){return u[e.getUTCMonth()]},c:null,d:hu,e:hu,f:mu,g:Nu,G:Mu,H:du,I:pu,j:vu,L:gu,m:yu,M:bu,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Iu,s:Ou,S:xu,u:wu,U:ku,V:Su,w:Cu,W:Eu,x:null,X:null,y:Au,Y:Tu,Z:Du,"%":Fu},w={a:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return S(e,t,n,r)},d:Zo,e:Zo,f:Uo,g:Fo,G:Do,H:zo,I:zo,j:Bo,L:jo,m:Ro,M:Lo,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=l.get(r[0].toLowerCase()),n+r[0].length):-1},q:Oo,Q:Vo,s:qo,S:Po,u:Ao,U:No,V:To,w:Eo,W:Mo,x:function(e,t,r){return S(e,n,t,r)},X:function(e,t,n){return S(e,r,t,n)},y:Fo,Y:Do,Z:Io,"%":Wo};function k(e,t){return function(n){var r,a,i,o=[],u=-1,s=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++u<c;)37===e.charCodeAt(u)&&(o.push(e.slice(s,u)),null!=(a=yo[r=e.charAt(++u)])?r=e.charAt(++u):a="e"===r?" ":"0",(i=t[r])&&(r=i(n,a)),o.push(r),s=u+1);return o.push(e.slice(s,u)),o.join("")}}function _(e,t){return function(n){var r,a,i=so(1900,void 0,1);if(S(i,e,n+="",0)!=n.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(t&&!("Z"in i)&&(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||i.V>53)return null;"w"in i||(i.w=1),"Z"in i?(a=(r=uo(so(i.y,0,1))).getUTCDay(),r=a>4||0===a?Yi.ceil(r):Yi(r),r=no.offset(r,7*(i.V-1)),i.y=r.getUTCFullYear(),i.m=r.getUTCMonth(),i.d=r.getUTCDate()+(i.w+6)%7):(a=(r=oo(so(i.y,0,1))).getDay(),r=a>4||0===a?ji.ceil(r):ji(r),r=to.offset(r,7*(i.V-1)),i.y=r.getFullYear(),i.m=r.getMonth(),i.d=r.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),a="Z"in i?uo(so(i.y,0,1)).getUTCDay():oo(so(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(a+5)%7:i.w+7*i.U-(a+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,uo(i)):oo(i)}}function S(e,t,n,r){for(var a,i,o=0,u=t.length,s=n.length;o<u;){if(r>=s)return-1;if(37===(a=t.charCodeAt(o++))){if(a=t.charAt(o++),!(i=w[a in yo?t.charAt(o++):a])||(r=i(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}return b.x=k(n,b),b.X=k(r,b),b.c=k(t,b),x.x=k(n,x),x.X=k(r,x),x.c=k(t,x),{format:function(e){var t=k(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=_(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=k(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=_(e+="",!0);return t.toString=function(){return e},t}}}var lo,fo,ho,po,vo,go,mo,yo={"-":"",_:" ",0:"0"},bo=/^\s*\d+/,xo=/^%/,wo=/[\\^$*+?|[\]().{}]/g;function ko(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function _o(e){return e.replace(wo,"\\$&")}function So(e){return new RegExp("^(?:"+e.map(_o).join("|")+")","i")}function Co(e){return new Map(e.map((function(e,t){return[e.toLowerCase(),t]})))}function Eo(e,t,n){var r=bo.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Ao(e,t,n){var r=bo.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function No(e,t,n){var r=bo.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function To(e,t,n){var r=bo.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Mo(e,t,n){var r=bo.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Do(e,t,n){var r=bo.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Fo(e,t,n){var r=bo.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Io(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Oo(e,t,n){var r=bo.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function Ro(e,t,n){var r=bo.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Zo(e,t,n){var r=bo.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Bo(e,t,n){var r=bo.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function zo(e,t,n){var r=bo.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Lo(e,t,n){var r=bo.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Po(e,t,n){var r=bo.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function jo(e,t,n){var r=bo.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Uo(e,t,n){var r=bo.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Wo(e,t,n){var r=xo.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Vo(e,t,n){var r=bo.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function qo(e,t,n){var r=bo.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Ho(e,t){return ko(e.getDate(),t,2)}function Go(e,t){return ko(e.getHours(),t,2)}function Xo(e,t){return ko(e.getHours()%12||12,t,2)}function Yo(e,t){return ko(1+to.count(ao(e),e),t,3)}function Ko(e,t){return ko(e.getMilliseconds(),t,3)}function $o(e,t){return Ko(e,t)+"000"}function Qo(e,t){return ko(e.getMonth()+1,t,2)}function Jo(e,t){return ko(e.getMinutes(),t,2)}function eu(e,t){return ko(e.getSeconds(),t,2)}function tu(e){var t=e.getDay();return 0===t?7:t}function nu(e,t){return ko(Pi.count(ao(e)-1,e),t,2)}function ru(e){var t=e.getDay();return t>=4||0===t?Vi(e):Vi.ceil(e)}function au(e,t){return e=ru(e),ko(Vi.count(ao(e),e)+(4===ao(e).getDay()),t,2)}function iu(e){return e.getDay()}function ou(e,t){return ko(ji.count(ao(e)-1,e),t,2)}function uu(e,t){return ko(e.getFullYear()%100,t,2)}function su(e,t){return ko((e=ru(e)).getFullYear()%100,t,2)}function cu(e,t){return ko(e.getFullYear()%1e4,t,4)}function lu(e,t){var n=e.getDay();return ko((e=n>=4||0===n?Vi(e):Vi.ceil(e)).getFullYear()%1e4,t,4)}function fu(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ko(t/60|0,"0",2)+ko(t%60,"0",2)}function hu(e,t){return ko(e.getUTCDate(),t,2)}function du(e,t){return ko(e.getUTCHours(),t,2)}function pu(e,t){return ko(e.getUTCHours()%12||12,t,2)}function vu(e,t){return ko(1+no.count(io(e),e),t,3)}function gu(e,t){return ko(e.getUTCMilliseconds(),t,3)}function mu(e,t){return gu(e,t)+"000"}function yu(e,t){return ko(e.getUTCMonth()+1,t,2)}function bu(e,t){return ko(e.getUTCMinutes(),t,2)}function xu(e,t){return ko(e.getUTCSeconds(),t,2)}function wu(e){var t=e.getUTCDay();return 0===t?7:t}function ku(e,t){return ko(Xi.count(io(e)-1,e),t,2)}function _u(e){var t=e.getUTCDay();return t>=4||0===t?Qi(e):Qi.ceil(e)}function Su(e,t){return e=_u(e),ko(Qi.count(io(e),e)+(4===io(e).getUTCDay()),t,2)}function Cu(e){return e.getUTCDay()}function Eu(e,t){return ko(Yi.count(io(e)-1,e),t,2)}function Au(e,t){return ko(e.getUTCFullYear()%100,t,2)}function Nu(e,t){return ko((e=_u(e)).getUTCFullYear()%100,t,2)}function Tu(e,t){return ko(e.getUTCFullYear()%1e4,t,4)}function Mu(e,t){var n=e.getUTCDay();return ko((e=n>=4||0===n?Qi(e):Qi.ceil(e)).getUTCFullYear()%1e4,t,4)}function Du(){return"+0000"}function Fu(){return"%"}function Iu(e){return+e}function Ou(e){return Math.floor(+e/1e3)}function Ru(e){var t={};return function(n){return t[n]||(t[n]=e(n))}}function Zu(e){var t=Ru(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat:function(e){var n=xr(e||",");if(null==n.precision){switch(n.precision=12,n.type){case"%":n.precision-=2;break;case"e":n.precision-=1}return function(e,t){return function(n){var r=e(n),a=r.indexOf(t);if(a<0)return r;for(var i=function(e,t){var n,r=e.lastIndexOf("e");if(r>0)return r;for(r=e.length;--r>t;)if((n=e.charCodeAt(r))>=48&&n<=57)return r+1}(r,a),o=i<r.length?r.slice(i):"";--i>a;)if("0"!==r[i]){++i;break}return r.slice(0,i)+o}}(t(n),t(".1f")(1)[1])}return t(n)},formatSpan:function(e,r,a,i){i=xr(null==i?",f":i);var o,u=function(e,t,n){n=+n;var r=(t=+t)<(e=+e),a=r?mr(t,e,n):mr(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}(e,r,a),s=Math.max(Math.abs(e),Math.abs(r));if(null==i.precision)switch(i.type){case"s":return isNaN(o=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(_r(t)/3)))-_r(Math.abs(e)))}(u,s))||(i.precision=o),n(i,s);case"":case"e":case"g":case"p":case"r":isNaN(o=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,_r(t)-_r(e))+1}(u,s))||(i.precision=o-("e"===i.type));break;case"f":case"%":isNaN(o=function(e){return Math.max(0,-_r(Math.abs(e)))}(u))||(i.precision=o-2*("%"===i.type))}return t(i)}}}function Bu(){return go=Zu({format:Nr,formatPrefix:Tr})}function zu(e){return Zu(Fr(e))}function Lu(e){return arguments.length?go=zu(e):go}function Pu(e,t,n){rn(n=n||{})||Ht("Invalid time multi-format specifier: ".concat(n));var r=t(Ua),a=t(ja),i=t(Pa),o=t(Ba),u=t(Za),s=t(Ra),c=t(Oa),l=t(Ia),f=e(n.milliseconds||".%L"),h=e(n.seconds||":%S"),d=e(n.minutes||"%I:%M"),p=e(n.hours||"%I %p"),v=e(n.date||n.day||"%a %d"),g=e(n.week||"%b %d"),m=e(n.month||"%B"),y=e(n.quarter||"%B"),b=e(n.year||"%Y");return function(e){return(r(e)<e?f:a(e)<e?h:i(e)<e?d:o(e)<e?p:s(e)<e?u(e)<e?v:g:l(e)<e?c(e)<e?m:y:b)(e)}}function ju(e){var t=Ru(e.format),n=Ru(e.utcFormat);return{timeFormat:function(e){return Pn(e)?t(e):Pu(t,pi,e)},utcFormat:function(e){return Pn(e)?n(e):Pu(n,vi,e)},timeParse:Ru(e.parse),utcParse:Ru(e.utcParse)}}function Uu(){return mo=ju({format:fo,parse:ho,utcFormat:po,utcParse:vo})}function Wu(e){return ju(co(e))}function Vu(e){return arguments.length?mo=Wu(e):mo}!function(e){lo=co(e),fo=lo.format,ho=lo.parse,po=lo.utcFormat,vo=lo.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Bu(),Uu();var qu=function(e,t){return Mn({},e,t)};function Hu(e,t){var n=arguments.length;return n&&2!==n&&Ht("defaultLocale expects either zero or two arguments."),n?qu(Lu(e),Vu(t)):qu(Lu(),Vu())}var Gu=/^(data:|([A-Za-z]+:)?\/\/)/,Xu=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Yu=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Ku="file://";function $u(e,t){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,Lt.Z)(S().mark((function e(t,n){var r,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sanitize(t,n);case 2:return r=e.sent,a=r.href,e.abrupt("return",r.localFile?this.file(a):this.http(a,n));case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Ju(e,t){return es.apply(this,arguments)}function es(){return es=(0,Lt.Z)(S().mark((function e(t,n){var r,a,i,o,u,s,c;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Mn({},this.options,n),r=this.fileAccess,a={href:null},s=Xu.test(t.replace(Yu,"")),null!=t&&"string"===typeof t&&s||Ht("Sanitize failure, invalid URI: "+Vn(t)),c=Gu.test(t),(u=n.baseURL)&&!c&&(t.startsWith("/")||u.endsWith("/")||(t="/"+t),t=u+t),o=(i=t.startsWith(Ku))||"file"===n.mode||"http"!==n.mode&&!c&&r,i?t=t.slice(Ku.length):t.startsWith("//")&&("file"===n.defaultProtocol?(t=t.slice(2),o=!0):t=(n.defaultProtocol||"http")+":"+t),Object.defineProperty(a,"localFile",{value:!!o}),a.href=t,n.target&&(a.target=n.target+""),n.rel&&(a.rel=n.rel+""),"image"===n.context&&n.crossOrigin&&(a.crossOrigin=n.crossOrigin+""),e.abrupt("return",a);case 14:case"end":return e.stop()}}),e,this)}))),es.apply(this,arguments)}function ts(e){return e?function(t){return new Promise((function(n,r){e.readFile(t,(function(e,t){e?r(e):n(t)}))}))}:ns}function ns(){return rs.apply(this,arguments)}function rs(){return(rs=(0,Lt.Z)(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ht("No file system access.");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function as(e){return e?function(){var t=(0,Lt.Z)(S().mark((function t(n,r){var a,i,o;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Mn({},this.options.http,r),i=r&&r.response,t.next=4,e(n,a);case 4:return o=t.sent,t.abrupt("return",o.ok?kn(o[i])?o[i]():o.text():Ht(o.status+""+o.statusText));case 6:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}():is}function is(){return os.apply(this,arguments)}function os(){return(os=(0,Lt.Z)(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ht("No HTTP fetch method available.");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var us=function(e){return!Number.isNaN(+e)&&!(e instanceof Date)},ss={boolean:qn,integer:cn,number:cn,date:Gn,string:Xn,unknown:Kt},cs=[function(e){return"true"===e||"false"===e||!0===e||!1===e},function(e){return us(e)&&Number.isInteger(+e)},us,function(e){return!Number.isNaN(Date.parse(e))}],ls=["boolean","integer","number","date"];function fs(e,t){return t.reduce((function(t,n){return t[n]=function(e,t){if(!e||!e.length)return"unknown";for(var n,r,a,i=e.length,o=cs.length,u=cs.map((function(e,t){return t+1})),s=0,c=0;s<i;++s)for(r=t?e[s][t]:e[s],n=0;n<o;++n)if(u[n]&&null!=(a=r)&&a===a&&!cs[n](r)&&(u[n]=0,++c===cs.length))return"string";return ls[u.reduce((function(e,t){return 0===e?t:e}),0)-1]}(e,n),t}),{})}function hs(e){var t=function(t,n){var r={delimiter:e};return ds(t,n?Mn(n,r):r)};return t.responseType="text",t}function ds(e,t){return t.header&&(e=t.header.map(Vn).join(t.delimiter)+"\n"+e),ar(t.delimiter).parse(e+"")}function ps(e,t){var n,r=t&&t.property?Xt(t.property):Kt;return!rn(e)||(n=e,"function"===typeof Buffer&&kn(Buffer.isBuffer)&&Buffer.isBuffer(n))?r(JSON.parse(e)):function(e,t){!nn(e)&&function(e){return e&&kn(e[Symbol.iterator])}(e)&&(e=(0,$n.Z)(e));return t&&t.copy?JSON.parse(JSON.stringify(e)):e}(r(e),t)}ds.responseType="text",ps.responseType="json";var vs={interior:function(e,t){return e!==t},exterior:function(e,t){return e===t}};function gs(e,t){var n,r,a,i;return e=ps(e,t),t&&t.feature?(n=or,a=t.feature):t&&t.mesh?(n=lr,a=t.mesh,i=vs[t.filter]):Ht("Missing TopoJSON feature or mesh parameter."),(r=(r=e.objects[a])?n(e,r,i):Ht("Invalid TopoJSON object: "+a))&&r.features||[r]}gs.responseType="json";var ms={dsv:ds,csv:hs(","),tsv:hs("\t"),json:ps,topojson:gs};function ys(e,t){return arguments.length>1?(ms[e]=t,this):In(ms,e)?ms[e]:null}function bs(e){var t=ys(e);return t&&t.responseType||"text"}function xs(e,t,n,r){var a=ys((t=t||{}).type||"json");return a||Ht("Unknown data format type: "+t.type),e=a(e,t),t.parse&&function(e,t,n,r){if(!e.length)return;var a=Vu();n=n||a.timeParse,r=r||a.utcParse;var i,o,u,s,c,l,f=e.columns||Object.keys(e[0]);"auto"===t&&(t=fs(e,f));var h=(f=Object.keys(t)).map((function(e){var a,i,o=t[e];if(o&&(o.startsWith("date:")||o.startsWith("utc:")))return("'"===(i=(a=o.split(/:(.+)?/,2))[1])[0]&&"'"===i[i.length-1]||'"'===i[0]&&'"'===i[i.length-1])&&(i=i.slice(1,-1)),("utc"===a[0]?r:n)(i);if(!ss[o])throw Error("Illegal format pattern: "+e+":"+o);return ss[o]}));for(u=0,c=e.length,l=f.length;u<c;++u)for(i=e[u],s=0;s<l;++s)i[o=f[s]]=h[s](i[o])}(e,t.parse,n,r),In(e,"columns")&&delete e.columns,e}var ws=function(e,t){return function(n){return{options:n||{},sanitize:Ju,load:$u,fileAccess:!!t,file:ts(t),http:as(e)}}}("undefined"!==typeof fetch&&fetch,null);function ks(e){var t=e||Kt,n=[],r={};return n.add=function(e){var a=t(e);return r[a]||(r[a]=1,n.push(e)),n},n.remove=function(e){var a=t(e);if(r[a]){r[a]=0;var i=n.indexOf(e);i>=0&&n.splice(i,1)}return n},n}function _s(e,t){return Ss.apply(this,arguments)}function Ss(){return Ss=(0,Lt.Z)(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),t.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),Ss.apply(this,arguments)}var Cs=Symbol("vega_id"),Es=1;function As(e){return!(!e||!Ns(e))}function Ns(e){return e[Cs]}function Ts(e,t){return e[Cs]=t,e}function Ms(e){var t=e===Object(e)?e:{data:e};return Ns(t)?t:Ts(t,Es++)}function Ds(e){return Fs(e,Ms({}))}function Fs(e,t){for(var n in e)t[n]=e[n];return t}function Is(e,t){return Ts(t,Ns(e))}function Os(e,t){return e?t?function(n,r){return e(n,r)||Ns(t(n))-Ns(t(r))}:function(t,n){return e(t,n)||Ns(t)-Ns(n)}:null}function Rs(e){return e&&e.constructor===Zs}function Zs(){var e=[],t=[],n=[],r=[],a=[],i=null,o=!1;return{constructor:Zs,insert:function(t){for(var n=wn(t),r=n.length,a=0;a<r;++a)e.push(n[a]);return this},remove:function(e){for(var n=kn(e)?r:t,a=wn(e),i=a.length,o=0;o<i;++o)n.push(a[o]);return this},modify:function(e,t,r){var i={field:t,value:Nn(r)};return kn(e)?(i.filter=e,a.push(i)):(i.tuple=e,n.push(i)),this},encode:function(e,t){return kn(e)?a.push({filter:e,field:t}):n.push({tuple:e,field:t}),this},clean:function(e){return i=e,this},reflow:function(){return o=!0,this},pulse:function(u,s){var c,l,f,h,d,p,v={},g={};for(c=0,l=s.length;c<l;++c)v[Ns(s[c])]=1;for(c=0,l=t.length;c<l;++c)v[Ns(d=t[c])]=-1;for(c=0,l=r.length;c<l;++c)h=r[c],s.forEach((function(e){h(e)&&(v[Ns(e)]=-1)}));for(c=0,l=e.length;c<l;++c)p=Ns(d=e[c]),v[p]?v[p]=1:u.add.push(Ms(e[c]));for(c=0,l=s.length;c<l;++c)d=s[c],v[Ns(d)]<0&&u.rem.push(d);function m(e,t,n){n?e[t]=n(e):u.encode=t,o||(g[Ns(e)]=e)}for(c=0,l=n.length;c<l;++c)d=(f=n[c]).tuple,h=f.field,(p=v[Ns(d)])>0&&(m(d,h,f.value),u.modifies(h));for(c=0,l=a.length;c<l;++c)f=a[c],h=f.filter,s.forEach((function(e){h(e)&&v[Ns(e)]>0&&m(e,f.field,f.value)})),u.modifies(f.field);if(o)u.mod=t.length||r.length?s.filter((function(e){return v[Ns(e)]>0})):s.slice();else for(p in g)u.mod.push(g[p]);return(i||null==i&&(t.length||r.length))&&u.clean(!0),u}}}var Bs="_:mod:_";function zs(){Object.defineProperty(this,Bs,{writable:!0,value:{}})}zs.prototype={set:function(e,t,n,r){var a=this,i=a[e],o=a[Bs];return null!=t&&t>=0?(i[t]!==n||r)&&(i[t]=n,o[t+":"+e]=-1,o[e]=-1):(i!==n||r)&&(a[e]=n,o[e]=nn(n)?1+n.length:-1),a},modified:function(e,t){var n=this[Bs];if(!arguments.length){for(var r in n)if(n[r])return!0;return!1}if(nn(e)){for(var a=0;a<e.length;++a)if(n[e[a]])return!0;return!1}return null!=t&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear:function(){return this[Bs]={},this}};var Ls=0,Ps=new zs;function js(e,t,n,r){this.id=++Ls,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Us(e){return function(t){var n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}js.prototype={targets:function(){return this._targets||(this._targets=ks(Yt))},set:function(e){return this.value!==e?(this.value=e,1):0},skip:Us(1),modified:Us(2),parameters:function(e,t,n){var r=this;t=!1!==t;var a,i,o,u,s=this._argval=this._argval||new zs,c=this._argops=this._argops||[],l=[],f=function(e,n,a){a instanceof js?(a!==r&&(t&&a.targets().add(r),l.push(a)),c.push({op:a,name:e,index:n})):s.set(e,n,a)};for(a in e)if(i=e[a],"pulse"===a)wn(i).forEach((function(e){e instanceof js?e!==r&&(e.targets().add(r),l.push(e)):Ht("Pulse parameters must be operator instances.")})),this.source=i;else if(nn(i))for(s.set(a,-1,Array(o=i.length)),u=0;u<o;++u)f(a,u,i[u]);else f(a,-1,i);return this.marshall().clear(),n&&(c.initonly=!0),l},marshall:function(e){var t,n,r,a,i=this._argval||Ps,o=this._argops;if(o){var u=o.length;for(n=0;n<u;++n)a=(r=(t=o[n]).op).modified()&&r.stamp===e,i.set(t.name,t.index,r.value,a);if(o.initonly){for(n=0;n<u;++n)(t=o[n]).op.targets().remove(this);this._argops=null,this._update=null}}return i},detach:function(){var e,t,n,r=this._argops;if(r)for(e=0,t=r.length;e<t;++e)(n=r[e].op)._targets&&n._targets.remove(this);this.pulse=null,this.source=null},evaluate:function(e){var t=this._update;if(t){var n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run:function(e){return e.stamp<this.stamp?e.StopPropagation:(this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e);var t}};var Ws=0;function Vs(e,t,n){this.id=++Ws,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function qs(e,t,n){return new Vs(e,t,n)}function Hs(){return Hs=(0,Lt.Z)(S().mark((function e(t,n){var r,a,i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this,a=0,e.prev=2,e.next=5,r.loader().load(t,{context:"dataflow",response:bs(n&&n.type)});case 5:i=e.sent;try{i=r.parse(i,n)}catch(o){a=-2,r.warn("Data ingestion failed",t,o)}e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),a=-1,r.warn("Loading failed",t,e.t0);case 13:return e.abrupt("return",{data:i,status:a});case 14:case"end":return e.stop()}}),e,this,[[2,9]])}))),Hs.apply(this,arguments)}function Gs(){return Gs=(0,Lt.Z)(S().mark((function e(t,n,r){var a,i,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=(a=this)._pending||Xs(a)).requests+=1,e.next=4,a.request(n,r);case 4:return o=e.sent,a.pulse(t,a.changeset().remove(Jt).insert(o.data||[])),i.done(),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e,this)}))),Gs.apply(this,arguments)}function Xs(e){var t,n=new Promise((function(e){return t=e}));return n.requests=0,n.done=function(){0===--n.requests&&(e._pending=null,t(e))},e._pending=n}Vs.prototype={_filter:Jt,_apply:Kt,targets:function(){return this._targets||(this._targets=ks(Yt))},consume:function(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive:function(e){if(this._filter(e)){for(var t=this.value=this._apply(e),n=this._targets,r=n?n.length:0,a=0;a<r;++a)n[a].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter:function(e){var t=qs(e);return this.targets().add(t),t},apply:function(e){var t=qs(null,e);return this.targets().add(t),t},merge:function(){var e=qs();this.targets().add(e);for(var t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle:function(e){var t=-1;return this.filter((function(){var n=Date.now();return n-t>e?(t=n,1):0}))},debounce:function(e){var t=qs();return this.targets().add(qs(null,null,Tn(e,(function(e){var n=e.dataflow;t.receive(e),n&&n.run&&n.run()})))),t},between:function(e,t){var n=!1;return e.targets().add(qs(null,null,(function(){return n=!0}))),t.targets().add(qs(null,null,(function(){return n=!1}))),this.filter((function(){return n}))},detach:function(){this._filter=Jt,this._targets=null}};var Ys={skip:!0};function Ks(e,t,n,r,a,i){var o,u,s=Mn({},i,Ys);kn(n)||(n=Nn(n)),void 0===r?o=function(t){return e.touch(n(t))}:kn(r)?(u=new js(null,r,a,!1),o=function(t){u.evaluate(t);var r=n(t),a=u.value;Rs(a)?e.pulse(r,a,i):e.update(r,a,s)}):o=function(t){return e.update(n(t),r,s)},t.apply(o)}function $s(e,t,n,r,a,i){if(void 0===r)t.targets().add(n);else{var o=i||{},u=new js(null,function(e,t){return t=kn(t)?t:Nn(t),e?function(n,r){var a=t(n,r);return e.skip()||(e.skip(a!==this.value).value=a),a}:t}(n,r),a,!1);u.modified(o.force),u.rank=t.rank,t.targets().add(u),n&&(u.skip(!0),u.value=n.value,u.targets().add(n),e.connect(n,[u]))}}var Qs={};function Js(e,t,n){this.dataflow=e,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function ec(e,t){var n=[];return Kn(e,t,(function(e){return n.push(e)})),n}function tc(e,t){var n={};return e.visit(t,(function(e){n[Ns(e)]=1})),function(e){return n[Ns(e)]?null:e}}function nc(e,t){return e?function(n,r){return e(n,r)&&t(n,r)}:t}function rc(e,t,n,r){var a=this,i=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;var o,u=(0,zt.Z)(n);try{for(u.s();!(o=u.n()).done;){var s=o.value;if(s.stamp===t){if(s.fields){var c=a.fields||(a.fields={});for(var l in s.fields)c[l]=1}s.changed(a.ADD)&&(i|=a.ADD),s.changed(a.REM)&&(i|=a.REM),s.changed(a.MOD)&&(i|=a.MOD)}}}catch(f){u.e(f)}finally{u.f()}this.changes=i}function ac(){return ac=(0,Lt.Z)(S().mark((function e(t,n,r){var a,i,o,u,s,c,l,f,h;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],!(a=this)._pulse){e.next=3;break}return e.abrupt("return",oc(a));case 3:if(!a._pending){e.next=6;break}return e.next=6,a._pending;case 6:if(!n){e.next=9;break}return e.next=9,_s(a,n);case 9:if(a._touched.length){e.next=12;break}return a.debug("Dataflow invoked, but nothing to do."),e.abrupt("return",a);case 12:o=++a._clock,a._pulse=new Js(a,o,t),a._touched.forEach((function(e){return a._enqueue(e,!0)})),a._touched=ks(Yt),u=0,e.prev=17;case 18:if(!(a._heap.size()>0)){e.next=35;break}if((s=a._heap.pop()).rank===s.qrank){e.next=23;break}return a._enqueue(s,!0),e.abrupt("continue",18);case 23:if(!(c=s.run(a._getPulse(s,t))).then){e.next=30;break}return e.next=27,c;case 27:c=e.sent,e.next=31;break;case 30:c.async&&(i.push(c.async),c=Qs);case 31:c!==Qs&&s._targets&&s._targets.forEach((function(e){return a._enqueue(e)})),++u,e.next=18;break;case 35:e.next=41;break;case 37:e.prev=37,e.t0=e.catch(17),a._heap.clear(),l=e.t0;case 41:if(a._input={},a._pulse=null,a.debug("Pulse ".concat(o,": ").concat(u," operators")),l&&(a._postrun=[],a.error(l)),!a._postrun.length){e.next=55;break}f=a._postrun.sort((function(e,t){return t.priority-e.priority})),a._postrun=[],h=0;case 49:if(!(h<f.length)){e.next=55;break}return e.next=52,_s(a,f[h].callback);case 52:++h,e.next=49;break;case 55:if(!r){e.next=58;break}return e.next=58,_s(a,r);case 58:return i.length&&Promise.all(i).then((function(e){return a.runAsync(null,(function(){e.forEach((function(e){try{e(a)}catch(t){a.error(t)}}))}))})),e.abrupt("return",a);case 60:case"end":return e.stop()}}),e,this,[[17,37]])}))),ac.apply(this,arguments)}function ic(){return ic=(0,Lt.Z)(S().mark((function e(t,n,r){var a,i=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._running){e.next=5;break}return e.next=3,this._running;case 3:e.next=0;break;case 5:return a=function(){return i._running=null},(this._running=this.evaluate(t,n,r)).then(a,a),e.abrupt("return",this._running);case 8:case"end":return e.stop()}}),e,this)}))),ic.apply(this,arguments)}function oc(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}Js.prototype={StopPropagation:Qs,ADD:1,REM:2,MOD:4,ADD_REM:3,ADD_MOD:5,ALL:7,REFLOW:8,SOURCE:16,NO_SOURCE:32,NO_FIELDS:64,fork:function(e){return new Js(this.dataflow).init(this,e)},clone:function(){var e=this.fork(7);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(23)},addAll:function(){var e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||((e=new Js(this.dataflow).init(this)).add=e.source,e.rem=[]),e},init:function(e,t){var n=this;return n.stamp=e.stamp,n.encode=e.encode,!e.fields||64&t||(n.fields=e.fields),1&t?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),2&t?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),4&t?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),32&t?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter:function(e){this.dataflow.runAfter(e)},changed:function(e){var t=e||7;return 1&t&&this.add.length||2&t&&this.rem.length||4&t&&this.mod.length},reflow:function(e){if(e)return this.fork(7).reflow();var t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(4,tc(this,1))),this},clean:function(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies:function(e){var t=this.fields||(this.fields={});return nn(e)?e.forEach((function(e){return t[e]=!0})):t[e]=!0,this},modified:function(e,t){var n=this.fields;return!(!t&&!this.mod.length||!n)&&(arguments.length?nn(e)?e.some((function(e){return n[e]})):n[e]:!!n)},filter:function(e,t){var n=this;return 1&e&&(n.addF=nc(n.addF,t)),2&e&&(n.remF=nc(n.remF,t)),4&e&&(n.modF=nc(n.modF,t)),16&e&&(n.srcF=nc(n.srcF,t)),n},materialize:function(e){var t=this;return 1&(e=e||7)&&t.addF&&(t.add=ec(t.add,t.addF),t.addF=null),2&e&&t.remF&&(t.rem=ec(t.rem,t.remF),t.remF=null),4&e&&t.modF&&(t.mod=ec(t.mod,t.modF),t.modF=null),16&e&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit:function(e,t){var n=this,r=t;if(16&e)return Kn(n.source,n.srcF,r),n;1&e&&Kn(n.add,n.addF,r),2&e&&Kn(n.rem,n.remF,r),4&e&&Kn(n.mod,n.modF,r);var a=n.source;if(8&e&&a){var i=n.add.length+n.mod.length;i===a.length||Kn(a,i?tc(n,5):n.srcF,r)}return n}},Zn(rc,Js,{fork:function(e){var t=new Js(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&t.ADD&&this.visit(t.ADD,(function(e){return t.add.push(e)})),e&t.REM&&this.visit(t.REM,(function(e){return t.rem.push(e)})),e&t.MOD&&this.visit(t.MOD,(function(e){return t.mod.push(e)}))),t},changed:function(e){return this.changes&e},modified:function(e){var t=this,n=t.fields;return n&&t.changes&t.MOD?nn(e)?e.some((function(e){return n[e]})):n[e]:0},filter:function(){Ht("MultiPulse does not support filtering.")},materialize:function(){Ht("MultiPulse does not support materialization.")},visit:function(e,t){var n=this,r=n.pulses,a=r.length,i=0;if(e&n.SOURCE)for(;i<a;++i)r[i].visit(e,t);else for(;i<a;++i)r[i].stamp===n.stamp&&r[i].visit(e,t);return n}});var uc={skip:!1,force:!1};function sc(e){var t=[];return{clear:function(){return t=[]},size:function(){return t.length},peek:function(){return t[0]},push:function(n){return t.push(n),cc(t,0,t.length-1,e)},pop:function(){var n,r=t.pop();return t.length?(n=t[0],t[0]=r,function(e,t,n){var r,a=t,i=e.length,o=e[t],u=1+(t<<1);for(;u<i;)(r=u+1)<i&&n(e[u],e[r])>=0&&(u=r),e[t]=e[u],u=1+((t=u)<<1);e[t]=o,cc(e,a,t,n)}(t,0,e)):n=r,n}}}function cc(e,t,n,r){for(var a,i,o=e[n];n>t&&r(o,a=e[i=n-1>>1])<0;)e[n]=a,n=i;return e[n]=o}function lc(){this.logger(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tn,r=e||0;return{level:function(e){return arguments.length?(r=+e,this):r},error:function(){return r>=1&&n(t||"error","ERROR",arguments),this},warn:function(){return r>=2&&n(t||"warn","WARN",arguments),this},info:function(){return r>=3&&n(t||"log","INFO",arguments),this},debug:function(){return r>=4&&n(t||"log","DEBUG",arguments),this}}}()),this.logLevel(1),this._clock=0,this._rank=0,this._locale=Hu();try{this._loader=ws()}catch(e){}this._touched=ks(Yt),this._input={},this._pulse=null,this._heap=sc((function(e,t){return e.qrank-t.qrank})),this._postrun=[]}function fc(e){return function(){return this._log[e].apply(this,arguments)}}function hc(e,t){js.call(this,e,null,t)}lc.prototype={stamp:function(){return this._clock},loader:function(e){return arguments.length?(this._loader=e,this):this._loader},locale:function(e){return arguments.length?(this._locale=e,this):this._locale},logger:function(e){return arguments.length?(this._log=e,this):this._log},error:fc("error"),warn:fc("warn"),info:fc("info"),debug:fc("debug"),logLevel:fc("level"),cleanThreshold:1e4,add:function(e,t,n,r){var a,i=1;return e instanceof js?a=e:e&&e.prototype instanceof js?a=new e:kn(e)?a=new js(null,e):(i=0,a=new js(e,t)),this.rank(a),i&&(r=n,n=t),n&&this.connect(a,a.parameters(n,r)),this.touch(a),a},connect:function(e,t){for(var n=e.rank,r=t.length,a=0;a<r;++a)if(n<t[a].rank)return void this.rerank(e)},rank:function(e){e.rank=++this._rank},rerank:function(e){for(var t,n,r,a=[e];a.length;)if(this.rank(t=a.pop()),n=t._targets)for(r=n.length;--r>=0;)a.push(t=n[r]),t===e&&Ht("Cycle detected in dataflow graph.")},pulse:function(e,t,n){this.touch(e,n||uc);var r=new Js(this,this._clock+(this._pulse?0:1)),a=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,a),this},touch:function(e,t){var n=t||uc;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this},update:function(e,t,n){var r=n||uc;return(e.set(t)||r.force)&&this.touch(e,r),this},changeset:Zs,ingest:function(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))},parse:function(e,t){var n=this.locale();return xs(e,t,n.timeParse,n.utcParse)},preload:function(e,t,n){return Gs.apply(this,arguments)},request:function(e,t){return Hs.apply(this,arguments)},events:function(e,t,n,r){for(var a,i=this,o=qs(n,r),u=function(e){e.dataflow=i;try{o.receive(e)}catch(t){i.error(t)}finally{i.run()}},s=(a="string"===typeof e&&"undefined"!==typeof document?document.querySelectorAll(e):wn(e)).length,c=0;c<s;++c)a[c].addEventListener(t,u);return o},on:function(e,t,n,r,a){return(e instanceof js?$s:Ks)(this,e,t,n,r,a),this},evaluate:function(e,t,n){return ac.apply(this,arguments)},run:function(e,t,n){return this._pulse?oc(this):(this.evaluate(e,t,n),this)},runAsync:function(e,t,n){return ic.apply(this,arguments)},runAfter:function(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}},_enqueue:function(e,t){var n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))},_getPulse:function(e,t){var n=e.source,r=this._clock;return n&&nn(n)?new rc(this,r,n.map((function(e){return e.pulse})),t):this._input[e.id]||function(e,t){if(t&&t.stamp===e.stamp)return t;e=e.fork(),t&&t!==Qs&&(e.source=t.source);return e}(this._pulse,n&&n.pulse)}},Zn(hc,js,{run:function(e){var t,n=this;return e.stamp<this.stamp?e.StopPropagation:(this.skip()?this.skip(!1):t=this.evaluate(e),(t=t||e).then?t=t.then((function(e){return n.pulse=e})):t!==e.StopPropagation&&(this.pulse=t),t)},evaluate:function(e){var t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform:function(){}});var dc={};function pc(e){var t=vc(e);return t&&t.Definition||null}function vc(e){return e=e&&e.toLowerCase(),In(dc,e)?dc[e]:null}var gc=n(678);function mc(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function yc(e,t){var n;if(void 0===t){var r,a=(0,zt.Z)(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&(n<i||void 0===n&&i>=i)&&(n=i)}}catch(l){a.e(l)}finally{a.f()}}else{var o,u=-1,s=(0,zt.Z)(e);try{for(s.s();!(o=s.n()).done;){var c=o.value;null!=(c=t(c,++u,e))&&(n<c||void 0===n&&c>=c)&&(n=c)}}catch(l){s.e(l)}finally{s.f()}}return n}function bc(e,t){var n;if(void 0===t){var r,a=(0,zt.Z)(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&(n>i||void 0===n&&i>=i)&&(n=i)}}catch(l){a.e(l)}finally{a.f()}}else{var o,u=-1,s=(0,zt.Z)(e);try{for(s.s();!(o=s.n()).done;){var c=o.value;null!=(c=t(c,++u,e))&&(n>c||void 0===n&&c>=c)&&(n=c)}}catch(l){s.e(l)}finally{s.f()}}return n}function xc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mc;if(e===mc)return wc;if("function"!==typeof e)throw new TypeError("compare is not a function");return function(t,n){var r=e(t,n);return r||0===r?r:(0===e(n,n))-(0===e(t,t))}}function wc(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function kc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,a=arguments.length>4?arguments[4]:void 0;if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(a=void 0===a?wc:xc(a);r>n;){if(r-n>600){var i=r-n+1,o=t-n+1,u=Math.log(i),s=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*s*(i-s)/i)*(o-i/2<0?-1:1),l=Math.max(n,Math.floor(t-o*s/i+c)),f=Math.min(r,Math.floor(t+(i-o)*s/i+c));kc(e,t,l,f,a)}var h=e[t],d=n,p=r;for(_c(e,n,t),a(e[r],h)>0&&_c(e,n,r);d<p;){for(_c(e,d,p),++d,--p;a(e[d],h)<0;)++d;for(;a(e[p],h)>0;)--p}0===a(e[n],h)?_c(e,n,p):_c(e,++p,r),p<=t&&(n=p+1),t<=p&&(r=p-1)}return e}function _c(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}var Sc=_.mark(Ec);function Cc(e){return null===e?NaN:+e}function Ec(e,t){var n,r,a,i,o,u,s;return _.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(void 0!==t){c.next=21;break}n=(0,zt.Z)(e),c.prev=2,n.s();case 4:if((r=n.n()).done){c.next=11;break}if(!(null!=(a=r.value)&&(a=+a)>=a)){c.next=9;break}return c.next=9,a;case 9:c.next=4;break;case 11:c.next=16;break;case 13:c.prev=13,c.t0=c.catch(2),n.e(c.t0);case 16:return c.prev=16,n.f(),c.finish(16);case 19:c.next=40;break;case 21:i=-1,o=(0,zt.Z)(e),c.prev=23,o.s();case 25:if((u=o.n()).done){c.next=32;break}if(s=u.value,!(null!=(s=t(s,++i,e))&&(s=+s)>=s)){c.next=30;break}return c.next=30,s;case 30:c.next=25;break;case 32:c.next=37;break;case 34:c.prev=34,c.t1=c.catch(23),o.e(c.t1);case 37:return c.prev=37,o.f(),c.finish(37);case 40:case"end":return c.stop()}}),Sc,null,[[2,13,16,19],[23,34,37,40]])}function Ac(e,t,n){if((r=(e=Float64Array.from(Ec(e,n))).length)&&!isNaN(t=+t)){if(t<=0||r<2)return bc(e);if(t>=1)return yc(e);var r,a=(r-1)*t,i=Math.floor(a),o=yc(kc(e,i).subarray(0,i+1));return o+(bc(e.subarray(i+1))-o)*(a-i)}}function Nc(e,t){var n=function(e,t){var n,r=0,a=0,i=0;if(void 0===t){var o,u=(0,zt.Z)(e);try{for(u.s();!(o=u.n()).done;){var s=o.value;null!=s&&(s=+s)>=s&&(i+=(n=s-a)*(s-(a+=n/++r)))}}catch(d){u.e(d)}finally{u.f()}}else{var c,l=-1,f=(0,zt.Z)(e);try{for(f.s();!(c=f.n()).done;){var h=c.value;null!=(h=t(h,++l,e))&&(h=+h)>=h&&(i+=(n=h-a)*(h-(a+=n/++r)))}}catch(d){f.e(d)}finally{f.f()}}if(r>1)return i/(r-1)}(e,t);return n?Math.sqrt(n):n}function Tc(e,t){return Ac(e,.5,t)}var Mc=S().mark(Dc);function Dc(e,t){var n,r,a,i,o,u,s;return S().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(null!=t){c.next=21;break}n=(0,zt.Z)(e),c.prev=2,n.s();case 4:if((r=n.n()).done){c.next=11;break}if(!(null!=(a=r.value)&&""!==a&&(a=+a)>=a)){c.next=9;break}return c.next=9,a;case 9:c.next=4;break;case 11:c.next=16;break;case 13:c.prev=13,c.t0=c.catch(2),n.e(c.t0);case 16:return c.prev=16,n.f(),c.finish(16);case 19:c.next=41;break;case 21:i=-1,o=(0,zt.Z)(e),c.prev=23,o.s();case 25:if((u=o.n()).done){c.next=33;break}if(s=u.value,!(null!=(s=t(s,++i,e))&&""!==s&&(s=+s)>=s)){c.next=31;break}return c.next=31,s;case 31:c.next=25;break;case 33:c.next=38;break;case 35:c.prev=35,c.t1=c.catch(23),o.e(c.t1);case 38:return c.prev=38,o.f(),c.finish(38);case 41:case"end":return c.stop()}}),Mc,null,[[2,13,16,19],[23,35,38,41]])}function Fc(e,t,n){var r=Float64Array.from(Dc(e,n));return r.sort(mc),t.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Cc;if((r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,i=Math.floor(a),o=+n(e[i],i,e);return o+(+n(e[i+1],i+1,e)-o)*(a-i)}}(r,e)}))}function Ic(e,t){return Fc(e,[.25,.5,.75],t)}function Oc(e,t){var n=e.length,r=Nc(e,t),a=Ic(e,t),i=(a[2]-a[0])/1.34;return 1.06*(Math.min(r,i)||r||Math.abs(a[0])||1)*Math.pow(n,-.2)}var Rc=Math.random;function Zc(e,t,n,r){r=r||function(e){return e};for(var a,i=e.length,o=new Float64Array(i),u=0,s=1,c=r(e[0]),l=c,f=c+t;s<i;++s){if((a=r(e[s]))>=f){for(l=(c+l)/2;u<s;++u)o[u]=l;f=a+t,c=a}l=a}for(l=(c+l)/2;u<s;++u)o[u]=l;return n?function(e,t){var n,r,a=e.length,i=0,o=1;for(;e[i]===e[o];)++o;for(;o<a;){for(n=o+1;e[o]===e[n];)++n;if(e[o]-e[o-1]<t){for(r=o+(i+n-o-o>>1);r<o;)e[r++]=e[o];for(;r>o;)e[r--]=e[i]}i=o,o=n}return e}(o,t+t/4):o}var Bc=Math.sqrt(2*Math.PI),zc=Math.SQRT2,Lc=NaN;function Pc(e,t){e=e||0,t=null==t?1:t;var n,r,a=0,i=0;if(Lc===Lc)a=Lc,Lc=NaN;else{do{n=(a=2*Rc()-1)*a+(i=2*Rc()-1)*i}while(0===n||n>1);a*=r=Math.sqrt(-2*Math.log(n)/n),Lc=i*r}return e+a*t}function jc(e,t,n){var r=(e-(t||0))/(n=null==n?1:n);return Math.exp(-.5*r*r)/(n*Bc)}function Uc(e,t,n){var r,a=(e-(t=t||0))/(n=null==n?1:n),i=Math.abs(a);if(i>37)r=0;else{var o=Math.exp(-i*i/2);i<7.07106781186547?(r=o*((((((.0352624965998911*i+.700383064443688)*i+6.37396220353165)*i+33.912866078383)*i+112.079291497871)*i+221.213596169931)*i+220.206867912376),r/=((((((.0883883476483184*i+1.75566716318264)*i+16.064177579207)*i+86.7807322029461)*i+296.564248779674)*i+637.333633378831)*i+793.826512519948)*i+440.413735824752):r=o/(i+1/(i+2/(i+3/(i+4/(i+.65)))))/2.506628274631}return a>0?1-r:r}function Wc(e,t,n){return e<0||e>1?NaN:(t||0)+(null==n?1:n)*zc*function(e){var t,n=-Math.log((1-e)*(1+e));t=n<6.25?1.6536545626831027+(t=.24015818242558962+(t=(t=(t=.00018673420803405714+(t=(t=(t=4.2347877827932404e-7+(t=(t=(t=1.0512122733215323e-9+(t=(t=(t=26335093153082323e-28+(t=(t=(t=6637638134358324e-30+(t=20972767875968562e-33+(t=(t=11157877678025181e-33+(t=128584807152564e-32+(t=(t=-364441206401782e-35)*(n-=3.125)-16850591381820166e-35)*n)*n)*n-1333171662854621e-31)*n)*n)*n-4054566272975207e-29)*n-8151934197605472e-29)*n)*n-12975133253453532e-27)*n-5415412054294628e-26)*n)*n-4.112633980346984e-9)*n-2.9070369957882005e-8)*n)*n-13654692000834679e-22)*n-13882523362786469e-21)*n)*n-.000740702534166267)*n-.006033670871430149)*n)*n:n<16?3.0838856104922208+(t=1.0052589676941592+(t=.005370914553590064+(t=(t=.002491442096107851+(t=(t=.0009532893797373805+(t=(t=24031110387097894e-21+(t=6828485145957318e-20+(t=(t=12475304481671779e-21+(t=29234449089955446e-22+(t=(t=15027403968909828e-22+(t=1.8239629214389228e-8+(t=(t=9.075656193888539e-8+(t=2.2137376921775787e-9)*(n=Math.sqrt(n)-3.25))*n-2.7517406297064545e-7)*n)*n)*n-4013867526981546e-21)*n)*n)*n-47318229009055734e-21)*n)*n)*n-.0003550375203628475)*n)*n-.0016882755560235047)*n)*n-.003751208507569241)*n)*n)*n:Number.isFinite(n)?4.849906401408584+(t=1.0103004648645344+(t=(t=(t=7599527703001776e-20+(t=(t=4526062597223154e-21+(t=(t=2.2900482228026655e-7+(t=(t=2.914795345090108e-8+(t=(t=7.61570120807834e-9+(t=(t=1.5076572693500548e-9+(t=(t=-27109920616438573e-27)*(n=Math.sqrt(n)-5)-2.555641816996525e-10)*n)*n-3.789465440126737e-9)*n)*n-1.496002662714924e-8)*n)*n-6.771199775845234e-8)*n)*n-9.9298272942317e-7)*n)*n-1968177810553167e-20)*n)*n-.00021503011930044477)*n-.00013871931833623122)*n)*n:1/0;return t*e}(2*e-1)}function Vc(e,t){var n,r,a={mean:function(e){return arguments.length?(n=e||0,a):n},stdev:function(e){return arguments.length?(r=null==e?1:e,a):r},sample:function(){return Pc(n,r)},pdf:function(e){return jc(e,n,r)},cdf:function(e){return Uc(e,n,r)},icdf:function(e){return Wc(e,n,r)}};return a.mean(e).stdev(t)}function qc(e,t){var n=Vc(),r=0,a={data:function(n){return arguments.length?(e=n,r=n?n.length:0,a.bandwidth(t)):e},bandwidth:function(n){return arguments.length?(!(t=n)&&e&&(t=Oc(e)),a):t},sample:function(){return e[~~(Rc()*r)]+t*n.sample()},pdf:function(a){for(var i=0,o=0;o<r;++o)i+=n.pdf((a-e[o])/t);return i/t/r},cdf:function(a){for(var i=0,o=0;o<r;++o)i+=n.cdf((a-e[o])/t);return i/r},icdf:function(){throw Error("KDE icdf not supported.")}};return a.data(e)}function Hc(e,t){return e=e||0,t=null==t?1:t,Math.exp(e+Pc()*t)}function Gc(e,t,n){if(e<=0)return 0;t=t||0,n=null==n?1:n;var r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*Bc*e)}function Xc(e,t,n){return Uc(Math.log(e),t,n)}function Yc(e,t,n){return Math.exp(Wc(e,t,n))}function Kc(e,t){return null==t&&(t=null==e?1:e,e=0),e+(t-e)*Rc()}function $c(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=t&&e<=n?1/(n-t):0}function Qc(e,t,n){return null==n&&(n=null==t?1:t,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function Jc(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function el(e,t,n,r){var a=r-e*e,i=Math.abs(a)<1e-24?0:(n-e*t)/a;return[t-i*e,i]}function tl(e,t,n,r){e=e.filter((function(e){var r=t(e),a=n(e);return null!=r&&(r=+r)>=r&&null!=a&&(a=+a)>=a})),r&&e.sort((function(e,n){return t(e)-t(n)}));var a,i,o,u,s=e.length,c=new Float64Array(s),l=new Float64Array(s),f=0,h=0,d=0,p=(0,zt.Z)(e);try{for(p.s();!(u=p.n()).done;)o=u.value,c[f]=a=+t(o),l[f]=i=+n(o),h+=(a-h)/++f,d+=(i-d)/f}catch(v){p.e(v)}finally{p.f()}for(f=0;f<s;++f)c[f]-=h,l[f]-=d;return[c,l,h,d]}function nl(e,t,n,r){var a,i,o,u=-1,s=(0,zt.Z)(e);try{for(s.s();!(o=s.n()).done;){var c=o.value;a=t(c),i=n(c),null!=a&&(a=+a)>=a&&null!=i&&(i=+i)>=i&&r(a,i,++u)}}catch(l){s.e(l)}finally{s.f()}}function rl(e,t,n,r,a){var i=0,o=0;return nl(e,t,n,(function(e,t){var n=t-a(e),u=t-r;i+=n*n,o+=u*u})),1-i/o}function al(e,t,n){var r=0,a=0,i=0,o=0,u=0;nl(e,t,n,(function(e,t){++u,r+=(e-r)/u,a+=(t-a)/u,i+=(e*t-i)/u,o+=(e*e-o)/u}));var s=el(r,a,i,o),c=function(e){return s[0]+s[1]*e};return{coef:s,predict:c,rSquared:rl(e,t,n,a,c)}}function il(e,t,n){var r,a,i,o,u=tl(e,t,n),s=(0,gc.Z)(u,4),c=s[0],l=s[1],f=s[2],h=s[3],d=c.length,p=0,v=0,g=0,m=0,y=0;for(r=0;r<d;)a=c[r],i=l[r++],p+=((o=a*a)-p)/r,v+=(o*a-v)/r,g+=(o*o-g)/r,m+=(a*i-m)/r,y+=(o*i-y)/r;var b=g-p*p,x=p*b-v*v,w=(y*p-m*v)/x,k=(m*b-y*v)/x,_=-w*p,S=function(e){return w*(e-=f)*e+k*e+_+h};return{coef:[_-k*f+w*f*f+h,k-2*w*f,w],predict:S,rSquared:rl(e,t,n,h,S)}}function ol(e,t,n,r){var a,i,o,u,s=Array(e);for(a=0;a<e;++a)s[a]=0;for(a=e-1;a>=0;--a)for(o=t[a],u=1,s[a]+=o,i=1;i<=a;++i)u*=(a+1-i)/i,s[a-i]+=o*Math.pow(n,i)*u;return s[0]+=r,s}function ul(e){return(e=1-e*e*e)*e*e}function sl(e,t,n){var r=e[t],a=n[0],i=n[1]+1;if(!(i>=e.length))for(;t>a&&e[i]-r<=r-e[a];)n[0]=++a,n[1]=i,++i}var cl=.5*Math.PI/180;function ll(e,t,n,r){n=n||25,r=Math.max(n,r||200);var a=function(t){return[t,e(t)]},i=t[0],o=t[1],u=o-i,s=u/r,c=[a(i)],l=[];if(n===r){for(var f=1;f<r;++f)c.push(a(i+f/n*u));return c.push(a(o)),c}l.push(a(o));for(var h=n;--h>0;)l.push(a(i+h/n*u));for(var d=c[0],p=l[l.length-1],v=1/u,g=function(e,t){for(var n=e,r=e,a=t.length,i=0;i<a;++i){var o=t[i][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}(d[1],l);p;){var m=a((d[0]+p[0])/2);m[0]-d[0]>=s&&fl(d,m,p,v,g)>cl?l.push(m):(d=p,c.push(p),l.pop()),p=l[l.length-1]}return c}function fl(e,t,n,r,a){var i=Math.atan2(a*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(a*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(i-o)}function hl(e,t){var n;if(void 0===t){var r,a=(0,zt.Z)(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&(n<i||void 0===n&&i>=i)&&(n=i)}}catch(l){a.e(l)}finally{a.f()}}else{var o,u=-1,s=(0,zt.Z)(e);try{for(s.s();!(o=s.n()).done;){var c=o.value;null!=(c=t(c,++u,e))&&(n<c||void 0===n&&c>=c)&&(n=c)}}catch(l){s.e(l)}finally{s.f()}}return n}function dl(e,t){var n;if(void 0===t){var r,a=(0,zt.Z)(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&(n>i||void 0===n&&i>=i)&&(n=i)}}catch(l){a.e(l)}finally{a.f()}}else{var o,u=-1,s=(0,zt.Z)(e);try{for(s.s();!(o=s.n()).done;){var c=o.value;null!=(c=t(c,++u,e))&&(n>c||void 0===n&&c>=c)&&(n=c)}}catch(l){s.e(l)}finally{s.f()}}return n}function pl(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function vl(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:pl;r>n;){if(r-n>600){var i=r-n+1,o=t-n+1,u=Math.log(i),s=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*s*(i-s)/i)*(o-i/2<0?-1:1),l=Math.max(n,Math.floor(t-o*s/i+c)),f=Math.min(r,Math.floor(t+(i-o)*s/i+c));vl(e,t,l,f,a)}var h=e[t],d=n,p=r;for(gl(e,n,t),a(e[r],h)>0&&gl(e,n,r);d<p;){for(gl(e,d,p),++d,--p;a(e[d],h)<0;)++d;for(;a(e[p],h)>0;)--p}0===a(e[n],h)?gl(e,n,p):gl(e,++p,r),p<=t&&(n=p+1),t<=p&&(r=p-1)}return e}function gl(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}var ml=S().mark(bl);function yl(e){return null===e?NaN:+e}function bl(e,t){var n,r,a,i,o,u,s;return S().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(void 0!==t){c.next=21;break}n=(0,zt.Z)(e),c.prev=2,n.s();case 4:if((r=n.n()).done){c.next=11;break}if(!(null!=(a=r.value)&&(a=+a)>=a)){c.next=9;break}return c.next=9,a;case 9:c.next=4;break;case 11:c.next=16;break;case 13:c.prev=13,c.t0=c.catch(2),n.e(c.t0);case 16:return c.prev=16,n.f(),c.finish(16);case 19:c.next=40;break;case 21:i=-1,o=(0,zt.Z)(e),c.prev=23,o.s();case 25:if((u=o.n()).done){c.next=32;break}if(s=u.value,!(null!=(s=t(s,++i,e))&&(s=+s)>=s)){c.next=30;break}return c.next=30,s;case 30:c.next=25;break;case 32:c.next=37;break;case 34:c.prev=34,c.t1=c.catch(23),o.e(c.t1);case 37:return c.prev=37,o.f(),c.finish(37);case 40:case"end":return c.stop()}}),ml,null,[[2,13,16,19],[23,34,37,40]])}function xl(e,t,n){if(r=(e=Float64Array.from(bl(e,n))).length){if((t=+t)<=0||r<2)return dl(e);if(t>=1)return hl(e);var r,a=(r-1)*t,i=Math.floor(a),o=hl(vl(e,i).subarray(0,i+1));return o+(dl(e.subarray(i+1))-o)*(a-i)}}function wl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yl;if(r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,i=Math.floor(a),o=+n(e[i],i,e),u=+n(e[i+1],i+1,e);return o+(u-o)*(a-i)}}function kl(e,t){return xl(e,.5,t)}function _l(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),i=new Array(a);++r<a;)i[r]=e+r*n;return i}function Sl(e){var t=e,n=e;function r(e,t,r,a){for(null==r&&(r=0),null==a&&(a=e.length);r<a;){var i=r+a>>>1;n(e[i],t)<0?r=i+1:a=i}return r}return 1===e.length&&(t=function(t,n){return e(t)-n},n=function(e){return function(t,n){return pl(e(t),n)}}(e)),{left:r,center:function(e,n,a,i){null==a&&(a=0),null==i&&(i=e.length);var o=r(e,n,a,i-1);return o>a&&t(e[o-1],n)>-t(e[o],n)?o-1:o},right:function(e,t,r,a){for(null==r&&(r=0),null==a&&(a=e.length);r<a;){var i=r+a>>>1;n(e[i],t)>0?a=i:r=i+1}return r}}}function Cl(e){return e&&e.length?1===e.length?e[0]:(t=e,function(e){for(var n=t.length,r=1,a=String(t[0](e));r<n;++r)a+="|"+t[r](e);return a}):function(){return""};var t}function El(e,t,n){return n||e+(t?"_"+t:"")}var Al=function(){},Nl={init:Al,add:Al,rem:Al,idx:0},Tl={values:{init:function(e){return e.cell.store=!0},value:function(e){return e.cell.data.values()},idx:-1},count:{value:function(e){return e.cell.num}},__count__:{value:function(e){return e.missing+e.valid}},missing:{value:function(e){return e.missing}},valid:{value:function(e){return e.valid}},sum:{init:function(e){return e.sum=0},value:function(e){return e.sum},add:function(e,t){return e.sum+=+t},rem:function(e,t){return e.sum-=t}},product:{init:function(e){return e.product=1},value:function(e){return e.valid?e.product:void 0},add:function(e,t){return e.product*=t},rem:function(e,t){return e.product/=t}},mean:{init:function(e){return e.mean=0},value:function(e){return e.valid?e.mean:void 0},add:function(e,t){return e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:function(e,t){return e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}},average:{value:function(e){return e.valid?e.mean:void 0},req:["mean"],idx:1},variance:{init:function(e){return e.dev=0},value:function(e){return e.valid>1?e.dev/(e.valid-1):void 0},add:function(e,t){return e.dev+=e.mean_d*(t-e.mean)},rem:function(e,t){return e.dev-=e.mean_d*(t-e.mean)},req:["mean"],idx:1},variancep:{value:function(e){return e.valid>1?e.dev/e.valid:void 0},req:["variance"],idx:2},stdev:{value:function(e){return e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0},req:["variance"],idx:2},stdevp:{value:function(e){return e.valid>1?Math.sqrt(e.dev/e.valid):void 0},req:["variance"],idx:2},stderr:{value:function(e){return e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0},req:["variance"],idx:2},distinct:{value:function(e){return e.cell.data.distinct(e.get)},req:["values"],idx:3},ci0:{value:function(e){return e.cell.data.ci0(e.get)},req:["values"],idx:3},ci1:{value:function(e){return e.cell.data.ci1(e.get)},req:["values"],idx:3},median:{value:function(e){return e.cell.data.q2(e.get)},req:["values"],idx:3},q1:{value:function(e){return e.cell.data.q1(e.get)},req:["values"],idx:3},q3:{value:function(e){return e.cell.data.q3(e.get)},req:["values"],idx:3},min:{init:function(e){return e.min=void 0},value:function(e){return e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min},add:function(e,t){(t<e.min||void 0===e.min)&&(e.min=t)},rem:function(e,t){t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:function(e){return e.max=void 0},value:function(e){return e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max},add:function(e,t){(t>e.max||void 0===e.max)&&(e.max=t)},rem:function(e,t){t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:function(e){return e.argmin=void 0},value:function(e){return e.argmin||e.cell.data.argmin(e.get)},add:function(e,t,n){t<e.min&&(e.argmin=n)},rem:function(e,t){t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:function(e){return e.argmax=void 0},value:function(e){return e.argmax||e.cell.data.argmax(e.get)},add:function(e,t,n){t>e.max&&(e.argmax=n)},rem:function(e,t){t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3}},Ml=Object.keys(Tl);function Dl(e,t){return Tl[e](t)}function Fl(e,t){return e.idx-t.idx}function Il(){var e=this;this.valid=0,this.missing=0,this._ops.forEach((function(t){return t.init(e)}))}function Ol(e,t){var n=this;null!=e&&""!==e?e===e&&(++this.valid,this._ops.forEach((function(r){return r.add(n,e,t)}))):++this.missing}function Rl(e,t){var n=this;null!=e&&""!==e?e===e&&(--this.valid,this._ops.forEach((function(r){return r.rem(n,e,t)}))):--this.missing}function Zl(e){var t=this;return this._out.forEach((function(n){return e[n.out]=n.value(t)})),e}function Bl(e,t){var n=t||Kt,r=function(e){var t={};return e.forEach((function(e){return t[e.name]=e})),e.forEach((function e(n){n.req&&n.req.forEach((function(n){t[n]||e(t[n]=Tl[n]())}))})),Object.values(t).sort(Fl)}(e),a=e.slice().sort(Fl);function i(e){this._ops=r,this._out=a,this.cell=e,this.init()}return i.prototype.init=Il,i.prototype.add=Ol,i.prototype.rem=Rl,i.prototype.set=Zl,i.prototype.get=n,i.fields=e.map((function(e){return e.out})),i}function zl(e){this._key=e?Xt(e):Ns,this.reset()}Ml.forEach((function(e){Tl[e]=function(e,t){return function(n){return Mn({name:e,out:n||e},Nl,t)}}(e,Tl[e])}));var Ll=zl.prototype;function Pl(e){hc.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Ll.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},Ll.add=function(e){this._add.push(e)},Ll.rem=function(e){this._rem.push(e)},Ll.values=function(){if(this._get=null,0===this._rem.length)return this._add;var e,t,n,r=this._add,a=this._rem,i=this._key,o=r.length,u=a.length,s=Array(o-u),c={};for(e=0;e<u;++e)c[i(a[e])]=1;for(e=0,t=0;e<o;++e)c[i(n=r[e])]?c[i(n)]=0:s[t++]=n;return this._rem=[],this._add=s},Ll.distinct=function(e){for(var t,n=this.values(),r={},a=n.length,i=0;--a>=0;)In(r,t=e(n[a])+"")||(r[t]=1,++i);return i},Ll.extent=function(e){if(this._get!==e||!this._ext){var t=this.values(),n=function(e,t){var n,r,a,i,o,u=e.length,s=-1;if(null==t){for(;++s<u;)if(null!=(r=e[s])&&r>=r){n=a=r;break}if(s===u)return[-1,-1];for(i=o=s;++s<u;)null!=(r=e[s])&&(n>r&&(n=r,i=s),a<r&&(a=r,o=s))}else{for(;++s<u;)if(null!=(r=t(e[s],s,e))&&r>=r){n=a=r;break}if(s===u)return[-1,-1];for(i=o=s;++s<u;)null!=(r=t(e[s],s,e))&&(n>r&&(n=r,i=s),a<r&&(a=r,o=s))}return[i,o]}(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},Ll.argmin=function(e){return this.extent(e)[0]||{}},Ll.argmax=function(e){return this.extent(e)[1]||{}},Ll.min=function(e){var t=this.extent(e)[0];return null!=t?e(t):void 0},Ll.max=function(e){var t=this.extent(e)[1];return null!=t?e(t):void 0},Ll.quartile=function(e){return this._get===e&&this._q||(this._q=Ic(this.values(),e),this._get=e),this._q},Ll.q1=function(e){return this.quartile(e)[0]},Ll.q2=function(e){return this.quartile(e)[1]},Ll.q3=function(e){return this.quartile(e)[2]},Ll.ci=function(e){return this._get===e&&this._ci||(this._ci=function(e,t,n,r){if(!e.length)return[void 0,void 0];var a,i,o,u,s=Float64Array.from(Dc(e,r)),c=s.length,l=t;for(o=0,u=Array(l);o<l;++o){for(a=0,i=0;i<c;++i)a+=s[~~(Rc()*c)];u[o]=a/c}return u.sort(mc),[Ac(u,n/2),Ac(u,1-n/2)]}(this.values(),1e3,.05,e),this._get=e),this._ci},Ll.ci0=function(e){return this.ci(e)[0]},Ll.ci1=function(e){return this.ci(e)[1]},Pl.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Ml},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]},Zn(Pl,hc,{transform:function(e,t){var n=this,r=this,a=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return r.stamp=a.stamp,r.value&&(i||t.modified(r._inputs,!0))?(r._prev=r.value,r.value=i?r.init(e):{},t.visit(t.SOURCE,(function(e){return r.add(e)}))):(r.value=r.value||r.init(e),t.visit(t.REM,(function(e){return r.rem(e)})),t.visit(t.ADD,(function(e){return r.add(e)}))),a.modifies(r._outputs),r._drop=!1!==e.drop,e.cross&&r._dims.length>1&&(r._drop=!1,r.cross()),t.clean()&&r._drop&&a.clean(!0).runAfter((function(){return n.clean()})),r.changes(a)},cross:function(){var e=this,t=e.value,n=e._dnames,r=n.map((function(){return{}})),a=n.length;function i(e){var t,i,o,u;for(t in e)for(o=e[t].tuple,i=0;i<a;++i)r[i][u=o[n[i]]]=u}i(e._prev),i(t),function i(o,u,s){var c=n[s],l=r[s++];for(var f in l){var h=o?o+"|"+f:f;u[c]=l[f],s<a?i(h,u,s):t[h]||e.cell(h,u)}}("",{},0)},init:function(e){var t=this._inputs=[],n=this._outputs=[],r={};function a(e){for(var n,a=wn(Ut(e)),i=a.length,o=0;o<i;++o)r[n=a[o]]||(r[n]=1,t.push(n))}this._dims=wn(e.groupby),this._dnames=this._dims.map((function(e){var t=jt(e);return a(e),n.push(t),t})),this.cellkey=e.key?e.key:Cl(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var i,o,u,s,c,l,f=e.fields||[null],h=e.ops||["count"],d=e.as||[],p=f.length,v={};for(p!==h.length&&Ht("Unmatched number of fields and aggregate ops."),l=0;l<p;++l)i=f[l],o=h[l],null==i&&"count"!==o&&Ht("Null aggregate field specified."),c=El(o,s=jt(i),d[l]),n.push(c),"count"!==o?((u=v[s])||(a(i),(u=v[s]=[]).field=i,this._measures.push(u)),"count"!==o&&(this._countOnly=!1),u.push(Dl(o,c))):this._counts.push(c);return this._measures=this._measures.map((function(e){return Bl(e,e.field)})),{}},cellkey:Cl(),cell:function(e,t){var n=this.value[e];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell:function(e,t){var n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){var r=this._measures,a=r.length;n.agg=Array(a);for(var i=0;i<a;++i)n.agg[i]=new r[i](n)}return n.store&&(n.data=new zl),n},newtuple:function(e,t){for(var n=this._dnames,r=this._dims,a=r.length,i={},o=0;o<a;++o)i[n[o]]=r[o](e);return t?Is(t.tuple,i):Ms(i)},clean:function(){var e=this.value;for(var t in e)0===e[t].num&&delete e[t]},add:function(e){var t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,!this._countOnly){n.store&&n.data.add(e);for(var r=n.agg,a=0,i=r.length;a<i;++a)r[a].add(r[a].get(e),e)}},rem:function(e){var t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,!this._countOnly){n.store&&n.data.rem(e);for(var r=n.agg,a=0,i=r.length;a<i;++a)r[a].rem(r[a].get(e),e)}},celltuple:function(e){var t=e.tuple,n=this._counts;e.store&&e.data.values();for(var r=0,a=n.length;r<a;++r)t[n[r]]=e.num;if(!this._countOnly)for(var i=e.agg,o=0,u=i.length;o<u;++o)i[o].set(t);return t},changes:function(e){var t,n,r,a,i=this._adds,o=this._mods,u=this._prev,s=this._drop,c=e.add,l=e.rem,f=e.mod;if(u)for(n in u)t=u[n],s&&!t.num||l.push(t.tuple);for(r=0,a=this._alen;r<a;++r)c.push(this.celltuple(i[r])),i[r]=null;for(r=0,a=this._mlen;r<a;++r)(0===(t=o[r]).num&&s?l:f).push(this.celltuple(t)),o[r]=null;return this._alen=this._mlen=0,this._prev=null,e}});function jl(e){hc.call(this,null,e)}function Ul(e,t,n){var r=e,a=t||[],i=n||[],o={},u=0;return{add:function(e){return i.push(e)},remove:function(e){return o[r(e)]=++u},size:function(){return a.length},data:function(e,t){return u&&(a=a.filter((function(e){return!o[r(e)]})),o={},u=0),t&&e&&a.sort(e),i.length&&(a=e?function(e,t,n,r){var a=t.length,i=n.length;if(!i)return t;if(!a)return n;for(var o=r||new t.constructor(a+i),u=0,s=0,c=0;u<a&&s<i;++c)o[c]=e(t[u],n[s])>0?n[s++]:t[u++];for(;u<a;++u,++c)o[c]=t[u];for(;s<i;++s,++c)o[c]=n[s];return o}(e,a,i.sort(e)):a.concat(i),i=[]),a}}}function Wl(e){hc.call(this,[],e)}function Vl(e){js.call(this,null,ql,e)}function ql(e){return this.value&&!e.modified()?this.value:_n(e.fields,e.orders)}function Hl(e){hc.call(this,null,e)}function Gl(e){hc.call(this,null,e)}jl.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]},Zn(jl,hc,{transform:function(e,t){var n,r=!1!==e.interval,a=this._bins(e),i=a.start,o=a.step,u=e.as||["bin0","bin1"],s=u[0],c=u[1];return n=e.modified()?(t=t.reflow(!0)).SOURCE:t.modified(Ut(e.field))?t.ADD_MOD:t.ADD,t.visit(n,r?function(e){var t=a(e);e[s]=t,e[c]=null==t?null:i+o*(1+(t-i)/o)}:function(e){return e[s]=a(e)}),t.modifies(r?u:s)},_bins:function(e){if(this.value&&!e.modified())return this.value;var t,n,r=e.field,a=function(e){var t,n,r,a,i,o,u=e.maxbins||20,s=e.base||10,c=Math.log(s),l=e.divide||[5,2],f=e.extent[0],h=e.extent[1],d=e.span||h-f||Math.abs(f)||1;if(e.step)t=e.step;else if(e.steps){for(a=d/u,i=0,o=e.steps.length;i<o&&e.steps[i]<a;++i);t=e.steps[Math.max(0,i-1)]}else{for(n=Math.ceil(Math.log(u)/c),r=e.minstep||0,t=Math.max(r,Math.pow(s,Math.round(Math.log(d)/c)-n));Math.ceil(d/t)>u;)t*=s;for(i=0,o=l.length;i<o;++i)(a=t/l[i])>=r&&d/a<=u&&(t=a)}var p=(a=Math.log(t))>=0?0:1+~~(-a/c),v=Math.pow(s,-p-1);return(e.nice||void 0===e.nice)&&(f=f<(a=Math.floor(f/t+v)*t)?a-t:a,h=Math.ceil(h/t)*t),{start:f,stop:h===f?f+t:h,step:t}}(e),i=a.step,o=a.start,u=o+Math.ceil((a.stop-o)/i)*i;null!=(t=e.anchor)&&(n=t-(o+i*Math.floor((t-o)/i)),o+=n,u+=n);var s=function(e){var t=cn(r(e));return null==t?null:t<o?-1/0:t>u?1/0:(t=Math.max(o,Math.min(t,u-i)),o+i*Math.floor(1e-14+(t-o)/i))};return s.start=o,s.stop=a.stop,s.step=i,this.value=Pt(s,Ut(r),e.name||"bin_"+jt(r))}}),Wl.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},Zn(Wl,hc,{transform:function(e,t){var n=t.fork(t.ALL),r=Ul(Ns,this.value,n.materialize(n.ADD).add),a=e.sort,i=t.changed()||a&&(e.modified("sort")||t.modified(a.fields));return n.visit(n.REM,r.remove),this.modified(i),this.value=n.source=r.data(Os(a),i),t.source&&t.source.root&&(this.value.root=t.source.root),n}}),Zn(Vl,js),Hl.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]},Zn(Hl,hc,{transform:function(e,t){var n=function(t){return function(n){for(var r,a=function(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(n)}(u(n),e.case,i)||[],s=0,c=a.length;s<c;++s)o.test(r=a[s])||t(r)}},r=this._parameterCheck(e,t),a=this._counts,i=this._match,o=this._stop,u=e.field,s=e.as||["text","count"],c=n((function(e){return a[e]=1+(a[e]||0)})),l=n((function(e){return a[e]-=1}));return r?t.visit(t.SOURCE,c):(t.visit(t.ADD,c),t.visit(t.REM,l)),this._finish(t,s)},_parameterCheck:function(e,t){var n=!1;return!e.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),!e.modified("pattern")&&this._match||(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish:function(e,t){var n,r,a,i=this._counts,o=this._tuples||(this._tuples={}),u=t[0],s=t[1],c=e.fork(e.NO_SOURCE|e.NO_FIELDS);for(n in i)r=o[n],a=i[n]||0,!r&&a?(o[n]=r=Ms({}),r[u]=n,r[s]=a,c.add.push(r)):0===a?(r&&c.rem.push(r),i[n]=null,o[n]=null):r[s]!==a&&(r[s]=a,c.mod.push(r));return c.modifies(t)}}),Gl.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},Zn(Gl,hc,{transform:function(e,t){var n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],a=r[0],i=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter"),u=this.value;return o?(u&&(n.rem=u),u=t.materialize(t.SOURCE).source,n.add=this.value=function(e,t,n,r){for(var a,i,o=[],u={},s=e.length,c=0;c<s;++c)for(u[t]=i=e[c],a=0;a<s;++a)u[n]=e[a],r(u)&&(o.push(Ms(u)),(u={})[t]=i);return o}(u,a,i,e.filter||Jt)):n.mod=u,n.source=this.value,n.modifies(r)}});var Xl={kde:qc,mixture:function(e,t){var n,r=0;function a(e){var t,n=[],a=0;for(t=0;t<r;++t)a+=n[t]=null==e[t]?1:+e[t];for(t=0;t<r;++t)n[t]/=a;return n}var i={weights:function(e){return arguments.length?(n=a(t=e||[]),i):t},distributions:function(n){return arguments.length?(n?(r=n.length,e=n):(r=0,e=[]),i.weights(t)):e},sample:function(){for(var t=Rc(),a=e[r-1],i=n[0],o=0;o<r-1;i+=n[++o])if(t<i){a=e[o];break}return a.sample()},pdf:function(t){for(var a=0,i=0;i<r;++i)a+=n[i]*e[i].pdf(t);return a},cdf:function(t){for(var a=0,i=0;i<r;++i)a+=n[i]*e[i].cdf(t);return a},icdf:function(){throw Error("Mixture icdf not supported.")}};return i.distributions(e).weights(t)},normal:Vc,lognormal:function(e,t){var n,r,a={mean:function(e){return arguments.length?(n=e||0,a):n},stdev:function(e){return arguments.length?(r=null==e?1:e,a):r},sample:function(){return Hc(n,r)},pdf:function(e){return Gc(e,n,r)},cdf:function(e){return Xc(e,n,r)},icdf:function(e){return Yc(e,n,r)}};return a.mean(e).stdev(t)},uniform:function(e,t){var n,r,a={min:function(e){return arguments.length?(n=e||0,a):n},max:function(e){return arguments.length?(r=null==e?1:e,a):r},sample:function(){return Kc(n,r)},pdf:function(e){return $c(e,n,r)},cdf:function(e){return Qc(e,n,r)},icdf:function(e){return Jc(e,n,r)}};return null==t&&(t=null==e?1:e,e=0),a.min(e).max(t)}},Yl="function";function Kl(e,t){var n=e.function;In(Xl,n)||Ht("Unknown distribution function: "+n);var r=Xl[n]();for(var a in e)"field"===a?r.data((e.from||t()).map(e[a])):"distributions"===a?r[a](e[a].map((function(e){return Kl(e,t)}))):typeof r[a]===Yl&&r[a](e[a]);return r}function $l(e){hc.call(this,null,e)}var Ql=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Jl={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:Ql},{name:"weights",type:"number",array:!0}]};function ef(e,t){return e?e.map((function(e,n){return t[n]||jt(e)})):null}function tf(e,t,n){var r,a,i,o,u,s,c=[],l=function(e){return e(o)};if(null==t)c.push(e.map(n));else for(r={},a=0,i=e.length;a<i;++a)o=e[a],(s=r[u=t.map(l)])||(r[u]=s=[],s.dims=u,c.push(s)),s.push(n(o));return c}$l.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:Ql.concat(Jl)},{name:"as",type:"string",array:!0,default:["value","density"]}]},Zn($l,hc,{transform:function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var r=Kl(e.distribution,function(e){return function(){return e.materialize(e.SOURCE).source}}(t)),a=e.steps||e.minsteps||25,i=e.steps||e.maxsteps||200,o=e.method||"pdf";"pdf"!==o&&"cdf"!==o&&Ht("Invalid density method: "+o),e.extent||r.data||Ht("Missing density extent parameter."),o=r[o];var u=e.as||["value","density"],s=ll(o,e.extent||Dn(r.data()),a,i).map((function(e){var t={};return t[u[0]]=e[0],t[u[1]]=e[1],Ms(t)}));this.value&&(n.rem=this.value),this.value=n.add=n.source=s}return n}});function nf(e){hc.call(this,null,e)}nf.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:"bin"}]};function rf(e){js.call(this,null,af,e),this.modified(!0)}function af(e){var t=e.expr;return this.value&&!e.modified("expr")?this.value:Pt((function(n){return t(n,e)}),Ut(t),jt(t))}function of(e){hc.call(this,[void 0,void 0],e)}function uf(e,t){js.call(this,e),this.parent=t,this.count=0}function sf(e){hc.call(this,{},e),this._keys=Rn();var t=this._targets=[];t.active=0,t.forEach=function(e){for(var n=0,r=t.active;n<r;++n)e(t[n],n,t)}}function cf(e){js.call(this,null,lf,e)}function lf(e){return this.value&&!e.modified()?this.value:nn(e.name)?wn(e.name).map((function(e){return Xt(e)})):Xt(e.name,e.as)}function ff(e){hc.call(this,Rn(),e)}function hf(e){hc.call(this,[],e)}function df(e){hc.call(this,[],e)}function pf(e){hc.call(this,null,e)}function vf(e){hc.call(this,[],e)}Zn(nf,hc,{transform:function(e,t){if(this.value&&!e.modified()&&!t.changed())return t;for(var n,r=t.materialize(t.SOURCE).source,a=tf(t.source,e.groupby,Kt),i=e.smooth||!1,o=e.field,u=e.step||function(e,t){return Wn(Dn(e,t))/30}(r,o),s=Os((function(e,t){return o(e)-o(t)})),c=e.as||"bin",l=a.length,f=1/0,h=-1/0,d=0;d<l;++d){var p=a[d].sort(s);n=-1;var v,g=(0,zt.Z)(Zc(p,u,i,o));try{for(g.s();!(v=g.n()).done;){var m=v.value;m<f&&(f=m),m>h&&(h=m),p[++n][c]=m}}catch(y){g.e(y)}finally{g.f()}}return this.value={start:f,stop:h,step:u},t.reflow(!0).modifies(c)}}),Zn(rf,js),of.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},Zn(of,hc,{transform:function(e,t){var n=this.value,r=e.field,a=t.changed()||t.modified(r.fields)||e.modified("field"),i=n[0],o=n[1];if((a||null==i)&&(i=1/0,o=-1/0),t.visit(a?t.SOURCE:t.ADD,(function(e){var t=cn(r(e));null!=t&&(t<i&&(i=t),t>o&&(o=t))})),!Number.isFinite(i)||!Number.isFinite(o)){var u=jt(r);u&&(u=' for field "'.concat(u,'"')),t.dataflow.warn("Infinite extent".concat(u,": [").concat(i,", ").concat(o,"]")),i=o=void 0}this.value=[i,o]}}),Zn(uf,js,{connect:function(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add:function(e){this.count+=1,this.value.add.push(e)},rem:function(e){this.count-=1,this.value.rem.push(e)},mod:function(e){this.value.mod.push(e)},init:function(e){this.value.init(e,e.NO_SOURCE)},evaluate:function(){return this.value}}),Zn(sf,hc,{activate:function(e){this._targets[this._targets.active++]=e},subflow:function(e,t,n,r){var a,i,o=this.value,u=In(o,e)&&o[e];return u?u.value.stamp<n.stamp&&(u.init(n),this.activate(u)):(i=r||(i=this._group[e])&&i.tuple,a=n.dataflow,u=new uf(n.fork(n.NO_SOURCE),this),a.add(u).connect(t(a,e,i)),o[e]=u,this.activate(u)),u},clean:function(){var e=this.value,t=0;for(var n in e)if(0===e[n].count){var r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){var a=this._targets.filter((function(e){return e&&e.count>0}));this.initTargets(a)}},initTargets:function(e){for(var t=this._targets,n=t.length,r=e?e.length:0,a=0;a<r;++a)t[a]=e[a];for(;a<n&&null!=t[a];++a)t[a]=null;t.active=r},transform:function(e,t){var n=this,r=t.dataflow,a=e.key,i=e.subflow,o=this._keys,u=e.modified("key"),s=function(e){return n.subflow(e,i,t)};return this._group=e.group||{},this.initTargets(),t.visit(t.REM,(function(e){var t=Ns(e),n=o.get(t);void 0!==n&&(o.delete(t),s(n).rem(e))})),t.visit(t.ADD,(function(e){var t=a(e);o.set(Ns(e),t),s(t).add(e)})),u||t.modified(a.fields)?t.visit(t.MOD,(function(e){var t=Ns(e),n=o.get(t),r=a(e);n===r?s(r).mod(e):(o.set(t,r),s(n).rem(e),s(r).add(e))})):t.changed(t.MOD)&&t.visit(t.MOD,(function(e){s(o.get(Ns(e))).mod(e)})),u&&t.visit(t.REFLOW,(function(e){var t=Ns(e),n=o.get(t),r=a(e);n!==r&&(o.set(t,r),s(n).rem(e),s(r).add(e))})),t.clean()?r.runAfter((function(){n.clean(),o.clean()})):o.empty>r.cleanThreshold&&r.runAfter(o.clean),t}}),Zn(cf,js),ff.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},Zn(ff,hc,{transform:function(e,t){var n=t.dataflow,r=this.value,a=t.fork(),i=a.add,o=a.rem,u=a.mod,s=e.expr,c=!0;function l(t){var n=Ns(t),a=s(t,e),l=r.get(n);a&&l?(r.delete(n),i.push(t)):a||l?c&&a&&!l&&u.push(t):(r.set(n,1),o.push(t))}return t.visit(t.REM,(function(e){var t=Ns(e);r.has(t)?r.delete(t):o.push(e)})),t.visit(t.ADD,(function(t){s(t,e)?i.push(t):r.set(Ns(t),1)})),t.visit(t.MOD,l),e.modified()&&(c=!1,t.visit(t.REFLOW,l)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),a}}),hf.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},Zn(hf,hc,{transform:function(e,t){var n=t.fork(t.NO_SOURCE),r=e.fields,a=ef(r,e.as||[]),i=e.index||null,o=a.length;return n.rem=this.value,t.visit(t.SOURCE,(function(e){for(var t,u,s,c=r.map((function(t){return t(e)})),l=c.reduce((function(e,t){return Math.max(e,t.length)}),0),f=0;f<l;++f){for(u=Ds(e),t=0;t<o;++t)u[a[t]]=null==(s=c[t][f])?null:s;i&&(u[i]=f),n.add.push(u)}})),this.value=n.source=n.add,i&&n.modifies(i),n.modifies(a)}}),df.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},Zn(df,hc,{transform:function(e,t){var n=t.fork(t.NO_SOURCE),r=e.fields,a=r.map(jt),i=e.as||["key","value"],o=i[0],u=i[1],s=r.length;return n.rem=this.value,t.visit(t.SOURCE,(function(e){for(var t,i=0;i<s;++i)(t=Ds(e))[o]=a[i],t[u]=r[i](e),n.add.push(t)})),this.value=n.source=n.add,n.modifies(i)}}),pf.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},Zn(pf,hc,{transform:function(e,t){var n=e.expr,r=e.as,a=e.modified(),i=e.initonly?t.ADD:a?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return a&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(i,(function(t){return t[r]=n(t,e)}))}}),Zn(vf,hc,{transform:function(e,t){var n,r,a,i=t.fork(t.ALL),o=e.generator,u=this.value,s=e.size-u.length;if(s>0){for(n=[];--s>=0;)n.push(a=Ms(o(e))),u.push(a);i.add=i.add.length?i.materialize(i.ADD).add.concat(n):n}else r=u.slice(0,-s),i.rem=i.rem.length?i.materialize(i.REM).rem.concat(r):r,u=u.slice(-s);return i.source=this.value=u,i}});var gf={value:"value",median:kl,mean:function(e,t){var n=0,r=0;if(void 0===t){var a,i=(0,zt.Z)(e);try{for(i.s();!(a=i.n()).done;){var o=a.value;null!=o&&(o=+o)>=o&&(++n,r+=o)}}catch(f){i.e(f)}finally{i.f()}}else{var u,s=-1,c=(0,zt.Z)(e);try{for(c.s();!(u=c.n()).done;){var l=u.value;null!=(l=t(l,++s,e))&&(l=+l)>=l&&(++n,r+=l)}}catch(f){c.e(f)}finally{c.f()}}if(n)return r/n},min:dl,max:hl},mf=[];function yf(e){hc.call(this,[],e)}function bf(e){Pl.call(this,e)}function xf(e){hc.call(this,null,e)}function wf(e){js.call(this,null,kf,e)}function kf(e){return this.value&&!e.modified()?this.value:jn(e.fields,e.flat)}function _f(e){hc.call(this,[],e),this._pending=null}function Sf(e,t,n){n.forEach(Ms);var r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function Cf(e){hc.call(this,{},e)}function Ef(e){js.call(this,null,Af,e)}function Af(e){if(this.value&&!e.modified())return this.value;var t,n,r=e.extents,a=r.length,i=1/0,o=-1/0;for(t=0;t<a;++t)(n=r[t])[0]<i&&(i=n[0]),n[1]>o&&(o=n[1]);return[i,o]}function Nf(e){js.call(this,null,Tf,e)}function Tf(e){return this.value&&!e.modified()?this.value:e.values.reduce((function(e,t){return e.concat(t)}),[])}function Mf(e){hc.call(this,null,e)}function Df(e){Pl.call(this,e)}function Ff(e){sf.call(this,e)}function If(e){hc.call(this,null,e)}function Of(e){hc.call(this,null,e)}function Rf(e){hc.call(this,null,e)}yf.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},Zn(yf,hc,{transform:function(e,t){var n,r,a,i,o,u,s,c,l,f,h=t.fork(t.ALL),d=function(e){var t,n=e.method||gf.value;if(null!=gf[n])return n===gf.value?(t=void 0!==e.value?e.value:0,function(){return t}):gf[n];Ht("Unrecognized imputation method: "+n)}(e),p=function(e){var t=e.field;return function(e){return e?t(e):NaN}}(e),v=jt(e.field),g=jt(e.key),m=(e.groupby||[]).map(jt),y=function(e,t,n,r){var a,i,o,u,s,c,l,f,h=function(e){return e(f)},d=[],p=r?r.slice():[],v={},g={};for(p.forEach((function(e,t){return v[e]=t+1})),u=0,l=e.length;u<l;++u)c=n(f=e[u]),s=v[c]||(v[c]=p.push(c)),(o=g[i=(a=t?t.map(h):mf)+""])||(o=g[i]=[],d.push(o),o.values=a),o[s-1]=f;return d.domain=p,d}(t.source,e.groupby,e.key,e.keyvals),b=[],x=this.value,w=y.domain.length;for(o=0,c=y.length;o<c;++o)for(a=(n=y[o]).values,r=NaN,s=0;s<w;++s)if(null==n[s]){for(i=y.domain[s],f={_impute:!0},u=0,l=a.length;u<l;++u)f[m[u]]=a[u];f[g]=i,f[v]=Number.isNaN(r)?r=d(n,p):r,b.push(Ms(f))}return b.length&&(h.add=h.materialize(h.ADD).add.concat(b)),x.length&&(h.rem=h.materialize(h.REM).rem.concat(x)),this.value=b,h}}),bf.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Ml},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]},Zn(bf,Pl,{transform:function(e,t){var n,r=this,a=e.modified();return r.value&&(a||t.modified(r._inputs,!0))?(n=r.value=a?r.init(e):{},t.visit(t.SOURCE,(function(e){return r.add(e)}))):(n=r.value=r.value||this.init(e),t.visit(t.REM,(function(e){return r.rem(e)})),t.visit(t.ADD,(function(e){return r.add(e)}))),r.changes(),t.visit(t.SOURCE,(function(e){Mn(e,n[r.cellkey(e)].tuple)})),t.reflow(a).modifies(this._outputs)},changes:function(){var e,t,n=this._adds,r=this._mods;for(e=0,t=this._alen;e<t;++e)this.celltuple(n[e]),n[e]=null;for(e=0,t=this._mlen;e<t;++e)this.celltuple(r[e]),r[e]=null;this._alen=this._mlen=0}}),xf.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},Zn(xf,hc,{transform:function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var r=t.materialize(t.SOURCE).source,a=tf(r,e.groupby,e.field),i=(e.groupby||[]).map(jt),o=e.bandwidth,u=e.cumulative?"cdf":"pdf",s=e.as||["value","density"],c=[],l=e.extent,f=e.steps||e.minsteps||25,h=e.steps||e.maxsteps||200;"pdf"!==u&&"cdf"!==u&&Ht("Invalid density method: "+u),"shared"===e.resolve&&(l||(l=Dn(r,e.field)),f=h=e.steps||h),a.forEach((function(t){var n=qc(t,o)[u],r=e.counts?t.length:1;ll(n,l||Dn(t),f,h).forEach((function(e){for(var n={},a=0;a<i.length;++a)n[i[a]]=t.dims[a];n[s[0]]=e[0],n[s[1]]=e[1]*r,c.push(Ms(n))}))})),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}}),Zn(wf,js),Zn(_f,hc,{transform:function(e,t){var n=this,r=t.dataflow;if(this._pending)return Sf(this,t,this._pending);if(function(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}(e))return t.StopPropagation;if(e.values)return Sf(this,t,r.parse(e.values,e.format));if(e.async){var a=r.request(e.url,e.format).then((function(e){return n._pending=wn(e.data),function(e){return e.touch(n)}}));return{async:a}}return r.request(e.url,e.format).then((function(e){return Sf(n,t,wn(e.data))}))}}),Cf.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},Zn(Cf,hc,{transform:function(e,t){var n,r,a,i=e.fields,o=e.index,u=e.values,s=null==e.default?null:e.default,c=e.modified(),l=i.length,f=c?t.SOURCE:t.ADD,h=t,d=e.as;return u?(r=u.length,l>1&&!d&&Ht('Multi-field lookup requires explicit "as" parameter.'),d&&d.length!==l*r&&Ht('The "as" parameter has too few output field names.'),d=d||u.map(jt),n=function(e){for(var t,n,a=0,c=0;a<l;++a)if(null==(n=o.get(i[a](e))))for(t=0;t<r;++t,++c)e[d[c]]=s;else for(t=0;t<r;++t,++c)e[d[c]]=u[t](n)}):(d||Ht("Missing output field names."),n=function(e){for(var t,n=0;n<l;++n)t=o.get(i[n](e)),e[d[n]]=null==t?s:t}),c?h=t.reflow(!0):(a=i.some((function(e){return t.modified(e.fields)})),f|=a?t.MOD:0),t.visit(f,n),h.modifies(d)}}),Zn(Ef,js),Zn(Nf,js),Zn(Mf,hc,{transform:function(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),Df.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Ml,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]},Zn(Df,Pl,{_transform:Pl.prototype.transform,transform:function(e,t){return this._transform(function(e,t){var n=e.field,r=e.value,a=("count"===e.op?"__count__":e.op)||"sum",i=Ut(n).concat(Ut(r)),o=function(e,t,n){var r={},a=[];return n.visit(n.SOURCE,(function(t){var n=e(t);r[n]||(r[n]=1,a.push(n))})),a.sort(Sn),t?a.slice(0,t):a}(n,e.limit||0,t);t.changed()&&e.set("__pivot__",null,null,!0);return{key:e.key,groupby:e.groupby,ops:o.map((function(){return a})),fields:o.map((function(e){return function(e,t,n,r){return Pt((function(r){return t(r)===e?n(r):NaN}),r,e+"")}(e,n,r,i)})),as:o.map((function(e){return e+""})),modified:e.modified.bind(e)}}(e,t),t)}}),Zn(Ff,sf,{transform:function(e,t){var n=this,r=e.subflow,a=e.field,i=function(e){return n.subflow(Ns(e),r,t,e)};return(e.modified("field")||a&&t.modified(Ut(a)))&&Ht("PreFacet does not support field modification."),this.initTargets(),a?(t.visit(t.MOD,(function(e){var t=i(e);a(e).forEach((function(e){return t.mod(e)}))})),t.visit(t.ADD,(function(e){var t=i(e);a(e).forEach((function(e){return t.add(Ms(e))}))})),t.visit(t.REM,(function(e){var t=i(e);a(e).forEach((function(e){return t.rem(e)}))}))):(t.visit(t.MOD,(function(e){return i(e).mod(e)})),t.visit(t.ADD,(function(e){return i(e).add(e)})),t.visit(t.REM,(function(e){return i(e).rem(e)}))),t.clean()&&t.runAfter((function(){return n.clean()})),t}}),If.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},Zn(If,hc,{transform:function(e,t){var n,r=t.fork(t.NO_SOURCE),a=e.fields,i=ef(e.fields,e.as||[]),o=a?function(e,t){return function(e,t,n,r){for(var a=0,i=n.length;a<i;++a)t[r[a]]=n[a](e);return t}(e,t,a,i)}:Fs;return this.value?n=this.value:(t=t.addAll(),n=this.value={}),t.visit(t.REM,(function(e){var t=Ns(e);r.rem.push(n[t]),n[t]=null})),t.visit(t.ADD,(function(e){var t=o(e,Ms({}));n[Ns(e)]=t,r.add.push(t)})),t.visit(t.MOD,(function(e){r.mod.push(o(e,n[Ns(e)]))})),r}}),Zn(Of,hc,{transform:function(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}}),Rf.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};function Zf(e){hc.call(this,null,e)}function Bf(e){hc.call(this,[],e),this.count=0}function zf(e){hc.call(this,null,e)}function Lf(e){hc.call(this,null,e),this.modified(!0)}function Pf(e){hc.call(this,null,e)}Zn(Rf,hc,{transform:function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;var a=tf(t.materialize(t.SOURCE).source,e.groupby,e.field),i=(e.groupby||[]).map(jt),o=[],u=e.step||.01,s=e.probs||_l(u/2,1-1e-14,u),c=s.length;return a.forEach((function(e){for(var t=Fc(e,s),n=0;n<c;++n){for(var a={},u=0;u<i.length;++u)a[i[u]]=e.dims[u];a[r[0]]=s[n],a[r[1]]=t[n],o.push(Ms(a))}})),this.value&&(n.rem=this.value),this.value=n.add=n.source=o,n}}),Zn(Zf,hc,{transform:function(e,t){var n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,(function(e){var t=Ns(e);n.rem.push(r[t]),r[t]=null})),t.visit(t.ADD,(function(e){var t=Ds(e);r[Ns(e)]=t,n.add.push(t)})),t.visit(t.MOD,(function(e){var t=r[Ns(e)];for(var a in e)t[a]=e[a],n.modifies(a);n.mod.push(t)}))),n}}),Bf.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},Zn(Bf,hc,{transform:function(e,t){var n=t.fork(t.NO_SOURCE),r=e.modified("size"),a=e.size,i=this.value.reduce((function(e,t){return e[Ns(t)]=1,e}),{}),o=this.value,u=this.count,s=0;function c(e){var t,r;o.length<a?o.push(e):(r=~~((u+1)*Rc()))<o.length&&r>=s&&(t=o[r],i[Ns(t)]&&n.rem.push(t),o[r]=e),++u}if(t.rem.length&&(t.visit(t.REM,(function(e){var t=Ns(e);i[t]&&(i[t]=-1,n.rem.push(e)),--u})),o=o.filter((function(e){return-1!==i[Ns(e)]}))),(t.rem.length||r)&&o.length<a&&t.source&&(s=u=o.length,t.visit(t.SOURCE,(function(e){i[Ns(e)]||c(e)})),s=-1),r&&o.length>a){for(var l=o.length-a,f=0;f<l;++f)i[Ns(o[f])]=-1,n.rem.push(o[f]);o=o.slice(l)}return t.mod.length&&t.visit(t.MOD,(function(e){i[Ns(e)]&&n.mod.push(e)})),t.add.length&&t.visit(t.ADD,c),(t.add.length||s<0)&&(n.add=o.filter((function(e){return!i[Ns(e)]}))),this.count=u,this.value=n.source=o,n}}),zf.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},Zn(zf,hc,{transform:function(e,t){if(!this.value||e.modified()){var n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=_l(e.start,e.stop,e.step||1).map((function(e){var t={};return t[r]=e,Ms(t)})),n.add=t.add.concat(this.value),n}}}),Zn(Lf,hc,{transform:function(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});var jf=["unit0","unit1"];function Uf(e){hc.call(this,Rn(),e)}function Wf(e){hc.call(this,null,e)}Pf.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:Va,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:jf}]},Zn(Pf,hc,{transform:function(e,t){var n=e.field,r=!1!==e.interval,a="utc"===e.timezone,i=this._floor(e,t),o=(a?vi:pi)(i.unit).offset,u=e.as||jf,s=u[0],c=u[1],l=i.step,f=i.start||1/0,h=i.stop||-1/0,d=t.ADD;return(e.modified()||t.modified(Ut(n)))&&(d=(t=t.reflow(!0)).SOURCE,f=1/0,h=-1/0),t.visit(d,(function(e){var t,a,u=n(e);null==u?(e[s]=null,r&&(e[c]=null)):(e[s]=t=a=i(u),r&&(e[c]=a=o(t,l)),t<f&&(f=t),a>h&&(h=a))})),i.start=f,i.stop=h,t.modifies(r?u:s)},_floor:function(e,t){var n="utc"===e.timezone,r=e.units?{units:e.units,step:e.step||1}:Fi({extent:e.extent||Dn(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),a=r.units,i=r.step,o=Ha(a),u=this.value||{},s=(n?fi:si)(o,i);return s.unit=sn(o),s.units=o,s.step=i,s.start=u.start,s.stop=u.stop,this.value=s}}),Zn(Uf,hc,{transform:function(e,t){var n=t.dataflow,r=e.field,a=this.value,i=function(e){return a.set(r(e),e)},o=!0;return e.modified("field")||t.modified(r.fields)?(a.clear(),t.visit(t.SOURCE,i)):t.changed()?(t.visit(t.REM,(function(e){return a.delete(r(e))})),t.visit(t.ADD,i)):o=!1,this.modified(o),a.empty>n.cleanThreshold&&n.runAfter(a.clean),t.fork()}}),Zn(Wf,hc,{transform:function(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Os(e.sort)):t.source).map(e.field))}});var Vf={row_number:function(){return{next:function(e){return e.index+1}}},rank:function(){var e;return{init:function(){return e=1},next:function(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){var e;return{init:function(){return e=1},next:function(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){var e=Vf.rank(),t=e.next;return{init:e.init,next:function(e){return(t(e)-1)/(e.data.length-1)}}},cume_dist:function(){var e;return{init:function(){return e=0},next:function(t){var n=t.data,r=t.compare,a=t.index;if(e<a){for(;a+1<n.length&&!r(n[a],n[a+1]);)++a;e=a}return(1+e)/n.length}}},ntile:function(e,t){(t=+t)>0||Ht("ntile num must be greater than zero.");var n=Vf.cume_dist(),r=n.next;return{init:n.init,next:function(e){return Math.ceil(t*r(e))}}},lag:function(e,t){return t=+t||1,{next:function(n){var r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:function(n){var r=n.index+t,a=n.data;return r<a.length?e(a[r]):null}}},first_value:function(e){return{next:function(t){return e(t.data[t.i0])}}},last_value:function(e){return{next:function(t){return e(t.data[t.i1-1])}}},nth_value:function(e,t){return(t=+t)>0||Ht("nth_value nth must be greater than zero."),{next:function(n){var r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){var t;return{init:function(){return t=null},next:function(n){var r=e(n.data[n.index]);return null!=r?t=r:t}}},next_value:function(e){var t,n;return{init:function(){return t=null,n=-1},next:function(r){var a=r.data;return r.index<=n?t:(n=function(e,t,n){for(var r=t.length;n<r;++n){if(null!=e(t[n]))return n}return-1}(e,a,r.index))<0?(n=a.length,t=null):t=e(a[n])}}}};var qf=Object.keys(Vf);function Hf(e){var t=wn(e.ops),n=wn(e.fields),r=wn(e.params),a=wn(e.as),i=this.outputs=[],o=this.windows=[],u={},s={},c=[],l=[],f=!0;function h(e){wn(Ut(e)).forEach((function(e){return u[e]=1}))}h(e.sort),t.forEach((function(e,t){var u=n[t],d=jt(u),p=El(e,d,a[t]);if(h(u),i.push(p),In(Vf,e))o.push(function(e,t,n,r){var a=Vf[e](t,n);return{init:a.init||$t,update:function(e,t){t[r]=a.next(e)}}}(e,n[t],r[t],p));else{if(null==u&&"count"!==e&&Ht("Null aggregate field specified."),"count"===e)return void c.push(p);f=!1;var v=s[d];v||((v=s[d]=[]).field=u,l.push(v)),v.push(Dl(e,p))}})),(c.length||l.length)&&(this.cell=function(e,t,n){e=e.map((function(e){return Bl(e,e.field)}));var r={num:0,agg:null,store:!1,count:t};if(!n)for(var a=e.length,i=r.agg=Array(a),o=0;o<a;++o)i[o]=new e[o](r);if(r.store)var u=r.data=new zl;return r.add=function(e){if(r.num+=1,!n){u&&u.add(e);for(var t=0;t<a;++t)i[t].add(i[t].get(e),e)}},r.rem=function(e){if(r.num-=1,!n){u&&u.rem(e);for(var t=0;t<a;++t)i[t].rem(i[t].get(e),e)}},r.set=function(e){var a,o;for(u&&u.values(),a=0,o=t.length;a<o;++a)e[t[a]]=r.num;if(!n)for(a=0,o=i.length;a<o;++a)i[a].set(e)},r.init=function(){r.num=0,u&&u.reset();for(var e=0;e<a;++e)i[e].init()},r}(l,c,f)),this.inputs=Object.keys(u)}var Gf=Hf.prototype;function Xf(e){hc.call(this,{},e),this._mlen=0,this._mods=[]}function Yf(e,t,n,r){var a=r.sort,i=a&&!r.ignorePeers,o=r.frame||[null,0],u=e.data(n),s=u.length,c=i?Sl(a):null,l={i0:0,i1:0,p0:0,p1:0,index:0,data:u,compare:a||Nn(-1)};t.init();for(var f=0;f<s;++f)Kf(l,o,f,s),i&&$f(l,c),t.update(l,u[f])}function Kf(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:Math.max(0,n-Math.abs(t[0])),e.i1=null==t[1]?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function $f(e,t){var n=e.i0,r=e.i1-1,a=e.compare,i=e.data,o=i.length-1;n>0&&!a(i[n],i[n-1])&&(e.i0=t.left(i,i[n])),r<o&&!a(i[r],i[r+1])&&(e.i1=t.right(i,i[r]))}function Qf(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Jf(e){this._context=e}function eh(){}function th(e){this._context=e}function nh(e){this._context=e}function rh(e,t){this._basis=new Jf(e),this._beta=t}Gf.init=function(){this.windows.forEach((function(e){return e.init()})),this.cell&&this.cell.init()},Gf.update=function(e,t){var n,r=this.cell,a=this.windows,i=e.data,o=a&&a.length;if(r){for(n=e.p0;n<e.i0;++n)r.rem(i[n]);for(n=e.p1;n<e.i1;++n)r.add(i[n]);r.set(t)}for(n=0;n<o;++n)a[n].update(e,t)},Xf.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:qf.concat(Ml)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]},Zn(Xf,hc,{transform:function(e,t){var n=this;this.stamp=t.stamp;var r=e.modified(),a=Os(e.sort),i=Cl(e.groupby),o=function(e){return n.group(i(e))},u=this.state;u&&!r||(u=this.state=new Hf(e)),r||t.modified(u.inputs)?(this.value={},t.visit(t.SOURCE,(function(e){return o(e).add(e)}))):(t.visit(t.REM,(function(e){return o(e).remove(e)})),t.visit(t.ADD,(function(e){return o(e).add(e)})));for(var s=0,c=this._mlen;s<c;++s)Yf(this._mods[s],u,a,e);return this._mlen=0,this._mods=[],t.reflow(r).modifies(u.outputs)},group:function(e){var t=this.value[e];return t||(t=this.value[e]=Ul(Ns),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}}),Jf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Qf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Qf(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},th.prototype={areaStart:eh,areaEnd:eh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Qf(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},nh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Qf(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},rh.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,a=e[0],i=t[0],o=e[n]-a,u=t[n]-i,s=-1;++s<=n;)r=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(a+r*o),this._beta*t[s]+(1-this._beta)*(i+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var ah=function e(t){function n(e){return 1===t?new Jf(e):new rh(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function ih(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function oh(e,t){this._context=e,this._k=(1-t)/6}oh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ih(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:ih(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var uh=function e(t){function n(e){return new oh(e,t)}return n.tension=function(t){return e(+t)},n}(0);function sh(e,t){this._context=e,this._k=(1-t)/6}sh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ih(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var ch=function e(t){function n(e){return new sh(e,t)}return n.tension=function(t){return e(+t)},n}(0);function lh(e,t){this._context=e,this._k=(1-t)/6}lh.prototype={areaStart:eh,areaEnd:eh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:ih(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var fh=function e(t){function n(e){return new lh(e,t)}return n.tension=function(t){return e(+t)},n}(0),hh=Math.abs,dh=Math.atan2,ph=Math.cos,vh=Math.max,gh=Math.min,mh=Math.sin,yh=Math.sqrt,bh=1e-12,xh=Math.PI,wh=xh/2,kh=2*xh;function _h(e){return e>1?0:e<-1?xh:Math.acos(e)}function Sh(e){return e>=1?wh:e<=-1?-wh:Math.asin(e)}function Ch(e,t,n){var r=e._x1,a=e._y1,i=e._x2,o=e._y2;if(e._l01_a>bh){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,s=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/s,a=(a*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/s}if(e._l23_a>bh){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,l=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*c+e._x1*e._l23_2a-t*e._l12_2a)/l,o=(o*c+e._y1*e._l23_2a-n*e._l12_2a)/l}e._context.bezierCurveTo(r,a,i,o,e._x2,e._y2)}function Eh(e,t){this._context=e,this._alpha=t}Eh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Ch(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Ah=function e(t){function n(e){return t?new Eh(e,t):new oh(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function Nh(e,t){this._context=e,this._alpha=t}Nh.prototype={areaStart:eh,areaEnd:eh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Ch(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Th=function e(t){function n(e){return t?new Nh(e,t):new lh(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function Mh(e,t){this._context=e,this._alpha=t}Mh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ch(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Dh=function e(t){function n(e){return t?new Mh(e,t):new sh(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function Fh(e){this._context=e}function Ih(e){return new Fh(e)}function Oh(e){this._context=e}function Rh(e){return e<0?-1:1}function Zh(e,t,n){var r=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(r||a<0&&-0),o=(n-e._y1)/(a||r<0&&-0),u=(i*a+o*r)/(r+a);return(Rh(i)+Rh(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(u))||0}function Bh(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function zh(e,t,n){var r=e._x0,a=e._y0,i=e._x1,o=e._y1,u=(i-r)/3;e._context.bezierCurveTo(r+u,a+u*t,i-u,o-u*n,i,o)}function Lh(e){this._context=e}function Ph(e){this._context=new jh(e)}function jh(e){this._context=e}function Uh(e){this._context=e}function Wh(e){var t,n,r=e.length-1,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function Vh(e,t){this._context=e,this._t=t}function qh(e){return function(){return e}}function Hh(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Fh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},Oh.prototype={areaStart:eh,areaEnd:eh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},Lh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:zh(this,this._t0,Bh(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,zh(this,Bh(this,n=Zh(this,e,t)),n);break;default:zh(this,this._t0,n=Zh(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(Ph.prototype=Object.create(Lh.prototype)).point=function(e,t){Lh.prototype.point.call(this,t,e)},jh.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,i){this._context.bezierCurveTo(t,e,r,n,i,a)}},Uh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=Wh(e),a=Wh(t),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(r[0][i],a[0][i],r[1][i],a[1][i],e[o],t[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},Vh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var Gh,Xh,Yh,Kh,$h,Qh,Jh,ed,td,nd,rd,ad,id,od,ud=n(7853),sd=n(4531),cd=Math.PI,ld=2*cd,fd=1e-6,hd=ld-fd;function dd(e){this._+=e[0];for(var t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}var pd=function(){function e(t){(0,ud.Z)(this,e),this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?dd:function(e){var t=Math.floor(e);if(!(t>=0))throw new Error("invalid digits: ".concat(e));if(t>15)return dd;var n=Math.pow(10,t);return function(e){this._+=e[0];for(var t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(t)}return(0,sd.Z)(e,[{key:"moveTo",value:function(e,t){this._append(Gh||(Gh=Hh(["M",",",""])),this._x0=this._x1=+e,this._y0=this._y1=+t)}},{key:"closePath",value:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(Xh||(Xh=Hh(["Z"]))))}},{key:"lineTo",value:function(e,t){this._append(Yh||(Yh=Hh(["L",",",""])),this._x1=+e,this._y1=+t)}},{key:"quadraticCurveTo",value:function(e,t,n,r){this._append(Kh||(Kh=Hh(["Q",",",",",",",""])),+e,+t,this._x1=+n,this._y1=+r)}},{key:"bezierCurveTo",value:function(e,t,n,r,a,i){this._append($h||($h=Hh(["C",",",",",",",",",",",""])),+e,+t,+n,+r,this._x1=+a,this._y1=+i)}},{key:"arcTo",value:function(e,t,n,r,a){if(e=+e,t=+t,n=+n,r=+r,(a=+a)<0)throw new Error("negative radius: ".concat(a));var i=this._x1,o=this._y1,u=n-e,s=r-t,c=i-e,l=o-t,f=c*c+l*l;if(null===this._x1)this._append(Qh||(Qh=Hh(["M",",",""])),this._x1=e,this._y1=t);else if(f>fd)if(Math.abs(l*u-s*c)>fd&&a){var h=n-i,d=r-o,p=u*u+s*s,v=h*h+d*d,g=Math.sqrt(p),m=Math.sqrt(f),y=a*Math.tan((cd-Math.acos((p+f-v)/(2*g*m)))/2),b=y/m,x=y/g;Math.abs(b-1)>fd&&this._append(ed||(ed=Hh(["L",",",""])),e+b*c,t+b*l),this._append(td||(td=Hh(["A",",",",0,0,",",",",",""])),a,a,+(l*h>c*d),this._x1=e+x*u,this._y1=t+x*s)}else this._append(Jh||(Jh=Hh(["L",",",""])),this._x1=e,this._y1=t);else;}},{key:"arc",value:function(e,t,n,r,a,i){if(e=+e,t=+t,i=!!i,(n=+n)<0)throw new Error("negative radius: ".concat(n));var o=n*Math.cos(r),u=n*Math.sin(r),s=e+o,c=t+u,l=1^i,f=i?r-a:a-r;null===this._x1?this._append(nd||(nd=Hh(["M",",",""])),s,c):(Math.abs(this._x1-s)>fd||Math.abs(this._y1-c)>fd)&&this._append(rd||(rd=Hh(["L",",",""])),s,c),n&&(f<0&&(f=f%ld+ld),f>hd?this._append(ad||(ad=Hh(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),n,n,l,e-o,t-u,n,n,l,this._x1=s,this._y1=c):f>fd&&this._append(id||(id=Hh(["A",",",",0,",",",",",",",""])),n,n,+(f>=cd),l,this._x1=e+n*Math.cos(a),this._y1=t+n*Math.sin(a)))}},{key:"rect",value:function(e,t,n,r){this._append(od||(od=Hh(["M",",","h","v","h","Z"])),this._x0=this._x1=+e,this._y0=this._y1=+t,n=+n,+r,-n)}},{key:"toString",value:function(){return this._}}]),e}();function vd(e){var t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{var r=Math.floor(n);if(!(r>=0))throw new RangeError("invalid digits: ".concat(n));t=r}return e},function(){return new pd(t)}}function gd(e){return e.innerRadius}function md(e){return e.outerRadius}function yd(e){return e.startAngle}function bd(e){return e.endAngle}function xd(e){return e&&e.padAngle}function wd(e,t,n,r,a,i,o,u){var s=n-e,c=r-t,l=o-a,f=u-i,h=f*s-l*c;if(!(h*h<bh))return[e+(h=(l*(t-i)-f*(e-a))/h)*s,t+h*c]}function kd(e,t,n,r,a,i,o){var u=e-n,s=t-r,c=(o?i:-i)/yh(u*u+s*s),l=c*s,f=-c*u,h=e+l,d=t+f,p=n+l,v=r+f,g=(h+p)/2,m=(d+v)/2,y=p-h,b=v-d,x=y*y+b*b,w=a-i,k=h*v-p*d,_=(b<0?-1:1)*yh(vh(0,w*w*x-k*k)),S=(k*b-y*_)/x,C=(-k*y-b*_)/x,E=(k*b+y*_)/x,A=(-k*y+b*_)/x,N=S-g,T=C-m,M=E-g,D=A-m;return N*N+T*T>M*M+D*D&&(S=E,C=A),{cx:S,cy:C,x01:-l,y01:-f,x11:S*(a/w-1),y11:C*(a/w-1)}}pd.prototype;Array.prototype.slice;function _d(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function Sd(e){return e[0]}function Cd(e){return e[1]}function Ed(e,t){var n=qh(!0),r=null,a=Ih,i=null,o=vd(u);function u(u){var s,c,l,f=(u=_d(u)).length,h=!1;for(null==r&&(i=a(l=o())),s=0;s<=f;++s)!(s<f&&n(c=u[s],s,u))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(c,s,u),+t(c,s,u));if(l)return i=null,l+""||null}return e="function"===typeof e?e:void 0===e?Sd:qh(e),t="function"===typeof t?t:void 0===t?Cd:qh(t),u.x=function(t){return arguments.length?(e="function"===typeof t?t:qh(+t),u):e},u.y=function(e){return arguments.length?(t="function"===typeof e?e:qh(+e),u):t},u.defined=function(e){return arguments.length?(n="function"===typeof e?e:qh(!!e),u):n},u.curve=function(e){return arguments.length?(a=e,null!=r&&(i=a(r)),u):a},u.context=function(e){return arguments.length?(null==e?r=i=null:i=a(r=e),u):r},u}function Ad(e,t,n){var r=null,a=qh(!0),i=null,o=Ih,u=null,s=vd(c);function c(c){var l,f,h,d,p,v=(c=_d(c)).length,g=!1,m=new Array(v),y=new Array(v);for(null==i&&(u=o(p=s())),l=0;l<=v;++l){if(!(l<v&&a(d=c[l],l,c))===g)if(g=!g)f=l,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),h=l-1;h>=f;--h)u.point(m[h],y[h]);u.lineEnd(),u.areaEnd()}g&&(m[l]=+e(d,l,c),y[l]=+t(d,l,c),u.point(r?+r(d,l,c):m[l],n?+n(d,l,c):y[l]))}if(p)return u=null,p+""||null}function l(){return Ed().defined(a).curve(o).context(i)}return e="function"===typeof e?e:void 0===e?Sd:qh(+e),t="function"===typeof t?t:qh(void 0===t?0:+t),n="function"===typeof n?n:void 0===n?Cd:qh(+n),c.x=function(t){return arguments.length?(e="function"===typeof t?t:qh(+t),r=null,c):e},c.x0=function(t){return arguments.length?(e="function"===typeof t?t:qh(+t),c):e},c.x1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:qh(+e),c):r},c.y=function(e){return arguments.length?(t="function"===typeof e?e:qh(+e),n=null,c):t},c.y0=function(e){return arguments.length?(t="function"===typeof e?e:qh(+e),c):t},c.y1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:qh(+e),c):n},c.lineX0=c.lineY0=function(){return l().x(e).y(t)},c.lineY1=function(){return l().x(e).y(n)},c.lineX1=function(){return l().x(r).y(t)},c.defined=function(e){return arguments.length?(a="function"===typeof e?e:qh(!!e),c):a},c.curve=function(e){return arguments.length?(o=e,null!=i&&(u=o(i)),c):o},c.context=function(e){return arguments.length?(null==e?i=u=null:u=o(i=e),c):i},c}yh(3);var Nd,Td,Md,Dd,Fd,Id,Od,Rd,Zd,Bd,zd,Ld,Pd,jd,Ud={draw:function(e,t){var n=yh(t/xh);e.moveTo(n,0),e.arc(0,0,n,0,kh)}},Wd=(yh(1/3),mh(xh/10)/mh(7*xh/10));mh(kh/10),ph(kh/10),yh(3),yh(3),yh(3),yh(12);var Vd=Math.PI,qd=2*Vd,Hd=1e-6,Gd=qd-Hd;function Xd(e){this._+=e[0];for(var t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}var Yd=function(){function e(t){(0,ud.Z)(this,e),this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?Xd:function(e){var t=Math.floor(e);if(!(t>=0))throw new Error("invalid digits: ".concat(e));if(t>15)return Xd;var n=Math.pow(10,t);return function(e){this._+=e[0];for(var t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(t)}return(0,sd.Z)(e,[{key:"moveTo",value:function(e,t){this._append(Nd||(Nd=Hh(["M",",",""])),this._x0=this._x1=+e,this._y0=this._y1=+t)}},{key:"closePath",value:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(Td||(Td=Hh(["Z"]))))}},{key:"lineTo",value:function(e,t){this._append(Md||(Md=Hh(["L",",",""])),this._x1=+e,this._y1=+t)}},{key:"quadraticCurveTo",value:function(e,t,n,r){this._append(Dd||(Dd=Hh(["Q",",",",",",",""])),+e,+t,this._x1=+n,this._y1=+r)}},{key:"bezierCurveTo",value:function(e,t,n,r,a,i){this._append(Fd||(Fd=Hh(["C",",",",",",",",",",",""])),+e,+t,+n,+r,this._x1=+a,this._y1=+i)}},{key:"arcTo",value:function(e,t,n,r,a){if(e=+e,t=+t,n=+n,r=+r,(a=+a)<0)throw new Error("negative radius: ".concat(a));var i=this._x1,o=this._y1,u=n-e,s=r-t,c=i-e,l=o-t,f=c*c+l*l;if(null===this._x1)this._append(Id||(Id=Hh(["M",",",""])),this._x1=e,this._y1=t);else if(f>Hd)if(Math.abs(l*u-s*c)>Hd&&a){var h=n-i,d=r-o,p=u*u+s*s,v=h*h+d*d,g=Math.sqrt(p),m=Math.sqrt(f),y=a*Math.tan((Vd-Math.acos((p+f-v)/(2*g*m)))/2),b=y/m,x=y/g;Math.abs(b-1)>Hd&&this._append(Rd||(Rd=Hh(["L",",",""])),e+b*c,t+b*l),this._append(Zd||(Zd=Hh(["A",",",",0,0,",",",",",""])),a,a,+(l*h>c*d),this._x1=e+x*u,this._y1=t+x*s)}else this._append(Od||(Od=Hh(["L",",",""])),this._x1=e,this._y1=t);else;}},{key:"arc",value:function(e,t,n,r,a,i){if(e=+e,t=+t,i=!!i,(n=+n)<0)throw new Error("negative radius: ".concat(n));var o=n*Math.cos(r),u=n*Math.sin(r),s=e+o,c=t+u,l=1^i,f=i?r-a:a-r;null===this._x1?this._append(Bd||(Bd=Hh(["M",",",""])),s,c):(Math.abs(this._x1-s)>Hd||Math.abs(this._y1-c)>Hd)&&this._append(zd||(zd=Hh(["L",",",""])),s,c),n&&(f<0&&(f=f%qd+qd),f>Gd?this._append(Ld||(Ld=Hh(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),n,n,l,e-o,t-u,n,n,l,this._x1=s,this._y1=c):f>Hd&&this._append(Pd||(Pd=Hh(["A",",",",0,",",",",",",",""])),n,n,+(f>=Vd),l,this._x1=e+n*Math.cos(a),this._y1=t+n*Math.sin(a)))}},{key:"rect",value:function(e,t,n,r){this._append(jd||(jd=Hh(["M",",","h","v","h","Z"])),this._x0=this._x1=+e,this._y0=this._y1=+t,n=+n,+r,-n)}},{key:"toString",value:function(){return this._}}]),e}();function Kd(){return new Yd}function $d(e,t){if("undefined"!==typeof document&&document.createElement){var n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}Kd.prototype=Yd.prototype;var Qd=function(){return"undefined"!==typeof Image?Image:null};function Jd(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ep(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function tp(e){var t,n,r;function a(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<i){if(0!==t(r,r))return i;do{var o=a+i>>>1;n(e[o],r)<0?a=o+1:i=o}while(a<i)}return a}return 2!==e.length?(t=Jd,n=function(t,n){return Jd(e(t),n)},r=function(t,n){return e(t)-n}):(t=e===Jd||e===ep?e:np,n=e,r=e),{left:a,center:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,o=a(e,t,n,i-1);return o>n&&r(e[o-1],t)>-r(e[o],t)?o-1:o},right:function(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<i){if(0!==t(r,r))return i;do{var o=a+i>>>1;n(e[o],r)<=0?a=o+1:i=o}while(a<i)}return a}}}function np(){return 0}var rp=tp(Jd),ap=rp.right,ip=(rp.left,tp((function(e){return null===e?NaN:+e})).center,ap),op=Math.sqrt(50),up=Math.sqrt(10),sp=Math.sqrt(2);function cp(e,t,n){var r,a,i,o=(t-e)/Math.max(0,n),u=Math.floor(Math.log10(o)),s=o/Math.pow(10,u),c=s>=op?10:s>=up?5:s>=sp?2:1;return u<0?(i=Math.pow(10,-u)/c,(r=Math.round(e*i))/i<e&&++r,(a=Math.round(t*i))/i>t&&--a,i=-i):(i=Math.pow(10,u)*c,(r=Math.round(e/i))*i<e&&++r,(a=Math.round(t/i))*i>t&&--a),a<r&&.5<=n&&n<2?cp(e,t,2*n):[r,a,i]}function lp(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];var r=t<e,a=r?cp(t,e,n):cp(e,t,n),i=(0,gc.Z)(a,3),o=i[0],u=i[1],s=i[2];if(!(u>=o))return[];var c=u-o+1,l=new Array(c);if(r)if(s<0)for(var f=0;f<c;++f)l[f]=(u-f)/-s;else for(var h=0;h<c;++h)l[h]=(u-h)*s;else if(s<0)for(var d=0;d<c;++d)l[d]=(o+d)/-s;else for(var p=0;p<c;++p)l[p]=(o+p)*s;return l}function fp(e,t,n){return cp(e=+e,t=+t,n=+n)[2]}function hp(e,t,n){n=+n;var r=(t=+t)<(e=+e),a=r?fp(t,e,n):fp(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}function dp(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function pp(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function vp(e){var t,n,r;function a(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<i){if(0!==t(r,r))return i;do{var o=a+i>>>1;n(e[o],r)<0?a=o+1:i=o}while(a<i)}return a}return 2!==e.length?(t=dp,n=function(t,n){return dp(e(t),n)},r=function(t,n){return e(t)-n}):(t=e===dp||e===pp?e:gp,n=e,r=e),{left:a,center:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,o=a(e,t,n,i-1);return o>n&&r(e[o-1],t)>-r(e[o],t)?o-1:o},right:function(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<i){if(0!==t(r,r))return i;do{var o=a+i>>>1;n(e[o],r)<=0?a=o+1:i=o}while(a<i)}return a}}}function gp(){return 0}function mp(e){return null===e?NaN:+e}var yp=vp(dp),bp=yp.right,xp=(yp.left,vp(mp).center,bp);function wp(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function kp(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function _p(){}var Sp=.7,Cp=1/Sp,Ep="\\s*([+-]?\\d+)\\s*",Ap="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Np="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Tp=/^#([0-9a-f]{3,8})$/,Mp=new RegExp("^rgb\\(".concat(Ep,",").concat(Ep,",").concat(Ep,"\\)$")),Dp=new RegExp("^rgb\\(".concat(Np,",").concat(Np,",").concat(Np,"\\)$")),Fp=new RegExp("^rgba\\(".concat(Ep,",").concat(Ep,",").concat(Ep,",").concat(Ap,"\\)$")),Ip=new RegExp("^rgba\\(".concat(Np,",").concat(Np,",").concat(Np,",").concat(Ap,"\\)$")),Op=new RegExp("^hsl\\(".concat(Ap,",").concat(Np,",").concat(Np,"\\)$")),Rp=new RegExp("^hsla\\(".concat(Ap,",").concat(Np,",").concat(Np,",").concat(Ap,"\\)$")),Zp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Bp(){return this.rgb().formatHex()}function zp(){return this.rgb().formatRgb()}function Lp(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Tp.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Pp(t):3===n?new Vp(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?jp(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?jp(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Mp.exec(e))?new Vp(t[1],t[2],t[3],1):(t=Dp.exec(e))?new Vp(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Fp.exec(e))?jp(t[1],t[2],t[3],t[4]):(t=Ip.exec(e))?jp(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Op.exec(e))?Kp(t[1],t[2]/100,t[3]/100,1):(t=Rp.exec(e))?Kp(t[1],t[2]/100,t[3]/100,t[4]):Zp.hasOwnProperty(e)?Pp(Zp[e]):"transparent"===e?new Vp(NaN,NaN,NaN,0):null}function Pp(e){return new Vp(e>>16&255,e>>8&255,255&e,1)}function jp(e,t,n,r){return r<=0&&(e=t=n=NaN),new Vp(e,t,n,r)}function Up(e){return e instanceof _p||(e=Lp(e)),e?new Vp((e=e.rgb()).r,e.g,e.b,e.opacity):new Vp}function Wp(e,t,n,r){return 1===arguments.length?Up(e):new Vp(e,t,n,null==r?1:r)}function Vp(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function qp(){return"#".concat(Yp(this.r)).concat(Yp(this.g)).concat(Yp(this.b))}function Hp(){var e=Gp(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(Xp(this.r),", ").concat(Xp(this.g),", ").concat(Xp(this.b)).concat(1===e?")":", ".concat(e,")"))}function Gp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Xp(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Yp(e){return((e=Xp(e))<16?"0":"")+e.toString(16)}function Kp(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Qp(e,t,n,r)}function $p(e){if(e instanceof Qp)return new Qp(e.h,e.s,e.l,e.opacity);if(e instanceof _p||(e=Lp(e)),!e)return new Qp;if(e instanceof Qp)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,u=i-a,s=(i+a)/2;return u?(o=t===i?(n-r)/u+6*(n<r):n===i?(r-t)/u+2:(t-n)/u+4,u/=s<.5?i+a:2-i-a,o*=60):u=s>0&&s<1?0:o,new Qp(o,u,s,e.opacity)}function Qp(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Jp(e){return(e=(e||0)%360)<0?e+360:e}function ev(e){return Math.max(0,Math.min(1,e||0))}function tv(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function nv(e,t,n,r,a){var i=e*e,o=i*e;return((1-3*e+3*i-o)*t+(4-6*i+3*o)*n+(1+3*e+3*i-3*o)*r+o*a)/6}wp(_p,Lp,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Bp,formatHex:Bp,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return $p(this).formatHsl()},formatRgb:zp,toString:zp}),wp(Vp,Wp,kp(_p,{brighter:function(e){return e=null==e?Cp:Math.pow(Cp,e),new Vp(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Sp:Math.pow(Sp,e),new Vp(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new Vp(Xp(this.r),Xp(this.g),Xp(this.b),Gp(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qp,formatHex:qp,formatHex8:function(){return"#".concat(Yp(this.r)).concat(Yp(this.g)).concat(Yp(this.b)).concat(Yp(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:Hp,toString:Hp})),wp(Qp,(function(e,t,n,r){return 1===arguments.length?$p(e):new Qp(e,t,n,null==r?1:r)}),kp(_p,{brighter:function(e){return e=null==e?Cp:Math.pow(Cp,e),new Qp(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Sp:Math.pow(Sp,e),new Qp(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new Vp(tv(e>=240?e-240:e+120,a,r),tv(e,a,r),tv(e<120?e+240:e-120,a,r),this.opacity)},clamp:function(){return new Qp(Jp(this.h),ev(this.s),ev(this.l),Gp(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=Gp(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(Jp(this.h),", ").concat(100*ev(this.s),"%, ").concat(100*ev(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));var rv=function(e){return function(){return e}};function av(e,t){return function(n){return e+n*t}}function iv(e){return 1===(e=+e)?ov:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):rv(isNaN(t)?n:t)}}function ov(e,t){var n=t-e;return n?av(e,n):rv(isNaN(e)?t:e)}var uv=function e(t){var n=iv(t);function r(e,t){var r=n((e=Wp(e)).r,(t=Wp(t)).r),a=n(e.g,t.g),i=n(e.b,t.b),o=ov(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=i(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function sv(e){return function(t){var n,r,a=t.length,i=new Array(a),o=new Array(a),u=new Array(a);for(n=0;n<a;++n)r=Wp(t[n]),i[n]=r.r||0,o[n]=r.g||0,u[n]=r.b||0;return i=e(i),o=e(o),u=e(u),r.opacity=1,function(e){return r.r=i(e),r.g=o(e),r.b=u(e),r+""}}}sv((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[r],i=e[r+1],o=r>0?e[r-1]:2*a-i,u=r<t-1?e[r+2]:2*i-a;return nv((n-r/t)*t,o,a,i,u)}})),sv((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),a=e[(r+t-1)%t],i=e[r%t],o=e[(r+1)%t],u=e[(r+2)%t];return nv((n-r/t)*t,a,i,o,u)}}));function cv(e,t){var n,r=t?t.length:0,a=e?Math.min(r,e.length):0,i=new Array(a),o=new Array(r);for(n=0;n<a;++n)i[n]=mv(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<a;++n)o[n]=i[n](e);return o}}function lv(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function fv(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function hv(e,t){var n,r={},a={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=mv(e[n],t[n]):a[n]=t[n];return function(e){for(n in r)a[n]=r[n](e);return a}}var dv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pv=new RegExp(dv.source,"g");function vv(e,t){var n,r,a,i=dv.lastIndex=pv.lastIndex=0,o=-1,u=[],s=[];for(e+="",t+="";(n=dv.exec(e))&&(r=pv.exec(t));)(a=r.index)>i&&(a=t.slice(i,a),u[o]?u[o]+=a:u[++o]=a),(n=n[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,s.push({i:o,x:fv(n,r)})),i=pv.lastIndex;return i<t.length&&(a=t.slice(i),u[o]?u[o]+=a:u[++o]=a),u.length<2?s[0]?function(e){return function(t){return e(t)+""}}(s[0].x):function(e){return function(){return e}}(t):(t=s.length,function(e){for(var n,r=0;r<t;++r)u[(n=s[r]).i]=n.x(e);return u.join("")})}function gv(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,a=t.slice();return function(i){for(n=0;n<r;++n)a[n]=e[n]*(1-i)+t[n]*i;return a}}function mv(e,t){var n,r=typeof t;return null==t||"boolean"===r?rv(t):("number"===r?fv:"string"===r?(n=Lp(t))?(t=n,uv):vv:t instanceof Lp?uv:t instanceof Date?lv:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?gv:Array.isArray(t)?cv:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?hv:fv)(e,t)}function yv(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function bv(e){return+e}var xv=[0,1];function wv(e){return e}function kv(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function _v(e,t,n){var r=e[0],a=e[1],i=t[0],o=t[1];return a<r?(r=kv(a,r),i=n(o,i)):(r=kv(r,a),i=n(i,o)),function(e){return i(r(e))}}function Sv(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=kv(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(t){var n=xp(e,t,1,r)-1;return i[n](a[n](t))}}function Cv(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Ev(){var e,t,n,r,a,i,o=xv,u=xv,s=mv,c=wv;function l(){var e=Math.min(o.length,u.length);return c!==wv&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(o[0],o[e-1])),r=e>2?Sv:_v,a=i=null,f}function f(t){return null==t||isNaN(t=+t)?n:(a||(a=r(o.map(e),u,s)))(e(c(t)))}return f.invert=function(n){return c(t((i||(i=r(u,o.map(e),fv)))(n)))},f.domain=function(e){return arguments.length?(o=Array.from(e,bv),l()):o.slice()},f.range=function(e){return arguments.length?(u=Array.from(e),l()):u.slice()},f.rangeRound=function(e){return u=Array.from(e),s=yv,l()},f.clamp=function(e){return arguments.length?(c=!!e||wv,l()):c!==wv},f.interpolate=function(e){return arguments.length?(s=e,l()):s},f.unknown=function(e){return arguments.length?(n=e,f):n},function(n,r){return e=n,t=r,l()}}function Av(){return Ev()(wv,wv)}function Nv(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Tv(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}var Mv,Dv=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fv(e){if(!(t=Dv.exec(e)))throw new Error("invalid format: "+e);var t;return new Iv({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Iv(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function Ov(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Rv(e){return(e=Ov(Math.abs(e)))?e[1]:NaN}function Zv(e,t){var n=Ov(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}Fv.prototype=Iv.prototype,Iv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Bv={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return Zv(100*e,t)},r:Zv,s:function(e,t){var n=Ov(e,t);if(!n)return e+"";var r=n[0],a=n[1],i=a-(Mv=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+Ov(e,Math.max(0,t+i-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function zv(e){return e}var Lv,Pv,jv,Uv=Array.prototype.map,Wv=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function Vv(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?zv:(t=Uv.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var a=e.length,i=[],o=0,u=t[0],s=0;a>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),i.push(e.substring(a-=u,a+u)),!((s+=u+1)>r));)u=t[o=(o+1)%t.length];return i.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",u=void 0===e.numerals?zv:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Uv.call(e.numerals,String)),s=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",l=void 0===e.nan?"NaN":e.nan+"";function f(e){var t=(e=Fv(e)).fill,n=e.align,f=e.sign,h=e.symbol,d=e.zero,p=e.width,v=e.comma,g=e.precision,m=e.trim,y=e.type;"n"===y?(v=!0,y="g"):Bv[y]||(void 0===g&&(g=12),m=!0,y="g"),(d||"0"===t&&"="===n)&&(d=!0,t="0",n="=");var b="$"===h?a:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===h?i:/[%p]/.test(y)?s:"",w=Bv[y],k=/[defgprs%]/.test(y);function _(e){var a,i,s,h=b,_=x;if("c"===y)_=w(e)+_,e="";else{var S=(e=+e)<0||1/e<0;if(e=isNaN(e)?l:w(Math.abs(e),g),m&&(e=function(e){e:for(var t,n=e.length,r=1,a=-1;r<n;++r)switch(e[r]){case".":a=t=r;break;case"0":0===a&&(a=r),t=r;break;default:if(!+e[r])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),S&&0===+e&&"+"!==f&&(S=!1),h=(S?"("===f?f:c:"-"===f||"("===f?"":f)+h,_=("s"===y?Wv[8+Mv/3]:"")+_+(S&&"("===f?")":""),k)for(a=-1,i=e.length;++a<i;)if(48>(s=e.charCodeAt(a))||s>57){_=(46===s?o+e.slice(a+1):e.slice(a))+_,e=e.slice(0,a);break}}v&&!d&&(e=r(e,1/0));var C=h.length+e.length+_.length,E=C<p?new Array(p-C+1).join(t):"";switch(v&&d&&(e=r(E+e,E.length?p-_.length:1/0),E=""),n){case"<":e=h+e+_+E;break;case"=":e=h+E+e+_;break;case"^":e=E.slice(0,C=E.length>>1)+h+e+_+E.slice(C);break;default:e=E+h+e+_}return u(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),_.toString=function(){return e+""},_}return{format:f,formatPrefix:function(e,t){var n=f(((e=Fv(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(Rv(t)/3))),a=Math.pow(10,-r),i=Wv[8+r/3];return function(e){return n(a*e)+i}}}}function qv(e,t,n,r){var a,i=hp(e,t,n);switch((r=Fv(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Rv(t)/3)))-Rv(Math.abs(e)))}(i,o))||(r.precision=a),jv(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Rv(t)-Rv(e))+1}(i,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=a-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(a=function(e){return Math.max(0,-Rv(Math.abs(e)))}(i))||(r.precision=a-2*("%"===r.type))}return Pv(r)}function Hv(e){var t=e.domain;return e.ticks=function(e){var n=t();return lp(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return qv(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,a,i=t(),o=0,u=i.length-1,s=i[o],c=i[u],l=10;for(c<s&&(a=s,s=c,c=a,a=o,o=u,u=a);l-- >0;){if((a=fp(s,c,n))===r)return i[o]=s,i[u]=c,t(i);if(a>0)s=Math.floor(s/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;s=Math.ceil(s*a)/a,c=Math.floor(c*a)/a}r=a}return e},e}function Gv(e,t){var n,r=0,a=(e=e.slice()).length-1,i=e[r],o=e[a];return o<i&&(n=r,r=a,a=n,n=i,i=o,o=n),e[r]=t.floor(i),e[a]=t.ceil(o),e}function Xv(e){return Math.log(e)}function Yv(e){return Math.exp(e)}function Kv(e){return-Math.log(-e)}function $v(e){return-Math.exp(-e)}function Qv(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Jv(e){return function(t,n){return-e(-t,n)}}function eg(e){var t,n,r=e(Xv,Yv),a=r.domain,i=10;function o(){return t=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}(i),n=function(e){return 10===e?Qv:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(i),a()[0]<0?(t=Jv(t),n=Jv(n),e(Kv,$v)):e(Xv,Yv),r}return r.base=function(e){return arguments.length?(i=+e,o()):i},r.domain=function(e){return arguments.length?(a(e),o()):a()},r.ticks=function(e){var r=a(),o=r[0],u=r[r.length-1],s=u<o;if(s){var c=[u,o];o=c[0],u=c[1]}var l,f,h=t(o),d=t(u),p=null==e?10:+e,v=[];if(!(i%1)&&d-h<p){if(h=Math.floor(h),d=Math.ceil(d),o>0){for(;h<=d;++h)for(l=1;l<i;++l)if(!((f=h<0?l/n(-h):l*n(h))<o)){if(f>u)break;v.push(f)}}else for(;h<=d;++h)for(l=i-1;l>=1;--l)if(!((f=h>0?l/n(-h):l*n(h))<o)){if(f>u)break;v.push(f)}2*v.length<p&&(v=lp(o,u,p))}else v=lp(h,d,Math.min(d-h,p)).map(n);return s?v.reverse():v},r.tickFormat=function(e,a){if(null==e&&(e=10),null==a&&(a=10===i?"s":","),"function"!==typeof a&&(i%1||null!=(a=Fv(a)).precision||(a.trim=!0),a=Pv(a)),e===1/0)return a;var o=Math.max(1,i*e/r.ticks().length);return function(e){var r=e/n(Math.round(t(e)));return r*i<i-.5&&(r*=i),r<=o?a(e):""}},r.nice=function(){return a(Gv(a(),{floor:function(e){return n(Math.floor(t(e)))},ceil:function(e){return n(Math.ceil(t(e)))}}))},r}function tg(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function ng(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function rg(e){return e<0?-e*e:e*e}function ag(e){var t=e(wv,wv),n=1;function r(){return 1===n?e(wv,wv):.5===n?e(ng,rg):e(tg(n),tg(1/n))}return t.exponent=function(e){return arguments.length?(n=+e,r()):n},Hv(t)}function ig(){var e=ag(Ev());return e.copy=function(){return Cv(e,ig()).exponent(e.exponent())},Nv.apply(e,arguments),e}function og(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ug(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function sg(e){var t=1,n=e(og(t),ug(t));return n.constant=function(n){return arguments.length?e(og(t=+n),ug(t)):t},Hv(n)}!function(e){Lv=Vv(e),Pv=Lv.format,jv=Lv.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});var cg=1e3,lg=6e4,fg=36e5,hg=864e5,dg=6048e5,pg=2592e6,vg=31536e6,gg=new Date,mg=new Date;function yg(e,t,n,r){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=function(t){return e(t=new Date(+t)),t},a.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},a.round=function(e){var t=a(e),n=a.ceil(e);return e-t<n-e?t:n},a.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},a.range=function(n,r,i){var o,u=[];if(n=a.ceil(n),i=null==i?1:Math.floor(i),!(n<r)||!(i>0))return u;do{u.push(o=new Date(+n)),t(n,i),e(n)}while(o<n&&n<r);return u},a.filter=function(n){return yg((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(a.count=function(t,r){return gg.setTime(+t),mg.setTime(+r),e(gg),e(mg),Math.floor(n(gg,mg))},a.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(r?function(t){return r(t)%e===0}:function(t){return a.count(0,t)%e===0}):a:null}),a}var bg=yg((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));bg.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?yg((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):bg:null};bg.range;var xg=yg((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*cg)}),(function(e,t){return(t-e)/cg}),(function(e){return e.getUTCSeconds()})),wg=(xg.range,yg((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*cg)}),(function(e,t){e.setTime(+e+t*lg)}),(function(e,t){return(t-e)/lg}),(function(e){return e.getMinutes()}))),kg=(wg.range,yg((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*lg)}),(function(e,t){return(t-e)/lg}),(function(e){return e.getUTCMinutes()}))),_g=(kg.range,yg((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*cg-e.getMinutes()*lg)}),(function(e,t){e.setTime(+e+t*fg)}),(function(e,t){return(t-e)/fg}),(function(e){return e.getHours()}))),Sg=(_g.range,yg((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*fg)}),(function(e,t){return(t-e)/fg}),(function(e){return e.getUTCHours()}))),Cg=(Sg.range,yg((function(e){return e.setHours(0,0,0,0)}),(function(e,t){return e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*lg)/hg}),(function(e){return e.getDate()-1}))),Eg=(Cg.range,yg((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/hg}),(function(e){return e.getUTCDate()-1}))),Ag=(Eg.range,yg((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/hg}),(function(e){return Math.floor(e/hg)})));Ag.range;function Ng(e){return yg((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*lg)/dg}))}var Tg=Ng(0),Mg=Ng(1),Dg=Ng(2),Fg=Ng(3),Ig=Ng(4),Og=Ng(5),Rg=Ng(6);Tg.range,Mg.range,Dg.range,Fg.range,Ig.range,Og.range,Rg.range;function Zg(e){return yg((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/dg}))}var Bg=Zg(0),zg=Zg(1),Lg=Zg(2),Pg=Zg(3),jg=Zg(4),Ug=Zg(5),Wg=Zg(6),Vg=(Bg.range,zg.range,Lg.range,Pg.range,jg.range,Ug.range,Wg.range,yg((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}))),qg=(Vg.range,yg((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()}))),Hg=(qg.range,yg((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()})));Hg.every=function(e){return isFinite(e=Math.floor(e))&&e>0?yg((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};Hg.range;var Gg=yg((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));Gg.every=function(e){return isFinite(e=Math.floor(e))&&e>0?yg((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};Gg.range;function Xg(e,t,n,r,a,i){var o=[[xg,1,cg],[xg,5,5e3],[xg,15,15e3],[xg,30,3e4],[i,1,lg],[i,5,3e5],[i,15,9e5],[i,30,18e5],[a,1,fg],[a,3,108e5],[a,6,216e5],[a,12,432e5],[r,1,hg],[r,2,1728e5],[n,1,dg],[t,1,pg],[t,3,7776e6],[e,1,vg]];function u(t,n,r){var a=Math.abs(n-t)/r,i=vp((function(e){return(0,gc.Z)(e,3)[2]})).right(o,a);if(i===o.length)return e.every(hp(t/vg,n/vg,r));if(0===i)return bg.every(Math.max(hp(t,n,r),1));var u=(0,gc.Z)(o[a/o[i-1][2]<o[i][2]/a?i-1:i],2),s=u[0],c=u[1];return s.every(c)}return[function(e,t,n){var r=t<e;if(r){var a=[t,e];e=a[0],t=a[1]}var i=n&&"function"===typeof n.range?n:u(e,t,n),o=i?i.range(e,+t+1):[];return r?o.reverse():o},u]}var Yg=Xg(Gg,qg,Bg,Ag,Sg,kg),Kg=(0,gc.Z)(Yg,2),$g=Kg[0],Qg=Kg[1],Jg=Xg(Hg,Vg,Tg,Cg,_g,wg),em=(0,gc.Z)(Jg,2),tm=em[0],nm=em[1];function rm(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function am(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function im(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var om,um,sm,cm={"-":"",_:" ",0:"0"},lm=/^\s*\d+/,fm=/^%/,hm=/[\\^$*+?|[\]().{}]/g;function dm(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function pm(e){return e.replace(hm,"\\$&")}function vm(e){return new RegExp("^(?:"+e.map(pm).join("|")+")","i")}function gm(e){return new Map(e.map((function(e,t){return[e.toLowerCase(),t]})))}function mm(e,t,n){var r=lm.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function ym(e,t,n){var r=lm.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function bm(e,t,n){var r=lm.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function xm(e,t,n){var r=lm.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function wm(e,t,n){var r=lm.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function km(e,t,n){var r=lm.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function _m(e,t,n){var r=lm.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Sm(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Cm(e,t,n){var r=lm.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function Em(e,t,n){var r=lm.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Am(e,t,n){var r=lm.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Nm(e,t,n){var r=lm.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Tm(e,t,n){var r=lm.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Mm(e,t,n){var r=lm.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Dm(e,t,n){var r=lm.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Fm(e,t,n){var r=lm.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Im(e,t,n){var r=lm.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Om(e,t,n){var r=fm.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Rm(e,t,n){var r=lm.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Zm(e,t,n){var r=lm.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Bm(e,t){return dm(e.getDate(),t,2)}function zm(e,t){return dm(e.getHours(),t,2)}function Lm(e,t){return dm(e.getHours()%12||12,t,2)}function Pm(e,t){return dm(1+Cg.count(Hg(e),e),t,3)}function jm(e,t){return dm(e.getMilliseconds(),t,3)}function Um(e,t){return jm(e,t)+"000"}function Wm(e,t){return dm(e.getMonth()+1,t,2)}function Vm(e,t){return dm(e.getMinutes(),t,2)}function qm(e,t){return dm(e.getSeconds(),t,2)}function Hm(e){var t=e.getDay();return 0===t?7:t}function Gm(e,t){return dm(Tg.count(Hg(e)-1,e),t,2)}function Xm(e){var t=e.getDay();return t>=4||0===t?Ig(e):Ig.ceil(e)}function Ym(e,t){return e=Xm(e),dm(Ig.count(Hg(e),e)+(4===Hg(e).getDay()),t,2)}function Km(e){return e.getDay()}function $m(e,t){return dm(Mg.count(Hg(e)-1,e),t,2)}function Qm(e,t){return dm(e.getFullYear()%100,t,2)}function Jm(e,t){return dm((e=Xm(e)).getFullYear()%100,t,2)}function ey(e,t){return dm(e.getFullYear()%1e4,t,4)}function ty(e,t){var n=e.getDay();return dm((e=n>=4||0===n?Ig(e):Ig.ceil(e)).getFullYear()%1e4,t,4)}function ny(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+dm(t/60|0,"0",2)+dm(t%60,"0",2)}function ry(e,t){return dm(e.getUTCDate(),t,2)}function ay(e,t){return dm(e.getUTCHours(),t,2)}function iy(e,t){return dm(e.getUTCHours()%12||12,t,2)}function oy(e,t){return dm(1+Eg.count(Gg(e),e),t,3)}function uy(e,t){return dm(e.getUTCMilliseconds(),t,3)}function sy(e,t){return uy(e,t)+"000"}function cy(e,t){return dm(e.getUTCMonth()+1,t,2)}function ly(e,t){return dm(e.getUTCMinutes(),t,2)}function fy(e,t){return dm(e.getUTCSeconds(),t,2)}function hy(e){var t=e.getUTCDay();return 0===t?7:t}function dy(e,t){return dm(Bg.count(Gg(e)-1,e),t,2)}function py(e){var t=e.getUTCDay();return t>=4||0===t?jg(e):jg.ceil(e)}function vy(e,t){return e=py(e),dm(jg.count(Gg(e),e)+(4===Gg(e).getUTCDay()),t,2)}function gy(e){return e.getUTCDay()}function my(e,t){return dm(zg.count(Gg(e)-1,e),t,2)}function yy(e,t){return dm(e.getUTCFullYear()%100,t,2)}function by(e,t){return dm((e=py(e)).getUTCFullYear()%100,t,2)}function xy(e,t){return dm(e.getUTCFullYear()%1e4,t,4)}function wy(e,t){var n=e.getUTCDay();return dm((e=n>=4||0===n?jg(e):jg.ceil(e)).getUTCFullYear()%1e4,t,4)}function ky(){return"+0000"}function _y(){return"%"}function Sy(e){return+e}function Cy(e){return Math.floor(+e/1e3)}function Ey(e){return new Date(e)}function Ay(e){return e instanceof Date?+e:+new Date(+e)}function Ny(e,t,n,r,a,i,o,u,s,c){var l=Av(),f=l.invert,h=l.domain,d=c(".%L"),p=c(":%S"),v=c("%I:%M"),g=c("%I %p"),m=c("%a %d"),y=c("%b %d"),b=c("%B"),x=c("%Y");function w(e){return(s(e)<e?d:u(e)<e?p:o(e)<e?v:i(e)<e?g:r(e)<e?a(e)<e?m:y:n(e)<e?b:x)(e)}return l.invert=function(e){return new Date(f(e))},l.domain=function(e){return arguments.length?h(Array.from(e,Ay)):h().map(Ey)},l.ticks=function(t){var n=h();return e(n[0],n[n.length-1],null==t?10:t)},l.tickFormat=function(e,t){return null==t?w:c(t)},l.nice=function(e){var n=h();return e&&"function"===typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?h(Gv(n,e)):l},l.copy=function(){return Cv(l,Ny(e,t,n,r,a,i,o,u,s,c))},l}function Ty(){var e,t,n,r,a,i=0,o=1,u=wv,s=!1;function c(t){return null==t||isNaN(t=+t)?a:u(0===n?.5:(t=(r(t)-e)*n,s?Math.max(0,Math.min(1,t)):t))}function l(e){return function(t){var n,r,a,i;return arguments.length?(n=t,a=(r=(0,gc.Z)(n,2))[0],i=r[1],u=e(a,i),c):[u(0),u(1)]}}return c.domain=function(a){var u,s;return arguments.length?(u=a,s=(0,gc.Z)(u,2),i=s[0],o=s[1],e=r(i=+i),t=r(o=+o),n=e===t?0:1/(t-e),c):[i,o]},c.clamp=function(e){return arguments.length?(s=!!e,c):s},c.interpolator=function(e){return arguments.length?(u=e,c):u},c.range=l(mv),c.rangeRound=l(yv),c.unknown=function(e){return arguments.length?(a=e,c):a},function(a){return r=a,e=a(i),t=a(o),n=e===t?0:1/(t-e),c}}function My(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Dy(){var e=Hv(Ty()(wv));return e.copy=function(){return My(e,Dy())},Tv.apply(e,arguments)}function Fy(){var e=ag(Ty());return e.copy=function(){return My(e,Fy()).exponent(e.exponent())},Tv.apply(e,arguments)}function Iy(e,t){void 0===t&&(t=e,e=mv);for(var n=0,r=t.length-1,a=t[0],i=new Array(r<0?0:r);n<r;)i[n]=e(a,a=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return i[t](e-t)}}function Oy(){var e,t,n,r,a,i,o,u=0,s=.5,c=1,l=1,f=wv,h=!1;function d(e){return isNaN(e=+e)?o:(e=.5+((e=+i(e))-t)*(l*e<l*t?r:a),f(h?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var n,r,a,i,o;return arguments.length?(n=t,a=(r=(0,gc.Z)(n,3))[0],i=r[1],o=r[2],f=Iy(e,[a,i,o]),d):[f(0),f(.5),f(1)]}}return d.domain=function(o){var f,h;return arguments.length?(f=o,h=(0,gc.Z)(f,3),u=h[0],s=h[1],c=h[2],e=i(u=+u),t=i(s=+s),n=i(c=+c),r=e===t?0:.5/(t-e),a=t===n?0:.5/(n-t),l=t<e?-1:1,d):[u,s,c]},d.clamp=function(e){return arguments.length?(h=!!e,d):h},d.interpolator=function(e){return arguments.length?(f=e,d):f},d.range=p(mv),d.rangeRound=p(yv),d.unknown=function(e){return arguments.length?(o=e,d):o},function(o){return i=o,e=o(u),t=o(s),n=o(c),r=e===t?0:.5/(t-e),a=t===n?0:.5/(n-t),l=t<e?-1:1,d}}function Ry(){var e=ag(Oy());return e.copy=function(){return My(e,Ry()).exponent(e.exponent())},Tv.apply(e,arguments)}function Zy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mp;if((r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,i=Math.floor(a),o=+n(e[i],i,e),u=+n(e[i+1],i+1,e);return o+(u-o)*(a-i)}}!function(e){om=function(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,i=e.days,o=e.shortDays,u=e.months,s=e.shortMonths,c=vm(a),l=gm(a),f=vm(i),h=gm(i),d=vm(o),p=gm(o),v=vm(u),g=gm(u),m=vm(s),y=gm(s),b={a:function(e){return o[e.getDay()]},A:function(e){return i[e.getDay()]},b:function(e){return s[e.getMonth()]},B:function(e){return u[e.getMonth()]},c:null,d:Bm,e:Bm,f:Um,g:Jm,G:ty,H:zm,I:Lm,j:Pm,L:jm,m:Wm,M:Vm,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Sy,s:Cy,S:qm,u:Hm,U:Gm,V:Ym,w:Km,W:$m,x:null,X:null,y:Qm,Y:ey,Z:ny,"%":_y},x={a:function(e){return o[e.getUTCDay()]},A:function(e){return i[e.getUTCDay()]},b:function(e){return s[e.getUTCMonth()]},B:function(e){return u[e.getUTCMonth()]},c:null,d:ry,e:ry,f:sy,g:by,G:wy,H:ay,I:iy,j:oy,L:uy,m:cy,M:ly,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Sy,s:Cy,S:fy,u:hy,U:dy,V:vy,w:gy,W:my,x:null,X:null,y:yy,Y:xy,Z:ky,"%":_y},w={a:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return S(e,t,n,r)},d:Am,e:Am,f:Im,g:_m,G:km,H:Tm,I:Tm,j:Nm,L:Fm,m:Em,M:Mm,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=l.get(r[0].toLowerCase()),n+r[0].length):-1},q:Cm,Q:Rm,s:Zm,S:Dm,u:ym,U:bm,V:xm,w:mm,W:wm,x:function(e,t,r){return S(e,n,t,r)},X:function(e,t,n){return S(e,r,t,n)},y:_m,Y:km,Z:Sm,"%":Om};function k(e,t){return function(n){var r,a,i,o=[],u=-1,s=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++u<c;)37===e.charCodeAt(u)&&(o.push(e.slice(s,u)),null!=(a=cm[r=e.charAt(++u)])?r=e.charAt(++u):a="e"===r?" ":"0",(i=t[r])&&(r=i(n,a)),o.push(r),s=u+1);return o.push(e.slice(s,u)),o.join("")}}function _(e,t){return function(n){var r,a,i=im(1900,void 0,1);if(S(i,e,n+="",0)!=n.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(t&&!("Z"in i)&&(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||i.V>53)return null;"w"in i||(i.w=1),"Z"in i?(a=(r=am(im(i.y,0,1))).getUTCDay(),r=a>4||0===a?zg.ceil(r):zg(r),r=Eg.offset(r,7*(i.V-1)),i.y=r.getUTCFullYear(),i.m=r.getUTCMonth(),i.d=r.getUTCDate()+(i.w+6)%7):(a=(r=rm(im(i.y,0,1))).getDay(),r=a>4||0===a?Mg.ceil(r):Mg(r),r=Cg.offset(r,7*(i.V-1)),i.y=r.getFullYear(),i.m=r.getMonth(),i.d=r.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),a="Z"in i?am(im(i.y,0,1)).getUTCDay():rm(im(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(a+5)%7:i.w+7*i.U-(a+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,am(i)):rm(i)}}function S(e,t,n,r){for(var a,i,o=0,u=t.length,s=n.length;o<u;){if(r>=s)return-1;if(37===(a=t.charCodeAt(o++))){if(a=t.charAt(o++),!(i=w[a in cm?t.charAt(o++):a])||(r=i(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}return b.x=k(n,b),b.X=k(r,b),b.c=k(t,b),x.x=k(n,x),x.X=k(r,x),x.c=k(t,x),{format:function(e){var t=k(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=_(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=k(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=_(e+="",!0);return t.toString=function(){return e},t}}}(e),um=om.format,om.parse,sm=om.utcFormat,om.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var By=n(6148),zy=n(4474),Ly=n(3538),Py=n(1020),jy=n(804),Uy=n(9099),Wy=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gy;if((0,ud.Z)(this,n),r=t.call(this),Object.defineProperties((0,By.Z)(r),{_intern:{value:new Map},_key:{value:a}}),null!=e){var i,o=(0,zt.Z)(e);try{for(o.s();!(i=o.n()).done;){var u=(0,gc.Z)(i.value,2),s=u[0],c=u[1];r.set(s,c)}}catch(l){o.e(l)}finally{o.f()}}return r}return(0,sd.Z)(n,[{key:"get",value:function(e){return(0,zy.Z)((0,Ly.Z)(n.prototype),"get",this).call(this,Vy(this,e))}},{key:"has",value:function(e){return(0,zy.Z)((0,Ly.Z)(n.prototype),"has",this).call(this,Vy(this,e))}},{key:"set",value:function(e,t){return(0,zy.Z)((0,Ly.Z)(n.prototype),"set",this).call(this,qy(this,e),t)}},{key:"delete",value:function(e){return(0,zy.Z)((0,Ly.Z)(n.prototype),"delete",this).call(this,Hy(this,e))}}]),n}((0,Uy.Z)(Map));Set;function Vy(e,t){var n=e._intern,r=(0,e._key)(t);return n.has(r)?n.get(r):t}function qy(e,t){var n=e._intern,r=(0,e._key)(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function Hy(e,t){var n=e._intern,r=(0,e._key)(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function Gy(e){return null!==e&&"object"===typeof e?e.valueOf():e}var Xy=Symbol("implicit");function Yy(){var e=new Wy,t=[],n=[],r=Xy;function a(a){var i=e.get(a);if(void 0===i){if(r!==Xy)return r;e.set(a,i=t.push(a)-1)}return n[i%n.length]}return a.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Wy;var r,i=(0,zt.Z)(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;e.has(o)||e.set(o,t.push(o)-1)}}catch(u){i.e(u)}finally{i.f()}return a},a.range=function(e){return arguments.length?(n=Array.from(e),a):n.slice()},a.unknown=function(e){return arguments.length?(r=e,a):r},a.copy=function(){return Yy(t,n).unknown(r)},Nv.apply(a,arguments),a}function Ky(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function $y(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Qy(){}var Jy=.7,eb=1/Jy,tb="\\s*([+-]?\\d+)\\s*",nb="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rb="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ab=/^#([0-9a-f]{3,8})$/,ib=new RegExp("^rgb\\(".concat(tb,",").concat(tb,",").concat(tb,"\\)$")),ob=new RegExp("^rgb\\(".concat(rb,",").concat(rb,",").concat(rb,"\\)$")),ub=new RegExp("^rgba\\(".concat(tb,",").concat(tb,",").concat(tb,",").concat(nb,"\\)$")),sb=new RegExp("^rgba\\(".concat(rb,",").concat(rb,",").concat(rb,",").concat(nb,"\\)$")),cb=new RegExp("^hsl\\(".concat(nb,",").concat(rb,",").concat(rb,"\\)$")),lb=new RegExp("^hsla\\(".concat(nb,",").concat(rb,",").concat(rb,",").concat(nb,"\\)$")),fb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function hb(){return this.rgb().formatHex()}function db(){return this.rgb().formatRgb()}function pb(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ab.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?vb(t):3===n?new bb(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?gb(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?gb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=ib.exec(e))?new bb(t[1],t[2],t[3],1):(t=ob.exec(e))?new bb(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ub.exec(e))?gb(t[1],t[2],t[3],t[4]):(t=sb.exec(e))?gb(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=cb.exec(e))?Cb(t[1],t[2]/100,t[3]/100,1):(t=lb.exec(e))?Cb(t[1],t[2]/100,t[3]/100,t[4]):fb.hasOwnProperty(e)?vb(fb[e]):"transparent"===e?new bb(NaN,NaN,NaN,0):null}function vb(e){return new bb(e>>16&255,e>>8&255,255&e,1)}function gb(e,t,n,r){return r<=0&&(e=t=n=NaN),new bb(e,t,n,r)}function mb(e){return e instanceof Qy||(e=pb(e)),e?new bb((e=e.rgb()).r,e.g,e.b,e.opacity):new bb}function yb(e,t,n,r){return 1===arguments.length?mb(e):new bb(e,t,n,null==r?1:r)}function bb(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function xb(){return"#".concat(Sb(this.r)).concat(Sb(this.g)).concat(Sb(this.b))}function wb(){var e=kb(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(_b(this.r),", ").concat(_b(this.g),", ").concat(_b(this.b)).concat(1===e?")":", ".concat(e,")"))}function kb(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function _b(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Sb(e){return((e=_b(e))<16?"0":"")+e.toString(16)}function Cb(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Nb(e,t,n,r)}function Eb(e){if(e instanceof Nb)return new Nb(e.h,e.s,e.l,e.opacity);if(e instanceof Qy||(e=pb(e)),!e)return new Nb;if(e instanceof Nb)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,u=i-a,s=(i+a)/2;return u?(o=t===i?(n-r)/u+6*(n<r):n===i?(r-t)/u+2:(t-n)/u+4,u/=s<.5?i+a:2-i-a,o*=60):u=s>0&&s<1?0:o,new Nb(o,u,s,e.opacity)}function Ab(e,t,n,r){return 1===arguments.length?Eb(e):new Nb(e,t,n,null==r?1:r)}function Nb(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Tb(e){return(e=(e||0)%360)<0?e+360:e}function Mb(e){return Math.max(0,Math.min(1,e||0))}function Db(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Fb(e,t,n,r,a){var i=e*e,o=i*e;return((1-3*e+3*i-o)*t+(4-6*i+3*o)*n+(1+3*e+3*i-3*o)*r+o*a)/6}function Ib(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[r],i=e[r+1],o=r>0?e[r-1]:2*a-i,u=r<t-1?e[r+2]:2*i-a;return Fb((n-r/t)*t,o,a,i,u)}}function Ob(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),a=e[(r+t-1)%t],i=e[r%t],o=e[(r+1)%t],u=e[(r+2)%t];return Fb((n-r/t)*t,a,i,o,u)}}Ky(Qy,pb,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:hb,formatHex:hb,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Eb(this).formatHsl()},formatRgb:db,toString:db}),Ky(bb,yb,$y(Qy,{brighter:function(e){return e=null==e?eb:Math.pow(eb,e),new bb(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Jy:Math.pow(Jy,e),new bb(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new bb(_b(this.r),_b(this.g),_b(this.b),kb(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:xb,formatHex:xb,formatHex8:function(){return"#".concat(Sb(this.r)).concat(Sb(this.g)).concat(Sb(this.b)).concat(Sb(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:wb,toString:wb})),Ky(Nb,Ab,$y(Qy,{brighter:function(e){return e=null==e?eb:Math.pow(eb,e),new Nb(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Jy:Math.pow(Jy,e),new Nb(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new bb(Db(e>=240?e-240:e+120,a,r),Db(e,a,r),Db(e<120?e+240:e-120,a,r),this.opacity)},clamp:function(){return new Nb(Tb(this.h),Mb(this.s),Mb(this.l),kb(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=kb(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(Tb(this.h),", ").concat(100*Mb(this.s),"%, ").concat(100*Mb(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));var Rb=function(e){return function(){return e}};function Zb(e,t){return function(n){return e+n*t}}function Bb(e,t){var n=t-e;return n?Zb(e,n>180||n<-180?n-360*Math.round(n/360):n):Rb(isNaN(e)?t:e)}function zb(e){return 1===(e=+e)?Lb:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Rb(isNaN(t)?n:t)}}function Lb(e,t){var n=t-e;return n?Zb(e,n):Rb(isNaN(e)?t:e)}var Pb=function e(t){var n=zb(t);function r(e,t){var r=n((e=yb(e)).r,(t=yb(t)).r),a=n(e.g,t.g),i=n(e.b,t.b),o=Lb(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=i(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function jb(e){return function(t){var n,r,a=t.length,i=new Array(a),o=new Array(a),u=new Array(a);for(n=0;n<a;++n)r=yb(t[n]),i[n]=r.r||0,o[n]=r.g||0,u[n]=r.b||0;return i=e(i),o=e(o),u=e(u),r.opacity=1,function(e){return r.r=i(e),r.g=o(e),r.b=u(e),r+""}}}var Ub=jb(Ib),Wb=jb(Ob);function Vb(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,a=t.slice();return function(i){for(n=0;n<r;++n)a[n]=e[n]*(1-i)+t[n]*i;return a}}function qb(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Hb(e,t){return(qb(t)?Vb:Gb)(e,t)}function Gb(e,t){var n,r=t?t.length:0,a=e?Math.min(r,e.length):0,i=new Array(a),o=new Array(r);for(n=0;n<a;++n)i[n]=ex(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<a;++n)o[n]=i[n](e);return o}}function Xb(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Yb(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Kb(e,t){var n,r={},a={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=ex(e[n],t[n]):a[n]=t[n];return function(e){for(n in r)a[n]=r[n](e);return a}}var $b=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qb=new RegExp($b.source,"g");function Jb(e,t){var n,r,a,i=$b.lastIndex=Qb.lastIndex=0,o=-1,u=[],s=[];for(e+="",t+="";(n=$b.exec(e))&&(r=Qb.exec(t));)(a=r.index)>i&&(a=t.slice(i,a),u[o]?u[o]+=a:u[++o]=a),(n=n[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,s.push({i:o,x:Yb(n,r)})),i=Qb.lastIndex;return i<t.length&&(a=t.slice(i),u[o]?u[o]+=a:u[++o]=a),u.length<2?s[0]?function(e){return function(t){return e(t)+""}}(s[0].x):function(e){return function(){return e}}(t):(t=s.length,function(e){for(var n,r=0;r<t;++r)u[(n=s[r]).i]=n.x(e);return u.join("")})}function ex(e,t){var n,r=typeof t;return null==t||"boolean"===r?Rb(t):("number"===r?Yb:"string"===r?(n=pb(t))?(t=n,Pb):Jb:t instanceof pb?Pb:t instanceof Date?Xb:qb(t)?Vb:Array.isArray(t)?Gb:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?Kb:Yb)(e,t)}function tx(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function nx(e,t){var n=Bb(+e,+t);return function(e){var t=n(e);return t-360*Math.floor(t/360)}}function rx(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var ax,ix=180/Math.PI,ox={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ux(e,t,n,r,a,i){var o,u,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:a,translateY:i,rotate:Math.atan2(t,e)*ix,skewX:Math.atan(s)*ix,scaleX:o,scaleY:u}}function sx(e,t,n,r){function a(e){return e.length?e.pop()+" ":""}return function(i,o){var u=[],s=[];return i=e(i),o=e(o),function(e,r,a,i,o,u){if(e!==a||r!==i){var s=o.push("translate(",null,t,null,n);u.push({i:s-4,x:Yb(e,a)},{i:s-2,x:Yb(r,i)})}else(a||i)&&o.push("translate("+a+t+i+n)}(i.translateX,i.translateY,o.translateX,o.translateY,u,s),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(a(n)+"rotate(",null,r)-2,x:Yb(e,t)})):t&&n.push(a(n)+"rotate("+t+r)}(i.rotate,o.rotate,u,s),function(e,t,n,i){e!==t?i.push({i:n.push(a(n)+"skewX(",null,r)-2,x:Yb(e,t)}):t&&n.push(a(n)+"skewX("+t+r)}(i.skewX,o.skewX,u,s),function(e,t,n,r,i,o){if(e!==n||t!==r){var u=i.push(a(i)+"scale(",null,",",null,")");o.push({i:u-4,x:Yb(e,n)},{i:u-2,x:Yb(t,r)})}else 1===n&&1===r||i.push(a(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,o.scaleX,o.scaleY,u,s),i=o=null,function(e){for(var t,n=-1,r=s.length;++n<r;)u[(t=s[n]).i]=t.x(e);return u.join("")}}}var cx=sx((function(e){var t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ox:ux(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),lx=sx((function(e){return null==e?ox:(ax||(ax=document.createElementNS("http://www.w3.org/2000/svg","g")),ax.setAttribute("transform",e),(e=ax.transform.baseVal.consolidate())?ux((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):ox)}),", ",")",")");function fx(e){return((e=Math.exp(e))+1/e)/2}var hx=function e(t,n,r){function a(e,a){var i,o,u=e[0],s=e[1],c=e[2],l=a[0],f=a[1],h=a[2],d=l-u,p=f-s,v=d*d+p*p;if(v<1e-12)o=Math.log(h/c)/t,i=function(e){return[u+e*d,s+e*p,c*Math.exp(t*e*o)]};else{var g=Math.sqrt(v),m=(h*h-c*c+r*v)/(2*c*n*g),y=(h*h-c*c-r*v)/(2*h*n*g),b=Math.log(Math.sqrt(m*m+1)-m),x=Math.log(Math.sqrt(y*y+1)-y);o=(x-b)/t,i=function(e){var r=e*o,a=fx(b),i=c/(n*g)*(a*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(t*r+b)-function(e){return((e=Math.exp(e))-1/e)/2}(b));return[u+i*d,s+i*p,c*a/fx(t*r+b)]}}return i.duration=1e3*o*t/Math.SQRT2,i}return a.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},a}(Math.SQRT2,2,4);function dx(e){return function(t,n){var r=e((t=Ab(t)).h,(n=Ab(n)).h),a=Lb(t.s,n.s),i=Lb(t.l,n.l),o=Lb(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=a(e),t.l=i(e),t.opacity=o(e),t+""}}}var px=dx(Bb),vx=dx(Lb),gx=Math.PI/180,mx=180/Math.PI,yx=.96422,bx=.82521,xx=4/29,wx=6/29,kx=3*wx*wx;function _x(e){if(e instanceof Cx)return new Cx(e.l,e.a,e.b,e.opacity);if(e instanceof Fx)return Ix(e);e instanceof bb||(e=mb(e));var t,n,r=Tx(e.r),a=Tx(e.g),i=Tx(e.b),o=Ex((.2225045*r+.7168786*a+.0606169*i)/1);return r===a&&a===i?t=n=o:(t=Ex((.4360747*r+.3850649*a+.1430804*i)/yx),n=Ex((.0139322*r+.0971045*a+.7141733*i)/bx)),new Cx(116*o-16,500*(t-o),200*(o-n),e.opacity)}function Sx(e,t,n,r){return 1===arguments.length?_x(e):new Cx(e,t,n,null==r?1:r)}function Cx(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function Ex(e){return e>.008856451679035631?Math.pow(e,1/3):e/kx+xx}function Ax(e){return e>wx?e*e*e:kx*(e-xx)}function Nx(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Tx(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Mx(e){if(e instanceof Fx)return new Fx(e.h,e.c,e.l,e.opacity);if(e instanceof Cx||(e=_x(e)),0===e.a&&0===e.b)return new Fx(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*mx;return new Fx(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Dx(e,t,n,r){return 1===arguments.length?Mx(e):new Fx(e,t,n,null==r?1:r)}function Fx(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Ix(e){if(isNaN(e.h))return new Cx(e.l,0,0,e.opacity);var t=e.h*gx;return new Cx(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}function Ox(e,t){var n=Lb((e=Sx(e)).l,(t=Sx(t)).l),r=Lb(e.a,t.a),a=Lb(e.b,t.b),i=Lb(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=a(t),e.opacity=i(t),e+""}}function Rx(e){return function(t,n){var r=e((t=Dx(t)).h,(n=Dx(n)).h),a=Lb(t.c,n.c),i=Lb(t.l,n.l),o=Lb(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=a(e),t.l=i(e),t.opacity=o(e),t+""}}}Ky(Cx,Sx,$y(Qy,{brighter:function(e){return new Cx(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new Cx(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new bb(Nx(3.1338561*(t=yx*Ax(t))-1.6168667*(e=1*Ax(e))-.4906146*(n=bx*Ax(n))),Nx(-.9787684*t+1.9161415*e+.033454*n),Nx(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),Ky(Fx,Dx,$y(Qy,{brighter:function(e){return new Fx(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new Fx(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return Ix(this).rgb()}}));var Zx=Rx(Bb),Bx=Rx(Lb),zx=-.14861,Lx=1.78277,Px=-.29227,jx=-.90649,Ux=1.97294,Wx=Ux*jx,Vx=Ux*Lx,qx=Lx*Px-jx*zx;function Hx(e){if(e instanceof Xx)return new Xx(e.h,e.s,e.l,e.opacity);e instanceof bb||(e=mb(e));var t=e.r/255,n=e.g/255,r=e.b/255,a=(qx*r+Wx*t-Vx*n)/(qx+Wx-Vx),i=r-a,o=(Ux*(n-a)-Px*i)/jx,u=Math.sqrt(o*o+i*i)/(Ux*a*(1-a)),s=u?Math.atan2(o,i)*mx-120:NaN;return new Xx(s<0?s+360:s,u,a,e.opacity)}function Gx(e,t,n,r){return 1===arguments.length?Hx(e):new Xx(e,t,n,null==r?1:r)}function Xx(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Yx(e){return function t(n){function r(t,r){var a=e((t=Gx(t)).h,(r=Gx(r)).h),i=Lb(t.s,r.s),o=Lb(t.l,r.l),u=Lb(t.opacity,r.opacity);return function(e){return t.h=a(e),t.s=i(e),t.l=o(Math.pow(e,n)),t.opacity=u(e),t+""}}return n=+n,r.gamma=t,r}(1)}Ky(Xx,Gx,$y(Qy,{brighter:function(e){return e=null==e?eb:Math.pow(eb,e),new Xx(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Jy:Math.pow(Jy,e),new Xx(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*gx,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),a=Math.sin(e);return new bb(255*(t+n*(zx*r+Lx*a)),255*(t+n*(Px*r+jx*a)),255*(t+n*(Ux*r)),this.opacity)}}));var Kx,$x,Qx=Yx(Bb),Jx=Yx(Lb);function ew(e,t){void 0===t&&(t=e,e=ex);for(var n=0,r=t.length-1,a=t[0],i=new Array(r<0?0:r);n<r;)i[n]=e(a,a=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return i[t](e-t)}}function tw(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}function nw(e,t,n){var r=e-t+2*n;return e?r>0?r:1:0}var rw="linear",aw="log",iw="pow",ow="sqrt",uw="symlog",sw="time",cw="utc",lw="sequential",fw="diverging",hw="quantile",dw="quantize",pw="threshold",vw="ordinal",gw="point",mw="band",yw="bin-ordinal",bw="continuous",xw="discrete",ww="discretizing",kw="interpolating",_w="temporal";function Sw(){var e,t,n=Yy().unknown(void 0),r=n.domain,a=n.range,i=[0,1],o=!1,u=0,s=0,c=.5;function l(){var n=r().length,l=i[1]<i[0],f=i[1-l],h=nw(n,u,s),d=i[l-0];e=(f-d)/(h||1),o&&(e=Math.floor(e)),d+=(f-d-e*(n-u))*c,t=e*(1-u),o&&(d=Math.round(d),t=Math.round(t));var p=function(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),i=new Array(a);++r<a;)i[r]=e+r*n;return i}(n).map((function(t){return d+e*t}));return a(l?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),l()):r()},n.range=function(e){return arguments.length?(i=[+e[0],+e[1]],l()):i.slice()},n.rangeRound=function(e){return i=[+e[0],+e[1]],o=!0,l()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(o=!!e,l()):o},n.padding=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),u=s,l()):u},n.paddingInner=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),l()):u},n.paddingOuter=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),l()):s},n.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),l()):c},n.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var n,o,u,s=i[1]<i[0],c=s?a().reverse():a(),l=c.length-1,f=+e[0],h=+e[1];if(f===f&&h===h&&(h<f&&(u=f,f=h,h=u),!(h<c[0]||f>i[1-s])))return n=Math.max(0,ap(c,f)-1),o=f===h?n:ap(c,h)-1,f-c[n]>t+1e-10&&++n,s&&(u=n,n=l-o,o=l-u),n>o?void 0:r().slice(n,o+1)}},n.invert=function(e){var t=n.invertRange([e,e]);return t?t[0]:t},n.copy=function(){return Sw().domain(r()).range(i).round(o).paddingInner(u).paddingOuter(s).align(c)},l()}function Cw(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return Cw(t())},e}var Ew=Array.prototype.map;function Aw(e){return Ew.call(e,cn)}var Nw=Array.prototype.slice;var Tw=new Map,Mw=Symbol("vega_scale");function Dw(e){return e[Mw]=!0,e}function Fw(e,t,n){var r=function(){var n=t();return n.invertRange||(n.invertRange=n.invert?function(e){return function(t){var n,r=t[0],a=t[1];return a<r&&(n=r,r=a,a=n),[e.invert(r),e.invert(a)]}}(n):n.invertExtent?function(e){return function(t){var n,r,a,i,o=e.range(),u=t[0],s=t[1],c=-1;for(s<u&&(r=u,u=s,s=r),a=0,i=o.length;a<i;++a)o[a]>=u&&o[a]<=s&&(c<0&&(c=a),n=a);if(!(c<0))return u=e.invertExtent(o[c]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}}(n):void 0),n.type=e,Dw(n)};return r.metadata=Yn(wn(n)),r}function Iw(e,t,n){return arguments.length>1?(Tw.set(e,Fw(e,t,n)),this):Ow(e)?Tw.get(e):void 0}function Ow(e){return Tw.has(e)}function Rw(e,t){var n=Tw.get(e);return n&&n.metadata[t]}function Zw(e){return Rw(e,bw)}function Bw(e){return Rw(e,xw)}function zw(e){return Rw(e,ww)}function Lw(e){return Rw(e,aw)}function Pw(e){return Rw(e,kw)}function jw(e){return Rw(e,hw)}Iw("identity",(function e(t){var n;function r(e){return null==e||isNaN(e=+e)?n:e}return r.invert=r,r.domain=r.range=function(e){return arguments.length?(t=Array.from(e,bv),r):t.slice()},r.unknown=function(e){return arguments.length?(n=e,r):n},r.copy=function(){return e(t).unknown(n)},t=arguments.length?Array.from(t,bv):[0,1],Hv(r)})),Iw(rw,(function e(){var t=Av();return t.copy=function(){return Cv(t,e())},Nv.apply(t,arguments),Hv(t)}),bw),Iw(aw,(function e(){var t=eg(Ev()).domain([1,10]);return t.copy=function(){return Cv(t,e()).base(t.base())},Nv.apply(t,arguments),t}),[bw,aw]),Iw(iw,ig,bw),Iw(ow,(function(){return ig.apply(null,arguments).exponent(.5)}),bw),Iw(uw,(function e(){var t=sg(Ev());return t.copy=function(){return Cv(t,e()).constant(t.constant())},Nv.apply(t,arguments)}),bw),Iw(sw,(function(){return Nv.apply(Ny(tm,nm,Hg,Vg,Tg,Cg,_g,wg,xg,um).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}),[bw,_w]),Iw(cw,(function(){return Nv.apply(Ny($g,Qg,Gg,qg,Bg,Eg,Sg,kg,xg,sm).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}),[bw,_w]),Iw(lw,Dy,[bw,kw]),Iw("".concat(lw,"-").concat(rw),Dy,[bw,kw]),Iw("".concat(lw,"-").concat(aw),(function e(){var t=eg(Ty()).domain([1,10]);return t.copy=function(){return My(t,e()).base(t.base())},Tv.apply(t,arguments)}),[bw,kw,aw]),Iw("".concat(lw,"-").concat(iw),Fy,[bw,kw]),Iw("".concat(lw,"-").concat(ow),(function(){return Fy.apply(null,arguments).exponent(.5)}),[bw,kw]),Iw("".concat(lw,"-").concat(uw),(function e(){var t=sg(Ty());return t.copy=function(){return My(t,e()).constant(t.constant())},Tv.apply(t,arguments)}),[bw,kw]),Iw("".concat(fw,"-").concat(rw),(function e(){var t=Hv(Oy()(wv));return t.copy=function(){return My(t,e())},Tv.apply(t,arguments)}),[bw,kw]),Iw("".concat(fw,"-").concat(aw),(function e(){var t=eg(Oy()).domain([.1,1,10]);return t.copy=function(){return My(t,e()).base(t.base())},Tv.apply(t,arguments)}),[bw,kw,aw]),Iw("".concat(fw,"-").concat(iw),Ry,[bw,kw]),Iw("".concat(fw,"-").concat(ow),(function(){return Ry.apply(null,arguments).exponent(.5)}),[bw,kw]),Iw("".concat(fw,"-").concat(uw),(function e(){var t=sg(Oy());return t.copy=function(){return My(t,e()).constant(t.constant())},Tv.apply(t,arguments)}),[bw,kw]),Iw(hw,(function e(){var t,n=[],r=[],a=[];function i(){var e=0,t=Math.max(1,r.length);for(a=new Array(t-1);++e<t;)a[e-1]=Zy(n,e/t);return o}function o(e){return null==e||isNaN(e=+e)?t:r[xp(a,e)]}return o.invertExtent=function(e){var t=r.indexOf(e);return t<0?[NaN,NaN]:[t>0?a[t-1]:n[0],t<a.length?a[t]:n[n.length-1]]},o.domain=function(e){if(!arguments.length)return n.slice();n=[];var t,r=(0,zt.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;null==a||isNaN(a=+a)||n.push(a)}}catch(o){r.e(o)}finally{r.f()}return n.sort(dp),i()},o.range=function(e){return arguments.length?(r=Array.from(e),i()):r.slice()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.quantiles=function(){return a.slice()},o.copy=function(){return e().domain(n).range(r).unknown(t)},Nv.apply(o,arguments)}),[ww,hw]),Iw(dw,(function e(){var t,n=0,r=1,a=1,i=[.5],o=[0,1];function u(e){return null!=e&&e<=e?o[xp(i,e,0,a)]:t}function s(){var e=-1;for(i=new Array(a);++e<a;)i[e]=((e+1)*r-(e-a)*n)/(a+1);return u}return u.domain=function(e){var t,a;return arguments.length?(t=e,a=(0,gc.Z)(t,2),n=a[0],r=a[1],n=+n,r=+r,s()):[n,r]},u.range=function(e){return arguments.length?(a=(o=Array.from(e)).length-1,s()):o.slice()},u.invertExtent=function(e){var t=o.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,i[0]]:t>=a?[i[a-1],r]:[i[t-1],i[t]]},u.unknown=function(e){return arguments.length?(t=e,u):u},u.thresholds=function(){return i.slice()},u.copy=function(){return e().domain([n,r]).range(o).unknown(t)},Nv.apply(Hv(u),arguments)}),ww),Iw(pw,(function e(){var t,n=[.5],r=[0,1],a=1;function i(e){return null!=e&&e<=e?r[xp(n,e,0,a)]:t}return i.domain=function(e){return arguments.length?(n=Array.from(e),a=Math.min(n.length,r.length-1),i):n.slice()},i.range=function(e){return arguments.length?(r=Array.from(e),a=Math.min(n.length,r.length-1),i):r.slice()},i.invertExtent=function(e){var t=r.indexOf(e);return[n[t-1],n[t]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return e().domain(n).range(r).unknown(t)},Nv.apply(i,arguments)}),ww),Iw(yw,(function e(){var t=[],n=[];function r(e){return null==e||e!==e?void 0:n[(ip(t,e)-1)%n.length]}return r.domain=function(e){return arguments.length?(t=Aw(e),r):t.slice()},r.range=function(e){return arguments.length?(n=Nw.call(e),r):n.slice()},r.tickFormat=function(e,n){return qv(t[0],sn(t),null==e?10:e,n)},r.copy=function(){return e().domain(r.domain()).range(r.range())},r}),[xw,ww]),Iw(vw,Yy,xw),Iw(mw,Sw,xw),Iw(gw,(function(){return Cw(Sw().paddingInner(1))}),xw);var Uw=["clamp","base","constant","exponent"];function Ww(e,t,n){return ew(qw(t||"rgb",n),e)}function Vw(e,t,n){var r,a,i,o=n-t;return o&&Number.isFinite(o)?(r=(a=e.type).indexOf("-"),a=r<0?a:a.slice(r+1),i=Iw(a)().domain([t,n]).range([0,1]),Uw.forEach((function(t){return e[t]?i[t](e[t]()):0})),i):Nn(.5)}function qw(e,t){var n=o[function(e){return"interpolate"+e.toLowerCase().split("-").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("")}(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function Hw(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function Gw(e,t){for(var n in e)Yw(n,t(e[n]))}var Xw={};function Yw(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Xw[e]=t,this):Xw[e]}Gw({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},Hw),Gw({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(function(e){return Ww(Hw(e))}));var Kw="symbol",$w=function(e){return nn(e)?e.map((function(e){return String(e)})):String(e)},Qw=function(e,t){return e[1]-t[1]},Jw=function(e,t){return t[1]-e[1]};function ek(e,t,n){var r;return Ln(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),null!=n&&(t=Math.min(t,Math.floor(Wn(e.domain())/n||1)+1))),rn(t)&&(r=t.step,t=t.interval),Pn(t)&&(t=e.type===sw?pi(t):e.type==cw?vi(t):Ht("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function tk(e,t,n){var r=e.range(),a=r[0],i=sn(r),o=Qw;if(a>i&&(r=i,i=a,a=r,o=Jw),a=Math.floor(a),i=Math.ceil(i),t=t.map((function(t){return[t,e(t)]})).filter((function(e){return a<=e[1]&&e[1]<=i})).sort(o).map((function(e){return e[0]})),n>0&&t.length>1){for(var u=[t[0],sn(t)];t.length>n&&t.length>=3;)t=t.filter((function(e,t){return!(t%2)}));t.length<3&&(t=u)}return t}function nk(e,t){return e.bins?tk(e,e.bins):e.ticks?e.ticks(t):e.domain()}function rk(e,t,n,r,a,i){var o=t.type,u=$w;if(o===sw||a===sw)u=e.timeFormat(r);else if(o===cw||a===cw)u=e.utcFormat(r);else if(Lw(o)){var s=e.formatFloat(r);if(i||t.bins)u=s;else{var c=ak(t,n,!1);u=function(e){return c(e)?s(e):""}}}else if(t.tickFormat){var l=t.domain();u=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(u=e.format(r));return u}function ak(e,t,n){var r=nk(e,t),a=e.base(),i=Math.log(a),o=Math.max(1,a*t/r.length),u=function(e){var t=e/Math.pow(a,Math.round(Math.log(e)/i));return t*a<a-.5&&(t*=a),t<=o};return n?r.filter(u):u}var ik=(Kx={},(0,Ir.Z)(Kx,hw,"quantiles"),(0,Ir.Z)(Kx,dw,"thresholds"),(0,Ir.Z)(Kx,pw,"domain"),Kx),ok=($x={},(0,Ir.Z)($x,hw,"quantiles"),(0,Ir.Z)($x,dw,"domain"),$x);function uk(e,t){return e.bins?function(e){var t=e.slice(0,-1);return t.max=sn(e),t}(e.bins):e.type===aw?ak(e,t,!0):ik[e.type]?function(e){var t=[-1/0].concat(e);return t.max=1/0,t}(e[ik[e.type]]()):nk(e,t)}function sk(e,t,n,r,a,i,o){var u=ok[t.type]&&i!==sw&&i!==cw?function(e,t,n){var r,a=t[ok[t.type]](),i=a.length,o=i>1?a[1]-a[0]:a[0];for(r=1;r<i;++r)o=Math.min(o,a[r]-a[r-1]);return e.formatSpan(0,o,30,n)}(e,t,a):rk(e,t,n,a,i,o);return r===Kw&&function(e){return ik[e.type]||e.bins}(t)?ck(u):"discrete"===r?fk(u):hk(u)}var ck=function(e){return function(t,n,r){var a=lk(r[n+1],lk(r.max,1/0)),i=dk(t,e),o=dk(a,e);return i&&o?i+" \u2013 "+o:o?"< "+o:"\u2265 "+i}},lk=function(e,t){return null!=e?e:t},fk=function(e){return function(t,n){return n?e(t):null}},hk=function(e){return function(t){return e(t)}},dk=function(e,t){return Number.isFinite(e)?t(e):null};function pk(e,t,n,r){var a=r||t.type;return Pn(n)&&function(e){return Rw(e,_w)}(a)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||a!==sw?n||a!==cw?sk(e,t,5,null,n,r,!0):e.utcFormat("%A, %d %B %Y, %X UTC"):e.timeFormat("%A, %d %B %Y, %X")}function vk(e,t,n){n=n||{};var r=Math.max(3,n.maxlen||7),a=pk(e,t,n.format,n.formatType);if(zw(t.type)){var i=uk(t).slice(1).map(a),o=i.length;return"".concat(o," boundar").concat(1===o?"y":"ies",": ").concat(i.join(", "))}if(Bw(t.type)){var u=t.domain(),s=u.length,c=s>r?u.slice(0,r-2).map(a).join(", ")+", ending with "+u.slice(-1).map(a):u.map(a).join(", ");return"".concat(s," value").concat(1===s?"":"s",": ").concat(c)}var l=t.domain();return"values from ".concat(a(l[0])," to ").concat(a(sn(l)))}var gk=0;var mk="p_";function yk(e){return e&&e.gradient}function bk(e,t,n){var r=e.gradient,a=e.id,i="radial"===r?mk:"";return a||(a=e.id="gradient_"+gk++,"radial"===r?(e.x1=xk(e.x1,.5),e.y1=xk(e.y1,.5),e.r1=xk(e.r1,0),e.x2=xk(e.x2,.5),e.y2=xk(e.y2,.5),e.r2=xk(e.r2,.5),i=mk):(e.x1=xk(e.x1,0),e.y1=xk(e.y1,0),e.x2=xk(e.x2,1),e.y2=xk(e.y2,0))),t[a]=e,"url("+(n||"")+"#"+i+a+")"}function xk(e,t){return null!=e?e:t}var wk={basis:{curve:function(e){return new Jf(e)}},"basis-closed":{curve:function(e){return new th(e)}},"basis-open":{curve:function(e){return new nh(e)}},bundle:{curve:ah,tension:"beta",value:.85},cardinal:{curve:uh,tension:"tension",value:0},"cardinal-open":{curve:ch,tension:"tension",value:0},"cardinal-closed":{curve:fh,tension:"tension",value:0},"catmull-rom":{curve:Ah,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Th,tension:"alpha",value:.5},"catmull-rom-open":{curve:Dh,tension:"alpha",value:.5},linear:{curve:Ih},"linear-closed":{curve:function(e){return new Oh(e)}},monotone:{horizontal:function(e){return new Ph(e)},vertical:function(e){return new Lh(e)}},natural:{curve:function(e){return new Uh(e)}},step:{curve:function(e){return new Vh(e,.5)}},"step-after":{curve:function(e){return new Vh(e,1)}},"step-before":{curve:function(e){return new Vh(e,0)}}};function kk(e,t,n){var r=In(wk,e)&&wk[e],a=null;return r&&(a=r.curve||r[t||"vertical"],r.tension&&null!=n&&(a=a[r.tension](n))),a}var _k={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Sk=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Ck=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Ek=/^((\s+,?\s*)|(,\s*))/,Ak=/^[01]/;function Nk(e){var t=[];return(e.match(Sk)||[]).forEach((function(e){var n=e[0],r=n.toLowerCase(),a=_k[r],i=function(e,t,n){for(var r=[],a=0;t&&a<n.length;)for(var i=0;i<t;++i){var o="a"!==e||3!==i&&4!==i?Ck:Ak,u=n.slice(a).match(o);if(null===u)throw Error("Invalid SVG path, incorrect parameter type");a+=u[0].length,r.push(+u[0]);var s=n.slice(a).match(Ek);null!==s&&(a+=s[0].length)}return r}(r,a,e.slice(1).trim()),o=i.length;if(o<a||o&&o%a!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([n].concat((0,$n.Z)(i.slice(0,a)))),o!==a){"m"===r&&(n="M"===n?"L":"l");for(var u=a;u<o;u+=a)t.push([n].concat((0,$n.Z)(i.slice(u,u+a))))}})),t}var Tk=Math.PI/180,Mk=Math.PI/2,Dk=2*Math.PI,Fk=Math.sqrt(3)/2,Ik={},Ok={},Rk=[].join;function Zk(e){var t=Rk.call(e);if(Ok[t])return Ok[t];var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],u=e[5],s=e[6],c=e[7],l=c*o,f=-s*u,h=s*o,d=c*u,p=Math.cos(a),v=Math.sin(a),g=Math.cos(i),m=Math.sin(i),y=.5*(i-a),b=Math.sin(.5*y),x=8/3*b*b/Math.sin(y),w=n+p-x*v,k=r+v+x*p,_=n+g,S=r+m,C=_+x*m,E=S-x*g;return Ok[t]=[l*w+f*k,h*w+d*k,l*C+f*E,h*C+d*E,l*_+f*S,h*_+d*S]}var Bk=["l",0,0,0,0,0,0,0];function zk(e,t,n){var r=Bk[0]=e[0];if("a"===r||"A"===r)Bk[1]=t*e[1],Bk[2]=n*e[2],Bk[3]=e[3],Bk[4]=e[4],Bk[5]=e[5],Bk[6]=t*e[6],Bk[7]=n*e[7];else if("h"===r||"H"===r)Bk[1]=t*e[1];else if("v"===r||"V"===r)Bk[1]=n*e[1];else for(var a=1,i=e.length;a<i;++a)Bk[a]=(a%2==1?t:n)*e[a];return Bk}function Lk(e,t,n,r,a,i){var o,u,s,c,l,f=null,h=0,d=0,p=0,v=0,g=0,m=0;null==n&&(n=0),null==r&&(r=0),null==a&&(a=1),null==i&&(i=a),e.beginPath&&e.beginPath();for(var y=0,b=t.length;y<b;++y){switch(o=t[y],1===a&&1===i||(o=zk(o,a,i)),o[0]){case"l":h+=o[1],d+=o[2],e.lineTo(h+n,d+r);break;case"L":h=o[1],d=o[2],e.lineTo(h+n,d+r);break;case"h":h+=o[1],e.lineTo(h+n,d+r);break;case"H":h=o[1],e.lineTo(h+n,d+r);break;case"v":d+=o[1],e.lineTo(h+n,d+r);break;case"V":d=o[1],e.lineTo(h+n,d+r);break;case"m":g=h+=o[1],m=d+=o[2],e.moveTo(h+n,d+r);break;case"M":g=h=o[1],m=d=o[2],e.moveTo(h+n,d+r);break;case"c":u=h+o[5],s=d+o[6],p=h+o[3],v=d+o[4],e.bezierCurveTo(h+o[1]+n,d+o[2]+r,p+n,v+r,u+n,s+r),h=u,d=s;break;case"C":h=o[5],d=o[6],p=o[3],v=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,p+n,v+r,h+n,d+r);break;case"s":u=h+o[3],s=d+o[4],p=2*h-p,v=2*d-v,e.bezierCurveTo(p+n,v+r,h+o[1]+n,d+o[2]+r,u+n,s+r),p=h+o[1],v=d+o[2],h=u,d=s;break;case"S":u=o[3],s=o[4],p=2*h-p,v=2*d-v,e.bezierCurveTo(p+n,v+r,o[1]+n,o[2]+r,u+n,s+r),h=u,d=s,p=o[1],v=o[2];break;case"q":u=h+o[3],s=d+o[4],p=h+o[1],v=d+o[2],e.quadraticCurveTo(p+n,v+r,u+n,s+r),h=u,d=s;break;case"Q":u=o[3],s=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,u+n,s+r),h=u,d=s,p=o[1],v=o[2];break;case"t":u=h+o[1],s=d+o[2],null===f[0].match(/[QqTt]/)?(p=h,v=d):"t"===f[0]?(p=2*h-c,v=2*d-l):"q"===f[0]&&(p=2*h-p,v=2*d-v),c=p,l=v,e.quadraticCurveTo(p+n,v+r,u+n,s+r),d=s,p=(h=u)+o[1],v=d+o[2];break;case"T":u=o[1],s=o[2],p=2*h-p,v=2*d-v,e.quadraticCurveTo(p+n,v+r,u+n,s+r),h=u,d=s;break;case"a":Pk(e,h+n,d+r,[o[1],o[2],o[3],o[4],o[5],o[6]+h+n,o[7]+d+r]),h+=o[6],d+=o[7];break;case"A":Pk(e,h+n,d+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),h=o[6],d=o[7];break;case"z":case"Z":h=g,d=m,e.closePath()}f=o}}function Pk(e,t,n,r){for(var a=function(e,t,n,r,a,i,o,u,s){var c=Rk.call(arguments);if(Ik[c])return Ik[c];var l=o*Tk,f=Math.sin(l),h=Math.cos(l),d=h*(u-e)*.5+f*(s-t)*.5,p=h*(s-t)*.5-f*(u-e)*.5,v=d*d/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);v>1&&(n*=v=Math.sqrt(v),r*=v);var g=h/n,m=f/n,y=-f/r,b=h/r,x=g*u+m*s,w=y*u+b*s,k=g*e+m*t,_=y*e+b*t,S=1/((k-x)*(k-x)+(_-w)*(_-w))-.25;S<0&&(S=0);var C=Math.sqrt(S);i==a&&(C=-C);var E=.5*(x+k)-C*(_-w),A=.5*(w+_)+C*(k-x),N=Math.atan2(w-A,x-E),T=Math.atan2(_-A,k-E)-N;T<0&&1===i?T+=Dk:T>0&&0===i&&(T-=Dk);for(var M=Math.ceil(Math.abs(T/(Mk+.001))),D=[],F=0;F<M;++F){var I=N+F*T/M,O=N+(F+1)*T/M;D[F]=[E,A,I,O,n,r,f,h]}return Ik[c]=D}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n),i=0;i<a.length;++i){var o=Zk(a[i]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}var jk=.5773502691896257,Uk={circle:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Dk)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,a=n/2.5,i=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-i),e.lineTo(a,-i),e.lineTo(0,-n),e.lineTo(-a,-i),e.lineTo(-r,-i),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Fk*n,a=r-n*jk,i=n/4;e.moveTo(0,-r-a),e.lineTo(-i,r-a),e.lineTo(i,r-a),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Fk*n,a=r-n*jk;e.moveTo(0,-r-a),e.lineTo(-n,r-a),e.lineTo(n,r-a),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Fk*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Fk*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Fk*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Fk*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function Wk(e){return In(Uk,e)?Uk[e]:function(e){if(!In(Vk,e)){var t=Nk(e);Vk[e]={draw:function(e,n){Lk(e,t,0,0,Math.sqrt(n)/2)}}}return Vk[e]}(e)}var Vk={};var qk=.448084975506;function Hk(e){return e.x}function Gk(e){return e.y}function Xk(e){return e.width}function Yk(e){return e.height}function Kk(e){return"function"===typeof e?e:function(){return+e}}function $k(e,t,n){return Math.max(t,Math.min(e,n))}function Qk(e,t){return null!=e?e:t}var Jk=function(e){return e.x||0},e_=function(e){return e.y||0},t_=function(e){return!(!1===e.defined)},n_=function(){var e=gd,t=md,n=qh(0),r=null,a=yd,i=bd,o=xd,u=null,s=vd(c);function c(){var c,l,f=+e.apply(this,arguments),h=+t.apply(this,arguments),d=a.apply(this,arguments)-wh,p=i.apply(this,arguments)-wh,v=hh(p-d),g=p>d;if(u||(u=c=s()),h<f&&(l=h,h=f,f=l),h>bh)if(v>kh-bh)u.moveTo(h*ph(d),h*mh(d)),u.arc(0,0,h,d,p,!g),f>bh&&(u.moveTo(f*ph(p),f*mh(p)),u.arc(0,0,f,p,d,g));else{var m,y,b=d,x=p,w=d,k=p,_=v,S=v,C=o.apply(this,arguments)/2,E=C>bh&&(r?+r.apply(this,arguments):yh(f*f+h*h)),A=gh(hh(h-f)/2,+n.apply(this,arguments)),N=A,T=A;if(E>bh){var M=Sh(E/f*mh(C)),D=Sh(E/h*mh(C));(_-=2*M)>bh?(w+=M*=g?1:-1,k-=M):(_=0,w=k=(d+p)/2),(S-=2*D)>bh?(b+=D*=g?1:-1,x-=D):(S=0,b=x=(d+p)/2)}var F=h*ph(b),I=h*mh(b),O=f*ph(k),R=f*mh(k);if(A>bh){var Z,B=h*ph(x),z=h*mh(x),L=f*ph(w),P=f*mh(w);if(v<xh)if(Z=wd(F,I,L,P,B,z,O,R)){var j=F-Z[0],U=I-Z[1],W=B-Z[0],V=z-Z[1],q=1/mh(_h((j*W+U*V)/(yh(j*j+U*U)*yh(W*W+V*V)))/2),H=yh(Z[0]*Z[0]+Z[1]*Z[1]);N=gh(A,(f-H)/(q-1)),T=gh(A,(h-H)/(q+1))}else N=T=0}S>bh?T>bh?(m=kd(L,P,F,I,h,T,g),y=kd(B,z,O,R,h,T,g),u.moveTo(m.cx+m.x01,m.cy+m.y01),T<A?u.arc(m.cx,m.cy,T,dh(m.y01,m.x01),dh(y.y01,y.x01),!g):(u.arc(m.cx,m.cy,T,dh(m.y01,m.x01),dh(m.y11,m.x11),!g),u.arc(0,0,h,dh(m.cy+m.y11,m.cx+m.x11),dh(y.cy+y.y11,y.cx+y.x11),!g),u.arc(y.cx,y.cy,T,dh(y.y11,y.x11),dh(y.y01,y.x01),!g))):(u.moveTo(F,I),u.arc(0,0,h,b,x,!g)):u.moveTo(F,I),f>bh&&_>bh?N>bh?(m=kd(O,R,B,z,f,-N,g),y=kd(F,I,L,P,f,-N,g),u.lineTo(m.cx+m.x01,m.cy+m.y01),N<A?u.arc(m.cx,m.cy,N,dh(m.y01,m.x01),dh(y.y01,y.x01),!g):(u.arc(m.cx,m.cy,N,dh(m.y01,m.x01),dh(m.y11,m.x11),!g),u.arc(0,0,f,dh(m.cy+m.y11,m.cx+m.x11),dh(y.cy+y.y11,y.cx+y.x11),g),u.arc(y.cx,y.cy,N,dh(y.y11,y.x11),dh(y.y01,y.x01),!g))):u.arc(0,0,f,k,w,g):u.lineTo(O,R)}else u.moveTo(0,0);if(u.closePath(),c)return u=null,c+""||null}return c.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+a.apply(this,arguments)+ +i.apply(this,arguments))/2-xh/2;return[ph(r)*n,mh(r)*n]},c.innerRadius=function(t){return arguments.length?(e="function"===typeof t?t:qh(+t),c):e},c.outerRadius=function(e){return arguments.length?(t="function"===typeof e?e:qh(+e),c):t},c.cornerRadius=function(e){return arguments.length?(n="function"===typeof e?e:qh(+e),c):n},c.padRadius=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:qh(+e),c):r},c.startAngle=function(e){return arguments.length?(a="function"===typeof e?e:qh(+e),c):a},c.endAngle=function(e){return arguments.length?(i="function"===typeof e?e:qh(+e),c):i},c.padAngle=function(e){return arguments.length?(o="function"===typeof e?e:qh(+e),c):o},c.context=function(e){return arguments.length?(u=null==e?null:e,c):u},c}().startAngle((function(e){return e.startAngle||0})).endAngle((function(e){return e.endAngle||0})).padAngle((function(e){return e.padAngle||0})).innerRadius((function(e){return e.innerRadius||0})).outerRadius((function(e){return e.outerRadius||0})).cornerRadius((function(e){return e.cornerRadius||0})),r_=Ad().x(Jk).y1(e_).y0((function(e){return(e.y||0)+(e.height||0)})).defined(t_),a_=Ad().y(e_).x1(Jk).x0((function(e){return(e.x||0)+(e.width||0)})).defined(t_),i_=Ed().x(Jk).y(e_).defined(t_),o_=function(){var e=Hk,t=Gk,n=Xk,r=Yk,a=Kk(0),i=a,o=a,u=a,s=null;function c(c,l,f){var h,d=null!=l?l:+e.call(this,c),p=null!=f?f:+t.call(this,c),v=+n.call(this,c),g=+r.call(this,c),m=Math.min(v,g)/2,y=$k(+a.call(this,c),0,m),b=$k(+i.call(this,c),0,m),x=$k(+o.call(this,c),0,m),w=$k(+u.call(this,c),0,m);if(s||(s=h=Kd()),y<=0&&b<=0&&x<=0&&w<=0)s.rect(d,p,v,g);else{var k=d+v,_=p+g;s.moveTo(d+y,p),s.lineTo(k-b,p),s.bezierCurveTo(k-qk*b,p,k,p+qk*b,k,p+b),s.lineTo(k,_-w),s.bezierCurveTo(k,_-qk*w,k-qk*w,_,k-w,_),s.lineTo(d+x,_),s.bezierCurveTo(d+qk*x,_,d,_-qk*x,d,_-x),s.lineTo(d,p+y),s.bezierCurveTo(d,p+qk*y,d+qk*y,p,d+y,p),s.closePath()}if(h)return s=null,h+""||null}return c.x=function(t){return arguments.length?(e=Kk(t),c):e},c.y=function(e){return arguments.length?(t=Kk(e),c):t},c.width=function(e){return arguments.length?(n=Kk(e),c):n},c.height=function(e){return arguments.length?(r=Kk(e),c):r},c.cornerRadius=function(e,t,n,r){return arguments.length?(a=Kk(e),i=null!=t?Kk(t):a,u=null!=n?Kk(n):a,o=null!=r?Kk(r):i,c):a},c.context=function(e){return arguments.length?(s=null==e?null:e,c):s},c}().x(Jk).y(e_).width((function(e){return e.width||0})).height((function(e){return e.height||0})).cornerRadius((function(e){return Qk(e.cornerRadiusTopLeft,e.cornerRadius)||0}),(function(e){return Qk(e.cornerRadiusTopRight,e.cornerRadius)||0}),(function(e){return Qk(e.cornerRadiusBottomRight,e.cornerRadius)||0}),(function(e){return Qk(e.cornerRadiusBottomLeft,e.cornerRadius)||0})),u_=function(e,t){var n=null,r=vd(a);function a(){var a;if(n||(n=a=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return e="function"===typeof e?e:qh(e||Ud),t="function"===typeof t?t:qh(void 0===t?64:+t),a.type=function(t){return arguments.length?(e="function"===typeof t?t:qh(t),a):e},a.size=function(e){return arguments.length?(t="function"===typeof e?e:qh(+e),a):t},a.context=function(e){return arguments.length?(n=null==e?null:e,a):n},a}().type((function(e){return Wk(e.shape||"circle")})).size((function(e){return Qk(e.size,64)})),s_=function(){var e,t,n,r,a,i,o,u,s=null;function c(e,t,n){var r=n/2;if(a){var c=o-t,l=e-i;if(c||l){var f=Math.hypot(c,l),h=(c/=f)*u,d=(l/=f)*u,p=Math.atan2(l,c);s.moveTo(i-h,o-d),s.lineTo(e-c*r,t-l*r),s.arc(e,t,r,p-Math.PI,p),s.lineTo(i+h,o+d),s.arc(i,o,u,p,p+Math.PI)}else s.arc(e,t,r,0,Dk);s.closePath()}else a=1;i=e,o=t,u=r}function l(i){var o,u,l,f=i.length,h=!1;for(null==s&&(s=l=Kd()),o=0;o<=f;++o)!(o<f&&r(u=i[o],o,i))===h&&(h=!h)&&(a=0),h&&c(+e(u,o,i),+t(u,o,i),+n(u,o,i));if(l)return s=null,l+""||null}return l.x=function(t){return arguments.length?(e=t,l):e},l.y=function(e){return arguments.length?(t=e,l):t},l.size=function(e){return arguments.length?(n=e,l):n},l.defined=function(e){return arguments.length?(r=e,l):r},l.context=function(e){return arguments.length?(s=null==e?null:e,l):s},l}().x(Jk).y(e_).defined(t_).size((function(e){return e.size||1}));function c_(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function l_(e,t,n,r){return o_.context(e)(t,n,r)}var f_=1;function h_(e,t,n){var r=t.clip,a=e._defs,i=t.clip_id||(t.clip_id="clip"+f_++),o=a.clipping[i]||(a.clipping[i]={id:i});return kn(r)?o.path=r(null):c_(n)?o.path=l_(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+i+")"}function d_(e){this.clear(),e&&this.union(e)}function p_(e){this.mark=e,this.bounds=this.bounds||new d_}function v_(e){p_.call(this,e),this.items=this.items||[]}function g_(e){this._pending=0,this._loader=e||ws()}function m_(e){e._pending+=1}function y_(e){e._pending-=1}function b_(e,t,n){if(t.stroke&&0!==t.opacity&&0!==t.strokeOpacity){var r=null!=t.strokeWidth?+t.strokeWidth:1;e.expand(r+(n?function(e,t){return e.strokeJoin&&"miter"!==e.strokeJoin?0:t}(t,r):0))}return e}d_.prototype={clone:function(){return new d_(this)},clear:function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty:function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals:function(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set:function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add:function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand:function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round:function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale:function(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate:function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate:function(e,t,n){var r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints:function(e,t,n){var r=this.x1,a=this.y1,i=this.x2,o=this.y2,u=Math.cos(e),s=Math.sin(e),c=t-t*u+n*s,l=n-t*s-n*u;return[u*r-s*a+c,s*r+u*a+l,u*r-s*o+c,s*r+u*o+l,u*i-s*a+c,s*i+u*a+l,u*i-s*o+c,s*i+u*o+l]},union:function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect:function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses:function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith:function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects:function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains:function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1}},Zn(v_,p_),g_.prototype={pending:function(){return this._pending},sanitizeURL:function(e){var t=this;return m_(t),t._loader.sanitize(e,{context:"href"}).then((function(e){return y_(t),e})).catch((function(){return y_(t),null}))},loadImage:function(e){var t=this,n=Qd();return m_(t),t._loader.sanitize(e,{context:"image"}).then((function(e){var r=e.href;if(!r||!n)throw{url:r};var a=new n,i=In(e,"crossOrigin")?e.crossOrigin:"anonymous";return null!=i&&(a.crossOrigin=i),a.onload=function(){return y_(t)},a.onerror=function(){return y_(t)},a.src=r,a})).catch((function(e){return y_(t),{complete:!1,width:0,height:0,src:e&&e.url||""}}))},ready:function(){var e=this;return new Promise((function(t){!function n(r){e.pending()?setTimeout((function(){n(!0)}),10):t(r)}(!1)}))}};var x_,w_,k_,__,S_,C_,E_,A_,N_=Dk-1e-8,T_=function(e,t){return x_.add(e,t)},M_=function(e,t){return T_(w_=e,k_=t)},D_=function(e){return T_(e,x_.y1)},F_=function(e){return T_(x_.x1,e)},I_=function(e,t){return S_*e+E_*t},O_=function(e,t){return C_*e+A_*t},R_=function(e,t){return T_(I_(e,t),O_(e,t))},Z_=function(e,t){return M_(I_(e,t),O_(e,t))};function B_(e,t){return x_=e,t?(__=t*Tk,S_=A_=Math.cos(__),C_=Math.sin(__),E_=-C_):(S_=A_=1,__=C_=E_=0),z_}var z_={beginPath:function(){},closePath:function(){},moveTo:Z_,lineTo:Z_,rect:function(e,t,n,r){__?(R_(e+n,t),R_(e+n,t+r),R_(e,t+r),Z_(e,t)):(T_(e+n,t+r),M_(e,t))},quadraticCurveTo:function(e,t,n,r){var a=I_(e,t),i=O_(e,t),o=I_(n,r),u=O_(n,r);L_(w_,a,o,D_),L_(k_,i,u,F_),M_(o,u)},bezierCurveTo:function(e,t,n,r,a,i){var o=I_(e,t),u=O_(e,t),s=I_(n,r),c=O_(n,r),l=I_(a,i),f=O_(a,i);P_(w_,o,s,l,D_),P_(k_,u,c,f,F_),M_(l,f)},arc:function(e,t,n,r,a,i){if(r+=__,a+=__,w_=n*Math.cos(a)+e,k_=n*Math.sin(a)+t,Math.abs(a-r)>N_)T_(e-n,t-n),T_(e+n,t+n);else{var o,u,s=function(r){return T_(n*Math.cos(r)+e,n*Math.sin(r)+t)};if(s(r),s(a),a!==r)if((r%=Dk)<0&&(r+=Dk),(a%=Dk)<0&&(a+=Dk),a<r&&(i=!i,o=r,r=a,a=o),i)for(a-=Dk,o=r-r%Mk,u=0;u<4&&o>a;++u,o-=Mk)s(o);else for(o=r-r%Mk+Mk,u=0;u<4&&o<a;++u,o+=Mk)s(o)}}};function L_(e,t,n,r){var a=(e-t)/(e+n-2*t);0<a&&a<1&&r(e+(t-e)*a)}function P_(e,t,n,r,a){var i,o=r-e+3*t-3*n,u=e+n-2*t,s=e-t,c=0,l=0;Math.abs(o)>1e-14?(i=u*u+s*o)>=0&&(c=(-u+(i=Math.sqrt(i)))/o,l=(-u-i)/o):c=.5*s/u,0<c&&c<1&&a(j_(c,e,t,n,r)),0<l&&l<1&&a(j_(l,e,t,n,r))}function j_(e,t,n,r,a){var i=1-e,o=i*i,u=e*e;return o*i*t+3*o*e*n+3*i*u*r+u*e*a}var U_=(U_=$d(1,1))?U_.getContext("2d"):null,W_=new d_;function V_(e){return function(t,n){if(!U_)return!0;e(U_,t),W_.clear().union(t.bounds).intersect(n).round();for(var r=W_.x1,a=W_.y1,i=W_.x2,o=W_.y2,u=a;u<=o;++u)for(var s=r;s<=i;++s)if(U_.isPointInPath(s,u))return!0;return!1}}function q_(e,t){return t.contains(e.x||0,e.y||0)}function H_(e,t){var n=e.x||0,r=e.y||0,a=e.width||0,i=e.height||0;return t.intersects(W_.set(n,r,n+a,r+i))}function G_(e,t,n,r,a){var i,o,u,s,c=e.x1,l=e.y1,f=e.x2,h=e.y2,d=r-t,p=a-n,v=0,g=1;for(s=0;s<4;++s){if(0===s&&(i=-d,o=-(c-t)),1===s&&(i=d,o=f-t),2===s&&(i=-p,o=-(l-n)),3===s&&(i=p,o=h-n),Math.abs(i)<1e-10&&o<0)return!1;if(u=o/i,i<0){if(u>g)return!1;u>v&&(v=u)}else if(i>0){if(u<v)return!1;u<g&&(g=u)}}return!0}function X_(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Y_(e,t){return null==e?t:e}function K_(e,t){for(var n=t.length,r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function $_(e,t,n){return yk(n)?function(e,t,n){var r,a=n.width(),i=n.height();if("radial"===t.gradient)r=e.createRadialGradient(n.x1+Y_(t.x1,.5)*a,n.y1+Y_(t.y1,.5)*i,Math.max(a,i)*Y_(t.r1,0),n.x1+Y_(t.x2,.5)*a,n.y1+Y_(t.y2,.5)*i,Math.max(a,i)*Y_(t.r2,.5));else{var o=Y_(t.x1,0),u=Y_(t.y1,0),s=Y_(t.x2,1),c=Y_(t.y2,0);if(o!==s&&u!==c&&a!==i){var l=$d(Math.ceil(a),Math.ceil(i)),f=l.getContext("2d");return f.scale(a,i),f.fillStyle=K_(f.createLinearGradient(o,u,s,c),t.stops),f.fillRect(0,0,a,i),e.createPattern(l,"no-repeat")}r=e.createLinearGradient(n.x1+o*a,n.y1+u*i,n.x1+s*a,n.y1+c*i)}return K_(r,t.stops)}(e,n,t.bounds):n}function Q_(e,t,n){return(n*=null==t.fillOpacity?1:t.fillOpacity)>0&&(e.globalAlpha=n,e.fillStyle=$_(e,t,t.fill),!0)}var J_=[];function eS(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&((n*=null==t.strokeOpacity?1:t.strokeOpacity)>0&&(e.globalAlpha=n,e.strokeStyle=$_(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||J_),e.lineDashOffset=t.strokeDashOffset||0),!0))}function tS(e,t){return e.zindex-t.zindex||e.index-t.index}function nS(e){if(!e.zdirty)return e.zitems;var t,n,r,a=e.items,i=[];for(n=0,r=a.length;n<r;++n)(t=a[n]).index=n,t.zindex&&i.push(t);return e.zdirty=!1,e.zitems=i.sort(tS)}function rS(e,t){var n,r,a=e.items;if(a&&a.length){var i=nS(e);if(i&&i.length){for(n=0,r=a.length;n<r;++n)a[n].zindex||t(a[n]);a=i}for(n=0,r=a.length;n<r;++n)t(a[n])}}function aS(e,t){var n,r,a=e.items;if(!a||!a.length)return null;var i=nS(e);for(i&&i.length&&(a=i),r=a.length;--r>=0;)if(n=t(a[r]))return n;if(a===i)for(r=(a=e.items).length;--r>=0;)if(!a[r].zindex&&(n=t(a[r])))return n;return null}function iS(e){return function(t,n,r){rS(n,(function(n){r&&!r.intersects(n.bounds)||uS(e,t,n,n)}))}}function oS(e){return function(t,n,r){!n.items.length||r&&!r.intersects(n.bounds)||uS(e,t,n.items[0],n.items)}}function uS(e,t,n,r){var a=null==n.opacity?1:n.opacity;0!==a&&(e(t,r)||(X_(t,n),n.fill&&Q_(t,n,a)&&t.fill(),n.stroke&&eS(t,n,a)&&t.stroke()))}function sS(e){return e=e||Jt,function(t,n,r,a,i,o){return r*=t.pixelRatio,a*=t.pixelRatio,aS(n,(function(n){var u=n.bounds;if((!u||u.contains(i,o))&&u)return e(t,n,r,a,i,o)?n:void 0}))}}function cS(e,t){return function(n,r,a,i){var o,u,s=Array.isArray(r)?r[0]:r,c=null==t?s.fill:t,l=s.stroke&&n.isPointInStroke;return l&&(o=s.strokeWidth,u=s.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=u?u:"butt"),!e(n,r)&&(c&&n.isPointInPath(a,i)||l&&n.isPointInStroke(a,i))}}function lS(e){return sS(cS(e))}function fS(e,t){return"translate("+e+","+t+")"}function hS(e){return"rotate("+e+")"}function dS(e){return fS(e.x||0,e.y||0)}function pS(e,t,n){function r(e,n){var r=n.x||0,a=n.y||0,i=n.angle||0;e.translate(r,a),i&&e.rotate(i*=Tk),e.beginPath(),t(e,n),i&&e.rotate(-i),e.translate(-r,-a)}return{type:e,tag:"path",nested:!1,attr:function(e,n){e("transform",function(e){return fS(e.x||0,e.y||0)+(e.angle?" "+hS(e.angle):"")}(n)),e("d",t(null,n))},bound:function(e,n){return t(B_(e,n.angle),n),b_(e,n).translate(n.x||0,n.y||0)},draw:iS(r),pick:lS(r),isect:n||V_(r)}}var vS=pS("arc",(function(e,t){return n_.context(e)(t)}));function gS(e,t,n){function r(e,n){e.beginPath(),t(e,n)}var a=cS(r);return{type:e,tag:"path",nested:!0,attr:function(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))},bound:function(e,n){var r=n.items;return 0===r.length?e:(t(B_(e),r),b_(e,r[0]))},draw:oS(r),pick:function(e,t,n,r,i,o){var u=t.items,s=t.bounds;return!u||!u.length||s&&!s.contains(i,o)?null:(n*=e.pixelRatio,r*=e.pixelRatio,a(e,u,n,r)?u[0]:null)},isect:q_,tip:n}}var mS=gS("area",(function(e,t){var n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?a_:r_).curve(kk(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,a="horizontal"===e[0].orient?t[1]:t[0],i="horizontal"===e[0].orient?"y":"x",o=e.length,u=1/0;--o>=0;)!1!==e[o].defined&&(r=Math.abs(e[o][i]-a))<u&&(u=r,n=e[o]);return n}));function yS(e,t){e.beginPath(),c_(t)?l_(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function bS(e){var t=Y_(e.strokeWidth,1);return null!=e.strokeOffset?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function xS(e,t){var n=bS(t);e("d",l_(null,t,n,n))}function wS(e,t,n,r){var a=bS(t);e.beginPath(),l_(e,t,(n||0)+a,(r||0)+a)}var kS=cS(wS),_S=cS(wS,!1),SS=cS(wS,!0);var CS={type:"group",tag:"g",nested:!1,attr:function(e,t){e("transform",dS(t))},bound:function(e,t){if(!t.clip&&t.items)for(var n=t.items,r=n.length,a=0;a<r;++a)e.union(n[a].bounds);return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),b_(e,t),e.translate(t.x||0,t.y||0)},draw:function(e,t,n,r){var a=this;rS(t,(function(t){var i=t.x||0,o=t.y||0,u=t.strokeForeground,s=null==t.opacity?1:t.opacity;(t.stroke||t.fill)&&s&&(wS(e,t,i,o),X_(e,t),t.fill&&Q_(e,t,s)&&e.fill(),t.stroke&&!u&&eS(e,t,s)&&e.stroke()),e.save(),e.translate(i,o),t.clip&&yS(e,t),n&&n.translate(-i,-o),rS(t,(function(t){("group"===t.marktype||null==r||r.includes(t.marktype))&&a.draw(e,t,n,r)})),n&&n.translate(i,o),e.restore(),u&&t.stroke&&s&&(wS(e,t,i,o),X_(e,t),eS(e,t,s)&&e.stroke())}))},pick:function(e,t,n,r,a,i){var o=this;if(t.bounds&&!t.bounds.contains(a,i)||!t.items)return null;var u=n*e.pixelRatio,s=r*e.pixelRatio;return aS(t,(function(c){var l,f,h,d=c.bounds;if(!d||d.contains(a,i)){f=c.x||0,h=c.y||0;var p=f+(c.width||0),v=h+(c.height||0),g=c.clip;if(!g||!(a<f||a>p||i<h||i>v)){if(e.save(),e.translate(f,h),f=a-f,h=i-h,g&&c_(c)&&!SS(e,c,u,s))return e.restore(),null;var m=c.strokeForeground,y=!1!==t.interactive;return y&&m&&c.stroke&&_S(e,c,u,s)?(e.restore(),c):(!(l=aS(c,(function(e){return function(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}(e,f,h)?o.pick(e,n,r,f,h):null})))&&y&&(c.fill||!m&&c.stroke)&&kS(e,c,u,s)&&(l=c),e.restore(),l||null)}}}))},isect:H_,content:function(e,t,n){e("clip-path",t.clip?h_(n,t,t):null)},background:function(e,t){e("class","background"),e("aria-hidden",!0),xS(e,t)},foreground:function(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?xS(e,t):e("d","")}},ES={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function AS(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then((function(t){e.image=t,e.image.url=e.url}))),n}function NS(e,t){return null!=e.width?e.width:t&&t.width?!1!==e.aspect&&e.height?e.height*t.width/t.height:t.width:0}function TS(e,t){return null!=e.height?e.height:t&&t.height?!1!==e.aspect&&e.width?e.width*t.height/t.width:t.height:0}function MS(e,t){return"center"===e?t/2:"right"===e?t:0}function DS(e,t){return"middle"===e?t/2:"bottom"===e?t:0}var FS={type:"image",tag:"image",nested:!1,attr:function(e,t,n){var r=AS(t,n),a=NS(t,r),i=TS(t,r),o=(t.x||0)-MS(t.align,a),u=(t.y||0)-DS(t.baseline,i);e("href",!r.src&&r.toDataURL?r.toDataURL():r.src||"",ES["xmlns:xlink"],"xlink:href"),e("transform",fS(o,u)),e("width",a),e("height",i),e("preserveAspectRatio",!1===t.aspect?"none":"xMidYMid")},bound:function(e,t){var n=t.image,r=NS(t,n),a=TS(t,n),i=(t.x||0)-MS(t.align,r),o=(t.y||0)-DS(t.baseline,a);return e.set(i,o,i+r,o+a)},draw:function(e,t,n){var r=this;rS(t,(function(t){if(!n||n.intersects(t.bounds)){var a=AS(t,r),i=NS(t,a),o=TS(t,a);if(0!==i&&0!==o){var u,s,c,l,f=(t.x||0)-MS(t.align,i),h=(t.y||0)-DS(t.baseline,o);!1!==t.aspect&&(s=a.width/a.height,c=t.width/t.height,s===s&&c===c&&s!==c&&(c<s?(h+=(o-(l=i/s))/2,o=l):(f+=(i-(l=o*s))/2,i=l))),(a.complete||a.toDataURL)&&(X_(e,t),e.globalAlpha=null!=(u=t.opacity)?u:1,e.imageSmoothingEnabled=!1!==t.smooth,e.drawImage(a,f,h,i,o))}}}))},pick:sS(),isect:Jt,get:AS,xOffset:MS,yOffset:DS},IS=gS("line",(function(e,t){var n=t[0],r=n.interpolate||"linear";return i_.curve(kk(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,a=Math.pow(e[0].strokeWidth||1,2),i=e.length;--i>=0;)if(!1!==e[i].defined&&(n=e[i].x-t[0])*n+(r=e[i].y-t[1])*r<a)return e[i];return null}));function OS(e,t){var n=t.path;if(null==n)return!0;var r=t.x||0,a=t.y||0,i=t.scaleX||1,o=t.scaleY||1,u=(t.angle||0)*Tk,s=t.pathCache;s&&s.path===n||((t.pathCache=s=Nk(n)).path=n),u&&e.rotate&&e.translate?(e.translate(r,a),e.rotate(u),Lk(e,s,0,0,i,o),e.rotate(-u),e.translate(-r,-a)):Lk(e,s,r,a,i,o)}var RS={type:"path",tag:"path",nested:!1,attr:function(e,t){var n=t.scaleX||1,r=t.scaleY||1;1===n&&1===r||e("vector-effect","non-scaling-stroke"),e("transform",function(e){return fS(e.x||0,e.y||0)+(e.angle?" "+hS(e.angle):"")+(e.scaleX||e.scaleY?" "+function(e,t){return"scale("+e+","+t+")"}(e.scaleX||1,e.scaleY||1):"")}(t)),e("d",t.path)},bound:function(e,t){return OS(B_(e,t.angle),t)?e.set(0,0,0,0):b_(e,t,!0)},draw:iS(OS),pick:lS(OS),isect:V_(OS)};function ZS(e,t){e.beginPath(),l_(e,t)}var BS={type:"rect",tag:"path",nested:!1,attr:function(e,t){e("d",l_(null,t))},bound:function(e,t){var n,r;return b_(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)},draw:iS(ZS),pick:lS(ZS),isect:H_};function zS(e,t,n){var r,a,i,o;return!(!t.stroke||!eS(e,t,n))&&(r=t.x||0,a=t.y||0,i=null!=t.x2?t.x2:r,o=null!=t.y2?t.y2:a,e.beginPath(),e.moveTo(r,a),e.lineTo(i,o),!0)}var LS={type:"rule",tag:"line",nested:!1,attr:function(e,t){e("transform",dS(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function(e,t){var n,r;return b_(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)},draw:function(e,t,n){rS(t,(function(t){if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&zS(e,t,r)&&(X_(e,t),e.stroke())}}))},pick:sS((function(e,t,n,r){return!!e.isPointInStroke&&(zS(e,t,1)&&e.isPointInStroke(n,r))})),isect:function(e,t){var n=e.x||0,r=e.y||0;return G_(t,n,r,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r)}},PS=pS("shape",(function(e,t){return(t.mark.shape||t.shape).context(e)(t)})),jS=pS("symbol",(function(e,t){return u_.context(e)(t)}),q_),US=function(e){var t,n,r;e=+e||1e4;var a=function(){t={},n={},r=0},i=function(a,i){return++r>e&&(n=t,t={},r=1),t[a]=i};return a(),{clear:a,has:function(e){return In(t,e)||In(n,e)},get:function(e){return In(t,e)?t[e]:In(n,e)?i(e,n[e]):void 0},set:function(e,n){return In(t,e)?t[e]=n:i(e,n)}}}(),WS={height:YS,measureWidth:GS,estimateWidth:qS,width:qS,canvas:VS};function VS(e){WS.width=e&&U_?GS:qS}function qS(e,t){return HS(JS(e,t),YS(e))}function HS(e,t){return~~(.8*e.length*t)}function GS(e,t){return YS(e)<=0||!(t=JS(e,t))?0:XS(t,tC(e))}function XS(e,t){var n="(".concat(t,") ").concat(e),r=US.get(n);return void 0===r&&(U_.font=t,r=U_.measureText(e).width,US.set(n,r)),r}function YS(e){return null!=e.fontSize?+e.fontSize||0:11}function KS(e){return null!=e.lineHeight?e.lineHeight:YS(e)+2}function $S(e){return t=e.lineBreak&&e.text&&!nn(e.text)?e.text.split(e.lineBreak):e.text,nn(t)?t.length>1?t:t[0]:t;var t}function QS(e){var t=$S(e);return(nn(t)?t.length-1:0)*KS(e)}function JS(e,t){var n=null==t?"":(t+"").trim();return e.limit>0&&n.length?function(e,t){var n=+e.limit,r=function(e){if(WS.width===GS){var t=tC(e);return function(e){return XS(e,t)}}if(WS.width===qS){var n=YS(e);return function(e){return HS(e,n)}}return function(t){return WS.width(e,t)}}(e);if(r(t)<n)return t;var a,i=e.ellipsis||"\u2026",o="rtl"===e.dir,u=0,s=t.length;if(n-=r(i),o){for(;u<s;)a=u+s>>>1,r(t.slice(a))>n?u=a+1:s=a;return i+t.slice(u)}for(;u<s;)a=1+(u+s>>>1),r(t.slice(0,a))<n?u=a:s=a-1;return t.slice(0,u)+i}(e,n):n}function eC(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function tC(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+YS(e)+"px "+eC(e,t)}function nC(e){var t=e.baseline,n=YS(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:"line-top"===t?.29*n+.5*KS(e):"line-bottom"===t?.29*n-.5*KS(e):0)}VS(!0);var rC={left:"start",center:"middle",right:"end"},aC=new d_;function iC(e){var t,n=e.x||0,r=e.y||0,a=e.radius||0;return a&&(t=(e.theta||0)-Mk,n+=a*Math.cos(t),r+=a*Math.sin(t)),aC.x1=n,aC.y1=r,aC}function oC(e,t,n){var r,a=WS.height(t),i=t.align,o=iC(t),u=o.x1,s=o.y1,c=t.dx||0,l=(t.dy||0)+nC(t)-Math.round(.8*a),f=$S(t);if(nn(f)?(a+=KS(t)*(f.length-1),r=f.reduce((function(e,n){return Math.max(e,WS.width(t,n))}),0)):r=WS.width(t,f),"center"===i?c-=r/2:"right"===i&&(c-=r),e.set(c+=u,l+=s,c+r,l+a),t.angle&&!n)e.rotate(t.angle*Tk,u,s);else if(2===n)return e.rotatedPoints(t.angle*Tk,u,s);return e}var uC={type:"text",tag:"text",nested:!1,attr:function(e,t){var n,r=t.dx||0,a=(t.dy||0)+nC(t),i=iC(t),o=i.x1,u=i.y1,s=t.angle||0;e("text-anchor",rC[t.align]||"start"),s?(n=fS(o,u)+" "+hS(s),(r||a)&&(n+=" "+fS(r,a))):n=fS(o+r,u+a),e("transform",n)},bound:oC,draw:function(e,t,n){rS(t,(function(t){var r,a,i,o,u,s,c,l=null==t.opacity?1:t.opacity;if(!(n&&!n.intersects(t.bounds)||0===l||t.fontSize<=0||null==t.text||0===t.text.length)){if(e.font=tC(t),e.textAlign=t.align||"left",a=(r=iC(t)).x1,i=r.y1,t.angle&&(e.save(),e.translate(a,i),e.rotate(t.angle*Tk),a=i=0),a+=t.dx||0,i+=(t.dy||0)+nC(t),s=$S(t),X_(e,t),nn(s))for(u=KS(t),o=0;o<s.length;++o)c=JS(t,s[o]),t.fill&&Q_(e,t,l)&&e.fillText(c,a,i),t.stroke&&eS(e,t,l)&&e.strokeText(c,a,i),i+=u;else c=JS(t,s),t.fill&&Q_(e,t,l)&&e.fillText(c,a,i),t.stroke&&eS(e,t,l)&&e.strokeText(c,a,i);t.angle&&e.restore()}}))},pick:sS((function(e,t,n,r,a,i){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=iC(t),u=o.x1,s=o.y1,c=oC(aC,t,1),l=-t.angle*Tk,f=Math.cos(l),h=Math.sin(l),d=f*a-h*i+(u-f*u+h*s),p=h*a+f*i+(s-h*u-f*s);return c.contains(d,p)})),isect:function(e,t){var n=oC(aC,e,2);return G_(t,n[0],n[1],n[2],n[3])||G_(t,n[0],n[1],n[4],n[5])||G_(t,n[4],n[5],n[6],n[7])||G_(t,n[2],n[3],n[6],n[7])}},sC=gS("trail",(function(e,t){return s_.context(e)(t)}),(function(e,t){for(var n,r,a=e.length;--a>=0;)if(!1!==e[a].defined&&(n=e[a].x-t[0])*n+(r=e[a].y-t[1])*r<(n=e[a].size||1)*n)return e[a];return null})),cC={arc:vS,area:mS,group:CS,image:FS,line:IS,path:RS,rect:BS,rule:LS,shape:PS,symbol:jS,text:uC,trail:sC};function lC(e,t,n){var r=cC[e.mark.marktype],a=t||r.bound;return r.nested&&(e=e.mark),a(e.bounds||(e.bounds=new d_),e,n)}var fC={mark:null};var hC=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function dC(e){return pC("string"===typeof e?JSON.parse(e):e)}function pC(e){var t,n,r,a=e.marktype,i=e.items;if(i)for(n=0,r=i.length;n<r;++n)t=a?"mark":"group",i[n][t]=e,i[n].zindex&&(i[n][t].zdirty=!0),"group"===(a||t)&&pC(i[n]);return a&&function(e,t,n){var r,a,i,o,u=cC[e.marktype],s=u.bound,c=e.items,l=c&&c.length;if(u.nested)return l?i=c[0]:(fC.mark=e,i=fC),o=lC(i,s,n),t&&t.union(o)||o;if(t=t||e.bounds&&e.bounds.clear()||new d_,l)for(r=0,a=c.length;r<a;++r)t.union(lC(c[r],s,n));e.bounds=t}(e),e}function vC(e){arguments.length?this.root=dC(e):(this.root=gC({marktype:"group",name:"root",role:"frame"}),this.root.items=[new v_(this.root)])}function gC(e,t){var n={bounds:new d_,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return null!=e.aria&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function mC(e,t,n){return!e&&"undefined"!==typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function yC(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,a=n.length;r<a;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function bC(e,t,n,r){var a,i=e.childNodes[t];return i&&i.tagName.toLowerCase()===n.toLowerCase()||(a=i||null,i=mC(e.ownerDocument,n,r),e.insertBefore(i,a)),i}function xC(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function wC(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function kC(e,t){var n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function _C(e,t){this._active=null,this._handlers={},this._loader=e||ws(),this._tooltip=t||SC}function SC(e,t,n,r){e.element().setAttribute("title",r||"")}function CC(e){this._el=null,this._bgcolor=null,this._loader=new g_(e)}vC.prototype={toJSON:function(e){return function(e,t){return JSON.stringify(e,hC,t)}(this.root,e||0)},mark:function(e,t,n){var r=gC(e,t=t||this.root.items[0]);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}},_C.prototype={initialize:function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},origin:function(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene:function(e){return arguments.length?(this._scene=e,this):this._scene},on:function(){},off:function(){},_handlerIndex:function(e,t,n){for(var r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers:function(e){var t=this._handlers,n=[];if(e)n.push.apply(n,(0,$n.Z)(t[this.eventName(e)]));else for(var r in t)n.push.apply(n,(0,$n.Z)(t[r]));return n},eventName:function(e){var t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref:function(e,t,n){this._loader.sanitize(n,{context:"href"}).then((function(t){var n=new MouseEvent(e.type,e),r=mC(null,"a");for(var a in t)r.setAttribute(a,t[a]);r.dispatchEvent(n)})).catch((function(){}))},handleTooltip:function(e,t,n){if(t&&null!=t.tooltip){t=function(e,t,n,r){var a,i,o=e&&e.mark;if(o&&(a=cC[o.marktype]).tip){for((i=kC(t,n))[0]-=r[0],i[1]-=r[1];e=e.mark.group;)i[0]-=e.x||0,i[1]-=e.y||0;e=a.tip(o.items,i)}return e}(t,e,this.canvas(),this._origin);var r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect:function(e){var t=this.canvas();if(t){for(var n=t.getBoundingClientRect(),r=this._origin,a=e.bounds,i=a.width(),o=a.height(),u=a.x1+r[0]+n.left,s=a.y1+r[1]+n.top;e.mark&&(e=e.mark.group);)u+=e.x||0,s+=e.y||0;return{x:u,y:s,width:i,height:o,left:u,top:s,right:u+i,bottom:s+o}}}},CC.prototype={initialize:function(e,t,n,r,a){return this._el=e,this.resize(t,n,r,a)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},background:function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},resize:function(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty:function(){},render:function(e,t){var n=this;return n._call=function(){n._render(e,t)},n._call(),n._call=null,n},_render:function(){},renderAsync:function(e,t){var n=this.render(e,t);return this._ready?this._ready.then((function(){return n})):Promise.resolve(n)},_load:function(e,t){var n=this,r=n._loader[e](t);if(!n._ready){var a=n._call;n._ready=n._loader.ready().then((function(e){e&&a(),n._ready=null}))}return r},sanitizeURL:function(e){return this._load("sanitizeURL",e)},loadImage:function(e){return this._load("loadImage",e)}};var EC="dragenter",AC="dragleave",NC="dragover",TC="pointerdown",MC="pointermove",DC="pointerout",FC="pointerover",IC="mousedown",OC="mousemove",RC="mouseout",ZC="mouseover",BC="click",zC="mousewheel",LC="touchstart",PC="touchmove",jC="touchend",UC=MC,WC=DC,VC=BC;function qC(e,t){_C.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}function HC(e,t){(function(e){return e===LC||e===PC||e===jC?[LC,PC,jC]:[e]})(t).forEach((function(t){return function(e,t){var n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?function(n){return e[t](n)}:function(n){return e.fire(t,n)}))}(e,t)}))}function GC(e,t,n){t.forEach((function(t){return e.fire(t,n)}))}function XC(e,t,n){return function(r){var a=this._active,i=this.pickEvent(r);i===a||(a&&a.exit||GC(this,n,r),this._active=i,GC(this,t,r)),GC(this,e,r)}}function YC(e){return function(t){GC(this,e,t),this._active=null}}function KC(e,t,n,r,a,i){var o="undefined"!==typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,u=e.getContext("2d"),s=o?"undefined"!==typeof window&&window.devicePixelRatio||1:a;for(var c in e.width=t*s,e.height=n*s,i)u[c]=i[c];return o&&1!==s&&(e.style.width=t+"px",e.style.height=n+"px"),u.pixelRatio=s,u.setTransform(s,0,0,s,s*r[0],s*r[1]),e}function $C(e){CC.call(this,e),this._options={},this._redraw=!1,this._dirty=new d_,this._tempb=new d_}Zn(qC,_C,{initialize:function(e,t,n){var r=this;return this._canvas=e&&yC(e,"canvas"),[BC,IC,TC,MC,DC,AC].forEach((function(e){return HC(r,e)})),_C.prototype.initialize.call(this,e,t,n)},canvas:function(){return this._canvas},context:function(){return this._canvas.getContext("2d")},events:["keydown","keypress","keyup",EC,AC,NC,TC,"pointerup",MC,DC,FC,IC,"mouseup",OC,RC,ZC,BC,"dblclick","wheel",zC,LC,PC,jC],DOMMouseScroll:function(e){this.fire(zC,e)},pointermove:XC([MC,OC],[FC,ZC],[DC,RC]),dragover:XC([NC],[EC],[AC]),pointerout:YC([DC,RC]),dragleave:YC([AC]),pointerdown:function(e){this._down=this._active,this.fire(TC,e)},mousedown:function(e){this._down=this._active,this.fire(IC,e)},click:function(e){this._down===this._active&&(this.fire(BC,e),this._down=null)},touchstart:function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(LC,e,!0)},touchmove:function(e){this.fire(PC,e,!0)},touchend:function(e){this.fire(jC,e,!0),this._touch=null},fire:function(e,t,n){var r=n?this._touch:this._active,a=this._handlers[e];if(t.vegaType=e,e===VC&&r&&r.href?this.handleHref(t,r,r.href):e!==UC&&e!==WC||this.handleTooltip(t,r,e!==WC),a)for(var i=0,o=a.length;i<o;++i)a[i].handler.call(this._obj,t,r)},on:function(e,t){var n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(HC(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off:function(e,t){var n=this.eventName(e),r=this._handlers[n],a=this._handlerIndex(r,e,t);return a>=0&&r.splice(a,1),this},pickEvent:function(e){var t=kC(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick:function(e,t,n,r,a){var i=this.context();return cC[e.marktype].pick.call(this,i,e,t,n,r,a)}});var QC=CC.prototype;function JC(e,t){_C.call(this,e,t);var n=this;n._hrefHandler=eE(n,(function(e,t){t&&t.href&&n.handleHref(e,t,t.href)})),n._tooltipHandler=eE(n,(function(e,t){n.handleTooltip(e,t,e.type!==WC)}))}Zn($C,CC,{initialize:function(e,t,n,r,a,i){return this._options=i||{},this._canvas=this._options.externalContext?null:$d(1,1,this._options.type),e&&this._canvas&&(xC(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),QC.initialize.call(this,e,t,n,r,a)},resize:function(e,t,n,r){if(QC.resize.call(this,e,t,n,r),this._canvas)KC(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{var a=this._options.externalContext;a||Ht("CanvasRenderer is missing a valid canvas or context"),a.scale(this._scale,this._scale),a.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas:function(){return this._canvas},context:function(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty:function(e){for(var t=this._tempb.clear().union(e.bounds),n=e.mark.group;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render:function(e,t){var n=this.context(),r=this._origin,a=this._width,i=this._height,o=this._dirty,u=function(e,t,n){return(new d_).set(0,0,t,n).translate(-e[0],-e[1])}(r,a,i);n.save();var s=this._redraw||o.empty()?(this._redraw=!1,u.expand(1)):function(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}(n,u.intersect(o),r);return this.clear(-r[0],-r[1],a,i),this.draw(n,e,s,t),n.restore(),o.clear(),this},draw:function(e,t,n,r){if("group"===t.marktype||null==r||r.includes(t.marktype)){var a=cC[t.marktype];t.clip&&function(e,t){var n=t.clip;e.save(),kn(n)?(e.beginPath(),n(e),e.clip()):yS(e,t.group)}(e,t),a.draw.call(this,e,t,n,r),t.clip&&e.restore()}},clear:function(e,t,n,r){var a=this._options,i=this.context();"pdf"===a.type||a.externalContext||i.clearRect(e,t,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,r))}});var eE=function(e,t){return function(n){var r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)}};Zn(JC,_C,{initialize:function(e,t,n){var r=this._svg;return r&&(r.removeEventListener(VC,this._hrefHandler),r.removeEventListener(UC,this._tooltipHandler),r.removeEventListener(WC,this._tooltipHandler)),this._svg=r=e&&yC(e,"svg"),r&&(r.addEventListener(VC,this._hrefHandler),r.addEventListener(UC,this._tooltipHandler),r.addEventListener(WC,this._tooltipHandler)),_C.prototype.initialize.call(this,e,t,n)},canvas:function(){return this._svg},on:function(e,t){var n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){var a={type:e,handler:t,listener:eE(this,t)};(r[n]||(r[n]=[])).push(a),this._svg&&this._svg.addEventListener(n,a.listener)}return this},off:function(e,t){var n=this.eventName(e),r=this._handlers[n],a=this._handlerIndex(r,e,t);return a>=0&&(this._svg&&this._svg.removeEventListener(n,r[a].listener),r.splice(a,1)),this}});var tE="aria-hidden",nE="aria-label",rE="role",aE="aria-roledescription",iE="graphics-object",oE="graphics-symbol",uE=function(e,t,n){var r;return r={},(0,Ir.Z)(r,rE,e),(0,Ir.Z)(r,aE,t),(0,Ir.Z)(r,nE,n||void 0),r},sE=Yn(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),cE={axis:{desc:"axis",caption:function(e){var t=e.datum,n=e.orient,r=t.title?pE(e):null,a=e.context,i=a.scales[t.scale].value,o=a.dataflow.locale(),u=i.type;return"".concat("left"===n||"right"===n?"Y":"X","-axis")+(r?" titled '".concat(r,"'"):"")+" for a ".concat(Bw(u)?"discrete":u," scale")+" with ".concat(vk(o,i,e))}},legend:{desc:"legend",caption:function(e){var t=e.datum,n=t.title?pE(e):null,r="".concat(t.type||""," legend").trim(),a=t.scales,i=Object.keys(a),o=e.context,u=o.scales[a[i[0]]].value,s=o.dataflow.locale();return function(e){return e.length?e[0].toUpperCase()+e.slice(1):e}(r)+(n?" titled '".concat(n,"'"):"")+" for ".concat(function(e){return(e=e.map((function(e){return e+("fill"===e||"stroke"===e?" color":"")}))).length<2?e[0]:e.slice(0,-1).join(", ")+" and "+sn(e)}(i))+" with ".concat(vk(s,u,e))}},"title-text":{desc:"title",caption:function(e){return"Title text '".concat(dE(e),"'")}},"title-subtitle":{desc:"subtitle",caption:function(e){return"Subtitle text '".concat(dE(e),"'")}}},lE={ariaRole:rE,ariaRoleDescription:aE,description:nE};function fE(e,t){var n=!1===t.aria;if(e(tE,n||void 0),n||null==t.description)for(var r in lE)e(lE[r],void 0);else{var a=t.mark.marktype;e(nE,t.description),e(rE,t.ariaRole||("group"===a?iE:oE)),e(aE,t.ariaRoleDescription||"".concat(a," mark"))}}function hE(e){return!1===e.aria?(0,Ir.Z)({},tE,!0):sE[e.role]?null:cE[e.role]?function(e,t){try{var n=e.items[0],r=t.caption||function(){return""};return uE(t.role||oE,t.desc,n.description||r(n))}catch(a){return null}}(e,cE[e.role]):function(e){var t=e.marktype,n="group"===t||"text"===t||e.items.some((function(e){return null!=e.description&&!1!==e.aria}));return uE(n?iE:oE,"".concat(t," mark container"),e.description)}(e)}function dE(e){return wn(e.text).join(" ")}function pE(e){try{return wn(sn(e.items).items[0].text).join(" ")}catch(t){return null}}var vE=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};function gE(){var e="",t="",n="",r=[],a=function(){return t=n=""},i=function(i){t&&(e+="".concat(t,">").concat(n),a()),r.push(i)},o=function(e,n){return null!=n&&(t+=" ".concat(e,'="').concat(vE(n).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"),'"')),u},u={open:function(e){i(e),t="<"+e;for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var s=0,c=r;s<c.length;s++){var l=c[s];for(var f in l)o(f,l[f])}return u},close:function(){var i=r.pop();return e+=t?t+(n?">".concat(n,"</").concat(i,">"):"/>"):"</".concat(i,">"),a(),u},attr:o,text:function(e){return n+=vE(e),u},toString:function(){return e}};return u}var mE=function(e){return yE(gE(),e)+""};function yE(e,t){if(e.open(t.tagName),t.hasAttributes())for(var n=t.attributes,r=n.length,a=0;a<r;++a)e.attr(n[a].name,n[a].value);if(t.hasChildNodes()){var i,o=t.childNodes,u=(0,zt.Z)(o);try{for(u.s();!(i=u.n()).done;){var s=i.value;3===s.nodeType?e.text(s.nodeValue):yE(e,s)}}catch(c){u.e(c)}finally{u.f()}}return e.close()}var bE={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},xE={blend:"mix-blend-mode"},wE={fill:"none","stroke-miterlimit":10},kE="http://www.w3.org/2000/xmlns/",_E=ES.xmlns;function SE(e){CC.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var CE=CC.prototype;function EE(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function AE(e,t,n){var r,a,i;if("radial"===t.gradient){var o=bC(e,n++,"pattern",_E);RE(o,{id:mk+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),RE(o=bC(o,0,"rect",_E),{width:1,height:1,fill:"url(".concat(BE(),"#").concat(t.id,")")}),RE(e=bC(e,n++,"radialGradient",_E),{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else RE(e=bC(e,n++,"linearGradient",_E),{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,a=t.stops.length;r<a;++r)(i=bC(e,r,"stop",_E)).setAttribute("offset",t.stops[r].offset),i.setAttribute("stop-color",t.stops[r].color);return xC(e,r),n}function NE(e,t,n){return(e=bC(e,n,"clipPath",_E)).setAttribute("id",t.id),t.path?bC(e,0,"path",_E).setAttribute("d",t.path):RE(bC(e,0,"rect",_E),{x:0,y:0,width:t.width,height:t.height}),xC(e,1),n+1}function TE(e,t,n,r,a){var i,o=e._svg;if(!o&&(o=mC(i=t.ownerDocument,r,_E),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},"g"===r))){var u=mC(i,"path",_E);o.appendChild(u),u.__data__=e;var s=mC(i,"g",_E);o.appendChild(s),s.__data__=e;var c=mC(i,"path",_E);o.appendChild(c),c.__data__=e,c.__values__={fill:"default"}}return(o.ownerSVGElement!==a||function(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}Zn(SE,CC,{initialize:function(e,t,n,r,a){return this._defs={},this._clearDefs(),e&&(this._svg=bC(e,0,"svg",_E),this._svg.setAttributeNS(kE,"xmlns",_E),this._svg.setAttributeNS(kE,"xmlns:xlink",ES["xmlns:xlink"]),this._svg.setAttribute("version",ES.version),this._svg.setAttribute("class","marks"),xC(e,1),this._root=bC(this._svg,0,"g",_E),RE(this._root,wE),xC(this._svg,1)),this.background(this._bgcolor),CE.initialize.call(this,e,t,n,r,a)},background:function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),CE.background.apply(this,arguments)},resize:function(e,t,n,r){return CE.resize.call(this,e,t,n,r),this._svg&&(RE(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}),this._root.setAttribute("transform","translate(".concat(this._origin,")"))),this._dirty=[],this},canvas:function(){return this._svg},svg:function(){var e,t=this._svg,n=this._bgcolor;if(!t)return null;n&&(t.removeAttribute("style"),RE(e=bC(t,0,"rect",_E),{width:this._width,height:this._height,fill:n}));var r=mE(t);return n&&(t.removeChild(e),this._svg.style.setProperty("background-color",n)),r},_render:function(e,t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e,void 0,t),xC(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty:function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty:function(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck:function(){this._dirtyAll=!0;var e=this._dirty;if(!e.length||!this._dirtyID)return!0;var t,n,r,a,i,o,u,s=++this._dirtyID;for(i=0,o=e.length;i<o;++i)(n=(t=e[i]).mark).marktype!==r&&(r=n.marktype,a=cC[r]),n.zdirty&&n.dirty!==s&&(this._dirtyAll=!1,EE(t,s),n.items.forEach((function(e){e.dirty=s}))),n.zdirty||(t.exit?(a.nested&&n.items.length?(u=n.items[0])._svg&&this._update(a,u._svg,u):t._svg&&(u=t._svg.parentNode)&&u.removeChild(t._svg),t._svg=null):(t=a.nested?n.items[0]:t)._update!==s&&(t._svg&&t._svg.ownerSVGElement?this._update(a,t._svg,t):(this._dirtyAll=!1,EE(t,s)),t._update=s));return!this._dirtyAll},mark:function(e,t,n,r){var a=this;if(!this.isDirty(t))return t._svg;var i=this._svg,o=t.marktype,u=cC[o],s=!1===t.interactive?"none":null,c="g"===u.tag,l=TE(t,e,n,"g",i);if("group"!==o&&null!=r&&!r.includes(o))return xC(l,0),t._svg;l.setAttribute("class",wC(t));var f=hE(t);for(var h in f)ZE(l,h,f[h]);c||ZE(l,"pointer-events",s),ZE(l,"clip-path",t.clip?h_(this,t,t.group):null);var d=null,p=0,v=function(e){var t=a.isDirty(e),n=TE(e,l,d,u.tag,i);t&&(a._update(u,n,e),c&&function(e,t,n,r){t=t.lastChild.previousSibling;var a,i=0;rS(n,(function(n){a=e.mark(t,n,a,r),++i})),xC(t,1+i)}(a,n,e,r)),d=n,++p};return u.nested?t.items.length&&v(t.items[0]):rS(t,v),xC(l,p),l},_update:function(e,t,n){ME=t,DE=t.__values__,fE(IE,n),e.attr(IE,n,this);var r=FE[e.type];r&&r.call(this,e,t,n),ME&&this.style(ME,n)},style:function(e,t){if(null!=t){for(var n in bE){var r="font"===n?eC(t):t[n];if(r!==DE[n]){var a=bE[n];null==r?e.removeAttribute(a):(yk(r)&&(r=bk(r,this._defs.gradient,BE())),e.setAttribute(a,r+"")),DE[n]=r}}for(var i in xE)OE(e,xE[i],t[i])}},defs:function(){var e=this._svg,t=this._defs,n=t.el,r=0;for(var a in t.gradient)n||(t.el=n=bC(e,1,"defs",_E)),r=AE(n,t.gradient[a],r);for(var i in t.clipping)n||(t.el=n=bC(e,1,"defs",_E)),r=NE(n,t.clipping[i],r);n&&(0===r?(e.removeChild(n),t.el=null):xC(n,r))},_clearDefs:function(){var e=this._defs;e.gradient={},e.clipping={}}});var ME=null,DE=null,FE={group:function(e,t,n){var r=ME=t.childNodes[2];DE=r.__values__,e.foreground(IE,n,this),DE=t.__values__,ME=t.childNodes[1],e.content(IE,n,this);var a=ME=t.childNodes[0];e.background(IE,n,this);var i=!1===n.mark.interactive?"none":null;if(i!==DE.events&&(ZE(r,"pointer-events",i),ZE(a,"pointer-events",i),DE.events=i),n.strokeForeground&&n.stroke){var o=n.fill;ZE(r,"display",null),this.style(a,n),ZE(a,"stroke",null),o&&(n.fill=null),DE=r.__values__,this.style(r,n),o&&(n.fill=o),ME=null}else ZE(r,"display","none")},image:function(e,t,n){!1===n.smooth?(OE(t,"image-rendering","optimizeSpeed"),OE(t,"image-rendering","pixelated")):OE(t,"image-rendering",null)},text:function(e,t,n){var r,a,i,o,u=$S(n);nn(u)?(r=(a=u.map((function(e){return JS(n,e)}))).join("\n"))!==DE.text&&(xC(t,0),i=t.ownerDocument,o=KS(n),a.forEach((function(e,r){var a=mC(i,"tspan",_E);a.__data__=n,a.textContent=e,r&&(a.setAttribute("x",0),a.setAttribute("dy",o)),t.appendChild(a)})),DE.text=r):(a=JS(n,u))!==DE.text&&(t.textContent=a,DE.text=a),ZE(t,"font-family",eC(n)),ZE(t,"font-size",YS(n)+"px"),ZE(t,"font-style",n.fontStyle),ZE(t,"font-variant",n.fontVariant),ZE(t,"font-weight",n.fontWeight)}};function IE(e,t,n){t!==DE[e]&&(n?function(e,t,n,r){null!=n?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}(ME,e,t,n):ZE(ME,e,t),DE[e]=t)}function OE(e,t,n){n!==DE[t]&&(null==n?e.style.removeProperty(t):e.style.setProperty(t,n+""),DE[t]=n)}function RE(e,t){for(var n in t)ZE(e,n,t[n])}function ZE(e,t,n){null!=n?e.setAttribute(t,n):e.removeAttribute(t)}function BE(){var e;return"undefined"===typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function zE(e){CC.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}Zn(zE,CC,{svg:function(){return this._text},_render:function(e){var t=gE();t.open("svg",Mn({},ES,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}));var n=this._bgcolor;return n&&"transparent"!==n&&"none"!==n&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",wE,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark:function(e,t){var n=this,r=cC[t.marktype],a=r.tag,i=[fE,r.attr];e.open("g",{class:wC(t),"clip-path":t.clip?h_(this,t,t.group):null},hE(t),{"pointer-events":"g"!==a&&!1===t.interactive?"none":null});var o=function(o){var u=n.href(o);if(u&&e.open("a",u),e.open(a,n.attr(t,o,i,"g"!==a?a:null)),"text"===a){var s=$S(o);if(nn(s))for(var c={x:0,dy:KS(o)},l=0;l<s.length;++l)e.open("tspan",l?c:null).text(JS(o,s[l])).close();else e.text(JS(o,s))}else if("g"===a){var f=o.strokeForeground,h=o.fill,d=o.stroke;f&&d&&(o.stroke=null),e.open("path",n.attr(t,o,r.background,"bgrect")).close(),e.open("g",n.attr(t,o,r.content)),rS(o,(function(t){return n.mark(e,t)})),e.close(),f&&d?(h&&(o.fill=null),o.stroke=d,e.open("path",n.attr(t,o,r.foreground,"bgrect")).close(),h&&(o.fill=h)):e.open("path",n.attr(t,o,r.foreground,"bgfore")).close()}e.close(),u&&e.close()};return r.nested?t.items&&t.items.length&&o(t.items[0]):rS(t,o),e.close()},href:function(e){var t,n=this,r=e.href;if(r){if(t=this._hrefs&&this._hrefs[r])return t;this.sanitizeURL(r).then((function(e){e["xlink:href"]=e.href,e.href=null,(n._hrefs||(n._hrefs={}))[r]=e}))}return null},attr:function(e,t,n,r){var a=this,i={},o=function(e,t,n,r){i[r||e]=t};return Array.isArray(n)?n.forEach((function(e){return e(o,t,a)})):n(o,t,this),r&&function(e,t,n,r,a){var i;if(null==t)return e;"bgrect"===r&&!1===n.interactive&&(e["pointer-events"]="none");if("bgfore"===r&&(!1===n.interactive&&(e["pointer-events"]="none"),e.display="none",null!==t.fill))return e;"image"===r&&!1===t.smooth&&(i=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]);"text"===r&&(e["font-family"]=eC(t),e["font-size"]=YS(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(var o in bE){var u=t[o],s=bE[o];("transparent"!==u||"fill"!==s&&"stroke"!==s)&&null!=u&&(yk(u)&&(u=bk(u,a.gradient,"")),e[s]=u)}for(var c in xE){var l=t[c];null!=l&&(i=i||[]).push("".concat(xE[c],": ").concat(l,";"))}i&&(e.style=i.join(" "))}(i,t,e,r,this._defs),i},defs:function(e){var t=this._defs.gradient,n=this._defs.clipping;if(0!==Object.keys(t).length+Object.keys(n).length){for(var r in e.open("defs"),t){var a=t[r],i=a.stops;"radial"===a.gradient?(e.open("pattern",{id:mk+r,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+r+")"}).close(),e.close(),e.open("radialGradient",{id:r,fx:a.x1,fy:a.y1,fr:a.r1,cx:a.x2,cy:a.y2,r:a.r2})):e.open("linearGradient",{id:r,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2});for(var o=0;o<i.length;++o)e.open("stop",{offset:i[o].offset,"stop-color":i[o].color}).close();e.close()}for(var u in n){var s=n[u];e.open("clipPath",{id:u}),s.path?e.open("path",{d:s.path}).close():e.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),e.close()}e.close()}}});var LE={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function PE(e){CC.call(this,e),this._svgRenderer=new SE(e),this._canvasRenderer=new $C(e)}var jE=CC.prototype;function UE(e,t){qC.call(this,e,t)}Zn(PE,CC,{initialize:function(e,t,n,r,a){this._root_el=bC(e,0,"div");var i=bC(this._root_el,0,"div"),o=bC(this._root_el,1,"div");return this._root_el.style.position="relative",LE.debug||(i.style.height="100%",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.height="100%",o.style.width="100%"),this._svgEl=LE.svgOnTop?o:i,this._canvasEl=LE.svgOnTop?i:o,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,t,n,r,a),this._svgRenderer.initialize(this._svgEl,t,n,r,a),jE.initialize.call(this,e,t,n,r,a)},dirty:function(e){return LE.svgMarkTypes.includes(e.mark.marktype)?this._svgRenderer.dirty(e):this._canvasRenderer.dirty(e),this},_render:function(e,t){var n=(null!==t&&void 0!==t?t:["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter((function(e){return!LE.svgMarkTypes.includes(e)}));this._svgRenderer.render(e,LE.svgMarkTypes),this._canvasRenderer.render(e,n)},resize:function(e,t,n,r){return jE.resize.call(this,e,t,n,r),this._svgRenderer.resize(e,t,n,r),this._canvasRenderer.resize(e,t,n,r),this},background:function(e){return LE.svgOnTop?this._canvasRenderer.background(e):this._svgRenderer.background(e),this}}),Zn(UE,qC,{initialize:function(e,t,n){var r=bC(bC(e,0,"div"),LE.svgOnTop?0:1,"div");return qC.prototype.initialize.call(this,r,t,n)}});var WE="canvas",VE=WE,qE="png",HE="svg",GE={};function XE(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(GE[e]=t,this):GE[e]}function YE(e,t,n,r){if(function(e,t,n){return e.bounds&&t.intersects(e.bounds)&&("group"===e.marktype||!1!==e.interactive&&(!n||n(e)))}(e,t,n)){var a=e.items,i=e.marktype,o=a.length,u=0;if("group"===i)for(;u<o;++u)KE(a[u],t,n,r);else for(var s=cC[i].isect;u<o;++u){var c=a[u];$E(c,t,s)&&r.push(c)}}return r}function KE(e,t,n,r){n&&n(e.mark)&&$E(e,t,cC.group.isect)&&r.push(e);var a=e.items,i=a&&a.length;if(i){var o=e.x||0,u=e.y||0;t.translate(-o,-u);for(var s=0;s<i;++s)YE(a[s],t,n,r);t.translate(o,u)}return r}function $E(e,t,n){var r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}GE.canvas=GE.png={renderer:$C,headless:$C,handler:qC},GE.svg={renderer:SE,headless:zE,handler:JC},GE.hybrid={renderer:PE,headless:PE,handler:UE},GE.none={};var QE=new d_;var JE="top",eA="left",tA="right",nA="bottom",rA="start",aA="middle",iA="end",oA="group",uA="axis",sA="title",cA="frame",lA="scope",fA="legend",hA="row-header",dA="row-footer",pA="row-title",vA="column-header",gA="column-footer",mA="column-title",yA="padding",bA="fit",xA="fit-x",wA="fit-y",kA="none",_A="all",SA="each",CA="flush",EA="column",AA="row";function NA(e){hc.call(this,null,e)}function TA(e,t,n){return t(e.bounds.clear(),e,n)}Zn(NA,hc,{transform:function(e,t){var n,r=t.dataflow,a=e.mark,i=a.marktype,o=cC[i],u=o.bound,s=a.bounds;if(o.nested)a.items.length&&r.dirty(a.items[0]),s=TA(a,u),a.items.forEach((function(e){e.bounds.clear().union(s)}));else if(i===oA||e.modified())switch(t.visit(t.MOD,(function(e){return r.dirty(e)})),s.clear(),a.items.forEach((function(e){return s.union(TA(e,u))})),a.role){case uA:case fA:case sA:t.reflow()}else n=t.changed(t.REM),t.visit(t.ADD,(function(e){s.union(TA(e,u))})),t.visit(t.MOD,(function(e){n=n||s.alignsWith(e.bounds),r.dirty(e),s.union(TA(e,u))})),n&&(s.clear(),a.items.forEach((function(e){return s.union(e.bounds)})));return function(e){var t=e.clip;if(kn(t))t(B_(QE.clear()));else{if(!t)return;QE.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(QE)}(a),t.modifies("bounds")}});var MA=":vega_identifier:";function DA(e){hc.call(this,0,e)}function FA(e){hc.call(this,null,e)}function IA(e){hc.call(this,null,e)}DA.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},Zn(DA,hc,{transform:function(e,t){var n,r=(n=t.dataflow)._signals[MA]||(n._signals[MA]=n.add(0)),a=e.as,i=r.value;return t.visit(t.ADD,(function(e){return e[a]=e[a]||++i})),r.set(this.value=i),t}}),Zn(FA,hc,{transform:function(e,t){var n=this.value;n||((n=t.dataflow.scenegraph().mark(e.markdef,function(e){var t=e.groups,n=e.parent;return t&&1===t.size?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}(e),e.index)).group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);var r=n.marktype===oA?v_:p_;return t.visit(t.ADD,(function(e){return r.call(e,n)})),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});var OA={parity:function(e){return e.filter((function(e,t){return t%2?e.opacity=0:1}))},greedy:function(e,t){var n;return e.filter((function(e,r){return r&&RA(n.bounds,e.bounds,t)?e.opacity=0:(n=e,1)}))}},RA=function(e,t,n){return n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2)},ZA=function(e,t){for(var n,r=1,a=e.length,i=e[0].bounds;r<a;i=n,++r)if(RA(i,n=e[r].bounds,t))return!0},BA=function(e){var t=e.bounds;return t.width()>1&&t.height()>1},zA=function(e){return e.forEach((function(e){return e.opacity=1})),e},LA=function(e,t){return e.reflow(t.modified()).modifies("opacity")};function PA(e){hc.call(this,null,e)}Zn(IA,hc,{transform:function(e,t){var n,r,a=OA[e.method]||OA.parity,i=e.separation||0,o=t.materialize(t.SOURCE).source;if(o&&o.length){if(!e.method)return e.modified("method")&&(zA(o),t=LA(t,e)),t;if((o=o.filter(BA)).length){if(e.sort&&(o=o.slice().sort(e.sort)),n=zA(o),t=LA(t,e),n.length>=3&&ZA(n,i)){do{n=a(n,i)}while(n.length>=3&&ZA(n,i));n.length<3&&!sn(o).opacity&&(n.length>1&&(sn(n).opacity=0),sn(o).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(r=function(e,t,n){var r=e.range(),a=new d_;return t===JE||t===nA?a.set(r[0],-1/0,r[1],1/0):a.set(-1/0,r[0],1/0,r[1]),a.expand(n||1),function(e){return a.encloses(e.bounds)}}(e.boundScale,e.boundOrient,+e.boundTolerance),o.forEach((function(e){r(e)||(e.opacity=0)})));var u=n[0].mark.bounds.clear();return o.forEach((function(e){e.opacity&&u.union(e.bounds)})),t}}}}),Zn(PA,hc,{transform:function(e,t){var n=t.dataflow;if(t.visit(t.ALL,(function(e){return n.dirty(e)})),t.fields&&t.fields.zindex){var r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});var jA=new d_;function UA(e,t,n){return e[t]===n?0:(e[t]=n,1)}function WA(e){var t=e.items[0].orient;return t===eA||t===tA}function VA(e,t,n,r){var a,i,o=t.items[0],u=o.datum,s=null!=o.translate?o.translate:.5,c=o.orient,l=function(e){var t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}(u),f=o.range,h=o.offset,d=o.position,p=o.minExtent,v=o.maxExtent,g=u.title&&o.items[l[2]].items[0],m=o.titlePadding,y=o.bounds,b=g&&QS(g),x=0,w=0;switch(jA.clear().union(y),y.clear(),(a=l[0])>-1&&y.union(o.items[a].bounds),(a=l[1])>-1&&y.union(o.items[a].bounds),c){case JE:x=d||0,w=-h,i=Math.max(p,Math.min(v,-y.y1)),y.add(0,-i).add(f,0),g&&qA(e,g,i,m,b,0,-1,y);break;case eA:x=-h,w=d||0,i=Math.max(p,Math.min(v,-y.x1)),y.add(-i,0).add(0,f),g&&qA(e,g,i,m,b,1,-1,y);break;case tA:x=n+h,w=d||0,i=Math.max(p,Math.min(v,y.x2)),y.add(0,0).add(i,f),g&&qA(e,g,i,m,b,1,1,y);break;case nA:x=d||0,w=r+h,i=Math.max(p,Math.min(v,y.y2)),y.add(0,0).add(f,i),g&&qA(e,g,i,m,0,0,1,y);break;default:x=o.x,w=o.y}return b_(y.translate(x,w),o),UA(o,"x",x+s)|UA(o,"y",w+s)&&(o.bounds=jA,e.dirty(o),o.bounds=y,e.dirty(o)),o.mark.bounds.clear().union(y)}function qA(e,t,n,r,a,i,o,u){var s=t.bounds;if(t.auto){var c=o*(n+a+r),l=0,f=0;e.dirty(t),i?l=(t.x||0)-(t.x=c):f=(t.y||0)-(t.y=c),t.mark.bounds.clear().union(s.translate(-l,-f)),e.dirty(t)}u.union(s)}var HA=function(e,t){return Math.floor(Math.min(e,t))},GA=function(e,t){return Math.ceil(Math.max(e,t))};function XA(e){return(new d_).set(0,0,e.width||0,e.height||0)}function YA(e){var t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function KA(e,t,n){var r=rn(e)?e[t]:e;return null!=r?r:void 0!==n?n:0}function $A(e){return e<0?Math.ceil(-e):0}function QA(e,t,n){var r,a,i,o,u,s,c,l,f,h,d,p=!n.nodirty,v=n.bounds===CA?XA:YA,g=jA.set(0,0,0,0),m=KA(n.align,EA),y=KA(n.align,AA),b=KA(n.padding,EA),x=KA(n.padding,AA),w=n.columns||t.length,k=w<=0?1:Math.ceil(t.length/w),_=t.length,S=Array(_),C=Array(w),E=0,A=Array(_),N=Array(k),T=0,M=Array(_),D=Array(_),F=Array(_);for(a=0;a<w;++a)C[a]=0;for(a=0;a<k;++a)N[a]=0;for(a=0;a<_;++a)s=t[a],u=F[a]=v(s),s.x=s.x||0,M[a]=0,s.y=s.y||0,D[a]=0,i=a%w,o=~~(a/w),E=Math.max(E,c=Math.ceil(u.x2)),T=Math.max(T,l=Math.ceil(u.y2)),C[i]=Math.max(C[i],c),N[o]=Math.max(N[o],l),S[a]=b+$A(u.x1),A[a]=x+$A(u.y1),p&&e.dirty(t[a]);for(a=0;a<_;++a)a%w===0&&(S[a]=0),a<w&&(A[a]=0);if(m===SA)for(i=1;i<w;++i){for(d=0,a=i;a<_;a+=w)d<S[a]&&(d=S[a]);for(a=i;a<_;a+=w)S[a]=d+C[i-1]}else if(m===_A){for(d=0,a=0;a<_;++a)a%w&&d<S[a]&&(d=S[a]);for(a=0;a<_;++a)a%w&&(S[a]=d+E)}else for(m=!1,i=1;i<w;++i)for(a=i;a<_;a+=w)S[a]+=C[i-1];if(y===SA)for(o=1;o<k;++o){for(d=0,r=(a=o*w)+w;a<r;++a)d<A[a]&&(d=A[a]);for(a=o*w;a<r;++a)A[a]=d+N[o-1]}else if(y===_A){for(d=0,a=w;a<_;++a)d<A[a]&&(d=A[a]);for(a=w;a<_;++a)A[a]=d+T}else for(y=!1,o=1;o<k;++o)for(r=(a=o*w)+w;a<r;++a)A[a]+=N[o-1];for(f=0,a=0;a<_;++a)f=S[a]+(a%w?f:0),M[a]+=f-t[a].x;for(i=0;i<w;++i)for(h=0,a=i;a<_;a+=w)h+=A[a],D[a]+=h-t[a].y;if(m&&KA(n.center,EA)&&k>1)for(a=0;a<_;++a)(f=(u=m===_A?E:C[a%w])-F[a].x2-t[a].x-M[a])>0&&(M[a]+=f/2);if(y&&KA(n.center,AA)&&1!==w)for(a=0;a<_;++a)(h=(u=y===_A?T:N[~~(a/w)])-F[a].y2-t[a].y-D[a])>0&&(D[a]+=h/2);for(a=0;a<_;++a)g.union(F[a].translate(M[a],D[a]));switch(f=KA(n.anchor,"x"),h=KA(n.anchor,"y"),KA(n.anchor,EA)){case iA:f-=g.width();break;case aA:f-=g.width()/2}switch(KA(n.anchor,AA)){case iA:h-=g.height();break;case aA:h-=g.height()/2}for(f=Math.round(f),h=Math.round(h),g.clear(),a=0;a<_;++a)t[a].mark.bounds.clear();for(a=0;a<_;++a)(s=t[a]).x+=M[a]+=f,s.y+=D[a]+=h,g.union(s.mark.bounds.union(s.bounds.translate(M[a],D[a]))),p&&e.dirty(s);return g}function JA(e,t,n){var r,a,i,o,u,s,c,l=function(e){for(var t,n,r,a,i,o,u,s=e.items,c=s.length,l=0,f={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};l<c;++l)if(u=(o=s[l]).items,o.marktype===oA)switch(o.role){case uA:case fA:case sA:break;case hA:(t=f.rowheaders).push.apply(t,(0,$n.Z)(u));break;case dA:(n=f.rowfooters).push.apply(n,(0,$n.Z)(u));break;case vA:(r=f.colheaders).push.apply(r,(0,$n.Z)(u));break;case gA:(a=f.colfooters).push.apply(a,(0,$n.Z)(u));break;case pA:f.rowtitle=u[0];break;case mA:f.coltitle=u[0];break;default:(i=f.marks).push.apply(i,(0,$n.Z)(u))}return f}(t),f=l.marks,h=n.bounds===CA?eN:tN,d=n.offset,p=n.columns||f.length,v=p<=0?1:Math.ceil(f.length/p),g=v*p,m=QA(e,f,n);m.empty()&&m.set(0,0,0,0),l.rowheaders&&(s=KA(n.headerBand,AA,null),r=nN(e,l.rowheaders,f,p,v,-KA(d,"rowHeader"),HA,0,h,"x1",0,p,1,s)),l.colheaders&&(s=KA(n.headerBand,EA,null),a=nN(e,l.colheaders,f,p,p,-KA(d,"columnHeader"),HA,1,h,"y1",0,1,p,s)),l.rowfooters&&(s=KA(n.footerBand,AA,null),i=nN(e,l.rowfooters,f,p,v,KA(d,"rowFooter"),GA,0,h,"x2",p-1,p,1,s)),l.colfooters&&(s=KA(n.footerBand,EA,null),o=nN(e,l.colfooters,f,p,p,KA(d,"columnFooter"),GA,1,h,"y2",g-p,1,p,s)),l.rowtitle&&(u=KA(n.titleAnchor,AA),c=KA(d,"rowTitle"),c=u===iA?i+c:r-c,s=KA(n.titleBand,AA,.5),rN(e,l.rowtitle,c,0,m,s)),l.coltitle&&(u=KA(n.titleAnchor,EA),c=KA(d,"columnTitle"),c=u===iA?o+c:a-c,s=KA(n.titleBand,EA,.5),rN(e,l.coltitle,c,1,m,s))}function eN(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function tN(e,t){return e.bounds[t]}function nN(e,t,n,r,a,i,o,u,s,c,l,f,h,d){var p,v,g,m,y,b,x,w,k,_=n.length,S=0,C=0;if(!_)return S;for(p=l;p<_;p+=f)n[p]&&(S=o(S,s(n[p],c)));if(!t.length)return S;for(t.length>a&&(e.warn("Grid headers exceed limit: "+a),t=t.slice(0,a)),S+=i,v=0,m=t.length;v<m;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(p=l,v=0,m=t.length;v<m;++v,p+=f){for(y=(b=t[v]).mark.bounds,g=p;g>=0&&null==(x=n[g]);g-=h);u?(w=null==d?x.x:Math.round(x.bounds.x1+d*x.bounds.width()),k=S):(w=S,k=null==d?x.y:Math.round(x.bounds.y1+d*x.bounds.height())),y.union(b.bounds.translate(w-(b.x||0),k-(b.y||0))),b.x=w,b.y=k,e.dirty(b),C=o(C,y[c])}return C}function rN(e,t,n,r,a,i){if(t){e.dirty(t);var o=n,u=n;r?o=Math.round(a.x1+i*a.width()):u=Math.round(a.y1+i*a.height()),t.bounds.translate(o-(t.x||0),u-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=u,e.dirty(t)}}function aN(e,t,n,r,a,i,o){var u=function(e,t){var n=e[t]||{};return function(t,r){return null!=n[t]?n[t]:null!=e[t]?e[t]:r}}(n,t),s=function(e,t){var n=-1/0;return e.forEach((function(e){null!=e.offset&&(n=Math.max(n,e.offset))})),n>-1/0?n:t}(e,u("offset",0)),c=u("anchor",rA),l=c===iA?1:c===aA?.5:0,f={align:SA,bounds:u("bounds",CA),columns:"vertical"===u("direction")?1:e.length,padding:u("margin",8),center:u("center"),nodirty:!0};switch(t){case eA:f.anchor={x:Math.floor(r.x1)-s,column:iA,y:l*(o||r.height()+2*r.y1),row:c};break;case tA:f.anchor={x:Math.ceil(r.x2)+s,y:l*(o||r.height()+2*r.y1),row:c};break;case JE:f.anchor={y:Math.floor(a.y1)-s,row:iA,x:l*(i||a.width()+2*a.x1),column:c};break;case nA:f.anchor={y:Math.ceil(a.y2)+s,x:l*(i||a.width()+2*a.x1),column:c};break;case"top-left":f.anchor={x:s,y:s};break;case"top-right":f.anchor={x:i-s,y:s,column:iA};break;case"bottom-left":f.anchor={x:s,y:o-s,row:iA};break;case"bottom-right":f.anchor={x:i-s,y:o-s,column:iA,row:iA}}return f}function iN(e,t){var n,r,a=t.items[0],i=a.datum,o=a.orient,u=a.bounds,s=a.x,c=a.y;return a._bounds?a._bounds.clear().union(u):a._bounds=u.clone(),u.clear(),function(e,t,n){var r=t.padding,a=r-n.x,i=r-n.y;if(t.datum.title){var o=t.items[1].items[0],u=o.anchor,s=t.titlePadding||0,c=r-o.x,l=r-o.y;switch(o.orient){case eA:a+=Math.ceil(o.bounds.width())+s;break;case tA:case nA:break;default:i+=o.bounds.height()+s}switch((a||i)&&uN(e,n,a,i),o.orient){case eA:l+=oN(t,n,o,u,1,1);break;case tA:c+=oN(t,n,o,iA,0,0)+s,l+=oN(t,n,o,u,1,1);break;case nA:c+=oN(t,n,o,u,0,0),l+=oN(t,n,o,iA,-1,0,1)+s;break;default:c+=oN(t,n,o,u,0,0)}(c||l)&&uN(e,o,c,l),(c=Math.round(o.bounds.x1-r))<0&&(uN(e,n,-c,0),uN(e,o,-c,0))}else(a||i)&&uN(e,n,a,i)}(e,a,a.items[0].items[0]),u=function(e,t){return e.items.forEach((function(e){return t.union(e.bounds)})),t.x1=e.padding,t.y1=e.padding,t}(a,u),n=2*a.padding,r=2*a.padding,u.empty()||(n=Math.ceil(u.width()+n),r=Math.ceil(u.height()+r)),"symbol"===i.type&&function(e){var t=e.reduce((function(e,t){return e[t.column]=Math.max(t.bounds.x2-t.x,e[t.column]||0),e}),{});e.forEach((function(e){e.width=t[e.column],e.height=e.bounds.y2-e.y}))}(a.items[0].items[0].items[0].items),o!==kA&&(a.x=s=0,a.y=c=0),a.width=n,a.height=r,b_(u.set(s,c,s+n,c+r),a),a.mark.bounds.clear().union(u),a}function oN(e,t,n,r,a,i,o){var u="symbol"!==e.datum.type,s=n.datum.vgrad,c=(!u||!i&&s||o?t:t.items[0]).bounds[a?"y2":"x2"]-e.padding,l=s&&i?c:0,f=s&&i?0:c,h=a<=0?0:QS(n);return Math.round(r===rA?l:r===iA?f-h:.5*(c-h))}function uN(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function sN(e){hc.call(this,null,e)}function cN(e,t){var n=0;if(void 0===t){var r,a=(0,zt.Z)(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;(i=+i)&&(n+=i)}}catch(l){a.e(l)}finally{a.f()}}else{var o,u=-1,s=(0,zt.Z)(e);try{for(s.s();!(o=s.n()).done;){var c=o.value;(c=+t(c,++u,e))&&(n+=c)}}catch(l){s.e(l)}finally{s.f()}}return n}function lN(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function fN(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function hN(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function dN(){}Zn(sN,hc,{transform:function(e,t){var n=t.dataflow;return e.mark.items.forEach((function(t){e.layout&&JA(n,t,e.layout),function(e,t,n){var r,a,i,o,u,s=t.items,c=Math.max(0,t.width||0),l=Math.max(0,t.height||0),f=(new d_).set(0,0,c,l),h=f.clone(),d=f.clone(),p=[];for(o=0,u=s.length;o<u;++o)switch((a=s[o]).role){case uA:(WA(a)?h:d).union(VA(e,a,c,l));break;case sA:r=a;break;case fA:p.push(iN(e,a));break;case cA:case lA:case hA:case dA:case pA:case vA:case gA:case mA:h.union(a.bounds),d.union(a.bounds);break;default:f.union(a.bounds)}if(p.length){var v={};for(var g in p.forEach((function(e){(i=e.orient||tA)!==kA&&(v[i]||(v[i]=[])).push(e)})),v){var m=v[g];QA(e,m,aN(m,g,n.legends,h,d,c,l))}p.forEach((function(t){var r=t.bounds;if(r.equals(t._bounds)||(t.bounds=t._bounds,e.dirty(t),t.bounds=r,e.dirty(t)),!n.autosize||n.autosize.type!==bA&&n.autosize.type!==xA&&n.autosize.type!==wA)f.union(r);else switch(t.orient){case eA:case tA:f.add(r.x1,0).add(r.x2,0);break;case JE:case nA:f.add(0,r.y1).add(0,r.y2)}}))}f.union(h).union(d),r&&f.union(function(e,t,n,r,a){var i,o=t.items[0],u=o.frame,s=o.orient,c=o.anchor,l=o.offset,f=o.padding,h=o.items[0].items[0],d=o.items[1]&&o.items[1].items[0],p=s===eA||s===tA?r:n,v=0,g=0,m=0,y=0,b=0;if(u!==oA?s===eA?(v=a.y2,p=a.y1):s===tA?(v=a.y1,p=a.y2):(v=a.x1,p=a.x2):s===eA&&(v=r,p=0),i=c===rA?v:c===iA?p:(v+p)/2,d&&d.text){switch(s){case JE:case nA:b=h.bounds.height()+f;break;case eA:y=h.bounds.width()+f;break;case tA:y=-h.bounds.width()-f}jA.clear().union(d.bounds),jA.translate(y-(d.x||0),b-(d.y||0)),UA(d,"x",y)|UA(d,"y",b)&&(e.dirty(d),d.bounds.clear().union(jA),d.mark.bounds.clear().union(jA),e.dirty(d)),jA.clear().union(d.bounds)}else jA.clear();switch(jA.union(h.bounds),s){case JE:g=i,m=a.y1-jA.height()-l;break;case eA:g=a.x1-jA.width()-l,m=i;break;case tA:g=a.x2+jA.width()+l,m=i;break;case nA:g=i,m=a.y2+l;break;default:g=o.x,m=o.y}return UA(o,"x",g)|UA(o,"y",m)&&(jA.translate(g,m),e.dirty(o),o.bounds.clear().union(jA),t.bounds.clear().union(jA),e.dirty(o)),o.bounds}(e,r,c,l,f));t.clip&&f.set(0,0,t.width||0,t.height||0);!function(e,t,n,r){var a=r.autosize||{},i=a.type;if(e._autosize<1||!i)return;var o=e._width,u=e._height,s=Math.max(0,t.width||0),c=Math.max(0,Math.ceil(-n.x1)),l=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1)),h=Math.max(0,Math.ceil(n.x2-s)),d=Math.max(0,Math.ceil(n.y2-l));if(a.contains===yA){var p=e.padding();o-=p.left+p.right,u-=p.top+p.bottom}i===kA?(c=0,f=0,s=o,l=u):i===bA?(s=Math.max(0,o-c-h),l=Math.max(0,u-f-d)):i===xA?(s=Math.max(0,o-c-h),u=l+f+d):i===wA?(o=s+c+h,l=Math.max(0,u-f-d)):"pad"===i&&(o=s+c+h,u=l+f+d);e._resizeView(o,u,s,l,[c,f],a.resize)}(e,t,f,n)}(n,t,e)})),function(e){return e&&"legend-entry"!==e.mark.role}(e.mark.group)?t.reflow():t}});var pN=.7,vN=1.4285714285714286,gN="\\s*([+-]?\\d+)\\s*",mN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",yN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bN=/^#([0-9a-f]{3,8})$/,xN=new RegExp("^rgb\\("+[gN,gN,gN]+"\\)$"),wN=new RegExp("^rgb\\("+[yN,yN,yN]+"\\)$"),kN=new RegExp("^rgba\\("+[gN,gN,gN,mN]+"\\)$"),_N=new RegExp("^rgba\\("+[yN,yN,yN,mN]+"\\)$"),SN=new RegExp("^hsl\\("+[mN,yN,yN]+"\\)$"),CN=new RegExp("^hsla\\("+[mN,yN,yN,mN]+"\\)$"),EN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function AN(){return this.rgb().formatHex()}function NN(){return this.rgb().formatRgb()}function TN(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=bN.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?MN(t):3===n?new ON(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?DN(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?DN(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=xN.exec(e))?new ON(t[1],t[2],t[3],1):(t=wN.exec(e))?new ON(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=kN.exec(e))?DN(t[1],t[2],t[3],t[4]):(t=_N.exec(e))?DN(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=SN.exec(e))?zN(t[1],t[2]/100,t[3]/100,1):(t=CN.exec(e))?zN(t[1],t[2]/100,t[3]/100,t[4]):EN.hasOwnProperty(e)?MN(EN[e]):"transparent"===e?new ON(NaN,NaN,NaN,0):null}function MN(e){return new ON(e>>16&255,e>>8&255,255&e,1)}function DN(e,t,n,r){return r<=0&&(e=t=n=NaN),new ON(e,t,n,r)}function FN(e){return e instanceof dN||(e=TN(e)),e?new ON((e=e.rgb()).r,e.g,e.b,e.opacity):new ON}function IN(e,t,n,r){return 1===arguments.length?FN(e):new ON(e,t,n,null==r?1:r)}function ON(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function RN(){return"#"+BN(this.r)+BN(this.g)+BN(this.b)}function ZN(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function BN(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function zN(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new jN(e,t,n,r)}function LN(e){if(e instanceof jN)return new jN(e.h,e.s,e.l,e.opacity);if(e instanceof dN||(e=TN(e)),!e)return new jN;if(e instanceof jN)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,u=i-a,s=(i+a)/2;return u?(o=t===i?(n-r)/u+6*(n<r):n===i?(r-t)/u+2:(t-n)/u+4,u/=s<.5?i+a:2-i-a,o*=60):u=s>0&&s<1?0:o,new jN(o,u,s,e.opacity)}function PN(e,t,n,r){return 1===arguments.length?LN(e):new jN(e,t,n,null==r?1:r)}function jN(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function UN(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function WN(e,t,n,r,a){var i=e*e,o=i*e;return((1-3*e+3*i-o)*t+(4-6*i+3*o)*n+(1+3*e+3*i-3*o)*r+o*a)/6}function VN(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[r],i=e[r+1],o=r>0?e[r-1]:2*a-i,u=r<t-1?e[r+2]:2*i-a;return WN((n-r/t)*t,o,a,i,u)}}function qN(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),a=e[(r+t-1)%t],i=e[r%t],o=e[(r+1)%t],u=e[(r+2)%t];return WN((n-r/t)*t,a,i,o,u)}}fN(dN,TN,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:AN,formatHex:AN,formatHsl:function(){return LN(this).formatHsl()},formatRgb:NN,toString:NN}),fN(ON,IN,hN(dN,{brighter:function(e){return e=null==e?vN:Math.pow(vN,e),new ON(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?pN:Math.pow(pN,e),new ON(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:RN,formatHex:RN,formatRgb:ZN,toString:ZN})),fN(jN,PN,hN(dN,{brighter:function(e){return e=null==e?vN:Math.pow(vN,e),new jN(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?pN:Math.pow(pN,e),new jN(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new ON(UN(e>=240?e-240:e+120,a,r),UN(e,a,r),UN(e<120?e+240:e-120,a,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var HN=function(e){return function(){return e}};function GN(e,t){return function(n){return e+n*t}}function XN(e,t){var n=t-e;return n?GN(e,n>180||n<-180?n-360*Math.round(n/360):n):HN(isNaN(e)?t:e)}function YN(e){return 1===(e=+e)?KN:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):HN(isNaN(t)?n:t)}}function KN(e,t){var n=t-e;return n?GN(e,n):HN(isNaN(e)?t:e)}var $N=function e(t){var n=YN(t);function r(e,t){var r=n((e=IN(e)).r,(t=IN(t)).r),a=n(e.g,t.g),i=n(e.b,t.b),o=KN(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=i(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function QN(e){return function(t){var n,r,a=t.length,i=new Array(a),o=new Array(a),u=new Array(a);for(n=0;n<a;++n)r=IN(t[n]),i[n]=r.r||0,o[n]=r.g||0,u[n]=r.b||0;return i=e(i),o=e(o),u=e(u),r.opacity=1,function(e){return r.r=i(e),r.g=o(e),r.b=u(e),r+""}}}var JN=QN(VN),eT=QN(qN);function tT(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,a=t.slice();return function(i){for(n=0;n<r;++n)a[n]=e[n]*(1-i)+t[n]*i;return a}}function nT(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function rT(e,t){return(nT(t)?tT:aT)(e,t)}function aT(e,t){var n,r=t?t.length:0,a=e?Math.min(r,e.length):0,i=new Array(a),o=new Array(r);for(n=0;n<a;++n)i[n]=fT(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<a;++n)o[n]=i[n](e);return o}}function iT(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function oT(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function uT(e,t){var n,r={},a={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=fT(e[n],t[n]):a[n]=t[n];return function(e){for(n in r)a[n]=r[n](e);return a}}var sT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cT=new RegExp(sT.source,"g");function lT(e,t){var n,r,a,i=sT.lastIndex=cT.lastIndex=0,o=-1,u=[],s=[];for(e+="",t+="";(n=sT.exec(e))&&(r=cT.exec(t));)(a=r.index)>i&&(a=t.slice(i,a),u[o]?u[o]+=a:u[++o]=a),(n=n[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,s.push({i:o,x:oT(n,r)})),i=cT.lastIndex;return i<t.length&&(a=t.slice(i),u[o]?u[o]+=a:u[++o]=a),u.length<2?s[0]?function(e){return function(t){return e(t)+""}}(s[0].x):function(e){return function(){return e}}(t):(t=s.length,function(e){for(var n,r=0;r<t;++r)u[(n=s[r]).i]=n.x(e);return u.join("")})}function fT(e,t){var n,r=typeof t;return null==t||"boolean"===r?HN(t):("number"===r?oT:"string"===r?(n=TN(t))?(t=n,$N):lT:t instanceof TN?$N:t instanceof Date?iT:nT(t)?tT:Array.isArray(t)?aT:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?uT:oT)(e,t)}function hT(e){hc.call(this,null,e)}function dT(e){hc.call(this,null,e)}function pT(){return Ms({})}function vT(e){hc.call(this,null,e)}function gT(e){hc.call(this,[],e)}Zn(hT,hc,{transform:function(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),a=this.value,i=e.scale,o=ek(i,null==e.count?e.values?e.values.length:10:e.count,e.minstep),u=e.format||rk(n,i,o,e.formatSpecifier,e.formatType,!!e.values),s=e.values?tk(i,e.values,o):nk(i,o);return a&&(r.rem=a),a=s.map((function(e,t){return Ms({index:t/(s.length-1||1),value:e,label:u(e)})})),e.extra&&a.length&&a.push(Ms({index:-1,extra:{value:a[0].value},label:""})),r.source=a,r.add=a,this.value=a,r}}),Zn(dT,hc,{transform:function(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),a=e.item||pT,i=e.key||Ns,o=this.value;return nn(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(i))&&Ht("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=function(e){var t=Rn().test((function(e){return e.exit}));return t.lookup=function(n){return t.get(e(n))},t}(i)),t.visit(t.ADD,(function(e){var t=i(e),n=o.get(t);n?n.exit?(o.empty--,r.add.push(n)):r.mod.push(n):(n=a(e),o.set(t,n),r.add.push(n)),n.datum=e,n.exit=!1})),t.visit(t.MOD,(function(e){var t=i(e),n=o.get(t);n&&(n.datum=e,r.mod.push(n))})),t.visit(t.REM,(function(e){var t=i(e),n=o.get(t);e!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++o.empty)})),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}}),Zn(vT,hc,{transform:function(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,a=e.encoders,i=t.encode;if(nn(i)){if(!n.changed()&&!i.every((function(e){return a[e]})))return t.StopPropagation;i=i[0],n.encode=null}var o="enter"===i,u=a.update||en,s=a.enter||en,c=a.exit||en,l=(i&&!o?a[i]:u)||en;if(t.changed(t.ADD)&&(t.visit(t.ADD,(function(t){s(t,e),u(t,e)})),n.modifies(s.output),n.modifies(u.output),l!==en&&l!==u&&(t.visit(t.ADD,(function(t){l(t,e)})),n.modifies(l.output))),t.changed(t.REM)&&c!==en&&(t.visit(t.REM,(function(t){c(t,e)})),n.modifies(c.output)),o||l!==en){var f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,(function(t){var a=s(t,e)||r;(l(t,e)||a)&&n.mod.push(t)})),n.mod.length&&n.modifies(s.output)):t.visit(f,(function(t){(l(t,e)||r)&&n.mod.push(t)})),n.mod.length&&n.modifies(l.output)}return n.changed()?n:t.StopPropagation}}),Zn(gT,hc,{transform:function(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var n,r,a,i,o,u=t.dataflow.locale(),s=t.fork(t.NO_SOURCE|t.NO_FIELDS),c=this.value,l=e.type||Kw,f=e.scale,h=+e.limit,d=ek(f,null==e.count?5:e.count,e.minstep),p=!!e.values||l===Kw,v=e.format||sk(u,f,d,l,e.formatSpecifier,e.formatType,p),g=e.values||uk(f,d);return c&&(s.rem=c),l===Kw?(h&&g.length>h?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),c=g.slice(0,h-1),o=!0):c=g,kn(a=e.size)?(e.values||0!==f(c[0])||(c=c.slice(1)),i=c.reduce((function(t,n){return Math.max(t,a(n,e))}),0)):a=Nn(i=a||8),c=c.map((function(t,n){return Ms({index:n,label:v(t,n,c),value:t,offset:i,size:a(t,e)})})),o&&(o=g[c.length],c.push(Ms({index:c.length,label:"\u2026".concat(g.length-c.length," entries"),value:o,offset:i,size:a(o,e)})))):"gradient"===l?(n=f.domain(),r=Vw(f,n[0],sn(n)),g.length<3&&!e.values&&n[0]!==sn(n)&&(g=[n[0],sn(n)]),c=g.map((function(e,t){return Ms({index:t,label:v(e,t,g),value:e,perc:r(e)})}))):(a=g.length-1,r=function(e){var t=e.domain(),n=t.length-1,r=+t[0],a=+sn(t),i=a-r;if(e.type===pw){var o=n?i/n:.1;i=(a+=o)-(r-=o)}return function(e){return(e-r)/i}}(f),c=g.map((function(e,t){return Ms({index:t,label:v(e,t,g),value:e,perc:t?r(e):0,perc2:t===a?1:r(g[t+1])})}))),s.source=c,s.add=c,this.value=c,s}});var mT=function(e){return e.source.x},yT=function(e){return e.source.y},bT=function(e){return e.target.x},xT=function(e){return e.target.y};function wT(e){hc.call(this,{},e)}wT.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},Zn(wT,hc,{transform:function(e,t){var n=e.sourceX||mT,r=e.sourceY||yT,a=e.targetX||bT,i=e.targetY||xT,o=e.as||"path",u=e.orient||"vertical",s=e.shape||"line",c=CT.get(s+"-"+u)||CT.get(s);return c||Ht("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,(function(e){e[o]=c(n(e),r(e),a(e),i(e))})),t.reflow(e.modified()).modifies(o)}});var kT=function(e,t,n,r){return"M"+e+","+t+"L"+n+","+r},_T=function(e,t,n,r){var a=n-e,i=r-t,o=Math.sqrt(a*a+i*i)/2;return"M"+e+","+t+"A"+o+","+o+" "+180*Math.atan2(i,a)/Math.PI+" 0 1 "+n+","+r},ST=function(e,t,n,r){var a=n-e,i=r-t,o=.2*(a+i),u=.2*(i-a);return"M"+e+","+t+"C"+(e+o)+","+(t+u)+" "+(n+u)+","+(r-o)+" "+n+","+r},CT=Rn({line:kT,"line-radial":function(e,t,n,r){return kT(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},arc:_T,"arc-radial":function(e,t,n,r){return _T(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},curve:ST,"curve-radial":function(e,t,n,r){return ST(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},"orthogonal-horizontal":function(e,t,n,r){return"M"+e+","+t+"V"+r+"H"+n},"orthogonal-vertical":function(e,t,n,r){return"M"+e+","+t+"H"+n+"V"+r},"orthogonal-radial":function(e,t,n,r){var a=Math.cos(e),i=Math.sin(e),o=Math.cos(n),u=Math.sin(n);return"M"+t*a+","+t*i+"A"+t+","+t+" 0 0,"+((Math.abs(n-e)>Math.PI?n<=e:n>e)?1:0)+" "+t*o+","+t*u+"L"+r*o+","+r*u},"diagonal-horizontal":function(e,t,n,r){var a=(e+n)/2;return"M"+e+","+t+"C"+a+","+t+" "+a+","+r+" "+n+","+r},"diagonal-vertical":function(e,t,n,r){var a=(t+r)/2;return"M"+e+","+t+"C"+e+","+a+" "+n+","+a+" "+n+","+r},"diagonal-radial":function(e,t,n,r){var a=Math.cos(e),i=Math.sin(e),o=Math.cos(n),u=Math.sin(n),s=(t+r)/2;return"M"+t*a+","+t*i+"C"+s*a+","+s*i+" "+s*o+","+s*u+" "+r*o+","+r*u}});function ET(e){hc.call(this,null,e)}ET.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},Zn(ET,hc,{transform:function(e,t){var n,r,a,i=e.as||["startAngle","endAngle"],o=i[0],u=i[1],s=e.field||Qt,c=e.startAngle||0,l=null!=e.endAngle?e.endAngle:2*Math.PI,f=t.source,h=f.map(s),d=h.length,p=c,v=(l-c)/cN(h),g=_l(d);for(e.sort&&g.sort((function(e,t){return h[e]-h[t]})),n=0;n<d;++n)a=h[g[n]],(r=f[g[n]])[o]=p,r[u]=p+=a*v;return this.value=h,t.reflow(e.modified()).modifies(i)}});function AT(e){return Zw(e)&&e!==lw}var NT=Yn(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function TT(e){hc.call(this,null,e),this.modified(!0)}function MT(e,t,n){Lw(e)&&(Math.abs(t.reduce((function(e,t){return e+(t<0?-1:t>0?1:0)}),0))!==t.length&&n.warn("Log scale domain includes zero: "+Vn(t)));return t}function DT(e,t,n){return kn(e)&&(t||n)?function(e,t){var n=t[0],r=sn(t)-n;return function(t){return e(n+t*r)}}(e,FT(t||[0,1],n)):e}function FT(e,t){return t?e.slice().reverse():e}function IT(e){hc.call(this,null,e)}Zn(TT,hc,{transform:function(e,t){var n=t.dataflow,r=this.value,a=function(e){var t,n=e.type,r="";if(n===lw)return"sequential-linear";(function(e){var t=e.type;return Zw(t)&&t!==sw&&t!==cw&&(e.scheme||e.range&&e.range.length&&e.range.every(Pn))})(e)&&(r=2===(t=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(null!=e.domainMid):0)?"sequential-":3===t?"diverging-":"");return(r+n||rw).toLowerCase()}(e);for(a in r&&a===r.type||(this.value=r=Iw(a)()),e)if(!NT[a]){if("padding"===a&&AT(r.type))continue;kn(r[a])?r[a](e[a]):n.warn("Unsupported scale property: "+a)}return function(e,t,n){var r=e.type,a=t.round||!1,i=t.range;if(null!=t.rangeStep)i=function(e,t,n){e!==mw&&e!==gw&&Ht("Only band and point scales support rangeStep.");var r=(null!=t.paddingOuter?t.paddingOuter:t.padding)||0,a=e===gw?1:(null!=t.paddingInner?t.paddingInner:t.padding)||0;return[0,t.rangeStep*nw(n,a,r)]}(r,t,n);else if(t.scheme&&(i=function(e,t,n){var r,a=t.schemeExtent;nn(t.scheme)?r=Ww(t.scheme,t.interpolate,t.interpolateGamma):(r=Yw(t.scheme.toLowerCase()))||Ht("Unrecognized scheme name: ".concat(t.scheme));return n=e===pw?n+1:e===yw?n-1:e===hw||e===dw?+t.schemeCount||5:n,Pw(e)?DT(r,a,t.reverse):kn(r)?function(e,t){for(var n=new Array(t),r=t+1,a=0;a<t;)n[a]=e(++a/r);return n}(DT(r,a),n):e===vw?r:r.slice(0,n)}(r,t,n),kn(i))){if(e.interpolator)return e.interpolator(i);Ht("Scale type ".concat(r," does not support interpolating color schemes."))}if(i&&Pw(r))return e.interpolator(Ww(FT(i,t.reverse),t.interpolate,t.interpolateGamma));i&&t.interpolate&&e.interpolate?e.interpolate(qw(t.interpolate,t.interpolateGamma)):kn(e.round)?e.round(a):kn(e.rangeRound)&&e.interpolate(a?lN:fT);i&&e.range(FT(i,t.reverse))}(r,e,function(e,t,n){var r=t.bins;if(r&&!nn(r)){var a=e.domain(),i=a[0],o=sn(a),u=r.step,s=null==r.start?i:r.start,c=null==r.stop?o:r.stop;u||Ht("Scale bins parameter missing step property."),s<i&&(s=u*Math.ceil(i/u)),c>o&&(c=u*Math.floor(o/u)),r=_l(s,c+u/2,u)}r?e.bins=r:e.bins&&delete e.bins;e.type===yw&&(r?t.domain||t.domainRaw||(e.domain(r),n=r.length):e.bins=e.domain());return n}(r,e,function(e,t,n){var r=function(e,t,n){return t?(e.domain(MT(e.type,t,n)),t.length):-1}(e,t.domainRaw,n);if(r>-1)return r;var a,i,o=t.domain,u=e.type,s=t.zero||void 0===t.zero&&function(e){var t=e.type;return!e.bins&&(t===rw||t===iw||t===ow)}(e);if(!o)return 0;AT(u)&&t.padding&&o[0]!==sn(o)&&(o=function(e,t,n,r,a,i){var o=Math.abs(sn(n)-n[0]),u=o/(o-2*r),s=e===aw?yn(t,null,u):e===ow?bn(t,null,u,.5):e===iw?bn(t,null,u,a||1):e===uw?xn(t,null,u,i||1):mn(t,null,u);return(t=t.slice())[0]=s[0],t[t.length-1]=s[1],t}(u,o,t.range,t.padding,t.exponent,t.constant));if((s||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(a=(o=o.slice()).length-1||1,s&&(o[0]>0&&(o[0]=0),o[a]<0&&(o[a]=0)),null!=t.domainMin&&(o[0]=t.domainMin),null!=t.domainMax&&(o[a]=t.domainMax),null!=t.domainMid)){var c=(i=t.domainMid)>o[a]?a+1:i<o[0]?0:a;c!==a&&n.warn("Scale domainMid exceeds domain min or max.",i),o.splice(c,0,i)}e.domain(MT(u,o,n)),u===vw&&e.unknown(t.domainImplicit?Xy:void 0);t.nice&&e.nice&&e.nice(!0!==t.nice&&ek(e,t.nice)||null);return o.length}(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),Zn(IT,hc,{transform:function(e,t){var n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Os(e.sort)),this.modified(n),t}});var OT="zero",RT="center",ZT="normalize",BT=["y0","y1"];function zT(e){hc.call(this,null,e)}function LT(e,t,n,r,a){for(var i,o=(t-e.sum)/2,u=e.length,s=0;s<u;++s)(i=e[s])[r]=o,i[a]=o+=Math.abs(n(i))}function PT(e,t,n,r,a){for(var i,o=1/e.sum,u=0,s=e.length,c=0,l=0;c<s;++c)(i=e[c])[r]=u,i[a]=u=o*(l+=Math.abs(n(i)))}function jT(e,t,n,r,a){for(var i,o,u=0,s=0,c=e.length,l=0;l<c;++l)(i=+n(o=e[l]))<0?(o[r]=s,o[a]=s+=i):(o[r]=u,o[a]=u+=i)}zT.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:OT,values:[OT,RT,ZT]},{name:"as",type:"string",array:!0,length:2,default:BT}]},Zn(zT,hc,{transform:function(e,t){var n,r,a,i,o=e.as||BT,u=o[0],s=o[1],c=Os(e.sort),l=e.field||Qt,f=e.offset===RT?LT:e.offset===ZT?PT:jT;for(n=function(e,t,n,r){var a,i,o,u,s,c,l,f,h,d=[],p=function(e){return e(s)};if(null==t)d.push(e.slice());else for(a={},i=0,o=e.length;i<o;++i)s=e[i],(l=a[c=t.map(p)])||(a[c]=l=[],d.push(l)),l.push(s);for(c=0,h=0,u=d.length;c<u;++c){for(i=0,f=0,o=(l=d[c]).length;i<o;++i)f+=Math.abs(r(l[i]));l.sum=f,f>h&&(h=f),n&&l.sort(n)}return d.max=h,d}(t.source,e.groupby,c,l),r=0,a=n.length,i=n.max;r<a;++r)f(n[r],i,l,u,s);return t.reflow(e.modified()).modifies(o)}});var UT=Math.sqrt(50),WT=Math.sqrt(10),VT=Math.sqrt(2);function qT(e,t,n){var r,a,i,o,u=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),0===(o=HT(e,t,n))||!isFinite(o))return[];if(o>0){var s=Math.round(e/o),c=Math.round(t/o);for(s*o<e&&++s,c*o>t&&--c,i=new Array(a=c-s+1);++u<a;)i[u]=(s+u)*o}else{o=-o;var l=Math.round(e*o),f=Math.round(t*o);for(l/o<e&&++l,f/o>t&&--f,i=new Array(a=f-l+1);++u<a;)i[u]=(l+u)/o}return r&&i.reverse(),i}function HT(e,t,n){var r=(t-e)/Math.max(0,n),a=Math.floor(Math.log(r)/Math.LN10),i=r/Math.pow(10,a);return a>=0?(i>=UT?10:i>=WT?5:i>=VT?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(i>=UT?10:i>=WT?5:i>=VT?2:1)}function GT(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),i=r/a;return i>=UT?a*=10:i>=WT?a*=5:i>=VT&&(a*=2),t<e?-a:a}var XT=function(e){return e};function YT(e,t){e&&$T.hasOwnProperty(e.type)&&$T[e.type](e,t)}var KT={Feature:function(e,t){YT(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,a=n.length;++r<a;)YT(n[r].geometry,t)}},$T={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){QT(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)QT(n[r],t,0)},Polygon:function(e,t){JT(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)JT(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,a=n.length;++r<a;)YT(n[r],t)}};function QT(e,t,n){var r,a=-1,i=e.length-n;for(t.lineStart();++a<i;)r=e[a],t.point(r[0],r[1],r[2]);t.lineEnd()}function JT(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)QT(e[n],t,1);t.polygonEnd()}function eM(e,t){e&&KT.hasOwnProperty(e.type)?KT[e.type](e,t):YT(e,t)}var tM=function(){function e(){(0,ud.Z)(this,e),this._partials=new Float64Array(32),this._n=0}return(0,sd.Z)(e,[{key:"add",value:function(e){for(var t=this._partials,n=0,r=0;r<this._n&&r<32;r++){var a=t[r],i=e+a,o=Math.abs(e)<Math.abs(a)?e-(i-a):a-(i-e);o&&(t[n++]=o),e=i}return t[n]=e,this._n=n+1,this}},{key:"valueOf",value:function(){var e,t,n,r=this._partials,a=this._n,i=0;if(a>0){for(i=r[--a];a>0&&(e=i,!(n=(t=r[--a])-((i=e+t)-e))););a>0&&(n<0&&r[a-1]<0||n>0&&r[a-1]>0)&&(t=2*n)==(e=i+t)-i&&(i=e)}return i}}]),e}();var nM=1e-6,rM=Math.PI,aM=rM/2,iM=rM/4,oM=2*rM,uM=180/rM,sM=rM/180,cM=Math.abs,lM=Math.atan,fM=Math.atan2,hM=Math.cos,dM=(Math.ceil,Math.exp),pM=(Math.floor,Math.hypot,Math.log),vM=Math.pow,gM=Math.sin,mM=Math.sign||function(e){return e>0?1:e<0?-1:0},yM=Math.sqrt,bM=Math.tan;function xM(e){return e>1?0:e<-1?rM:Math.acos(e)}function wM(e){return e>1?aM:e<-1?-aM:Math.asin(e)}function kM(){}var _M,SM,CM,EM,AM=new tM,NM=new tM,TM={point:kM,lineStart:kM,lineEnd:kM,polygonStart:function(){TM.lineStart=MM,TM.lineEnd=IM},polygonEnd:function(){TM.lineStart=TM.lineEnd=TM.point=kM,AM.add(cM(NM)),NM=new tM},result:function(){var e=AM/2;return AM=new tM,e}};function MM(){TM.point=DM}function DM(e,t){TM.point=FM,_M=CM=e,SM=EM=t}function FM(e,t){NM.add(EM*e-CM*t),CM=e,EM=t}function IM(){FM(_M,SM)}var OM=TM,RM=1/0,ZM=RM,BM=-RM,zM=BM,LM={point:function(e,t){e<RM&&(RM=e);e>BM&&(BM=e);t<ZM&&(ZM=t);t>zM&&(zM=t)},lineStart:kM,lineEnd:kM,polygonStart:kM,polygonEnd:kM,result:function(){var e=[[RM,ZM],[BM,zM]];return BM=zM=-(ZM=RM=1/0),e}};var PM,jM,UM,WM,VM=LM,qM=0,HM=0,GM=0,XM=0,YM=0,KM=0,$M=0,QM=0,JM=0,eD={point:tD,lineStart:nD,lineEnd:iD,polygonStart:function(){eD.lineStart=oD,eD.lineEnd=uD},polygonEnd:function(){eD.point=tD,eD.lineStart=nD,eD.lineEnd=iD},result:function(){var e=JM?[$M/JM,QM/JM]:KM?[XM/KM,YM/KM]:GM?[qM/GM,HM/GM]:[NaN,NaN];return qM=HM=GM=XM=YM=KM=$M=QM=JM=0,e}};function tD(e,t){qM+=e,HM+=t,++GM}function nD(){eD.point=rD}function rD(e,t){eD.point=aD,tD(UM=e,WM=t)}function aD(e,t){var n=e-UM,r=t-WM,a=yM(n*n+r*r);XM+=a*(UM+e)/2,YM+=a*(WM+t)/2,KM+=a,tD(UM=e,WM=t)}function iD(){eD.point=tD}function oD(){eD.point=sD}function uD(){cD(PM,jM)}function sD(e,t){eD.point=cD,tD(PM=UM=e,jM=WM=t)}function cD(e,t){var n=e-UM,r=t-WM,a=yM(n*n+r*r);XM+=a*(UM+e)/2,YM+=a*(WM+t)/2,KM+=a,$M+=(a=WM*e-UM*t)*(UM+e),QM+=a*(WM+t),JM+=3*a,tD(UM=e,WM=t)}var lD=eD;function fD(e){this._context=e}fD.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,oM)}},result:kM};var hD,dD,pD,vD,gD,mD=new tM,yD={point:kM,lineStart:function(){yD.point=bD},lineEnd:function(){hD&&xD(dD,pD),yD.point=kM},polygonStart:function(){hD=!0},polygonEnd:function(){hD=null},result:function(){var e=+mD;return mD=new tM,e}};function bD(e,t){yD.point=xD,dD=vD=e,pD=gD=t}function xD(e,t){vD-=e,gD-=t,mD.add(yM(vD*vD+gD*gD)),vD=e,gD=t}var wD,kD,_D,SD,CD,ED,AD,ND,TD=yD,MD=function(){function e(t){(0,ud.Z)(this,e),this._append=null==t?DD:function(e){var t=Math.floor(e);if(!(t>=0))throw new RangeError("invalid digits: ".concat(e));if(t>15)return DD;if(t!==CD){var n=Math.pow(10,t);CD=t,ED=function(e){var t=1;this._+=e[0];for(var r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}return ED}(t),this._radius=4.5,this._=""}return(0,sd.Z)(e,[{key:"pointRadius",value:function(e){return this._radius=+e,this}},{key:"polygonStart",value:function(){this._line=0}},{key:"polygonEnd",value:function(){this._line=NaN}},{key:"lineStart",value:function(){this._point=0}},{key:"lineEnd",value:function(){0===this._line&&(this._+="Z"),this._point=NaN}},{key:"point",value:function(e,t){switch(this._point){case 0:this._append(wD||(wD=Hh(["M",",",""])),e,t),this._point=1;break;case 1:this._append(kD||(kD=Hh(["L",",",""])),e,t);break;default:if(this._append(_D||(_D=Hh(["M",",",""])),e,t),this._radius!==AD||this._append!==ED){var n=this._radius,r=this._;this._="",this._append(SD||(SD=Hh(["m0,","a",","," 0 1,1 0,","a",","," 0 1,1 0,","z"])),n,n,n,-2*n,n,n,2*n),AD=n,ED=this._append,ND=this._,this._=r}this._+=ND}}},{key:"result",value:function(){var e=this._;return this._="",e.length?e:null}}]),e}();function DD(e){var t=1;this._+=e[0];for(var n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function FD(e,t){var n,r,a=3,i=4.5;function o(e){return e&&("function"===typeof i&&r.pointRadius(+i.apply(this,arguments)),eM(e,n(r))),r.result()}return o.area=function(e){return eM(e,n(OM)),OM.result()},o.measure=function(e){return eM(e,n(TD)),TD.result()},o.bounds=function(e){return eM(e,n(VM)),VM.result()},o.centroid=function(e){return eM(e,n(lD)),lD.result()},o.projection=function(t){return arguments.length?(n=null==t?(e=null,XT):(e=t).stream,o):e},o.context=function(e){return arguments.length?(r=null==e?(t=null,new MD(a)):new fD(t=e),"function"!==typeof i&&r.pointRadius(i),o):t},o.pointRadius=function(e){return arguments.length?(i="function"===typeof e?e:(r.pointRadius(+e),+e),o):i},o.digits=function(e){if(!arguments.length)return a;if(null==e)a=null;else{var n=Math.floor(e);if(!(n>=0))throw new RangeError("invalid digits: ".concat(e));a=n}return null===t&&(r=new MD(a)),o},o.projection(e).digits(a).context(t)}function ID(){var e,t=[];return{point:function(t,n,r){e.push([t,n,r])},lineStart:function(){t.push(e=[])},lineEnd:kM,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function OD(e,t){return cM(e[0]-t[0])<nM&&cM(e[1]-t[1])<nM}function RD(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function ZD(e,t,n,r,a){var i,o,u=[],s=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],o=e[t];if(OD(r,o)){if(!r[2]&&!o[2]){for(a.lineStart(),i=0;i<t;++i)a.point((r=e[i])[0],r[1]);return void a.lineEnd()}o[0]+=2e-6}u.push(n=new RD(r,e,null,!0)),s.push(n.o=new RD(r,null,n,!1)),u.push(n=new RD(o,e,null,!1)),s.push(n.o=new RD(o,null,n,!0))}})),u.length){for(s.sort(t),BD(u),BD(s),i=0,o=s.length;i<o;++i)s[i].e=n=!n;for(var c,l,f=u[0];;){for(var h=f,d=!0;h.v;)if((h=h.n)===f)return;c=h.z,a.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(i=0,o=c.length;i<o;++i)a.point((l=c[i])[0],l[1]);else r(h.x,h.n.x,1,a);h=h.n}else{if(d)for(c=h.p.z,i=c.length-1;i>=0;--i)a.point((l=c[i])[0],l[1]);else r(h.x,h.p.x,-1,a);h=h.p}c=(h=h.o).z,d=!d}while(!h.v);a.lineEnd()}}}function BD(e){if(t=e.length){for(var t,n,r=0,a=e[0];++r<t;)a.n=n=e[r],n.p=a,a=n;a.n=n=e[0],n.p=a}}function zD(e){return[fM(e[1],e[0]),wM(e[2])]}function LD(e){var t=e[0],n=e[1],r=hM(n);return[r*hM(t),r*gM(t),gM(n)]}function PD(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function jD(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function UD(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function WD(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function VD(e){var t=yM(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function qD(e){return cM(e[0])<=rM?e[0]:mM(e[0])*((cM(e[0])+rM)%oM-rM)}var HD=_.mark(GD);function GD(e){var t,n,r;return _.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t=(0,zt.Z)(e),a.prev=1,t.s();case 3:if((n=t.n()).done){a.next=8;break}return r=n.value,a.delegateYield(r,"t0",6);case 6:a.next=3;break;case 8:a.next=13;break;case 10:a.prev=10,a.t1=a.catch(1),t.e(a.t1);case 13:return a.prev=13,t.f(),a.finish(13);case 16:case"end":return a.stop()}}),HD,null,[[1,10,13,16]])}function XD(e){return Array.from(GD(e))}function YD(e,t,n,r){return function(a){var i,o,u,s=t(a),c=ID(),l=t(c),f=!1,h={point:d,lineStart:v,lineEnd:g,polygonStart:function(){h.point=m,h.lineStart=y,h.lineEnd=b,o=[],i=[]},polygonEnd:function(){h.point=d,h.lineStart=v,h.lineEnd=g,o=XD(o);var e=function(e,t){var n=qD(t),r=t[1],a=gM(r),i=[gM(n),-hM(n),0],o=0,u=0,s=new tM;1===a?r=aM+nM:-1===a&&(r=-aM-nM);for(var c=0,l=e.length;c<l;++c)if(h=(f=e[c]).length)for(var f,h,d=f[h-1],p=qD(d),v=d[1]/2+iM,g=gM(v),m=hM(v),y=0;y<h;++y,p=x,g=k,m=_,d=b){var b=f[y],x=qD(b),w=b[1]/2+iM,k=gM(w),_=hM(w),S=x-p,C=S>=0?1:-1,E=C*S,A=E>rM,N=g*k;if(s.add(fM(N*C*gM(E),m*_+N*hM(E))),o+=A?S+C*oM:S,A^p>=n^x>=n){var T=jD(LD(d),LD(b));VD(T);var M=jD(i,T);VD(M);var D=(A^S>=0?-1:1)*wM(M[2]);(r>D||r===D&&(T[0]||T[1]))&&(u+=A^S>=0?1:-1)}}return(o<-1e-6||o<nM&&s<-1e-12)^1&u}(i,r);o.length?(f||(a.polygonStart(),f=!0),ZD(o,$D,e,n,a)):e&&(f||(a.polygonStart(),f=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),f&&(a.polygonEnd(),f=!1),o=i=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function d(t,n){e(t,n)&&a.point(t,n)}function p(e,t){s.point(e,t)}function v(){h.point=p,s.lineStart()}function g(){h.point=d,s.lineEnd()}function m(e,t){u.push([e,t]),l.point(e,t)}function y(){l.lineStart(),u=[]}function b(){m(u[0][0],u[0][1]),l.lineEnd();var e,t,n,r,s=l.clean(),h=c.result(),d=h.length;if(u.pop(),i.push(u),u=null,d)if(1&s){if((t=(n=h[0]).length-1)>0){for(f||(a.polygonStart(),f=!0),a.lineStart(),e=0;e<t;++e)a.point((r=n[e])[0],r[1]);a.lineEnd()}}else d>1&&2&s&&h.push(h.pop().concat(h.shift())),o.push(h.filter(KD))}return h}}function KD(e){return e.length>1}function $D(e,t){return((e=e.x)[0]<0?e[1]-aM-nM:aM-e[1])-((t=t.x)[0]<0?t[1]-aM-nM:aM-t[1])}var QD=YD((function(){return!0}),(function(e){var t,n=NaN,r=NaN,a=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(i,o){var u=i>0?rM:-rM,s=cM(i-n);cM(s-rM)<nM?(e.point(n,r=(r+o)/2>0?aM:-aM),e.point(a,r),e.lineEnd(),e.lineStart(),e.point(u,r),e.point(i,r),t=0):a!==u&&s>=rM&&(cM(n-a)<nM&&(n-=a*nM),cM(i-u)<nM&&(i-=u*nM),r=function(e,t,n,r){var a,i,o=gM(e-n);return cM(o)>nM?lM((gM(t)*(i=hM(r))*gM(n)-gM(r)*(a=hM(t))*gM(e))/(a*i*o)):(t+r)/2}(n,r,i,o),e.point(a,r),e.lineEnd(),e.lineStart(),e.point(u,r),t=0),e.point(n=i,r=o),a=u},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}),(function(e,t,n,r){var a;if(null==e)a=n*aM,r.point(-rM,a),r.point(0,a),r.point(rM,a),r.point(rM,0),r.point(rM,-a),r.point(0,-a),r.point(-rM,-a),r.point(-rM,0),r.point(-rM,a);else if(cM(e[0]-t[0])>nM){var i=e[0]<t[0]?rM:-rM;a=n*i/2,r.point(-i,a),r.point(0,a),r.point(i,a)}else r.point(t[0],t[1])}),[-rM,-aM]);function JD(e,t,n,r,a,i){if(n){var o=hM(t),u=gM(t),s=r*n;null==a?(a=t+r*oM,i=t-s/2):(a=eF(o,a),i=eF(o,i),(r>0?a<i:a>i)&&(a+=r*oM));for(var c,l=a;r>0?l>i:l<i;l-=s)c=zD([o,-u*hM(l),-u*gM(l)]),e.point(c[0],c[1])}}function eF(e,t){(t=LD(t))[0]-=e,VD(t);var n=xM(-t[1]);return((-t[2]<0?-n:n)+oM-nM)%oM}function tF(e){var t=hM(e),n=6*sM,r=t>0,a=cM(t)>nM;function i(e,n){return hM(e)*hM(n)>t}function o(e,n,r){var a=[1,0,0],i=jD(LD(e),LD(n)),o=PD(i,i),u=i[0],s=o-u*u;if(!s)return!r&&e;var c=t*o/s,l=-t*u/s,f=jD(a,i),h=WD(a,c);UD(h,WD(i,l));var d=f,p=PD(h,d),v=PD(d,d),g=p*p-v*(PD(h,h)-1);if(!(g<0)){var m=yM(g),y=WD(d,(-p-m)/v);if(UD(y,h),y=zD(y),!r)return y;var b,x=e[0],w=n[0],k=e[1],_=n[1];w<x&&(b=x,x=w,w=b);var S=w-x,C=cM(S-rM)<nM;if(!C&&_<k&&(b=k,k=_,_=b),C||S<nM?C?k+_>0^y[1]<(cM(y[0]-x)<nM?k:_):k<=y[1]&&y[1]<=_:S>rM^(x<=y[0]&&y[0]<=w)){var E=WD(d,(-p+m)/v);return UD(E,h),[y,zD(E)]}}}function u(t,n){var a=r?e:rM-e,i=0;return t<-a?i|=1:t>a&&(i|=2),n<-a?i|=4:n>a&&(i|=8),i}return YD(i,(function(e){var t,n,s,c,l;return{lineStart:function(){c=s=!1,l=1},point:function(f,h){var d,p=[f,h],v=i(f,h),g=r?v?0:u(f,h):v?u(f+(f<0?rM:-rM),h):0;if(!t&&(c=s=v)&&e.lineStart(),v!==s&&(!(d=o(t,p))||OD(t,d)||OD(p,d))&&(p[2]=1),v!==s)l=0,v?(e.lineStart(),d=o(p,t),e.point(d[0],d[1])):(d=o(t,p),e.point(d[0],d[1],2),e.lineEnd()),t=d;else if(a&&t&&r^v){var m;g&n||!(m=o(p,t,!0))||(l=0,r?(e.lineStart(),e.point(m[0][0],m[0][1]),e.point(m[1][0],m[1][1]),e.lineEnd()):(e.point(m[1][0],m[1][1]),e.lineEnd(),e.lineStart(),e.point(m[0][0],m[0][1],3)))}!v||t&&OD(t,p)||e.point(p[0],p[1]),t=p,s=v,n=g},lineEnd:function(){s&&e.lineEnd(),t=null},clean:function(){return l|(c&&s)<<1}}}),(function(t,r,a,i){JD(i,e,n,a,t,r)}),r?[0,-e]:[-rM,e-rM])}var nF=1e9,rF=-nF;function aF(e,t,n,r){function a(a,i){return e<=a&&a<=n&&t<=i&&i<=r}function i(a,i,u,c){var l=0,f=0;if(null==a||(l=o(a,u))!==(f=o(i,u))||s(a,i)<0^u>0)do{c.point(0===l||3===l?e:n,l>1?r:t)}while((l=(l+u+4)%4)!==f);else c.point(i[0],i[1])}function o(r,a){return cM(r[0]-e)<nM?a>0?0:3:cM(r[0]-n)<nM?a>0?2:1:cM(r[1]-t)<nM?a>0?1:0:a>0?3:2}function u(e,t){return s(e.x,t.x)}function s(e,t){var n=o(e,1),r=o(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(o){var s,c,l,f,h,d,p,v,g,m,y,b=o,x=ID(),w={point:k,lineStart:function(){w.point=_,c&&c.push(l=[]);m=!0,g=!1,p=v=NaN},lineEnd:function(){s&&(_(f,h),d&&g&&x.rejoin(),s.push(x.result()));w.point=k,g&&b.lineEnd()},polygonStart:function(){b=x,s=[],c=[],y=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,a=c.length;n<a;++n)for(var i,o,u=c[n],s=1,l=u.length,f=u[0],h=f[0],d=f[1];s<l;++s)i=h,o=d,h=(f=u[s])[0],d=f[1],o<=r?d>r&&(h-i)*(r-o)>(d-o)*(e-i)&&++t:d<=r&&(h-i)*(r-o)<(d-o)*(e-i)&&--t;return t}(),n=y&&t,a=(s=XD(s)).length;(n||a)&&(o.polygonStart(),n&&(o.lineStart(),i(null,null,1,o),o.lineEnd()),a&&ZD(s,u,t,i,o),o.polygonEnd());b=o,s=c=l=null}};function k(e,t){a(e,t)&&b.point(e,t)}function _(i,o){var u=a(i,o);if(c&&l.push([i,o]),m)f=i,h=o,d=u,m=!1,u&&(b.lineStart(),b.point(i,o));else if(u&&g)b.point(i,o);else{var s=[p=Math.max(rF,Math.min(nF,p)),v=Math.max(rF,Math.min(nF,v))],x=[i=Math.max(rF,Math.min(nF,i)),o=Math.max(rF,Math.min(nF,o))];!function(e,t,n,r,a,i){var o,u=e[0],s=e[1],c=0,l=1,f=t[0]-u,h=t[1]-s;if(o=n-u,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<l&&(l=o)}else if(f>0){if(o>l)return;o>c&&(c=o)}if(o=a-u,f||!(o<0)){if(o/=f,f<0){if(o>l)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<l&&(l=o)}if(o=r-s,h||!(o>0)){if(o/=h,h<0){if(o<c)return;o<l&&(l=o)}else if(h>0){if(o>l)return;o>c&&(c=o)}if(o=i-s,h||!(o<0)){if(o/=h,h<0){if(o>l)return;o>c&&(c=o)}else if(h>0){if(o<c)return;o<l&&(l=o)}return c>0&&(e[0]=u+c*f,e[1]=s+c*h),l<1&&(t[0]=u+l*f,t[1]=s+l*h),!0}}}}}(s,x,e,t,n,r)?u&&(b.lineStart(),b.point(i,o),y=!1):(g||(b.lineStart(),b.point(s[0],s[1])),b.point(x[0],x[1]),u||b.lineEnd(),y=!1)}p=i,v=o,g=u}return w}}function iF(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}function oF(e,t){return cM(e)>rM&&(e-=Math.round(e/oM)*oM),[e,t]}function uF(e,t,n){return(e%=oM)?t||n?iF(cF(e),lF(t,n)):cF(e):t||n?lF(t,n):oF}function sF(e){return function(t,n){return cM(t+=e)>rM&&(t-=Math.round(t/oM)*oM),[t,n]}}function cF(e){var t=sF(e);return t.invert=sF(-e),t}function lF(e,t){var n=hM(e),r=gM(e),a=hM(t),i=gM(t);function o(e,t){var o=hM(t),u=hM(e)*o,s=gM(e)*o,c=gM(t),l=c*n+u*r;return[fM(s*a-l*i,u*n-c*r),wM(l*a+s*i)]}return o.invert=function(e,t){var o=hM(t),u=hM(e)*o,s=gM(e)*o,c=gM(t),l=c*a-s*i;return[fM(s*a+c*i,u*n+l*r),wM(l*n-u*r)]},o}function fF(e){return function(t){var n=new hF;for(var r in e)n[r]=e[r];return n.stream=t,n}}function hF(){}function dF(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),eM(n,e.stream(VM)),t(VM.result()),null!=r&&e.clipExtent(r),e}function pF(e,t,n){return dF(e,(function(n){var r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],i=Math.min(r/(n[1][0]-n[0][0]),a/(n[1][1]-n[0][1])),o=+t[0][0]+(r-i*(n[1][0]+n[0][0]))/2,u=+t[0][1]+(a-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([o,u])}),n)}function vF(e,t,n){return pF(e,[[0,0],t],n)}function gF(e,t,n){return dF(e,(function(n){var r=+t,a=r/(n[1][0]-n[0][0]),i=(r-a*(n[1][0]+n[0][0]))/2,o=-a*n[0][1];e.scale(150*a).translate([i,o])}),n)}function mF(e,t,n){return dF(e,(function(n){var r=+t,a=r/(n[1][1]-n[0][1]),i=-a*n[0][0],o=(r-a*(n[1][1]+n[0][1]))/2;e.scale(150*a).translate([i,o])}),n)}oF.invert=oF,hF.prototype={constructor:hF,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var yF=hM(30*sM);function bF(e,t){return+t?function(e,t){function n(r,a,i,o,u,s,c,l,f,h,d,p,v,g){var m=c-r,y=l-a,b=m*m+y*y;if(b>4*t&&v--){var x=o+h,w=u+d,k=s+p,_=yM(x*x+w*w+k*k),S=wM(k/=_),C=cM(cM(k)-1)<nM||cM(i-f)<nM?(i+f)/2:fM(w,x),E=e(C,S),A=E[0],N=E[1],T=A-r,M=N-a,D=y*T-m*M;(D*D/b>t||cM((m*T+y*M)/b-.5)>.3||o*h+u*d+s*p<yF)&&(n(r,a,i,o,u,s,A,N,C,x/=_,w/=_,k,v,g),g.point(A,N),n(A,N,C,x,w,k,c,l,f,h,d,p,v,g))}}return function(t){var r,a,i,o,u,s,c,l,f,h,d,p,v={point:g,lineStart:m,lineEnd:b,polygonStart:function(){t.polygonStart(),v.lineStart=x},polygonEnd:function(){t.polygonEnd(),v.lineStart=m}};function g(n,r){n=e(n,r),t.point(n[0],n[1])}function m(){l=NaN,v.point=y,t.lineStart()}function y(r,a){var i=LD([r,a]),o=e(r,a);n(l,f,c,h,d,p,l=o[0],f=o[1],c=r,h=i[0],d=i[1],p=i[2],16,t),t.point(l,f)}function b(){v.point=g,t.lineEnd()}function x(){m(),v.point=w,v.lineEnd=k}function w(e,t){y(r=e,t),a=l,i=f,o=h,u=d,s=p,v.point=y}function k(){n(l,f,c,h,d,p,a,i,r,o,u,s,16,t),v.lineEnd=b,b()}return v}}(e,t):function(e){return fF({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)}var xF=fF({point:function(e,t){this.stream.point(e*sM,t*sM)}});function wF(e,t,n,r,a,i){if(!i)return function(e,t,n,r,a){function i(i,o){return[t+e*(i*=r),n-e*(o*=a)]}return i.invert=function(i,o){return[(i-t)/e*r,(n-o)/e*a]},i}(e,t,n,r,a);var o=hM(i),u=gM(i),s=o*e,c=u*e,l=o/e,f=u/e,h=(u*n-o*t)/e,d=(u*t+o*n)/e;function p(e,i){return[s*(e*=r)-c*(i*=a)+t,n-c*e-s*i]}return p.invert=function(e,t){return[r*(l*e-f*t+h),a*(d-f*e-l*t)]},p}function kF(e){return _F((function(){return e}))()}function _F(e){var t,n,r,a,i,o,u,s,c,l,f=150,h=480,d=250,p=0,v=0,g=0,m=0,y=0,b=0,x=1,w=1,k=null,_=QD,S=null,C=XT,E=.5;function A(e){return s(e[0]*sM,e[1]*sM)}function N(e){return(e=s.invert(e[0],e[1]))&&[e[0]*uM,e[1]*uM]}function T(){var e=wF(f,0,0,x,w,b).apply(null,t(p,v)),r=wF(f,h-e[0],d-e[1],x,w,b);return n=uF(g,m,y),u=iF(t,r),s=iF(n,u),o=bF(u,E),M()}function M(){return c=l=null,A}return A.stream=function(e){return c&&l===e?c:c=xF(function(e){return fF({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}(n)(_(o(C(l=e)))))},A.preclip=function(e){return arguments.length?(_=e,k=void 0,M()):_},A.postclip=function(e){return arguments.length?(C=e,S=r=a=i=null,M()):C},A.clipAngle=function(e){return arguments.length?(_=+e?tF(k=e*sM):(k=null,QD),M()):k*uM},A.clipExtent=function(e){return arguments.length?(C=null==e?(S=r=a=i=null,XT):aF(S=+e[0][0],r=+e[0][1],a=+e[1][0],i=+e[1][1]),M()):null==S?null:[[S,r],[a,i]]},A.scale=function(e){return arguments.length?(f=+e,T()):f},A.translate=function(e){return arguments.length?(h=+e[0],d=+e[1],T()):[h,d]},A.center=function(e){return arguments.length?(p=e[0]%360*sM,v=e[1]%360*sM,T()):[p*uM,v*uM]},A.rotate=function(e){return arguments.length?(g=e[0]%360*sM,m=e[1]%360*sM,y=e.length>2?e[2]%360*sM:0,T()):[g*uM,m*uM,y*uM]},A.angle=function(e){return arguments.length?(b=e%360*sM,T()):b*uM},A.reflectX=function(e){return arguments.length?(x=e?-1:1,T()):x<0},A.reflectY=function(e){return arguments.length?(w=e?-1:1,T()):w<0},A.precision=function(e){return arguments.length?(o=bF(u,E=e*e),M()):yM(E)},A.fitExtent=function(e,t){return pF(A,e,t)},A.fitSize=function(e,t){return vF(A,e,t)},A.fitWidth=function(e,t){return gF(A,e,t)},A.fitHeight=function(e,t){return mF(A,e,t)},function(){return t=e.apply(this,arguments),A.invert=t.invert&&N,T()}}function SF(e){var t=0,n=rM/3,r=_F(e),a=r(t,n);return a.parallels=function(e){return arguments.length?r(t=e[0]*sM,n=e[1]*sM):[t*uM,n*uM]},a}function CF(e,t){var n=gM(e),r=(n+gM(t))/2;if(cM(r)<nM)return function(e){var t=hM(e);function n(e,n){return[e*t,gM(n)/t]}return n.invert=function(e,n){return[e/t,wM(n*t)]},n}(e);var a=1+n*(2*r-n),i=yM(a)/r;function o(e,t){var n=yM(a-2*r*gM(t))/r;return[n*gM(e*=r),i-n*hM(e)]}return o.invert=function(e,t){var n=i-t,o=fM(e,cM(n))*mM(n);return n*r<0&&(o-=rM*mM(e)*mM(n)),[o/r,wM((a-(e*e+n*n)*r*r)/(2*r))]},o}function EF(){return SF(CF).scale(155.424).center([0,33.6442])}function AF(){return EF().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function NF(e){return function(t,n){var r=hM(t),a=hM(n),i=e(r*a);return i===1/0?[2,0]:[i*a*gM(t),i*gM(n)]}}function TF(e){return function(t,n){var r=yM(t*t+n*n),a=e(r),i=gM(a),o=hM(a);return[fM(t*i,r*o),wM(r&&n*i/r)]}}var MF=NF((function(e){return yM(2/(1+e))}));MF.invert=TF((function(e){return 2*wM(e/2)}));var DF=NF((function(e){return(e=xM(e))&&e/gM(e)}));function FF(e,t){return[e,pM(bM((aM+t)/2))]}function IF(e){var t,n,r,a=kF(e),i=a.center,o=a.scale,u=a.translate,s=a.clipExtent,c=null;function l(){var i=rM*o(),u=a(function(e){function t(t){return(t=e(t[0]*sM,t[1]*sM))[0]*=uM,t[1]*=uM,t}return e=uF(e[0]*sM,e[1]*sM,e.length>2?e[2]*sM:0),t.invert=function(t){return(t=e.invert(t[0]*sM,t[1]*sM))[0]*=uM,t[1]*=uM,t},t}(a.rotate()).invert([0,0]));return s(null==c?[[u[0]-i,u[1]-i],[u[0]+i,u[1]+i]]:e===FF?[[Math.max(u[0]-i,c),t],[Math.min(u[0]+i,n),r]]:[[c,Math.max(u[1]-i,t)],[n,Math.min(u[1]+i,r)]])}return a.scale=function(e){return arguments.length?(o(e),l()):o()},a.translate=function(e){return arguments.length?(u(e),l()):u()},a.center=function(e){return arguments.length?(i(e),l()):i()},a.clipExtent=function(e){return arguments.length?(null==e?c=t=n=r=null:(c=+e[0][0],t=+e[0][1],n=+e[1][0],r=+e[1][1]),l()):null==c?null:[[c,t],[n,r]]},l()}function OF(e){return bM((aM+e)/2)}function RF(e,t){var n=hM(e),r=e===t?gM(e):pM(n/hM(t))/pM(OF(t)/OF(e)),a=n*vM(OF(e),r)/r;if(!r)return FF;function i(e,t){a>0?t<-aM+nM&&(t=-aM+nM):t>aM-nM&&(t=aM-nM);var n=a/vM(OF(t),r);return[n*gM(r*e),a-n*hM(r*e)]}return i.invert=function(e,t){var n=a-t,i=mM(r)*yM(e*e+n*n),o=fM(e,cM(n))*mM(n);return n*r<0&&(o-=rM*mM(e)*mM(n)),[o/r,2*lM(vM(a/i,1/r))-aM]},i}function ZF(e,t){return[e,t]}function BF(e,t){var n=hM(e),r=e===t?gM(e):(n-hM(t))/(t-e),a=n/r+e;if(cM(r)<nM)return ZF;function i(e,t){var n=a-t,i=r*e;return[n*gM(i),a-n*hM(i)]}return i.invert=function(e,t){var n=a-t,i=fM(e,cM(n))*mM(n);return n*r<0&&(i-=rM*mM(e)*mM(n)),[i/r,a-mM(r)*yM(e*e+n*n)]},i}DF.invert=TF((function(e){return e})),FF.invert=function(e,t){return[e,2*lM(dM(t))-aM]},ZF.invert=ZF;var zF=1.340264,LF=-.081106,PF=893e-6,jF=.003796,UF=yM(3)/2;function WF(e,t){var n=wM(UF*gM(t)),r=n*n,a=r*r*r;return[e*hM(n)/(UF*(zF+3*LF*r+a*(7*PF+9*jF*r))),n*(zF+LF*r+a*(PF+jF*r))]}function VF(e,t){var n=hM(t),r=hM(e)*n;return[n*gM(e)/r,gM(t)/r]}function qF(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function HF(e,t){return[hM(t)*gM(e),gM(t)]}function GF(e,t){var n=hM(t),r=1+hM(e)*n;return[n*gM(e)/r,gM(t)/r]}function XF(e,t){return[pM(bM((aM+t)/2)),-e]}function YF(){}function KF(){var e,t=[];return{point:function(t,n,r){e.push([t,n,r])},lineStart:function(){t.push(e=[])},lineEnd:YF,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}WF.invert=function(e,t){for(var n,r=t,a=r*r,i=a*a*a,o=0;o<12&&(i=(a=(r-=n=(r*(zF+LF*a+i*(PF+jF*a))-t)/(zF+3*LF*a+i*(7*PF+9*jF*a)))*r)*a*a,!(cM(n)<1e-12));++o);return[UF*e*(zF+3*LF*a+i*(7*PF+9*jF*a))/hM(r),wM(gM(r)/UF)]},VF.invert=TF(lM),qF.invert=function(e,t){var n,r=t,a=25;do{var i=r*r,o=i*i;r-=n=(r*(1.007226+i*(.015085+o*(.028874*i-.044475-.005916*o)))-t)/(1.007226+i*(.045255+o*(.259866*i-.311325-.005916*11*o)))}while(cM(n)>nM&&--a>0);return[e/(.8707+(i=r*r)*(i*(i*i*i*(.003971-.001529*i)-.013791)-.131979)),r]},HF.invert=TF(wM),GF.invert=TF((function(e){return 2*lM(e)})),XF.invert=function(e,t){return[-t,2*lM(dM(e))-aM]};var $F=1e-6,QF=Math.PI,JF=QF/2,eI=QF/4,tI=2*QF,nI=180/QF,rI=QF/180,aI=Math.abs,iI=Math.atan,oI=Math.atan2,uI=Math.cos,sI=(Math.ceil,Math.exp,Math.floor,Math.hypot,Math.log,Math.pow,Math.sin),cI=Math.sign||function(e){return e>0?1:e<0?-1:0},lI=Math.sqrt;Math.tan;function fI(e){return e>1?JF:e<-1?-JF:Math.asin(e)}function hI(e,t){return aI(e[0]-t[0])<$F&&aI(e[1]-t[1])<$F}function dI(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function pI(e,t,n,r,a){var i,o,u=[],s=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],o=e[t];if(hI(r,o)){if(!r[2]&&!o[2]){for(a.lineStart(),i=0;i<t;++i)a.point((r=e[i])[0],r[1]);return void a.lineEnd()}o[0]+=2e-6}u.push(n=new dI(r,e,null,!0)),s.push(n.o=new dI(r,null,n,!1)),u.push(n=new dI(o,e,null,!1)),s.push(n.o=new dI(o,null,n,!0))}})),u.length){for(s.sort(t),vI(u),vI(s),i=0,o=s.length;i<o;++i)s[i].e=n=!n;for(var c,l,f=u[0];;){for(var h=f,d=!0;h.v;)if((h=h.n)===f)return;c=h.z,a.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(i=0,o=c.length;i<o;++i)a.point((l=c[i])[0],l[1]);else r(h.x,h.n.x,1,a);h=h.n}else{if(d)for(c=h.p.z,i=c.length-1;i>=0;--i)a.point((l=c[i])[0],l[1]);else r(h.x,h.p.x,-1,a);h=h.p}c=(h=h.o).z,d=!d}while(!h.v);a.lineEnd()}}}function vI(e){if(t=e.length){for(var t,n,r=0,a=e[0];++r<t;)a.n=n=e[r],n.p=a,a=n;a.n=n=e[0],n.p=a}}var gI=function(){function e(){(0,ud.Z)(this,e),this._partials=new Float64Array(32),this._n=0}return(0,sd.Z)(e,[{key:"add",value:function(e){for(var t=this._partials,n=0,r=0;r<this._n&&r<32;r++){var a=t[r],i=e+a,o=Math.abs(e)<Math.abs(a)?e-(i-a):a-(i-e);o&&(t[n++]=o),e=i}return t[n]=e,this._n=n+1,this}},{key:"valueOf",value:function(){var e,t,n,r=this._partials,a=this._n,i=0;if(a>0){for(i=r[--a];a>0&&(e=i,!(n=(t=r[--a])-((i=e+t)-e))););a>0&&(n<0&&r[a-1]<0||n>0&&r[a-1]>0)&&(t=2*n)==(e=i+t)-i&&(i=e)}return i}}]),e}();function mI(e){return[oI(e[1],e[0]),fI(e[2])]}function yI(e){var t=e[0],n=e[1],r=uI(n);return[r*uI(t),r*sI(t),sI(n)]}function bI(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function xI(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function wI(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function kI(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function _I(e){var t=lI(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function SI(e){return aI(e[0])<=QF?e[0]:cI(e[0])*((aI(e[0])+QF)%tI-QF)}var CI=_.mark(EI);function EI(e){var t,n,r;return _.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t=(0,zt.Z)(e),a.prev=1,t.s();case 3:if((n=t.n()).done){a.next=8;break}return r=n.value,a.delegateYield(r,"t0",6);case 6:a.next=3;break;case 8:a.next=13;break;case 10:a.prev=10,a.t1=a.catch(1),t.e(a.t1);case 13:return a.prev=13,t.f(),a.finish(13);case 16:case"end":return a.stop()}}),CI,null,[[1,10,13,16]])}function AI(e){return Array.from(EI(e))}function NI(e,t,n,r){return function(a){var i,o,u,s=t(a),c=KF(),l=t(c),f=!1,h={point:d,lineStart:v,lineEnd:g,polygonStart:function(){h.point=m,h.lineStart=y,h.lineEnd=b,o=[],i=[]},polygonEnd:function(){h.point=d,h.lineStart=v,h.lineEnd=g,o=AI(o);var e=function(e,t){var n=SI(t),r=t[1],a=sI(r),i=[sI(n),-uI(n),0],o=0,u=0,s=new gI;1===a?r=JF+$F:-1===a&&(r=-JF-$F);for(var c=0,l=e.length;c<l;++c)if(h=(f=e[c]).length)for(var f,h,d=f[h-1],p=SI(d),v=d[1]/2+eI,g=sI(v),m=uI(v),y=0;y<h;++y,p=x,g=k,m=_,d=b){var b=f[y],x=SI(b),w=b[1]/2+eI,k=sI(w),_=uI(w),S=x-p,C=S>=0?1:-1,E=C*S,A=E>QF,N=g*k;if(s.add(oI(N*C*sI(E),m*_+N*uI(E))),o+=A?S+C*tI:S,A^p>=n^x>=n){var T=xI(yI(d),yI(b));_I(T);var M=xI(i,T);_I(M);var D=(A^S>=0?-1:1)*fI(M[2]);(r>D||r===D&&(T[0]||T[1]))&&(u+=A^S>=0?1:-1)}}return(o<-1e-6||o<$F&&s<-1e-12)^1&u}(i,r);o.length?(f||(a.polygonStart(),f=!0),pI(o,MI,e,n,a)):e&&(f||(a.polygonStart(),f=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),f&&(a.polygonEnd(),f=!1),o=i=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function d(t,n){e(t,n)&&a.point(t,n)}function p(e,t){s.point(e,t)}function v(){h.point=p,s.lineStart()}function g(){h.point=d,s.lineEnd()}function m(e,t){u.push([e,t]),l.point(e,t)}function y(){l.lineStart(),u=[]}function b(){m(u[0][0],u[0][1]),l.lineEnd();var e,t,n,r,s=l.clean(),h=c.result(),d=h.length;if(u.pop(),i.push(u),u=null,d)if(1&s){if((t=(n=h[0]).length-1)>0){for(f||(a.polygonStart(),f=!0),a.lineStart(),e=0;e<t;++e)a.point((r=n[e])[0],r[1]);a.lineEnd()}}else d>1&&2&s&&h.push(h.pop().concat(h.shift())),o.push(h.filter(TI))}return h}}function TI(e){return e.length>1}function MI(e,t){return((e=e.x)[0]<0?e[1]-JF-$F:JF-e[1])-((t=t.x)[0]<0?t[1]-JF-$F:JF-t[1])}var DI=NI((function(){return!0}),(function(e){var t,n=NaN,r=NaN,a=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(i,o){var u=i>0?QF:-QF,s=aI(i-n);aI(s-QF)<$F?(e.point(n,r=(r+o)/2>0?JF:-JF),e.point(a,r),e.lineEnd(),e.lineStart(),e.point(u,r),e.point(i,r),t=0):a!==u&&s>=QF&&(aI(n-a)<$F&&(n-=a*$F),aI(i-u)<$F&&(i-=u*$F),r=function(e,t,n,r){var a,i,o=sI(e-n);return aI(o)>$F?iI((sI(t)*(i=uI(r))*sI(n)-sI(r)*(a=uI(t))*sI(e))/(a*i*o)):(t+r)/2}(n,r,i,o),e.point(a,r),e.lineEnd(),e.lineStart(),e.point(u,r),t=0),e.point(n=i,r=o),a=u},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}),(function(e,t,n,r){var a;if(null==e)a=n*JF,r.point(-QF,a),r.point(0,a),r.point(QF,a),r.point(QF,0),r.point(QF,-a),r.point(0,-a),r.point(-QF,-a),r.point(-QF,0),r.point(-QF,a);else if(aI(e[0]-t[0])>$F){var i=e[0]<t[0]?QF:-QF;a=n*i/2,r.point(-i,a),r.point(0,a),r.point(i,a)}else r.point(t[0],t[1])}),[-QF,-JF]);function FI(e,t,n,r,a,i){if(n){var o=uI(t),u=sI(t),s=r*n;null==a?(a=t+r*tI,i=t-s/2):(a=II(o,a),i=II(o,i),(r>0?a<i:a>i)&&(a+=r*tI));for(var c,l=a;r>0?l>i:l<i;l-=s)c=mI([o,-u*uI(l),-u*sI(l)]),e.point(c[0],c[1])}}function II(e,t){(t=yI(t))[0]-=e,_I(t);var n=function(e){return e>1?0:e<-1?QF:Math.acos(e)}(-t[1]);return((-t[2]<0?-n:n)+tI-$F)%tI}function OI(e){var t=uI(e),n=6*rI,r=t>0,a=aI(t)>$F;function i(e,n){return uI(e)*uI(n)>t}function o(e,n,r){var a=[1,0,0],i=xI(yI(e),yI(n)),o=bI(i,i),u=i[0],s=o-u*u;if(!s)return!r&&e;var c=t*o/s,l=-t*u/s,f=xI(a,i),h=kI(a,c);wI(h,kI(i,l));var d=f,p=bI(h,d),v=bI(d,d),g=p*p-v*(bI(h,h)-1);if(!(g<0)){var m=lI(g),y=kI(d,(-p-m)/v);if(wI(y,h),y=mI(y),!r)return y;var b,x=e[0],w=n[0],k=e[1],_=n[1];w<x&&(b=x,x=w,w=b);var S=w-x,C=aI(S-QF)<$F;if(!C&&_<k&&(b=k,k=_,_=b),C||S<$F?C?k+_>0^y[1]<(aI(y[0]-x)<$F?k:_):k<=y[1]&&y[1]<=_:S>QF^(x<=y[0]&&y[0]<=w)){var E=kI(d,(-p+m)/v);return wI(E,h),[y,mI(E)]}}}function u(t,n){var a=r?e:QF-e,i=0;return t<-a?i|=1:t>a&&(i|=2),n<-a?i|=4:n>a&&(i|=8),i}return NI(i,(function(e){var t,n,s,c,l;return{lineStart:function(){c=s=!1,l=1},point:function(f,h){var d,p=[f,h],v=i(f,h),g=r?v?0:u(f,h):v?u(f+(f<0?QF:-QF),h):0;if(!t&&(c=s=v)&&e.lineStart(),v!==s&&(!(d=o(t,p))||hI(t,d)||hI(p,d))&&(p[2]=1),v!==s)l=0,v?(e.lineStart(),d=o(p,t),e.point(d[0],d[1])):(d=o(t,p),e.point(d[0],d[1],2),e.lineEnd()),t=d;else if(a&&t&&r^v){var m;g&n||!(m=o(p,t,!0))||(l=0,r?(e.lineStart(),e.point(m[0][0],m[0][1]),e.point(m[1][0],m[1][1]),e.lineEnd()):(e.point(m[1][0],m[1][1]),e.lineEnd(),e.lineStart(),e.point(m[0][0],m[0][1],3)))}!v||t&&hI(t,p)||e.point(p[0],p[1]),t=p,s=v,n=g},lineEnd:function(){s&&e.lineEnd(),t=null},clean:function(){return l|(c&&s)<<1}}}),(function(t,r,a,i){FI(i,e,n,a,t,r)}),r?[0,-e]:[-QF,e-QF])}var RI=1e9,ZI=-1e9;function BI(e,t,n,r){function a(a,i){return e<=a&&a<=n&&t<=i&&i<=r}function i(a,i,u,c){var l=0,f=0;if(null==a||(l=o(a,u))!==(f=o(i,u))||s(a,i)<0^u>0)do{c.point(0===l||3===l?e:n,l>1?r:t)}while((l=(l+u+4)%4)!==f);else c.point(i[0],i[1])}function o(r,a){return aI(r[0]-e)<$F?a>0?0:3:aI(r[0]-n)<$F?a>0?2:1:aI(r[1]-t)<$F?a>0?1:0:a>0?3:2}function u(e,t){return s(e.x,t.x)}function s(e,t){var n=o(e,1),r=o(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(o){var s,c,l,f,h,d,p,v,g,m,y,b=o,x=KF(),w={point:k,lineStart:function(){w.point=_,c&&c.push(l=[]);m=!0,g=!1,p=v=NaN},lineEnd:function(){s&&(_(f,h),d&&g&&x.rejoin(),s.push(x.result()));w.point=k,g&&b.lineEnd()},polygonStart:function(){b=x,s=[],c=[],y=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,a=c.length;n<a;++n)for(var i,o,u=c[n],s=1,l=u.length,f=u[0],h=f[0],d=f[1];s<l;++s)i=h,o=d,h=(f=u[s])[0],d=f[1],o<=r?d>r&&(h-i)*(r-o)>(d-o)*(e-i)&&++t:d<=r&&(h-i)*(r-o)<(d-o)*(e-i)&&--t;return t}(),n=y&&t,a=(s=AI(s)).length;(n||a)&&(o.polygonStart(),n&&(o.lineStart(),i(null,null,1,o),o.lineEnd()),a&&pI(s,u,t,i,o),o.polygonEnd());b=o,s=c=l=null}};function k(e,t){a(e,t)&&b.point(e,t)}function _(i,o){var u=a(i,o);if(c&&l.push([i,o]),m)f=i,h=o,d=u,m=!1,u&&(b.lineStart(),b.point(i,o));else if(u&&g)b.point(i,o);else{var s=[p=Math.max(ZI,Math.min(RI,p)),v=Math.max(ZI,Math.min(RI,v))],x=[i=Math.max(ZI,Math.min(RI,i)),o=Math.max(ZI,Math.min(RI,o))];!function(e,t,n,r,a,i){var o,u=e[0],s=e[1],c=0,l=1,f=t[0]-u,h=t[1]-s;if(o=n-u,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<l&&(l=o)}else if(f>0){if(o>l)return;o>c&&(c=o)}if(o=a-u,f||!(o<0)){if(o/=f,f<0){if(o>l)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<l&&(l=o)}if(o=r-s,h||!(o>0)){if(o/=h,h<0){if(o<c)return;o<l&&(l=o)}else if(h>0){if(o>l)return;o>c&&(c=o)}if(o=i-s,h||!(o<0)){if(o/=h,h<0){if(o>l)return;o>c&&(c=o)}else if(h>0){if(o<c)return;o<l&&(l=o)}return c>0&&(e[0]=u+c*f,e[1]=s+c*h),l<1&&(t[0]=u+l*f,t[1]=s+l*h),!0}}}}}(s,x,e,t,n,r)?u&&(b.lineStart(),b.point(i,o),y=!1):(g||(b.lineStart(),b.point(s[0],s[1])),b.point(x[0],x[1]),u||b.lineEnd(),y=!1)}p=i,v=o,g=u}return w}}function zI(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}var LI=function(e){return e};function PI(e,t){return aI(e)>QF&&(e-=Math.round(e/tI)*tI),[e,t]}function jI(e,t,n){return(e%=tI)?t||n?zI(WI(e),VI(t,n)):WI(e):t||n?VI(t,n):PI}function UI(e){return function(t,n){return aI(t+=e)>QF&&(t-=Math.round(t/tI)*tI),[t,n]}}function WI(e){var t=UI(e);return t.invert=UI(-e),t}function VI(e,t){var n=uI(e),r=sI(e),a=uI(t),i=sI(t);function o(e,t){var o=uI(t),u=uI(e)*o,s=sI(e)*o,c=sI(t),l=c*n+u*r;return[oI(s*a-l*i,u*n-c*r),fI(l*a+s*i)]}return o.invert=function(e,t){var o=uI(t),u=uI(e)*o,s=sI(e)*o,c=sI(t),l=c*a-s*i;return[oI(s*a+c*i,u*n+l*r),fI(l*n-u*r)]},o}function qI(e){return function(t){var n=new HI;for(var r in e)n[r]=e[r];return n.stream=t,n}}function HI(){}function GI(e,t){e&&YI.hasOwnProperty(e.type)&&YI[e.type](e,t)}PI.invert=PI,HI.prototype={constructor:HI,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var XI={Feature:function(e,t){GI(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,a=n.length;++r<a;)GI(n[r].geometry,t)}},YI={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){KI(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)KI(n[r],t,0)},Polygon:function(e,t){$I(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)$I(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,a=n.length;++r<a;)GI(n[r],t)}};function KI(e,t,n){var r,a=-1,i=e.length-n;for(t.lineStart();++a<i;)r=e[a],t.point(r[0],r[1],r[2]);t.lineEnd()}function $I(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)KI(e[n],t,1);t.polygonEnd()}var QI=1/0,JI=QI,eO=-QI,tO=eO,nO={point:function(e,t){e<QI&&(QI=e);e>eO&&(eO=e);t<JI&&(JI=t);t>tO&&(tO=t)},lineStart:YF,lineEnd:YF,polygonStart:YF,polygonEnd:YF,result:function(){var e=[[QI,JI],[eO,tO]];return eO=tO=-(JI=QI=1/0),e}};var rO=nO;function aO(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),function(e,t){e&&XI.hasOwnProperty(e.type)?XI[e.type](e,t):GI(e,t)}(n,e.stream(rO)),t(rO.result()),null!=r&&e.clipExtent(r),e}function iO(e,t,n){return aO(e,(function(n){var r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],i=Math.min(r/(n[1][0]-n[0][0]),a/(n[1][1]-n[0][1])),o=+t[0][0]+(r-i*(n[1][0]+n[0][0]))/2,u=+t[0][1]+(a-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([o,u])}),n)}var oO=uI(30*rI);function uO(e,t){return+t?function(e,t){function n(r,a,i,o,u,s,c,l,f,h,d,p,v,g){var m=c-r,y=l-a,b=m*m+y*y;if(b>4*t&&v--){var x=o+h,w=u+d,k=s+p,_=lI(x*x+w*w+k*k),S=fI(k/=_),C=aI(aI(k)-1)<$F||aI(i-f)<$F?(i+f)/2:oI(w,x),E=e(C,S),A=E[0],N=E[1],T=A-r,M=N-a,D=y*T-m*M;(D*D/b>t||aI((m*T+y*M)/b-.5)>.3||o*h+u*d+s*p<oO)&&(n(r,a,i,o,u,s,A,N,C,x/=_,w/=_,k,v,g),g.point(A,N),n(A,N,C,x,w,k,c,l,f,h,d,p,v,g))}}return function(t){var r,a,i,o,u,s,c,l,f,h,d,p,v={point:g,lineStart:m,lineEnd:b,polygonStart:function(){t.polygonStart(),v.lineStart=x},polygonEnd:function(){t.polygonEnd(),v.lineStart=m}};function g(n,r){n=e(n,r),t.point(n[0],n[1])}function m(){l=NaN,v.point=y,t.lineStart()}function y(r,a){var i=yI([r,a]),o=e(r,a);n(l,f,c,h,d,p,l=o[0],f=o[1],c=r,h=i[0],d=i[1],p=i[2],16,t),t.point(l,f)}function b(){v.point=g,t.lineEnd()}function x(){m(),v.point=w,v.lineEnd=k}function w(e,t){y(r=e,t),a=l,i=f,o=h,u=d,s=p,v.point=y}function k(){n(l,f,c,h,d,p,a,i,r,o,u,s,16,t),v.lineEnd=b,b()}return v}}(e,t):function(e){return qI({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)}var sO=qI({point:function(e,t){this.stream.point(e*rI,t*rI)}});function cO(e,t,n,r,a,i){if(!i)return function(e,t,n,r,a){function i(i,o){return[t+e*(i*=r),n-e*(o*=a)]}return i.invert=function(i,o){return[(i-t)/e*r,(n-o)/e*a]},i}(e,t,n,r,a);var o=uI(i),u=sI(i),s=o*e,c=u*e,l=o/e,f=u/e,h=(u*n-o*t)/e,d=(u*t+o*n)/e;function p(e,i){return[s*(e*=r)-c*(i*=a)+t,n-c*e-s*i]}return p.invert=function(e,t){return[r*(l*e-f*t+h),a*(d-f*e-l*t)]},p}function lO(e){return function(e){var t,n,r,a,i,o,u,s,c,l,f=150,h=480,d=250,p=0,v=0,g=0,m=0,y=0,b=0,x=1,w=1,k=null,_=DI,S=null,C=LI,E=.5;function A(e){return s(e[0]*rI,e[1]*rI)}function N(e){return(e=s.invert(e[0],e[1]))&&[e[0]*nI,e[1]*nI]}function T(){var e=cO(f,0,0,x,w,b).apply(null,t(p,v)),r=cO(f,h-e[0],d-e[1],x,w,b);return n=jI(g,m,y),u=zI(t,r),s=zI(n,u),o=uO(u,E),M()}function M(){return c=l=null,A}return A.stream=function(e){return c&&l===e?c:c=sO(function(e){return qI({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}(n)(_(o(C(l=e)))))},A.preclip=function(e){return arguments.length?(_=e,k=void 0,M()):_},A.postclip=function(e){return arguments.length?(C=e,S=r=a=i=null,M()):C},A.clipAngle=function(e){return arguments.length?(_=+e?OI(k=e*rI):(k=null,DI),M()):k*nI},A.clipExtent=function(e){return arguments.length?(C=null==e?(S=r=a=i=null,LI):BI(S=+e[0][0],r=+e[0][1],a=+e[1][0],i=+e[1][1]),M()):null==S?null:[[S,r],[a,i]]},A.scale=function(e){return arguments.length?(f=+e,T()):f},A.translate=function(e){return arguments.length?(h=+e[0],d=+e[1],T()):[h,d]},A.center=function(e){return arguments.length?(p=e[0]%360*rI,v=e[1]%360*rI,T()):[p*nI,v*nI]},A.rotate=function(e){return arguments.length?(g=e[0]%360*rI,m=e[1]%360*rI,y=e.length>2?e[2]%360*rI:0,T()):[g*nI,m*nI,y*nI]},A.angle=function(e){return arguments.length?(b=e%360*rI,T()):b*nI},A.reflectX=function(e){return arguments.length?(x=e?-1:1,T()):x<0},A.reflectY=function(e){return arguments.length?(w=e?-1:1,T()):w<0},A.precision=function(e){return arguments.length?(o=uO(u,E=e*e),M()):lI(E)},A.fitExtent=function(e,t){return iO(A,e,t)},A.fitSize=function(e,t){return function(e,t,n){return iO(e,[[0,0],t],n)}(A,e,t)},A.fitWidth=function(e,t){return function(e,t,n){return aO(e,(function(n){var r=+t,a=r/(n[1][0]-n[0][0]),i=(r-a*(n[1][0]+n[0][0]))/2,o=-a*n[0][1];e.scale(150*a).translate([i,o])}),n)}(A,e,t)},A.fitHeight=function(e,t){return function(e,t,n){return aO(e,(function(n){var r=+t,a=r/(n[1][1]-n[0][1]),i=-a*n[0][0],o=(r-a*(n[1][1]+n[0][1]))/2;e.scale(150*a).translate([i,o])}),n)}(A,e,t)},function(){return t=e.apply(this,arguments),A.invert=t.invert&&N,T()}}((function(){return e}))()}var fO=Math.abs,hO=(Math.atan,Math.atan2,Math.ceil,Math.cos),dO=(Math.exp,Math.floor,Math.log,Math.max,Math.min,Math.pow,Math.round,Math.sign,Math.sin),pO=(Math.tan,Math.PI),vO=pO/2,gO=(Math.SQRT1_2,yO(2));yO(pO);function mO(e){return e>1?vO:e<-1?-vO:Math.asin(e)}function yO(e){return e>0?Math.sqrt(e):0}function bO(e,t){var n,r=e*dO(t),a=30;do{t-=n=(t+dO(t)-r)/(1+hO(t))}while(fO(n)>1e-6&&--a>0);return t/2}var xO=function(e,t,n){function r(r,a){return[e*r*hO(a=bO(n,a)),t*dO(a)]}return r.invert=function(r,a){return a=mO(a/t),[r/(e*hO(a)),mO((2*a+dO(2*a))/n)]},r}(gO/vO,gO,pO);var wO=FD(),kO=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function _O(e,t){return function n(){var r=t();return r.type=e,r.path=FD().projection(r),r.copy=r.copy||function(){var e=n();return kO.forEach((function(t){r[t]&&e[t](r[t]())})),e.path.pointRadius(r.path.pointRadius()),e},Dw(r)}}function SO(e,t){if(!e||"string"!==typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(EO[e]=_O(e,t),this):EO[e]||null}function CO(e){return e&&e.path||wO}var EO={albers:AF,albersusa:function(){var e,t,n,r,a,i,o=AF(),u=EF().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=EF().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(e,t){i=[e,t]}};function l(e){var t=e[0],o=e[1];return i=null,n.point(t,o),i||(r.point(t,o),i)||(a.point(t,o),i)}function f(){return e=t=null,l}return l.invert=function(e){var t=o.scale(),n=o.translate(),r=(e[0]-n[0])/t,a=(e[1]-n[1])/t;return(a>=.12&&a<.234&&r>=-.425&&r<-.214?u:a>=.166&&a<.234&&r>=-.214&&r<-.115?s:o).invert(e)},l.stream=function(n){return e&&t===n?e:e=function(e){var t=e.length;return{point:function(n,r){for(var a=-1;++a<t;)e[a].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}([o.stream(t=n),u.stream(n),s.stream(n)])},l.precision=function(e){return arguments.length?(o.precision(e),u.precision(e),s.precision(e),f()):o.precision()},l.scale=function(e){return arguments.length?(o.scale(e),u.scale(.35*e),s.scale(e),l.translate(o.translate())):o.scale()},l.translate=function(e){if(!arguments.length)return o.translate();var t=o.scale(),i=+e[0],l=+e[1];return n=o.translate(e).clipExtent([[i-.455*t,l-.238*t],[i+.455*t,l+.238*t]]).stream(c),r=u.translate([i-.307*t,l+.201*t]).clipExtent([[i-.425*t+nM,l+.12*t+nM],[i-.214*t-nM,l+.234*t-nM]]).stream(c),a=s.translate([i-.205*t,l+.212*t]).clipExtent([[i-.214*t+nM,l+.166*t+nM],[i-.115*t-nM,l+.234*t-nM]]).stream(c),f()},l.fitExtent=function(e,t){return pF(l,e,t)},l.fitSize=function(e,t){return vF(l,e,t)},l.fitWidth=function(e,t){return gF(l,e,t)},l.fitHeight=function(e,t){return mF(l,e,t)},l.scale(1070)},azimuthalequalarea:function(){return kF(MF).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return kF(DF).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return SF(RF).scale(109.5).parallels([30,30])},conicequalarea:EF,conicequidistant:function(){return SF(BF).scale(131.154).center([0,13.9389])},equalEarth:function(){return kF(WF).scale(177.158)},equirectangular:function(){return kF(ZF).scale(152.63)},gnomonic:function(){return kF(VF).scale(144.049).clipAngle(60)},identity:function(){var e,t,n,r,a,i,o,u=1,s=0,c=0,l=1,f=1,h=0,d=null,p=1,v=1,g=fF({point:function(e,t){var n=b([e,t]);this.stream.point(n[0],n[1])}}),m=XT;function y(){return p=u*l,v=u*f,i=o=null,b}function b(n){var r=n[0]*p,a=n[1]*v;if(h){var i=a*e-r*t;r=r*e+a*t,a=i}return[r+s,a+c]}return b.invert=function(n){var r=n[0]-s,a=n[1]-c;if(h){var i=a*e+r*t;r=r*e-a*t,a=i}return[r/p,a/v]},b.stream=function(e){return i&&o===e?i:i=g(m(o=e))},b.postclip=function(e){return arguments.length?(m=e,d=n=r=a=null,y()):m},b.clipExtent=function(e){return arguments.length?(m=null==e?(d=n=r=a=null,XT):aF(d=+e[0][0],n=+e[0][1],r=+e[1][0],a=+e[1][1]),y()):null==d?null:[[d,n],[r,a]]},b.scale=function(e){return arguments.length?(u=+e,y()):u},b.translate=function(e){return arguments.length?(s=+e[0],c=+e[1],y()):[s,c]},b.angle=function(n){return arguments.length?(t=gM(h=n%360*sM),e=hM(h),y()):h*uM},b.reflectX=function(e){return arguments.length?(l=e?-1:1,y()):l<0},b.reflectY=function(e){return arguments.length?(f=e?-1:1,y()):f<0},b.fitExtent=function(e,t){return pF(b,e,t)},b.fitSize=function(e,t){return vF(b,e,t)},b.fitWidth=function(e,t){return gF(b,e,t)},b.fitHeight=function(e,t){return mF(b,e,t)},b},mercator:function(){return IF(FF).scale(961/oM)},mollweide:function(){return lO(xO).scale(169.529)},naturalEarth1:function(){return kF(qF).scale(175.295)},orthographic:function(){return kF(HF).scale(249.5).clipAngle(90.000001)},stereographic:function(){return kF(GF).scale(250).clipAngle(142)},transversemercator:function(){var e=IF(XF),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)}};for(var AO in EO)SO(AO,EO[AO]);var NO=1e-6,TO=1e-12,MO=Math.PI,DO=MO/2,FO=MO/4,IO=2*MO,OO=180/MO,RO=MO/180,ZO=Math.abs,BO=Math.atan,zO=Math.atan2,LO=Math.cos,PO=Math.ceil,jO=Math.exp,UO=(Math.floor,Math.hypot),WO=Math.log,VO=Math.pow,qO=Math.sin,HO=Math.sign||function(e){return e>0?1:e<0?-1:0},GO=Math.sqrt,XO=Math.tan;function YO(e){return e>1?0:e<-1?MO:Math.acos(e)}function KO(e){return e>1?DO:e<-1?-DO:Math.asin(e)}function $O(e,t,n){var r=_l(e,t-NO,n).concat(t);return function(e){return r.map((function(t){return[e,t]}))}}function QO(e,t,n){var r=_l(e,t-NO,n).concat(t);return function(e){return r.map((function(t){return[t,e]}))}}function JO(){var e,t,n,r,a,i,o,u,s,c,l,f,h=10,d=h,p=90,v=360,g=2.5;function m(){return{type:"MultiLineString",coordinates:y()}}function y(){return _l(PO(r/p)*p,n,p).map(l).concat(_l(PO(u/v)*v,o,v).map(f)).concat(_l(PO(t/h)*h,e,h).filter((function(e){return ZO(e%p)>NO})).map(s)).concat(_l(PO(i/d)*d,a,d).filter((function(e){return ZO(e%v)>NO})).map(c))}return m.lines=function(){return y().map((function(e){return{type:"LineString",coordinates:e}}))},m.outline=function(){return{type:"Polygon",coordinates:[l(r).concat(f(o).slice(1),l(n).reverse().slice(1),f(u).reverse().slice(1))]}},m.extent=function(e){return arguments.length?m.extentMajor(e).extentMinor(e):m.extentMinor()},m.extentMajor=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],u=+e[0][1],o=+e[1][1],r>n&&(e=r,r=n,n=e),u>o&&(e=u,u=o,o=e),m.precision(g)):[[r,u],[n,o]]},m.extentMinor=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],i=+n[0][1],a=+n[1][1],t>e&&(n=t,t=e,e=n),i>a&&(n=i,i=a,a=n),m.precision(g)):[[t,i],[e,a]]},m.step=function(e){return arguments.length?m.stepMajor(e).stepMinor(e):m.stepMinor()},m.stepMajor=function(e){return arguments.length?(p=+e[0],v=+e[1],m):[p,v]},m.stepMinor=function(e){return arguments.length?(h=+e[0],d=+e[1],m):[h,d]},m.precision=function(h){return arguments.length?(g=+h,s=$O(i,a,90),c=QO(t,e,g),l=$O(u,o,90),f=QO(r,n,g),m):g},m.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function eR(){}var tR=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function nR(){var e=1,t=1,n=o;function r(e,t){return t.map((function(t){return a(e,t)}))}function a(r,a){var o=[],u=[];return function(n,r,a){var o,u,s,c,l,f,h=new Array,d=new Array;o=u=-1,c=n[0]>=r,tR[c<<1].forEach(p);for(;++o<e-1;)s=c,c=n[o+1]>=r,tR[s|c<<1].forEach(p);tR[c<<0].forEach(p);for(;++u<t-1;){for(o=-1,c=n[u*e+e]>=r,l=n[u*e]>=r,tR[c<<1|l<<2].forEach(p);++o<e-1;)s=c,c=n[u*e+e+o+1]>=r,f=l,l=n[u*e+o+1]>=r,tR[s|c<<1|l<<2|f<<3].forEach(p);tR[c|l<<3].forEach(p)}o=-1,l=n[u*e]>=r,tR[l<<2].forEach(p);for(;++o<e-1;)f=l,l=n[u*e+o+1]>=r,tR[l<<2|f<<3].forEach(p);function p(e){var t,n,r=[e[0][0]+o,e[0][1]+u],s=[e[1][0]+o,e[1][1]+u],c=i(r),l=i(s);(t=d[c])?(n=h[l])?(delete d[t.end],delete h[n.start],t===n?(t.ring.push(s),a(t.ring)):h[t.start]=d[n.end]={start:t.start,end:n.end,ring:t.ring.concat(n.ring)}):(delete d[t.end],t.ring.push(s),d[t.end=l]=t):(t=h[l])?(n=d[c])?(delete h[t.start],delete d[n.end],t===n?(t.ring.push(s),a(t.ring)):h[n.start]=d[t.end]={start:n.start,end:t.end,ring:n.ring.concat(t.ring)}):(delete h[t.start],t.ring.unshift(r),h[t.start=c]=t):h[c]=d[l]={start:c,end:l,ring:[r,s]}}tR[l<<3].forEach(p)}(r,a,(function(e){n(e,r,a),function(e){var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];for(;++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}(e)>0?o.push([e]):u.push(e)})),u.forEach((function(e){for(var t,n=0,r=o.length;n<r;++n)if(-1!==rR((t=o[n])[0],e))return void t.push(e)})),{type:"MultiPolygon",value:a,coordinates:o}}function i(t){return 2*t[0]+t[1]*(e+1)*4}function o(n,r,a){n.forEach((function(n){var i,o=n[0],u=n[1],s=0|o,c=0|u,l=r[c*e+s];o>0&&o<e&&s===o&&(i=r[c*e+s-1],n[0]=o+(a-i)/(l-i)-.5),u>0&&u<t&&c===u&&(i=r[(c-1)*e+s],n[1]=u+(a-i)/(l-i)-.5)}))}return r.contour=a,r.size=function(n){if(!arguments.length)return[e,t];var a=Math.floor(n[0]),i=Math.floor(n[1]);return a>=0&&i>=0||Ht("invalid size"),e=a,t=i,r},r.smooth=function(e){return arguments.length?(n=e?o:eR,r):n===o},r}function rR(e,t){for(var n,r=-1,a=t.length;++r<a;)if(n=aR(e,t[r]))return n;return 0}function aR(e,t){for(var n=t[0],r=t[1],a=-1,i=0,o=e.length,u=o-1;i<o;u=i++){var s=e[i],c=s[0],l=s[1],f=e[u],h=f[0],d=f[1];if(iR(s,f,t))return 0;l>r!==d>r&&n<(h-c)*(r-l)/(d-l)+c&&(a=-a)}return a}function iR(e,t,n){var r,a,i,o;return function(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}(e,t,n)&&(a=e[r=+(e[0]===t[0])],i=n[r],o=t[r],a<=i&&i<=o||o<=i&&i<=a)}function oR(e,t,n){return function(r){var a=Dn(r),i=n?Math.min(a[0],0):a[0],o=a[1],u=o-i,s=t?GT(i,o,e):u/(e+1);return _l(i+s,o,s)}}function uR(e){hc.call(this,null,e)}function sR(e,t,n,r,a){var i=e.x1||0,o=e.y1||0,u=t*n<0;function s(e){e.forEach(c)}function c(e){u&&e.reverse(),e.forEach(l)}function l(e){e[0]=(e[0]-i)*t+r,e[1]=(e[1]-o)*n+a}return function(e){return e.coordinates.forEach(s),e}}function cR(e,t,n){var r=e>=0?e:Oc(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function lR(e){return kn(e)?e:Nn(+e)}function fR(){var e=function(e){return e[0]},t=function(e){return e[1]},n=Qt,r=[-1,-1],a=960,i=500,o=2;function u(u,s){var c=cR(r[0],u,e)>>o,l=cR(r[1],u,t)>>o,f=c?c+2:0,h=l?l+2:0,d=2*f+(a>>o),p=2*h+(i>>o),v=new Float32Array(d*p),g=new Float32Array(d*p),m=v;u.forEach((function(r){var a=f+(+e(r)>>o),i=h+(+t(r)>>o);a>=0&&a<d&&i>=0&&i<p&&(v[a+i*d]+=+n(r))})),c>0&&l>0?(hR(d,p,v,g,c),dR(d,p,g,v,l),hR(d,p,v,g,c),dR(d,p,g,v,l),hR(d,p,v,g,c),dR(d,p,g,v,l)):c>0?(hR(d,p,v,g,c),hR(d,p,g,v,c),hR(d,p,v,g,c),m=g):l>0&&(dR(d,p,v,g,l),dR(d,p,g,v,l),dR(d,p,v,g,l),m=g);for(var y=s?Math.pow(2,-2*o):1/cN(m),b=0,x=d*p;b<x;++b)m[b]*=y;return{values:m,scale:1<<o,width:d,height:p,x1:f,y1:h,x2:f+(a>>o),y2:h+(i>>o)}}return u.x=function(t){return arguments.length?(e=lR(t),u):e},u.y=function(e){return arguments.length?(t=lR(e),u):t},u.weight=function(e){return arguments.length?(n=lR(e),u):n},u.size=function(e){if(!arguments.length)return[a,i];var t=+e[0],n=+e[1];return t>=0&&n>=0||Ht("invalid size"),a=t,i=n,u},u.cellSize=function(e){return arguments.length?((e=+e)>=1||Ht("invalid cell size"),o=Math.floor(Math.log(e)/Math.LN2),u):1<<o},u.bandwidth=function(e){return arguments.length?(1===(e=wn(e)).length&&(e=[+e[0],+e[0]]),2!==e.length&&Ht("invalid bandwidth"),r=e,u):r},u}function hR(e,t,n,r,a){for(var i=1+(a<<1),o=0;o<t;++o)for(var u=0,s=0;u<e+a;++u)u<e&&(s+=n[u+o*e]),u>=a&&(u>=i&&(s-=n[u-i+o*e]),r[u-a+o*e]=s/Math.min(u+1,e-1+i-u,i))}function dR(e,t,n,r,a){for(var i=1+(a<<1),o=0;o<e;++o)for(var u=0,s=0;u<t+a;++u)u<t&&(s+=n[o+u*e]),u>=a&&(u>=i&&(s-=n[o+(u-i)*e]),r[o+(u-a)*e]=s/Math.min(u+1,t-1+i-u,i))}function pR(e){hc.call(this,null,e)}uR.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},Zn(uR,hc,{transform:function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,a=e.field||Kt,i=nR().smooth(!1!==e.smooth),o=e.thresholds||function(e,t,n){var r=oR(n.levels||10,n.nice,!1!==n.zero);return"shared"!==n.resolve?r:r(e.map((function(e){return hl(t(e).values)})))}(r,a,e),u=null===e.as?null:e.as||"contour",s=[];return r.forEach((function(t){var n=a(t),r=i.size([n.width,n.height])(n.values,nn(o)?o:o(n.values));!function(e,t,n,r){var a=r.scale||t.scale,i=r.translate||t.translate;kn(a)&&(a=a(n,r));kn(i)&&(i=i(n,r));if((1===a||null==a)&&!i)return;var o=(Ln(a)?a:a[0])||1,u=(Ln(a)?a:a[1])||1,s=i&&i[0]||0,c=i&&i[1]||0;e.forEach(sR(t,o,u,s,c))}(r,n,t,e),r.forEach((function(e){s.push(Fs(t,Ms(null!=u?(0,Ir.Z)({},u,e):e)))}))})),this.value&&(n.rem=this.value),this.value=n.source=n.add=s,n}}),pR.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};var vR=["x","y","weight","size","cellSize","bandwidth"];function gR(e,t){return vR.forEach((function(n){return null!=t[n]?e[n](t[n]):0})),e}function mR(e){hc.call(this,null,e)}Zn(pR,hc,{transform:function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),a=function(e,t){var n,r,a,i,o,u,s=[],c=function(e){return e(i)};if(null==t)s.push(e);else for(n={},r=0,a=e.length;r<a;++r)i=e[r],(u=n[o=t.map(c)])||(n[o]=u=[],u.dims=o,s.push(u)),u.push(i);return s}(t.materialize(t.SOURCE).source,e.groupby),i=(e.groupby||[]).map(jt),o=gR(fR(),e),u=e.as||"grid";return n=a.map((function(t){return Ms(function(e,t){for(var n=0;n<i.length;++n)e[i[n]]=t[n];return e}((0,Ir.Z)({},u,o(t,e.counts)),t.dims))})),this.value&&(r.rem=this.value),this.value=r.source=r.add=n,r}}),mR.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},Zn(mR,hc,{transform:function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r,a=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=nR().smooth(!1!==e.smooth),o=e.values,u=e.thresholds||oR(e.count||10,e.nice,!!o),s=e.size;return o||(o=t.materialize(t.SOURCE).source,r=sR(n=gR(fR(),e)(o,!0),n.scale||1,n.scale||1,0,0),s=[n.width,n.height],o=n.values),u=nn(u)?u:u(o),o=i.size(s)(o,u),r&&o.forEach(r),this.value&&(a.rem=this.value),this.value=a.source=a.add=(o||[]).map(Ms),a}});var yR="Feature",bR="FeatureCollection";function xR(e){hc.call(this,null,e)}function wR(e){hc.call(this,null,e)}function kR(e){hc.call(this,null,e)}function _R(e){hc.call(this,null,e)}function SR(e){hc.call(this,[],e),this.generator=JO()}function CR(e){hc.call(this,null,e)}function ER(e){if(!kn(e))return!1;var t=Yn(Ut(e));return t.$x||t.$y||t.$value||t.$max}function AR(e){hc.call(this,null,e),this.modified(!0)}function NR(e,t,n){kn(e[t])&&e[t](n)}function TR(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var a,i,o,u,s,c,l,f,h,d=e._root,p={data:r},v=e._x0,g=e._y0,m=e._x1,y=e._y1;if(!d)return e._root=p,e;for(;d.length;)if((c=t>=(i=(v+m)/2))?v=i:m=i,(l=n>=(o=(g+y)/2))?g=o:y=o,a=d,!(d=d[f=l<<1|c]))return a[f]=p,e;if(u=+e._x.call(null,d.data),s=+e._y.call(null,d.data),t===u&&n===s)return p.next=d,a?a[f]=p:e._root=p,e;do{a=a?a[f]=new Array(4):e._root=new Array(4),(c=t>=(i=(v+m)/2))?v=i:m=i,(l=n>=(o=(g+y)/2))?g=o:y=o}while((f=l<<1|c)===(h=(s>=o)<<1|u>=i));return a[h]=d,a[f]=p,e}function MR(e,t,n,r,a){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=a}function DR(e){return e[0]}function FR(e){return e[1]}function IR(e,t,n){var r=new OR(null==t?DR:t,null==n?FR:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function OR(e,t,n,r,a,i){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=a,this._y1=i,this._root=void 0}function RR(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}xR.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},Zn(xR,hc,{transform:function(e,t){var n,r=this._features,a=this._points,i=e.fields,o=i&&i[0],u=i&&i[1],s=e.geojson||!i&&Kt,c=t.ADD;n=e.modified()||t.changed(t.REM)||t.modified(Ut(s))||o&&t.modified(Ut(o))||u&&t.modified(Ut(u)),this.value&&!n||(c=t.SOURCE,this._features=r=[],this._points=a=[]),s&&t.visit(c,(function(e){return r.push(s(e))})),o&&u&&(t.visit(c,(function(e){var t=o(e),n=u(e);null!=t&&null!=n&&(t=+t)===t&&(n=+n)===n&&a.push([t,n])})),r=r.concat({type:yR,geometry:{type:"MultiPoint",coordinates:a}})),this.value={type:bR,features:r}}}),wR.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},Zn(wR,hc,{transform:function(e,t){var n=t.fork(t.ALL),r=this.value,a=e.field||Kt,i=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=CO(e.projection),n.materialize().reflow()):o=a===Kt||t.modified(a.fields)?n.ADD_MOD:n.ADD;var u=function(e,t){var n=e.pointRadius();e.context(null),null!=t&&e.pointRadius(t);return n}(r,e.pointRadius);return n.visit(o,(function(e){return e[i]=r(a(e))})),r.pointRadius(u),n.modifies(i)}}),kR.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},Zn(kR,hc,{transform:function(e,t){var n,r=e.projection,a=e.fields[0],i=e.fields[1],o=e.as||["x","y"],u=o[0],s=o[1];function c(e){var t=r([a(e),i(e)]);t?(e[u]=t[0],e[s]=t[1]):(e[u]=void 0,e[s]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,c):(n=t.modified(a.fields)||t.modified(i.fields),t.visit(n?t.ADD_MOD:t.ADD,c)),t.modifies(o)}}),_R.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},Zn(_R,hc,{transform:function(e,t){var n=t.fork(t.ALL),r=this.value,a=e.as||"shape",i=n.ADD;return r&&!e.modified()||(this.value=r=function(e,t,n){var r=null==n?function(n){return e(t(n))}:function(r){var a=e.pointRadius(),i=e.pointRadius(n)(t(r));return e.pointRadius(a),i};return r.context=function(t){return e.context(t),r},r}(CO(e.projection),e.field||Xt("datum"),e.pointRadius),n.materialize().reflow(),i=n.SOURCE),n.visit(i,(function(e){return e[a]=r})),n.modifies(a)}}),SR.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},Zn(SR,hc,{transform:function(e,t){var n,r=this.value,a=this.generator;if(!r.length||e.modified())for(var i in e)kn(a[i])&&a[i](e[i]);return n=a(),r.length?t.mod.push(Is(r[0],n)):t.add.push(Ms(n)),r[0]=n,t}}),CR.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},Zn(CR,hc,{transform:function(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r="shared"===e.resolve,a=e.field||Kt,i=function(e,t){var n;kn(e)?(n=function(n){return e(n,t)},n.dep=ER(e)):e?n=Nn(e):(n=function(e){return e.$value/e.$max||0},n.dep=!0);return n}(e.opacity,e),o=function(e,t){var n;kn(e)?(n=function(n){return IN(e(n,t))},n.dep=ER(e)):n=Nn(IN(e||"#888"));return n}(e.color,e),u=e.as||"image",s={$x:0,$y:0,$value:0,$max:r?hl(n.map((function(e){return hl(a(e).values)}))):0};return n.forEach((function(e){var t=a(e),n=Mn({},e,s);r||(n.$max=hl(t.values||[])),e[u]=function(e,t,n,r){for(var a=e.width,i=e.height,o=e.x1||0,u=e.y1||0,s=e.x2||a,c=e.y2||i,l=e.values,f=l?function(e){return l[e]}:$t,h=$d(s-o,c-u),d=h.getContext("2d"),p=d.getImageData(0,0,s-o,c-u),v=p.data,g=u,m=0;g<c;++g){t.$y=g-u;for(var y=o,b=g*a;y<s;++y,m+=4){t.$x=y-o,t.$value=f(y+b);var x=n(t);v[m+0]=x.r,v[m+1]=x.g,v[m+2]=x.b,v[m+3]=~~(255*r(t))}}return d.putImageData(p,0,0),h}(t,n,o.dep?o:Nn(o(n)),i.dep?i:Nn(i(n)))})),t.reflow(!0).modifies(u)}}),Zn(AR,hc,{transform:function(e,t){var n=this.value;return!n||e.modified("type")?(this.value=n=function(e){var t=SO((e||"mercator").toLowerCase());t||Ht("Unrecognized projection type: "+e);return t()}(e.type),kO.forEach((function(t){null!=e[t]&&NR(n,t,e[t])}))):kO.forEach((function(t){e.modified(t)&&NR(n,t,e[t])})),null!=e.pointRadius&&n.path.pointRadius(e.pointRadius),e.fit&&function(e,t){var n=function(e){return 1===(e=wn(e)).length?e[0]:{type:bR,features:e.reduce((function(e,t){return e.concat(function(e){return e.type===bR?e.features:wn(e).filter((function(e){return null!=e})).map((function(e){return e.type===yR?e:{type:yR,geometry:e}}))}(t))}),[])}}(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});var ZR=IR.prototype=OR.prototype;function BR(e){return function(){return e}}function zR(e){return 1e-6*(e()-.5)}function LR(e){return e.x+e.vx}function PR(e){return e.y+e.vy}ZR.copy=function(){var e,t,n=new OR(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=RR(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var a=0;a<4;++a)(t=r.source[a])&&(t.length?e.push({source:t,target:r.target[a]=new Array(4)}):r.target[a]=RR(t));return n},ZR.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return TR(this.cover(t,n),t,n,e)},ZR.addAll=function(e){var t,n,r,a,i=e.length,o=new Array(i),u=new Array(i),s=1/0,c=1/0,l=-1/0,f=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(o[n]=r,u[n]=a,r<s&&(s=r),r>l&&(l=r),a<c&&(c=a),a>f&&(f=a));if(s>l||c>f)return this;for(this.cover(s,c).cover(l,f),n=0;n<i;++n)TR(this,o[n],u[n],e[n]);return this},ZR.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,a=this._x1,i=this._y1;if(isNaN(n))a=(n=Math.floor(e))+1,i=(r=Math.floor(t))+1;else{for(var o,u,s=a-n||1,c=this._root;n>e||e>=a||r>t||t>=i;)switch(u=(t<r)<<1|e<n,(o=new Array(4))[u]=c,c=o,s*=2,u){case 0:a=n+s,i=r+s;break;case 1:n=a-s,i=r+s;break;case 2:a=n+s,r=i-s;break;case 3:n=a-s,r=i-s}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=a,this._y1=i,this},ZR.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},ZR.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},ZR.find=function(e,t,n){var r,a,i,o,u,s,c,l=this._x0,f=this._y0,h=this._x1,d=this._y1,p=[],v=this._root;for(v&&p.push(new MR(v,l,f,h,d)),null==n?n=1/0:(l=e-n,f=t-n,h=e+n,d=t+n,n*=n);s=p.pop();)if(!(!(v=s.node)||(a=s.x0)>h||(i=s.y0)>d||(o=s.x1)<l||(u=s.y1)<f))if(v.length){var g=(a+o)/2,m=(i+u)/2;p.push(new MR(v[3],g,m,o,u),new MR(v[2],a,m,g,u),new MR(v[1],g,i,o,m),new MR(v[0],a,i,g,m)),(c=(t>=m)<<1|e>=g)&&(s=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=s)}else{var y=e-+this._x.call(null,v.data),b=t-+this._y.call(null,v.data),x=y*y+b*b;if(x<n){var w=Math.sqrt(n=x);l=e-w,f=t-w,h=e+w,d=t+w,r=v.data}}return r},ZR.remove=function(e){if(isNaN(i=+this._x.call(null,e))||isNaN(o=+this._y.call(null,e)))return this;var t,n,r,a,i,o,u,s,c,l,f,h,d=this._root,p=this._x0,v=this._y0,g=this._x1,m=this._y1;if(!d)return this;if(d.length)for(;;){if((c=i>=(u=(p+g)/2))?p=u:g=u,(l=o>=(s=(v+m)/2))?v=s:m=s,t=d,!(d=d[f=l<<1|c]))return this;if(!d.length)break;(t[f+1&3]||t[f+2&3]||t[f+3&3])&&(n=t,h=f)}for(;d.data!==e;)if(r=d,!(d=d.next))return this;return(a=d.next)&&delete d.next,r?(a?r.next=a:delete r.next,this):t?(a?t[f]=a:delete t[f],(d=t[0]||t[1]||t[2]||t[3])&&d===(t[3]||t[2]||t[1]||t[0])&&!d.length&&(n?n[h]=d:this._root=d),this):(this._root=a,this)},ZR.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},ZR.root=function(){return this._root},ZR.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},ZR.visit=function(e){var t,n,r,a,i,o,u=[],s=this._root;for(s&&u.push(new MR(s,this._x0,this._y0,this._x1,this._y1));t=u.pop();)if(!e(s=t.node,r=t.x0,a=t.y0,i=t.x1,o=t.y1)&&s.length){var c=(r+i)/2,l=(a+o)/2;(n=s[3])&&u.push(new MR(n,c,l,i,o)),(n=s[2])&&u.push(new MR(n,r,l,c,o)),(n=s[1])&&u.push(new MR(n,c,a,i,l)),(n=s[0])&&u.push(new MR(n,r,a,c,l))}return this},ZR.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new MR(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var a=t.node;if(a.length){var i,o=t.x0,u=t.y0,s=t.x1,c=t.y1,l=(o+s)/2,f=(u+c)/2;(i=a[0])&&n.push(new MR(i,o,u,l,f)),(i=a[1])&&n.push(new MR(i,l,u,s,f)),(i=a[2])&&n.push(new MR(i,o,f,l,c)),(i=a[3])&&n.push(new MR(i,l,f,s,c))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},ZR.x=function(e){return arguments.length?(this._x=e,this):this._x},ZR.y=function(e){return arguments.length?(this._y=e,this):this._y};var jR={value:function(){}};function UR(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new WR(r)}function WR(e){this._=e}function VR(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function qR(e,t){for(var n,r=0,a=e.length;r<a;++r)if((n=e[r]).name===t)return n.value}function HR(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=jR,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}WR.prototype=UR.prototype={constructor:WR,on:function(e,t){var n,r=this._,a=VR(e+"",r),i=-1,o=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++i<o;)if(n=(e=a[i]).type)r[n]=HR(r[n],e.name,t);else if(null==t)for(n in r)r[n]=HR(r[n],e.name,null);return this}for(;++i<o;)if((n=(e=a[i]).type)&&(n=qR(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new WR(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,a=new Array(n),i=0;i<n;++i)a[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(r=this._[e]).length;i<n;++i)r[i].value.apply(t,a)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,i=r.length;a<i;++a)r[a].value.apply(t,n)}};var GR,XR,YR=UR,KR=0,$R=0,QR=0,JR=0,eZ=0,tZ=0,nZ="object"===typeof performance&&performance.now?performance:Date,rZ="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function aZ(){return eZ||(rZ(iZ),eZ=nZ.now()+tZ)}function iZ(){eZ=0}function oZ(){this._call=this._time=this._next=null}function uZ(e,t,n){var r=new oZ;return r.restart(e,t,n),r}function sZ(){eZ=(JR=nZ.now())+tZ,KR=$R=0;try{!function(){aZ(),++KR;for(var e,t=GR;t;)(e=eZ-t._time)>=0&&t._call.call(null,e),t=t._next;--KR}()}finally{KR=0,function(){var e,t,n=GR,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:GR=t);XR=e,lZ(r)}(),eZ=0}}function cZ(){var e=nZ.now(),t=e-JR;t>1e3&&(tZ-=t,JR=e)}function lZ(e){KR||($R&&($R=clearTimeout($R)),e-eZ>24?(e<1/0&&($R=setTimeout(sZ,e-nZ.now()-tZ)),QR&&(QR=clearInterval(QR))):(QR||(JR=nZ.now(),QR=setInterval(cZ,1e3)),KR=1,rZ(sZ)))}oZ.prototype=uZ.prototype={constructor:oZ,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?aZ():+n)+(null==t?0:+t),this._next||XR===this||(XR?XR._next=this:GR=this,XR=this),this._call=e,this._time=n,lZ()},stop:function(){this._call&&(this._call=null,this._time=1/0,lZ())}};var fZ=4294967296;function hZ(e){return e.x}function dZ(e){return e.y}var pZ=Math.PI*(3-Math.sqrt(5));function vZ(e){var t,n=1,r=.001,a=1-Math.pow(r,1/300),i=0,o=.6,u=new Map,s=uZ(f),c=YR("tick","end"),l=function(){var e=1;return function(){return(e=(1664525*e+1013904223)%fZ)/fZ}}();function f(){h(),c.call("tick",t),n<r&&(s.stop(),c.call("end",t))}function h(r){var s,c,l=e.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(i-n)*a,u.forEach((function(e){e(n)})),s=0;s<l;++s)null==(c=e[s]).fx?c.x+=c.vx*=o:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=o:(c.y=c.fy,c.vy=0);return t}function d(){for(var t,n=0,r=e.length;n<r;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var a=10*Math.sqrt(.5+n),i=n*pZ;t.x=a*Math.cos(i),t.y=a*Math.sin(i)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function p(t){return t.initialize&&t.initialize(e,l),t}return null==e&&(e=[]),d(),t={tick:h,restart:function(){return s.restart(f),t},stop:function(){return s.stop(),t},nodes:function(n){return arguments.length?(e=n,d(),u.forEach(p),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(r=+e,t):r},alphaDecay:function(e){return arguments.length?(a=+e,t):+a},alphaTarget:function(e){return arguments.length?(i=+e,t):i},velocityDecay:function(e){return arguments.length?(o=1-e,t):1-o},randomSource:function(e){return arguments.length?(l=e,u.forEach(p),t):l},force:function(e,n){return arguments.length>1?(null==n?u.delete(e):u.set(e,p(n)),t):u.get(e)},find:function(t,n,r){var a,i,o,u,s,c=0,l=e.length;for(null==r?r=1/0:r*=r,c=0;c<l;++c)(o=(a=t-(u=e[c]).x)*a+(i=n-u.y)*i)<r&&(s=u,r=o);return s},on:function(e,n){return arguments.length>1?(c.on(e,n),t):c.on(e)}}}function gZ(e){return e.index}function mZ(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}var yZ={center:function(e,t){var n,r=1;function a(){var a,i,o=n.length,u=0,s=0;for(a=0;a<o;++a)u+=(i=n[a]).x,s+=i.y;for(u=(u/o-e)*r,s=(s/o-t)*r,a=0;a<o;++a)(i=n[a]).x-=u,i.y-=s}return null==e&&(e=0),null==t&&(t=0),a.initialize=function(e){n=e},a.x=function(t){return arguments.length?(e=+t,a):e},a.y=function(e){return arguments.length?(t=+e,a):t},a.strength=function(e){return arguments.length?(r=+e,a):r},a},collide:function(e){var t,n,r,a=1,i=1;function o(){for(var e,o,s,c,l,f,h,d=t.length,p=0;p<i;++p)for(o=IR(t,LR,PR).visitAfter(u),e=0;e<d;++e)s=t[e],f=n[s.index],h=f*f,c=s.x+s.vx,l=s.y+s.vy,o.visit(v);function v(e,t,n,i,o){var u=e.data,d=e.r,p=f+d;if(!u)return t>c+p||i<c-p||n>l+p||o<l-p;if(u.index>s.index){var v=c-u.x-u.vx,g=l-u.y-u.vy,m=v*v+g*g;m<p*p&&(0===v&&(m+=(v=zR(r))*v),0===g&&(m+=(g=zR(r))*g),m=(p-(m=Math.sqrt(m)))/m*a,s.vx+=(v*=m)*(p=(d*=d)/(h+d)),s.vy+=(g*=m)*p,u.vx-=v*(p=1-p),u.vy-=g*p)}}}function u(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function s(){if(t){var r,a,i=t.length;for(n=new Array(i),r=0;r<i;++r)a=t[r],n[a.index]=+e(a,r,t)}}return"function"!==typeof e&&(e=BR(null==e?1:+e)),o.initialize=function(e,n){t=e,r=n,s()},o.iterations=function(e){return arguments.length?(i=+e,o):i},o.strength=function(e){return arguments.length?(a=+e,o):a},o.radius=function(t){return arguments.length?(e="function"===typeof t?t:BR(+t),s(),o):e},o},nbody:function(){var e,t,n,r,a,i=BR(-30),o=1,u=1/0,s=.81;function c(n){var a,i=e.length,o=IR(e,hZ,dZ).visitAfter(f);for(r=n,a=0;a<i;++a)t=e[a],o.visit(h)}function l(){if(e){var t,n,r=e.length;for(a=new Array(r),t=0;t<r;++t)n=e[t],a[n.index]=+i(n,t,e)}}function f(e){var t,n,r,i,o,u=0,s=0;if(e.length){for(r=i=o=0;o<4;++o)(t=e[o])&&(n=Math.abs(t.value))&&(u+=t.value,s+=n,r+=n*t.x,i+=n*t.y);e.x=r/s,e.y=i/s}else{(t=e).x=t.data.x,t.y=t.data.y;do{u+=a[t.data.index]}while(t=t.next)}e.value=u}function h(e,i,c,l){if(!e.value)return!0;var f=e.x-t.x,h=e.y-t.y,d=l-i,p=f*f+h*h;if(d*d/s<p)return p<u&&(0===f&&(p+=(f=zR(n))*f),0===h&&(p+=(h=zR(n))*h),p<o&&(p=Math.sqrt(o*p)),t.vx+=f*e.value*r/p,t.vy+=h*e.value*r/p),!0;if(!(e.length||p>=u)){(e.data!==t||e.next)&&(0===f&&(p+=(f=zR(n))*f),0===h&&(p+=(h=zR(n))*h),p<o&&(p=Math.sqrt(o*p)));do{e.data!==t&&(d=a[e.data.index]*r/p,t.vx+=f*d,t.vy+=h*d)}while(e=e.next)}}return c.initialize=function(t,r){e=t,n=r,l()},c.strength=function(e){return arguments.length?(i="function"===typeof e?e:BR(+e),l(),c):i},c.distanceMin=function(e){return arguments.length?(o=e*e,c):Math.sqrt(o)},c.distanceMax=function(e){return arguments.length?(u=e*e,c):Math.sqrt(u)},c.theta=function(e){return arguments.length?(s=e*e,c):Math.sqrt(s)},c},link:function(e){var t,n,r,a,i,o,u=gZ,s=function(e){return 1/Math.min(a[e.source.index],a[e.target.index])},c=BR(30),l=1;function f(r){for(var a=0,u=e.length;a<l;++a)for(var s,c,f,h,d,p,v,g=0;g<u;++g)c=(s=e[g]).source,h=(f=s.target).x+f.vx-c.x-c.vx||zR(o),d=f.y+f.vy-c.y-c.vy||zR(o),h*=p=((p=Math.sqrt(h*h+d*d))-n[g])/p*r*t[g],d*=p,f.vx-=h*(v=i[g]),f.vy-=d*v,c.vx+=h*(v=1-v),c.vy+=d*v}function h(){if(r){var o,s,c=r.length,l=e.length,f=new Map(r.map((function(e,t){return[u(e,t,r),e]})));for(o=0,a=new Array(c);o<l;++o)(s=e[o]).index=o,"object"!==typeof s.source&&(s.source=mZ(f,s.source)),"object"!==typeof s.target&&(s.target=mZ(f,s.target)),a[s.source.index]=(a[s.source.index]||0)+1,a[s.target.index]=(a[s.target.index]||0)+1;for(o=0,i=new Array(l);o<l;++o)s=e[o],i[o]=a[s.source.index]/(a[s.source.index]+a[s.target.index]);t=new Array(l),d(),n=new Array(l),p()}}function d(){if(r)for(var n=0,a=e.length;n<a;++n)t[n]=+s(e[n],n,e)}function p(){if(r)for(var t=0,a=e.length;t<a;++t)n[t]=+c(e[t],t,e)}return null==e&&(e=[]),f.initialize=function(e,t){r=e,o=t,h()},f.links=function(t){return arguments.length?(e=t,h(),f):e},f.id=function(e){return arguments.length?(u=e,f):u},f.iterations=function(e){return arguments.length?(l=+e,f):l},f.strength=function(e){return arguments.length?(s="function"===typeof e?e:BR(+e),d(),f):s},f.distance=function(e){return arguments.length?(c="function"===typeof e?e:BR(+e),p(),f):c},f},x:function(e){var t,n,r,a=BR(.1);function i(e){for(var a,i=0,o=t.length;i<o;++i)(a=t[i]).vx+=(r[i]-a.x)*n[i]*e}function o(){if(t){var i,o=t.length;for(n=new Array(o),r=new Array(o),i=0;i<o;++i)n[i]=isNaN(r[i]=+e(t[i],i,t))?0:+a(t[i],i,t)}}return"function"!==typeof e&&(e=BR(null==e?0:+e)),i.initialize=function(e){t=e,o()},i.strength=function(e){return arguments.length?(a="function"===typeof e?e:BR(+e),o(),i):a},i.x=function(t){return arguments.length?(e="function"===typeof t?t:BR(+t),o(),i):e},i},y:function(e){var t,n,r,a=BR(.1);function i(e){for(var a,i=0,o=t.length;i<o;++i)(a=t[i]).vy+=(r[i]-a.y)*n[i]*e}function o(){if(t){var i,o=t.length;for(n=new Array(o),r=new Array(o),i=0;i<o;++i)n[i]=isNaN(r[i]=+e(t[i],i,t))?0:+a(t[i],i,t)}}return"function"!==typeof e&&(e=BR(null==e?0:+e)),i.initialize=function(e){t=e,o()},i.strength=function(e){return arguments.length?(a="function"===typeof e?e:BR(+e),o(),i):a},i.y=function(t){return arguments.length?(e="function"===typeof t?t:BR(+t),o(),i):e},i}},bZ="forces",xZ=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],wZ=["static","iterations"],kZ=["x","y","vx","vy"];function _Z(e){hc.call(this,null,e)}function SZ(e,t,n,r){var a,i,o,u,s=wn(t.forces);for(a=0,i=xZ.length;a<i;++a)(o=xZ[a])!==bZ&&t.modified(o)&&e[o](t[o]);for(a=0,i=s.length;a<i;++a)u=bZ+a,(o=n||t.modified(bZ,a)?EZ(s[a]):r&&CZ(s[a],r)?e.force(u):null)&&e.force(u,o);for(i=e.numForces||0;a<i;++a)e.force(bZ+a,null);return e.numForces=s.length,e}function CZ(e,t){var n,r;for(n in e)if(kn(r=e[n])&&t.modified(Ut(r)))return 1;return 0}function EZ(e){var t,n;for(n in In(yZ,e.force)||Ht("Unrecognized force: "+e.force),t=yZ[e.force](),e)kn(t[n])&&AZ(t[n],e[n],e);return t}function AZ(e,t,n){e(kn(t)?function(e){return t(e,n)}:t)}function NZ(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}_Z.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:kZ}]},Zn(_Z,hc,{transform:function(e,t){var n,r,a=this.value,i=t.changed(t.ADD_REM),o=e.modified(xZ),u=e.iterations||300;if(a?(i&&(t.modifies("index"),a.nodes(t.source)),(o||t.changed(t.MOD))&&SZ(a,e,0,t)):(this.value=a=function(e,t){var n=vZ(e),r=n.stop,a=n.restart,i=!1;return n.stopped=function(){return i},n.restart=function(){return i=!1,a()},n.stop=function(){return i=!0,r()},SZ(n,t,!0).on("end",(function(){return i=!0}))}(t.source,e),a.on("tick",(n=t.dataflow,r=this,function(){return n.touch(r).run()})),e.static||(i=!0,a.tick()),t.modifies("index")),o||i||e.modified(wZ)||t.changed()&&e.restart)if(a.alpha(Math.max(a.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(a.alphaMin(),1/u)),e.static)for(a.stop();--u>=0;)a.tick();else if(a.stopped()&&a.restart(),!i)return t.StopPropagation;return this.finish(e,t)},finish:function(e,t){for(var n,r=t.dataflow,a=this._argops,i=0,o=a.length;i<o;++i)if((n=a[i]).name===bZ&&"link"===n.op._argval.force)for(var u,s=n.op._argops,c=0,l=s.length;c<l;++c)if("links"===s[c].name&&(u=s[c].op.source)){r.pulse(u,r.changeset().reflow());break}return t.reflow(e.modified()).modifies(kZ)}});var TZ=S().mark(MZ);function MZ(){var e,t,n,r,a,i;return S().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:n=[e=this];case 1:t=n.reverse(),n=[];case 2:if(!(e=t.pop())){o.next=8;break}return o.next=5,e;case 5:if(r=e.children)for(a=0,i=r.length;a<i;++a)n.push(r[a]);o.next=2;break;case 8:if(n.length){o.next=1;break}case 9:case"end":return o.stop()}}),TZ,this)}function DZ(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=IZ)):void 0===t&&(t=FZ);for(var n,r,a,i,o,u=new ZZ(e),s=[u];n=s.pop();)if((a=t(n.data))&&(o=(a=Array.from(a)).length))for(n.children=a,i=o-1;i>=0;--i)s.push(r=a[i]=new ZZ(a[i])),r.parent=n,r.depth=n.depth+1;return u.eachBefore(RZ)}function FZ(e){return e.children}function IZ(e){return Array.isArray(e)?e[1]:null}function OZ(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function RZ(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function ZZ(e){this.data=e,this.depth=this.height=0,this.parent=null}function BZ(e){for(var t,n,r=0,a=(e=function(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}(Array.from(e))).length,i=[];r<a;)t=e[r],n&&PZ(n,t)?++r:(n=UZ(i=zZ(i,t)),r=0);return n}function zZ(e,t){var n,r;if(jZ(t,e))return[t];for(n=0;n<e.length;++n)if(LZ(t,e[n])&&jZ(WZ(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(LZ(WZ(e[n],e[r]),t)&&LZ(WZ(e[n],t),e[r])&&LZ(WZ(e[r],t),e[n])&&jZ(VZ(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function LZ(e,t){var n=e.r-t.r,r=t.x-e.x,a=t.y-e.y;return n<0||n*n<r*r+a*a}function PZ(e,t){var n=e.r-t.r+1e-9*Math.max(e.r,t.r,1),r=t.x-e.x,a=t.y-e.y;return n>0&&n*n>r*r+a*a}function jZ(e,t){for(var n=0;n<t.length;++n)if(!PZ(e,t[n]))return!1;return!0}function UZ(e){switch(e.length){case 1:return function(e){return{x:e.x,y:e.y,r:e.r}}(e[0]);case 2:return WZ(e[0],e[1]);case 3:return VZ(e[0],e[1],e[2])}}function WZ(e,t){var n=e.x,r=e.y,a=e.r,i=t.x,o=t.y,u=t.r,s=i-n,c=o-r,l=u-a,f=Math.sqrt(s*s+c*c);return{x:(n+i+s/f*l)/2,y:(r+o+c/f*l)/2,r:(f+a+u)/2}}function VZ(e,t,n){var r=e.x,a=e.y,i=e.r,o=t.x,u=t.y,s=t.r,c=n.x,l=n.y,f=n.r,h=r-o,d=r-c,p=a-u,v=a-l,g=s-i,m=f-i,y=r*r+a*a-i*i,b=y-o*o-u*u+s*s,x=y-c*c-l*l+f*f,w=d*p-h*v,k=(p*x-v*b)/(2*w)-r,_=(v*g-p*m)/w,S=(d*b-h*x)/(2*w)-a,C=(h*m-d*g)/w,E=_*_+C*C-1,A=2*(i+k*_+S*C),N=k*k+S*S-i*i,T=-(E?(A+Math.sqrt(A*A-4*E*N))/(2*E):N/A);return{x:r+k+_*T,y:a+S+C*T,r:T}}function qZ(e,t,n){var r,a,i,o,u=e.x-t.x,s=e.y-t.y,c=u*u+s*s;c?(a=t.r+n.r,a*=a,o=e.r+n.r,a>(o*=o)?(r=(c+o-a)/(2*c),i=Math.sqrt(Math.max(0,o/c-r*r)),n.x=e.x-r*u-i*s,n.y=e.y-r*s+i*u):(r=(c+a-o)/(2*c),i=Math.sqrt(Math.max(0,a/c-r*r)),n.x=t.x+r*u-i*s,n.y=t.y+r*s+i*u)):(n.x=t.x+n.r,n.y=t.y)}function HZ(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,a=t.y-e.y;return n>0&&n*n>r*r+a*a}function GZ(e){var t=e._,n=e.next._,r=t.r+n.r,a=(t.x*n.r+n.x*t.r)/r,i=(t.y*n.r+n.y*t.r)/r;return a*a+i*i}function XZ(e){this._=e,this.next=null,this.previous=null}function YZ(e){if(!(a=(e=function(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}(e)).length))return 0;var t,n,r,a,i,o,u,s,c,l,f;if((t=e[0]).x=0,t.y=0,!(a>1))return t.r;if(n=e[1],t.x=-n.r,n.x=t.r,n.y=0,!(a>2))return t.r+n.r;qZ(n,t,r=e[2]),t=new XZ(t),n=new XZ(n),r=new XZ(r),t.next=r.previous=n,n.next=t.previous=r,r.next=n.previous=t;e:for(u=3;u<a;++u){qZ(t._,n._,r=e[u]),r=new XZ(r),s=n.next,c=t.previous,l=n._.r,f=t._.r;do{if(l<=f){if(HZ(s._,r._)){n=s,t.next=n,n.previous=t,--u;continue e}l+=s._.r,s=s.next}else{if(HZ(c._,r._)){(t=c).next=n,n.previous=t,--u;continue e}f+=c._.r,c=c.previous}}while(s!==c.next);for(r.previous=t,r.next=n,t.next=n.previous=n=r,i=GZ(t);(r=r.next)!==n;)(o=GZ(r))<i&&(t=r,i=o);n=t.next}for(t=[n._],r=n;(r=r.next)!==n;)t.push(r._);for(r=BZ(t),u=0;u<a;++u)(t=e[u]).x-=r.x,t.y-=r.y;return r.r}function KZ(e){return null==e?null:$Z(e)}function $Z(e){if("function"!==typeof e)throw new Error;return e}function QZ(){return 0}function JZ(e){return function(){return e}}function eB(e){return Math.sqrt(e.value)}function tB(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function nB(e,t){return function(n){if(r=n.children){var r,a,i,o=r.length,u=e(n)*t||0;if(u)for(a=0;a<o;++a)r[a].r+=u;if(i=YZ(r),u)for(a=0;a<o;++a)r[a].r-=u;n.r=i+u}}}function rB(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function aB(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function iB(e,t,n,r,a){for(var i,o=e.children,u=-1,s=o.length,c=e.value&&(r-t)/e.value;++u<s;)(i=o[u]).y0=n,i.y1=a,i.x0=t,i.x1=t+=i.value*c}ZZ.prototype=DZ.prototype=(0,Ir.Z)({constructor:ZZ,count:function(){return this.eachAfter(NZ)},each:function(e,t){var n,r=-1,a=(0,zt.Z)(this);try{for(a.s();!(n=a.n()).done;){var i=n.value;e.call(t,i,++r,this)}}catch(o){a.e(o)}finally{a.f()}return this},eachAfter:function(e,t){for(var n,r,a,i=this,o=[i],u=[],s=-1;i=o.pop();)if(u.push(i),n=i.children)for(r=0,a=n.length;r<a;++r)o.push(n[r]);for(;i=u.pop();)e.call(t,i,++s,this);return this},eachBefore:function(e,t){for(var n,r,a=this,i=[a],o=-1;a=i.pop();)if(e.call(t,a,++o,this),n=a.children)for(r=n.length-1;r>=0;--r)i.push(n[r]);return this},find:function(e,t){var n,r=-1,a=(0,zt.Z)(this);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(e.call(t,i,++r,this))return i}}catch(o){a.e(o)}finally{a.f()}},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,r=t.children,a=r&&r.length;--a>=0;)n+=r[a].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),a=null;e=n.pop(),t=r.pop();for(;e===t;)a=e,e=n.pop(),t=r.pop();return a}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var a=r.length;e!==n;)r.splice(a,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function(){return DZ(this).eachBefore(OZ)}},Symbol.iterator,MZ);var oB={depth:-1},uB={};function sB(e){return e.id}function cB(e){return e.parentId}function lB(){var e=sB,t=cB;function n(n){var r,a,i,o,u,s,c,l=Array.from(n),f=l.length,h=new Map;for(a=0;a<f;++a)r=l[a],u=l[a]=new ZZ(r),null!=(s=e(r,a,n))&&(s+="")&&(c=u.id=s,h.set(c,h.has(c)?uB:u)),null!=(s=t(r,a,n))&&(s+="")&&(u.parent=s);for(a=0;a<f;++a)if(s=(u=l[a]).parent){if(!(o=h.get(s)))throw new Error("missing: "+s);if(o===uB)throw new Error("ambiguous: "+s);o.children?o.children.push(u):o.children=[u],u.parent=o}else{if(i)throw new Error("multiple roots");i=u}if(!i)throw new Error("no root");if(i.parent=oB,i.eachBefore((function(e){e.depth=e.parent.depth+1,--f})).eachBefore(RZ),i.parent=null,f>0)throw new Error("cycle");return i}return n.id=function(t){return arguments.length?(e=$Z(t),n):e},n.parentId=function(e){return arguments.length?(t=$Z(e),n):t},n}function fB(e,t){return e.parent===t.parent?1:2}function hB(e){var t=e.children;return t?t[0]:e.t}function dB(e){var t=e.children;return t?t[t.length-1]:e.t}function pB(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function vB(e,t,n){return e.a.parent===t.parent?e.a:n}function gB(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function mB(e,t){return e.parent===t.parent?1:2}function yB(e,t){return e+t.x}function bB(e,t){return Math.max(e,t.y)}function xB(e,t,n,r,a){for(var i,o=e.children,u=-1,s=o.length,c=e.value&&(a-n)/e.value;++u<s;)(i=o[u]).x0=t,i.x1=r,i.y0=n,i.y1=n+=i.value*c}gB.prototype=Object.create(ZZ.prototype);var wB=(1+Math.sqrt(5))/2;function kB(e,t,n,r,a,i){for(var o,u,s,c,l,f,h,d,p,v,g,m=[],y=t.children,b=0,x=0,w=y.length,k=t.value;b<w;){s=a-n,c=i-r;do{l=y[x++].value}while(!l&&x<w);for(f=h=l,g=l*l*(v=Math.max(c/s,s/c)/(k*e)),p=Math.max(h/g,g/f);x<w;++x){if(l+=u=y[x].value,u<f&&(f=u),u>h&&(h=u),g=l*l*v,(d=Math.max(h/g,g/f))>p){l-=u;break}p=d}m.push(o={value:l,dice:s<c,children:y.slice(b,x)}),o.dice?iB(o,n,r,a,k?r+=c*l/k:i):xB(o,n,r,k?n+=s*l/k:a,i),k-=l,b=x}return m}var _B=function e(t){function n(e,n,r,a,i){kB(t,e,n,r,a,i)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(wB),SB=function e(t){function n(e,n,r,a,i){if((o=e._squarify)&&o.ratio===t)for(var o,u,s,c,l,f=-1,h=o.length,d=e.value;++f<h;){for(s=(u=o[f]).children,c=u.value=0,l=s.length;c<l;++c)u.value+=s[c].value;u.dice?iB(u,n,r,a,d?r+=(i-r)*u.value/d:i):xB(u,n,r,d?n+=(a-n)*u.value/d:a,i),d-=u.value}else e._squarify=o=kB(t,e,n,r,a,i),o.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(wB);function CB(e,t,n){var r={};return e.each((function(e){var a=e.data;n(a)&&(r[t(a)]=e)})),e.lookup=r,e}function EB(e){hc.call(this,null,e)}EB.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};var AB=function(e){return e.values};function NB(){var e=[],t={entries:function(e){return r(n(e,0),0)},key:function(n){return e.push(n),t}};function n(t,r){if(r>=e.length)return t;for(var a,i,o,u=t.length,s=e[r++],c={},l={},f=-1;++f<u;)(o=c[a=s(i=t[f])+""])?o.push(i):c[a]=[i];for(a in c)l[a]=n(c[a],r);return l}function r(t,n){if(++n>e.length)return t;var a=[];for(var i in t)a.push({key:i,values:r(t[i],n)});return a}return t}function TB(e){hc.call(this,null,e)}Zn(EB,hc,{transform:function(e,t){t.source||Ht("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),a=t.clone(),i=this.value;return(!i||r||t.changed())&&(i&&i.each((function(e){e.children&&As(e.data)&&a.rem.push(e.data)})),this.value=i=DZ({values:wn(e.keys).reduce((function(e,t){return e.key(t),e}),NB()).entries(a.source)},AB),n&&i.each((function(e){e.children&&(e=Ms(e.data),a.add.push(e),a.source.push(e))})),CB(i,Ns,Ns)),a.source.root=i,a}});var MB=function(e,t){return e.parent===t.parent?1:2};Zn(TB,hc,{transform:function(e,t){t.source&&t.source.root||Ht(this.constructor.name+" transform requires a backing tree data source.");var n=this.layout(e.method),r=this.fields,a=t.source.root,i=e.as||r;e.field?a.sum(e.field):a.count(),e.sort&&a.sort(Os(e.sort,(function(e){return e.data}))),function(e,t,n){for(var r,a=0,i=t.length;a<i;++a)(r=t[a])in n&&e[r](n[r])}(n,this.params,e),n.separation&&n.separation(!1!==e.separation?MB:Qt);try{this.value=n(a)}catch(o){Ht(o)}return a.each((function(e){return function(e,t,n){for(var r=e.data,a=t.length-1,i=0;i<a;++i)r[n[i]]=e[t[i]];r[n[a]]=e.children?e.children.length:0}(e,r,i)})),t.reflow(e.modified()).modifies(i).modifies("leaf")}});var DB=["x","y","r","depth","children"];function FB(e){TB.call(this,e)}FB.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:DB.length,default:DB}]},Zn(FB,TB,{layout:function(){var e=null,t=1,n=1,r=QZ;function a(a){return a.x=t/2,a.y=n/2,e?a.eachBefore(tB(e)).eachAfter(nB(r,.5)).eachBefore(rB(1)):a.eachBefore(tB(eB)).eachAfter(nB(QZ,1)).eachAfter(nB(r,a.r/Math.min(t,n))).eachBefore(rB(Math.min(t,n)/(2*a.r))),a}return a.radius=function(t){return arguments.length?(e=KZ(t),a):e},a.size=function(e){return arguments.length?(t=+e[0],n=+e[1],a):[t,n]},a.padding=function(e){return arguments.length?(r="function"===typeof e?e:JZ(+e),a):r},a},params:["radius","size","padding"],fields:DB});var IB=["x0","y0","x1","y1","depth","children"];function OB(e){TB.call(this,e)}function RB(e){hc.call(this,null,e)}OB.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:IB.length,default:IB}]},Zn(OB,TB,{layout:function(){var e=1,t=1,n=0,r=!1;function a(a){var i=a.height+1;return a.x0=a.y0=n,a.x1=e,a.y1=t/i,a.eachBefore(function(e,t){return function(r){r.children&&iB(r,r.x0,e*(r.depth+1)/t,r.x1,e*(r.depth+2)/t);var a=r.x0,i=r.y0,o=r.x1-n,u=r.y1-n;o<a&&(a=o=(a+o)/2),u<i&&(i=u=(i+u)/2),r.x0=a,r.y0=i,r.x1=o,r.y1=u}}(t,i)),r&&a.eachBefore(aB),a}return a.round=function(e){return arguments.length?(r=!!e,a):r},a.size=function(n){return arguments.length?(e=+n[0],t=+n[1],a):[e,t]},a.padding=function(e){return arguments.length?(n=+e,a):n},a},params:["size","round","padding"],fields:IB}),RB.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},Zn(RB,hc,{transform:function(e,t){t.source||Ht("Stratify transform requires an upstream data source.");var n=this.value,r=e.modified(),a=t.fork(t.ALL).materialize(t.SOURCE),i=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return a.source=a.source.slice(),i&&(n=a.source.length?CB(lB().id(e.key).parentId(e.parentKey)(a.source),e.key,Jt):CB(lB()([{}]),e.key,e.key)),a.source.root=this.value=n,a}});var ZB={tidy:function(){var e=fB,t=1,n=1,r=null;function a(a){var s=function(e){for(var t,n,r,a,i,o=new gB(e,0),u=[o];t=u.pop();)if(r=t._.children)for(t.children=new Array(i=r.length),a=i-1;a>=0;--a)u.push(n=t.children[a]=new gB(r[a],a)),n.parent=t;return(o.parent=new gB(null,0)).children=[o],o}(a);if(s.eachAfter(i),s.parent.m=-s.z,s.eachBefore(o),r)a.eachBefore(u);else{var c=a,l=a,f=a;a.eachBefore((function(e){e.x<c.x&&(c=e),e.x>l.x&&(l=e),e.depth>f.depth&&(f=e)}));var h=c===l?1:e(c,l)/2,d=h-c.x,p=t/(l.x+h+d),v=n/(f.depth||1);a.eachBefore((function(e){e.x=(e.x+d)*p,e.y=e.depth*v}))}return a}function i(t){var n=t.children,r=t.parent.children,a=t.i?r[t.i-1]:null;if(n){!function(e){for(var t,n=0,r=0,a=e.children,i=a.length;--i>=0;)(t=a[i]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(t);var i=(n[0].z+n[n.length-1].z)/2;a?(t.z=a.z+e(t._,a._),t.m=t.z-i):t.z=i}else a&&(t.z=a.z+e(t._,a._));t.parent.A=function(t,n,r){if(n){for(var a,i=t,o=t,u=n,s=i.parent.children[0],c=i.m,l=o.m,f=u.m,h=s.m;u=dB(u),i=hB(i),u&&i;)s=hB(s),(o=dB(o)).a=t,(a=u.z+f-i.z-c+e(u._,i._))>0&&(pB(vB(u,t,r),t,a),c+=a,l+=a),f+=u.m,c+=i.m,h+=s.m,l+=o.m;u&&!dB(o)&&(o.t=u,o.m+=f-l),i&&!hB(s)&&(s.t=i,s.m+=c-h,r=t)}return r}(t,a,t.parent.A||r[0])}function o(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function u(e){e.x*=t,e.y=e.depth*n}return a.separation=function(t){return arguments.length?(e=t,a):e},a.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],a):r?null:[t,n]},a.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],a):r?[t,n]:null},a},cluster:function(){var e=mB,t=1,n=1,r=!1;function a(a){var i,o=0;a.eachAfter((function(t){var n=t.children;n?(t.x=function(e){return e.reduce(yB,0)/e.length}(n),t.y=function(e){return 1+e.reduce(bB,0)}(n)):(t.x=i?o+=e(t,i):0,t.y=0,i=t)}));var u=function(e){for(var t;t=e.children;)e=t[0];return e}(a),s=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(a),c=u.x-e(u,s)/2,l=s.x+e(s,u)/2;return a.eachAfter(r?function(e){e.x=(e.x-a.x)*t,e.y=(a.y-e.y)*n}:function(e){e.x=(e.x-c)/(l-c)*t,e.y=(1-(a.y?e.y/a.y:1))*n})}return a.separation=function(t){return arguments.length?(e=t,a):e},a.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],a):r?null:[t,n]},a.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],a):r?[t,n]:null},a}},BB=["x","y","depth","children"];function zB(e){TB.call(this,e)}function LB(e){hc.call(this,[],e)}zB.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:BB.length,default:BB}]},Zn(zB,TB,{layout:function(e){var t=e||"tidy";if(In(ZB,t))return ZB[t]();Ht("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:BB}),LB.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},Zn(LB,hc,{transform:function(e,t){var n=this.value,r=t.source&&t.source.root,a=t.fork(t.NO_SOURCE),i={};return r||Ht("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(a.rem=n,t.visit(t.SOURCE,(function(e){return i[Ns(e)]=1})),r.each((function(e){var t=e.data,n=e.parent&&e.parent.data;n&&i[Ns(t)]&&i[Ns(n)]&&a.add.push(Ms({source:n,target:t}))})),this.value=a.add):t.changed(t.MOD)&&(t.visit(t.MOD,(function(e){return i[Ns(e)]=1})),n.forEach((function(e){(i[Ns(e.source)]||i[Ns(e.target)])&&a.mod.push(e)}))),a}});var PB={binary:function(e,t,n,r,a){var i,o,u=e.children,s=u.length,c=new Array(s+1);for(c[0]=o=i=0;i<s;++i)c[i+1]=o+=u[i].value;!function e(t,n,r,a,i,o,s){if(t>=n-1){var l=u[t];return l.x0=a,l.y0=i,l.x1=o,void(l.y1=s)}var f=c[t],h=r/2+f,d=t+1,p=n-1;for(;d<p;){var v=d+p>>>1;c[v]<h?d=v+1:p=v}h-c[d-1]<c[d]-h&&t+1<d&&--d;var g=c[d]-f,m=r-g;if(o-a>s-i){var y=r?(a*m+o*g)/r:o;e(t,d,g,a,i,y,s),e(d,n,m,y,i,o,s)}else{var b=r?(i*m+s*g)/r:s;e(t,d,g,a,i,o,b),e(d,n,m,a,b,o,s)}}(0,s,e.value,t,n,r,a)},dice:iB,slice:xB,slicedice:function(e,t,n,r,a){(1&e.depth?xB:iB)(e,t,n,r,a)},squarify:_B,resquarify:SB},jB=["x0","y0","x1","y1","depth","children"];function UB(e){TB.call(this,e)}UB.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:jB.length,default:jB}]},Zn(UB,TB,{layout:function(){var e=function(){var e=_B,t=!1,n=1,r=1,a=[0],i=QZ,o=QZ,u=QZ,s=QZ,c=QZ;function l(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(f),a=[0],t&&e.eachBefore(aB),e}function f(t){var n=a[t.depth],r=t.x0+n,l=t.y0+n,f=t.x1-n,h=t.y1-n;f<r&&(r=f=(r+f)/2),h<l&&(l=h=(l+h)/2),t.x0=r,t.y0=l,t.x1=f,t.y1=h,t.children&&(n=a[t.depth+1]=i(t)/2,r+=c(t)-n,l+=o(t)-n,(f-=u(t)-n)<r&&(r=f=(r+f)/2),(h-=s(t)-n)<l&&(l=h=(l+h)/2),e(t,r,l,f,h))}return l.round=function(e){return arguments.length?(t=!!e,l):t},l.size=function(e){return arguments.length?(n=+e[0],r=+e[1],l):[n,r]},l.tile=function(t){return arguments.length?(e=$Z(t),l):e},l.padding=function(e){return arguments.length?l.paddingInner(e).paddingOuter(e):l.paddingInner()},l.paddingInner=function(e){return arguments.length?(i="function"===typeof e?e:JZ(+e),l):i},l.paddingOuter=function(e){return arguments.length?l.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):l.paddingTop()},l.paddingTop=function(e){return arguments.length?(o="function"===typeof e?e:JZ(+e),l):o},l.paddingRight=function(e){return arguments.length?(u="function"===typeof e?e:JZ(+e),l):u},l.paddingBottom=function(e){return arguments.length?(s="function"===typeof e?e:JZ(+e),l):s},l.paddingLeft=function(e){return arguments.length?(c="function"===typeof e?e:JZ(+e),l):c},l}();return e.ratio=function(t){var n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=function(t){In(PB,t)?e.tile(PB[t]):Ht("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:jB});function WB(e,t,n,r){var a=e.width,i=e.height,o=n||r,u=$d(a,i).getContext("2d");t.forEach((function(e){return VB(u,e,o)}));var s,c,l,f,h,d=new Uint32Array(u.getImageData(0,0,a,i).data.buffer),p=e.bitmap(),v=o&&e.bitmap();for(c=0;c<i;++c)for(s=0;s<a;++s)(h=4278190080&d[c*a+s])&&(l=e(s),f=e(c),r||p.set(l,f),o&&268435456^h&&v.set(l,f));return[p,v]}function VB(e,t,n){if(t.length){var r=t[0].mark.marktype;"group"===r?t.forEach((function(t){t.items.forEach((function(t){return VB(e,t.items,n)}))})):cC[r].draw(e,{items:n?t.map(qB):t})}}function qB(e){var t=Fs(e,{});return t.stroke&&(t.strokeOpacity=1),t.fill&&(t.fillOpacity=.0625,t.stroke="#000",t.strokeOpacity=1,t.strokeWidth=2),t}var HB=31,GB=new Uint32Array(33),XB=new Uint32Array(33);XB[0]=0,GB[0]=~XB[0];for(var YB=1;YB<=32;++YB)XB[YB]=XB[YB-1]<<1|1,GB[YB]=~XB[YB];function KB(e,t,n){var r=Math.max(1,Math.sqrt(e*t/1e6)),a=~~((e+2*n+r)/r),i=~~((t+2*n+r)/r),o=function(e){return~~((e+n)/r)};return o.invert=function(e){return e*r-n},o.bitmap=function(){return function(e,t){var n=new Uint32Array(~~((e*t+32)/32));function r(e,t){n[e]|=t}function a(e,t){n[e]&=t}return{array:n,get:function(t,r){var a=r*e+t;return n[a>>>5]&1<<(a&HB)},set:function(t,n){var a=n*e+t;r(a>>>5,1<<(a&HB))},clear:function(t,n){var r=n*e+t;a(r>>>5,~(1<<(r&HB)))},getRange:function(t,r,a,i){for(var o,u,s,c,l=i;l>=r;--l)if((s=(o=l*e+t)>>>5)===(c=(u=l*e+a)>>>5)){if(n[s]&GB[o&HB]&XB[1+(u&HB)])return!0}else{if(n[s]&GB[o&HB])return!0;if(n[c]&XB[1+(u&HB)])return!0;for(var f=s+1;f<c;++f)if(n[f])return!0}return!1},setRange:function(t,n,a,i){for(var o,u,s,c,l;n<=i;++n)if((s=(o=n*e+t)>>>5)===(c=(u=n*e+a)>>>5))r(s,GB[o&HB]&XB[1+(u&HB)]);else for(r(s,GB[o&HB]),r(c,XB[1+(u&HB)]),l=s+1;l<c;++l)r(l,4294967295)},clearRange:function(t,n,r,i){for(var o,u,s,c,l;n<=i;++n)if((s=(o=n*e+t)>>>5)===(c=(u=n*e+r)>>>5))a(s,XB[o&HB]|GB[1+(u&HB)]);else for(a(s,XB[o&HB]),a(c,GB[1+(u&HB)]),l=s+1;l<c;++l)a(l,0)},outOfBounds:function(n,r,a,i){return n<0||r<0||i>=t||a>=e}}}(a,i)},o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function $B(e,t,n,r,a,i){var o=n/2;return e-o<0||e+o>a||t-(o=r/2)<0||t+o>i}function QB(e,t,n,r,a,i,o,u){var s=a*i/(2*r),c=e(t-s),l=e(t+s),f=e(n-(i/=2)),h=e(n+i);return o.outOfBounds(c,f,l,h)||o.getRange(c,f,l,h)||u&&u.getRange(c,f,l,h)}var JB=[-1,-1,1,1],ez=[-1,1,-1,1];var tz=["right","center","left"],nz=["bottom","middle","top"];function rz(e,t,n,r,a,i,o,u,s,c,l,f){return!(a.outOfBounds(e,n,t,r)||(f&&i?i.getRange(e,n,t,r)||!function(e,t,n,r,a){return a[0]<=e&&n<=a[2]&&a[3]<=t&&r<=a[5]}(o,s,u,c,l):a.getRange(e,n,t,r)))}var az={"top-left":0,top:1,"top-right":2,left:4,middle:5,right:6,"bottom-left":8,bottom:9,"bottom-right":10},iz={naive:function(e,t,n,r){var a=e.width,i=e.height;return function(e){for(var t,n,o,u,s,c,l,f=e.datum.datum.items[r].items,h=f.length,d=e.datum.fontSize,p=WS.width(e.datum,e.datum.text),v=0,g=0;g<h;++g)t=f[g].x,o=f[g].y,s=(t+(n=void 0===f[g].x2?t:f[g].x2))/2,c=(o+(u=void 0===f[g].y2?o:f[g].y2))/2,(l=Math.abs(n-t+u-o))>=v&&(v=l,e.x=s,e.y=c);return s=p/2,c=d/2,t=e.x-s,n=e.x+s,o=e.y-c,u=e.y+c,e.align="center",t<0&&n<=a?e.align="left":0<=t&&a<n&&(e.align="right"),e.baseline="middle",o<0&&u<=i?e.baseline="top":0<=o&&i<u&&(e.baseline="bottom"),!0}},"reduced-search":function(e,t,n,r){var a=e.width,i=e.height,o=t[0],u=t[1];function s(t,n,r,s,c){var l,f=e.invert(t),h=e.invert(n),d=r,p=i;if(!$B(f,h,s,c,a,i)&&!QB(e,f,h,c,s,d,o,u)&&!QB(e,f,h,c,s,c,o,null)){for(;p-d>=1;)QB(e,f,h,c,s,l=(d+p)/2,o,u)?p=l:d=l;if(d>r)return[f,h,d,!0]}}return function(t){for(var u,c,l,f,h,d,p,v,g,m,y,b,x,w,k,_,S,C=t.datum.datum.items[r].items,E=C.length,A=t.datum.fontSize,N=WS.width(t.datum,t.datum.text),T=n?A:0,M=!1,D=!1,F=0,I=0;I<E;++I){for(u=C[I].x,l=C[I].y,u>(c=void 0===C[I].x2?u:C[I].x2)&&(S=u,u=c,c=S),l>(f=void 0===C[I].y2?l:C[I].y2)&&(S=l,l=f,f=S),m=~~(((g=e(u))+(y=e(c)))/2),x=~~(((b=e(l))+(w=e(f)))/2),p=m;p>=g;--p)for(v=x;v>=b;--v)if(_=s(p,v,T,N,A)){var O=_,R=(0,gc.Z)(O,4);t.x=R[0],t.y=R[1],T=R[2],M=R[3]}for(p=m;p<=y;++p)for(v=x;v<=w;++v)if(_=s(p,v,T,N,A)){var Z=_,B=(0,gc.Z)(Z,4);t.x=B[0],t.y=B[1],T=B[2],M=B[3]}M||n||(h=(u+c)/2,d=(l+f)/2,(k=Math.abs(c-u+f-l))>=F&&!$B(h,d,N,A,a,i)&&!QB(e,h,d,A,N,A,o,null)&&(F=k,t.x=h,t.y=d,D=!0))}return!(!M&&!D)&&(h=N/2,d=A/2,o.setRange(e(t.x-h),e(t.y-d),e(t.x+h),e(t.y+d)),t.align="center",t.baseline="middle",!0)}},floodfill:function(e,t,n,r){var a=e.width,i=e.height,o=t[0],u=t[1],s=e.bitmap();return function(t){for(var c,l,f,h,d,p,v,g,m,y,b,x,w=t.datum.datum.items[r].items,k=w.length,_=t.datum.fontSize,S=WS.width(t.datum,t.datum.text),C=[],E=n?_:0,A=!1,N=!1,T=0,M=0;M<k;++M){for(c=w[M].x,f=w[M].y,l=void 0===w[M].x2?c:w[M].x2,h=void 0===w[M].y2?f:w[M].y2,C.push([e((c+l)/2),e((f+h)/2)]);C.length;){var D=C.pop(),F=(0,gc.Z)(D,2);if(v=F[0],g=F[1],!(o.get(v,g)||u.get(v,g)||s.get(v,g))){s.set(v,g);for(var I=0;I<4;++I)d=v+JB[I],p=g+ez[I],s.outOfBounds(d,p,d,p)||C.push([d,p]);if(d=e.invert(v),p=e.invert(g),m=E,y=i,!$B(d,p,S,_,a,i)&&!QB(e,d,p,_,S,m,o,u)&&!QB(e,d,p,_,S,_,o,null)){for(;y-m>=1;)QB(e,d,p,_,S,b=(m+y)/2,o,u)?y=b:m=b;m>E&&(t.x=d,t.y=p,E=m,A=!0)}}}A||n||(d=(c+l)/2,p=(f+h)/2,(x=Math.abs(l-c+h-f))>=T&&!$B(d,p,S,_,a,i)&&!QB(e,d,p,_,S,_,o,null)&&(T=x,t.x=d,t.y=p,N=!0))}return!(!A&&!N)&&(d=S/2,p=_/2,o.setRange(e(t.x-d),e(t.y-p),e(t.x+d),e(t.y+p)),t.align="center",t.baseline="middle",!0)}}};function oz(e,t,n,r,a,i,o,u,s,c,l){if(!e.length)return e;var f,h,d=Math.max(r.length,a.length),p=function(e,t){for(var n=new Float64Array(t),r=e.length,a=0;a<r;++a)n[a]=e[a]||0;for(var i=r;i<t;++i)n[i]=n[r-1];return n}(r,d),v=function(e,t){for(var n=new Int8Array(t),r=e.length,a=0;a<r;++a)n[a]|=az[e[a]];for(var i=r;i<t;++i)n[i]=n[r-1];return n}(a,d),g=(f=e[0].datum)&&f.mark&&f.mark.marktype,m="group"===g&&e[0].datum.items[s].marktype,y="area"===m,b=function(e,t,n,r){var a=function(e){return[e.x,e.x,e.x,e.y,e.y,e.y]};return e?"line"===e||"area"===e?function(e){return a(e.datum)}:"line"===t?function(e){var t=e.datum.items[r].items;return a(t.length?t["start"===n?0:t.length-1]:{x:NaN,y:NaN})}:function(e){var t=e.datum.bounds;return[t.x1,(t.x1+t.x2)/2,t.x2,t.y1,(t.y1+t.y2)/2,t.y2]}:a}(g,m,u,s),x=KB(t[0],t[1],c),w=y&&"naive"===l,k=e.map((function(e){return{datum:e,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:b(e)}}));if(!w){n&&k.sort((function(e,t){return n(e.datum,t.datum)}));for(var _=!1,S=0;S<v.length&&!_;++S)_=5===v[S]||p[S]<0;g&&(o||y)&&(i=[e.map((function(e){return e.datum}))].concat(i)),h=i.length?WB(x,i,_,y):function(e,t){var n=e.bitmap();return(t||[]).forEach((function(t){return n.set(e(t.boundary[0]),e(t.boundary[3]))})),[n,void 0]}(x,o&&k)}var C=y?iz[l](x,h,o,s):function(e,t,n,r){var a=e.width,i=e.height,o=t[0],u=t[1],s=r.length;return function(t){var c=t.boundary,l=t.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>a||c[3]>i)return!1;for(var f,h,d,p,v,g,m,y,b,x,w,k,_,S,C,E=0,A=0;A<s;++A){if(f=(3&n[A])-1,h=(n[A]>>>2&3)-1,d=0===f&&0===h||r[A]<0,p=f&&h?Math.SQRT1_2:1,v=r[A]<0?-1:1,g=c[1+f]+r[A]*f*p,y=(w=c[4+h]+v*l*h/2+r[A]*h*p)-l/2,b=w+l/2,k=e(g),S=e(y),C=e(b),!E){if(!rz(k,k,S,C,o,u,g,g,y,b,c,d))continue;E=WS.width(t.datum,t.datum.text)}if(m=(x=g+v*E*f/2)+E/2,rz(k=e(g=x-E/2),_=e(m),S,C,o,u,g,m,y,b,c,d))return t.x=f?f*v<0?m:g:x,t.y=h?h*v<0?b:y:w,t.align=tz[f*v+1],t.baseline=nz[h*v+1],o.setRange(k,S,_,C),!0}return!1}}(x,h,v,p);return k.forEach((function(e){return e.opacity=+C(e)})),k}var uz=["x","y","opacity","align","baseline"],sz=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function cz(e){hc.call(this,null,e)}function lz(e,t){var n,r,a,i,o,u,s=[],c=function(e){return e(i)};if(null==t)s.push(e);else for(n={},r=0,a=e.length;r<a;++r)i=e[r],(u=n[o=t.map(c)])||(n[o]=u=[],u.dims=o,s.push(u)),u.push(i);return s}function fz(e){hc.call(this,null,e)}cz.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:sz},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:uz.length,default:uz}]},Zn(cz,hc,{transform:function(e,t){var n=e.modified();if(n||t.changed(t.ADD_REM)||function(n){var r=e[n];return kn(r)&&t.modified(r.fields)}("sort")){e.size&&2===e.size.length||Ht("Size parameter should be specified as a [width, height] array.");var r=e.as||uz;return oz(t.materialize(t.SOURCE).source,e.size,e.sort,wn(e.offset||1),wn(e.anchor||sz),e.avoidMarks||[],!1!==e.avoidBaseMark,e.lineAnchor||"end",e.markIndex||0,e.padding||0,e.method||"naive").forEach((function(e){var t=e.datum;t[r[0]]=e.x,t[r[1]]=e.y,t[r[2]]=e.opacity,t[r[3]]=e.align,t[r[4]]=e.baseline})),t.reflow(n).modifies(r)}}}),fz.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},Zn(fz,hc,{transform:function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var r=lz(t.materialize(t.SOURCE).source,e.groupby),a=(e.groupby||[]).map(jt),i=a.length,o=e.as||[jt(e.x),jt(e.y)],u=[];r.forEach((function(t){(function(e,t,n,r){for(var a=tl(e,t,n,!0),i=(0,gc.Z)(a,4),o=i[0],u=i[1],s=i[2],c=i[3],l=o.length,f=Math.max(2,~~(r*l)),h=new Float64Array(l),d=new Float64Array(l),p=new Float64Array(l).fill(1),v=-1;++v<=2;){for(var g=[0,f-1],m=0;m<l;++m){for(var y=o[m],b=g[0],x=g[1],w=y-o[b]>o[x]-y?b:x,k=0,_=0,S=0,C=0,E=0,A=1/Math.abs(o[w]-y||1),N=b;N<=x;++N){var T=o[N],M=u[N],D=ul(Math.abs(y-T)*A)*p[N],F=T*D;k+=D,_+=F,S+=M*D,C+=M*F,E+=T*F}var I=el(_/k,S/k,C/k,E/k),O=(0,gc.Z)(I,2),R=O[0],Z=O[1];h[m]=R+Z*y,d[m]=Math.abs(u[m]-h[m]),sl(o,m+1,g)}if(2===v)break;var B=Tc(d);if(Math.abs(B)<1e-12)break;for(var z,L,P=0;P<l;++P)z=d[P]/(6*B),p[P]=z>=1?1e-12:(L=1-z*z)*L}return function(e,t,n,r){for(var a,i=e.length,o=[],u=0,s=0,c=[];u<i;++u)a=e[u]+n,c[0]===a?c[1]+=(t[u]-c[1])/++s:(s=0,c[1]+=r,c=[a,t[u]],o.push(c));return c[1]+=r,o}(o,h,s,c)})(t,e.x,e.y,e.bandwidth||.3).forEach((function(e){for(var n={},r=0;r<i;++r)n[a[r]]=t.dims[r];n[o[0]]=e[0],n[o[1]]=e[1],u.push(Ms(n))}))})),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});var hz={linear:al,log:function(e,t,n){var r=0,a=0,i=0,o=0,u=0;nl(e,t,n,(function(e,t){++u,e=Math.log(e),r+=(e-r)/u,a+=(t-a)/u,i+=(e*t-i)/u,o+=(e*e-o)/u}));var s=el(r,a,i,o),c=function(e){return s[0]+s[1]*Math.log(e)};return{coef:s,predict:c,rSquared:rl(e,t,n,a,c)}},exp:function(e,t,n){var r,a,i,o=tl(e,t,n),u=(0,gc.Z)(o,4),s=u[0],c=(u[1],u[2]),l=u[3],f=0,h=0,d=0,p=0,v=0;nl(e,t,n,(function(e,t){r=s[v++],a=Math.log(t),f+=(t*a-f)/v,h+=((i=r*t)-h)/v,d+=(i*a-d)/v,p+=(r*i-p)/v}));var g=el(h/l,f/l,d/l,p/l),m=(0,gc.Z)(g,2),y=m[0],b=m[1],x=function(e){return Math.exp(y+b*(e-c))};return{coef:[Math.exp(y-b*c),b],predict:x,rSquared:rl(e,t,n,l,x)}},pow:function(e,t,n){var r=0,a=0,i=0,o=0,u=0,s=0;nl(e,t,n,(function(e,t){var n=Math.log(e),c=Math.log(t);++s,r+=(n-r)/s,a+=(c-a)/s,i+=(n*c-i)/s,o+=(n*n-o)/s,u+=(t-u)/s}));var c=el(r,a,i,o),l=function(e){return c[0]*Math.pow(e,c[1])};return c[0]=Math.exp(c[0]),{coef:c,predict:l,rSquared:rl(e,t,n,u,l)}},quad:il,poly:function(e,t,n,r){if(0===r)return function(e,t,n){var r,a=0,i=0,o=(0,zt.Z)(e);try{for(o.s();!(r=o.n()).done;){var u=r.value,s=n(u);null==t(u)||null==s||isNaN(s)||(a+=(s-a)/++i)}}catch(c){o.e(c)}finally{o.f()}return{coef:[a],predict:function(){return a},rSquared:0}}(e,t,n);if(1===r)return al(e,t,n);if(2===r)return il(e,t,n);var a,i,o,u,s,c=tl(e,t,n),l=(0,gc.Z)(c,4),f=l[0],h=l[1],d=l[2],p=l[3],v=f.length,g=[],m=[],y=r+1;for(a=0;a<y;++a){for(o=0,u=0;o<v;++o)u+=Math.pow(f[o],a)*h[o];for(g.push(u),s=new Float64Array(y),i=0;i<y;++i){for(o=0,u=0;o<v;++o)u+=Math.pow(f[o],a+i);s[i]=u}m.push(s)}m.push(g);var b=function(e){var t,n,r,a,i,o=e.length-1,u=[];for(t=0;t<o;++t){for(a=t,n=t+1;n<o;++n)Math.abs(e[t][n])>Math.abs(e[t][a])&&(a=n);for(r=t;r<o+1;++r)i=e[r][t],e[r][t]=e[r][a],e[r][a]=i;for(n=t+1;n<o;++n)for(r=o;r>=t;r--)e[r][n]-=e[r][t]*e[t][n]/e[t][t]}for(n=o-1;n>=0;--n){for(i=0,r=n+1;r<o;++r)i+=e[r][n]*u[r];u[n]=(e[o][n]-i)/e[n][n]}return u}(m),x=function(e){e-=d;var t=p+b[0]+b[1]*e+b[2]*e*e;for(a=3;a<y;++a)t+=b[a]*Math.pow(e,a);return t};return{coef:ol(y,b,-d,p),predict:x,rSquared:rl(e,t,n,p,x)}}};function dz(e){hc.call(this,null,e)}dz.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(hz)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},Zn(dz,hc,{transform:function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var r=lz(t.materialize(t.SOURCE).source,e.groupby),a=(e.groupby||[]).map(jt),i=e.method||"linear",o=e.order||3,u=function(e,t){return"poly"===e?t:"quad"===e?2:1}(i,o),s=e.as||[jt(e.x),jt(e.y)],c=hz[i],l=[],f=e.extent;In(hz,i)||Ht("Invalid regression method: "+i),null!=f&&"log"===i&&f[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),f=null),r.forEach((function(n){if(n.length<=u)t.dataflow.warn("Skipping regression with more parameters than data points.");else{var r=c(n,e.x,e.y,o);if(e.params)l.push(Ms({keys:n.dims,coef:r.coef,rSquared:r.rSquared}));else{var h=f||Dn(n,e.x),d=function(e){for(var t={},r=0;r<a.length;++r)t[a[r]]=n.dims[r];t[s[0]]=e[0],t[s[1]]=e[1],l.push(Ms(t))};"linear"===i?h.forEach((function(e){return d([e,r.predict(e)])})):ll(r.predict,h,25,200).forEach(d)}}})),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});var pz=Math.pow(2,-52),vz=new Uint32Array(512),gz=function(){function e(t){(0,ud.Z)(this,e);var n=t.length>>1;if(n>0&&"number"!==typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;var r=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*r),this._halfedges=new Int32Array(3*r),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}return(0,sd.Z)(e,[{key:"update",value:function(){for(var e=this.coords,t=this._hullPrev,n=this._hullNext,r=this._hullTri,a=this._hullHash,i=e.length>>1,o=1/0,u=1/0,s=-1/0,c=-1/0,l=0;l<i;l++){var f=e[2*l],h=e[2*l+1];f<o&&(o=f),h<u&&(u=h),f>s&&(s=f),h>c&&(c=h),this._ids[l]=l}for(var d,p,v,g=(o+s)/2,m=(u+c)/2,y=1/0,b=0;b<i;b++){var x=mz(g,m,e[2*b],e[2*b+1]);x<y&&(d=b,y=x)}var w=e[2*d],k=e[2*d+1];y=1/0;for(var _=0;_<i;_++)if(_!==d){var S=mz(w,k,e[2*_],e[2*_+1]);S<y&&S>0&&(p=_,y=S)}for(var C=e[2*p],E=e[2*p+1],A=1/0,N=0;N<i;N++)if(N!==d&&N!==p){var T=wz(w,k,C,E,e[2*N],e[2*N+1]);T<A&&(v=N,A=T)}var M=e[2*v],D=e[2*v+1];if(A===1/0){for(var F=0;F<i;F++)this._dists[F]=e[2*F]-e[0]||e[2*F+1]-e[1];kz(this._ids,this._dists,0,i-1);for(var I=new Uint32Array(i),O=0,R=0,Z=-1/0;R<i;R++){var B=this._ids[R];this._dists[B]>Z&&(I[O++]=B,Z=this._dists[B])}return this.hull=I.subarray(0,O),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(bz(w,k,C,E,M,D)){var z=p,L=C,P=E;p=v,C=M,E=D,v=z,M=L,D=P}var j=function(e,t,n,r,a,i){var o=n-e,u=r-t,s=a-e,c=i-t,l=o*o+u*u,f=s*s+c*c,h=.5/(o*c-u*s);return{x:e+(c*l-u*f)*h,y:t+(o*f-s*l)*h}}(w,k,C,E,M,D);this._cx=j.x,this._cy=j.y;for(var U=0;U<i;U++)this._dists[U]=mz(e[2*U],e[2*U+1],j.x,j.y);kz(this._ids,this._dists,0,i-1),this._hullStart=d;var W=3;n[d]=t[v]=p,n[p]=t[d]=v,n[v]=t[p]=d,r[d]=0,r[p]=1,r[v]=2,a.fill(-1),a[this._hashKey(w,k)]=d,a[this._hashKey(C,E)]=p,a[this._hashKey(M,D)]=v,this.trianglesLen=0,this._addTriangle(d,p,v,-1,-1,-1);for(var V,q,H=0;H<this._ids.length;H++){var G=this._ids[H],X=e[2*G],Y=e[2*G+1];if(!(H>0&&Math.abs(X-V)<=pz&&Math.abs(Y-q)<=pz)&&(V=X,q=Y,G!==d&&G!==p&&G!==v)){for(var K=0,$=0,Q=this._hashKey(X,Y);$<this._hashSize&&(-1===(K=a[(Q+$)%this._hashSize])||K===n[K]);$++);for(var J=K=t[K],ee=void 0;ee=n[J],!bz(X,Y,e[2*J],e[2*J+1],e[2*ee],e[2*ee+1]);)if((J=ee)===K){J=-1;break}if(-1!==J){var te=this._addTriangle(J,G,n[J],-1,-1,r[J]);r[G]=this._legalize(te+2),r[J]=te,W++;for(var ne=n[J];ee=n[ne],bz(X,Y,e[2*ne],e[2*ne+1],e[2*ee],e[2*ee+1]);)te=this._addTriangle(ne,G,ee,r[G],-1,r[ne]),r[G]=this._legalize(te+2),n[ne]=ne,W--,ne=ee;if(J===K)for(;bz(X,Y,e[2*(ee=t[J])],e[2*ee+1],e[2*J],e[2*J+1]);)te=this._addTriangle(ee,G,J,-1,r[J],r[ee]),this._legalize(te+2),r[ee]=te,n[J]=J,W--,J=ee;this._hullStart=t[G]=J,n[J]=t[ne]=G,n[G]=ne,a[this._hashKey(X,Y)]=G,a[this._hashKey(e[2*J],e[2*J+1])]=J}}}this.hull=new Uint32Array(W);for(var re=0,ae=this._hullStart;re<W;re++)this.hull[re]=ae,ae=n[ae];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}},{key:"_hashKey",value:function(e,t){return Math.floor(function(e,t){var n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}},{key:"_legalize",value:function(e){for(var t=this._triangles,n=this._halfedges,r=this.coords,a=0,i=0;;){var o=n[e],u=e-e%3;if(i=u+(e+2)%3,-1!==o){var s=o-o%3,c=u+(e+1)%3,l=s+(o+2)%3,f=t[i],h=t[e],d=t[c],p=t[l];if(xz(r[2*f],r[2*f+1],r[2*h],r[2*h+1],r[2*d],r[2*d+1],r[2*p],r[2*p+1])){t[e]=p,t[o]=f;var v=n[l];if(-1===v){var g=this._hullStart;do{if(this._hullTri[g]===l){this._hullTri[g]=e;break}g=this._hullPrev[g]}while(g!==this._hullStart)}this._link(e,v),this._link(o,n[i]),this._link(i,l);var m=s+(o+1)%3;a<vz.length&&(vz[a++]=m)}else{if(0===a)break;e=vz[--a]}}else{if(0===a)break;e=vz[--a]}}return i}},{key:"_link",value:function(e,t){this._halfedges[e]=t,-1!==t&&(this._halfedges[t]=e)}},{key:"_addTriangle",value:function(e,t,n,r,a,i){var o=this.trianglesLen;return this._triangles[o]=e,this._triangles[o+1]=t,this._triangles[o+2]=n,this._link(o,r),this._link(o+1,a),this._link(o+2,i),this.trianglesLen+=3,o}}],[{key:"from",value:function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sz,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Cz,a=t.length,i=new Float64Array(2*a),o=0;o<a;o++){var u=t[o];i[2*o]=n(u),i[2*o+1]=r(u)}return new e(i)}}]),e}();function mz(e,t,n,r){var a=e-n,i=t-r;return a*a+i*i}function yz(e,t,n,r,a,i){var o=(r-t)*(a-e),u=(n-e)*(i-t);return Math.abs(o-u)>=33306690738754716e-32*Math.abs(o+u)?o-u:0}function bz(e,t,n,r,a,i){return(yz(a,i,e,t,n,r)||yz(e,t,n,r,a,i)||yz(n,r,a,i,e,t))<0}function xz(e,t,n,r,a,i,o,u){var s=e-o,c=t-u,l=n-o,f=r-u,h=a-o,d=i-u,p=l*l+f*f,v=h*h+d*d;return s*(f*v-p*d)-c*(l*v-p*h)+(s*s+c*c)*(l*d-f*h)<0}function wz(e,t,n,r,a,i){var o=n-e,u=r-t,s=a-e,c=i-t,l=o*o+u*u,f=s*s+c*c,h=.5/(o*c-u*s),d=(c*l-u*f)*h,p=(o*f-s*l)*h;return d*d+p*p}function kz(e,t,n,r){if(r-n<=20)for(var a=n+1;a<=r;a++){for(var i=e[a],o=t[i],u=a-1;u>=n&&t[e[u]]>o;)e[u+1]=e[u--];e[u+1]=i}else{var s=n+1,c=r;_z(e,n+r>>1,s),t[e[n]]>t[e[r]]&&_z(e,n,r),t[e[s]]>t[e[r]]&&_z(e,s,r),t[e[n]]>t[e[s]]&&_z(e,n,s);for(var l=e[s],f=t[l];;){do{s++}while(t[e[s]]<f);do{c--}while(t[e[c]]>f);if(c<s)break;_z(e,s,c)}e[n+1]=e[c],e[c]=l,r-s+1>=c-n?(kz(e,t,s,r),kz(e,t,n,c-1)):(kz(e,t,n,c-1),kz(e,t,s,r))}}function _z(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Sz(e){return e[0]}function Cz(e){return e[1]}var Ez=1e-6,Az=function(){function e(){(0,ud.Z)(this,e),this._x0=this._y0=this._x1=this._y1=null,this._=""}return(0,sd.Z)(e,[{key:"moveTo",value:function(e,t){this._+="M".concat(this._x0=this._x1=+e,",").concat(this._y0=this._y1=+t)}},{key:"closePath",value:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}},{key:"lineTo",value:function(e,t){this._+="L".concat(this._x1=+e,",").concat(this._y1=+t)}},{key:"arc",value:function(e,t,n){var r=(e=+e)+(n=+n),a=t=+t;if(n<0)throw new Error("negative radius");null===this._x1?this._+="M".concat(r,",").concat(a):(Math.abs(this._x1-r)>Ez||Math.abs(this._y1-a)>Ez)&&(this._+="L"+r+","+a),n&&(this._+="A".concat(n,",").concat(n,",0,1,1,").concat(e-n,",").concat(t,"A").concat(n,",").concat(n,",0,1,1,").concat(this._x1=r,",").concat(this._y1=a))}},{key:"rect",value:function(e,t,n,r){this._+="M".concat(this._x0=this._x1=+e,",").concat(this._y0=this._y1=+t,"h").concat(+n,"v").concat(+r,"h").concat(-n,"Z")}},{key:"value",value:function(){return this._||null}}]),e}(),Nz=function(){function e(){(0,ud.Z)(this,e),this._=[]}return(0,sd.Z)(e,[{key:"moveTo",value:function(e,t){this._.push([e,t])}},{key:"closePath",value:function(){this._.push(this._[0].slice())}},{key:"lineTo",value:function(e,t){this._.push([e,t])}},{key:"value",value:function(){return this._.length?this._:null}}]),e}(),Tz=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,960,500],r=(0,gc.Z)(n,4),a=r[0],i=r[1],o=r[2],u=r[3];if((0,ud.Z)(this,e),!((o=+o)>=(a=+a))||!((u=+u)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=o,this.xmin=a,this.ymax=u,this.ymin=i,this._init()}return(0,sd.Z)(e,[{key:"update",value:function(){return this.delaunay.update(),this._init(),this}},{key:"_init",value:function(){for(var e,t,n=this.delaunay,r=n.points,a=n.hull,i=n.triangles,o=this.vectors,u=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2),s=0,c=0,l=i.length;s<l;s+=3,c+=2){var f=2*i[s],h=2*i[s+1],d=2*i[s+2],p=r[f],v=r[f+1],g=r[h],m=r[h+1],y=r[d],b=r[d+1],x=g-p,w=m-v,k=y-p,_=b-v,S=x*x+w*w,C=k*k+_*_,E=2*(x*_-w*k);if(E)if(Math.abs(E)<1e-8)e=(p+y)/2,t=(v+b)/2;else{var A=1/E;e=p+(_*S-w*C)*A,t=v+(x*C-k*S)*A}else e=(p+y)/2-1e8*_,t=(v+b)/2+1e8*k;u[c]=e,u[c+1]=t}var N,T,M,D=a[a.length-1],F=4*D,I=r[2*D],O=r[2*D+1];o.fill(0);for(var R=0;R<a.length;++R)N=F,T=I,M=O,F=4*(D=a[R]),I=r[2*D],O=r[2*D+1],o[N+2]=o[F]=M-O,o[N+3]=o[F+1]=I-T}},{key:"render",value:function(e){var t=null==e?e=new Az:void 0,n=this.delaunay,r=n.halfedges,a=n.inedges,i=n.hull,o=this.circumcenters,u=this.vectors;if(i.length<=1)return null;for(var s=0,c=r.length;s<c;++s){var l=r[s];if(!(l<s)){var f=2*Math.floor(s/3),h=2*Math.floor(l/3),d=o[f],p=o[f+1],v=o[h],g=o[h+1];this._renderSegment(d,p,v,g,e)}}for(var m,y=i[i.length-1],b=0;b<i.length;++b){m=y,y=i[b];var x=2*Math.floor(a[y]/3),w=o[x],k=o[x+1],_=4*m,S=this._project(w,k,u[_+2],u[_+3]);S&&this._renderSegment(w,k,S[0],S[1],e)}return t&&t.value()}},{key:"renderBounds",value:function(e){var t=null==e?e=new Az:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}},{key:"renderCell",value:function(e,t){var n=null==t?t=new Az:void 0,r=this._clip(e);if(null!==r&&r.length){t.moveTo(r[0],r[1]);for(var a=r.length;r[0]===r[a-2]&&r[1]===r[a-1]&&a>1;)a-=2;for(var i=2;i<a;i+=2)r[i]===r[i-2]&&r[i+1]===r[i-1]||t.lineTo(r[i],r[i+1]);return t.closePath(),n&&n.value()}}},{key:"cellPolygons",value:S().mark((function e(){var t,n,r,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.delaunay.points,n=0,r=t.length/2;case 2:if(!(n<r)){e.next=11;break}if(!(a=this.cellPolygon(n))){e.next=8;break}return a.index=n,e.next=8,a;case 8:++n,e.next=2;break;case 11:case"end":return e.stop()}}),e,this)}))},{key:"cellPolygon",value:function(e){var t=new Nz;return this.renderCell(e,t),t.value()}},{key:"_renderSegment",value:function(e,t,n,r,a){var i,o=this._regioncode(e,t),u=this._regioncode(n,r);0===o&&0===u?(a.moveTo(e,t),a.lineTo(n,r)):(i=this._clipSegment(e,t,n,r,o,u))&&(a.moveTo(i[0],i[1]),a.lineTo(i[2],i[3]))}},{key:"contains",value:function(e,t,n){return(t=+t)===t&&(n=+n)===n&&this.delaunay._step(e,t,n)===e}},{key:"neighbors",value:S().mark((function e(t){var n,r,a,i,o,u,s,c,l;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this._clip(t))){e.next=33;break}r=(0,zt.Z)(this.delaunay.neighbors(t)),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=25;break}if(i=a.value,!(o=this._clip(i))){e.next=23;break}u=0,s=n.length;case 10:if(!(u<s)){e.next=23;break}c=0,l=o.length;case 12:if(!(c<l)){e.next=20;break}if(n[u]!=o[c]||n[u+1]!=o[c+1]||n[(u+2)%s]!=o[(c+l-2)%l]||n[(u+3)%s]!=o[(c+l-1)%l]){e.next=17;break}return e.next=16,i;case 16:return e.abrupt("break",23);case 17:c+=2,e.next=12;break;case 20:u+=2,e.next=10;break;case 23:e.next=5;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(3),r.e(e.t0);case 30:return e.prev=30,r.f(),e.finish(30);case 33:case"end":return e.stop()}}),e,this,[[3,27,30,33]])}))},{key:"_cell",value:function(e){var t=this.circumcenters,n=this.delaunay,r=n.inedges,a=n.halfedges,i=n.triangles,o=r[e];if(-1===o)return null;var u=[],s=o;do{var c=Math.floor(s/3);if(u.push(t[2*c],t[2*c+1]),i[s=s%3===2?s-2:s+1]!==e)break;s=a[s]}while(s!==o&&-1!==s);return u}},{key:"_clip",value:function(e){if(0===e&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];var t=this._cell(e);if(null===t)return null;var n=this.vectors,r=4*e;return n[r]||n[r+1]?this._clipInfinite(e,t,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(e,t)}},{key:"_clipFinite",value:function(e,t){for(var n,r,a,i,o,u=t.length,s=null,c=t[u-2],l=t[u-1],f=this._regioncode(c,l),h=0;h<u;h+=2)if(n=c,r=l,c=t[h],l=t[h+1],a=f,f=this._regioncode(c,l),0===a&&0===f)i=o,o=0,s?s.push(c,l):s=[c,l];else{var d=void 0,p=void 0,v=void 0,g=void 0,m=void 0;if(0===a){if(null===(d=this._clipSegment(n,r,c,l,a,f)))continue;var y=d,b=(0,gc.Z)(y,4);p=b[0],v=b[1],g=b[2],m=b[3]}else{if(null===(d=this._clipSegment(c,l,n,r,f,a)))continue;var x=d,w=(0,gc.Z)(x,4);g=w[0],m=w[1],p=w[2],v=w[3],i=o,o=this._edgecode(p,v),i&&o&&this._edge(e,i,o,s,s.length),s?s.push(p,v):s=[p,v]}i=o,o=this._edgecode(g,m),i&&o&&this._edge(e,i,o,s,s.length),s?s.push(g,m):s=[g,m]}if(s)i=o,o=this._edgecode(s[0],s[1]),i&&o&&this._edge(e,i,o,s,s.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return s}},{key:"_clipSegment",value:function(e,t,n,r,a,i){for(;;){if(0===a&&0===i)return[e,t,n,r];if(a&i)return null;var o=void 0,u=void 0,s=a||i;8&s?(o=e+(n-e)*(this.ymax-t)/(r-t),u=this.ymax):4&s?(o=e+(n-e)*(this.ymin-t)/(r-t),u=this.ymin):2&s?(u=t+(r-t)*(this.xmax-e)/(n-e),o=this.xmax):(u=t+(r-t)*(this.xmin-e)/(n-e),o=this.xmin),a?(e=o,t=u,a=this._regioncode(e,t)):(n=o,r=u,i=this._regioncode(n,r))}}},{key:"_clipInfinite",value:function(e,t,n,r,a,i){var o,u=Array.from(t);if((o=this._project(u[0],u[1],n,r))&&u.unshift(o[0],o[1]),(o=this._project(u[u.length-2],u[u.length-1],a,i))&&u.push(o[0],o[1]),u=this._clipFinite(e,u))for(var s,c=0,l=u.length,f=this._edgecode(u[l-2],u[l-1]);c<l;c+=2)s=f,f=this._edgecode(u[c],u[c+1]),s&&f&&(c=this._edge(e,s,f,u,c),l=u.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(u=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return u}},{key:"_edge",value:function(e,t,n,r,a){for(;t!==n;){var i=void 0,o=void 0;switch(t){case 5:t=4;continue;case 4:t=6,i=this.xmax,o=this.ymin;break;case 6:t=2;continue;case 2:t=10,i=this.xmax,o=this.ymax;break;case 10:t=8;continue;case 8:t=9,i=this.xmin,o=this.ymax;break;case 9:t=1;continue;case 1:t=5,i=this.xmin,o=this.ymin}r[a]===i&&r[a+1]===o||!this.contains(e,i,o)||(r.splice(a,0,i,o),a+=2)}if(r.length>4)for(var u=0;u<r.length;u+=2){var s=(u+2)%r.length,c=(u+4)%r.length;(r[u]===r[s]&&r[s]===r[c]||r[u+1]===r[s+1]&&r[s+1]===r[c+1])&&(r.splice(s,2),u-=2)}return a}},{key:"_project",value:function(e,t,n,r){var a,i,o,u=1/0;if(r<0){if(t<=this.ymin)return null;(a=(this.ymin-t)/r)<u&&(o=this.ymin,i=e+(u=a)*n)}else if(r>0){if(t>=this.ymax)return null;(a=(this.ymax-t)/r)<u&&(o=this.ymax,i=e+(u=a)*n)}if(n>0){if(e>=this.xmax)return null;(a=(this.xmax-e)/n)<u&&(i=this.xmax,o=t+(u=a)*r)}else if(n<0){if(e<=this.xmin)return null;(a=(this.xmin-e)/n)<u&&(i=this.xmin,o=t+(u=a)*r)}return[i,o]}},{key:"_edgecode",value:function(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}},{key:"_regioncode",value:function(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}}]),e}(),Mz=S().mark(zz),Dz=2*Math.PI,Fz=Math.pow;function Iz(e){return e[0]}function Oz(e){return e[1]}function Rz(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}var Zz=function(){function e(t){(0,ud.Z)(this,e),this._delaunator=new gz(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}return(0,sd.Z)(e,[{key:"update",value:function(){return this._delaunator.update(),this._init(),this}},{key:"_init",value:function(){var e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&function(e){for(var t=e.triangles,n=e.coords,r=0;r<t.length;r+=3){var a=2*t[r],i=2*t[r+1],o=2*t[r+2];if((n[o]-n[a])*(n[i+1]-n[a+1])-(n[i]-n[a])*(n[o+1]-n[a+1])>1e-10)return!1}return!0}(e)){this.collinear=Int32Array.from({length:t.length/2},(function(e,t){return t})).sort((function(e,n){return t[2*e]-t[2*n]||t[2*e+1]-t[2*n+1]}));for(var n=this.collinear[0],r=this.collinear[this.collinear.length-1],a=[t[2*n],t[2*n+1],t[2*r],t[2*r+1]],i=1e-8*Math.hypot(a[3]-a[1],a[2]-a[0]),o=0,u=t.length/2;o<u;++o){var s=Rz(t[2*o],t[2*o+1],i);t[2*o]=s[0],t[2*o+1]=s[1]}this._delaunator=new gz(t)}else delete this.collinear;for(var c=this.halfedges=this._delaunator.halfedges,l=this.hull=this._delaunator.hull,f=this.triangles=this._delaunator.triangles,h=this.inedges.fill(-1),d=this._hullIndex.fill(-1),p=0,v=c.length;p<v;++p){var g=f[p%3===2?p-2:p+1];-1!==c[p]&&-1!==h[g]||(h[g]=p)}for(var m=0,y=l.length;m<y;++m)d[l[m]]=m;l.length<=2&&l.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=l[0],this.triangles[1]=l[1],this.triangles[2]=l[1],h[l[0]]=1,2===l.length&&(h[l[1]]=0))}},{key:"voronoi",value:function(e){return new Tz(this,e)}},{key:"neighbors",value:S().mark((function e(t){var n,r,a,i,o,u,s,c,l,f,h;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.inedges,r=this.hull,a=this._hullIndex,i=this.halfedges,o=this.triangles,!(u=this.collinear)){e.next=10;break}if(!((s=u.indexOf(t))>0)){e.next=6;break}return e.next=6,u[s-1];case 6:if(!(s<u.length-1)){e.next=9;break}return e.next=9,u[s+1];case 9:return e.abrupt("return");case 10:if(-1!==(c=n[t])){e.next=13;break}return e.abrupt("return");case 13:l=c,f=-1;case 14:return e.next=16,f=o[l];case 16:if(o[l=l%3===2?l-2:l+1]===t){e.next=19;break}return e.abrupt("return");case 19:if(-1!==(l=i[l])){e.next=26;break}if((h=r[(a[t]+1)%r.length])===f){e.next=25;break}return e.next=25,h;case 25:return e.abrupt("return");case 26:if(l!==c){e.next=14;break}case 27:case"end":return e.stop()}}),e,this)}))},{key:"find",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if((e=+e)!==e||(t=+t)!==t)return-1;for(var r,a=n;(r=this._step(n,e,t))>=0&&r!==n&&r!==a;)n=r;return r}},{key:"_step",value:function(e,t,n){var r=this.inedges,a=this.hull,i=this._hullIndex,o=this.halfedges,u=this.triangles,s=this.points;if(-1===r[e]||!s.length)return(e+1)%(s.length>>1);var c=e,l=Fz(t-s[2*e],2)+Fz(n-s[2*e+1],2),f=r[e],h=f;do{var d=u[h],p=Fz(t-s[2*d],2)+Fz(n-s[2*d+1],2);if(p<l&&(l=p,c=d),u[h=h%3===2?h-2:h+1]!==e)break;if(-1===(h=o[h])){if((h=a[(i[e]+1)%a.length])!==d&&Fz(t-s[2*h],2)+Fz(n-s[2*h+1],2)<l)return h;break}}while(h!==f);return c}},{key:"render",value:function(e){for(var t=null==e?e=new Az:void 0,n=this.points,r=this.halfedges,a=this.triangles,i=0,o=r.length;i<o;++i){var u=r[i];if(!(u<i)){var s=2*a[i],c=2*a[u];e.moveTo(n[s],n[s+1]),e.lineTo(n[c],n[c+1])}}return this.renderHull(e),t&&t.value()}},{key:"renderPoints",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=null==e?e=new Az:void 0,r=this.points,a=0,i=r.length;a<i;a+=2){var o=r[a],u=r[a+1];e.moveTo(o+t,u),e.arc(o,u,t,0,Dz)}return n&&n.value()}},{key:"renderHull",value:function(e){var t=null==e?e=new Az:void 0,n=this.hull,r=this.points,a=2*n[0],i=n.length;e.moveTo(r[a],r[a+1]);for(var o=1;o<i;++o){var u=2*n[o];e.lineTo(r[u],r[u+1])}return e.closePath(),t&&t.value()}},{key:"hullPolygon",value:function(){var e=new Nz;return this.renderHull(e),e.value()}},{key:"renderTriangle",value:function(e,t){var n=null==t?t=new Az:void 0,r=this.points,a=this.triangles,i=2*a[e*=3],o=2*a[e+1],u=2*a[e+2];return t.moveTo(r[i],r[i+1]),t.lineTo(r[o],r[o+1]),t.lineTo(r[u],r[u+1]),t.closePath(),n&&n.value()}},{key:"trianglePolygons",value:S().mark((function e(){var t,n,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.triangles,n=0,r=t.length/3;case 2:if(!(n<r)){e.next=8;break}return e.next=5,this.trianglePolygon(n);case 5:++n,e.next=2;break;case 8:case"end":return e.stop()}}),e,this)}))},{key:"trianglePolygon",value:function(e){var t=new Nz;return this.renderTriangle(e,t),t.value()}}],[{key:"from",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Iz,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Oz,a=arguments.length>3?arguments[3]:void 0;return new e("length"in t?Bz(t,n,r,a):Float64Array.from(zz(t,n,r,a)))}}]),e}();function Bz(e,t,n,r){for(var a=e.length,i=new Float64Array(2*a),o=0;o<a;++o){var u=e[o];i[2*o]=t.call(r,u,o,e),i[2*o+1]=n.call(r,u,o,e)}return i}function zz(e,t,n,r){var a,i,o,u;return S().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:a=0,i=(0,zt.Z)(e),s.prev=2,i.s();case 4:if((o=i.n()).done){s.next=13;break}return u=o.value,s.next=8,t.call(r,u,a,e);case 8:return s.next=10,n.call(r,u,a,e);case 10:++a;case 11:s.next=4;break;case 13:s.next=18;break;case 15:s.prev=15,s.t0=s.catch(2),i.e(s.t0);case 18:return s.prev=18,i.f(),s.finish(18);case 21:case"end":return s.stop()}}),Mz,null,[[2,15,18,21]])}function Lz(e){hc.call(this,null,e)}Lz.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var Pz=[-1e5,-1e5,1e5,1e5];function jz(e){for(var t=e[0][0],n=e[0][1],r=e.length-1;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}Zn(Lz,hc,{transform:function(e,t){var n=e.as||"path",r=t.source;if(!r||!r.length)return t;var a=e.size;a=a?[0,0,a[0],a[1]]:(a=e.extent)?[a[0][0],a[0][1],a[1][0],a[1][1]]:Pz;for(var i=this.value=Zz.from(r,e.x,e.y).voronoi(a),o=0,u=r.length;o<u;++o){var s=i.cellPolygon(o);r[o][n]=s?jz(s):null}return t.reflow(e.modified()).modifies(n)}});var Uz=Math.PI/180,Wz=2048;function Vz(){var e,t,n,r,a,i,o,u=[256,256],s=Yz,c=[],l=Math.random,f={};function h(e,t,n){for(var r,a,i,o=t.x,c=t.y,f=Math.sqrt(u[0]*u[0]+u[1]*u[1]),h=s(u),d=l()<.5?1:-1,p=-d;(r=h(p+=d))&&(a=~~r[0],i=~~r[1],!(Math.min(Math.abs(a),Math.abs(i))>=f));)if(t.x=o+a,t.y=c+i,!(t.x+t.x0<0||t.y+t.y0<0||t.x+t.x1>u[0]||t.y+t.y1>u[1])&&(!n||!Hz(t,e,u[0]))&&(!n||Xz(t,n))){for(var v,g=t.sprite,m=t.width>>5,y=u[0]>>5,b=t.x-(m<<4),x=127&b,w=32-x,k=t.y1-t.y0,_=(t.y+t.y0)*y+(b>>5),S=0;S<k;S++){v=0;for(var C=0;C<=m;C++)e[_+C]|=v<<w|(C<m?(v=g[S*m+C])>>>x:0);_+=y}return t.sprite=null,!0}return!1}return f.layout=function(){for(var s=function(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=2048/t,e.height=Wz/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}($d()),f=function(e){var t=[],n=-1;for(;++n<e;)t[n]=0;return t}((u[0]>>5)*u[1]),d=null,p=c.length,v=-1,g=[],m=c.map((function(u){return{text:e(u),font:t(u),style:r(u),weight:a(u),rotate:i(u),size:~~(n(u)+1e-14),padding:o(u),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:u}})).sort((function(e,t){return t.size-e.size}));++v<p;){var y=m[v];y.x=u[0]*(l()+.5)>>1,y.y=u[1]*(l()+.5)>>1,qz(s,y,m,v),y.hasText&&h(f,y,d)&&(g.push(y),d?Gz(d,y):d=[{x:y.x+y.x0,y:y.y+y.y0},{x:y.x+y.x1,y:y.y+y.y1}],y.x-=u[0]>>1,y.y-=u[1]>>1)}return g},f.words=function(e){return arguments.length?(c=e,f):c},f.size=function(e){return arguments.length?(u=[+e[0],+e[1]],f):u},f.font=function(e){return arguments.length?(t=Kz(e),f):t},f.fontStyle=function(e){return arguments.length?(r=Kz(e),f):r},f.fontWeight=function(e){return arguments.length?(a=Kz(e),f):a},f.rotate=function(e){return arguments.length?(i=Kz(e),f):i},f.text=function(t){return arguments.length?(e=Kz(t),f):e},f.spiral=function(e){return arguments.length?(s=$z[e]||e,f):s},f.fontSize=function(e){return arguments.length?(n=Kz(e),f):n},f.padding=function(e){return arguments.length?(o=Kz(e),f):o},f.random=function(e){return arguments.length?(l=e,f):l},f}function qz(e,t,n,r){if(!t.sprite){var a=e.context,i=e.ratio;a.clearRect(0,0,2048/i,Wz/i);var o,u,s,c,l,f=0,h=0,d=0,p=n.length;for(--r;++r<p;){if(t=n[r],a.save(),a.font=t.style+" "+t.weight+" "+~~((t.size+1)/i)+"px "+t.font,o=a.measureText(t.text+"m").width*i,s=t.size<<1,t.rotate){var v=Math.sin(t.rotate*Uz),g=Math.cos(t.rotate*Uz),m=o*g,y=o*v,b=s*g,x=s*v;o=Math.max(Math.abs(m+x),Math.abs(m-x))+31>>5<<5,s=~~Math.max(Math.abs(y+b),Math.abs(y-b))}else o=o+31>>5<<5;if(s>d&&(d=s),f+o>=2048&&(f=0,h+=d,d=0),h+s>=Wz)break;a.translate((f+(o>>1))/i,(h+(s>>1))/i),t.rotate&&a.rotate(t.rotate*Uz),a.fillText(t.text,0,0),t.padding&&(a.lineWidth=2*t.padding,a.strokeText(t.text,0,0)),a.restore(),t.width=o,t.height=s,t.xoff=f,t.yoff=h,t.x1=o>>1,t.y1=s>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,f+=o}for(var w=a.getImageData(0,0,2048/i,Wz/i).data,k=[];--r>=0;)if((t=n[r]).hasText){for(u=(o=t.width)>>5,s=t.y1-t.y0,c=0;c<s*u;c++)k[c]=0;if(null==(f=t.xoff))return;h=t.yoff;var _=0,S=-1;for(l=0;l<s;l++){for(c=0;c<o;c++){var C=u*l+(c>>5),E=w[2048*(h+l)+(f+c)<<2]?1<<31-c%32:0;k[C]|=E,_|=E}_?S=l:(t.y0++,s--,l--,h++)}t.y1=t.y0+S,t.sprite=k.slice(0,(t.y1-t.y0)*u)}}}function Hz(e,t,n){n>>=5;for(var r,a=e.sprite,i=e.width>>5,o=e.x-(i<<4),u=127&o,s=32-u,c=e.y1-e.y0,l=(e.y+e.y0)*n+(o>>5),f=0;f<c;f++){r=0;for(var h=0;h<=i;h++)if((r<<s|(h<i?(r=a[f*i+h])>>>u:0))&t[l+h])return!0;l+=n}return!1}function Gz(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function Xz(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function Yz(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function Kz(e){return"function"===typeof e?e:function(){return e}}var $z={archimedean:Yz,rectangular:function(e){var t=4*e[0]/e[1],n=0,r=0;return function(e){var a=e<0?-1:1;switch(Math.sqrt(1+4*a*e)-a&3){case 0:n+=t;break;case 1:r+=4;break;case 2:n-=t;break;default:r-=4}return[n,r]}}},Qz=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Jz=["text","font","rotate","fontSize","fontStyle","fontWeight"];function eL(e){hc.call(this,Vz(),e)}eL.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Qz}]},Zn(eL,hc,{transform:function(e,t){!e.size||e.size[0]&&e.size[1]||Ht("Wordcloud size dimensions must be non-zero.");var n=e.modified();if(n||t.changed(t.ADD_REM)||Jz.some((function(n){var r=e[n];return kn(r)&&t.modified(r.fields)}))){var r,a=t.materialize(t.SOURCE).source,i=this.value,o=e.as||Qz,u=e.fontSize||14;if(kn(u)?r=e.fontSizeRange:u=Nn(u),r){var s=u,c=Iw("sqrt")().domain(Dn(a,s)).range(r);u=function(e){return c(s(e))}}a.forEach((function(e){e[o[0]]=NaN,e[o[1]]=NaN,e[o[3]]=0}));for(var l,f,h=i.words(a).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(u).random(Rc).layout(),d=i.size(),p=d[0]>>1,v=d[1]>>1,g=h.length,m=0;m<g;++m)(f=(l=h[m]).datum)[o[0]]=l.x+p,f[o[1]]=l.y+v,f[o[2]]=l.font,f[o[3]]=l.size,f[o[4]]=l.style,f[o[5]]=l.weight,f[o[6]]=l.rotate;return t.reflow(n).modifies(o)}}});var tL=Sl(pl),nL=tL.right,rL=tL.left,aL=(Sl(yl).center,nL);var iL=function(e){return new Uint8Array(e)},oL=function(e){return new Uint16Array(e)},uL=function(e){return new Uint32Array(e)};function sL(e,t,n){var r=(t<257?iL:t<65537?oL:uL)(e);return n&&r.set(n),r}function cL(e,t,n){var r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd:function(e,t){var n,a=this,i=a.bisect(a.range,e.value),o=e.index,u=i[0],s=i[1],c=o.length;for(n=0;n<u;++n)t[o[n]]|=r;for(n=s;n<c;++n)t[o[n]]|=r;return a}}}function lL(){var e=uL(0),t=[],n=0;return{insert:function(r,a,i){if(!a.length)return[];var o,u,s,c=n,l=a.length,f=uL(l),h=Array(l);for(s=0;s<l;++s)h[s]=r(a[s]),f[s]=s;if(h=function(e,t){return e.sort.call(t,(function(t,n){var r=e[t],a=e[n];return r<a?-1:r>a?1:0})),function(e,t){return Array.from(t,(function(t){return e[t]}))}(e,t)}(h,f),c)o=t,u=e,t=Array(c+l),e=uL(c+l),function(e,t,n,r,a,i,o,u,s){var c,l=0,f=0;for(c=0;l<r&&f<o;++c)t[l]<a[f]?(u[c]=t[l],s[c]=n[l++]):(u[c]=a[f],s[c]=i[f++]+e);for(;l<r;++l,++c)u[c]=t[l],s[c]=n[l];for(;f<o;++f,++c)u[c]=a[f],s[c]=i[f]+e}(i,o,u,c,h,f,l,t,e);else{if(i>0)for(s=0;s<l;++s)f[s]+=i;t=h,e=f}return n=c+l,{index:f,value:h}},remove:function(r,a){var i,o,u,s=n;for(o=0;!a[e[o]]&&o<s;++o);for(u=o;o<s;++o)a[i=e[o]]||(e[u]=i,t[u]=t[o],++u);n=s-r},bisect:function(e,r){var a;return r?a=r.length:(r=t,a=n),[rL(r,e[0],0,a),nL(r,e[1],0,a)]},reindex:function(t){for(var r=0,a=n;r<a;++r)e[r]=t[e[r]]},index:function(){return e},size:function(){return n}}}function fL(e){hc.call(this,function(){var e=8,t=[],n=uL(0),r=sL(0,e),a=sL(0,e);return{data:function(){return t},seen:function(){return n=function(e,t,n){return e.length>=t?e:((n=n||new e.constructor(t)).set(e),n)}(n,t.length)},add:function(e){for(var n,r=0,a=t.length,i=e.length;r<i;++r)(n=e[r])._index=a++,t.push(n)},remove:function(e,n){var i,o,u,s=t.length,c=Array(s-e),l=t;for(o=0;!n[o]&&o<s;++o)c[o]=t[o],l[o]=o;for(u=o;o<s;++o)i=t[o],n[o]?l[o]=-1:(l[o]=u,r[u]=r[o],a[u]=a[o],c[u]=i,i._index=u++),r[o]=0;return t=c,l},size:function(){return t.length},curr:function(){return r},prev:function(){return a},reset:function(e){return a[e]=r[e]},all:function(){return e<257?255:e<65537?65535:4294967295},set:function(e,t){r[e]|=t},clear:function(e,t){r[e]&=~t},resize:function(t,n){(t>r.length||n>e)&&(e=Math.max(n,e),r=sL(t,e,r),a=sL(t,e))}}}(),e),this._indices=null,this._dims=null}function hL(e){hc.call(this,null,e)}function dL(e,t){var n=function(e,t){var n,r=0,a=0,i=0;if(void 0===t){var o,u=(0,zt.Z)(e);try{for(u.s();!(o=u.n()).done;){var s=o.value;null!=s&&(s=+s)>=s&&(i+=(n=s-a)*(s-(a+=n/++r)))}}catch(d){u.e(d)}finally{u.f()}}else{var c,l=-1,f=(0,zt.Z)(e);try{for(f.s();!(c=f.n()).done;){var h=c.value;null!=(h=t(h,++l,e))&&(h=+h)>=h&&(i+=(n=h-a)*(h-(a+=n/++r)))}}catch(d){f.e(d)}finally{f.f()}}if(r>1)return i/(r-1)}(e,t);return n?Math.sqrt(n):n}fL.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]},Zn(fL,hc,{transform:function(e,t){return this._dims?e.modified("fields")||e.fields.some((function(e){return t.modified(e.fields)}))?this.reinit(e,t):this.eval(e,t):this.init(e,t)},init:function(e,t){for(var n,r,a=e.fields,i=e.query,o=this._indices={},u=this._dims=[],s=i.length,c=0;c<s;++c)r=o[n=a[c].fname]||(o[n]=lL()),u.push(cL(r,c,i[c]));return this.eval(e,t)},reinit:function(e,t){var n,r,a,i,o,u,s,c,l,f=t.materialize().fork(),h=e.fields,d=e.query,p=this._indices,v=this._dims,g=this.value,m=g.curr(),y=g.prev(),b=g.all(),x=f.rem=f.add,w=f.mod,k=d.length,_={};if(y.set(m),t.rem.length&&(o=this.remove(e,t,f)),t.add.length&&g.add(t.add),t.mod.length)for(u={},s=0,c=(i=t.mod).length;s<c;++s)u[i[s]._index]=1;for(s=0;s<k;++s)l=h[s],(!v[s]||e.modified("fields",s)||t.modified(l.fields))&&((n=_[a=l.fname])||(p[a]=r=lL(),_[a]=n=r.insert(l,t.source,0)),v[s]=cL(r,s,d[s]).onAdd(n,m));for(s=0,c=g.data().length;s<c;++s)o[s]||(y[s]!==m[s]?x.push(s):u[s]&&m[s]!==b&&w.push(s));return g.mask=(1<<k)-1,f},eval:function(e,t){var n=t.materialize().fork(),r=this._dims.length,a=0;return t.rem.length&&(this.remove(e,t,n),a|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(a|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),a|=(1<<r)-1),t.mod.length&&(this.modify(t,n),a|=(1<<r)-1),this.value.mask=a,n},insert:function(e,t,n){var r,a,i,o=t.add,u=this.value,s=this._dims,c=this._indices,l=e.fields,f={},h=n.add,d=u.size()+o.length,p=s.length,v=u.size();u.resize(d,p),u.add(o);var g=u.curr(),m=u.prev(),y=u.all();for(r=0;r<p;++r)i=f[a=l[r].fname]||(f[a]=c[a].insert(l[r],o,v)),s[r].onAdd(i,g);for(;v<d;++v)m[v]=y,g[v]!==y&&h.push(v)},modify:function(e,t){var n,r,a,i=t.mod,o=this.value,u=o.curr(),s=o.all(),c=e.mod;for(n=0,r=c.length;n<r;++n)u[a=c[n]._index]!==s&&i.push(a)},remove:function(e,t,n){var r,a,i,o,u=this._indices,s=this.value,c=s.curr(),l=s.prev(),f=s.all(),h={},d=n.rem,p=t.rem;for(r=0,a=p.length;r<a;++r)h[i=p[r]._index]=1,l[i]=o=c[i],c[i]=f,o!==f&&d.push(i);for(i in u)u[i].remove(a,h);return this.reindex(t,a,h),h},reindex:function(e,t,n){var r=this._indices,a=this.value;e.runAfter((function(){var e=a.remove(t,n);for(var i in r)r[i].reindex(e)}))},update:function(e,t,n){var r,a,i=this._dims,o=e.query,u=t.stamp,s=i.length,c=0;for(n.filters=0,a=0;a<s;++a)e.modified("query",a)&&(r=a,++c);if(1===c)c=i[r].one,this.incrementOne(i[r],o[r],n.add,n.rem);else for(a=0,c=0;a<s;++a)e.modified("query",a)&&(c|=i[a].one,this.incrementAll(i[a],o[a],u,n.add),n.rem=n.add);return c},incrementAll:function(e,t,n,r){var a,i,o,u=this.value,s=u.seen(),c=u.curr(),l=u.prev(),f=e.index(),h=e.bisect(e.range),d=e.bisect(t),p=d[0],v=d[1],g=h[0],m=h[1],y=e.one;if(p<g)for(a=p,i=Math.min(g,v);a<i;++a)s[o=f[a]]!==n&&(l[o]=c[o],s[o]=n,r.push(o)),c[o]^=y;else if(p>g)for(a=g,i=Math.min(p,m);a<i;++a)s[o=f[a]]!==n&&(l[o]=c[o],s[o]=n,r.push(o)),c[o]^=y;if(v>m)for(a=Math.max(p,m),i=v;a<i;++a)s[o=f[a]]!==n&&(l[o]=c[o],s[o]=n,r.push(o)),c[o]^=y;else if(v<m)for(a=Math.max(g,v),i=m;a<i;++a)s[o=f[a]]!==n&&(l[o]=c[o],s[o]=n,r.push(o)),c[o]^=y;e.range=t.slice()},incrementOne:function(e,t,n,r){var a,i,o,u=this.value.curr(),s=e.index(),c=e.bisect(e.range),l=e.bisect(t),f=l[0],h=l[1],d=c[0],p=c[1],v=e.one;if(f<d)for(a=f,i=Math.min(d,h);a<i;++a)u[o=s[a]]^=v,n.push(o);else if(f>d)for(a=d,i=Math.min(f,p);a<i;++a)u[o=s[a]]^=v,r.push(o);if(h>p)for(a=Math.max(f,p),i=h;a<i;++a)u[o=s[a]]^=v,n.push(o);else if(h<p)for(a=Math.max(d,h),i=p;a<i;++a)u[o=s[a]]^=v,r.push(o);e.range=t.slice()}}),hL.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},Zn(hL,hc,{transform:function(e,t){var n=~(e.ignore||0),r=e.filter,a=r.mask;if(0===(a&n))return t.StopPropagation;var i=t.fork(t.ALL),o=r.data(),u=r.curr(),s=r.prev(),c=function(e){return u[e]&n?null:o[e]};return i.filter(i.MOD,c),a&a-1?(i.filter(i.ADD,(function(e){var t=u[e]&n;return!t&&t^s[e]&n?o[e]:null})),i.filter(i.REM,(function(e){var t=u[e]&n;return t&&!(t^t^s[e]&n)?o[e]:null}))):(i.filter(i.ADD,c),i.filter(i.REM,(function(e){return(u[e]&n)===a?o[e]:null}))),i.filter(i.SOURCE,(function(e){return c(e._index)}))}});var pL=S().mark(vL);function vL(e,t){var n,r,a,i,o,u,s;return S().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(null!=t){c.next=21;break}n=(0,zt.Z)(e),c.prev=2,n.s();case 4:if((r=n.n()).done){c.next=11;break}if(!(null!=(a=r.value)&&""!==a&&(a=+a)>=a)){c.next=9;break}return c.next=9,a;case 9:c.next=4;break;case 11:c.next=16;break;case 13:c.prev=13,c.t0=c.catch(2),n.e(c.t0);case 16:return c.prev=16,n.f(),c.finish(16);case 19:c.next=41;break;case 21:i=-1,o=(0,zt.Z)(e),c.prev=23,o.s();case 25:if((u=o.n()).done){c.next=33;break}if(s=u.value,!(null!=(s=t(s,++i,e))&&""!==s&&(s=+s)>=s)){c.next=31;break}return c.next=31,s;case 31:c.next=25;break;case 33:c.next=38;break;case 35:c.prev=35,c.t1=c.catch(23),o.e(c.t1);case 38:return c.prev=38,o.f(),c.finish(38);case 41:case"end":return c.stop()}}),pL,null,[[2,13,16,19],[23,35,38,41]])}function gL(e,t,n){var r=Float64Array.from(vL(e,n));return r.sort(pl),t.map((function(e){return wl(r,e)}))}function mL(e,t){return gL(e,[.25,.5,.75],t)}function yL(e,t){var n=e.length,r=dL(e,t),a=mL(e,t),i=(a[2]-a[0])/1.34;return 1.06*(Math.min(r,i)||r||Math.abs(a[0])||1)*Math.pow(n,-.2)}function bL(e){var t,n,r,a,i,o,u=e.maxbins||20,s=e.base||10,c=Math.log(s),l=e.divide||[5,2],f=e.extent[0],h=e.extent[1],d=e.span||h-f||Math.abs(f)||1;if(e.step)t=e.step;else if(e.steps){for(a=d/u,i=0,o=e.steps.length;i<o&&e.steps[i]<a;++i);t=e.steps[Math.max(0,i-1)]}else{for(n=Math.ceil(Math.log(u)/c),r=e.minstep||0,t=Math.max(r,Math.pow(s,Math.round(Math.log(d)/c)-n));Math.ceil(d/t)>u;)t*=s;for(i=0,o=l.length;i<o;++i)(a=t/l[i])>=r&&d/a<=u&&(t=a)}var p=(a=Math.log(t))>=0?0:1+~~(-a/c),v=Math.pow(s,-p-1);return(e.nice||void 0===e.nice)&&(f=f<(a=Math.floor(f/t+v)*t)?a-t:a,h=Math.ceil(h/t)*t),{start:f,stop:h===f?f+t:h,step:t}}var xL=Math.random;function wL(e){xL=e}function kL(e,t,n,r){if(!e.length)return[void 0,void 0];var a,i,o,u,s=Float64Array.from(vL(e,r)),c=s.length,l=t;for(o=0,u=Array(l);o<l;++o){for(a=0,i=0;i<c;++i)a+=s[~~(xL()*c)];u[o]=a/c}return u.sort(pl),[xl(u,n/2),xl(u,1-n/2)]}function _L(e,t,n,r){r=r||function(e){return e};for(var a,i=e.length,o=new Float64Array(i),u=0,s=1,c=r(e[0]),l=c,f=c+t;s<i;++s){if((a=r(e[s]))>=f){for(l=(c+l)/2;u<s;++u)o[u]=l;f=a+t,c=a}l=a}for(l=(c+l)/2;u<s;++u)o[u]=l;return n?function(e,t){var n,r,a=e.length,i=0,o=1;for(;e[i]===e[o];)++o;for(;o<a;){for(n=o+1;e[o]===e[n];)++n;if(e[o]-e[o-1]<t){for(r=o+(i+n-o-o>>1);r<o;)e[r++]=e[o];for(;r>o;)e[r--]=e[i]}i=o,o=n}return e}(o,t+t/4):o}function SL(e){return function(){return(e=(1103515245*e+12345)%2147483647)/2147483647}}function CL(e,t){var n,r,a;null==t&&(t=e,e=0);var i={min:function(e){return arguments.length?(a=r-(n=e||0),i):n},max:function(e){return arguments.length?(a=(r=e||0)-n,i):r},sample:function(){return n+Math.floor(a*xL())},pdf:function(e){return e===Math.floor(e)&&e>=n&&e<r?1/a:0},cdf:function(e){var t=Math.floor(e);return t<n?0:t>=r?1:(t-n+1)/a},icdf:function(e){return e>=0&&e<=1?n-1+Math.floor(e*a):NaN}};return i.min(e).max(t)}var EL=Math.sqrt(2*Math.PI),AL=Math.SQRT2,NL=NaN;function TL(e,t){e=e||0,t=null==t?1:t;var n,r,a=0,i=0;if(NL===NL)a=NL,NL=NaN;else{do{n=(a=2*xL()-1)*a+(i=2*xL()-1)*i}while(0===n||n>1);a*=r=Math.sqrt(-2*Math.log(n)/n),NL=i*r}return e+a*t}function ML(e,t,n){var r=(e-(t||0))/(n=null==n?1:n);return Math.exp(-.5*r*r)/(n*EL)}function DL(e,t,n){var r,a=(e-(t=t||0))/(n=null==n?1:n),i=Math.abs(a);if(i>37)r=0;else{var o=Math.exp(-i*i/2);i<7.07106781186547?(r=o*((((((.0352624965998911*i+.700383064443688)*i+6.37396220353165)*i+33.912866078383)*i+112.079291497871)*i+221.213596169931)*i+220.206867912376),r/=((((((.0883883476483184*i+1.75566716318264)*i+16.064177579207)*i+86.7807322029461)*i+296.564248779674)*i+637.333633378831)*i+793.826512519948)*i+440.413735824752):r=o/(i+1/(i+2/(i+3/(i+4/(i+.65)))))/2.506628274631}return a>0?1-r:r}function FL(e,t,n){return e<0||e>1?NaN:(t||0)+(null==n?1:n)*AL*function(e){var t,n=-Math.log((1-e)*(1+e));t=n<6.25?1.6536545626831027+(t=.24015818242558962+(t=(t=(t=.00018673420803405714+(t=(t=(t=4.2347877827932404e-7+(t=(t=(t=1.0512122733215323e-9+(t=(t=(t=26335093153082323e-28+(t=(t=(t=6637638134358324e-30+(t=20972767875968562e-33+(t=(t=11157877678025181e-33+(t=128584807152564e-32+(t=(t=-364441206401782e-35)*(n-=3.125)-16850591381820166e-35)*n)*n)*n-1333171662854621e-31)*n)*n)*n-4054566272975207e-29)*n-8151934197605472e-29)*n)*n-12975133253453532e-27)*n-5415412054294628e-26)*n)*n-4.112633980346984e-9)*n-2.9070369957882005e-8)*n)*n-13654692000834679e-22)*n-13882523362786469e-21)*n)*n-.000740702534166267)*n-.006033670871430149)*n)*n:n<16?3.0838856104922208+(t=1.0052589676941592+(t=.005370914553590064+(t=(t=.002491442096107851+(t=(t=.0009532893797373805+(t=(t=24031110387097894e-21+(t=6828485145957318e-20+(t=(t=12475304481671779e-21+(t=29234449089955446e-22+(t=(t=15027403968909828e-22+(t=1.8239629214389228e-8+(t=(t=9.075656193888539e-8+(t=2.2137376921775787e-9)*(n=Math.sqrt(n)-3.25))*n-2.7517406297064545e-7)*n)*n)*n-4013867526981546e-21)*n)*n)*n-47318229009055734e-21)*n)*n)*n-.0003550375203628475)*n)*n-.0016882755560235047)*n)*n-.003751208507569241)*n)*n)*n:Number.isFinite(n)?4.849906401408584+(t=1.0103004648645344+(t=(t=(t=7599527703001776e-20+(t=(t=4526062597223154e-21+(t=(t=2.2900482228026655e-7+(t=(t=2.914795345090108e-8+(t=(t=7.61570120807834e-9+(t=(t=1.5076572693500548e-9+(t=(t=-27109920616438573e-27)*(n=Math.sqrt(n)-5)-2.555641816996525e-10)*n)*n-3.789465440126737e-9)*n)*n-1.496002662714924e-8)*n)*n-6.771199775845234e-8)*n)*n-9.9298272942317e-7)*n)*n-1968177810553167e-20)*n)*n-.00021503011930044477)*n-.00013871931833623122)*n)*n:1/0;return t*e}(2*e-1)}function IL(e,t){var n,r,a={mean:function(e){return arguments.length?(n=e||0,a):n},stdev:function(e){return arguments.length?(r=null==e?1:e,a):r},sample:function(){return TL(n,r)},pdf:function(e){return ML(e,n,r)},cdf:function(e){return DL(e,n,r)},icdf:function(e){return FL(e,n,r)}};return a.mean(e).stdev(t)}function OL(e,t){var n=IL(),r=0,a={data:function(n){return arguments.length?(e=n,r=n?n.length:0,a.bandwidth(t)):e},bandwidth:function(n){return arguments.length?(!(t=n)&&e&&(t=yL(e)),a):t},sample:function(){return e[~~(xL()*r)]+t*n.sample()},pdf:function(a){for(var i=0,o=0;o<r;++o)i+=n.pdf((a-e[o])/t);return i/t/r},cdf:function(a){for(var i=0,o=0;o<r;++o)i+=n.cdf((a-e[o])/t);return i/r},icdf:function(){throw Error("KDE icdf not supported.")}};return a.data(e)}function RL(e,t){return e=e||0,t=null==t?1:t,Math.exp(e+TL()*t)}function ZL(e,t,n){if(e<=0)return 0;t=t||0,n=null==n?1:n;var r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*EL*e)}function BL(e,t,n){return DL(Math.log(e),t,n)}function zL(e,t,n){return Math.exp(FL(e,t,n))}function LL(e,t){var n,r,a={mean:function(e){return arguments.length?(n=e||0,a):n},stdev:function(e){return arguments.length?(r=null==e?1:e,a):r},sample:function(){return RL(n,r)},pdf:function(e){return ZL(e,n,r)},cdf:function(e){return BL(e,n,r)},icdf:function(e){return zL(e,n,r)}};return a.mean(e).stdev(t)}function PL(e,t){var n,r=0;function a(e){var t,n=[],a=0;for(t=0;t<r;++t)a+=n[t]=null==e[t]?1:+e[t];for(t=0;t<r;++t)n[t]/=a;return n}var i={weights:function(e){return arguments.length?(n=a(t=e||[]),i):t},distributions:function(n){return arguments.length?(n?(r=n.length,e=n):(r=0,e=[]),i.weights(t)):e},sample:function(){for(var t=xL(),a=e[r-1],i=n[0],o=0;o<r-1;i+=n[++o])if(t<i){a=e[o];break}return a.sample()},pdf:function(t){for(var a=0,i=0;i<r;++i)a+=n[i]*e[i].pdf(t);return a},cdf:function(t){for(var a=0,i=0;i<r;++i)a+=n[i]*e[i].cdf(t);return a},icdf:function(){throw Error("Mixture icdf not supported.")}};return i.distributions(e).weights(t)}function jL(e,t){return null==t&&(t=null==e?1:e,e=0),e+(t-e)*xL()}function UL(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=t&&e<=n?1/(n-t):0}function WL(e,t,n){return null==n&&(n=null==t?1:t,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function VL(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function qL(e,t){var n,r,a={min:function(e){return arguments.length?(n=e||0,a):n},max:function(e){return arguments.length?(r=null==e?1:e,a):r},sample:function(){return jL(n,r)},pdf:function(e){return UL(e,n,r)},cdf:function(e){return WL(e,n,r)},icdf:function(e){return VL(e,n,r)}};return null==t&&(t=null==e?1:e,e=0),a.min(e).max(t)}function HL(e,t,n,r){var a=r-e*e,i=Math.abs(a)<1e-24?0:(n-e*t)/a;return[t-i*e,i]}function GL(e,t,n,r){e=e.filter((function(e){var r=t(e),a=n(e);return null!=r&&(r=+r)>=r&&null!=a&&(a=+a)>=a})),r&&e.sort((function(e,n){return t(e)-t(n)}));var a,i,o,u,s=e.length,c=new Float64Array(s),l=new Float64Array(s),f=0,h=0,d=0,p=(0,zt.Z)(e);try{for(p.s();!(u=p.n()).done;)o=u.value,c[f]=a=+t(o),l[f]=i=+n(o),h+=(a-h)/++f,d+=(i-d)/f}catch(v){p.e(v)}finally{p.f()}for(f=0;f<s;++f)c[f]-=h,l[f]-=d;return[c,l,h,d]}function XL(e,t,n,r){var a,i,o,u=-1,s=(0,zt.Z)(e);try{for(s.s();!(o=s.n()).done;){var c=o.value;a=t(c),i=n(c),null!=a&&(a=+a)>=a&&null!=i&&(i=+i)>=i&&r(a,i,++u)}}catch(l){s.e(l)}finally{s.f()}}function YL(e,t,n,r,a){var i=0,o=0;return XL(e,t,n,(function(e,t){var n=t-a(e),u=t-r;i+=n*n,o+=u*u})),1-i/o}function KL(e,t,n){var r=0,a=0,i=0,o=0,u=0;XL(e,t,n,(function(e,t){++u,r+=(e-r)/u,a+=(t-a)/u,i+=(e*t-i)/u,o+=(e*e-o)/u}));var s=HL(r,a,i,o),c=function(e){return s[0]+s[1]*e};return{coef:s,predict:c,rSquared:YL(e,t,n,a,c)}}function $L(e,t,n){var r=0,a=0,i=0,o=0,u=0;XL(e,t,n,(function(e,t){++u,e=Math.log(e),r+=(e-r)/u,a+=(t-a)/u,i+=(e*t-i)/u,o+=(e*e-o)/u}));var s=HL(r,a,i,o),c=function(e){return s[0]+s[1]*Math.log(e)};return{coef:s,predict:c,rSquared:YL(e,t,n,a,c)}}function QL(e,t,n){var r,a,i,o=GL(e,t,n),u=(0,gc.Z)(o,4),s=u[0],c=(u[1],u[2]),l=u[3],f=0,h=0,d=0,p=0,v=0;XL(e,t,n,(function(e,t){r=s[v++],a=Math.log(t),f+=(t*a-f)/v,h+=((i=r*t)-h)/v,d+=(i*a-d)/v,p+=(r*i-p)/v}));var g=HL(h/l,f/l,d/l,p/l),m=(0,gc.Z)(g,2),y=m[0],b=m[1],x=function(e){return Math.exp(y+b*(e-c))};return{coef:[Math.exp(y-b*c),b],predict:x,rSquared:YL(e,t,n,l,x)}}function JL(e,t,n){var r=0,a=0,i=0,o=0,u=0,s=0;XL(e,t,n,(function(e,t){var n=Math.log(e),c=Math.log(t);++s,r+=(n-r)/s,a+=(c-a)/s,i+=(n*c-i)/s,o+=(n*n-o)/s,u+=(t-u)/s}));var c=HL(r,a,i,o),l=function(e){return c[0]*Math.pow(e,c[1])};return c[0]=Math.exp(c[0]),{coef:c,predict:l,rSquared:YL(e,t,n,u,l)}}function eP(e,t,n){var r,a,i,o,u=GL(e,t,n),s=(0,gc.Z)(u,4),c=s[0],l=s[1],f=s[2],h=s[3],d=c.length,p=0,v=0,g=0,m=0,y=0;for(r=0;r<d;)a=c[r],i=l[r++],p+=((o=a*a)-p)/r,v+=(o*a-v)/r,g+=(o*o-g)/r,m+=(a*i-m)/r,y+=(o*i-y)/r;var b=g-p*p,x=p*b-v*v,w=(y*p-m*v)/x,k=(m*b-y*v)/x,_=-w*p,S=function(e){return w*(e-=f)*e+k*e+_+h};return{coef:[_-k*f+w*f*f+h,k-2*w*f,w],predict:S,rSquared:YL(e,t,n,h,S)}}function tP(e,t,n,r){if(1===r)return KL(e,t,n);if(2===r)return eP(e,t,n);var a,i,o,u,s,c=GL(e,t,n),l=(0,gc.Z)(c,4),f=l[0],h=l[1],d=l[2],p=l[3],v=f.length,g=[],m=[],y=r+1;for(a=0;a<y;++a){for(o=0,u=0;o<v;++o)u+=Math.pow(f[o],a)*h[o];for(g.push(u),s=new Float64Array(y),i=0;i<y;++i){for(o=0,u=0;o<v;++o)u+=Math.pow(f[o],a+i);s[i]=u}m.push(s)}m.push(g);var b=function(e){var t,n,r,a,i,o=e.length-1,u=[];for(t=0;t<o;++t){for(a=t,n=t+1;n<o;++n)Math.abs(e[t][n])>Math.abs(e[t][a])&&(a=n);for(r=t;r<o+1;++r)i=e[r][t],e[r][t]=e[r][a],e[r][a]=i;for(n=t+1;n<o;++n)for(r=o;r>=t;r--)e[r][n]-=e[r][t]*e[t][n]/e[t][t]}for(n=o-1;n>=0;--n){for(i=0,r=n+1;r<o;++r)i+=e[r][n]*u[r];u[n]=(e[o][n]-i)/e[n][n]}return u}(m),x=function(e){e-=d;var t=p+b[0]+b[1]*e+b[2]*e*e;for(a=3;a<y;++a)t+=b[a]*Math.pow(e,a);return t};return{coef:nP(y,b,-d,p),predict:x,rSquared:YL(e,t,n,p,x)}}function nP(e,t,n,r){var a,i,o,u,s=Array(e);for(a=0;a<e;++a)s[a]=0;for(a=e-1;a>=0;--a)for(o=t[a],u=1,s[a]+=o,i=1;i<=a;++i)u*=(a+1-i)/i,s[a-i]+=o*Math.pow(n,i)*u;return s[0]+=r,s}function rP(e,t,n,r){for(var a=GL(e,t,n,!0),i=(0,gc.Z)(a,4),o=i[0],u=i[1],s=i[2],c=i[3],l=o.length,f=Math.max(2,~~(r*l)),h=new Float64Array(l),d=new Float64Array(l),p=new Float64Array(l).fill(1),v=-1;++v<=2;){for(var g=[0,f-1],m=0;m<l;++m){for(var y=o[m],b=g[0],x=g[1],w=y-o[b]>o[x]-y?b:x,k=0,_=0,S=0,C=0,E=0,A=1/Math.abs(o[w]-y||1),N=b;N<=x;++N){var T=o[N],M=u[N],D=aP(Math.abs(y-T)*A)*p[N],F=T*D;k+=D,_+=F,S+=M*D,C+=M*F,E+=T*F}var I=HL(_/k,S/k,C/k,E/k),O=(0,gc.Z)(I,2),R=O[0],Z=O[1];h[m]=R+Z*y,d[m]=Math.abs(u[m]-h[m]),iP(o,m+1,g)}if(2===v)break;var B=kl(d);if(Math.abs(B)<1e-12)break;for(var z,L,P=0;P<l;++P)z=d[P]/(6*B),p[P]=z>=1?1e-12:(L=1-z*z)*L}return function(e,t,n,r){for(var a,i=e.length,o=[],u=0,s=0,c=[];u<i;++u)a=e[u]+n,c[0]===a?c[1]+=(t[u]-c[1])/++s:(s=0,c[1]+=r,c=[a,t[u]],o.push(c));return c[1]+=r,o}(o,h,s,c)}function aP(e){return(e=1-e*e*e)*e*e}function iP(e,t,n){var r=e[t],a=n[0],i=n[1]+1;if(!(i>=e.length))for(;t>a&&e[i]-r<=r-e[a];)n[0]=++a,n[1]=i,++i}var oP=.5*Math.PI/180;function uP(e,t,n,r){n=n||25,r=Math.max(n,r||200);var a=function(t){return[t,e(t)]},i=t[0],o=t[1],u=o-i,s=u/r,c=[a(i)],l=[];if(n===r){for(var f=1;f<r;++f)c.push(a(i+f/n*u));return c.push(a(o)),c}l.push(a(o));for(var h=n;--h>0;)l.push(a(i+h/n*u));for(var d=c[0],p=l[l.length-1],v=1/u,g=function(e,t){for(var n=e,r=e,a=t.length,i=0;i<a;++i){var o=t[i][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}(d[1],l);p;){var m=a((d[0]+p[0])/2);m[0]-d[0]>=s&&sP(d,m,p,v,g)>oP?l.push(m):(d=p,c.push(p),l.pop()),p=l[l.length-1]}return c}function sP(e,t,n,r,a){var i=Math.atan2(a*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(a*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(i-o)}function cP(e,t,n){return e.fields=t||[],e.fname=n,e}function lP(e){return 1===e.length?fP(e[0]):hP(e)}var fP=function(e){return function(t){return t[e]}},hP=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function dP(e){throw Error(e)}function pP(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n++),t=n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&c(),u=t=n+1):"]"===r&&(u||dP("Access path missing open bracket: "+e),u>0&&c(),u=0,t=n+1):n>t?c():t=n+1}return u&&dP("Access path missing closing bracket: "+e),o&&dP("Access path missing closing quote: "+e),n>t&&(n++,c()),a}function vP(e,t,n){var r=pP(e);return e=1===r.length?r[0]:e,cP((n&&n.get||lP)(r),[e],t||e)}vP("id"),cP((function(e){return e}),[],"identity");var gP=cP((function(){return 0}),[],"zero"),mP=cP((function(){return 1}),[],"one");cP((function(){return!0}),[],"true"),cP((function(){return!1}),[],"false");var yP=Array.isArray;function bP(e){return e[e.length-1]}function xP(e){return null!=e?yP(e)?e:[e]:[]}function wP(e){return"function"===typeof e}function kP(e){for(var t,n,r=1,a=arguments.length;r<a;++r)for(n in t=arguments[r])e[n]=t[n];return e}var _P=Object.prototype.hasOwnProperty;function SP(e,t){return _P.call(e,t)}var CP=new Date,EP=new Date;function AP(e,t,n,r){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=function(t){return e(t=new Date(+t)),t},a.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},a.round=function(e){var t=a(e),n=a.ceil(e);return e-t<n-e?t:n},a.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},a.range=function(n,r,i){var o,u=[];if(n=a.ceil(n),i=null==i?1:Math.floor(i),!(n<r)||!(i>0))return u;do{u.push(o=new Date(+n)),t(n,i),e(n)}while(o<n&&n<r);return u},a.filter=function(n){return AP((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(a.count=function(t,r){return CP.setTime(+t),EP.setTime(+r),e(CP),e(EP),Math.floor(n(CP,EP))},a.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(r?function(t){return r(t)%e===0}:function(t){return a.count(0,t)%e===0}):a:null}),a}var NP=1e3,TP=6e4,MP=36e5,DP=864e5,FP=6048e5,IP=2592e6,OP=31536e6,RP=AP((function(e){return e.setHours(0,0,0,0)}),(function(e,t){return e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*TP)/DP}),(function(e){return e.getDate()-1})),ZP=RP;RP.range;function BP(e){return AP((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*TP)/FP}))}var zP=BP(0),LP=BP(1),PP=BP(2),jP=BP(3),UP=BP(4),WP=BP(5),VP=BP(6),qP=(zP.range,LP.range,PP.range,jP.range,UP.range,WP.range,VP.range,AP((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/DP}),(function(e){return e.getUTCDate()-1}))),HP=qP;qP.range;function GP(e){return AP((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/FP}))}var XP=GP(0),YP=GP(1),KP=GP(2),$P=GP(3),QP=GP(4),JP=GP(5),ej=GP(6),tj=(XP.range,YP.range,KP.range,$P.range,QP.range,JP.range,ej.range,AP((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()})));tj.every=function(e){return isFinite(e=Math.floor(e))&&e>0?AP((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};var nj=tj,rj=(tj.range,AP((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}))),aj=rj,ij=(rj.range,AP((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*NP-e.getMinutes()*TP)}),(function(e,t){e.setTime(+e+t*MP)}),(function(e,t){return(t-e)/MP}),(function(e){return e.getHours()}))),oj=ij,uj=(ij.range,AP((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*NP)}),(function(e,t){e.setTime(+e+t*TP)}),(function(e,t){return(t-e)/TP}),(function(e){return e.getMinutes()}))),sj=uj,cj=(uj.range,AP((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*NP)}),(function(e,t){return(t-e)/NP}),(function(e){return e.getUTCSeconds()}))),lj=cj,fj=(cj.range,AP((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e})));fj.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?AP((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):fj:null};var hj=fj,dj=(fj.range,AP((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()})));dj.every=function(e){return isFinite(e=Math.floor(e))&&e>0?AP((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};var pj,vj,gj,mj,yj,bj,xj,wj=dj,kj=(dj.range,AP((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()}))),_j=kj,Sj=(kj.range,AP((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*MP)}),(function(e,t){return(t-e)/MP}),(function(e){return e.getUTCHours()}))),Cj=Sj,Ej=(Sj.range,AP((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*TP)}),(function(e,t){return(t-e)/TP}),(function(e){return e.getUTCMinutes()}))),Aj=Ej,Nj=(Ej.range,"year"),Tj="quarter",Mj="month",Dj="week",Fj="date",Ij="day",Oj="dayofyear",Rj="hours",Zj="minutes",Bj="seconds",zj="milliseconds",Lj=[Nj,Tj,Mj,Dj,Fj,Ij,Oj,Rj,Zj,Bj,zj],Pj=Lj.reduce((function(e,t,n){return e[t]=1+n,e}),{});function jj(e){var t=xP(e).slice(),n={};return t.length||dP("Missing time unit."),t.forEach((function(e){SP(Pj,e)?n[e]=1:dP("Invalid time unit: ".concat(e,"."))})),(n[Dj]||n[Ij]?1:0)+(n[Tj]||n[Mj]||n[Fj]?1:0)+(n[Oj]?1:0)>1&&dP("Incompatible time units: ".concat(e)),t.sort((function(e,t){return Pj[e]-Pj[t]})),t}var Uj=(pj={},(0,Ir.Z)(pj,Nj,"%Y "),(0,Ir.Z)(pj,Tj,"Q%q "),(0,Ir.Z)(pj,Mj,"%b "),(0,Ir.Z)(pj,Fj,"%d "),(0,Ir.Z)(pj,Dj,"W%U "),(0,Ir.Z)(pj,Ij,"%a "),(0,Ir.Z)(pj,Oj,"%j "),(0,Ir.Z)(pj,Rj,"%H:00"),(0,Ir.Z)(pj,Zj,"00:%M"),(0,Ir.Z)(pj,Bj,":%S"),(0,Ir.Z)(pj,zj,".%L"),(0,Ir.Z)(pj,"".concat(Nj,"-").concat(Mj),"%Y-%m "),(0,Ir.Z)(pj,"".concat(Nj,"-").concat(Mj,"-").concat(Fj),"%Y-%m-%d "),(0,Ir.Z)(pj,"".concat(Rj,"-").concat(Zj),"%H:%M"),pj);function Wj(e,t){var n,r,a=kP({},Uj,t),i=jj(e),o=i.length,u="",s=0;for(s=0;s<o;)for(n=i.length;n>s;--n)if(null!=a[r=i.slice(s,n).join("-")]){u+=a[r],s=n;break}return u.trim()}var Vj=new Date;function qj(e){return Vj.setFullYear(e),Vj.setMonth(0),Vj.setDate(1),Vj.setHours(0,0,0,0),Vj}function Hj(e){return Xj(new Date(e))}function Gj(e){return Yj(new Date(e))}function Xj(e){return ZP.count(qj(e.getFullYear())-1,e)}function Yj(e){return zP.count(qj(e.getFullYear())-1,e)}function Kj(e){return qj(e).getDay()}function $j(e,t,n,r,a,i,o){if(0<=e&&e<100){var u=new Date(-1,t,n,r,a,i,o);return u.setFullYear(e),u}return new Date(e,t,n,r,a,i,o)}function Qj(e){return eU(new Date(e))}function Jj(e){return tU(new Date(e))}function eU(e){var t=Date.UTC(e.getUTCFullYear(),0,1);return HP.count(t-1,e)}function tU(e){var t=Date.UTC(e.getUTCFullYear(),0,1);return XP.count(t-1,e)}function nU(e){return Vj.setTime(Date.UTC(e,0,1)),Vj.getUTCDay()}function rU(e,t,n,r,a,i,o){if(0<=e&&e<100){var u=new Date(Date.UTC(-1,t,n,r,a,i,o));return u.setUTCFullYear(n.y),u}return new Date(Date.UTC(e,t,n,r,a,i,o))}function aU(e,t,n,r,a){var i=t||1,o=bP(e),u=function(e,t,a){return function(e,t,n,r){var a=n<=1?e:r?function(t,a){return r+n*Math.floor((e(t,a)-r)/n)}:function(t,r){return n*Math.floor(e(t,r)/n)};return t?function(e,n){return t(a(e,n),n)}:a}(n[a=a||e],r[a],e===o&&i,t)},s=new Date,c=function(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return t}(e),l=c[Nj]?u(Nj):function(e){return wP(e)?e:function(){return e}}(2012),f=c[Mj]?u(Mj):c[Tj]?u(Tj):gP,h=c[Dj]&&c[Ij]?u(Ij,1,Dj+Ij):c[Dj]?u(Dj,1):c[Ij]?u(Ij,1):c[Fj]?u(Fj,1):c[Oj]?u(Oj,1):mP,d=c[Rj]?u(Rj):gP,p=c[Zj]?u(Zj):gP,v=c[Bj]?u(Bj):gP,g=c[zj]?u(zj):gP;return function(e){s.setTime(+e);var t=l(s);return a(t,f(s),h(s,t),d(s),p(s),v(s),g(s))}}function iU(e,t,n){return t+7*e-(n+6)%7}var oU=(vj={},(0,Ir.Z)(vj,Nj,(function(e){return e.getFullYear()})),(0,Ir.Z)(vj,Tj,(function(e){return Math.floor(e.getMonth()/3)})),(0,Ir.Z)(vj,Mj,(function(e){return e.getMonth()})),(0,Ir.Z)(vj,Fj,(function(e){return e.getDate()})),(0,Ir.Z)(vj,Rj,(function(e){return e.getHours()})),(0,Ir.Z)(vj,Zj,(function(e){return e.getMinutes()})),(0,Ir.Z)(vj,Bj,(function(e){return e.getSeconds()})),(0,Ir.Z)(vj,zj,(function(e){return e.getMilliseconds()})),(0,Ir.Z)(vj,Oj,(function(e){return Xj(e)})),(0,Ir.Z)(vj,Dj,(function(e){return Yj(e)})),(0,Ir.Z)(vj,Dj+Ij,(function(e,t){return iU(Yj(e),e.getDay(),Kj(t))})),(0,Ir.Z)(vj,Ij,(function(e,t){return iU(1,e.getDay(),Kj(t))})),vj),uU=(gj={},(0,Ir.Z)(gj,Tj,(function(e){return 3*e})),(0,Ir.Z)(gj,Dj,(function(e,t){return iU(e,0,Kj(t))})),gj);function sU(e,t){return aU(e,t||1,oU,uU,$j)}var cU=(mj={},(0,Ir.Z)(mj,Nj,(function(e){return e.getUTCFullYear()})),(0,Ir.Z)(mj,Tj,(function(e){return Math.floor(e.getUTCMonth()/3)})),(0,Ir.Z)(mj,Mj,(function(e){return e.getUTCMonth()})),(0,Ir.Z)(mj,Fj,(function(e){return e.getUTCDate()})),(0,Ir.Z)(mj,Rj,(function(e){return e.getUTCHours()})),(0,Ir.Z)(mj,Zj,(function(e){return e.getUTCMinutes()})),(0,Ir.Z)(mj,Bj,(function(e){return e.getUTCSeconds()})),(0,Ir.Z)(mj,zj,(function(e){return e.getUTCMilliseconds()})),(0,Ir.Z)(mj,Oj,(function(e){return eU(e)})),(0,Ir.Z)(mj,Dj,(function(e){return tU(e)})),(0,Ir.Z)(mj,Ij,(function(e,t){return iU(1,e.getUTCDay(),nU(t))})),(0,Ir.Z)(mj,Dj+Ij,(function(e,t){return iU(tU(e),e.getUTCDay(),nU(t))})),mj),lU=(yj={},(0,Ir.Z)(yj,Tj,(function(e){return 3*e})),(0,Ir.Z)(yj,Dj,(function(e,t){return iU(e,0,nU(t))})),yj);function fU(e,t){return aU(e,t||1,cU,lU,rU)}var hU=(bj={},(0,Ir.Z)(bj,Nj,nj),(0,Ir.Z)(bj,Tj,aj.every(3)),(0,Ir.Z)(bj,Mj,aj),(0,Ir.Z)(bj,Dj,zP),(0,Ir.Z)(bj,Fj,ZP),(0,Ir.Z)(bj,Ij,ZP),(0,Ir.Z)(bj,Oj,ZP),(0,Ir.Z)(bj,Rj,oj),(0,Ir.Z)(bj,Zj,sj),(0,Ir.Z)(bj,Bj,lj),(0,Ir.Z)(bj,zj,hj),bj),dU=(xj={},(0,Ir.Z)(xj,Nj,wj),(0,Ir.Z)(xj,Tj,_j.every(3)),(0,Ir.Z)(xj,Mj,_j),(0,Ir.Z)(xj,Dj,XP),(0,Ir.Z)(xj,Fj,HP),(0,Ir.Z)(xj,Ij,HP),(0,Ir.Z)(xj,Oj,HP),(0,Ir.Z)(xj,Rj,Cj),(0,Ir.Z)(xj,Zj,Aj),(0,Ir.Z)(xj,Bj,lj),(0,Ir.Z)(xj,zj,hj),xj);function pU(e){return hU[e]}function vU(e){return dU[e]}function gU(e,t,n){return e?e.offset(t,n):void 0}function mU(e,t,n){return gU(pU(e),t,n)}function yU(e,t,n){return gU(vU(e),t,n)}function bU(e,t,n,r){return e?e.range(t,n,r):void 0}function xU(e,t,n,r){return bU(pU(e),t,n,r)}function wU(e,t,n,r){return bU(vU(e),t,n,r)}var kU=1e3,_U=6e4,SU=36e5,CU=864e5,EU=2592e6,AU=31536e6,NU=[Nj,Mj,Fj,Rj,Zj,Bj,zj],TU=NU.slice(0,-1),MU=TU.slice(0,-1),DU=MU.slice(0,-1),FU=DU.slice(0,-1),IU=[Nj,Mj],OU=[Nj],RU=[[TU,1,kU],[TU,5,5e3],[TU,15,15e3],[TU,30,3e4],[MU,1,_U],[MU,5,3e5],[MU,15,9e5],[MU,30,18e5],[DU,1,SU],[DU,3,108e5],[DU,6,216e5],[DU,12,432e5],[FU,1,CU],[[Nj,Dj],1,6048e5],[IU,1,EU],[IU,3,7776e6],[OU,1,AU]];function ZU(e){var t,n,r=e.extent,a=e.maxbins||40,i=Math.abs(function(e){return e&&bP(e)-e[0]||0}(r))/a,o=Sl((function(e){return e[2]})).right(RU,i);return o===RU.length?(t=OU,n=GT(r[0]/AU,r[1]/AU,a)):o?(t=(o=RU[i/RU[o-1][2]<RU[o][2]/i?o-1:o])[0],n=o[1]):(t=NU,n=Math.max(GT(r[0],r[1],a),1)),{units:t,step:n}}function BU(e,t,n){return e.fields=t||[],e.fname=n,e}function zU(e){return 1===e.length?LU(e[0]):PU(e)}var LU=function(e){return function(t){return t[e]}},PU=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function jU(e){throw Error(e)}function UU(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n++),t=n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&c(),u=t=n+1):"]"===r&&(u||jU("Access path missing open bracket: "+e),u>0&&c(),u=0,t=n+1):n>t?c():t=n+1}return u&&jU("Access path missing closing bracket: "+e),o&&jU("Access path missing closing quote: "+e),n>t&&(n++,c()),a}function WU(e,t,n){var r=UU(e);return e=1===r.length?r[0]:e,BU((n&&n.get||zU)(r),[e],t||e)}WU("id");var VU=BU((function(e){return e}),[],"identity");BU((function(){return 0}),[],"zero"),BU((function(){return 1}),[],"one"),BU((function(){return!0}),[],"true"),BU((function(){return!1}),[],"false");var qU=Array.isArray;function HU(e){return e===Object(e)}function GU(e){return null==e||""===e?null:+e}function XU(e){return"function"===typeof e}function YU(e){for(var t,n,r=1,a=arguments.length;r<a;++r)for(n in t=arguments[r])e[n]=t[n];return e}var KU=Object.prototype.hasOwnProperty;function $U(e,t){return KU.call(e,t)}function QU(e){return"string"===typeof e}function JU(e){return qU(e)?"["+e.map(JU)+"]":HU(e)||QU(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}var eW=function(e){return function(e){return"number"===typeof e}(e)||function(e){return"[object Date]"===Object.prototype.toString.call(e)}(e)?e:Date.parse(e)};var tW={},nW={};function rW(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function aW(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function iW(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function oW(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),a=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":function(e){return e<0?"-"+iW(-e,6):e>9999?"+"+iW(e,6):iW(e,4)}(e.getUTCFullYear())+"-"+iW(e.getUTCMonth()+1,2)+"-"+iW(e.getUTCDate(),2)+(a?"T"+iW(t,2)+":"+iW(n,2)+":"+iW(r,2)+"."+iW(a,3)+"Z":r?"T"+iW(t,2)+":"+iW(n,2)+":"+iW(r,2)+"Z":n||t?"T"+iW(t,2)+":"+iW(n,2)+"Z":"")}function uW(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,a=[],i=e.length,o=0,u=0,s=i<=0,c=!1;function l(){if(s)return nW;if(c)return c=!1,tW;var t,r,a=o;if(34===e.charCodeAt(a)){for(;o++<i&&34!==e.charCodeAt(o)||34===e.charCodeAt(++o););return(t=o)>=i?s=!0:10===(r=e.charCodeAt(o++))?c=!0:13===r&&(c=!0,10===e.charCodeAt(o)&&++o),e.slice(a+1,t-1).replace(/""/g,'"')}for(;o<i;){if(10===(r=e.charCodeAt(t=o++)))c=!0;else if(13===r)c=!0,10===e.charCodeAt(o)&&++o;else if(r!==n)continue;return e.slice(a,t)}return s=!0,e.slice(a,i)}for(10===e.charCodeAt(i-1)&&--i,13===e.charCodeAt(i-1)&&--i;(r=l())!==nW;){for(var f=[];r!==tW&&r!==nW;)f.push(r),r=l();t&&null==(f=t(f,u++))||a.push(f)}return a}function a(t,n){return t.map((function(t){return n.map((function(e){return o(t[e])})).join(e)}))}function i(t){return t.map(o).join(e)}function o(e){return null==e?"":e instanceof Date?oW(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,a,i=r(e,(function(e,r){if(n)return n(e,r-1);a=e,n=t?function(e,t){var n=rW(e);return function(r,a){return t(n(r),a,e)}}(e,t):rW(e)}));return i.columns=a||[],i},parseRows:r,format:function(t,n){return null==n&&(n=aW(t)),[n.map(o).join(e)].concat(a(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=aW(e)),a(e,t).join("\n")},formatRows:function(e){return e.map(i).join("\n")},formatRow:i,formatValue:o}}var sW=Math.sqrt(50),cW=Math.sqrt(10),lW=Math.sqrt(2);function fW(e,t,n){var r,a,i,o=(t-e)/Math.max(0,n),u=Math.floor(Math.log10(o)),s=o/Math.pow(10,u),c=s>=sW?10:s>=cW?5:s>=lW?2:1;return u<0?(i=Math.pow(10,-u)/c,(r=Math.round(e*i))/i<e&&++r,(a=Math.round(t*i))/i>t&&--a,i=-i):(i=Math.pow(10,u)*c,(r=Math.round(e/i))*i<e&&++r,(a=Math.round(t/i))*i>t&&--a),a<r&&.5<=n&&n<2?fW(e,t,2*n):[r,a,i]}function hW(e,t,n){return fW(e=+e,t=+t,n=+n)[2]}var dW,pW=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vW(e){if(!(t=pW.exec(e)))throw new Error("invalid format: "+e);var t;return new gW({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function gW(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function mW(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function yW(e){return(e=mW(Math.abs(e)))?e[1]:NaN}function bW(e,t){var n=mW(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}vW.prototype=gW.prototype,gW.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var xW={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return bW(100*e,t)},r:bW,s:function(e,t){var n=mW(e,t);if(!n)return e+"";var r=n[0],a=n[1],i=a-(dW=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+mW(e,Math.max(0,t+i-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function wW(e){return e}var kW,_W,SW,CW=Array.prototype.map,EW=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function AW(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?wW:(t=CW.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var a=e.length,i=[],o=0,u=t[0],s=0;a>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),i.push(e.substring(a-=u,a+u)),!((s+=u+1)>r));)u=t[o=(o+1)%t.length];return i.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",u=void 0===e.numerals?wW:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(CW.call(e.numerals,String)),s=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",l=void 0===e.nan?"NaN":e.nan+"";function f(e){var t=(e=vW(e)).fill,n=e.align,f=e.sign,h=e.symbol,d=e.zero,p=e.width,v=e.comma,g=e.precision,m=e.trim,y=e.type;"n"===y?(v=!0,y="g"):xW[y]||(void 0===g&&(g=12),m=!0,y="g"),(d||"0"===t&&"="===n)&&(d=!0,t="0",n="=");var b="$"===h?a:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===h?i:/[%p]/.test(y)?s:"",w=xW[y],k=/[defgprs%]/.test(y);function _(e){var a,i,s,h=b,_=x;if("c"===y)_=w(e)+_,e="";else{var S=(e=+e)<0||1/e<0;if(e=isNaN(e)?l:w(Math.abs(e),g),m&&(e=function(e){e:for(var t,n=e.length,r=1,a=-1;r<n;++r)switch(e[r]){case".":a=t=r;break;case"0":0===a&&(a=r),t=r;break;default:if(!+e[r])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),S&&0===+e&&"+"!==f&&(S=!1),h=(S?"("===f?f:c:"-"===f||"("===f?"":f)+h,_=("s"===y?EW[8+dW/3]:"")+_+(S&&"("===f?")":""),k)for(a=-1,i=e.length;++a<i;)if(48>(s=e.charCodeAt(a))||s>57){_=(46===s?o+e.slice(a+1):e.slice(a))+_,e=e.slice(0,a);break}}v&&!d&&(e=r(e,1/0));var C=h.length+e.length+_.length,E=C<p?new Array(p-C+1).join(t):"";switch(v&&d&&(e=r(E+e,E.length?p-_.length:1/0),E=""),n){case"<":e=h+e+_+E;break;case"=":e=h+E+e+_;break;case"^":e=E.slice(0,C=E.length>>1)+h+e+_+E.slice(C);break;default:e=E+h+e+_}return u(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),_.toString=function(){return e+""},_}return{format:f,formatPrefix:function(e,t){var n=f(((e=vW(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(yW(t)/3))),a=Math.pow(10,-r),i=EW[8+r/3];return function(e){return n(a*e)+i}}}}!function(e){kW=AW(e),_W=kW.format,SW=kW.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});var NW=new Date,TW=new Date;function MW(e,t,n,r){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=function(t){return e(t=new Date(+t)),t},a.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},a.round=function(e){var t=a(e),n=a.ceil(e);return e-t<n-e?t:n},a.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},a.range=function(n,r,i){var o,u=[];if(n=a.ceil(n),i=null==i?1:Math.floor(i),!(n<r)||!(i>0))return u;do{u.push(o=new Date(+n)),t(n,i),e(n)}while(o<n&&n<r);return u},a.filter=function(n){return MW((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(a.count=function(t,r){return NW.setTime(+t),TW.setTime(+r),e(NW),e(TW),Math.floor(n(NW,TW))},a.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(r?function(t){return r(t)%e===0}:function(t){return a.count(0,t)%e===0}):a:null}),a}var DW=1e3,FW=6e4,IW=36e5,OW=864e5,RW=6048e5,ZW=MW((function(e){return e.setHours(0,0,0,0)}),(function(e,t){return e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*FW)/OW}),(function(e){return e.getDate()-1})),BW=(ZW.range,MW((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/OW}),(function(e){return e.getUTCDate()-1}))),zW=(BW.range,MW((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/OW}),(function(e){return Math.floor(e/OW)})));zW.range;function LW(e){return MW((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*FW)/RW}))}var PW=LW(0),jW=LW(1),UW=LW(2),WW=LW(3),VW=LW(4),qW=LW(5),HW=LW(6);PW.range,jW.range,UW.range,WW.range,VW.range,qW.range,HW.range;function GW(e){return MW((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/RW}))}var XW=GW(0),YW=GW(1),KW=GW(2),$W=GW(3),QW=GW(4),JW=GW(5),eV=GW(6),tV=(XW.range,YW.range,KW.range,$W.range,QW.range,JW.range,eV.range,MW((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()})));tV.every=function(e){return isFinite(e=Math.floor(e))&&e>0?MW((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};tV.range;var nV=MW((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));nV.every=function(e){return isFinite(e=Math.floor(e))&&e>0?MW((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};nV.range;var rV=MW((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()})),aV=(rV.range,MW((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()}))),iV=(aV.range,MW((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*DW-e.getMinutes()*FW)}),(function(e,t){e.setTime(+e+t*IW)}),(function(e,t){return(t-e)/IW}),(function(e){return e.getHours()}))),oV=(iV.range,MW((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*IW)}),(function(e,t){return(t-e)/IW}),(function(e){return e.getUTCHours()}))),uV=(oV.range,MW((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*DW)}),(function(e,t){e.setTime(+e+t*FW)}),(function(e,t){return(t-e)/FW}),(function(e){return e.getMinutes()}))),sV=(uV.range,MW((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*FW)}),(function(e,t){return(t-e)/FW}),(function(e){return e.getUTCMinutes()}))),cV=(sV.range,MW((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*DW)}),(function(e,t){return(t-e)/DW}),(function(e){return e.getUTCSeconds()}))),lV=(cV.range,MW((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e})));lV.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?MW((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):lV:null};lV.range;var fV,hV,dV,pV,vV,gV,mV,yV="year",bV="quarter",xV="month",wV="week",kV="date",_V="day",SV="dayofyear",CV="hours",EV="minutes",AV="seconds",NV="milliseconds";[yV,bV,xV,wV,kV,_V,SV,CV,EV,AV,NV].reduce((function(e,t,n){return e[t]=1+n,e}),{});fV={},(0,Ir.Z)(fV,yV,"%Y "),(0,Ir.Z)(fV,bV,"Q%q "),(0,Ir.Z)(fV,xV,"%b "),(0,Ir.Z)(fV,kV,"%d "),(0,Ir.Z)(fV,wV,"W%U "),(0,Ir.Z)(fV,_V,"%a "),(0,Ir.Z)(fV,SV,"%j "),(0,Ir.Z)(fV,CV,"%H:00"),(0,Ir.Z)(fV,EV,"00:%M"),(0,Ir.Z)(fV,AV,":%S"),(0,Ir.Z)(fV,NV,".%L"),(0,Ir.Z)(fV,"".concat(yV,"-").concat(xV),"%Y-%m "),(0,Ir.Z)(fV,"".concat(yV,"-").concat(xV,"-").concat(kV),"%Y-%m-%d "),(0,Ir.Z)(fV,"".concat(CV,"-").concat(EV),"%H:%M");var TV=new Date;function MV(e){return TV.setFullYear(e),TV.setMonth(0),TV.setDate(1),TV.setHours(0,0,0,0),TV}function DV(e){return ZW.count(MV(e.getFullYear())-1,e)}function FV(e){return PW.count(MV(e.getFullYear())-1,e)}function IV(e){return MV(e).getDay()}function OV(e){var t=Date.UTC(e.getUTCFullYear(),0,1);return BW.count(t-1,e)}function RV(e){var t=Date.UTC(e.getUTCFullYear(),0,1);return XW.count(t-1,e)}function ZV(e){return TV.setTime(Date.UTC(e,0,1)),TV.getUTCDay()}function BV(e,t,n){return t+7*e-(n+6)%7}hV={},(0,Ir.Z)(hV,yV,(function(e){return e.getFullYear()})),(0,Ir.Z)(hV,bV,(function(e){return Math.floor(e.getMonth()/3)})),(0,Ir.Z)(hV,xV,(function(e){return e.getMonth()})),(0,Ir.Z)(hV,kV,(function(e){return e.getDate()})),(0,Ir.Z)(hV,CV,(function(e){return e.getHours()})),(0,Ir.Z)(hV,EV,(function(e){return e.getMinutes()})),(0,Ir.Z)(hV,AV,(function(e){return e.getSeconds()})),(0,Ir.Z)(hV,NV,(function(e){return e.getMilliseconds()})),(0,Ir.Z)(hV,SV,(function(e){return DV(e)})),(0,Ir.Z)(hV,wV,(function(e){return FV(e)})),(0,Ir.Z)(hV,"weekday",(function(e,t){return BV(FV(e),e.getDay(),IV(t))})),(0,Ir.Z)(hV,_V,(function(e,t){return BV(1,e.getDay(),IV(t))})),dV={},(0,Ir.Z)(dV,bV,(function(e){return 3*e})),(0,Ir.Z)(dV,wV,(function(e,t){return BV(e,0,IV(t))}));pV={},(0,Ir.Z)(pV,yV,(function(e){return e.getUTCFullYear()})),(0,Ir.Z)(pV,bV,(function(e){return Math.floor(e.getUTCMonth()/3)})),(0,Ir.Z)(pV,xV,(function(e){return e.getUTCMonth()})),(0,Ir.Z)(pV,kV,(function(e){return e.getUTCDate()})),(0,Ir.Z)(pV,CV,(function(e){return e.getUTCHours()})),(0,Ir.Z)(pV,EV,(function(e){return e.getUTCMinutes()})),(0,Ir.Z)(pV,AV,(function(e){return e.getUTCSeconds()})),(0,Ir.Z)(pV,NV,(function(e){return e.getUTCMilliseconds()})),(0,Ir.Z)(pV,SV,(function(e){return OV(e)})),(0,Ir.Z)(pV,wV,(function(e){return RV(e)})),(0,Ir.Z)(pV,_V,(function(e,t){return BV(1,e.getUTCDay(),ZV(t))})),(0,Ir.Z)(pV,"weekday",(function(e,t){return BV(RV(e),e.getUTCDay(),ZV(t))})),vV={},(0,Ir.Z)(vV,bV,(function(e){return 3*e})),(0,Ir.Z)(vV,wV,(function(e,t){return BV(e,0,ZV(t))}));var zV=(gV={},(0,Ir.Z)(gV,yV,tV),(0,Ir.Z)(gV,bV,rV.every(3)),(0,Ir.Z)(gV,xV,rV),(0,Ir.Z)(gV,wV,PW),(0,Ir.Z)(gV,kV,ZW),(0,Ir.Z)(gV,_V,ZW),(0,Ir.Z)(gV,SV,ZW),(0,Ir.Z)(gV,CV,iV),(0,Ir.Z)(gV,EV,uV),(0,Ir.Z)(gV,AV,cV),(0,Ir.Z)(gV,NV,lV),gV),LV=(mV={},(0,Ir.Z)(mV,yV,nV),(0,Ir.Z)(mV,bV,aV.every(3)),(0,Ir.Z)(mV,xV,aV),(0,Ir.Z)(mV,wV,XW),(0,Ir.Z)(mV,kV,BW),(0,Ir.Z)(mV,_V,BW),(0,Ir.Z)(mV,SV,BW),(0,Ir.Z)(mV,CV,oV),(0,Ir.Z)(mV,EV,sV),(0,Ir.Z)(mV,AV,cV),(0,Ir.Z)(mV,NV,lV),mV);function PV(e){return zV[e]}function jV(e){return LV[e]}var UV=[yV,xV,kV,CV,EV,AV,NV],WV=UV.slice(0,-1),VV=WV.slice(0,-1),qV=VV.slice(0,-1);qV.slice(0,-1);function HV(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function GV(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function XV(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function YV(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,i=e.days,o=e.shortDays,u=e.months,s=e.shortMonths,c=sq(a),l=cq(a),f=sq(i),h=cq(i),d=sq(o),p=cq(o),v=sq(u),g=cq(u),m=sq(s),y=cq(s),b={a:function(e){return o[e.getDay()]},A:function(e){return i[e.getDay()]},b:function(e){return s[e.getMonth()]},B:function(e){return u[e.getMonth()]},c:null,d:Mq,e:Mq,f:Rq,g:Hq,G:Xq,H:Dq,I:Fq,j:Iq,L:Oq,m:Zq,M:Bq,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:mH,s:yH,S:zq,u:Lq,U:Pq,V:Uq,w:Wq,W:Vq,x:null,X:null,y:qq,Y:Gq,Z:Yq,"%":gH},x={a:function(e){return o[e.getUTCDay()]},A:function(e){return i[e.getUTCDay()]},b:function(e){return s[e.getUTCMonth()]},B:function(e){return u[e.getUTCMonth()]},c:null,d:Kq,e:Kq,f:tH,g:hH,G:pH,H:$q,I:Qq,j:Jq,L:eH,m:nH,M:rH,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:mH,s:yH,S:aH,u:iH,U:oH,V:sH,w:cH,W:lH,x:null,X:null,y:fH,Y:dH,Z:vH,"%":gH},w={a:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return S(e,t,n,r)},d:xq,e:xq,f:Eq,g:gq,G:vq,H:kq,I:kq,j:wq,L:Cq,m:bq,M:_q,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=l.get(r[0].toLowerCase()),n+r[0].length):-1},q:yq,Q:Nq,s:Tq,S:Sq,u:fq,U:hq,V:dq,w:lq,W:pq,x:function(e,t,r){return S(e,n,t,r)},X:function(e,t,n){return S(e,r,t,n)},y:gq,Y:vq,Z:mq,"%":Aq};function k(e,t){return function(n){var r,a,i,o=[],u=-1,s=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++u<c;)37===e.charCodeAt(u)&&(o.push(e.slice(s,u)),null!=(a=nq[r=e.charAt(++u)])?r=e.charAt(++u):a="e"===r?" ":"0",(i=t[r])&&(r=i(n,a)),o.push(r),s=u+1);return o.push(e.slice(s,u)),o.join("")}}function _(e,t){return function(n){var r,a,i=XV(1900,void 0,1);if(S(i,e,n+="",0)!=n.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(t&&!("Z"in i)&&(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||i.V>53)return null;"w"in i||(i.w=1),"Z"in i?(a=(r=GV(XV(i.y,0,1))).getUTCDay(),r=a>4||0===a?YW.ceil(r):YW(r),r=BW.offset(r,7*(i.V-1)),i.y=r.getUTCFullYear(),i.m=r.getUTCMonth(),i.d=r.getUTCDate()+(i.w+6)%7):(a=(r=HV(XV(i.y,0,1))).getDay(),r=a>4||0===a?jW.ceil(r):jW(r),r=ZW.offset(r,7*(i.V-1)),i.y=r.getFullYear(),i.m=r.getMonth(),i.d=r.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),a="Z"in i?GV(XV(i.y,0,1)).getUTCDay():HV(XV(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(a+5)%7:i.w+7*i.U-(a+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,GV(i)):HV(i)}}function S(e,t,n,r){for(var a,i,o=0,u=t.length,s=n.length;o<u;){if(r>=s)return-1;if(37===(a=t.charCodeAt(o++))){if(a=t.charAt(o++),!(i=w[a in nq?t.charAt(o++):a])||(r=i(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}return b.x=k(n,b),b.X=k(r,b),b.c=k(t,b),x.x=k(n,x),x.X=k(r,x),x.c=k(t,x),{format:function(e){var t=k(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=_(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=k(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=_(e+="",!0);return t.toString=function(){return e},t}}}var KV,$V,QV,JV,eq,tq,nq={"-":"",_:" ",0:"0"},rq=/^\s*\d+/,aq=/^%/,iq=/[\\^$*+?|[\]().{}]/g;function oq(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function uq(e){return e.replace(iq,"\\$&")}function sq(e){return new RegExp("^(?:"+e.map(uq).join("|")+")","i")}function cq(e){return new Map(e.map((function(e,t){return[e.toLowerCase(),t]})))}function lq(e,t,n){var r=rq.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function fq(e,t,n){var r=rq.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function hq(e,t,n){var r=rq.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function dq(e,t,n){var r=rq.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function pq(e,t,n){var r=rq.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function vq(e,t,n){var r=rq.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function gq(e,t,n){var r=rq.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function mq(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function yq(e,t,n){var r=rq.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function bq(e,t,n){var r=rq.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function xq(e,t,n){var r=rq.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function wq(e,t,n){var r=rq.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function kq(e,t,n){var r=rq.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function _q(e,t,n){var r=rq.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Sq(e,t,n){var r=rq.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Cq(e,t,n){var r=rq.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Eq(e,t,n){var r=rq.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Aq(e,t,n){var r=aq.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Nq(e,t,n){var r=rq.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Tq(e,t,n){var r=rq.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Mq(e,t){return oq(e.getDate(),t,2)}function Dq(e,t){return oq(e.getHours(),t,2)}function Fq(e,t){return oq(e.getHours()%12||12,t,2)}function Iq(e,t){return oq(1+ZW.count(tV(e),e),t,3)}function Oq(e,t){return oq(e.getMilliseconds(),t,3)}function Rq(e,t){return Oq(e,t)+"000"}function Zq(e,t){return oq(e.getMonth()+1,t,2)}function Bq(e,t){return oq(e.getMinutes(),t,2)}function zq(e,t){return oq(e.getSeconds(),t,2)}function Lq(e){var t=e.getDay();return 0===t?7:t}function Pq(e,t){return oq(PW.count(tV(e)-1,e),t,2)}function jq(e){var t=e.getDay();return t>=4||0===t?VW(e):VW.ceil(e)}function Uq(e,t){return e=jq(e),oq(VW.count(tV(e),e)+(4===tV(e).getDay()),t,2)}function Wq(e){return e.getDay()}function Vq(e,t){return oq(jW.count(tV(e)-1,e),t,2)}function qq(e,t){return oq(e.getFullYear()%100,t,2)}function Hq(e,t){return oq((e=jq(e)).getFullYear()%100,t,2)}function Gq(e,t){return oq(e.getFullYear()%1e4,t,4)}function Xq(e,t){var n=e.getDay();return oq((e=n>=4||0===n?VW(e):VW.ceil(e)).getFullYear()%1e4,t,4)}function Yq(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+oq(t/60|0,"0",2)+oq(t%60,"0",2)}function Kq(e,t){return oq(e.getUTCDate(),t,2)}function $q(e,t){return oq(e.getUTCHours(),t,2)}function Qq(e,t){return oq(e.getUTCHours()%12||12,t,2)}function Jq(e,t){return oq(1+BW.count(nV(e),e),t,3)}function eH(e,t){return oq(e.getUTCMilliseconds(),t,3)}function tH(e,t){return eH(e,t)+"000"}function nH(e,t){return oq(e.getUTCMonth()+1,t,2)}function rH(e,t){return oq(e.getUTCMinutes(),t,2)}function aH(e,t){return oq(e.getUTCSeconds(),t,2)}function iH(e){var t=e.getUTCDay();return 0===t?7:t}function oH(e,t){return oq(XW.count(nV(e)-1,e),t,2)}function uH(e){var t=e.getUTCDay();return t>=4||0===t?QW(e):QW.ceil(e)}function sH(e,t){return e=uH(e),oq(QW.count(nV(e),e)+(4===nV(e).getUTCDay()),t,2)}function cH(e){return e.getUTCDay()}function lH(e,t){return oq(YW.count(nV(e)-1,e),t,2)}function fH(e,t){return oq(e.getUTCFullYear()%100,t,2)}function hH(e,t){return oq((e=uH(e)).getUTCFullYear()%100,t,2)}function dH(e,t){return oq(e.getUTCFullYear()%1e4,t,4)}function pH(e,t){var n=e.getUTCDay();return oq((e=n>=4||0===n?QW(e):QW.ceil(e)).getUTCFullYear()%1e4,t,4)}function vH(){return"+0000"}function gH(){return"%"}function mH(e){return+e}function yH(e){return Math.floor(+e/1e3)}function bH(e){var t={};return function(n){return t[n]||(t[n]=e(n))}}function xH(e){var t=bH(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat:function(e){var n=vW(e||",");if(null==n.precision){switch(n.precision=12,n.type){case"%":n.precision-=2;break;case"e":n.precision-=1}return function(e,t){return function(n){var r=e(n),a=r.indexOf(t);if(a<0)return r;for(var i=function(e,t){var n,r=e.lastIndexOf("e");if(r>0)return r;for(r=e.length;--r>t;)if((n=e.charCodeAt(r))>=48&&n<=57)return r+1}(r,a),o=i<r.length?r.slice(i):"";--i>a;)if("0"!==r[i]){++i;break}return r.slice(0,i)+o}}(t(n),t(".1f")(1)[1])}return t(n)},formatSpan:function(e,r,a,i){i=vW(null==i?",f":i);var o,u=function(e,t,n){n=+n;var r=(t=+t)<(e=+e),a=r?hW(t,e,n):hW(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}(e,r,a),s=Math.max(Math.abs(e),Math.abs(r));if(null==i.precision)switch(i.type){case"s":return isNaN(o=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(yW(t)/3)))-yW(Math.abs(e)))}(u,s))||(i.precision=o),n(i,s);case"":case"e":case"g":case"p":case"r":isNaN(o=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,yW(t)-yW(e))+1}(u,s))||(i.precision=o-("e"===i.type));break;case"f":case"%":isNaN(o=function(e){return Math.max(0,-yW(Math.abs(e)))}(u))||(i.precision=o-2*("%"===i.type))}return t(i)}}}function wH(){return xH({format:_W,formatPrefix:SW})}function kH(e,t,n){HU(n=n||{})||jU("Invalid time multi-format specifier: ".concat(n));var r=t(AV),a=t(EV),i=t(CV),o=t(kV),u=t(wV),s=t(xV),c=t(bV),l=t(yV),f=e(n.milliseconds||".%L"),h=e(n.seconds||":%S"),d=e(n.minutes||"%I:%M"),p=e(n.hours||"%I %p"),v=e(n.date||n.day||"%a %d"),g=e(n.week||"%b %d"),m=e(n.month||"%B"),y=e(n.quarter||"%B"),b=e(n.year||"%Y");return function(e){return(r(e)<e?f:a(e)<e?h:i(e)<e?d:o(e)<e?p:s(e)<e?u(e)<e?v:g:l(e)<e?c(e)<e?m:y:b)(e)}}function _H(e){var t=bH(e.format),n=bH(e.utcFormat);return{timeFormat:function(e){return QU(e)?t(e):kH(t,PV,e)},utcFormat:function(e){return QU(e)?n(e):kH(n,jV,e)},timeParse:bH(e.parse),utcParse:bH(e.utcParse)}}function SH(){return tq=_H({format:$V,parse:QV,utcFormat:JV,utcParse:eq})}function CH(e){return _H(YV(e))}function EH(e){return arguments.length?tq=CH(e):tq}!function(e){KV=YV(e),$V=KV.format,QV=KV.parse,JV=KV.utcFormat,eq=KV.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),wH(),SH();var AH=/^(data:|([A-Za-z]+:)?\/\/)/,NH=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,TH=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,MH="file://";function DH(e,t){return FH.apply(this,arguments)}function FH(){return(FH=(0,Lt.Z)(S().mark((function e(t,n){var r,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sanitize(t,n);case 2:return r=e.sent,a=r.href,e.abrupt("return",r.localFile?this.file(a):this.http(a,n));case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function IH(e,t){return OH.apply(this,arguments)}function OH(){return OH=(0,Lt.Z)(S().mark((function e(t,n){var r,a,i,o,u,s,c;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=YU({},this.options,n),r=this.fileAccess,a={href:null},s=NH.test(t.replace(TH,"")),null!=t&&"string"===typeof t&&s||jU("Sanitize failure, invalid URI: "+JU(t)),c=AH.test(t),(u=n.baseURL)&&!c&&(t.startsWith("/")||u.endsWith("/")||(t="/"+t),t=u+t),o=(i=t.startsWith(MH))||"file"===n.mode||"http"!==n.mode&&!c&&r,i?t=t.slice(MH.length):t.startsWith("//")&&("file"===n.defaultProtocol?(t=t.slice(2),o=!0):t=(n.defaultProtocol||"http")+":"+t),Object.defineProperty(a,"localFile",{value:!!o}),a.href=t,n.target&&(a.target=n.target+""),n.rel&&(a.rel=n.rel+""),"image"===n.context&&n.crossOrigin&&(a.crossOrigin=n.crossOrigin+""),e.abrupt("return",a);case 14:case"end":return e.stop()}}),e,this)}))),OH.apply(this,arguments)}function RH(e){return e?function(t){return new Promise((function(n,r){e.readFile(t,(function(e,t){e?r(e):n(t)}))}))}:ZH}function ZH(){return BH.apply(this,arguments)}function BH(){return(BH=(0,Lt.Z)(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:jU("No file system access.");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zH(e){return e?function(){var t=(0,Lt.Z)(S().mark((function t(n,r){var a,i,o;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=YU({},this.options.http,r),i=r&&r.response,t.next=4,e(n,a);case 4:return o=t.sent,t.abrupt("return",o.ok?XU(o[i])?o[i]():o.text():jU(o.status+""+o.statusText));case 6:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}():LH}function LH(){return PH.apply(this,arguments)}function PH(){return(PH=(0,Lt.Z)(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:jU("No HTTP fetch method available.");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var jH=function(e){return!Number.isNaN(+e)&&!(e instanceof Date)},UH={boolean:function(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e)&&!!e},integer:GU,number:GU,date:function(e,t){return t=t||eW,null==e||""===e?null:t(e)},string:function(e){return null==e||""===e?null:e+""},unknown:VU},WH=[function(e){return"true"===e||"false"===e||!0===e||!1===e},function(e){return jH(e)&&Number.isInteger(+e)},jH,function(e){return!Number.isNaN(Date.parse(e))}],VH=["boolean","integer","number","date"];function qH(e,t){if(!e||!e.length)return"unknown";for(var n,r,a,i=e.length,o=WH.length,u=WH.map((function(e,t){return t+1})),s=0,c=0;s<i;++s)for(r=t?e[s][t]:e[s],n=0;n<o;++n)if(u[n]&&(null!=(a=r)&&a===a)&&!WH[n](r)&&(u[n]=0,++c===WH.length))return"string";return VH[u.reduce((function(e,t){return 0===e?t:e}),0)-1]}function HH(e,t){return t.reduce((function(t,n){return t[n]=qH(e,n),t}),{})}function GH(e){var t=function(t,n){var r={delimiter:e};return XH(t,n?YU(n,r):r)};return t.responseType="text",t}function XH(e,t){return t.header&&(e=t.header.map(JU).join(t.delimiter)+"\n"+e),uW(t.delimiter).parse(e+"")}function YH(e,t){var n,r=t&&t.property?WU(t.property):VU;return!HU(e)||(n=e,"function"===typeof Buffer&&XU(Buffer.isBuffer)&&Buffer.isBuffer(n))?r(JSON.parse(e)):function(e,t){!qU(e)&&function(e){return e&&XU(e[Symbol.iterator])}(e)&&(e=(0,$n.Z)(e));return t&&t.copy?JSON.parse(JSON.stringify(e)):e}(r(e),t)}XH.responseType="text",YH.responseType="json";var KH={interior:function(e,t){return e!==t},exterior:function(e,t){return e===t}};function $H(e,t){var n,r,a,i;return e=YH(e,t),t&&t.feature?(n=or,a=t.feature):t&&t.mesh?(n=lr,a=t.mesh,i=KH[t.filter]):jU("Missing TopoJSON feature or mesh parameter."),(r=(r=e.objects[a])?n(e,r,i):jU("Invalid TopoJSON object: "+a))&&r.features||[r]}$H.responseType="json";var QH={dsv:XH,csv:GH(","),tsv:GH("\t"),json:YH,topojson:$H};function JH(e,t){return arguments.length>1?(QH[e]=t,this):$U(QH,e)?QH[e]:null}function eG(e){var t=JH(e);return t&&t.responseType||"text"}function tG(e,t,n,r){var a=JH((t=t||{}).type||"json");return a||jU("Unknown data format type: "+t.type),e=a(e,t),t.parse&&function(e,t,n,r){if(!e.length)return;var a=EH();n=n||a.timeParse,r=r||a.utcParse;var i,o,u,s,c,l,f=e.columns||Object.keys(e[0]);"auto"===t&&(t=HH(e,f));var h=(f=Object.keys(t)).map((function(e){var a,i,o=t[e];if(o&&(o.startsWith("date:")||o.startsWith("utc:")))return("'"===(i=(a=o.split(/:(.+)?/,2))[1])[0]&&"'"===i[i.length-1]||'"'===i[0]&&'"'===i[i.length-1])&&(i=i.slice(1,-1)),("utc"===a[0]?r:n)(i);if(!UH[o])throw Error("Illegal format pattern: "+e+":"+o);return UH[o]}));for(u=0,c=e.length,l=f.length;u<c;++u)for(i=e[u],s=0;s<l;++s)i[o=f[s]]=h[s](i[o])}(e,t.parse,n,r),$U(e,"columns")&&delete e.columns,e}var nG=function(e,t){return function(n){return{options:n||{},sanitize:IH,load:DH,fileAccess:!!t,file:RH(t),http:zH(e)}}}("undefined"!==typeof fetch&&fetch,null);function rG(e,t,n){return e.fields=t||[],e.fname=n,e}function aG(e){return 1===e.length?iG(e[0]):oG(e)}var iG=function(e){return function(t){return t[e]}},oG=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function uG(e){throw Error(e)}function sG(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n++),t=n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&c(),u=t=n+1):"]"===r&&(u||uG("Access path missing open bracket: "+e),u>0&&c(),u=0,t=n+1):n>t?c():t=n+1}return u&&uG("Access path missing closing bracket: "+e),o&&uG("Access path missing closing quote: "+e),n>t&&(n++,c()),a}function cG(e,t,n){var r=sG(e);return e=1===r.length?r[0]:e,rG((n&&n.get||aG)(r),[e],t||e)}cG("id");var lG=rG((function(e){return e}),[],"identity"),fG=(rG((function(){return 0}),[],"zero"),rG((function(){return 1}),[],"one"),rG((function(){return!0}),[],"true"));rG((function(){return!1}),[],"false");var hG=Array.isArray;function dG(e){return e===Object(e)}function pG(e){return e[e.length-1]}function vG(e){return null==e||""===e?null:+e}function gG(e){return null!=e?hG(e)?e:[e]:[]}function mG(e){return"function"===typeof e}function yG(e){for(var t,n,r=1,a=arguments.length;r<a;++r)for(n in t=arguments[r])e[n]=t[n];return e}var bG=Object.prototype.hasOwnProperty;function xG(e,t){return bG.call(e,t)}function wG(e,t,n){var r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),yG(r,n)}function kG(e){return"number"===typeof e}function _G(e){return"string"===typeof e}function SG(e){return hG(e)?"["+e.map(SG)+"]":dG(e)||_G(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function CG(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return t}function EG(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function AG(e){this._context=e}function NG(){}function TG(e){this._context=e}function MG(e){this._context=e}function DG(e,t){this._basis=new AG(e),this._beta=t}AG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:EG(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:EG(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},TG.prototype={areaStart:NG,areaEnd:NG,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:EG(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},MG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:EG(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},DG.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,a=e[0],i=t[0],o=e[n]-a,u=t[n]-i,s=-1;++s<=n;)r=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(a+r*o),this._beta*t[s]+(1-this._beta)*(i+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var FG=function e(t){function n(e){return 1===t?new AG(e):new DG(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function IG(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function OG(e,t){this._context=e,this._k=(1-t)/6}OG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:IG(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:IG(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var RG=function e(t){function n(e){return new OG(e,t)}return n.tension=function(t){return e(+t)},n}(0);function ZG(e,t){this._context=e,this._k=(1-t)/6}ZG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:IG(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var BG=function e(t){function n(e){return new ZG(e,t)}return n.tension=function(t){return e(+t)},n}(0);function zG(e,t){this._context=e,this._k=(1-t)/6}zG.prototype={areaStart:NG,areaEnd:NG,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:IG(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var LG=function e(t){function n(e){return new zG(e,t)}return n.tension=function(t){return e(+t)},n}(0),PG=Math.abs,jG=Math.atan2,UG=Math.cos,WG=Math.max,VG=Math.min,qG=Math.sin,HG=Math.sqrt,GG=1e-12,XG=Math.PI,YG=XG/2,KG=2*XG;function $G(e){return e>1?0:e<-1?XG:Math.acos(e)}function QG(e){return e>=1?YG:e<=-1?-YG:Math.asin(e)}function JG(e,t,n){var r=e._x1,a=e._y1,i=e._x2,o=e._y2;if(e._l01_a>GG){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,s=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/s,a=(a*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/s}if(e._l23_a>GG){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,l=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*c+e._x1*e._l23_2a-t*e._l12_2a)/l,o=(o*c+e._y1*e._l23_2a-n*e._l12_2a)/l}e._context.bezierCurveTo(r,a,i,o,e._x2,e._y2)}function eX(e,t){this._context=e,this._alpha=t}eX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:JG(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var tX=function e(t){function n(e){return t?new eX(e,t):new OG(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function nX(e,t){this._context=e,this._alpha=t}nX.prototype={areaStart:NG,areaEnd:NG,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:JG(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var rX=function e(t){function n(e){return t?new nX(e,t):new zG(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function aX(e,t){this._context=e,this._alpha=t}aX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:JG(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var iX=function e(t){function n(e){return t?new aX(e,t):new ZG(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function oX(e){this._context=e}function uX(e){return new oX(e)}function sX(e){this._context=e}function cX(e){return e<0?-1:1}function lX(e,t,n){var r=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(r||a<0&&-0),o=(n-e._y1)/(a||r<0&&-0),u=(i*a+o*r)/(r+a);return(cX(i)+cX(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(u))||0}function fX(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function hX(e,t,n){var r=e._x0,a=e._y0,i=e._x1,o=e._y1,u=(i-r)/3;e._context.bezierCurveTo(r+u,a+u*t,i-u,o-u*n,i,o)}function dX(e){this._context=e}function pX(e){this._context=new vX(e)}function vX(e){this._context=e}function gX(e){this._context=e}function mX(e){var t,n,r=e.length-1,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function yX(e,t){this._context=e,this._t=t}oX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},sX.prototype={areaStart:NG,areaEnd:NG,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},dX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:hX(this,this._t0,fX(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,hX(this,fX(this,n=lX(this,e,t)),n);break;default:hX(this,this._t0,n=lX(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(pX.prototype=Object.create(dX.prototype)).point=function(e,t){dX.prototype.point.call(this,t,e)},vX.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,i){this._context.bezierCurveTo(t,e,r,n,i,a)}},gX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=mX(e),a=mX(t),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(r[0][i],a[0][i],r[1][i],a[1][i],e[o],t[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},yX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var bX=Math.PI,xX=2*bX,wX=1e-6,kX=xX-wX;function _X(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function SX(){return new _X}_X.prototype=SX.prototype={constructor:_X,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,a,i){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+a)+","+(this._y1=+i)},arcTo:function(e,t,n,r,a){e=+e,t=+t,n=+n,r=+r,a=+a;var i=this._x1,o=this._y1,u=n-e,s=r-t,c=i-e,l=o-t,f=c*c+l*l;if(a<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>wX)if(Math.abs(l*u-s*c)>wX&&a){var h=n-i,d=r-o,p=u*u+s*s,v=h*h+d*d,g=Math.sqrt(p),m=Math.sqrt(f),y=a*Math.tan((bX-Math.acos((p+f-v)/(2*g*m)))/2),b=y/m,x=y/g;Math.abs(b-1)>wX&&(this._+="L"+(e+b*c)+","+(t+b*l)),this._+="A"+a+","+a+",0,0,"+ +(l*h>c*d)+","+(this._x1=e+x*u)+","+(this._y1=t+x*s)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,a,i){e=+e,t=+t,i=!!i;var o=(n=+n)*Math.cos(r),u=n*Math.sin(r),s=e+o,c=t+u,l=1^i,f=i?r-a:a-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+s+","+c:(Math.abs(this._x1-s)>wX||Math.abs(this._y1-c)>wX)&&(this._+="L"+s+","+c),n&&(f<0&&(f=f%xX+xX),f>kX?this._+="A"+n+","+n+",0,1,"+l+","+(e-o)+","+(t-u)+"A"+n+","+n+",0,1,"+l+","+(this._x1=s)+","+(this._y1=c):f>wX&&(this._+="A"+n+","+n+",0,"+ +(f>=bX)+","+l+","+(this._x1=e+n*Math.cos(a))+","+(this._y1=t+n*Math.sin(a))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var CX=SX;function EX(e){return function(){return e}}function AX(e){return e.innerRadius}function NX(e){return e.outerRadius}function TX(e){return e.startAngle}function MX(e){return e.endAngle}function DX(e){return e&&e.padAngle}function FX(e,t,n,r,a,i,o,u){var s=n-e,c=r-t,l=o-a,f=u-i,h=f*s-l*c;if(!(h*h<GG))return[e+(h=(l*(t-i)-f*(e-a))/h)*s,t+h*c]}function IX(e,t,n,r,a,i,o){var u=e-n,s=t-r,c=(o?i:-i)/HG(u*u+s*s),l=c*s,f=-c*u,h=e+l,d=t+f,p=n+l,v=r+f,g=(h+p)/2,m=(d+v)/2,y=p-h,b=v-d,x=y*y+b*b,w=a-i,k=h*v-p*d,_=(b<0?-1:1)*HG(WG(0,w*w*x-k*k)),S=(k*b-y*_)/x,C=(-k*y-b*_)/x,E=(k*b+y*_)/x,A=(-k*y+b*_)/x,N=S-g,T=C-m,M=E-g,D=A-m;return N*N+T*T>M*M+D*D&&(S=E,C=A),{cx:S,cy:C,x01:-l,y01:-f,x11:S*(a/w-1),y11:C*(a/w-1)}}Array.prototype.slice;function OX(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function RX(e){return e[0]}function ZX(e){return e[1]}function BX(e,t){var n=EX(!0),r=null,a=uX,i=null;function o(o){var u,s,c,l=(o=OX(o)).length,f=!1;for(null==r&&(i=a(c=CX())),u=0;u<=l;++u)!(u<l&&n(s=o[u],u,o))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+e(s,u,o),+t(s,u,o));if(c)return i=null,c+""||null}return e="function"===typeof e?e:void 0===e?RX:EX(e),t="function"===typeof t?t:void 0===t?ZX:EX(t),o.x=function(t){return arguments.length?(e="function"===typeof t?t:EX(+t),o):e},o.y=function(e){return arguments.length?(t="function"===typeof e?e:EX(+e),o):t},o.defined=function(e){return arguments.length?(n="function"===typeof e?e:EX(!!e),o):n},o.curve=function(e){return arguments.length?(a=e,null!=r&&(i=a(r)),o):a},o.context=function(e){return arguments.length?(null==e?r=i=null:i=a(r=e),o):r},o}function zX(e,t,n){var r=null,a=EX(!0),i=null,o=uX,u=null;function s(s){var c,l,f,h,d,p=(s=OX(s)).length,v=!1,g=new Array(p),m=new Array(p);for(null==i&&(u=o(d=CX())),c=0;c<=p;++c){if(!(c<p&&a(h=s[c],c,s))===v)if(v=!v)l=c,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),f=c-1;f>=l;--f)u.point(g[f],m[f]);u.lineEnd(),u.areaEnd()}v&&(g[c]=+e(h,c,s),m[c]=+t(h,c,s),u.point(r?+r(h,c,s):g[c],n?+n(h,c,s):m[c]))}if(d)return u=null,d+""||null}function c(){return BX().defined(a).curve(o).context(i)}return e="function"===typeof e?e:void 0===e?RX:EX(+e),t="function"===typeof t?t:EX(void 0===t?0:+t),n="function"===typeof n?n:void 0===n?ZX:EX(+n),s.x=function(t){return arguments.length?(e="function"===typeof t?t:EX(+t),r=null,s):e},s.x0=function(t){return arguments.length?(e="function"===typeof t?t:EX(+t),s):e},s.x1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:EX(+e),s):r},s.y=function(e){return arguments.length?(t="function"===typeof e?e:EX(+e),n=null,s):t},s.y0=function(e){return arguments.length?(t="function"===typeof e?e:EX(+e),s):t},s.y1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:EX(+e),s):n},s.lineX0=s.lineY0=function(){return c().x(e).y(t)},s.lineY1=function(){return c().x(e).y(n)},s.lineX1=function(){return c().x(r).y(t)},s.defined=function(e){return arguments.length?(a="function"===typeof e?e:EX(!!e),s):a},s.curve=function(e){return arguments.length?(o=e,null!=i&&(u=o(i)),s):o},s.context=function(e){return arguments.length?(null==e?i=u=null:u=o(i=e),s):i},s}var LX={draw:function(e,t){var n=Math.sqrt(t/XG);e.moveTo(n,0),e.arc(0,0,n,0,KG)}},PX=(Math.sqrt(1/3),Math.sin(XG/10)/Math.sin(7*XG/10));Math.sin(KG/10),Math.cos(KG/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12);var jX={},UX={};function WX(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function VX(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function qX(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function HX(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),a=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":function(e){return e<0?"-"+qX(-e,6):e>9999?"+"+qX(e,6):qX(e,4)}(e.getUTCFullYear())+"-"+qX(e.getUTCMonth()+1,2)+"-"+qX(e.getUTCDate(),2)+(a?"T"+qX(t,2)+":"+qX(n,2)+":"+qX(r,2)+"."+qX(a,3)+"Z":r?"T"+qX(t,2)+":"+qX(n,2)+":"+qX(r,2)+"Z":n||t?"T"+qX(t,2)+":"+qX(n,2)+"Z":"")}function GX(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,a=[],i=e.length,o=0,u=0,s=i<=0,c=!1;function l(){if(s)return UX;if(c)return c=!1,jX;var t,r,a=o;if(34===e.charCodeAt(a)){for(;o++<i&&34!==e.charCodeAt(o)||34===e.charCodeAt(++o););return(t=o)>=i?s=!0:10===(r=e.charCodeAt(o++))?c=!0:13===r&&(c=!0,10===e.charCodeAt(o)&&++o),e.slice(a+1,t-1).replace(/""/g,'"')}for(;o<i;){if(10===(r=e.charCodeAt(t=o++)))c=!0;else if(13===r)c=!0,10===e.charCodeAt(o)&&++o;else if(r!==n)continue;return e.slice(a,t)}return s=!0,e.slice(a,i)}for(10===e.charCodeAt(i-1)&&--i,13===e.charCodeAt(i-1)&&--i;(r=l())!==UX;){for(var f=[];r!==jX&&r!==UX;)f.push(r),r=l();t&&null==(f=t(f,u++))||a.push(f)}return a}function a(t,n){return t.map((function(t){return n.map((function(e){return o(t[e])})).join(e)}))}function i(t){return t.map(o).join(e)}function o(e){return null==e?"":e instanceof Date?HX(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,a,i=r(e,(function(e,r){if(n)return n(e,r-1);a=e,n=t?function(e,t){var n=WX(e);return function(r,a){return t(n(r),a,e)}}(e,t):WX(e)}));return i.columns=a||[],i},parseRows:r,format:function(t,n){return null==n&&(n=VX(t)),[n.map(o).join(e)].concat(a(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=VX(e)),a(e,t).join("\n")},formatRows:function(e){return e.map(i).join("\n")},formatRow:i,formatValue:o}}var XX=Math.sqrt(50),YX=Math.sqrt(10),KX=Math.sqrt(2);function $X(e,t,n){var r,a,i,o=(t-e)/Math.max(0,n),u=Math.floor(Math.log10(o)),s=o/Math.pow(10,u),c=s>=XX?10:s>=YX?5:s>=KX?2:1;return u<0?(i=Math.pow(10,-u)/c,(r=Math.round(e*i))/i<e&&++r,(a=Math.round(t*i))/i>t&&--a,i=-i):(i=Math.pow(10,u)*c,(r=Math.round(e/i))*i<e&&++r,(a=Math.round(t/i))*i>t&&--a),a<r&&.5<=n&&n<2?$X(e,t,2*n):[r,a,i]}function QX(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];var r=t<e,a=r?$X(t,e,n):$X(e,t,n),i=(0,gc.Z)(a,3),o=i[0],u=i[1],s=i[2];if(!(u>=o))return[];var c=u-o+1,l=new Array(c);if(r)if(s<0)for(var f=0;f<c;++f)l[f]=(u-f)/-s;else for(var h=0;h<c;++h)l[h]=(u-h)*s;else if(s<0)for(var d=0;d<c;++d)l[d]=(o+d)/-s;else for(var p=0;p<c;++p)l[p]=(o+p)*s;return l}function JX(e,t,n){return $X(e=+e,t=+t,n=+n)[2]}function eY(e,t,n){n=+n;var r=(t=+t)<(e=+e),a=r?JX(t,e,n):JX(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}var tY,nY=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function rY(e){if(!(t=nY.exec(e)))throw new Error("invalid format: "+e);var t;return new aY({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function aY(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function iY(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function oY(e){return(e=iY(Math.abs(e)))?e[1]:NaN}function uY(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(oY(t)/3)))-oY(Math.abs(e)))}function sY(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,oY(t)-oY(e))+1}function cY(e){return Math.max(0,-oY(Math.abs(e)))}function lY(e,t){var n=iY(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}rY.prototype=aY.prototype,aY.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var fY={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return lY(100*e,t)},r:lY,s:function(e,t){var n=iY(e,t);if(!n)return e+"";var r=n[0],a=n[1],i=a-(tY=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+iY(e,Math.max(0,t+i-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function hY(e){return e}var dY,pY,vY,gY=Array.prototype.map,mY=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function yY(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?hY:(t=gY.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var a=e.length,i=[],o=0,u=t[0],s=0;a>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),i.push(e.substring(a-=u,a+u)),!((s+=u+1)>r));)u=t[o=(o+1)%t.length];return i.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",u=void 0===e.numerals?hY:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(gY.call(e.numerals,String)),s=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",l=void 0===e.nan?"NaN":e.nan+"";function f(e){var t=(e=rY(e)).fill,n=e.align,f=e.sign,h=e.symbol,d=e.zero,p=e.width,v=e.comma,g=e.precision,m=e.trim,y=e.type;"n"===y?(v=!0,y="g"):fY[y]||(void 0===g&&(g=12),m=!0,y="g"),(d||"0"===t&&"="===n)&&(d=!0,t="0",n="=");var b="$"===h?a:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===h?i:/[%p]/.test(y)?s:"",w=fY[y],k=/[defgprs%]/.test(y);function _(e){var a,i,s,h=b,_=x;if("c"===y)_=w(e)+_,e="";else{var S=(e=+e)<0||1/e<0;if(e=isNaN(e)?l:w(Math.abs(e),g),m&&(e=function(e){e:for(var t,n=e.length,r=1,a=-1;r<n;++r)switch(e[r]){case".":a=t=r;break;case"0":0===a&&(a=r),t=r;break;default:if(!+e[r])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),S&&0===+e&&"+"!==f&&(S=!1),h=(S?"("===f?f:c:"-"===f||"("===f?"":f)+h,_=("s"===y?mY[8+tY/3]:"")+_+(S&&"("===f?")":""),k)for(a=-1,i=e.length;++a<i;)if(48>(s=e.charCodeAt(a))||s>57){_=(46===s?o+e.slice(a+1):e.slice(a))+_,e=e.slice(0,a);break}}v&&!d&&(e=r(e,1/0));var C=h.length+e.length+_.length,E=C<p?new Array(p-C+1).join(t):"";switch(v&&d&&(e=r(E+e,E.length?p-_.length:1/0),E=""),n){case"<":e=h+e+_+E;break;case"=":e=h+E+e+_;break;case"^":e=E.slice(0,C=E.length>>1)+h+e+_+E.slice(C);break;default:e=E+h+e+_}return u(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),_.toString=function(){return e+""},_}return{format:f,formatPrefix:function(e,t){var n=f(((e=rY(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(oY(t)/3))),a=Math.pow(10,-r),i=mY[8+r/3];return function(e){return n(a*e)+i}}}}!function(e){dY=yY(e),pY=dY.format,vY=dY.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});var bY=new Date,xY=new Date;function wY(e,t,n,r){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=function(t){return e(t=new Date(+t)),t},a.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},a.round=function(e){var t=a(e),n=a.ceil(e);return e-t<n-e?t:n},a.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},a.range=function(n,r,i){var o,u=[];if(n=a.ceil(n),i=null==i?1:Math.floor(i),!(n<r)||!(i>0))return u;do{u.push(o=new Date(+n)),t(n,i),e(n)}while(o<n&&n<r);return u},a.filter=function(n){return wY((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(a.count=function(t,r){return bY.setTime(+t),xY.setTime(+r),e(bY),e(xY),Math.floor(n(bY,xY))},a.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(r?function(t){return r(t)%e===0}:function(t){return a.count(0,t)%e===0}):a:null}),a}var kY=1e3,_Y=6e4,SY=36e5,CY=864e5,EY=6048e5,AY=2592e6,NY=31536e6,TY=wY((function(e){return e.setHours(0,0,0,0)}),(function(e,t){return e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*_Y)/CY}),(function(e){return e.getDate()-1})),MY=(TY.range,wY((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/CY}),(function(e){return e.getUTCDate()-1}))),DY=(MY.range,wY((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/CY}),(function(e){return Math.floor(e/CY)})));DY.range;function FY(e){return wY((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*_Y)/EY}))}var IY=FY(0),OY=FY(1),RY=FY(2),ZY=FY(3),BY=FY(4),zY=FY(5),LY=FY(6);IY.range,OY.range,RY.range,ZY.range,BY.range,zY.range,LY.range;function PY(e){return wY((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/EY}))}var jY=PY(0),UY=PY(1),WY=PY(2),VY=PY(3),qY=PY(4),HY=PY(5),GY=PY(6),XY=(jY.range,UY.range,WY.range,VY.range,qY.range,HY.range,GY.range,wY((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()})));XY.every=function(e){return isFinite(e=Math.floor(e))&&e>0?wY((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};XY.range;var YY=wY((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));YY.every=function(e){return isFinite(e=Math.floor(e))&&e>0?wY((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};YY.range;var KY=wY((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()})),$Y=(KY.range,wY((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()}))),QY=($Y.range,wY((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*kY-e.getMinutes()*_Y)}),(function(e,t){e.setTime(+e+t*SY)}),(function(e,t){return(t-e)/SY}),(function(e){return e.getHours()}))),JY=(QY.range,wY((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*SY)}),(function(e,t){return(t-e)/SY}),(function(e){return e.getUTCHours()}))),eK=(JY.range,wY((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*kY)}),(function(e,t){e.setTime(+e+t*_Y)}),(function(e,t){return(t-e)/_Y}),(function(e){return e.getMinutes()}))),tK=(eK.range,wY((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*_Y)}),(function(e,t){return(t-e)/_Y}),(function(e){return e.getUTCMinutes()}))),nK=(tK.range,wY((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*kY)}),(function(e,t){return(t-e)/kY}),(function(e){return e.getUTCSeconds()}))),rK=(nK.range,wY((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e})));rK.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?wY((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):rK:null};rK.range;var aK,iK,oK,uK,sK,cK,lK,fK="year",hK="quarter",dK="month",pK="week",vK="date",gK="day",mK="dayofyear",yK="hours",bK="minutes",xK="seconds",wK="milliseconds";[fK,hK,dK,pK,vK,gK,mK,yK,bK,xK,wK].reduce((function(e,t,n){return e[t]=1+n,e}),{});aK={},(0,Ir.Z)(aK,fK,"%Y "),(0,Ir.Z)(aK,hK,"Q%q "),(0,Ir.Z)(aK,dK,"%b "),(0,Ir.Z)(aK,vK,"%d "),(0,Ir.Z)(aK,pK,"W%U "),(0,Ir.Z)(aK,gK,"%a "),(0,Ir.Z)(aK,mK,"%j "),(0,Ir.Z)(aK,yK,"%H:00"),(0,Ir.Z)(aK,bK,"00:%M"),(0,Ir.Z)(aK,xK,":%S"),(0,Ir.Z)(aK,wK,".%L"),(0,Ir.Z)(aK,"".concat(fK,"-").concat(dK),"%Y-%m "),(0,Ir.Z)(aK,"".concat(fK,"-").concat(dK,"-").concat(vK),"%Y-%m-%d "),(0,Ir.Z)(aK,"".concat(yK,"-").concat(bK),"%H:%M");var kK=new Date;function _K(e){return kK.setFullYear(e),kK.setMonth(0),kK.setDate(1),kK.setHours(0,0,0,0),kK}function SK(e){return TY.count(_K(e.getFullYear())-1,e)}function CK(e){return IY.count(_K(e.getFullYear())-1,e)}function EK(e){return _K(e).getDay()}function AK(e){var t=Date.UTC(e.getUTCFullYear(),0,1);return MY.count(t-1,e)}function NK(e){var t=Date.UTC(e.getUTCFullYear(),0,1);return jY.count(t-1,e)}function TK(e){return kK.setTime(Date.UTC(e,0,1)),kK.getUTCDay()}function MK(e,t,n){return t+7*e-(n+6)%7}iK={},(0,Ir.Z)(iK,fK,(function(e){return e.getFullYear()})),(0,Ir.Z)(iK,hK,(function(e){return Math.floor(e.getMonth()/3)})),(0,Ir.Z)(iK,dK,(function(e){return e.getMonth()})),(0,Ir.Z)(iK,vK,(function(e){return e.getDate()})),(0,Ir.Z)(iK,yK,(function(e){return e.getHours()})),(0,Ir.Z)(iK,bK,(function(e){return e.getMinutes()})),(0,Ir.Z)(iK,xK,(function(e){return e.getSeconds()})),(0,Ir.Z)(iK,wK,(function(e){return e.getMilliseconds()})),(0,Ir.Z)(iK,mK,(function(e){return SK(e)})),(0,Ir.Z)(iK,pK,(function(e){return CK(e)})),(0,Ir.Z)(iK,"weekday",(function(e,t){return MK(CK(e),e.getDay(),EK(t))})),(0,Ir.Z)(iK,gK,(function(e,t){return MK(1,e.getDay(),EK(t))})),oK={},(0,Ir.Z)(oK,hK,(function(e){return 3*e})),(0,Ir.Z)(oK,pK,(function(e,t){return MK(e,0,EK(t))}));uK={},(0,Ir.Z)(uK,fK,(function(e){return e.getUTCFullYear()})),(0,Ir.Z)(uK,hK,(function(e){return Math.floor(e.getUTCMonth()/3)})),(0,Ir.Z)(uK,dK,(function(e){return e.getUTCMonth()})),(0,Ir.Z)(uK,vK,(function(e){return e.getUTCDate()})),(0,Ir.Z)(uK,yK,(function(e){return e.getUTCHours()})),(0,Ir.Z)(uK,bK,(function(e){return e.getUTCMinutes()})),(0,Ir.Z)(uK,xK,(function(e){return e.getUTCSeconds()})),(0,Ir.Z)(uK,wK,(function(e){return e.getUTCMilliseconds()})),(0,Ir.Z)(uK,mK,(function(e){return AK(e)})),(0,Ir.Z)(uK,pK,(function(e){return NK(e)})),(0,Ir.Z)(uK,gK,(function(e,t){return MK(1,e.getUTCDay(),TK(t))})),(0,Ir.Z)(uK,"weekday",(function(e,t){return MK(NK(e),e.getUTCDay(),TK(t))})),sK={},(0,Ir.Z)(sK,hK,(function(e){return 3*e})),(0,Ir.Z)(sK,pK,(function(e,t){return MK(e,0,TK(t))}));var DK=(cK={},(0,Ir.Z)(cK,fK,XY),(0,Ir.Z)(cK,hK,KY.every(3)),(0,Ir.Z)(cK,dK,KY),(0,Ir.Z)(cK,pK,IY),(0,Ir.Z)(cK,vK,TY),(0,Ir.Z)(cK,gK,TY),(0,Ir.Z)(cK,mK,TY),(0,Ir.Z)(cK,yK,QY),(0,Ir.Z)(cK,bK,eK),(0,Ir.Z)(cK,xK,nK),(0,Ir.Z)(cK,wK,rK),cK),FK=(lK={},(0,Ir.Z)(lK,fK,YY),(0,Ir.Z)(lK,hK,$Y.every(3)),(0,Ir.Z)(lK,dK,$Y),(0,Ir.Z)(lK,pK,jY),(0,Ir.Z)(lK,vK,MY),(0,Ir.Z)(lK,gK,MY),(0,Ir.Z)(lK,mK,MY),(0,Ir.Z)(lK,yK,JY),(0,Ir.Z)(lK,bK,tK),(0,Ir.Z)(lK,xK,nK),(0,Ir.Z)(lK,wK,rK),lK);function IK(e){return DK[e]}function OK(e){return FK[e]}var RK=[fK,dK,vK,yK,bK,xK,wK],ZK=RK.slice(0,-1),BK=ZK.slice(0,-1),zK=BK.slice(0,-1);zK.slice(0,-1);function LK(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function PK(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function jK(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var UK,WK,VK,qK,HK,GK={"-":"",_:" ",0:"0"},XK=/^\s*\d+/,YK=/^%/,KK=/[\\^$*+?|[\]().{}]/g;function $K(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function QK(e){return e.replace(KK,"\\$&")}function JK(e){return new RegExp("^(?:"+e.map(QK).join("|")+")","i")}function e$(e){return new Map(e.map((function(e,t){return[e.toLowerCase(),t]})))}function t$(e,t,n){var r=XK.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function n$(e,t,n){var r=XK.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function r$(e,t,n){var r=XK.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function a$(e,t,n){var r=XK.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function i$(e,t,n){var r=XK.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function o$(e,t,n){var r=XK.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function u$(e,t,n){var r=XK.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function s$(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function c$(e,t,n){var r=XK.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function l$(e,t,n){var r=XK.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function f$(e,t,n){var r=XK.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function h$(e,t,n){var r=XK.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function d$(e,t,n){var r=XK.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function p$(e,t,n){var r=XK.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function v$(e,t,n){var r=XK.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function g$(e,t,n){var r=XK.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function m$(e,t,n){var r=XK.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function y$(e,t,n){var r=YK.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function b$(e,t,n){var r=XK.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function x$(e,t,n){var r=XK.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function w$(e,t){return $K(e.getDate(),t,2)}function k$(e,t){return $K(e.getHours(),t,2)}function _$(e,t){return $K(e.getHours()%12||12,t,2)}function S$(e,t){return $K(1+TY.count(XY(e),e),t,3)}function C$(e,t){return $K(e.getMilliseconds(),t,3)}function E$(e,t){return C$(e,t)+"000"}function A$(e,t){return $K(e.getMonth()+1,t,2)}function N$(e,t){return $K(e.getMinutes(),t,2)}function T$(e,t){return $K(e.getSeconds(),t,2)}function M$(e){var t=e.getDay();return 0===t?7:t}function D$(e,t){return $K(IY.count(XY(e)-1,e),t,2)}function F$(e){var t=e.getDay();return t>=4||0===t?BY(e):BY.ceil(e)}function I$(e,t){return e=F$(e),$K(BY.count(XY(e),e)+(4===XY(e).getDay()),t,2)}function O$(e){return e.getDay()}function R$(e,t){return $K(OY.count(XY(e)-1,e),t,2)}function Z$(e,t){return $K(e.getFullYear()%100,t,2)}function B$(e,t){return $K((e=F$(e)).getFullYear()%100,t,2)}function z$(e,t){return $K(e.getFullYear()%1e4,t,4)}function L$(e,t){var n=e.getDay();return $K((e=n>=4||0===n?BY(e):BY.ceil(e)).getFullYear()%1e4,t,4)}function P$(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+$K(t/60|0,"0",2)+$K(t%60,"0",2)}function j$(e,t){return $K(e.getUTCDate(),t,2)}function U$(e,t){return $K(e.getUTCHours(),t,2)}function W$(e,t){return $K(e.getUTCHours()%12||12,t,2)}function V$(e,t){return $K(1+MY.count(YY(e),e),t,3)}function q$(e,t){return $K(e.getUTCMilliseconds(),t,3)}function H$(e,t){return q$(e,t)+"000"}function G$(e,t){return $K(e.getUTCMonth()+1,t,2)}function X$(e,t){return $K(e.getUTCMinutes(),t,2)}function Y$(e,t){return $K(e.getUTCSeconds(),t,2)}function K$(e){var t=e.getUTCDay();return 0===t?7:t}function $$(e,t){return $K(jY.count(YY(e)-1,e),t,2)}function Q$(e){var t=e.getUTCDay();return t>=4||0===t?qY(e):qY.ceil(e)}function J$(e,t){return e=Q$(e),$K(qY.count(YY(e),e)+(4===YY(e).getUTCDay()),t,2)}function eQ(e){return e.getUTCDay()}function tQ(e,t){return $K(UY.count(YY(e)-1,e),t,2)}function nQ(e,t){return $K(e.getUTCFullYear()%100,t,2)}function rQ(e,t){return $K((e=Q$(e)).getUTCFullYear()%100,t,2)}function aQ(e,t){return $K(e.getUTCFullYear()%1e4,t,4)}function iQ(e,t){var n=e.getUTCDay();return $K((e=n>=4||0===n?qY(e):qY.ceil(e)).getUTCFullYear()%1e4,t,4)}function oQ(){return"+0000"}function uQ(){return"%"}function sQ(e){return+e}function cQ(e){return Math.floor(+e/1e3)}function lQ(e){var t={};return function(n){return t[n]||(t[n]=e(n))}}function fQ(e){var t=lQ(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat:function(e){var n=rY(e||",");if(null==n.precision){switch(n.precision=12,n.type){case"%":n.precision-=2;break;case"e":n.precision-=1}return function(e,t){return function(n){var r=e(n),a=r.indexOf(t);if(a<0)return r;for(var i=function(e,t){var n,r=e.lastIndexOf("e");if(r>0)return r;for(r=e.length;--r>t;)if((n=e.charCodeAt(r))>=48&&n<=57)return r+1}(r,a),o=i<r.length?r.slice(i):"";--i>a;)if("0"!==r[i]){++i;break}return r.slice(0,i)+o}}(t(n),t(".1f")(1)[1])}return t(n)},formatSpan:function(e,r,a,i){i=rY(null==i?",f":i);var o,u=eY(e,r,a),s=Math.max(Math.abs(e),Math.abs(r));if(null==i.precision)switch(i.type){case"s":return isNaN(o=uY(u,s))||(i.precision=o),n(i,s);case"":case"e":case"g":case"p":case"r":isNaN(o=sY(u,s))||(i.precision=o-("e"===i.type));break;case"f":case"%":isNaN(o=cY(u))||(i.precision=o-2*("%"===i.type))}return t(i)}}}function hQ(){return fQ({format:pY,formatPrefix:vY})}function dQ(e,t,n){dG(n=n||{})||uG("Invalid time multi-format specifier: ".concat(n));var r=t(xK),a=t(bK),i=t(yK),o=t(vK),u=t(pK),s=t(dK),c=t(hK),l=t(fK),f=e(n.milliseconds||".%L"),h=e(n.seconds||":%S"),d=e(n.minutes||"%I:%M"),p=e(n.hours||"%I %p"),v=e(n.date||n.day||"%a %d"),g=e(n.week||"%b %d"),m=e(n.month||"%B"),y=e(n.quarter||"%B"),b=e(n.year||"%Y");return function(e){return(r(e)<e?f:a(e)<e?h:i(e)<e?d:o(e)<e?p:s(e)<e?u(e)<e?v:g:l(e)<e?c(e)<e?m:y:b)(e)}}function pQ(e){var t=lQ(e.format),n=lQ(e.utcFormat);return{timeFormat:function(e){return _G(e)?t(e):dQ(t,IK,e)},utcFormat:function(e){return _G(e)?n(e):dQ(n,OK,e)},timeParse:lQ(e.parse),utcParse:lQ(e.utcParse)}}function vQ(){return pQ({format:WK,parse:VK,utcFormat:qK,utcParse:HK})}!function(e){UK=function(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,i=e.days,o=e.shortDays,u=e.months,s=e.shortMonths,c=JK(a),l=e$(a),f=JK(i),h=e$(i),d=JK(o),p=e$(o),v=JK(u),g=e$(u),m=JK(s),y=e$(s),b={a:function(e){return o[e.getDay()]},A:function(e){return i[e.getDay()]},b:function(e){return s[e.getMonth()]},B:function(e){return u[e.getMonth()]},c:null,d:w$,e:w$,f:E$,g:B$,G:L$,H:k$,I:_$,j:S$,L:C$,m:A$,M:N$,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:sQ,s:cQ,S:T$,u:M$,U:D$,V:I$,w:O$,W:R$,x:null,X:null,y:Z$,Y:z$,Z:P$,"%":uQ},x={a:function(e){return o[e.getUTCDay()]},A:function(e){return i[e.getUTCDay()]},b:function(e){return s[e.getUTCMonth()]},B:function(e){return u[e.getUTCMonth()]},c:null,d:j$,e:j$,f:H$,g:rQ,G:iQ,H:U$,I:W$,j:V$,L:q$,m:G$,M:X$,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:sQ,s:cQ,S:Y$,u:K$,U:$$,V:J$,w:eQ,W:tQ,x:null,X:null,y:nQ,Y:aQ,Z:oQ,"%":uQ},w={a:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return S(e,t,n,r)},d:f$,e:f$,f:m$,g:u$,G:o$,H:d$,I:d$,j:h$,L:g$,m:l$,M:p$,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=l.get(r[0].toLowerCase()),n+r[0].length):-1},q:c$,Q:b$,s:x$,S:v$,u:n$,U:r$,V:a$,w:t$,W:i$,x:function(e,t,r){return S(e,n,t,r)},X:function(e,t,n){return S(e,r,t,n)},y:u$,Y:o$,Z:s$,"%":y$};function k(e,t){return function(n){var r,a,i,o=[],u=-1,s=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++u<c;)37===e.charCodeAt(u)&&(o.push(e.slice(s,u)),null!=(a=GK[r=e.charAt(++u)])?r=e.charAt(++u):a="e"===r?" ":"0",(i=t[r])&&(r=i(n,a)),o.push(r),s=u+1);return o.push(e.slice(s,u)),o.join("")}}function _(e,t){return function(n){var r,a,i=jK(1900,void 0,1);if(S(i,e,n+="",0)!=n.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(t&&!("Z"in i)&&(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||i.V>53)return null;"w"in i||(i.w=1),"Z"in i?(a=(r=PK(jK(i.y,0,1))).getUTCDay(),r=a>4||0===a?UY.ceil(r):UY(r),r=MY.offset(r,7*(i.V-1)),i.y=r.getUTCFullYear(),i.m=r.getUTCMonth(),i.d=r.getUTCDate()+(i.w+6)%7):(a=(r=LK(jK(i.y,0,1))).getDay(),r=a>4||0===a?OY.ceil(r):OY(r),r=TY.offset(r,7*(i.V-1)),i.y=r.getFullYear(),i.m=r.getMonth(),i.d=r.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),a="Z"in i?PK(jK(i.y,0,1)).getUTCDay():LK(jK(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(a+5)%7:i.w+7*i.U-(a+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,PK(i)):LK(i)}}function S(e,t,n,r){for(var a,i,o=0,u=t.length,s=n.length;o<u;){if(r>=s)return-1;if(37===(a=t.charCodeAt(o++))){if(a=t.charAt(o++),!(i=w[a in GK?t.charAt(o++):a])||(r=i(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}return b.x=k(n,b),b.X=k(r,b),b.c=k(t,b),x.x=k(n,x),x.X=k(r,x),x.c=k(t,x),{format:function(e){var t=k(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=_(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=k(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=_(e+="",!0);return t.toString=function(){return e},t}}}(e),WK=UK.format,VK=UK.parse,qK=UK.utcFormat,HK=UK.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),hQ(),vQ();var gQ=/^(data:|([A-Za-z]+:)?\/\/)/,mQ=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,yQ=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,bQ="file://";function xQ(e,t){return wQ.apply(this,arguments)}function wQ(){return(wQ=(0,Lt.Z)(S().mark((function e(t,n){var r,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sanitize(t,n);case 2:return r=e.sent,a=r.href,e.abrupt("return",r.localFile?this.file(a):this.http(a,n));case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function kQ(e,t){return _Q.apply(this,arguments)}function _Q(){return _Q=(0,Lt.Z)(S().mark((function e(t,n){var r,a,i,o,u,s,c;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=yG({},this.options,n),r=this.fileAccess,a={href:null},s=mQ.test(t.replace(yQ,"")),null!=t&&"string"===typeof t&&s||uG("Sanitize failure, invalid URI: "+SG(t)),c=gQ.test(t),(u=n.baseURL)&&!c&&(t.startsWith("/")||u.endsWith("/")||(t="/"+t),t=u+t),o=(i=t.startsWith(bQ))||"file"===n.mode||"http"!==n.mode&&!c&&r,i?t=t.slice(bQ.length):t.startsWith("//")&&("file"===n.defaultProtocol?(t=t.slice(2),o=!0):t=(n.defaultProtocol||"http")+":"+t),Object.defineProperty(a,"localFile",{value:!!o}),a.href=t,n.target&&(a.target=n.target+""),n.rel&&(a.rel=n.rel+""),"image"===n.context&&n.crossOrigin&&(a.crossOrigin=n.crossOrigin+""),e.abrupt("return",a);case 14:case"end":return e.stop()}}),e,this)}))),_Q.apply(this,arguments)}function SQ(e){return e?function(t){return new Promise((function(n,r){e.readFile(t,(function(e,t){e?r(e):n(t)}))}))}:CQ}function CQ(){return EQ.apply(this,arguments)}function EQ(){return(EQ=(0,Lt.Z)(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:uG("No file system access.");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function AQ(e){return e?function(){var t=(0,Lt.Z)(S().mark((function t(n,r){var a,i,o;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=yG({},this.options.http,r),i=r&&r.response,t.next=4,e(n,a);case 4:return o=t.sent,t.abrupt("return",o.ok?mG(o[i])?o[i]():o.text():uG(o.status+""+o.statusText));case 6:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}():NQ}function NQ(){return TQ.apply(this,arguments)}function TQ(){return(TQ=(0,Lt.Z)(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:uG("No HTTP fetch method available.");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function MQ(e){var t=function(t,n){var r={delimiter:e};return DQ(t,n?yG(n,r):r)};return t.responseType="text",t}function DQ(e,t){return t.header&&(e=t.header.map(SG).join(t.delimiter)+"\n"+e),GX(t.delimiter).parse(e+"")}function FQ(e,t){var n,r=t&&t.property?cG(t.property):lG;return!dG(e)||(n=e,"function"===typeof Buffer&&mG(Buffer.isBuffer)&&Buffer.isBuffer(n))?r(JSON.parse(e)):function(e,t){!hG(e)&&function(e){return e&&mG(e[Symbol.iterator])}(e)&&(e=(0,$n.Z)(e));return t&&t.copy?JSON.parse(JSON.stringify(e)):e}(r(e),t)}DQ.responseType="text",FQ.responseType="json";var IQ={interior:function(e,t){return e!==t},exterior:function(e,t){return e===t}};function OQ(e,t){var n,r,a,i;return e=FQ(e,t),t&&t.feature?(n=or,a=t.feature):t&&t.mesh?(n=lr,a=t.mesh,i=IQ[t.filter]):uG("Missing TopoJSON feature or mesh parameter."),(r=(r=e.objects[a])?n(e,r,i):uG("Invalid TopoJSON object: "+a))&&r.features||[r]}OQ.responseType="json";MQ(","),MQ("\t");var RQ=function(e,t){return function(n){return{options:n||{},sanitize:kQ,load:xQ,fileAccess:!!t,file:SQ(t),http:AQ(e)}}}("undefined"!==typeof fetch&&fetch,null);function ZQ(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function BQ(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function zQ(e){var t,n,r;function a(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<i){if(0!==t(r,r))return i;do{var o=a+i>>>1;n(e[o],r)<0?a=o+1:i=o}while(a<i)}return a}return 2!==e.length?(t=ZQ,n=function(t,n){return ZQ(e(t),n)},r=function(t,n){return e(t)-n}):(t=e===ZQ||e===BQ?e:LQ,n=e,r=e),{left:a,center:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,o=a(e,t,n,i-1);return o>n&&r(e[o-1],t)>-r(e[o],t)?o-1:o},right:function(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<i){if(0!==t(r,r))return i;do{var o=a+i>>>1;n(e[o],r)<=0?a=o+1:i=o}while(a<i)}return a}}}function LQ(){return 0}function PQ(e){return null===e?NaN:+e}var jQ=zQ(ZQ),UQ=jQ.right,WQ=(jQ.left,zQ(PQ).center,UQ);function VQ(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function qQ(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function HQ(){}var GQ=.7,XQ=1.4285714285714286,YQ="\\s*([+-]?\\d+)\\s*",KQ="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$Q="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",QQ=/^#([0-9a-f]{3,8})$/,JQ=new RegExp("^rgb\\(".concat(YQ,",").concat(YQ,",").concat(YQ,"\\)$")),eJ=new RegExp("^rgb\\(".concat($Q,",").concat($Q,",").concat($Q,"\\)$")),tJ=new RegExp("^rgba\\(".concat(YQ,",").concat(YQ,",").concat(YQ,",").concat(KQ,"\\)$")),nJ=new RegExp("^rgba\\(".concat($Q,",").concat($Q,",").concat($Q,",").concat(KQ,"\\)$")),rJ=new RegExp("^hsl\\(".concat(KQ,",").concat($Q,",").concat($Q,"\\)$")),aJ=new RegExp("^hsla\\(".concat(KQ,",").concat($Q,",").concat($Q,",").concat(KQ,"\\)$")),iJ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function oJ(){return this.rgb().formatHex()}function uJ(){return this.rgb().formatRgb()}function sJ(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=QQ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?cJ(t):3===n?new dJ(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?lJ(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?lJ(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=JQ.exec(e))?new dJ(t[1],t[2],t[3],1):(t=eJ.exec(e))?new dJ(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=tJ.exec(e))?lJ(t[1],t[2],t[3],t[4]):(t=nJ.exec(e))?lJ(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=rJ.exec(e))?bJ(t[1],t[2]/100,t[3]/100,1):(t=aJ.exec(e))?bJ(t[1],t[2]/100,t[3]/100,t[4]):iJ.hasOwnProperty(e)?cJ(iJ[e]):"transparent"===e?new dJ(NaN,NaN,NaN,0):null}function cJ(e){return new dJ(e>>16&255,e>>8&255,255&e,1)}function lJ(e,t,n,r){return r<=0&&(e=t=n=NaN),new dJ(e,t,n,r)}function fJ(e){return e instanceof HQ||(e=sJ(e)),e?new dJ((e=e.rgb()).r,e.g,e.b,e.opacity):new dJ}function hJ(e,t,n,r){return 1===arguments.length?fJ(e):new dJ(e,t,n,null==r?1:r)}function dJ(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function pJ(){return"#".concat(yJ(this.r)).concat(yJ(this.g)).concat(yJ(this.b))}function vJ(){var e=gJ(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(mJ(this.r),", ").concat(mJ(this.g),", ").concat(mJ(this.b)).concat(1===e?")":", ".concat(e,")"))}function gJ(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function mJ(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function yJ(e){return((e=mJ(e))<16?"0":"")+e.toString(16)}function bJ(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new kJ(e,t,n,r)}function xJ(e){if(e instanceof kJ)return new kJ(e.h,e.s,e.l,e.opacity);if(e instanceof HQ||(e=sJ(e)),!e)return new kJ;if(e instanceof kJ)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,u=i-a,s=(i+a)/2;return u?(o=t===i?(n-r)/u+6*(n<r):n===i?(r-t)/u+2:(t-n)/u+4,u/=s<.5?i+a:2-i-a,o*=60):u=s>0&&s<1?0:o,new kJ(o,u,s,e.opacity)}function wJ(e,t,n,r){return 1===arguments.length?xJ(e):new kJ(e,t,n,null==r?1:r)}function kJ(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function _J(e){return(e=(e||0)%360)<0?e+360:e}function SJ(e){return Math.max(0,Math.min(1,e||0))}function CJ(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function EJ(e,t,n,r,a){var i=e*e,o=i*e;return((1-3*e+3*i-o)*t+(4-6*i+3*o)*n+(1+3*e+3*i-3*o)*r+o*a)/6}function AJ(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[r],i=e[r+1],o=r>0?e[r-1]:2*a-i,u=r<t-1?e[r+2]:2*i-a;return EJ((n-r/t)*t,o,a,i,u)}}function NJ(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),a=e[(r+t-1)%t],i=e[r%t],o=e[(r+1)%t],u=e[(r+2)%t];return EJ((n-r/t)*t,a,i,o,u)}}VQ(HQ,sJ,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:oJ,formatHex:oJ,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return xJ(this).formatHsl()},formatRgb:uJ,toString:uJ}),VQ(dJ,hJ,qQ(HQ,{brighter:function(e){return e=null==e?XQ:Math.pow(XQ,e),new dJ(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?GQ:Math.pow(GQ,e),new dJ(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new dJ(mJ(this.r),mJ(this.g),mJ(this.b),gJ(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pJ,formatHex:pJ,formatHex8:function(){return"#".concat(yJ(this.r)).concat(yJ(this.g)).concat(yJ(this.b)).concat(yJ(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:vJ,toString:vJ})),VQ(kJ,wJ,qQ(HQ,{brighter:function(e){return e=null==e?XQ:Math.pow(XQ,e),new kJ(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?GQ:Math.pow(GQ,e),new kJ(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new dJ(CJ(e>=240?e-240:e+120,a,r),CJ(e,a,r),CJ(e<120?e+240:e-120,a,r),this.opacity)},clamp:function(){return new kJ(_J(this.h),SJ(this.s),SJ(this.l),gJ(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=gJ(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(_J(this.h),", ").concat(100*SJ(this.s),"%, ").concat(100*SJ(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));var TJ=function(e){return function(){return e}};function MJ(e,t){return function(n){return e+n*t}}function DJ(e,t){var n=t-e;return n?MJ(e,n>180||n<-180?n-360*Math.round(n/360):n):TJ(isNaN(e)?t:e)}function FJ(e){return 1===(e=+e)?IJ:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):TJ(isNaN(t)?n:t)}}function IJ(e,t){var n=t-e;return n?MJ(e,n):TJ(isNaN(e)?t:e)}var OJ=function e(t){var n=FJ(t);function r(e,t){var r=n((e=hJ(e)).r,(t=hJ(t)).r),a=n(e.g,t.g),i=n(e.b,t.b),o=IJ(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=i(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function RJ(e){return function(t){var n,r,a=t.length,i=new Array(a),o=new Array(a),u=new Array(a);for(n=0;n<a;++n)r=hJ(t[n]),i[n]=r.r||0,o[n]=r.g||0,u[n]=r.b||0;return i=e(i),o=e(o),u=e(u),r.opacity=1,function(e){return r.r=i(e),r.g=o(e),r.b=u(e),r+""}}}var ZJ=RJ(AJ),BJ=RJ(NJ);function zJ(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,a=t.slice();return function(i){for(n=0;n<r;++n)a[n]=e[n]*(1-i)+t[n]*i;return a}}function LJ(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function PJ(e,t){return(LJ(t)?zJ:jJ)(e,t)}function jJ(e,t){var n,r=t?t.length:0,a=e?Math.min(r,e.length):0,i=new Array(a),o=new Array(r);for(n=0;n<a;++n)i[n]=XJ(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<a;++n)o[n]=i[n](e);return o}}function UJ(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function WJ(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function VJ(e,t){var n,r={},a={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=XJ(e[n],t[n]):a[n]=t[n];return function(e){for(n in r)a[n]=r[n](e);return a}}var qJ=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,HJ=new RegExp(qJ.source,"g");function GJ(e,t){var n,r,a,i=qJ.lastIndex=HJ.lastIndex=0,o=-1,u=[],s=[];for(e+="",t+="";(n=qJ.exec(e))&&(r=HJ.exec(t));)(a=r.index)>i&&(a=t.slice(i,a),u[o]?u[o]+=a:u[++o]=a),(n=n[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,s.push({i:o,x:WJ(n,r)})),i=HJ.lastIndex;return i<t.length&&(a=t.slice(i),u[o]?u[o]+=a:u[++o]=a),u.length<2?s[0]?function(e){return function(t){return e(t)+""}}(s[0].x):function(e){return function(){return e}}(t):(t=s.length,function(e){for(var n,r=0;r<t;++r)u[(n=s[r]).i]=n.x(e);return u.join("")})}function XJ(e,t){var n,r=typeof t;return null==t||"boolean"===r?TJ(t):("number"===r?WJ:"string"===r?(n=sJ(t))?(t=n,OJ):GJ:t instanceof sJ?OJ:t instanceof Date?UJ:LJ(t)?zJ:Array.isArray(t)?jJ:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?VJ:WJ)(e,t)}function YJ(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function KJ(e){return+e}var $J=[0,1];function QJ(e){return e}function JJ(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function e0(e,t,n){var r=e[0],a=e[1],i=t[0],o=t[1];return a<r?(r=JJ(a,r),i=n(o,i)):(r=JJ(r,a),i=n(i,o)),function(e){return i(r(e))}}function t0(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=JJ(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(t){var n=WQ(e,t,1,r)-1;return i[n](a[n](t))}}function n0(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function r0(){var e,t,n,r,a,i,o=$J,u=$J,s=XJ,c=QJ;function l(){var e=Math.min(o.length,u.length);return c!==QJ&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(o[0],o[e-1])),r=e>2?t0:e0,a=i=null,f}function f(t){return null==t||isNaN(t=+t)?n:(a||(a=r(o.map(e),u,s)))(e(c(t)))}return f.invert=function(n){return c(t((i||(i=r(u,o.map(e),WJ)))(n)))},f.domain=function(e){return arguments.length?(o=Array.from(e,KJ),l()):o.slice()},f.range=function(e){return arguments.length?(u=Array.from(e),l()):u.slice()},f.rangeRound=function(e){return u=Array.from(e),s=YJ,l()},f.clamp=function(e){return arguments.length?(c=!!e||QJ,l()):c!==QJ},f.interpolate=function(e){return arguments.length?(s=e,l()):s},f.unknown=function(e){return arguments.length?(n=e,f):n},function(n,r){return e=n,t=r,l()}}function a0(){return r0()(QJ,QJ)}function i0(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function o0(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}function u0(e,t,n,r){var a,i=eY(e,t,n);switch((r=rY(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(a=uY(i,o))||(r.precision=a),vY(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(a=sY(i,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=a-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(a=cY(i))||(r.precision=a-2*("%"===r.type))}return pY(r)}function s0(e){var t=e.domain;return e.ticks=function(e){var n=t();return QX(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return u0(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,a,i=t(),o=0,u=i.length-1,s=i[o],c=i[u],l=10;for(c<s&&(a=s,s=c,c=a,a=o,o=u,u=a);l-- >0;){if((a=JX(s,c,n))===r)return i[o]=s,i[u]=c,t(i);if(a>0)s=Math.floor(s/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;s=Math.ceil(s*a)/a,c=Math.floor(c*a)/a}r=a}return e},e}function c0(e,t){var n,r=0,a=(e=e.slice()).length-1,i=e[r],o=e[a];return o<i&&(n=r,r=a,a=n,n=i,i=o,o=n),e[r]=t.floor(i),e[a]=t.ceil(o),e}function l0(e){return Math.log(e)}function f0(e){return Math.exp(e)}function h0(e){return-Math.log(-e)}function d0(e){return-Math.exp(-e)}function p0(e){return isFinite(e)?+("1e"+e):e<0?0:e}function v0(e){return function(t,n){return-e(-t,n)}}function g0(e){var t,n,r=e(l0,f0),a=r.domain,i=10;function o(){return t=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}(i),n=function(e){return 10===e?p0:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(i),a()[0]<0?(t=v0(t),n=v0(n),e(h0,d0)):e(l0,f0),r}return r.base=function(e){return arguments.length?(i=+e,o()):i},r.domain=function(e){return arguments.length?(a(e),o()):a()},r.ticks=function(e){var r=a(),o=r[0],u=r[r.length-1],s=u<o;if(s){var c=[u,o];o=c[0],u=c[1]}var l,f,h=t(o),d=t(u),p=null==e?10:+e,v=[];if(!(i%1)&&d-h<p){if(h=Math.floor(h),d=Math.ceil(d),o>0){for(;h<=d;++h)for(l=1;l<i;++l)if(!((f=h<0?l/n(-h):l*n(h))<o)){if(f>u)break;v.push(f)}}else for(;h<=d;++h)for(l=i-1;l>=1;--l)if(!((f=h>0?l/n(-h):l*n(h))<o)){if(f>u)break;v.push(f)}2*v.length<p&&(v=QX(o,u,p))}else v=QX(h,d,Math.min(d-h,p)).map(n);return s?v.reverse():v},r.tickFormat=function(e,a){if(null==e&&(e=10),null==a&&(a=10===i?"s":","),"function"!==typeof a&&(i%1||null!=(a=rY(a)).precision||(a.trim=!0),a=pY(a)),e===1/0)return a;var o=Math.max(1,i*e/r.ticks().length);return function(e){var r=e/n(Math.round(t(e)));return r*i<i-.5&&(r*=i),r<=o?a(e):""}},r.nice=function(){return a(c0(a(),{floor:function(e){return n(Math.floor(t(e)))},ceil:function(e){return n(Math.ceil(t(e)))}}))},r}function m0(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function y0(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function b0(e){return e<0?-e*e:e*e}function x0(e){var t=e(QJ,QJ),n=1;function r(){return 1===n?e(QJ,QJ):.5===n?e(y0,b0):e(m0(n),m0(1/n))}return t.exponent=function(e){return arguments.length?(n=+e,r()):n},s0(t)}function w0(){var e=x0(r0());return e.copy=function(){return n0(e,w0()).exponent(e.exponent())},i0.apply(e,arguments),e}function k0(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function _0(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function S0(e){var t=1,n=e(k0(t),_0(t));return n.constant=function(n){return arguments.length?e(k0(t=+n),_0(t)):t},s0(n)}function C0(e,t,n,r,a,i){var o=[[nK,1,kY],[nK,5,5e3],[nK,15,15e3],[nK,30,3e4],[i,1,_Y],[i,5,3e5],[i,15,9e5],[i,30,18e5],[a,1,SY],[a,3,108e5],[a,6,216e5],[a,12,432e5],[r,1,CY],[r,2,1728e5],[n,1,EY],[t,1,AY],[t,3,7776e6],[e,1,NY]];function u(t,n,r){var a=Math.abs(n-t)/r,i=zQ((function(e){return(0,gc.Z)(e,3)[2]})).right(o,a);if(i===o.length)return e.every(eY(t/NY,n/NY,r));if(0===i)return rK.every(Math.max(eY(t,n,r),1));var u=(0,gc.Z)(o[a/o[i-1][2]<o[i][2]/a?i-1:i],2),s=u[0],c=u[1];return s.every(c)}return[function(e,t,n){var r=t<e;if(r){var a=[t,e];e=a[0],t=a[1]}var i=n&&"function"===typeof n.range?n:u(e,t,n),o=i?i.range(e,+t+1):[];return r?o.reverse():o},u]}var E0=C0(YY,$Y,jY,DY,JY,tK),A0=(0,gc.Z)(E0,2),N0=A0[0],T0=A0[1],M0=C0(XY,KY,IY,TY,QY,eK),D0=(0,gc.Z)(M0,2),F0=D0[0],I0=D0[1];function O0(e){return new Date(e)}function R0(e){return e instanceof Date?+e:+new Date(+e)}function Z0(e,t,n,r,a,i,o,u,s,c){var l=a0(),f=l.invert,h=l.domain,d=c(".%L"),p=c(":%S"),v=c("%I:%M"),g=c("%I %p"),m=c("%a %d"),y=c("%b %d"),b=c("%B"),x=c("%Y");function w(e){return(s(e)<e?d:u(e)<e?p:o(e)<e?v:i(e)<e?g:r(e)<e?a(e)<e?m:y:n(e)<e?b:x)(e)}return l.invert=function(e){return new Date(f(e))},l.domain=function(e){return arguments.length?h(Array.from(e,R0)):h().map(O0)},l.ticks=function(t){var n=h();return e(n[0],n[n.length-1],null==t?10:t)},l.tickFormat=function(e,t){return null==t?w:c(t)},l.nice=function(e){var n=h();return e&&"function"===typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?h(c0(n,e)):l},l.copy=function(){return n0(l,Z0(e,t,n,r,a,i,o,u,s,c))},l}function B0(){var e,t,n,r,a,i=0,o=1,u=QJ,s=!1;function c(t){return null==t||isNaN(t=+t)?a:u(0===n?.5:(t=(r(t)-e)*n,s?Math.max(0,Math.min(1,t)):t))}function l(e){return function(t){var n,r,a,i;return arguments.length?(n=t,a=(r=(0,gc.Z)(n,2))[0],i=r[1],u=e(a,i),c):[u(0),u(1)]}}return c.domain=function(a){var u,s;return arguments.length?(u=a,s=(0,gc.Z)(u,2),i=s[0],o=s[1],e=r(i=+i),t=r(o=+o),n=e===t?0:1/(t-e),c):[i,o]},c.clamp=function(e){return arguments.length?(s=!!e,c):s},c.interpolator=function(e){return arguments.length?(u=e,c):u},c.range=l(XJ),c.rangeRound=l(YJ),c.unknown=function(e){return arguments.length?(a=e,c):a},function(a){return r=a,e=a(i),t=a(o),n=e===t?0:1/(t-e),c}}function z0(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function L0(){var e=s0(B0()(QJ));return e.copy=function(){return z0(e,L0())},o0.apply(e,arguments)}function P0(){var e=x0(B0());return e.copy=function(){return z0(e,P0()).exponent(e.exponent())},o0.apply(e,arguments)}function j0(e,t){void 0===t&&(t=e,e=XJ);for(var n=0,r=t.length-1,a=t[0],i=new Array(r<0?0:r);n<r;)i[n]=e(a,a=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return i[t](e-t)}}function U0(){var e,t,n,r,a,i,o,u=0,s=.5,c=1,l=1,f=QJ,h=!1;function d(e){return isNaN(e=+e)?o:(e=.5+((e=+i(e))-t)*(l*e<l*t?r:a),f(h?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var n,r,a,i,o;return arguments.length?(n=t,a=(r=(0,gc.Z)(n,3))[0],i=r[1],o=r[2],f=j0(e,[a,i,o]),d):[f(0),f(.5),f(1)]}}return d.domain=function(o){var f,h;return arguments.length?(f=o,h=(0,gc.Z)(f,3),u=h[0],s=h[1],c=h[2],e=i(u=+u),t=i(s=+s),n=i(c=+c),r=e===t?0:.5/(t-e),a=t===n?0:.5/(n-t),l=t<e?-1:1,d):[u,s,c]},d.clamp=function(e){return arguments.length?(h=!!e,d):h},d.interpolator=function(e){return arguments.length?(f=e,d):f},d.range=p(XJ),d.rangeRound=p(YJ),d.unknown=function(e){return arguments.length?(o=e,d):o},function(o){return i=o,e=o(u),t=o(s),n=o(c),r=e===t?0:.5/(t-e),a=t===n?0:.5/(n-t),l=t<e?-1:1,d}}function W0(){var e=x0(U0());return e.copy=function(){return z0(e,W0()).exponent(e.exponent())},o0.apply(e,arguments)}function V0(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:PQ;if((r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,i=Math.floor(a),o=+n(e[i],i,e),u=+n(e[i+1],i+1,e);return o+(u-o)*(a-i)}}var q0=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y0;if((0,ud.Z)(this,n),r=t.call(this),Object.defineProperties((0,By.Z)(r),{_intern:{value:new Map},_key:{value:a}}),null!=e){var i,o=(0,zt.Z)(e);try{for(o.s();!(i=o.n()).done;){var u=(0,gc.Z)(i.value,2),s=u[0],c=u[1];r.set(s,c)}}catch(l){o.e(l)}finally{o.f()}}return r}return(0,sd.Z)(n,[{key:"get",value:function(e){return(0,zy.Z)((0,Ly.Z)(n.prototype),"get",this).call(this,H0(this,e))}},{key:"has",value:function(e){return(0,zy.Z)((0,Ly.Z)(n.prototype),"has",this).call(this,H0(this,e))}},{key:"set",value:function(e,t){return(0,zy.Z)((0,Ly.Z)(n.prototype),"set",this).call(this,G0(this,e),t)}},{key:"delete",value:function(e){return(0,zy.Z)((0,Ly.Z)(n.prototype),"delete",this).call(this,X0(this,e))}}]),n}((0,Uy.Z)(Map));Set;function H0(e,t){var n=e._intern,r=(0,e._key)(t);return n.has(r)?n.get(r):t}function G0(e,t){var n=e._intern,r=(0,e._key)(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function X0(e,t){var n=e._intern,r=(0,e._key)(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function Y0(e){return null!==e&&"object"===typeof e?e.valueOf():e}var K0=Symbol("implicit");function $0(){var e=new q0,t=[],n=[],r=K0;function a(a){var i=e.get(a);if(void 0===i){if(r!==K0)return r;e.set(a,i=t.push(a)-1)}return n[i%n.length]}return a.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new q0;var r,i=(0,zt.Z)(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;e.has(o)||e.set(o,t.push(o)-1)}}catch(u){i.e(u)}finally{i.f()}return a},a.range=function(e){return arguments.length?(n=Array.from(e),a):n.slice()},a.unknown=function(e){return arguments.length?(r=e,a):r},a.copy=function(){return $0(t,n).unknown(r)},i0.apply(a,arguments),a}function Q0(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function J0(e,t){var n=DJ(+e,+t);return function(e){var t=n(e);return t-360*Math.floor(t/360)}}var e1,t1=180/Math.PI,n1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function r1(e,t,n,r,a,i){var o,u,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:a,translateY:i,rotate:Math.atan2(t,e)*t1,skewX:Math.atan(s)*t1,scaleX:o,scaleY:u}}function a1(e,t,n,r){function a(e){return e.length?e.pop()+" ":""}return function(i,o){var u=[],s=[];return i=e(i),o=e(o),function(e,r,a,i,o,u){if(e!==a||r!==i){var s=o.push("translate(",null,t,null,n);u.push({i:s-4,x:WJ(e,a)},{i:s-2,x:WJ(r,i)})}else(a||i)&&o.push("translate("+a+t+i+n)}(i.translateX,i.translateY,o.translateX,o.translateY,u,s),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(a(n)+"rotate(",null,r)-2,x:WJ(e,t)})):t&&n.push(a(n)+"rotate("+t+r)}(i.rotate,o.rotate,u,s),function(e,t,n,i){e!==t?i.push({i:n.push(a(n)+"skewX(",null,r)-2,x:WJ(e,t)}):t&&n.push(a(n)+"skewX("+t+r)}(i.skewX,o.skewX,u,s),function(e,t,n,r,i,o){if(e!==n||t!==r){var u=i.push(a(i)+"scale(",null,",",null,")");o.push({i:u-4,x:WJ(e,n)},{i:u-2,x:WJ(t,r)})}else 1===n&&1===r||i.push(a(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,o.scaleX,o.scaleY,u,s),i=o=null,function(e){for(var t,n=-1,r=s.length;++n<r;)u[(t=s[n]).i]=t.x(e);return u.join("")}}}var i1=a1((function(e){var t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?n1:r1(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),o1=a1((function(e){return null==e?n1:(e1||(e1=document.createElementNS("http://www.w3.org/2000/svg","g")),e1.setAttribute("transform",e),(e=e1.transform.baseVal.consolidate())?r1((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):n1)}),", ",")",")");function u1(e){return((e=Math.exp(e))+1/e)/2}var s1=function e(t,n,r){function a(e,a){var i,o,u=e[0],s=e[1],c=e[2],l=a[0],f=a[1],h=a[2],d=l-u,p=f-s,v=d*d+p*p;if(v<1e-12)o=Math.log(h/c)/t,i=function(e){return[u+e*d,s+e*p,c*Math.exp(t*e*o)]};else{var g=Math.sqrt(v),m=(h*h-c*c+r*v)/(2*c*n*g),y=(h*h-c*c-r*v)/(2*h*n*g),b=Math.log(Math.sqrt(m*m+1)-m),x=Math.log(Math.sqrt(y*y+1)-y);o=(x-b)/t,i=function(e){var r=e*o,a=u1(b),i=c/(n*g)*(a*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(t*r+b)-function(e){return((e=Math.exp(e))-1/e)/2}(b));return[u+i*d,s+i*p,c*a/u1(t*r+b)]}}return i.duration=1e3*o*t/Math.SQRT2,i}return a.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},a}(Math.SQRT2,2,4);function c1(e){return function(t,n){var r=e((t=wJ(t)).h,(n=wJ(n)).h),a=IJ(t.s,n.s),i=IJ(t.l,n.l),o=IJ(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=a(e),t.l=i(e),t.opacity=o(e),t+""}}}var l1=c1(DJ),f1=c1(IJ),h1=Math.PI/180,d1=180/Math.PI,p1=.96422,v1=.82521,g1=4/29,m1=6/29,y1=.12841854934601665;function b1(e){if(e instanceof w1)return new w1(e.l,e.a,e.b,e.opacity);if(e instanceof N1)return T1(e);e instanceof dJ||(e=fJ(e));var t,n,r=C1(e.r),a=C1(e.g),i=C1(e.b),o=k1((.2225045*r+.7168786*a+.0606169*i)/1);return r===a&&a===i?t=n=o:(t=k1((.4360747*r+.3850649*a+.1430804*i)/p1),n=k1((.0139322*r+.0971045*a+.7141733*i)/v1)),new w1(116*o-16,500*(t-o),200*(o-n),e.opacity)}function x1(e,t,n,r){return 1===arguments.length?b1(e):new w1(e,t,n,null==r?1:r)}function w1(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function k1(e){return e>.008856451679035631?Math.pow(e,1/3):e/y1+g1}function _1(e){return e>m1?e*e*e:y1*(e-g1)}function S1(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function C1(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function E1(e){if(e instanceof N1)return new N1(e.h,e.c,e.l,e.opacity);if(e instanceof w1||(e=b1(e)),0===e.a&&0===e.b)return new N1(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*d1;return new N1(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function A1(e,t,n,r){return 1===arguments.length?E1(e):new N1(e,t,n,null==r?1:r)}function N1(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function T1(e){if(isNaN(e.h))return new w1(e.l,0,0,e.opacity);var t=e.h*h1;return new w1(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}function M1(e,t){var n=IJ((e=x1(e)).l,(t=x1(t)).l),r=IJ(e.a,t.a),a=IJ(e.b,t.b),i=IJ(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=a(t),e.opacity=i(t),e+""}}function D1(e){return function(t,n){var r=e((t=A1(t)).h,(n=A1(n)).h),a=IJ(t.c,n.c),i=IJ(t.l,n.l),o=IJ(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=a(e),t.l=i(e),t.opacity=o(e),t+""}}}VQ(w1,x1,qQ(HQ,{brighter:function(e){return new w1(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new w1(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new dJ(S1(3.1338561*(t=p1*_1(t))-1.6168667*(e=1*_1(e))-.4906146*(n=v1*_1(n))),S1(-.9787684*t+1.9161415*e+.033454*n),S1(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),VQ(N1,A1,qQ(HQ,{brighter:function(e){return new N1(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new N1(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return T1(this).rgb()}}));var F1=D1(DJ),I1=D1(IJ),O1=-.14861,R1=1.78277,Z1=-.29227,B1=-.90649,z1=1.97294,L1=-1.7884503806,P1=3.5172982438,j1=-.6557636667999999;function U1(e){if(e instanceof V1)return new V1(e.h,e.s,e.l,e.opacity);e instanceof dJ||(e=fJ(e));var t=e.r/255,n=e.g/255,r=e.b/255,a=(j1*r+L1*t-P1*n)/-5.9615122912,i=r-a,o=(z1*(n-a)-Z1*i)/B1,u=Math.sqrt(o*o+i*i)/(z1*a*(1-a)),s=u?Math.atan2(o,i)*d1-120:NaN;return new V1(s<0?s+360:s,u,a,e.opacity)}function W1(e,t,n,r){return 1===arguments.length?U1(e):new V1(e,t,n,null==r?1:r)}function V1(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function q1(e){return function t(n){function r(t,r){var a=e((t=W1(t)).h,(r=W1(r)).h),i=IJ(t.s,r.s),o=IJ(t.l,r.l),u=IJ(t.opacity,r.opacity);return function(e){return t.h=a(e),t.s=i(e),t.l=o(Math.pow(e,n)),t.opacity=u(e),t+""}}return n=+n,r.gamma=t,r}(1)}VQ(V1,W1,qQ(HQ,{brighter:function(e){return e=null==e?XQ:Math.pow(XQ,e),new V1(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?GQ:Math.pow(GQ,e),new V1(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*h1,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),a=Math.sin(e);return new dJ(255*(t+n*(O1*r+R1*a)),255*(t+n*(Z1*r+B1*a)),255*(t+n*(z1*r)),this.opacity)}}));var H1,G1,X1=q1(DJ),Y1=q1(IJ);function K1(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var $1="linear",Q1="log",J1="pow",e2="sqrt",t2="symlog",n2="time",r2="utc",a2="sequential",i2="diverging",o2="quantile",u2="quantize",s2="threshold",c2="continuous",l2="discrete",f2="discretizing",h2="interpolating",d2="temporal";function p2(){var e,t,n=$0().unknown(void 0),r=n.domain,a=n.range,i=[0,1],o=!1,u=0,s=0,c=.5;function l(){var n=r().length,l=i[1]<i[0],f=i[1-l],h=function(e,t,n){var r=e-t+2*n;return e?r>0?r:1:0}(n,u,s),d=i[l-0];e=(f-d)/(h||1),o&&(e=Math.floor(e)),d+=(f-d-e*(n-u))*c,t=e*(1-u),o&&(d=Math.round(d),t=Math.round(t));var p=function(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),i=new Array(a);++r<a;)i[r]=e+r*n;return i}(n).map((function(t){return d+e*t}));return a(l?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),l()):r()},n.range=function(e){return arguments.length?(i=[+e[0],+e[1]],l()):i.slice()},n.rangeRound=function(e){return i=[+e[0],+e[1]],o=!0,l()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(o=!!e,l()):o},n.padding=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),u=s,l()):u},n.paddingInner=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),l()):u},n.paddingOuter=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),l()):s},n.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),l()):c},n.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var n,o,u,s=i[1]<i[0],c=s?a().reverse():a(),l=c.length-1,f=+e[0],h=+e[1];if(f===f&&h===h&&(h<f&&(u=f,f=h,h=u),!(h<c[0]||f>i[1-s])))return n=Math.max(0,UQ(c,f)-1),o=f===h?n:UQ(c,h)-1,f-c[n]>t+1e-10&&++n,s&&(u=n,n=l-o,o=l-u),n>o?void 0:r().slice(n,o+1)}},n.invert=function(e){var t=n.invertRange([e,e]);return t?t[0]:t},n.copy=function(){return p2().domain(r()).range(i).round(o).paddingInner(u).paddingOuter(s).align(c)},l()}function v2(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return v2(t())},e}var g2=Array.prototype.map;function m2(e){return g2.call(e,vG)}var y2=Array.prototype.slice;var b2=new Map,x2=Symbol("vega_scale");function w2(e,t,n){var r=function(){var n=t();return n.invertRange||(n.invertRange=n.invert?function(e){return function(t){var n,r=t[0],a=t[1];return a<r&&(n=r,r=a,a=n),[e.invert(r),e.invert(a)]}}(n):n.invertExtent?function(e){return function(t){var n,r,a,i,o=e.range(),u=t[0],s=t[1],c=-1;for(s<u&&(r=u,u=s,s=r),a=0,i=o.length;a<i;++a)o[a]>=u&&o[a]<=s&&(c<0&&(c=a),n=a);if(!(c<0))return u=e.invertExtent(o[c]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}}(n):void 0),n.type=e,function(e){return e[x2]=!0,e}(n)};return r.metadata=CG(gG(n)),r}function k2(e,t,n){return arguments.length>1?(b2.set(e,w2(e,t,n)),this):_2(e)?b2.get(e):void 0}function _2(e){return b2.has(e)}function S2(e,t){var n=b2.get(e);return n&&n.metadata[t]}function C2(e){return S2(e,l2)}k2("identity",(function e(t){var n;function r(e){return null==e||isNaN(e=+e)?n:e}return r.invert=r,r.domain=r.range=function(e){return arguments.length?(t=Array.from(e,KJ),r):t.slice()},r.unknown=function(e){return arguments.length?(n=e,r):n},r.copy=function(){return e(t).unknown(n)},t=arguments.length?Array.from(t,KJ):[0,1],s0(r)})),k2($1,(function e(){var t=a0();return t.copy=function(){return n0(t,e())},i0.apply(t,arguments),s0(t)}),c2),k2(Q1,(function e(){var t=g0(r0()).domain([1,10]);return t.copy=function(){return n0(t,e()).base(t.base())},i0.apply(t,arguments),t}),[c2,Q1]),k2(J1,w0,c2),k2(e2,(function(){return w0.apply(null,arguments).exponent(.5)}),c2),k2(t2,(function e(){var t=S0(r0());return t.copy=function(){return n0(t,e()).constant(t.constant())},i0.apply(t,arguments)}),c2),k2(n2,(function(){return i0.apply(Z0(F0,I0,XY,KY,IY,TY,QY,eK,nK,WK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}),[c2,d2]),k2(r2,(function(){return i0.apply(Z0(N0,T0,YY,$Y,jY,MY,JY,tK,nK,qK).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}),[c2,d2]),k2(a2,L0,[c2,h2]),k2("".concat(a2,"-").concat($1),L0,[c2,h2]),k2("".concat(a2,"-").concat(Q1),(function e(){var t=g0(B0()).domain([1,10]);return t.copy=function(){return z0(t,e()).base(t.base())},o0.apply(t,arguments)}),[c2,h2,Q1]),k2("".concat(a2,"-").concat(J1),P0,[c2,h2]),k2("".concat(a2,"-").concat(e2),(function(){return P0.apply(null,arguments).exponent(.5)}),[c2,h2]),k2("".concat(a2,"-").concat(t2),(function e(){var t=S0(B0());return t.copy=function(){return z0(t,e()).constant(t.constant())},o0.apply(t,arguments)}),[c2,h2]),k2("".concat(i2,"-").concat($1),(function e(){var t=s0(U0()(QJ));return t.copy=function(){return z0(t,e())},o0.apply(t,arguments)}),[c2,h2]),k2("".concat(i2,"-").concat(Q1),(function e(){var t=g0(U0()).domain([.1,1,10]);return t.copy=function(){return z0(t,e()).base(t.base())},o0.apply(t,arguments)}),[c2,h2,Q1]),k2("".concat(i2,"-").concat(J1),W0,[c2,h2]),k2("".concat(i2,"-").concat(e2),(function(){return W0.apply(null,arguments).exponent(.5)}),[c2,h2]),k2("".concat(i2,"-").concat(t2),(function e(){var t=S0(U0());return t.copy=function(){return z0(t,e()).constant(t.constant())},o0.apply(t,arguments)}),[c2,h2]),k2(o2,(function e(){var t,n=[],r=[],a=[];function i(){var e=0,t=Math.max(1,r.length);for(a=new Array(t-1);++e<t;)a[e-1]=V0(n,e/t);return o}function o(e){return null==e||isNaN(e=+e)?t:r[WQ(a,e)]}return o.invertExtent=function(e){var t=r.indexOf(e);return t<0?[NaN,NaN]:[t>0?a[t-1]:n[0],t<a.length?a[t]:n[n.length-1]]},o.domain=function(e){if(!arguments.length)return n.slice();n=[];var t,r=(0,zt.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;null==a||isNaN(a=+a)||n.push(a)}}catch(o){r.e(o)}finally{r.f()}return n.sort(ZQ),i()},o.range=function(e){return arguments.length?(r=Array.from(e),i()):r.slice()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.quantiles=function(){return a.slice()},o.copy=function(){return e().domain(n).range(r).unknown(t)},i0.apply(o,arguments)}),[f2,o2]),k2(u2,(function e(){var t,n=0,r=1,a=1,i=[.5],o=[0,1];function u(e){return null!=e&&e<=e?o[WQ(i,e,0,a)]:t}function s(){var e=-1;for(i=new Array(a);++e<a;)i[e]=((e+1)*r-(e-a)*n)/(a+1);return u}return u.domain=function(e){var t,a;return arguments.length?(t=e,a=(0,gc.Z)(t,2),n=a[0],r=a[1],n=+n,r=+r,s()):[n,r]},u.range=function(e){return arguments.length?(a=(o=Array.from(e)).length-1,s()):o.slice()},u.invertExtent=function(e){var t=o.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,i[0]]:t>=a?[i[a-1],r]:[i[t-1],i[t]]},u.unknown=function(e){return arguments.length?(t=e,u):u},u.thresholds=function(){return i.slice()},u.copy=function(){return e().domain([n,r]).range(o).unknown(t)},i0.apply(s0(u),arguments)}),f2),k2(s2,(function e(){var t,n=[.5],r=[0,1],a=1;function i(e){return null!=e&&e<=e?r[WQ(n,e,0,a)]:t}return i.domain=function(e){return arguments.length?(n=Array.from(e),a=Math.min(n.length,r.length-1),i):n.slice()},i.range=function(e){return arguments.length?(r=Array.from(e),a=Math.min(n.length,r.length-1),i):r.slice()},i.invertExtent=function(e){var t=r.indexOf(e);return[n[t-1],n[t]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return e().domain(n).range(r).unknown(t)},i0.apply(i,arguments)}),f2),k2("bin-ordinal",(function e(){var t=[],n=[];function r(e){return null==e||e!==e?void 0:n[(WQ(t,e)-1)%n.length]}return r.domain=function(e){return arguments.length?(t=m2(e),r):t.slice()},r.range=function(e){return arguments.length?(n=y2.call(e),r):n.slice()},r.tickFormat=function(e,n){return u0(t[0],pG(t),null==e?10:e,n)},r.copy=function(){return e().domain(r.domain()).range(r.range())},r}),[l2,f2]),k2("ordinal",$0,l2),k2("band",p2,l2),k2("point",(function(){return v2(p2().paddingInner(1))}),l2);function E2(e,t,n){return j0(function(e,t){var n=m[function(e){return"interpolate"+e.toLowerCase().split("-").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("")}(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}(t||"rgb",n),e)}function A2(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function N2(e,t){for(var n in e)M2(n,t(e[n]))}var T2={};function M2(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(T2[e]=t,this):T2[e]}N2({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},A2),N2({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(function(e){return E2(A2(e))}));var D2=function(e){return hG(e)?e.map((function(e){return String(e)})):String(e)},F2=function(e,t){return e[1]-t[1]},I2=function(e,t){return t[1]-e[1]};function O2(e,t){return e.bins?function(e,t,n){var r=e.range(),a=r[0],i=pG(r),o=F2;if(a>i&&(r=i,i=a,a=r,o=I2),a=Math.floor(a),i=Math.ceil(i),t=t.map((function(t){return[t,e(t)]})).filter((function(e){return a<=e[1]&&e[1]<=i})).sort(o).map((function(e){return e[0]})),n>0&&t.length>1){for(var u=[t[0],pG(t)];t.length>n&&t.length>=3;)t=t.filter((function(e,t){return!(t%2)}));t.length<3&&(t=u)}return t}(e,e.bins):e.ticks?e.ticks(t):e.domain()}function R2(e,t,n,r,a,i){var o=t.type,u=D2;if(o===n2||a===n2)u=e.timeFormat(r);else if(o===r2||a===r2)u=e.utcFormat(r);else if(function(e){return S2(e,Q1)}(o)){var s=e.formatFloat(r);if(i||t.bins)u=s;else{var c=Z2(t,n,!1);u=function(e){return c(e)?s(e):""}}}else if(t.tickFormat){var l=t.domain();u=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(u=e.format(r));return u}function Z2(e,t,n){var r=O2(e,t),a=e.base(),i=Math.log(a),o=Math.max(1,a*t/r.length),u=function(e){var t=e/Math.pow(a,Math.round(Math.log(e)/i));return t*a<a-.5&&(t*=a),t<=o};return n?r.filter(u):u}var B2=(H1={},(0,Ir.Z)(H1,o2,"quantiles"),(0,Ir.Z)(H1,u2,"thresholds"),(0,Ir.Z)(H1,s2,"domain"),H1),z2=(G1={},(0,Ir.Z)(G1,o2,"quantiles"),(0,Ir.Z)(G1,u2,"domain"),G1);function L2(e,t){return e.bins?function(e){var t=e.slice(0,-1);return t.max=pG(e),t}(e.bins):e.type===Q1?Z2(e,t,!0):B2[e.type]?function(e){var t=[-1/0].concat(e);return t.max=1/0,t}(e[B2[e.type]]()):O2(e,t)}function P2(e,t,n,r,a,i,o){var u=z2[t.type]&&i!==n2&&i!==r2?function(e,t,n){var r,a=t[z2[t.type]](),i=a.length,o=i>1?a[1]-a[0]:a[0];for(r=1;r<i;++r)o=Math.min(o,a[r]-a[r-1]);return e.formatSpan(0,o,30,n)}(e,t,a):R2(e,t,n,a,i,o);return"symbol"===r&&function(e){return B2[e.type]||e.bins}(t)?j2(u):"discrete"===r?W2(u):V2(u)}var j2=function(e){return function(t,n,r){var a=U2(r[n+1],U2(r.max,1/0)),i=q2(t,e),o=q2(a,e);return i&&o?i+" \u2013 "+o:o?"< "+o:"\u2265 "+i}},U2=function(e,t){return null!=e?e:t},W2=function(e){return function(t,n){return n?e(t):null}},V2=function(e){return function(t){return e(t)}},q2=function(e,t){return Number.isFinite(e)?t(e):null};function H2(e,t,n,r){var a=r||t.type;return _G(n)&&function(e){return S2(e,d2)}(a)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||a!==n2?n||a!==r2?P2(e,t,5,null,n,r,!0):e.utcFormat("%A, %d %B %Y, %X UTC"):e.timeFormat("%A, %d %B %Y, %X")}function G2(e,t,n){n=n||{};var r=Math.max(3,n.maxlen||7),a=H2(e,t,n.format,n.formatType);if(function(e){return S2(e,f2)}(t.type)){var i=L2(t).slice(1).map(a),o=i.length;return"".concat(o," boundar").concat(1===o?"y":"ies",": ").concat(i.join(", "))}if(C2(t.type)){var u=t.domain(),s=u.length,c=s>r?u.slice(0,r-2).map(a).join(", ")+", ending with "+u.slice(-1).map(a):u.map(a).join(", ");return"".concat(s," value").concat(1===s?"":"s",": ").concat(c)}var l=t.domain();return"values from ".concat(a(l[0])," to ").concat(a(pG(l)))}var X2=0;var Y2="p_";function K2(e){return e&&e.gradient}function $2(e,t,n){var r=e.gradient,a=e.id,i="radial"===r?Y2:"";return a||(a=e.id="gradient_"+X2++,"radial"===r?(e.x1=Q2(e.x1,.5),e.y1=Q2(e.y1,.5),e.r1=Q2(e.r1,0),e.x2=Q2(e.x2,.5),e.y2=Q2(e.y2,.5),e.r2=Q2(e.r2,.5),i=Y2):(e.x1=Q2(e.x1,0),e.y1=Q2(e.y1,0),e.x2=Q2(e.x2,1),e.y2=Q2(e.y2,0))),t[a]=e,"url("+(n||"")+"#"+i+a+")"}function Q2(e,t){return null!=e?e:t}function J2(e,t){var n,r=[];return n={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:r,stop:function(e,t){return r.push({offset:e,color:t}),n}}}var e3={basis:{curve:function(e){return new AG(e)}},"basis-closed":{curve:function(e){return new TG(e)}},"basis-open":{curve:function(e){return new MG(e)}},bundle:{curve:FG,tension:"beta",value:.85},cardinal:{curve:RG,tension:"tension",value:0},"cardinal-open":{curve:BG,tension:"tension",value:0},"cardinal-closed":{curve:LG,tension:"tension",value:0},"catmull-rom":{curve:tX,tension:"alpha",value:.5},"catmull-rom-closed":{curve:rX,tension:"alpha",value:.5},"catmull-rom-open":{curve:iX,tension:"alpha",value:.5},linear:{curve:uX},"linear-closed":{curve:function(e){return new sX(e)}},monotone:{horizontal:function(e){return new pX(e)},vertical:function(e){return new dX(e)}},natural:{curve:function(e){return new gX(e)}},step:{curve:function(e){return new yX(e,.5)}},"step-after":{curve:function(e){return new yX(e,1)}},"step-before":{curve:function(e){return new yX(e,0)}}};function t3(e,t,n){var r=xG(e3,e)&&e3[e],a=null;return r&&(a=r.curve||r[t||"vertical"],r.tension&&null!=n&&(a=a[r.tension](n))),a}var n3={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},r3=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/];function a3(e){var t,n,r,a,i,o,u,s,c,l,f=[],h=e.slice().replace(r3[0],"###$1").split(r3[1]).slice(1);for(u=0,c=h.length;u<c;++u){for(n=(t=h[u]).slice(1).trim().replace(r3[2],"$1###$2").replace(r3[3],"$1###$2").split(r3[4]),r=[i=t.charAt(0)],s=0,l=n.length;s<l;++s)(a=+n[s])===a&&r.push(a);if(o=n3[i.toLowerCase()],r.length-1>o){var d=r.length;for(s=1,f.push([i].concat(r.slice(s,s+=o))),i="M"===i?"L":"m"===i?"l":i;s<d;s+=o)f.push([i].concat(r.slice(s,s+o)))}else f.push(r)}return f}var i3=Math.PI/180,o3=Math.PI/2,u3=2*Math.PI,s3=Math.sqrt(3)/2,c3={},l3={},f3=[].join;function h3(e){var t=f3.call(e);if(l3[t])return l3[t];var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],u=e[5],s=e[6],c=e[7],l=c*o,f=-s*u,h=s*o,d=c*u,p=Math.cos(a),v=Math.sin(a),g=Math.cos(i),m=Math.sin(i),y=.5*(i-a),b=Math.sin(.5*y),x=8/3*b*b/Math.sin(y),w=n+p-x*v,k=r+v+x*p,_=n+g,S=r+m,C=_+x*m,E=S-x*g;return l3[t]=[l*w+f*k,h*w+d*k,l*C+f*E,h*C+d*E,l*_+f*S,h*_+d*S]}var d3=["l",0,0,0,0,0,0,0];function p3(e,t,n){var r=d3[0]=e[0];if("a"===r||"A"===r)d3[1]=t*e[1],d3[2]=n*e[2],d3[3]=e[3],d3[4]=e[4],d3[5]=e[5],d3[6]=t*e[6],d3[7]=n*e[7];else if("h"===r||"H"===r)d3[1]=t*e[1];else if("v"===r||"V"===r)d3[1]=n*e[1];else for(var a=1,i=e.length;a<i;++a)d3[a]=(a%2==1?t:n)*e[a];return d3}function v3(e,t,n,r,a,i){var o,u,s,c,l,f=null,h=0,d=0,p=0,v=0;null==n&&(n=0),null==r&&(r=0),null==a&&(a=1),null==i&&(i=a),e.beginPath&&e.beginPath();for(var g=0,m=t.length;g<m;++g){switch(o=t[g],1===a&&1===i||(o=p3(o,a,i)),o[0]){case"l":h+=o[1],d+=o[2],e.lineTo(h+n,d+r);break;case"L":h=o[1],d=o[2],e.lineTo(h+n,d+r);break;case"h":h+=o[1],e.lineTo(h+n,d+r);break;case"H":h=o[1],e.lineTo(h+n,d+r);break;case"v":d+=o[1],e.lineTo(h+n,d+r);break;case"V":d=o[1],e.lineTo(h+n,d+r);break;case"m":h+=o[1],d+=o[2],e.moveTo(h+n,d+r);break;case"M":h=o[1],d=o[2],e.moveTo(h+n,d+r);break;case"c":u=h+o[5],s=d+o[6],p=h+o[3],v=d+o[4],e.bezierCurveTo(h+o[1]+n,d+o[2]+r,p+n,v+r,u+n,s+r),h=u,d=s;break;case"C":h=o[5],d=o[6],p=o[3],v=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,p+n,v+r,h+n,d+r);break;case"s":u=h+o[3],s=d+o[4],p=2*h-p,v=2*d-v,e.bezierCurveTo(p+n,v+r,h+o[1]+n,d+o[2]+r,u+n,s+r),p=h+o[1],v=d+o[2],h=u,d=s;break;case"S":u=o[3],s=o[4],p=2*h-p,v=2*d-v,e.bezierCurveTo(p+n,v+r,o[1]+n,o[2]+r,u+n,s+r),h=u,d=s,p=o[1],v=o[2];break;case"q":u=h+o[3],s=d+o[4],p=h+o[1],v=d+o[2],e.quadraticCurveTo(p+n,v+r,u+n,s+r),h=u,d=s;break;case"Q":u=o[3],s=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,u+n,s+r),h=u,d=s,p=o[1],v=o[2];break;case"t":u=h+o[1],s=d+o[2],null===f[0].match(/[QqTt]/)?(p=h,v=d):"t"===f[0]?(p=2*h-c,v=2*d-l):"q"===f[0]&&(p=2*h-p,v=2*d-v),c=p,l=v,e.quadraticCurveTo(p+n,v+r,u+n,s+r),d=s,p=(h=u)+o[1],v=d+o[2];break;case"T":u=o[1],s=o[2],p=2*h-p,v=2*d-v,e.quadraticCurveTo(p+n,v+r,u+n,s+r),h=u,d=s;break;case"a":g3(e,h+n,d+r,[o[1],o[2],o[3],o[4],o[5],o[6]+h+n,o[7]+d+r]),h+=o[6],d+=o[7];break;case"A":g3(e,h+n,d+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),h=o[6],d=o[7];break;case"z":case"Z":e.closePath()}f=o}}function g3(e,t,n,r){for(var a=function(e,t,n,r,a,i,o,u,s){var c=f3.call(arguments);if(c3[c])return c3[c];var l=o*i3,f=Math.sin(l),h=Math.cos(l),d=h*(u-e)*.5+f*(s-t)*.5,p=h*(s-t)*.5-f*(u-e)*.5,v=d*d/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);v>1&&(n*=v=Math.sqrt(v),r*=v);var g=h/n,m=f/n,y=-f/r,b=h/r,x=g*u+m*s,w=y*u+b*s,k=g*e+m*t,_=y*e+b*t,S=1/((k-x)*(k-x)+(_-w)*(_-w))-.25;S<0&&(S=0);var C=Math.sqrt(S);i==a&&(C=-C);var E=.5*(x+k)-C*(_-w),A=.5*(w+_)+C*(k-x),N=Math.atan2(w-A,x-E),T=Math.atan2(_-A,k-E)-N;T<0&&1===i?T+=u3:T>0&&0===i&&(T-=u3);for(var M=Math.ceil(Math.abs(T/(o3+.001))),D=[],F=0;F<M;++F){var I=N+F*T/M,O=N+(F+1)*T/M;D[F]=[E,A,I,O,n,r,f,h]}return c3[c]=D}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n),i=0;i<a.length;++i){var o=h3(a[i]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}var m3=.5773502691896257,y3={circle:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,u3)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,a=n/2.5,i=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-i),e.lineTo(a,-i),e.lineTo(0,-n),e.lineTo(-a,-i),e.lineTo(-r,-i),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=s3*n,a=r-n*m3,i=n/4;e.moveTo(0,-r-a),e.lineTo(-i,r-a),e.lineTo(i,r-a),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=s3*n,a=r-n*m3;e.moveTo(0,-r-a),e.lineTo(-n,r-a),e.lineTo(n,r-a),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=s3*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=s3*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=s3*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=s3*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function b3(e){return xG(y3,e)?y3[e]:function(e){if(!xG(x3,e)){var t=a3(e);x3[e]={draw:function(e,n){v3(e,t,0,0,Math.sqrt(n)/2)}}}return x3[e]}(e)}var x3={};var w3=.448084975506;function k3(e){return e.x}function _3(e){return e.y}function S3(e){return e.width}function C3(e){return e.height}function E3(e){return"function"===typeof e?e:function(){return+e}}function A3(e,t,n){return Math.max(t,Math.min(e,n))}function N3(){var e=k3,t=_3,n=S3,r=C3,a=E3(0),i=a,o=a,u=a,s=null;function c(c,l,f){var h,d=null!=l?l:+e.call(this,c),p=null!=f?f:+t.call(this,c),v=+n.call(this,c),g=+r.call(this,c),m=Math.min(v,g)/2,y=A3(+a.call(this,c),0,m),b=A3(+i.call(this,c),0,m),x=A3(+o.call(this,c),0,m),w=A3(+u.call(this,c),0,m);if(s||(s=h=CX()),y<=0&&b<=0&&x<=0&&w<=0)s.rect(d,p,v,g);else{var k=d+v,_=p+g;s.moveTo(d+y,p),s.lineTo(k-b,p),s.bezierCurveTo(k-w3*b,p,k,p+w3*b,k,p+b),s.lineTo(k,_-w),s.bezierCurveTo(k,_-w3*w,k-w3*w,_,k-w,_),s.lineTo(d+x,_),s.bezierCurveTo(d+w3*x,_,d,_-w3*x,d,_-x),s.lineTo(d,p+y),s.bezierCurveTo(d,p+w3*y,d+w3*y,p,d+y,p),s.closePath()}if(h)return s=null,h+""||null}return c.x=function(t){return arguments.length?(e=E3(t),c):e},c.y=function(e){return arguments.length?(t=E3(e),c):t},c.width=function(e){return arguments.length?(n=E3(e),c):n},c.height=function(e){return arguments.length?(r=E3(e),c):r},c.cornerRadius=function(e,t,n,r){return arguments.length?(a=E3(e),i=null!=t?E3(t):a,u=null!=n?E3(n):a,o=null!=r?E3(r):i,c):a},c.context=function(e){return arguments.length?(s=null==e?null:e,c):s},c}function T3(){var e,t,n,r,a,i,o,u,s=null;function c(e,t,n){var r=n/2;if(a){var c=o-t,l=e-i;if(c||l){var f=Math.sqrt(c*c+l*l),h=(c/=f)*u,d=(l/=f)*u,p=Math.atan2(l,c);s.moveTo(i-h,o-d),s.lineTo(e-c*r,t-l*r),s.arc(e,t,r,p-Math.PI,p),s.lineTo(i+h,o+d),s.arc(i,o,u,p,p+Math.PI)}else s.arc(e,t,r,0,u3);s.closePath()}else a=1;i=e,o=t,u=r}function l(i){var o,u,l,f=i.length,h=!1;for(null==s&&(s=l=CX()),o=0;o<=f;++o)!(o<f&&r(u=i[o],o,i))===h&&(h=!h)&&(a=0),h&&c(+e(u,o,i),+t(u,o,i),+n(u,o,i));if(l)return s=null,l+""||null}return l.x=function(t){return arguments.length?(e=t,l):e},l.y=function(e){return arguments.length?(t=e,l):t},l.size=function(e){return arguments.length?(n=e,l):n},l.defined=function(e){return arguments.length?(r=e,l):r},l.context=function(e){return arguments.length?(s=null==e?null:e,l):s},l}function M3(e,t){return null!=e?e:t}var D3=function(e){return e.x||0},F3=function(e){return e.y||0},I3=function(e){return!(!1===e.defined)},O3=function(){var e=AX,t=NX,n=EX(0),r=null,a=TX,i=MX,o=DX,u=null;function s(){var s,c,l=+e.apply(this,arguments),f=+t.apply(this,arguments),h=a.apply(this,arguments)-YG,d=i.apply(this,arguments)-YG,p=PG(d-h),v=d>h;if(u||(u=s=CX()),f<l&&(c=f,f=l,l=c),f>GG)if(p>KG-GG)u.moveTo(f*UG(h),f*qG(h)),u.arc(0,0,f,h,d,!v),l>GG&&(u.moveTo(l*UG(d),l*qG(d)),u.arc(0,0,l,d,h,v));else{var g,m,y=h,b=d,x=h,w=d,k=p,_=p,S=o.apply(this,arguments)/2,C=S>GG&&(r?+r.apply(this,arguments):HG(l*l+f*f)),E=VG(PG(f-l)/2,+n.apply(this,arguments)),A=E,N=E;if(C>GG){var T=QG(C/l*qG(S)),M=QG(C/f*qG(S));(k-=2*T)>GG?(x+=T*=v?1:-1,w-=T):(k=0,x=w=(h+d)/2),(_-=2*M)>GG?(y+=M*=v?1:-1,b-=M):(_=0,y=b=(h+d)/2)}var D=f*UG(y),F=f*qG(y),I=l*UG(w),O=l*qG(w);if(E>GG){var R,Z=f*UG(b),B=f*qG(b),z=l*UG(x),L=l*qG(x);if(p<XG&&(R=FX(D,F,z,L,Z,B,I,O))){var P=D-R[0],j=F-R[1],U=Z-R[0],W=B-R[1],V=1/qG($G((P*U+j*W)/(HG(P*P+j*j)*HG(U*U+W*W)))/2),q=HG(R[0]*R[0]+R[1]*R[1]);A=VG(E,(l-q)/(V-1)),N=VG(E,(f-q)/(V+1))}}_>GG?N>GG?(g=IX(z,L,D,F,f,N,v),m=IX(Z,B,I,O,f,N,v),u.moveTo(g.cx+g.x01,g.cy+g.y01),N<E?u.arc(g.cx,g.cy,N,jG(g.y01,g.x01),jG(m.y01,m.x01),!v):(u.arc(g.cx,g.cy,N,jG(g.y01,g.x01),jG(g.y11,g.x11),!v),u.arc(0,0,f,jG(g.cy+g.y11,g.cx+g.x11),jG(m.cy+m.y11,m.cx+m.x11),!v),u.arc(m.cx,m.cy,N,jG(m.y11,m.x11),jG(m.y01,m.x01),!v))):(u.moveTo(D,F),u.arc(0,0,f,y,b,!v)):u.moveTo(D,F),l>GG&&k>GG?A>GG?(g=IX(I,O,Z,B,l,-A,v),m=IX(D,F,z,L,l,-A,v),u.lineTo(g.cx+g.x01,g.cy+g.y01),A<E?u.arc(g.cx,g.cy,A,jG(g.y01,g.x01),jG(m.y01,m.x01),!v):(u.arc(g.cx,g.cy,A,jG(g.y01,g.x01),jG(g.y11,g.x11),!v),u.arc(0,0,l,jG(g.cy+g.y11,g.cx+g.x11),jG(m.cy+m.y11,m.cx+m.x11),v),u.arc(m.cx,m.cy,A,jG(m.y11,m.x11),jG(m.y01,m.x01),!v))):u.arc(0,0,l,w,x,v):u.lineTo(I,O)}else u.moveTo(0,0);if(u.closePath(),s)return u=null,s+""||null}return s.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+a.apply(this,arguments)+ +i.apply(this,arguments))/2-XG/2;return[UG(r)*n,qG(r)*n]},s.innerRadius=function(t){return arguments.length?(e="function"===typeof t?t:EX(+t),s):e},s.outerRadius=function(e){return arguments.length?(t="function"===typeof e?e:EX(+e),s):t},s.cornerRadius=function(e){return arguments.length?(n="function"===typeof e?e:EX(+e),s):n},s.padRadius=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:EX(+e),s):r},s.startAngle=function(e){return arguments.length?(a="function"===typeof e?e:EX(+e),s):a},s.endAngle=function(e){return arguments.length?(i="function"===typeof e?e:EX(+e),s):i},s.padAngle=function(e){return arguments.length?(o="function"===typeof e?e:EX(+e),s):o},s.context=function(e){return arguments.length?(u=null==e?null:e,s):u},s}().startAngle((function(e){return e.startAngle||0})).endAngle((function(e){return e.endAngle||0})).padAngle((function(e){return e.padAngle||0})).innerRadius((function(e){return e.innerRadius||0})).outerRadius((function(e){return e.outerRadius||0})).cornerRadius((function(e){return e.cornerRadius||0})),R3=zX().x(D3).y1(F3).y0((function(e){return(e.y||0)+(e.height||0)})).defined(I3),Z3=zX().y(F3).x1(D3).x0((function(e){return(e.x||0)+(e.width||0)})).defined(I3),B3=BX().x(D3).y(F3).defined(I3),z3=N3().x(D3).y(F3).width((function(e){return e.width||0})).height((function(e){return e.height||0})).cornerRadius((function(e){return M3(e.cornerRadiusTopLeft,e.cornerRadius)||0}),(function(e){return M3(e.cornerRadiusTopRight,e.cornerRadius)||0}),(function(e){return M3(e.cornerRadiusBottomRight,e.cornerRadius)||0}),(function(e){return M3(e.cornerRadiusBottomLeft,e.cornerRadius)||0})),L3=function(e,t){var n=null;function r(){var r;if(n||(n=r=CX()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return e="function"===typeof e?e:EX(e||LX),t="function"===typeof t?t:EX(void 0===t?64:+t),r.type=function(t){return arguments.length?(e="function"===typeof t?t:EX(t),r):e},r.size=function(e){return arguments.length?(t="function"===typeof e?e:EX(+e),r):t},r.context=function(e){return arguments.length?(n=null==e?null:e,r):n},r}().type((function(e){return b3(e.shape||"circle")})).size((function(e){return M3(e.size,64)})),P3=T3().x(D3).y(F3).defined(I3).size((function(e){return e.size||1}));function j3(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function U3(e,t,n,r){return z3.context(e)(t,n,r)}var W3=1;function V3(){W3=1}function q3(e,t,n){var r=t.clip,a=e._defs,i=t.clip_id||(t.clip_id="clip"+W3++),o=a.clipping[i]||(a.clipping[i]={id:i});return mG(r)?o.path=r(null):j3(n)?o.path=U3(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+i+")"}function H3(e){this.clear(),e&&this.union(e)}function G3(e){this.mark=e,this.bounds=this.bounds||new H3}function X3(e){G3.call(this,e),this.items=this.items||[]}function Y3(e){this._pending=0,this._loader=e||RQ()}function K3(e){e._pending+=1}function $3(e){e._pending-=1}function Q3(e,t,n){if(t.stroke&&0!==t.opacity&&0!==t.strokeOpacity){var r=null!=t.strokeWidth?+t.strokeWidth:1;e.expand(r+(n?function(e,t){return e.strokeJoin&&"miter"!==e.strokeJoin?0:t}(t,r):0))}return e}H3.prototype={clone:function(){return new H3(this)},clear:function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty:function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals:function(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set:function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add:function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand:function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round:function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale:function(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate:function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate:function(e,t,n){var r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints:function(e,t,n){var r=this.x1,a=this.y1,i=this.x2,o=this.y2,u=Math.cos(e),s=Math.sin(e),c=t-t*u+n*s,l=n-t*s-n*u;return[u*r-s*a+c,s*r+u*a+l,u*r-s*o+c,s*r+u*o+l,u*i-s*a+c,s*i+u*a+l,u*i-s*o+c,s*i+u*o+l]},union:function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect:function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses:function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith:function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects:function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains:function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1}},wG(X3,G3),Y3.prototype={pending:function(){return this._pending},sanitizeURL:function(e){var t=this;return K3(t),t._loader.sanitize(e,{context:"href"}).then((function(e){return $3(t),e})).catch((function(){return $3(t),null}))},loadImage:function(e){var t=this,n=Qd();return K3(t),t._loader.sanitize(e,{context:"image"}).then((function(e){var r=e.href;if(!r||!n)throw{url:r};var a=new n,i=xG(e,"crossOrigin")?e.crossOrigin:"anonymous";return null!=i&&(a.crossOrigin=i),a.onload=function(){return $3(t)},a.onerror=function(){return $3(t)},a.src=r,a})).catch((function(e){return $3(t),{complete:!1,width:0,height:0,src:e&&e.url||""}}))},ready:function(){var e=this;return new Promise((function(t){!function n(r){e.pending()?setTimeout((function(){n(!0)}),10):t(r)}(!1)}))}};var J3,e4,t4,n4,r4,a4,i4,o4,u4=u3-1e-8,s4=function(e,t){return J3.add(e,t)},c4=function(e,t){return s4(e4=e,t4=t)},l4=function(e){return s4(e,J3.y1)},f4=function(e){return s4(J3.x1,e)},h4=function(e,t){return r4*e+i4*t},d4=function(e,t){return a4*e+o4*t},p4=function(e,t){return s4(h4(e,t),d4(e,t))},v4=function(e,t){return c4(h4(e,t),d4(e,t))};function g4(e,t){return J3=e,t?(n4=t*i3,r4=o4=Math.cos(n4),a4=Math.sin(n4),i4=-a4):(r4=o4=1,n4=a4=i4=0),m4}var m4={beginPath:function(){},closePath:function(){},moveTo:v4,lineTo:v4,rect:function(e,t,n,r){n4?(p4(e+n,t),p4(e+n,t+r),p4(e,t+r),v4(e,t)):(s4(e+n,t+r),c4(e,t))},quadraticCurveTo:function(e,t,n,r){var a=h4(e,t),i=d4(e,t),o=h4(n,r),u=d4(n,r);y4(e4,a,o,l4),y4(t4,i,u,f4),c4(o,u)},bezierCurveTo:function(e,t,n,r,a,i){var o=h4(e,t),u=d4(e,t),s=h4(n,r),c=d4(n,r),l=h4(a,i),f=d4(a,i);b4(e4,o,s,l,l4),b4(t4,u,c,f,f4),c4(l,f)},arc:function(e,t,n,r,a,i){if(r+=n4,a+=n4,e4=n*Math.cos(a)+e,t4=n*Math.sin(a)+t,Math.abs(a-r)>u4)s4(e-n,t-n),s4(e+n,t+n);else{var o,u,s=function(r){return s4(n*Math.cos(r)+e,n*Math.sin(r)+t)};if(s(r),s(a),a!==r)if((r%=u3)<0&&(r+=u3),(a%=u3)<0&&(a+=u3),a<r&&(i=!i,o=r,r=a,a=o),i)for(a-=u3,o=r-r%o3,u=0;u<4&&o>a;++u,o-=o3)s(o);else for(o=r-r%o3+o3,u=0;u<4&&o<a;++u,o+=o3)s(o)}}};function y4(e,t,n,r){var a=(e-t)/(e+n-2*t);0<a&&a<1&&r(e+(t-e)*a)}function b4(e,t,n,r,a){var i,o=r-e+3*t-3*n,u=e+n-2*t,s=e-t,c=0,l=0;Math.abs(o)>1e-14?(i=u*u+s*o)>=0&&(c=(-u+(i=Math.sqrt(i)))/o,l=(-u-i)/o):c=.5*s/u,0<c&&c<1&&a(x4(c,e,t,n,r)),0<l&&l<1&&a(x4(l,e,t,n,r))}function x4(e,t,n,r,a){var i=1-e,o=i*i,u=e*e;return o*i*t+3*o*e*n+3*i*u*r+u*e*a}var w4=(w4=$d(1,1))?w4.getContext("2d"):null,k4=new H3;function _4(e){return function(t,n){if(!w4)return!0;e(w4,t),k4.clear().union(t.bounds).intersect(n).round();for(var r=k4.x1,a=k4.y1,i=k4.x2,o=k4.y2,u=a;u<=o;++u)for(var s=r;s<=i;++s)if(w4.isPointInPath(s,u))return!0;return!1}}function S4(e,t){return t.contains(e.x||0,e.y||0)}function C4(e,t){var n=e.x||0,r=e.y||0,a=e.width||0,i=e.height||0;return t.intersects(k4.set(n,r,n+a,r+i))}function E4(e,t){var n=e.x||0,r=e.y||0;return A4(t,n,r,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r)}function A4(e,t,n,r,a){var i,o,u,s,c=e.x1,l=e.y1,f=e.x2,h=e.y2,d=r-t,p=a-n,v=0,g=1;for(s=0;s<4;++s){if(0===s&&(i=-d,o=-(c-t)),1===s&&(i=d,o=f-t),2===s&&(i=-p,o=-(l-n)),3===s&&(i=p,o=h-n),Math.abs(i)<1e-10&&o<0)return!1;if(u=o/i,i<0){if(u>g)return!1;u>v&&(v=u)}else if(i>0){if(u<v)return!1;u<g&&(g=u)}}return!0}function N4(e,t){e.globalCompositeOperation=t.blend||"source-over"}function T4(e,t){return null==e?t:e}function M4(e,t){for(var n=t.length,r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function D4(e,t,n){return K2(n)?function(e,t,n){var r,a=n.width(),i=n.height();if("radial"===t.gradient)r=e.createRadialGradient(n.x1+T4(t.x1,.5)*a,n.y1+T4(t.y1,.5)*i,Math.max(a,i)*T4(t.r1,0),n.x1+T4(t.x2,.5)*a,n.y1+T4(t.y2,.5)*i,Math.max(a,i)*T4(t.r2,.5));else{var o=T4(t.x1,0),u=T4(t.y1,0),s=T4(t.x2,1),c=T4(t.y2,0);if(o!==s&&u!==c&&a!==i){var l=$d(Math.ceil(a),Math.ceil(i)),f=l.getContext("2d");return f.scale(a,i),f.fillStyle=M4(f.createLinearGradient(o,u,s,c),t.stops),f.fillRect(0,0,a,i),e.createPattern(l,"no-repeat")}r=e.createLinearGradient(n.x1+o*a,n.y1+u*i,n.x1+s*a,n.y1+c*i)}return M4(r,t.stops)}(e,n,t.bounds):n}function F4(e,t,n){return(n*=null==t.fillOpacity?1:t.fillOpacity)>0&&(e.globalAlpha=n,e.fillStyle=D4(e,t,t.fill),!0)}var I4=[];function O4(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&((n*=null==t.strokeOpacity?1:t.strokeOpacity)>0&&(e.globalAlpha=n,e.strokeStyle=D4(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||I4),e.lineDashOffset=t.strokeDashOffset||0),!0))}function R4(e,t){return e.zindex-t.zindex||e.index-t.index}function Z4(e){if(!e.zdirty)return e.zitems;var t,n,r,a=e.items,i=[];for(n=0,r=a.length;n<r;++n)(t=a[n]).index=n,t.zindex&&i.push(t);return e.zdirty=!1,e.zitems=i.sort(R4)}function B4(e,t){var n,r,a=e.items;if(a&&a.length){var i=Z4(e);if(i&&i.length){for(n=0,r=a.length;n<r;++n)a[n].zindex||t(a[n]);a=i}for(n=0,r=a.length;n<r;++n)t(a[n])}}function z4(e,t){var n,r,a=e.items;if(!a||!a.length)return null;var i=Z4(e);for(i&&i.length&&(a=i),r=a.length;--r>=0;)if(n=t(a[r]))return n;if(a===i)for(r=(a=e.items).length;--r>=0;)if(!a[r].zindex&&(n=t(a[r])))return n;return null}function L4(e){return function(t,n,r){B4(n,(function(n){r&&!r.intersects(n.bounds)||j4(e,t,n,n)}))}}function P4(e){return function(t,n,r){!n.items.length||r&&!r.intersects(n.bounds)||j4(e,t,n.items[0],n.items)}}function j4(e,t,n,r){var a=null==n.opacity?1:n.opacity;0!==a&&(e(t,r)||(N4(t,n),n.fill&&F4(t,n,a)&&t.fill(),n.stroke&&O4(t,n,a)&&t.stroke()))}function U4(e){return e=e||fG,function(t,n,r,a,i,o){return r*=t.pixelRatio,a*=t.pixelRatio,z4(n,(function(n){var u=n.bounds;if((!u||u.contains(i,o))&&u)return e(t,n,r,a,i,o)?n:void 0}))}}function W4(e,t){return function(n,r,a,i){var o,u,s=Array.isArray(r)?r[0]:r,c=null==t?s.fill:t,l=s.stroke&&n.isPointInStroke;return l&&(o=s.strokeWidth,u=s.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=u?u:"butt"),!e(n,r)&&(c&&n.isPointInPath(a,i)||l&&n.isPointInStroke(a,i))}}function V4(e){return U4(W4(e))}function q4(e,t){return"translate("+e+","+t+")"}function H4(e){return"rotate("+e+")"}function G4(e){return q4(e.x||0,e.y||0)}function X4(e,t,n){function r(e,n){var r=n.x||0,a=n.y||0,i=n.angle||0;e.translate(r,a),i&&e.rotate(i*=i3),e.beginPath(),t(e,n),i&&e.rotate(-i),e.translate(-r,-a)}return{type:e,tag:"path",nested:!1,attr:function(e,n){e("transform",function(e){return q4(e.x||0,e.y||0)+(e.angle?" "+H4(e.angle):"")}(n)),e("d",t(null,n))},bound:function(e,n){return t(g4(e,n.angle),n),Q3(e,n).translate(n.x||0,n.y||0)},draw:L4(r),pick:V4(r),isect:n||_4(r)}}var Y4=X4("arc",(function(e,t){return O3.context(e)(t)}));function K4(e,t,n){function r(e,n){e.beginPath(),t(e,n)}var a=W4(r);return{type:e,tag:"path",nested:!0,attr:function(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))},bound:function(e,n){var r=n.items;return 0===r.length?e:(t(g4(e),r),Q3(e,r[0]))},draw:P4(r),pick:function(e,t,n,r,i,o){var u=t.items,s=t.bounds;return!u||!u.length||s&&!s.contains(i,o)?null:(n*=e.pixelRatio,r*=e.pixelRatio,a(e,u,n,r)?u[0]:null)},isect:S4,tip:n}}var $4=K4("area",(function(e,t){var n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?Z3:R3).curve(t3(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,a="horizontal"===e[0].orient?t[1]:t[0],i="horizontal"===e[0].orient?"y":"x",o=e.length,u=1/0;--o>=0;)!1!==e[o].defined&&(r=Math.abs(e[o][i]-a))<u&&(u=r,n=e[o]);return n}));function Q4(e,t){e.beginPath(),j3(t)?U3(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function J4(e){var t=T4(e.strokeWidth,1);return null!=e.strokeOffset?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function e5(e,t){var n=J4(t);e("d",U3(null,t,n,n))}function t5(e,t,n,r){var a=J4(t);e.beginPath(),U3(e,t,(n||0)+a,(r||0)+a)}var n5=W4(t5),r5=W4(t5,!1),a5=W4(t5,!0);var i5={type:"group",tag:"g",nested:!1,attr:function(e,t){e("transform",G4(t))},bound:function(e,t){if(!t.clip&&t.items)for(var n=t.items,r=n.length,a=0;a<r;++a)e.union(n[a].bounds);return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Q3(e,t),e.translate(t.x||0,t.y||0)},draw:function(e,t,n){var r=this;B4(t,(function(t){var a=t.x||0,i=t.y||0,o=t.strokeForeground,u=null==t.opacity?1:t.opacity;(t.stroke||t.fill)&&u&&(t5(e,t,a,i),N4(e,t),t.fill&&F4(e,t,u)&&e.fill(),t.stroke&&!o&&O4(e,t,u)&&e.stroke()),e.save(),e.translate(a,i),t.clip&&Q4(e,t),n&&n.translate(-a,-i),B4(t,(function(t){r.draw(e,t,n)})),n&&n.translate(a,i),e.restore(),o&&t.stroke&&u&&(t5(e,t,a,i),N4(e,t),O4(e,t,u)&&e.stroke())}))},pick:function(e,t,n,r,a,i){var o=this;if(t.bounds&&!t.bounds.contains(a,i)||!t.items)return null;var u=n*e.pixelRatio,s=r*e.pixelRatio;return z4(t,(function(c){var l,f,h,d=c.bounds;if(!d||d.contains(a,i)){f=c.x||0,h=c.y||0;var p=f+(c.width||0),v=h+(c.height||0),g=c.clip;if(!g||!(a<f||a>p||i<h||i>v)){if(e.save(),e.translate(f,h),f=a-f,h=i-h,g&&j3(c)&&!a5(e,c,u,s))return e.restore(),null;var m=c.strokeForeground,y=!1!==t.interactive;return y&&m&&c.stroke&&r5(e,c,u,s)?(e.restore(),c):(!(l=z4(c,(function(e){return function(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}(e,f,h)?o.pick(e,n,r,f,h):null})))&&y&&(c.fill||!m&&c.stroke)&&n5(e,c,u,s)&&(l=c),e.restore(),l||null)}}}))},isect:C4,content:function(e,t,n){e("clip-path",t.clip?q3(n,t,t):null)},background:function(e,t){e("class","background"),e("aria-hidden",!0),e5(e,t)},foreground:function(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?e5(e,t):e("d","")}},o5={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function u5(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then((function(t){e.image=t,e.image.url=e.url}))),n}function s5(e,t){return null!=e.width?e.width:t&&t.width?!1!==e.aspect&&e.height?e.height*t.width/t.height:t.width:0}function c5(e,t){return null!=e.height?e.height:t&&t.height?!1!==e.aspect&&e.width?e.width*t.height/t.width:t.height:0}function l5(e,t){return"center"===e?t/2:"right"===e?t:0}function f5(e,t){return"middle"===e?t/2:"bottom"===e?t:0}var h5={type:"image",tag:"image",nested:!1,attr:function(e,t,n){var r=u5(t,n),a=s5(t,r),i=c5(t,r),o=(t.x||0)-l5(t.align,a),u=(t.y||0)-f5(t.baseline,i);e("href",!r.src&&r.toDataURL?r.toDataURL():r.src||"",o5["xmlns:xlink"],"xlink:href"),e("transform",q4(o,u)),e("width",a),e("height",i),e("preserveAspectRatio",!1===t.aspect?"none":"xMidYMid")},bound:function(e,t){var n=t.image,r=s5(t,n),a=c5(t,n),i=(t.x||0)-l5(t.align,r),o=(t.y||0)-f5(t.baseline,a);return e.set(i,o,i+r,o+a)},draw:function(e,t,n){var r=this;B4(t,(function(t){if(!n||n.intersects(t.bounds)){var a=u5(t,r),i=s5(t,a),o=c5(t,a);if(0!==i&&0!==o){var u,s,c,l,f=(t.x||0)-l5(t.align,i),h=(t.y||0)-f5(t.baseline,o);!1!==t.aspect&&(s=a.width/a.height,c=t.width/t.height,s===s&&c===c&&s!==c&&(c<s?(h+=(o-(l=i/s))/2,o=l):(f+=(i-(l=o*s))/2,i=l))),(a.complete||a.toDataURL)&&(N4(e,t),e.globalAlpha=null!=(u=t.opacity)?u:1,e.imageSmoothingEnabled=!1!==t.smooth,e.drawImage(a,f,h,i,o))}}}))},pick:U4(),isect:fG,get:u5,xOffset:l5,yOffset:f5},d5=K4("line",(function(e,t){var n=t[0],r=n.interpolate||"linear";return B3.curve(t3(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,a=Math.pow(e[0].strokeWidth||1,2),i=e.length;--i>=0;)if(!1!==e[i].defined&&(n=e[i].x-t[0])*n+(r=e[i].y-t[1])*r<a)return e[i];return null}));function p5(e,t){var n=t.path;if(null==n)return!0;var r=t.x||0,a=t.y||0,i=t.scaleX||1,o=t.scaleY||1,u=(t.angle||0)*i3,s=t.pathCache;s&&s.path===n||((t.pathCache=s=a3(n)).path=n),u&&e.rotate&&e.translate?(e.translate(r,a),e.rotate(u),v3(e,s,0,0,i,o),e.rotate(-u),e.translate(-r,-a)):v3(e,s,r,a,i,o)}var v5={type:"path",tag:"path",nested:!1,attr:function(e,t){var n=t.scaleX||1,r=t.scaleY||1;1===n&&1===r||e("vector-effect","non-scaling-stroke"),e("transform",function(e){return q4(e.x||0,e.y||0)+(e.angle?" "+H4(e.angle):"")+(e.scaleX||e.scaleY?" "+function(e,t){return"scale("+e+","+t+")"}(e.scaleX||1,e.scaleY||1):"")}(t)),e("d",t.path)},bound:function(e,t){return p5(g4(e,t.angle),t)?e.set(0,0,0,0):Q3(e,t,!0)},draw:L4(p5),pick:V4(p5),isect:_4(p5)};function g5(e,t){e.beginPath(),U3(e,t)}var m5={type:"rect",tag:"path",nested:!1,attr:function(e,t){e("d",U3(null,t))},bound:function(e,t){var n,r;return Q3(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)},draw:L4(g5),pick:V4(g5),isect:C4};function y5(e,t,n){var r,a,i,o;return!(!t.stroke||!O4(e,t,n))&&(r=t.x||0,a=t.y||0,i=null!=t.x2?t.x2:r,o=null!=t.y2?t.y2:a,e.beginPath(),e.moveTo(r,a),e.lineTo(i,o),!0)}var b5={type:"rule",tag:"line",nested:!1,attr:function(e,t){e("transform",G4(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function(e,t){var n,r;return Q3(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)},draw:function(e,t,n){B4(t,(function(t){if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&y5(e,t,r)&&(N4(e,t),e.stroke())}}))},pick:U4((function(e,t,n,r){return!!e.isPointInStroke&&(y5(e,t,1)&&e.isPointInStroke(n,r))})),isect:E4},x5=X4("shape",(function(e,t){return(t.mark.shape||t.shape).context(e)(t)})),w5=X4("symbol",(function(e,t){return L3.context(e)(t)}),S4),k5=function(e){var t,n,r;e=+e||1e4;var a=function(){t={},n={},r=0},i=function(a,i){return++r>e&&(n=t,t={},r=1),t[a]=i};return a(),{clear:a,has:function(e){return xG(t,e)||xG(n,e)},get:function(e){return xG(t,e)?t[e]:xG(n,e)?i(e,n[e]):void 0},set:function(e,n){return xG(t,e)?t[e]=n:i(e,n)}}}(),_5={height:T5,measureWidth:A5,estimateWidth:C5,width:C5,canvas:S5};function S5(e){_5.width=e&&w4?A5:C5}function C5(e,t){return E5(I5(e,t),T5(e))}function E5(e,t){return~~(.8*e.length*t)}function A5(e,t){return T5(e)<=0||!(t=I5(e,t))?0:N5(t,R5(e))}function N5(e,t){var n="(".concat(t,") ").concat(e),r=k5.get(n);return void 0===r&&(w4.font=t,r=w4.measureText(e).width,k5.set(n,r)),r}function T5(e){return null!=e.fontSize?+e.fontSize||0:11}function M5(e){return null!=e.lineHeight?e.lineHeight:T5(e)+2}function D5(e){return t=e.lineBreak&&e.text&&!hG(e.text)?e.text.split(e.lineBreak):e.text,hG(t)?t.length>1?t:t[0]:t;var t}function F5(e){var t=D5(e);return(hG(t)?t.length-1:0)*M5(e)}function I5(e,t){var n=null==t?"":(t+"").trim();return e.limit>0&&n.length?function(e,t){var n=+e.limit,r=function(e){if(_5.width===A5){var t=R5(e);return function(e){return N5(e,t)}}var n=T5(e);return function(e){return E5(e,n)}}(e);if(r(t)<n)return t;var a,i=e.ellipsis||"\u2026",o="rtl"===e.dir,u=0,s=t.length;if(n-=r(i),o){for(;u<s;)a=u+s>>>1,r(t.slice(a))>n?u=a+1:s=a;return i+t.slice(u)}for(;u<s;)a=1+(u+s>>>1),r(t.slice(0,a))<n?u=a:s=a-1;return t.slice(0,u)+i}(e,n):n}function O5(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function R5(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+T5(e)+"px "+O5(e,t)}function Z5(e){var t=e.baseline,n=T5(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:"line-top"===t?.29*n+.5*M5(e):"line-bottom"===t?.29*n-.5*M5(e):0)}S5(!0);var B5={left:"start",center:"middle",right:"end"},z5=new H3;function L5(e){var t,n=e.x||0,r=e.y||0,a=e.radius||0;return a&&(t=(e.theta||0)-o3,n+=a*Math.cos(t),r+=a*Math.sin(t)),z5.x1=n,z5.y1=r,z5}function P5(e,t,n){var r,a=_5.height(t),i=t.align,o=L5(t),u=o.x1,s=o.y1,c=t.dx||0,l=(t.dy||0)+Z5(t)-Math.round(.8*a),f=D5(t);if(hG(f)?(a+=M5(t)*(f.length-1),r=f.reduce((function(e,n){return Math.max(e,_5.width(t,n))}),0)):r=_5.width(t,f),"center"===i?c-=r/2:"right"===i&&(c-=r),e.set(c+=u,l+=s,c+r,l+a),t.angle&&!n)e.rotate(t.angle*i3,u,s);else if(2===n)return e.rotatedPoints(t.angle*i3,u,s);return e}var j5={type:"text",tag:"text",nested:!1,attr:function(e,t){var n,r=t.dx||0,a=(t.dy||0)+Z5(t),i=L5(t),o=i.x1,u=i.y1,s=t.angle||0;e("text-anchor",B5[t.align]||"start"),s?(n=q4(o,u)+" "+H4(s),(r||a)&&(n+=" "+q4(r,a))):n=q4(o+r,u+a),e("transform",n)},bound:P5,draw:function(e,t,n){B4(t,(function(t){var r,a,i,o,u,s,c,l=null==t.opacity?1:t.opacity;if(!(n&&!n.intersects(t.bounds)||0===l||t.fontSize<=0||null==t.text||0===t.text.length)){if(e.font=R5(t),e.textAlign=t.align||"left",a=(r=L5(t)).x1,i=r.y1,t.angle&&(e.save(),e.translate(a,i),e.rotate(t.angle*i3),a=i=0),a+=t.dx||0,i+=(t.dy||0)+Z5(t),s=D5(t),N4(e,t),hG(s))for(u=M5(t),o=0;o<s.length;++o)c=I5(t,s[o]),t.fill&&F4(e,t,l)&&e.fillText(c,a,i),t.stroke&&O4(e,t,l)&&e.strokeText(c,a,i),i+=u;else c=I5(t,s),t.fill&&F4(e,t,l)&&e.fillText(c,a,i),t.stroke&&O4(e,t,l)&&e.strokeText(c,a,i);t.angle&&e.restore()}}))},pick:U4((function(e,t,n,r,a,i){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=L5(t),u=o.x1,s=o.y1,c=P5(z5,t,1),l=-t.angle*i3,f=Math.cos(l),h=Math.sin(l),d=f*a-h*i+(u-f*u+h*s),p=h*a+f*i+(s-h*u-f*s);return c.contains(d,p)})),isect:function(e,t){var n=P5(z5,e,2);return A4(t,n[0],n[1],n[2],n[3])||A4(t,n[0],n[1],n[4],n[5])||A4(t,n[4],n[5],n[6],n[7])||A4(t,n[2],n[3],n[6],n[7])}},U5=K4("trail",(function(e,t){return P3.context(e)(t)}),(function(e,t){for(var n,r,a=e.length;--a>=0;)if(!1!==e[a].defined&&(n=e[a].x-t[0])*n+(r=e[a].y-t[1])*r<(n=e[a].size||1)*n)return e[a];return null})),W5={arc:Y4,area:$4,group:i5,image:h5,line:d5,path:v5,rect:m5,rule:b5,shape:x5,symbol:w5,text:j5,trail:U5};function V5(e,t,n){var r=W5[e.mark.marktype],a=t||r.bound;return r.nested&&(e=e.mark),a(e.bounds||(e.bounds=new H3),e,n)}var q5={mark:null};function H5(e,t,n){var r,a,i,o,u=W5[e.marktype],s=u.bound,c=e.items,l=c&&c.length;if(u.nested)return l?i=c[0]:(q5.mark=e,i=q5),o=V5(i,s,n),t=t&&t.union(o)||o;if(t=t||e.bounds&&e.bounds.clear()||new H3,l)for(r=0,a=c.length;r<a;++r)t.union(V5(c[r],s,n));return e.bounds=t}var G5=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function X5(e,t){return JSON.stringify(e,G5,t)}function Y5(e){return K5("string"===typeof e?JSON.parse(e):e)}function K5(e){var t,n,r,a=e.marktype,i=e.items;if(i)for(n=0,r=i.length;n<r;++n)t=a?"mark":"group",i[n][t]=e,i[n].zindex&&(i[n][t].zdirty=!0),"group"===(a||t)&&K5(i[n]);return a&&H5(e),e}function $5(e){arguments.length?this.root=Y5(e):(this.root=Q5({marktype:"group",name:"root",role:"frame"}),this.root.items=[new X3(this.root)])}function Q5(e,t){var n={bounds:new H3,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return null!=e.aria&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function J5(e,t,n){return!e&&"undefined"!==typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function e6(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,a=n.length;r<a;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function t6(e,t,n,r){var a,i=e.childNodes[t];return i&&i.tagName.toLowerCase()===n.toLowerCase()||(a=i||null,i=J5(e.ownerDocument,n,r),e.insertBefore(i,a)),i}function n6(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function r6(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function a6(e,t){var n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function i6(e,t){this._active=null,this._handlers={},this._loader=e||RQ(),this._tooltip=t||o6}function o6(e,t,n,r){e.element().setAttribute("title",r||"")}function u6(e){this._el=null,this._bgcolor=null,this._loader=new Y3(e)}$5.prototype={toJSON:function(e){return X5(this.root,e||0)},mark:function(e,t,n){var r=Q5(e,t=t||this.root.items[0]);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}},i6.prototype={initialize:function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},origin:function(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene:function(e){return arguments.length?(this._scene=e,this):this._scene},on:function(){},off:function(){},_handlerIndex:function(e,t,n){for(var r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers:function(e){var t=this._handlers,n=[];if(e)n.push.apply(n,(0,$n.Z)(t[this.eventName(e)]));else for(var r in t)n.push.apply(n,(0,$n.Z)(t[r]));return n},eventName:function(e){var t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref:function(e,t,n){this._loader.sanitize(n,{context:"href"}).then((function(t){var n=new MouseEvent(e.type,e),r=J5(null,"a");for(var a in t)r.setAttribute(a,t[a]);r.dispatchEvent(n)})).catch((function(){}))},handleTooltip:function(e,t,n){if(t&&null!=t.tooltip){t=function(e,t,n,r){var a,i,o=e&&e.mark;if(o&&(a=W5[o.marktype]).tip){for((i=a6(t,n))[0]-=r[0],i[1]-=r[1];e=e.mark.group;)i[0]-=e.x||0,i[1]-=e.y||0;e=a.tip(o.items,i)}return e}(t,e,this.canvas(),this._origin);var r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect:function(e){var t=this.canvas();if(t){for(var n=t.getBoundingClientRect(),r=this._origin,a=e.bounds,i=a.width(),o=a.height(),u=a.x1+r[0]+n.left,s=a.y1+r[1]+n.top;e.mark&&(e=e.mark.group);)u+=e.x||0,s+=e.y||0;return{x:u,y:s,width:i,height:o,left:u,top:s,right:u+i,bottom:s+o}}}},u6.prototype={initialize:function(e,t,n,r,a){return this._el=e,this.resize(t,n,r,a)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},background:function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},resize:function(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty:function(){},render:function(e){var t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},_render:function(){},renderAsync:function(e){var t=this.render(e);return this._ready?this._ready.then((function(){return t})):Promise.resolve(t)},_load:function(e,t){var n=this,r=n._loader[e](t);if(!n._ready){var a=n._call;n._ready=n._loader.ready().then((function(e){e&&a(),n._ready=null}))}return r},sanitizeURL:function(e){return this._load("sanitizeURL",e)},loadImage:function(e){return this._load("loadImage",e)}};var s6="dragenter",c6="dragleave",l6="dragover",f6="mousedown",h6="mousemove",d6="mouseout",p6="mouseover",v6="click",g6="mousewheel",m6="touchstart",y6="touchmove",b6="touchend",x6=h6,w6=d6,k6=v6;function _6(e,t){i6.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}function S6(e,t){(function(e){return e===m6||e===y6||e===b6?[m6,y6,b6]:[e]})(t).forEach((function(t){return function(e,t){var n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?function(n){return e[t](n)}:function(n){return e.fire(t,n)}))}(e,t)}))}function C6(e,t,n){return function(r){var a=this._active,i=this.pickEvent(r);i===a||(a&&a.exit||this.fire(n,r),this._active=i,this.fire(t,r)),this.fire(e,r)}}function E6(e){return function(t){this.fire(e,t),this._active=null}}wG(_6,i6,{initialize:function(e,t,n){var r=this;return this._canvas=e&&e6(e,"canvas"),[v6,f6,h6,d6,c6].forEach((function(e){return S6(r,e)})),i6.prototype.initialize.call(this,e,t,n)},canvas:function(){return this._canvas},context:function(){return this._canvas.getContext("2d")},events:["keydown","keypress","keyup",s6,c6,l6,f6,"mouseup",h6,d6,p6,v6,"dblclick","wheel",g6,m6,y6,b6],DOMMouseScroll:function(e){this.fire(g6,e)},mousemove:C6(h6,p6,d6),dragover:C6(l6,s6,c6),mouseout:E6(d6),dragleave:E6(c6),mousedown:function(e){this._down=this._active,this.fire(f6,e)},click:function(e){this._down===this._active&&(this.fire(v6,e),this._down=null)},touchstart:function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(m6,e,!0)},touchmove:function(e){this.fire(y6,e,!0)},touchend:function(e){this.fire(b6,e,!0),this._touch=null},fire:function(e,t,n){var r=n?this._touch:this._active,a=this._handlers[e];if(t.vegaType=e,e===k6&&r&&r.href?this.handleHref(t,r,r.href):e!==x6&&e!==w6||this.handleTooltip(t,r,e!==w6),a)for(var i=0,o=a.length;i<o;++i)a[i].handler.call(this._obj,t,r)},on:function(e,t){var n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(S6(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off:function(e,t){var n=this.eventName(e),r=this._handlers[n],a=this._handlerIndex(r,e,t);return a>=0&&r.splice(a,1),this},pickEvent:function(e){var t=a6(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick:function(e,t,n,r,a){var i=this.context();return W5[e.marktype].pick.call(this,i,e,t,n,r,a)}});var A6="undefined"!==typeof window&&window.devicePixelRatio||1;function N6(e){u6.call(this,e),this._options={},this._redraw=!1,this._dirty=new H3,this._tempb=new H3}var T6=u6.prototype;function M6(e,t){i6.call(this,e,t);var n=this;n._hrefHandler=D6(n,(function(e,t){t&&t.href&&n.handleHref(e,t,t.href)})),n._tooltipHandler=D6(n,(function(e,t){n.handleTooltip(e,t,e.type!==w6)}))}wG(N6,u6,{initialize:function(e,t,n,r,a,i){return this._options=i||{},this._canvas=this._options.externalContext?null:$d(1,1,this._options.type),e&&this._canvas&&(n6(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),T6.initialize.call(this,e,t,n,r,a)},resize:function(e,t,n,r){if(T6.resize.call(this,e,t,n,r),this._canvas)!function(e,t,n,r,a,i){var o="undefined"!==typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,u=e.getContext("2d"),s=o?A6:a;for(var c in e.width=t*s,e.height=n*s,i)u[c]=i[c];o&&1!==s&&(e.style.width=t+"px",e.style.height=n+"px"),u.pixelRatio=s,u.setTransform(s,0,0,s,s*r[0],s*r[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{var a=this._options.externalContext;a||uG("CanvasRenderer is missing a valid canvas or context"),a.scale(this._scale,this._scale),a.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas:function(){return this._canvas},context:function(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty:function(e){for(var t=this._tempb.clear().union(e.bounds),n=e.mark.group;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render:function(e){var t=this.context(),n=this._origin,r=this._width,a=this._height,i=this._dirty,o=function(e,t,n){return(new H3).set(0,0,t,n).translate(-e[0],-e[1])}(n,r,a);t.save();var u=this._redraw||i.empty()?(this._redraw=!1,o.expand(1)):function(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}(t,o.intersect(i),n);return this.clear(-n[0],-n[1],r,a),this.draw(t,e,u),t.restore(),i.clear(),this},draw:function(e,t,n){var r=W5[t.marktype];t.clip&&function(e,t){var n=t.clip;e.save(),mG(n)?(e.beginPath(),n(e),e.clip()):Q4(e,t.group)}(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},clear:function(e,t,n,r){var a=this._options,i=this.context();"pdf"===a.type||a.externalContext||i.clearRect(e,t,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,r))}});var D6=function(e,t){return function(n){var r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)}};wG(M6,i6,{initialize:function(e,t,n){var r=this._svg;return r&&(r.removeEventListener(k6,this._hrefHandler),r.removeEventListener(x6,this._tooltipHandler),r.removeEventListener(w6,this._tooltipHandler)),this._svg=r=e&&e6(e,"svg"),r&&(r.addEventListener(k6,this._hrefHandler),r.addEventListener(x6,this._tooltipHandler),r.addEventListener(w6,this._tooltipHandler)),i6.prototype.initialize.call(this,e,t,n)},canvas:function(){return this._svg},on:function(e,t){var n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){var a={type:e,handler:t,listener:D6(this,t)};(r[n]||(r[n]=[])).push(a),this._svg&&this._svg.addEventListener(n,a.listener)}return this},off:function(e,t){var n=this.eventName(e),r=this._handlers[n],a=this._handlerIndex(r,e,t);return a>=0&&(this._svg&&this._svg.removeEventListener(n,r[a].listener),r.splice(a,1)),this}});var F6="aria-hidden",I6="aria-label",O6="role",R6="aria-roledescription",Z6="graphics-object",B6="graphics-symbol",z6=function(e,t,n){var r;return r={},(0,Ir.Z)(r,O6,e),(0,Ir.Z)(r,R6,t),(0,Ir.Z)(r,I6,n||void 0),r},L6=CG(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),P6={axis:{desc:"axis",caption:function(e){var t=e.datum,n=e.orient,r=t.title?q6(e):null,a=e.context,i=a.scales[t.scale].value,o=a.dataflow.locale(),u=i.type;return"".concat("left"===n||"right"===n?"Y":"X","-axis")+(r?" titled '".concat(r,"'"):"")+" for a ".concat(C2(u)?"discrete":u," scale")+" with ".concat(G2(o,i,e))}},legend:{desc:"legend",caption:function(e){var t=e.datum,n=t.title?q6(e):null,r="".concat(t.type||""," legend").trim(),a=t.scales,i=Object.keys(a),o=e.context,u=o.scales[a[i[0]]].value,s=o.dataflow.locale();return function(e){return e.length?e[0].toUpperCase()+e.slice(1):e}(r)+(n?" titled '".concat(n,"'"):"")+" for ".concat(function(e){return(e=e.map((function(e){return e+("fill"===e||"stroke"===e?" color":"")}))).length<2?e[0]:e.slice(0,-1).join(", ")+" and "+pG(e)}(i))+" with ".concat(G2(s,u,e))}},"title-text":{desc:"title",caption:function(e){return"Title text '".concat(V6(e),"'")}},"title-subtitle":{desc:"subtitle",caption:function(e){return"Subtitle text '".concat(V6(e),"'")}}},j6={ariaRole:O6,ariaRoleDescription:R6,description:I6};function U6(e,t){var n=!1===t.aria;if(e(F6,n||void 0),n||null==t.description)for(var r in j6)e(j6[r],void 0);else{var a=t.mark.marktype;e(I6,t.description),e(O6,t.ariaRole||("group"===a?Z6:B6)),e(R6,t.ariaRoleDescription||"".concat(a," mark"))}}function W6(e){return!1===e.aria?(0,Ir.Z)({},F6,!0):L6[e.role]?null:P6[e.role]?function(e,t){try{var n=e.items[0],r=t.caption||function(){return""};return z6(t.role||B6,t.desc,n.description||r(n))}catch(a){return null}}(e,P6[e.role]):function(e){var t=e.marktype,n="group"===t||"text"===t||e.items.some((function(e){return null!=e.description&&!1!==e.aria}));return z6(n?Z6:B6,"".concat(t," mark container"),e.description)}(e)}function V6(e){return gG(e.text).join(" ")}function q6(e){try{return gG(pG(e.items).items[0].text).join(" ")}catch(t){return null}}var H6=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};function G6(){var e="",t="",n="",r=[],a=function(){return t=n=""},i=function(i){t&&(e+="".concat(t,">").concat(n),a()),r.push(i)},o=function(e,n){return null!=n&&(t+=" ".concat(e,'="').concat(H6(n).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"),'"')),u},u={open:function(e){i(e),t="<"+e;for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var s=0,c=r;s<c.length;s++){var l=c[s];for(var f in l)o(f,l[f])}return u},close:function(){var i=r.pop();return e+=t?t+(n?">".concat(n,"</").concat(i,">"):"/>"):"</".concat(i,">"),a(),u},attr:o,text:function(e){return n+=H6(e),u},toString:function(){return e}};return u}var X6=function(e){return Y6(G6(),e)+""};function Y6(e,t){if(e.open(t.tagName),t.hasAttributes())for(var n=t.attributes,r=n.length,a=0;a<r;++a)e.attr(n[a].name,n[a].value);if(t.hasChildNodes())for(var i=t.childNodes,o=i.length,u=0;u<o;u++){var s=i[u];3===s.nodeType?e.text(s.nodeValue):Y6(e,s)}return e.close()}var K6={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},$6={fill:"none","stroke-miterlimit":10},Q6="http://www.w3.org/2000/xmlns/",J6=o5.xmlns;function e8(e){u6.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var t8=u6.prototype;function n8(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function r8(e,t,n){var r,a,i;if("radial"===t.gradient){var o=t6(e,n++,"pattern",J6);f8(o,{id:Y2+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),f8(o=t6(o,0,"rect",J6),{width:1,height:1,fill:"url(".concat(d8(),"#").concat(t.id,")")}),f8(e=t6(e,n++,"radialGradient",J6),{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else f8(e=t6(e,n++,"linearGradient",J6),{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,a=t.stops.length;r<a;++r)(i=t6(e,r,"stop",J6)).setAttribute("offset",t.stops[r].offset),i.setAttribute("stop-color",t.stops[r].color);return n6(e,r),n}function a8(e,t,n){return(e=t6(e,n,"clipPath",J6)).setAttribute("id",t.id),t.path?t6(e,0,"path",J6).setAttribute("d",t.path):f8(t6(e,0,"rect",J6),{x:0,y:0,width:t.width,height:t.height}),n6(e,1),n+1}function i8(e,t,n,r,a){var i,o=e._svg;if(!o&&(o=J5(i=t.ownerDocument,r,J6),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},"g"===r))){var u=J5(i,"path",J6);o.appendChild(u),u.__data__=e;var s=J5(i,"g",J6);o.appendChild(s),s.__data__=e;var c=J5(i,"path",J6);o.appendChild(c),c.__data__=e,c.__values__={fill:"default"}}return(o.ownerSVGElement!==a||function(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}wG(e8,u6,{initialize:function(e,t,n,r,a){return this._defs={},this._clearDefs(),e&&(this._svg=t6(e,0,"svg",J6),this._svg.setAttributeNS(Q6,"xmlns",J6),this._svg.setAttributeNS(Q6,"xmlns:xlink",o5["xmlns:xlink"]),this._svg.setAttribute("version",o5.version),this._svg.setAttribute("class","marks"),n6(e,1),this._root=t6(this._svg,0,"g",J6),f8(this._root,$6),n6(this._svg,1)),this.background(this._bgcolor),t8.initialize.call(this,e,t,n,r,a)},background:function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),t8.background.apply(this,arguments)},resize:function(e,t,n,r){return t8.resize.call(this,e,t,n,r),this._svg&&(f8(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}),this._root.setAttribute("transform","translate(".concat(this._origin,")"))),this._dirty=[],this},canvas:function(){return this._svg},svg:function(){var e,t=this._svg,n=this._bgcolor;if(!t)return null;n&&(t.removeAttribute("style"),f8(e=t6(t,0,"rect",J6),{width:this._width,height:this._height,fill:n}));var r=X6(t);return n&&(t.removeChild(e),this._svg.style.setProperty("background-color",n)),r},_render:function(e){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e),n6(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty:function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty:function(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},_dirtyCheck:function(){this._dirtyAll=!0;var e=this._dirty;if(!e.length||!this._dirtyID)return!0;var t,n,r,a,i,o,u,s=++this._dirtyID;for(i=0,o=e.length;i<o;++i)(n=(t=e[i]).mark).marktype!==r&&(r=n.marktype,a=W5[r]),n.zdirty&&n.dirty!==s&&(this._dirtyAll=!1,n8(t,s),n.items.forEach((function(e){e.dirty=s}))),n.zdirty||(t.exit?(a.nested&&n.items.length?(u=n.items[0])._svg&&this._update(a,u._svg,u):t._svg&&(u=t._svg.parentNode)&&u.removeChild(t._svg),t._svg=null):(t=a.nested?n.items[0]:t)._update!==s&&(t._svg&&t._svg.ownerSVGElement?this._update(a,t._svg,t):(this._dirtyAll=!1,n8(t,s)),t._update=s));return!this._dirtyAll},mark:function(e,t,n){var r=this;if(!this.isDirty(t))return t._svg;var a=this._svg,i=W5[t.marktype],o=!1===t.interactive?"none":null,u="g"===i.tag,s=null,c=0,l=i8(t,e,n,"g",a);l.setAttribute("class",r6(t));var f=W6(t);for(var h in f)h8(l,h,f[h]);u||h8(l,"pointer-events",o),h8(l,"clip-path",t.clip?q3(this,t,t.group):null);var d=function(e){var t=r.isDirty(e),n=i8(e,l,s,i.tag,a);t&&(r._update(i,n,e),u&&function(e,t,n){t=t.lastChild.previousSibling;var r,a=0;B4(n,(function(n){r=e.mark(t,n,r),++a})),n6(t,1+a)}(r,n,e)),s=n,++c};return i.nested?t.items.length&&d(t.items[0]):B4(t,d),n6(l,c),l},_update:function(e,t,n){o8=t,u8=t.__values__,U6(c8,n),e.attr(c8,n,this);var r=s8[e.type];r&&r.call(this,e,t,n),o8&&this.style(o8,n)},style:function(e,t){if(null!=t)for(var n in K6){var r="font"===n?O5(t):t[n];if(r!==u8[n]){var a=K6[n];null==r?e.removeAttribute(a):(K2(r)&&(r=$2(r,this._defs.gradient,d8())),e.setAttribute(a,r+"")),u8[n]=r}}},defs:function(){var e=this._svg,t=this._defs,n=t.el,r=0;for(var a in t.gradient)n||(t.el=n=t6(e,1,"defs",J6)),r=r8(n,t.gradient[a],r);for(var i in t.clipping)n||(t.el=n=t6(e,1,"defs",J6)),r=a8(n,t.clipping[i],r);n&&(0===r?(e.removeChild(n),t.el=null):n6(n,r))},_clearDefs:function(){var e=this._defs;e.gradient={},e.clipping={}}});var o8=null,u8=null,s8={group:function(e,t,n){var r=o8=t.childNodes[2];u8=r.__values__,e.foreground(c8,n,this),u8=t.__values__,o8=t.childNodes[1],e.content(c8,n,this);var a=o8=t.childNodes[0];e.background(c8,n,this);var i=!1===n.mark.interactive?"none":null;if(i!==u8.events&&(h8(r,"pointer-events",i),h8(a,"pointer-events",i),u8.events=i),n.strokeForeground&&n.stroke){var o=n.fill;h8(r,"display",null),this.style(a,n),h8(a,"stroke",null),o&&(n.fill=null),u8=r.__values__,this.style(r,n),o&&(n.fill=o),o8=null}else h8(r,"display","none")},image:function(e,t,n){!1===n.smooth?(l8(t,"image-rendering","optimizeSpeed"),l8(t,"image-rendering","pixelated")):l8(t,"image-rendering",null)},text:function(e,t,n){var r,a,i,o,u=D5(n);hG(u)?(r=(a=u.map((function(e){return I5(n,e)}))).join("\n"))!==u8.text&&(n6(t,0),i=t.ownerDocument,o=M5(n),a.forEach((function(e,r){var a=J5(i,"tspan",J6);a.__data__=n,a.textContent=e,r&&(a.setAttribute("x",0),a.setAttribute("dy",o)),t.appendChild(a)})),u8.text=r):(a=I5(n,u))!==u8.text&&(t.textContent=a,u8.text=a),h8(t,"font-family",O5(n)),h8(t,"font-size",T5(n)+"px"),h8(t,"font-style",n.fontStyle),h8(t,"font-variant",n.fontVariant),h8(t,"font-weight",n.fontWeight)}};function c8(e,t,n){t!==u8[e]&&(n?function(e,t,n,r){null!=n?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}(o8,e,t,n):h8(o8,e,t),u8[e]=t)}function l8(e,t,n){n!==u8[t]&&(null==n?e.style.removeProperty(t):e.style.setProperty(t,n+""),u8[t]=n)}function f8(e,t){for(var n in t)h8(e,n,t[n])}function h8(e,t,n){null!=n?e.setAttribute(t,n):e.removeAttribute(t)}function d8(){var e;return"undefined"===typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function p8(e){u6.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}wG(p8,u6,{svg:function(){return this._text},_render:function(e){var t=G6();t.open("svg",yG({},o5,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}));var n=this._bgcolor;return n&&"transparent"!==n&&"none"!==n&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",$6,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark:function(e,t){var n=this,r=W5[t.marktype],a=r.tag,i=[U6,r.attr];e.open("g",{class:r6(t),"clip-path":t.clip?q3(this,t,t.group):null},W6(t),{"pointer-events":"g"!==a&&!1===t.interactive?"none":null});var o=function(o){var u=n.href(o);if(u&&e.open("a",u),e.open(a,n.attr(t,o,i,"g"!==a?a:null)),"text"===a){var s=D5(o);if(hG(s))for(var c={x:0,dy:M5(o)},l=0;l<s.length;++l)e.open("tspan",l?c:null).text(I5(o,s[l])).close();else e.text(I5(o,s))}else if("g"===a){var f=o.strokeForeground,h=o.fill,d=o.stroke;f&&d&&(o.stroke=null),e.open("path",n.attr(t,o,r.background,"bgrect")).close(),e.open("g",n.attr(t,o,r.content)),B4(o,(function(t){return n.mark(e,t)})),e.close(),f&&d?(h&&(o.fill=null),o.stroke=d,e.open("path",n.attr(t,o,r.foreground,"bgrect")).close(),h&&(o.fill=h)):e.open("path",n.attr(t,o,r.foreground,"bgfore")).close()}e.close(),u&&e.close()};return r.nested?t.items&&t.items.length&&o(t.items[0]):B4(t,o),e.close()},href:function(e){var t,n=this,r=e.href;if(r){if(t=this._hrefs&&this._hrefs[r])return t;this.sanitizeURL(r).then((function(e){e["xlink:href"]=e.href,e.href=null,(n._hrefs||(n._hrefs={}))[r]=e}))}return null},attr:function(e,t,n,r){var a=this,i={},o=function(e,t,n,r){i[r||e]=t};return Array.isArray(n)?n.forEach((function(e){return e(o,t,a)})):n(o,t,this),r&&function(e,t,n,r,a){if(null==t)return e;"bgrect"===r&&!1===n.interactive&&(e["pointer-events"]="none");if("bgfore"===r&&(!1===n.interactive&&(e["pointer-events"]="none"),e.display="none",null!==t.fill))return e;"image"===r&&!1===t.smooth&&(e.style="image-rendering: optimizeSpeed; image-rendering: pixelated;");"text"===r&&(e["font-family"]=O5(t),e["font-size"]=T5(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(var i in K6){var o=t[i],u=K6[i];("transparent"!==o||"fill"!==u&&"stroke"!==u)&&null!=o&&(K2(o)&&(o=$2(o,a.gradient,"")),e[u]=o)}}(i,t,e,r,this._defs),i},defs:function(e){var t=this._defs.gradient,n=this._defs.clipping;if(0!==Object.keys(t).length+Object.keys(n).length){for(var r in e.open("defs"),t){var a=t[r],i=a.stops;"radial"===a.gradient?(e.open("pattern",{id:Y2+r,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+r+")"}).close(),e.close(),e.open("radialGradient",{id:r,fx:a.x1,fy:a.y1,fr:a.r1,cx:a.x2,cy:a.y2,r:a.r2})):e.open("linearGradient",{id:r,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2});for(var o=0;o<i.length;++o)e.open("stop",{offset:i[o].offset,"stop-color":i[o].color}).close();e.close()}for(var u in n){var s=n[u];e.open("clipPath",{id:u}),s.path?e.open("path",{d:s.path}).close():e.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),e.close()}e.close()}}});var v8="canvas",g8="none",m8={Canvas:v8,PNG:"png",SVG:"svg",None:g8},y8={};function b8(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(y8[e]=t,this):y8[e]}function x8(e,t,n){var r=[],a=(new H3).union(t),i=e.marktype;return i?w8(e,a,n,r):"group"===i?k8(e,a,n,r):uG("Intersect scene must be mark node or group item.")}function w8(e,t,n,r){if(function(e,t,n){return e.bounds&&t.intersects(e.bounds)&&("group"===e.marktype||!1!==e.interactive&&(!n||n(e)))}(e,t,n)){var a=e.items,i=e.marktype,o=a.length,u=0;if("group"===i)for(;u<o;++u)k8(a[u],t,n,r);else for(var s=W5[i].isect;u<o;++u){var c=a[u];_8(c,t,s)&&r.push(c)}}return r}function k8(e,t,n,r){n&&n(e.mark)&&_8(e,t,W5.group.isect)&&r.push(e);var a=e.items,i=a&&a.length;if(i){var o=e.x||0,u=e.y||0;t.translate(-o,-u);for(var s=0;s<i;++s)w8(a[s],t,n,r);t.translate(o,u)}return r}function _8(e,t,n){var r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}y8.canvas=y8.png={renderer:N6,headless:N6,handler:_6},y8.svg={renderer:e8,headless:p8,handler:M6},y8.none={};var S8=new H3;function C8(e){var t=e.clip;if(mG(t))t(g4(S8.clear()));else{if(!t)return;S8.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(S8)}function E8(e,t,n){return e===t||("path"===n?A8(e,t):e instanceof Date&&t instanceof Date?+e===+t:kG(e)&&kG(t)?Math.abs(e-t)<=1e-9:e&&t&&(dG(e)||dG(t))?function(e,t){var n,r,a=Object.keys(e),i=Object.keys(t);if(a.length!==i.length)return!1;for(a.sort(),i.sort(),r=a.length-1;r>=0;r--)if(a[r]!=i[r])return!1;for(r=a.length-1;r>=0;r--)if(!E8(e[n=a[r]],t[n],n))return!1;return typeof e===typeof t}(e,t):e==t)}function A8(e,t){return E8(a3(e),a3(t))}function N8(){V3(),X2=0}function T8(e,t,n){return e.fields=t||[],e.fname=n,e}function M8(e){return 1===e.length?D8(e[0]):F8(e)}var D8=function(e){return function(t){return t[e]}},F8=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function I8(e){throw Error(e)}function O8(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n++),t=n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&c(),u=t=n+1):"]"===r&&(u||I8("Access path missing open bracket: "+e),u>0&&c(),u=0,t=n+1):n>t?c():t=n+1}return u&&I8("Access path missing closing bracket: "+e),o&&I8("Access path missing closing quote: "+e),n>t&&(n++,c()),a}function R8(e,t,n){var r=O8(e);return e=1===r.length?r[0]:e,T8((n&&n.get||M8)(r),[e],t||e)}R8("id"),T8((function(e){return e}),[],"identity"),T8((function(){return 0}),[],"zero"),T8((function(){return 1}),[],"one"),T8((function(){return!0}),[],"true"),T8((function(){return!1}),[],"false");var Z8=Array.isArray;function B8(e){return e[e.length-1]}function z8(e){return null==e||""===e?null:+e}function L8(e){return null!=e?Z8(e)?e:[e]:[]}var P8=Object.prototype.hasOwnProperty;function j8(e,t){return P8.call(e,t)}function U8(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function W8(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}var V8=Symbol("implicit");function q8(){var e=new Map,t=[],n=[],r=V8;function a(a){var i=a+"",o=e.get(i);if(!o){if(r!==V8)return r;e.set(i,o=t.push(a))}return n[(o-1)%n.length]}return a.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Map;var r,i=(0,zt.Z)(n);try{for(i.s();!(r=i.n()).done;){var o=r.value,u=o+"";e.has(u)||e.set(u,t.push(o))}}catch(s){i.e(s)}finally{i.f()}return a},a.range=function(e){return arguments.length?(n=Array.from(e),a):n.slice()},a.unknown=function(e){return arguments.length?(r=e,a):r},a.copy=function(){return q8(t,n).unknown(r)},U8.apply(a,arguments),a}var H8,G8=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function X8(e){if(!(t=G8.exec(e)))throw new Error("invalid format: "+e);var t;return new Y8({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Y8(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function K8(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function $8(e){return(e=K8(Math.abs(e)))?e[1]:NaN}function Q8(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor($8(t)/3)))-$8(Math.abs(e)))}function J8(e,t){var n=K8(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}X8.prototype=Y8.prototype,Y8.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var e7={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return J8(100*e,t)},r:J8,s:function(e,t){var n=K8(e,t);if(!n)return e+"";var r=n[0],a=n[1],i=a-(H8=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+K8(e,Math.max(0,t+i-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function t7(e){return e}var n7,r7,a7,i7=Array.prototype.map,o7=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function u7(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?t7:(t=i7.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var a=e.length,i=[],o=0,u=t[0],s=0;a>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),i.push(e.substring(a-=u,a+u)),!((s+=u+1)>r));)u=t[o=(o+1)%t.length];return i.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",u=void 0===e.numerals?t7:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(i7.call(e.numerals,String)),s=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",l=void 0===e.nan?"NaN":e.nan+"";function f(e){var t=(e=X8(e)).fill,n=e.align,f=e.sign,h=e.symbol,d=e.zero,p=e.width,v=e.comma,g=e.precision,m=e.trim,y=e.type;"n"===y?(v=!0,y="g"):e7[y]||(void 0===g&&(g=12),m=!0,y="g"),(d||"0"===t&&"="===n)&&(d=!0,t="0",n="=");var b="$"===h?a:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===h?i:/[%p]/.test(y)?s:"",w=e7[y],k=/[defgprs%]/.test(y);function _(e){var a,i,s,h=b,_=x;if("c"===y)_=w(e)+_,e="";else{var S=(e=+e)<0||1/e<0;if(e=isNaN(e)?l:w(Math.abs(e),g),m&&(e=function(e){e:for(var t,n=e.length,r=1,a=-1;r<n;++r)switch(e[r]){case".":a=t=r;break;case"0":0===a&&(a=r),t=r;break;default:if(!+e[r])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),S&&0===+e&&"+"!==f&&(S=!1),h=(S?"("===f?f:c:"-"===f||"("===f?"":f)+h,_=("s"===y?o7[8+H8/3]:"")+_+(S&&"("===f?")":""),k)for(a=-1,i=e.length;++a<i;)if(48>(s=e.charCodeAt(a))||s>57){_=(46===s?o+e.slice(a+1):e.slice(a))+_,e=e.slice(0,a);break}}v&&!d&&(e=r(e,1/0));var C=h.length+e.length+_.length,E=C<p?new Array(p-C+1).join(t):"";switch(v&&d&&(e=r(E+e,E.length?p-_.length:1/0),E=""),n){case"<":e=h+e+_+E;break;case"=":e=h+E+e+_;break;case"^":e=E.slice(0,C=E.length>>1)+h+e+_+E.slice(C);break;default:e=E+h+e+_}return u(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),_.toString=function(){return e+""},_}return{format:f,formatPrefix:function(e,t){var n=f(((e=X8(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor($8(t)/3))),a=Math.pow(10,-r),i=o7[8+r/3];return function(e){return n(a*e)+i}}}}function s7(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,$8(t)-$8(e))+1}function c7(e){return Math.max(0,-$8(Math.abs(e)))}function l7(e,t,n,r){var a,i=GT(e,t,n);switch((r=X8(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(a=Q8(i,o))||(r.precision=a),a7(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(a=s7(i,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=a-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(a=c7(i))||(r.precision=a-2*("%"===r.type))}return r7(r)}function f7(e){return+e}!function(e){n7=u7(e),r7=n7.format,a7=n7.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});var h7=[0,1];function d7(e){return e}function p7(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function v7(e,t,n){var r=e[0],a=e[1],i=t[0],o=t[1];return a<r?(r=p7(a,r),i=n(o,i)):(r=p7(r,a),i=n(i,o)),function(e){return i(r(e))}}function g7(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=p7(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(t){var n=aL(e,t,1,r)-1;return i[n](a[n](t))}}function m7(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function y7(){var e,t,n,r,a,i,o=h7,u=h7,s=fT,c=d7;function l(){var e=Math.min(o.length,u.length);return c!==d7&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(o[0],o[e-1])),r=e>2?g7:v7,a=i=null,f}function f(t){return null==t||isNaN(t=+t)?n:(a||(a=r(o.map(e),u,s)))(e(c(t)))}return f.invert=function(n){return c(t((i||(i=r(u,o.map(e),oT)))(n)))},f.domain=function(e){return arguments.length?(o=Array.from(e,f7),l()):o.slice()},f.range=function(e){return arguments.length?(u=Array.from(e),l()):u.slice()},f.rangeRound=function(e){return u=Array.from(e),s=lN,l()},f.clamp=function(e){return arguments.length?(c=!!e||d7,l()):c!==d7},f.interpolate=function(e){return arguments.length?(s=e,l()):s},f.unknown=function(e){return arguments.length?(n=e,f):n},function(n,r){return e=n,t=r,l()}}function b7(){return y7()(d7,d7)}function x7(e){var t=e.domain;return e.ticks=function(e){var n=t();return qT(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return l7(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,a,i=t(),o=0,u=i.length-1,s=i[o],c=i[u],l=10;for(c<s&&(a=s,s=c,c=a,a=o,o=u,u=a);l-- >0;){if((a=HT(s,c,n))===r)return i[o]=s,i[u]=c,t(i);if(a>0)s=Math.floor(s/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;s=Math.ceil(s*a)/a,c=Math.floor(c*a)/a}r=a}return e},e}function w7(e,t){var n,r=0,a=(e=e.slice()).length-1,i=e[r],o=e[a];return o<i&&(n=r,r=a,a=n,n=i,i=o,o=n),e[r]=t.floor(i),e[a]=t.ceil(o),e}function k7(e){return Math.log(e)}function _7(e){return Math.exp(e)}function S7(e){return-Math.log(-e)}function C7(e){return-Math.exp(-e)}function E7(e){return isFinite(e)?+("1e"+e):e<0?0:e}function A7(e){return function(t){return-e(-t)}}function N7(e){var t,n,r=e(k7,_7),a=r.domain,i=10;function o(){return t=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}(i),n=function(e){return 10===e?E7:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(i),a()[0]<0?(t=A7(t),n=A7(n),e(S7,C7)):e(k7,_7),r}return r.base=function(e){return arguments.length?(i=+e,o()):i},r.domain=function(e){return arguments.length?(a(e),o()):a()},r.ticks=function(e){var r,o=a(),u=o[0],s=o[o.length-1];(r=s<u)&&(h=u,u=s,s=h);var c,l,f,h=t(u),d=t(s),p=null==e?10:+e,v=[];if(!(i%1)&&d-h<p){if(h=Math.floor(h),d=Math.ceil(d),u>0){for(;h<=d;++h)for(l=1,c=n(h);l<i;++l)if(!((f=c*l)<u)){if(f>s)break;v.push(f)}}else for(;h<=d;++h)for(l=i-1,c=n(h);l>=1;--l)if(!((f=c*l)<u)){if(f>s)break;v.push(f)}2*v.length<p&&(v=qT(u,s,p))}else v=qT(h,d,Math.min(d-h,p)).map(n);return r?v.reverse():v},r.tickFormat=function(e,a){if(null==a&&(a=10===i?".0e":","),"function"!==typeof a&&(a=r7(a)),e===1/0)return a;null==e&&(e=10);var o=Math.max(1,i*e/r.ticks().length);return function(e){var r=e/n(Math.round(t(e)));return r*i<i-.5&&(r*=i),r<=o?a(e):""}},r.nice=function(){return a(w7(a(),{floor:function(e){return n(Math.floor(t(e)))},ceil:function(e){return n(Math.ceil(t(e)))}}))},r}function T7(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function M7(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function D7(e){return e<0?-e*e:e*e}function F7(e){var t=e(d7,d7),n=1;function r(){return 1===n?e(d7,d7):.5===n?e(M7,D7):e(T7(n),T7(1/n))}return t.exponent=function(e){return arguments.length?(n=+e,r()):n},x7(t)}function I7(){var e=F7(y7());return e.copy=function(){return m7(e,I7()).exponent(e.exponent())},U8.apply(e,arguments),e}function O7(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function R7(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Z7(e){var t=1,n=e(O7(t),R7(t));return n.constant=function(n){return arguments.length?e(O7(t=+n),R7(t)):t},x7(n)}function B7(e,t,n,r,a,i){var o=[[lj,1,NP],[lj,5,5e3],[lj,15,15e3],[lj,30,3e4],[i,1,TP],[i,5,3e5],[i,15,9e5],[i,30,18e5],[a,1,MP],[a,3,108e5],[a,6,216e5],[a,12,432e5],[r,1,DP],[r,2,1728e5],[n,1,FP],[t,1,IP],[t,3,7776e6],[e,1,OP]];function u(t,n,r){var a=Math.abs(n-t)/r,i=Sl((function(e){return(0,gc.Z)(e,3)[2]})).right(o,a);if(i===o.length)return e.every(GT(t/OP,n/OP,r));if(0===i)return hj.every(Math.max(GT(t,n,r),1));var u=(0,gc.Z)(o[a/o[i-1][2]<o[i][2]/a?i-1:i],2),s=u[0],c=u[1];return s.every(c)}return[function(e,t,n){var r=t<e;if(r){var a=[t,e];e=a[0],t=a[1]}var i=n&&"function"===typeof n.range?n:u(e,t,n),o=i?i.range(e,+t+1):[];return r?o.reverse():o},u]}var z7=B7(wj,_j,XP,HP,Cj,Aj),L7=(0,gc.Z)(z7,2),P7=L7[0],j7=L7[1],U7=B7(nj,aj,zP,ZP,oj,sj),W7=(0,gc.Z)(U7,2),V7=W7[0],q7=W7[1];function H7(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function G7(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function X7(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Y7(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,i=e.days,o=e.shortDays,u=e.months,s=e.shortMonths,c=u9(a),l=s9(a),f=u9(i),h=s9(i),d=u9(o),p=s9(o),v=u9(u),g=s9(u),m=u9(s),y=s9(s),b={a:function(e){return o[e.getDay()]},A:function(e){return i[e.getDay()]},b:function(e){return s[e.getMonth()]},B:function(e){return u[e.getMonth()]},c:null,d:T9,e:T9,f:O9,g:q9,G:G9,H:M9,I:D9,j:F9,L:I9,m:R9,M:Z9,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:gee,s:mee,S:B9,u:z9,U:L9,V:j9,w:U9,W:W9,x:null,X:null,y:V9,Y:H9,Z:X9,"%":vee},x={a:function(e){return o[e.getUTCDay()]},A:function(e){return i[e.getUTCDay()]},b:function(e){return s[e.getUTCMonth()]},B:function(e){return u[e.getUTCMonth()]},c:null,d:Y9,e:Y9,f:eee,g:fee,G:dee,H:K9,I:$9,j:Q9,L:J9,m:tee,M:nee,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:gee,s:mee,S:ree,u:aee,U:iee,V:uee,w:see,W:cee,x:null,X:null,y:lee,Y:hee,Z:pee,"%":vee},w={a:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return S(e,t,n,r)},d:b9,e:b9,f:C9,g:v9,G:p9,H:w9,I:w9,j:x9,L:S9,m:y9,M:k9,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=l.get(r[0].toLowerCase()),n+r[0].length):-1},q:m9,Q:A9,s:N9,S:_9,u:l9,U:f9,V:h9,w:c9,W:d9,x:function(e,t,r){return S(e,n,t,r)},X:function(e,t,n){return S(e,r,t,n)},y:v9,Y:p9,Z:g9,"%":E9};function k(e,t){return function(n){var r,a,i,o=[],u=-1,s=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++u<c;)37===e.charCodeAt(u)&&(o.push(e.slice(s,u)),null!=(a=t9[r=e.charAt(++u)])?r=e.charAt(++u):a="e"===r?" ":"0",(i=t[r])&&(r=i(n,a)),o.push(r),s=u+1);return o.push(e.slice(s,u)),o.join("")}}function _(e,t){return function(n){var r,a,i=X7(1900,void 0,1);if(S(i,e,n+="",0)!=n.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(t&&!("Z"in i)&&(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||i.V>53)return null;"w"in i||(i.w=1),"Z"in i?(a=(r=G7(X7(i.y,0,1))).getUTCDay(),r=a>4||0===a?YP.ceil(r):YP(r),r=HP.offset(r,7*(i.V-1)),i.y=r.getUTCFullYear(),i.m=r.getUTCMonth(),i.d=r.getUTCDate()+(i.w+6)%7):(a=(r=H7(X7(i.y,0,1))).getDay(),r=a>4||0===a?LP.ceil(r):LP(r),r=ZP.offset(r,7*(i.V-1)),i.y=r.getFullYear(),i.m=r.getMonth(),i.d=r.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),a="Z"in i?G7(X7(i.y,0,1)).getUTCDay():H7(X7(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(a+5)%7:i.w+7*i.U-(a+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,G7(i)):H7(i)}}function S(e,t,n,r){for(var a,i,o=0,u=t.length,s=n.length;o<u;){if(r>=s)return-1;if(37===(a=t.charCodeAt(o++))){if(a=t.charAt(o++),!(i=w[a in t9?t.charAt(o++):a])||(r=i(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}return b.x=k(n,b),b.X=k(r,b),b.c=k(t,b),x.x=k(n,x),x.X=k(r,x),x.c=k(t,x),{format:function(e){var t=k(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=_(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=k(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=_(e+="",!0);return t.toString=function(){return e},t}}}var K7,$7,Q7,J7,e9,t9={"-":"",_:" ",0:"0"},n9=/^\s*\d+/,r9=/^%/,a9=/[\\^$*+?|[\]().{}]/g;function i9(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function o9(e){return e.replace(a9,"\\$&")}function u9(e){return new RegExp("^(?:"+e.map(o9).join("|")+")","i")}function s9(e){return new Map(e.map((function(e,t){return[e.toLowerCase(),t]})))}function c9(e,t,n){var r=n9.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function l9(e,t,n){var r=n9.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function f9(e,t,n){var r=n9.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function h9(e,t,n){var r=n9.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function d9(e,t,n){var r=n9.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function p9(e,t,n){var r=n9.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function v9(e,t,n){var r=n9.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function g9(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function m9(e,t,n){var r=n9.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function y9(e,t,n){var r=n9.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function b9(e,t,n){var r=n9.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function x9(e,t,n){var r=n9.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function w9(e,t,n){var r=n9.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function k9(e,t,n){var r=n9.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function _9(e,t,n){var r=n9.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function S9(e,t,n){var r=n9.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function C9(e,t,n){var r=n9.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function E9(e,t,n){var r=r9.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function A9(e,t,n){var r=n9.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function N9(e,t,n){var r=n9.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function T9(e,t){return i9(e.getDate(),t,2)}function M9(e,t){return i9(e.getHours(),t,2)}function D9(e,t){return i9(e.getHours()%12||12,t,2)}function F9(e,t){return i9(1+ZP.count(nj(e),e),t,3)}function I9(e,t){return i9(e.getMilliseconds(),t,3)}function O9(e,t){return I9(e,t)+"000"}function R9(e,t){return i9(e.getMonth()+1,t,2)}function Z9(e,t){return i9(e.getMinutes(),t,2)}function B9(e,t){return i9(e.getSeconds(),t,2)}function z9(e){var t=e.getDay();return 0===t?7:t}function L9(e,t){return i9(zP.count(nj(e)-1,e),t,2)}function P9(e){var t=e.getDay();return t>=4||0===t?UP(e):UP.ceil(e)}function j9(e,t){return e=P9(e),i9(UP.count(nj(e),e)+(4===nj(e).getDay()),t,2)}function U9(e){return e.getDay()}function W9(e,t){return i9(LP.count(nj(e)-1,e),t,2)}function V9(e,t){return i9(e.getFullYear()%100,t,2)}function q9(e,t){return i9((e=P9(e)).getFullYear()%100,t,2)}function H9(e,t){return i9(e.getFullYear()%1e4,t,4)}function G9(e,t){var n=e.getDay();return i9((e=n>=4||0===n?UP(e):UP.ceil(e)).getFullYear()%1e4,t,4)}function X9(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+i9(t/60|0,"0",2)+i9(t%60,"0",2)}function Y9(e,t){return i9(e.getUTCDate(),t,2)}function K9(e,t){return i9(e.getUTCHours(),t,2)}function $9(e,t){return i9(e.getUTCHours()%12||12,t,2)}function Q9(e,t){return i9(1+HP.count(wj(e),e),t,3)}function J9(e,t){return i9(e.getUTCMilliseconds(),t,3)}function eee(e,t){return J9(e,t)+"000"}function tee(e,t){return i9(e.getUTCMonth()+1,t,2)}function nee(e,t){return i9(e.getUTCMinutes(),t,2)}function ree(e,t){return i9(e.getUTCSeconds(),t,2)}function aee(e){var t=e.getUTCDay();return 0===t?7:t}function iee(e,t){return i9(XP.count(wj(e)-1,e),t,2)}function oee(e){var t=e.getUTCDay();return t>=4||0===t?QP(e):QP.ceil(e)}function uee(e,t){return e=oee(e),i9(QP.count(wj(e),e)+(4===wj(e).getUTCDay()),t,2)}function see(e){return e.getUTCDay()}function cee(e,t){return i9(YP.count(wj(e)-1,e),t,2)}function lee(e,t){return i9(e.getUTCFullYear()%100,t,2)}function fee(e,t){return i9((e=oee(e)).getUTCFullYear()%100,t,2)}function hee(e,t){return i9(e.getUTCFullYear()%1e4,t,4)}function dee(e,t){var n=e.getUTCDay();return i9((e=n>=4||0===n?QP(e):QP.ceil(e)).getUTCFullYear()%1e4,t,4)}function pee(){return"+0000"}function vee(){return"%"}function gee(e){return+e}function mee(e){return Math.floor(+e/1e3)}function yee(e){return new Date(e)}function bee(e){return e instanceof Date?+e:+new Date(+e)}function xee(e,t,n,r,a,i,o,u,s,c){var l=b7(),f=l.invert,h=l.domain,d=c(".%L"),p=c(":%S"),v=c("%I:%M"),g=c("%I %p"),m=c("%a %d"),y=c("%b %d"),b=c("%B"),x=c("%Y");function w(e){return(s(e)<e?d:u(e)<e?p:o(e)<e?v:i(e)<e?g:r(e)<e?a(e)<e?m:y:n(e)<e?b:x)(e)}return l.invert=function(e){return new Date(f(e))},l.domain=function(e){return arguments.length?h(Array.from(e,bee)):h().map(yee)},l.ticks=function(t){var n=h();return e(n[0],n[n.length-1],null==t?10:t)},l.tickFormat=function(e,t){return null==t?w:c(t)},l.nice=function(e){var n=h();return e&&"function"===typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?h(w7(n,e)):l},l.copy=function(){return m7(l,xee(e,t,n,r,a,i,o,u,s,c))},l}function wee(){var e,t,n,r,a,i=0,o=1,u=d7,s=!1;function c(t){return null==t||isNaN(t=+t)?a:u(0===n?.5:(t=(r(t)-e)*n,s?Math.max(0,Math.min(1,t)):t))}function l(e){return function(t){var n,r,a,i;return arguments.length?(n=t,a=(r=(0,gc.Z)(n,2))[0],i=r[1],u=e(a,i),c):[u(0),u(1)]}}return c.domain=function(a){var u,s;return arguments.length?(u=a,s=(0,gc.Z)(u,2),i=s[0],o=s[1],e=r(i=+i),t=r(o=+o),n=e===t?0:1/(t-e),c):[i,o]},c.clamp=function(e){return arguments.length?(s=!!e,c):s},c.interpolator=function(e){return arguments.length?(u=e,c):u},c.range=l(fT),c.rangeRound=l(lN),c.unknown=function(e){return arguments.length?(a=e,c):a},function(a){return r=a,e=a(i),t=a(o),n=e===t?0:1/(t-e),c}}function kee(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function _ee(){var e=x7(wee()(d7));return e.copy=function(){return kee(e,_ee())},W8.apply(e,arguments)}function See(){var e=F7(wee());return e.copy=function(){return kee(e,See()).exponent(e.exponent())},W8.apply(e,arguments)}function Cee(e,t){void 0===t&&(t=e,e=fT);for(var n=0,r=t.length-1,a=t[0],i=new Array(r<0?0:r);n<r;)i[n]=e(a,a=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return i[t](e-t)}}function Eee(){var e,t,n,r,a,i,o,u=0,s=.5,c=1,l=1,f=d7,h=!1;function d(e){return isNaN(e=+e)?o:(e=.5+((e=+i(e))-t)*(l*e<l*t?r:a),f(h?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var n,r,a,i,o;return arguments.length?(n=t,a=(r=(0,gc.Z)(n,3))[0],i=r[1],o=r[2],f=Cee(e,[a,i,o]),d):[f(0),f(.5),f(1)]}}return d.domain=function(o){var f,h;return arguments.length?(f=o,h=(0,gc.Z)(f,3),u=h[0],s=h[1],c=h[2],e=i(u=+u),t=i(s=+s),n=i(c=+c),r=e===t?0:.5/(t-e),a=t===n?0:.5/(n-t),l=t<e?-1:1,d):[u,s,c]},d.clamp=function(e){return arguments.length?(h=!!e,d):h},d.interpolator=function(e){return arguments.length?(f=e,d):f},d.range=p(fT),d.rangeRound=p(lN),d.unknown=function(e){return arguments.length?(o=e,d):o},function(o){return i=o,e=o(u),t=o(s),n=o(c),r=e===t?0:.5/(t-e),a=t===n?0:.5/(n-t),l=t<e?-1:1,d}}function Aee(){var e=F7(Eee());return e.copy=function(){return kee(e,Aee()).exponent(e.exponent())},W8.apply(e,arguments)}function Nee(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Tee(e,t){var n=XN(+e,+t);return function(e){var t=n(e);return t-360*Math.floor(t/360)}}!function(e){K7=Y7(e),$7=K7.format,Q7=K7.parse,J7=K7.utcFormat,e9=K7.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Mee,Dee=180/Math.PI,Fee={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Iee(e,t,n,r,a,i){var o,u,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:a,translateY:i,rotate:Math.atan2(t,e)*Dee,skewX:Math.atan(s)*Dee,scaleX:o,scaleY:u}}function Oee(e,t,n,r){function a(e){return e.length?e.pop()+" ":""}return function(i,o){var u=[],s=[];return i=e(i),o=e(o),function(e,r,a,i,o,u){if(e!==a||r!==i){var s=o.push("translate(",null,t,null,n);u.push({i:s-4,x:oT(e,a)},{i:s-2,x:oT(r,i)})}else(a||i)&&o.push("translate("+a+t+i+n)}(i.translateX,i.translateY,o.translateX,o.translateY,u,s),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(a(n)+"rotate(",null,r)-2,x:oT(e,t)})):t&&n.push(a(n)+"rotate("+t+r)}(i.rotate,o.rotate,u,s),function(e,t,n,i){e!==t?i.push({i:n.push(a(n)+"skewX(",null,r)-2,x:oT(e,t)}):t&&n.push(a(n)+"skewX("+t+r)}(i.skewX,o.skewX,u,s),function(e,t,n,r,i,o){if(e!==n||t!==r){var u=i.push(a(i)+"scale(",null,",",null,")");o.push({i:u-4,x:oT(e,n)},{i:u-2,x:oT(t,r)})}else 1===n&&1===r||i.push(a(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,o.scaleX,o.scaleY,u,s),i=o=null,function(e){for(var t,n=-1,r=s.length;++n<r;)u[(t=s[n]).i]=t.x(e);return u.join("")}}}var Ree=Oee((function(e){var t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Fee:Iee(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Zee=Oee((function(e){return null==e?Fee:(Mee||(Mee=document.createElementNS("http://www.w3.org/2000/svg","g")),Mee.setAttribute("transform",e),(e=Mee.transform.baseVal.consolidate())?Iee((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Fee)}),", ",")",")");function Bee(e){return((e=Math.exp(e))+1/e)/2}var zee=function e(t,n,r){function a(e,a){var i,o,u=e[0],s=e[1],c=e[2],l=a[0],f=a[1],h=a[2],d=l-u,p=f-s,v=d*d+p*p;if(v<1e-12)o=Math.log(h/c)/t,i=function(e){return[u+e*d,s+e*p,c*Math.exp(t*e*o)]};else{var g=Math.sqrt(v),m=(h*h-c*c+r*v)/(2*c*n*g),y=(h*h-c*c-r*v)/(2*h*n*g),b=Math.log(Math.sqrt(m*m+1)-m),x=Math.log(Math.sqrt(y*y+1)-y);o=(x-b)/t,i=function(e){var r=e*o,a=Bee(b),i=c/(n*g)*(a*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(t*r+b)-function(e){return((e=Math.exp(e))-1/e)/2}(b));return[u+i*d,s+i*p,c*a/Bee(t*r+b)]}}return i.duration=1e3*o*t/Math.SQRT2,i}return a.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},a}(Math.SQRT2,2,4);function Lee(e){return function(t,n){var r=e((t=PN(t)).h,(n=PN(n)).h),a=KN(t.s,n.s),i=KN(t.l,n.l),o=KN(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=a(e),t.l=i(e),t.opacity=o(e),t+""}}}var Pee=Lee(XN),jee=Lee(KN),Uee=Math.PI/180,Wee=180/Math.PI,Vee=.96422,qee=.82521,Hee=4/29,Gee=6/29,Xee=.12841854934601665;function Yee(e){if(e instanceof $ee)return new $ee(e.l,e.a,e.b,e.opacity);if(e instanceof ate)return ite(e);e instanceof ON||(e=FN(e));var t,n,r=tte(e.r),a=tte(e.g),i=tte(e.b),o=Qee((.2225045*r+.7168786*a+.0606169*i)/1);return r===a&&a===i?t=n=o:(t=Qee((.4360747*r+.3850649*a+.1430804*i)/Vee),n=Qee((.0139322*r+.0971045*a+.7141733*i)/qee)),new $ee(116*o-16,500*(t-o),200*(o-n),e.opacity)}function Kee(e,t,n,r){return 1===arguments.length?Yee(e):new $ee(e,t,n,null==r?1:r)}function $ee(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function Qee(e){return e>.008856451679035631?Math.pow(e,1/3):e/Xee+Hee}function Jee(e){return e>Gee?e*e*e:Xee*(e-Hee)}function ete(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function tte(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function nte(e){if(e instanceof ate)return new ate(e.h,e.c,e.l,e.opacity);if(e instanceof $ee||(e=Yee(e)),0===e.a&&0===e.b)return new ate(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Wee;return new ate(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function rte(e,t,n,r){return 1===arguments.length?nte(e):new ate(e,t,n,null==r?1:r)}function ate(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function ite(e){if(isNaN(e.h))return new $ee(e.l,0,0,e.opacity);var t=e.h*Uee;return new $ee(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}function ote(e,t){var n=KN((e=Kee(e)).l,(t=Kee(t)).l),r=KN(e.a,t.a),a=KN(e.b,t.b),i=KN(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=a(t),e.opacity=i(t),e+""}}function ute(e){return function(t,n){var r=e((t=rte(t)).h,(n=rte(n)).h),a=KN(t.c,n.c),i=KN(t.l,n.l),o=KN(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=a(e),t.l=i(e),t.opacity=o(e),t+""}}}fN($ee,Kee,hN(dN,{brighter:function(e){return new $ee(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new $ee(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new ON(ete(3.1338561*(t=Vee*Jee(t))-1.6168667*(e=1*Jee(e))-.4906146*(n=qee*Jee(n))),ete(-.9787684*t+1.9161415*e+.033454*n),ete(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),fN(ate,rte,hN(dN,{brighter:function(e){return new ate(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new ate(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return ite(this).rgb()}}));var ste=ute(XN),cte=ute(KN),lte=-.14861,fte=1.78277,hte=-.29227,dte=-.90649,pte=1.97294,vte=-1.7884503806,gte=3.5172982438,mte=-.6557636667999999;function yte(e){if(e instanceof xte)return new xte(e.h,e.s,e.l,e.opacity);e instanceof ON||(e=FN(e));var t=e.r/255,n=e.g/255,r=e.b/255,a=(mte*r+vte*t-gte*n)/-5.9615122912,i=r-a,o=(pte*(n-a)-hte*i)/dte,u=Math.sqrt(o*o+i*i)/(pte*a*(1-a)),s=u?Math.atan2(o,i)*Wee-120:NaN;return new xte(s<0?s+360:s,u,a,e.opacity)}function bte(e,t,n,r){return 1===arguments.length?yte(e):new xte(e,t,n,null==r?1:r)}function xte(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function wte(e){return function t(n){function r(t,r){var a=e((t=bte(t)).h,(r=bte(r)).h),i=KN(t.s,r.s),o=KN(t.l,r.l),u=KN(t.opacity,r.opacity);return function(e){return t.h=a(e),t.s=i(e),t.l=o(Math.pow(e,n)),t.opacity=u(e),t+""}}return n=+n,r.gamma=t,r}(1)}fN(xte,bte,hN(dN,{brighter:function(e){return e=null==e?vN:Math.pow(vN,e),new xte(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?pN:Math.pow(pN,e),new xte(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*Uee,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),a=Math.sin(e);return new ON(255*(t+n*(lte*r+fte*a)),255*(t+n*(hte*r+dte*a)),255*(t+n*(pte*r)),this.opacity)}}));var kte=wte(XN),_te=wte(KN);function Ste(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var Cte=new Date,Ete=new Date;function Ate(e,t,n,r){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=function(t){return e(t=new Date(+t)),t},a.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},a.round=function(e){var t=a(e),n=a.ceil(e);return e-t<n-e?t:n},a.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},a.range=function(n,r,i){var o,u=[];if(n=a.ceil(n),i=null==i?1:Math.floor(i),!(n<r)||!(i>0))return u;do{u.push(o=new Date(+n)),t(n,i),e(n)}while(o<n&&n<r);return u},a.filter=function(n){return Ate((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(a.count=function(t,r){return Cte.setTime(+t),Ete.setTime(+r),e(Cte),e(Ete),Math.floor(n(Cte,Ete))},a.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(r?function(t){return r(t)%e===0}:function(t){return a.count(0,t)%e===0}):a:null}),a}var Nte=1e3,Tte=6e4,Mte=36e5,Dte=864e5,Fte=6048e5,Ite=Ate((function(e){return e.setHours(0,0,0,0)}),(function(e,t){return e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Tte)/Dte}),(function(e){return e.getDate()-1})),Ote=(Ite.range,Ate((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/Dte}),(function(e){return e.getUTCDate()-1}))),Rte=(Ote.range,Ate((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/Dte}),(function(e){return Math.floor(e/Dte)})));Rte.range;function Zte(e){return Ate((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Tte)/Fte}))}var Bte=Zte(0),zte=Zte(1),Lte=Zte(2),Pte=Zte(3),jte=Zte(4),Ute=Zte(5),Wte=Zte(6);Bte.range,zte.range,Lte.range,Pte.range,jte.range,Ute.range,Wte.range;function Vte(e){return Ate((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/Fte}))}var qte=Vte(0),Hte=Vte(1),Gte=Vte(2),Xte=Vte(3),Yte=Vte(4),Kte=Vte(5),$te=Vte(6),Qte=(qte.range,Hte.range,Gte.range,Xte.range,Yte.range,Kte.range,$te.range,Ate((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()})));Qte.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Ate((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};Qte.range;var Jte=Ate((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));Jte.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Ate((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};Jte.range;var ene=Ate((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()})),tne=(ene.range,Ate((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()}))),nne=(tne.range,Ate((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Nte-e.getMinutes()*Tte)}),(function(e,t){e.setTime(+e+t*Mte)}),(function(e,t){return(t-e)/Mte}),(function(e){return e.getHours()}))),rne=(nne.range,Ate((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*Mte)}),(function(e,t){return(t-e)/Mte}),(function(e){return e.getUTCHours()}))),ane=(rne.range,Ate((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Nte)}),(function(e,t){e.setTime(+e+t*Tte)}),(function(e,t){return(t-e)/Tte}),(function(e){return e.getMinutes()}))),ine=(ane.range,Ate((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*Tte)}),(function(e,t){return(t-e)/Tte}),(function(e){return e.getUTCMinutes()}))),one=(ine.range,Ate((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*Nte)}),(function(e,t){return(t-e)/Nte}),(function(e){return e.getUTCSeconds()}))),une=(one.range,Ate((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e})));une.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?Ate((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):une:null};une.range;var sne,cne,lne,fne,hne,dne,pne,vne="year",gne="quarter",mne="month",yne="week",bne="date",xne="day",wne="dayofyear",kne="hours",_ne="minutes",Sne="seconds",Cne="milliseconds";[vne,gne,mne,yne,bne,xne,wne,kne,_ne,Sne,Cne].reduce((function(e,t,n){return e[t]=1+n,e}),{});sne={},(0,Ir.Z)(sne,vne,"%Y "),(0,Ir.Z)(sne,gne,"Q%q "),(0,Ir.Z)(sne,mne,"%b "),(0,Ir.Z)(sne,bne,"%d "),(0,Ir.Z)(sne,yne,"W%U "),(0,Ir.Z)(sne,xne,"%a "),(0,Ir.Z)(sne,wne,"%j "),(0,Ir.Z)(sne,kne,"%H:00"),(0,Ir.Z)(sne,_ne,"00:%M"),(0,Ir.Z)(sne,Sne,":%S"),(0,Ir.Z)(sne,Cne,".%L"),(0,Ir.Z)(sne,"".concat(vne,"-").concat(mne),"%Y-%m "),(0,Ir.Z)(sne,"".concat(vne,"-").concat(mne,"-").concat(bne),"%Y-%m-%d "),(0,Ir.Z)(sne,"".concat(kne,"-").concat(_ne),"%H:%M");var Ene=new Date;function Ane(e){return Ene.setFullYear(e),Ene.setMonth(0),Ene.setDate(1),Ene.setHours(0,0,0,0),Ene}function Nne(e){return Ite.count(Ane(e.getFullYear())-1,e)}function Tne(e){return Bte.count(Ane(e.getFullYear())-1,e)}function Mne(e){return Ane(e).getDay()}function Dne(e){var t=Date.UTC(e.getUTCFullYear(),0,1);return Ote.count(t-1,e)}function Fne(e){var t=Date.UTC(e.getUTCFullYear(),0,1);return qte.count(t-1,e)}function Ine(e){return Ene.setTime(Date.UTC(e,0,1)),Ene.getUTCDay()}function One(e,t,n){return t+7*e-(n+6)%7}cne={},(0,Ir.Z)(cne,vne,(function(e){return e.getFullYear()})),(0,Ir.Z)(cne,gne,(function(e){return Math.floor(e.getMonth()/3)})),(0,Ir.Z)(cne,mne,(function(e){return e.getMonth()})),(0,Ir.Z)(cne,bne,(function(e){return e.getDate()})),(0,Ir.Z)(cne,kne,(function(e){return e.getHours()})),(0,Ir.Z)(cne,_ne,(function(e){return e.getMinutes()})),(0,Ir.Z)(cne,Sne,(function(e){return e.getSeconds()})),(0,Ir.Z)(cne,Cne,(function(e){return e.getMilliseconds()})),(0,Ir.Z)(cne,wne,(function(e){return Nne(e)})),(0,Ir.Z)(cne,yne,(function(e){return Tne(e)})),(0,Ir.Z)(cne,"weekday",(function(e,t){return One(Tne(e),e.getDay(),Mne(t))})),(0,Ir.Z)(cne,xne,(function(e,t){return One(1,e.getDay(),Mne(t))})),lne={},(0,Ir.Z)(lne,gne,(function(e){return 3*e})),(0,Ir.Z)(lne,yne,(function(e,t){return One(e,0,Mne(t))}));fne={},(0,Ir.Z)(fne,vne,(function(e){return e.getUTCFullYear()})),(0,Ir.Z)(fne,gne,(function(e){return Math.floor(e.getUTCMonth()/3)})),(0,Ir.Z)(fne,mne,(function(e){return e.getUTCMonth()})),(0,Ir.Z)(fne,bne,(function(e){return e.getUTCDate()})),(0,Ir.Z)(fne,kne,(function(e){return e.getUTCHours()})),(0,Ir.Z)(fne,_ne,(function(e){return e.getUTCMinutes()})),(0,Ir.Z)(fne,Sne,(function(e){return e.getUTCSeconds()})),(0,Ir.Z)(fne,Cne,(function(e){return e.getUTCMilliseconds()})),(0,Ir.Z)(fne,wne,(function(e){return Dne(e)})),(0,Ir.Z)(fne,yne,(function(e){return Fne(e)})),(0,Ir.Z)(fne,xne,(function(e,t){return One(1,e.getUTCDay(),Ine(t))})),(0,Ir.Z)(fne,"weekday",(function(e,t){return One(Fne(e),e.getUTCDay(),Ine(t))})),hne={},(0,Ir.Z)(hne,gne,(function(e){return 3*e})),(0,Ir.Z)(hne,yne,(function(e,t){return One(e,0,Ine(t))}));dne={},(0,Ir.Z)(dne,vne,Qte),(0,Ir.Z)(dne,gne,ene.every(3)),(0,Ir.Z)(dne,mne,ene),(0,Ir.Z)(dne,yne,Bte),(0,Ir.Z)(dne,bne,Ite),(0,Ir.Z)(dne,xne,Ite),(0,Ir.Z)(dne,wne,Ite),(0,Ir.Z)(dne,kne,nne),(0,Ir.Z)(dne,_ne,ane),(0,Ir.Z)(dne,Sne,one),(0,Ir.Z)(dne,Cne,une),pne={},(0,Ir.Z)(pne,vne,Jte),(0,Ir.Z)(pne,gne,tne.every(3)),(0,Ir.Z)(pne,mne,tne),(0,Ir.Z)(pne,yne,qte),(0,Ir.Z)(pne,bne,Ote),(0,Ir.Z)(pne,xne,Ote),(0,Ir.Z)(pne,wne,Ote),(0,Ir.Z)(pne,kne,rne),(0,Ir.Z)(pne,_ne,ine),(0,Ir.Z)(pne,Sne,one),(0,Ir.Z)(pne,Cne,une);var Rne,Zne,Bne=[vne,mne,bne,kne,_ne,Sne,Cne],zne=Bne.slice(0,-1),Lne=zne.slice(0,-1),Pne=Lne.slice(0,-1);Pne.slice(0,-1);var jne="linear",Une="log",Wne="pow",Vne="sqrt",qne="symlog",Hne="time",Gne="utc",Xne="sequential",Yne="diverging",Kne="quantile",$ne="quantize",Qne="threshold",Jne="continuous",ere="discrete",tre="discretizing",nre="interpolating",rre="temporal";function are(){var e,t,n=q8().unknown(void 0),r=n.domain,a=n.range,i=[0,1],o=!1,u=0,s=0,c=.5;function l(){var n=r().length,l=i[1]<i[0],f=i[1-l],h=function(e,t,n){var r=e-t+2*n;return e?r>0?r:1:0}(n,u,s),d=i[l-0];e=(f-d)/(h||1),o&&(e=Math.floor(e)),d+=(f-d-e*(n-u))*c,t=e*(1-u),o&&(d=Math.round(d),t=Math.round(t));var p=_l(n).map((function(t){return d+e*t}));return a(l?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),l()):r()},n.range=function(e){return arguments.length?(i=[+e[0],+e[1]],l()):i.slice()},n.rangeRound=function(e){return i=[+e[0],+e[1]],o=!0,l()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(o=!!e,l()):o},n.padding=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),u=s,l()):u},n.paddingInner=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),l()):u},n.paddingOuter=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),l()):s},n.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),l()):c},n.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var n,o,u,s=i[1]<i[0],c=s?a().reverse():a(),l=c.length-1,f=+e[0],h=+e[1];if(f===f&&h===h&&(h<f&&(u=f,f=h,h=u),!(h<c[0]||f>i[1-s])))return n=Math.max(0,nL(c,f)-1),o=f===h?n:nL(c,h)-1,f-c[n]>t+1e-10&&++n,s&&(u=n,n=l-o,o=l-u),n>o?void 0:r().slice(n,o+1)}},n.invert=function(e){var t=n.invertRange([e,e]);return t?t[0]:t},n.copy=function(){return are().domain(r()).range(i).round(o).paddingInner(u).paddingOuter(s).align(c)},l()}function ire(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return ire(t())},e}var ore=Array.prototype.map;function ure(e){return ore.call(e,z8)}var sre=Array.prototype.slice;var cre={};function lre(e,t,n){var r=function(){var n=t();return n.invertRange||(n.invertRange=n.invert?function(e){return function(t){var n,r=t[0],a=t[1];return a<r&&(n=r,r=a,a=n),[e.invert(r),e.invert(a)]}}(n):n.invertExtent?function(e){return function(t){var n,r,a,i,o=e.range(),u=t[0],s=t[1],c=-1;for(s<u&&(r=u,u=s,s=r),a=0,i=o.length;a<i;++a)o[a]>=u&&o[a]<=s&&(c<0&&(c=a),n=a);if(!(c<0))return u=e.invertExtent(o[c]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}}(n):void 0),n.type=e,n};return r.metadata=function(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return t}(L8(n)),r}function fre(e,t,n){return arguments.length>1?(cre[e]=lre(e,t,n),this):hre(e)?cre[e]:void 0}function hre(e){return j8(cre,e)}fre("identity",(function e(t){var n;function r(e){return null==e||isNaN(e=+e)?n:e}return r.invert=r,r.domain=r.range=function(e){return arguments.length?(t=Array.from(e,f7),r):t.slice()},r.unknown=function(e){return arguments.length?(n=e,r):n},r.copy=function(){return e(t).unknown(n)},t=arguments.length?Array.from(t,f7):[0,1],x7(r)})),fre(jne,(function e(){var t=b7();return t.copy=function(){return m7(t,e())},U8.apply(t,arguments),x7(t)}),Jne),fre(Une,(function e(){var t=N7(y7()).domain([1,10]);return t.copy=function(){return m7(t,e()).base(t.base())},U8.apply(t,arguments),t}),[Jne,Une]),fre(Wne,I7,Jne),fre(Vne,(function(){return I7.apply(null,arguments).exponent(.5)}),Jne),fre(qne,(function e(){var t=Z7(y7());return t.copy=function(){return m7(t,e()).constant(t.constant())},U8.apply(t,arguments)}),Jne),fre(Hne,(function(){return U8.apply(xee(V7,q7,nj,aj,zP,ZP,oj,sj,lj,$7).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}),[Jne,rre]),fre(Gne,(function(){return U8.apply(xee(P7,j7,wj,_j,XP,HP,Cj,Aj,lj,J7).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}),[Jne,rre]),fre(Xne,_ee,[Jne,nre]),fre("".concat(Xne,"-").concat(jne),_ee,[Jne,nre]),fre("".concat(Xne,"-").concat(Une),(function e(){var t=N7(wee()).domain([1,10]);return t.copy=function(){return kee(t,e()).base(t.base())},W8.apply(t,arguments)}),[Jne,nre,Une]),fre("".concat(Xne,"-").concat(Wne),See,[Jne,nre]),fre("".concat(Xne,"-").concat(Vne),(function(){return See.apply(null,arguments).exponent(.5)}),[Jne,nre]),fre("".concat(Xne,"-").concat(qne),(function e(){var t=Z7(wee());return t.copy=function(){return kee(t,e()).constant(t.constant())},W8.apply(t,arguments)}),[Jne,nre]),fre("".concat(Yne,"-").concat(jne),(function e(){var t=x7(Eee()(d7));return t.copy=function(){return kee(t,e())},W8.apply(t,arguments)}),[Jne,nre]),fre("".concat(Yne,"-").concat(Une),(function e(){var t=N7(Eee()).domain([.1,1,10]);return t.copy=function(){return kee(t,e()).base(t.base())},W8.apply(t,arguments)}),[Jne,nre,Une]),fre("".concat(Yne,"-").concat(Wne),Aee,[Jne,nre]),fre("".concat(Yne,"-").concat(Vne),(function(){return Aee.apply(null,arguments).exponent(.5)}),[Jne,nre]),fre("".concat(Yne,"-").concat(qne),(function e(){var t=Z7(Eee());return t.copy=function(){return kee(t,e()).constant(t.constant())},W8.apply(t,arguments)}),[Jne,nre]),fre(Kne,(function e(){var t,n=[],r=[],a=[];function i(){var e=0,t=Math.max(1,r.length);for(a=new Array(t-1);++e<t;)a[e-1]=wl(n,e/t);return o}function o(e){return null==e||isNaN(e=+e)?t:r[aL(a,e)]}return o.invertExtent=function(e){var t=r.indexOf(e);return t<0?[NaN,NaN]:[t>0?a[t-1]:n[0],t<a.length?a[t]:n[n.length-1]]},o.domain=function(e){if(!arguments.length)return n.slice();n=[];var t,r=(0,zt.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;null==a||isNaN(a=+a)||n.push(a)}}catch(o){r.e(o)}finally{r.f()}return n.sort(pl),i()},o.range=function(e){return arguments.length?(r=Array.from(e),i()):r.slice()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.quantiles=function(){return a.slice()},o.copy=function(){return e().domain(n).range(r).unknown(t)},U8.apply(o,arguments)}),[tre,Kne]),fre($ne,(function e(){var t,n=0,r=1,a=1,i=[.5],o=[0,1];function u(e){return null!=e&&e<=e?o[aL(i,e,0,a)]:t}function s(){var e=-1;for(i=new Array(a);++e<a;)i[e]=((e+1)*r-(e-a)*n)/(a+1);return u}return u.domain=function(e){var t,a;return arguments.length?(t=e,a=(0,gc.Z)(t,2),n=a[0],r=a[1],n=+n,r=+r,s()):[n,r]},u.range=function(e){return arguments.length?(a=(o=Array.from(e)).length-1,s()):o.slice()},u.invertExtent=function(e){var t=o.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,i[0]]:t>=a?[i[a-1],r]:[i[t-1],i[t]]},u.unknown=function(e){return arguments.length?(t=e,u):u},u.thresholds=function(){return i.slice()},u.copy=function(){return e().domain([n,r]).range(o).unknown(t)},U8.apply(x7(u),arguments)}),tre),fre(Qne,(function e(){var t,n=[.5],r=[0,1],a=1;function i(e){return null!=e&&e<=e?r[aL(n,e,0,a)]:t}return i.domain=function(e){return arguments.length?(n=Array.from(e),a=Math.min(n.length,r.length-1),i):n.slice()},i.range=function(e){return arguments.length?(r=Array.from(e),a=Math.min(n.length,r.length-1),i):r.slice()},i.invertExtent=function(e){var t=r.indexOf(e);return[n[t-1],n[t]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return e().domain(n).range(r).unknown(t)},U8.apply(i,arguments)}),tre),fre("bin-ordinal",(function e(){var t=[],n=[];function r(e){return null==e||e!==e?void 0:n[(aL(t,e)-1)%n.length]}return r.domain=function(e){return arguments.length?(t=ure(e),r):t.slice()},r.range=function(e){return arguments.length?(n=sre.call(e),r):n.slice()},r.tickFormat=function(e,n){return l7(t[0],B8(t),null==e?10:e,n)},r.copy=function(){return e().domain(r.domain()).range(r.range())},r}),[ere,tre]),fre("ordinal",q8,ere),fre("band",are,ere),fre("point",(function(){return ire(are().paddingInner(1))}),ere);function dre(e,t){var n=t[0],r=B8(t)-n;return function(t){return e(n+t*r)}}function pre(e,t,n){return Cee(gre(t||"rgb",n),e)}function vre(e,t){for(var n=new Array(t),r=t+1,a=0;a<t;)n[a]=e(++a/r);return n}function gre(e,t){var n=y[function(e){return"interpolate"+e.toLowerCase().split("-").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("")}(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function mre(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function yre(e,t){for(var n in e)xre(n,t(e[n]))}var bre={};function xre(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(bre[e]=t,this):bre[e]}yre({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},mre),yre({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(function(e){return pre(mre(e))}));Rne={},(0,Ir.Z)(Rne,Kne,"quantiles"),(0,Ir.Z)(Rne,$ne,"thresholds"),(0,Ir.Z)(Rne,Qne,"domain"),Zne={},(0,Ir.Z)(Zne,Kne,"quantiles"),(0,Ir.Z)(Zne,$ne,"domain");var wre=function(e){return e};function kre(e,t){e&&Sre.hasOwnProperty(e.type)&&Sre[e.type](e,t)}var _re={Feature:function(e,t){kre(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,a=n.length;++r<a;)kre(n[r].geometry,t)}},Sre={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Cre(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)Cre(n[r],t,0)},Polygon:function(e,t){Ere(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)Ere(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,a=n.length;++r<a;)kre(n[r],t)}};function Cre(e,t,n){var r,a=-1,i=e.length-n;for(t.lineStart();++a<i;)r=e[a],t.point(r[0],r[1],r[2]);t.lineEnd()}function Ere(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Cre(e[n],t,1);t.polygonEnd()}function Are(e,t){e&&_re.hasOwnProperty(e.type)?_re[e.type](e,t):kre(e,t)}var Nre=function(){function e(){(0,ud.Z)(this,e),this._partials=new Float64Array(32),this._n=0}return(0,sd.Z)(e,[{key:"add",value:function(e){for(var t=this._partials,n=0,r=0;r<this._n&&r<32;r++){var a=t[r],i=e+a,o=Math.abs(e)<Math.abs(a)?e-(i-a):a-(i-e);o&&(t[n++]=o),e=i}return t[n]=e,this._n=n+1,this}},{key:"valueOf",value:function(){var e,t,n,r=this._partials,a=this._n,i=0;if(a>0){for(i=r[--a];a>0&&(e=i,!(n=(t=r[--a])-((i=e+t)-e))););a>0&&(n<0&&r[a-1]<0||n>0&&r[a-1]>0)&&(t=2*n)==(e=i+t)-i&&(i=e)}return i}}]),e}();function Tre(){}var Mre,Dre,Fre,Ire,Ore=new Nre,Rre=new Nre,Zre={point:Tre,lineStart:Tre,lineEnd:Tre,polygonStart:function(){Zre.lineStart=Bre,Zre.lineEnd=Pre},polygonEnd:function(){Zre.lineStart=Zre.lineEnd=Zre.point=Tre,Ore.add(ZO(Rre)),Rre=new Nre},result:function(){var e=Ore/2;return Ore=new Nre,e}};function Bre(){Zre.point=zre}function zre(e,t){Zre.point=Lre,Mre=Fre=e,Dre=Ire=t}function Lre(e,t){Rre.add(Ire*e-Fre*t),Fre=e,Ire=t}function Pre(){Lre(Mre,Dre)}var jre=Zre,Ure=1/0,Wre=Ure,Vre=-Ure,qre=Vre,Hre={point:function(e,t){e<Ure&&(Ure=e);e>Vre&&(Vre=e);t<Wre&&(Wre=t);t>qre&&(qre=t)},lineStart:Tre,lineEnd:Tre,polygonStart:Tre,polygonEnd:Tre,result:function(){var e=[[Ure,Wre],[Vre,qre]];return Vre=qre=-(Wre=Ure=1/0),e}};var Gre,Xre,Yre,Kre,$re=Hre,Qre=0,Jre=0,eae=0,tae=0,nae=0,rae=0,aae=0,iae=0,oae=0,uae={point:sae,lineStart:cae,lineEnd:hae,polygonStart:function(){uae.lineStart=dae,uae.lineEnd=pae},polygonEnd:function(){uae.point=sae,uae.lineStart=cae,uae.lineEnd=hae},result:function(){var e=oae?[aae/oae,iae/oae]:rae?[tae/rae,nae/rae]:eae?[Qre/eae,Jre/eae]:[NaN,NaN];return Qre=Jre=eae=tae=nae=rae=aae=iae=oae=0,e}};function sae(e,t){Qre+=e,Jre+=t,++eae}function cae(){uae.point=lae}function lae(e,t){uae.point=fae,sae(Yre=e,Kre=t)}function fae(e,t){var n=e-Yre,r=t-Kre,a=GO(n*n+r*r);tae+=a*(Yre+e)/2,nae+=a*(Kre+t)/2,rae+=a,sae(Yre=e,Kre=t)}function hae(){uae.point=sae}function dae(){uae.point=vae}function pae(){gae(Gre,Xre)}function vae(e,t){uae.point=gae,sae(Gre=Yre=e,Xre=Kre=t)}function gae(e,t){var n=e-Yre,r=t-Kre,a=GO(n*n+r*r);tae+=a*(Yre+e)/2,nae+=a*(Kre+t)/2,rae+=a,aae+=(a=Kre*e-Yre*t)*(Yre+e),iae+=a*(Kre+t),oae+=3*a,sae(Yre=e,Kre=t)}var mae=uae;function yae(e){this._context=e}yae.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,IO)}},result:Tre};var bae,xae,wae,kae,_ae,Sae=new Nre,Cae={point:Tre,lineStart:function(){Cae.point=Eae},lineEnd:function(){bae&&Aae(xae,wae),Cae.point=Tre},polygonStart:function(){bae=!0},polygonEnd:function(){bae=null},result:function(){var e=+Sae;return Sae=new Nre,e}};function Eae(e,t){Cae.point=Aae,xae=kae=e,wae=_ae=t}function Aae(e,t){kae-=e,_ae-=t,Sae.add(GO(kae*kae+_ae*_ae)),kae=e,_ae=t}var Nae=Cae;function Tae(){this._string=[]}function Mae(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Dae(e,t){var n,r,a=4.5;function i(e){return e&&("function"===typeof a&&r.pointRadius(+a.apply(this,arguments)),Are(e,n(r))),r.result()}return i.area=function(e){return Are(e,n(jre)),jre.result()},i.measure=function(e){return Are(e,n(Nae)),Nae.result()},i.bounds=function(e){return Are(e,n($re)),$re.result()},i.centroid=function(e){return Are(e,n(mae)),mae.result()},i.projection=function(t){return arguments.length?(n=null==t?(e=null,wre):(e=t).stream,i):e},i.context=function(e){return arguments.length?(r=null==e?(t=null,new Tae):new yae(t=e),"function"!==typeof a&&r.pointRadius(a),i):t},i.pointRadius=function(e){return arguments.length?(a="function"===typeof e?e:(r.pointRadius(+e),+e),i):a},i.projection(e).context(t)}function Fae(){var e,t=[];return{point:function(t,n,r){e.push([t,n,r])},lineStart:function(){t.push(e=[])},lineEnd:Tre,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function Iae(e,t){return ZO(e[0]-t[0])<NO&&ZO(e[1]-t[1])<NO}function Oae(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Rae(e,t,n,r,a){var i,o,u=[],s=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],o=e[t];if(Iae(r,o)){if(!r[2]&&!o[2]){for(a.lineStart(),i=0;i<t;++i)a.point((r=e[i])[0],r[1]);return void a.lineEnd()}o[0]+=2e-6}u.push(n=new Oae(r,e,null,!0)),s.push(n.o=new Oae(r,null,n,!1)),u.push(n=new Oae(o,e,null,!1)),s.push(n.o=new Oae(o,null,n,!0))}})),u.length){for(s.sort(t),Zae(u),Zae(s),i=0,o=s.length;i<o;++i)s[i].e=n=!n;for(var c,l,f=u[0];;){for(var h=f,d=!0;h.v;)if((h=h.n)===f)return;c=h.z,a.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(i=0,o=c.length;i<o;++i)a.point((l=c[i])[0],l[1]);else r(h.x,h.n.x,1,a);h=h.n}else{if(d)for(c=h.p.z,i=c.length-1;i>=0;--i)a.point((l=c[i])[0],l[1]);else r(h.x,h.p.x,-1,a);h=h.p}c=(h=h.o).z,d=!d}while(!h.v);a.lineEnd()}}}function Zae(e){if(t=e.length){for(var t,n,r=0,a=e[0];++r<t;)a.n=n=e[r],n.p=a,a=n;a.n=n=e[0],n.p=a}}function Bae(e){return[zO(e[1],e[0]),KO(e[2])]}function zae(e){var t=e[0],n=e[1],r=LO(n);return[r*LO(t),r*qO(t),qO(n)]}function Lae(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Pae(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function jae(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Uae(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Wae(e){var t=GO(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Vae(e){return ZO(e[0])<=MO?e[0]:HO(e[0])*((ZO(e[0])+MO)%IO-MO)}Tae.prototype={_radius:4.5,_circle:Mae(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=Mae(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}};var qae=S().mark(Hae);function Hae(e){var t,n,r;return S().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t=(0,zt.Z)(e),a.prev=1,t.s();case 3:if((n=t.n()).done){a.next=8;break}return r=n.value,a.delegateYield(r,"t0",6);case 6:a.next=3;break;case 8:a.next=13;break;case 10:a.prev=10,a.t1=a.catch(1),t.e(a.t1);case 13:return a.prev=13,t.f(),a.finish(13);case 16:case"end":return a.stop()}}),qae,null,[[1,10,13,16]])}function Gae(e){return Array.from(Hae(e))}function Xae(e,t,n,r){return function(a){var i,o,u,s=t(a),c=Fae(),l=t(c),f=!1,h={point:d,lineStart:v,lineEnd:g,polygonStart:function(){h.point=m,h.lineStart=y,h.lineEnd=b,o=[],i=[]},polygonEnd:function(){h.point=d,h.lineStart=v,h.lineEnd=g,o=Gae(o);var e=function(e,t){var n=Vae(t),r=t[1],a=qO(r),i=[qO(n),-LO(n),0],o=0,u=0,s=new Nre;1===a?r=DO+NO:-1===a&&(r=-DO-NO);for(var c=0,l=e.length;c<l;++c)if(h=(f=e[c]).length)for(var f,h,d=f[h-1],p=Vae(d),v=d[1]/2+FO,g=qO(v),m=LO(v),y=0;y<h;++y,p=x,g=k,m=_,d=b){var b=f[y],x=Vae(b),w=b[1]/2+FO,k=qO(w),_=LO(w),S=x-p,C=S>=0?1:-1,E=C*S,A=E>MO,N=g*k;if(s.add(zO(N*C*qO(E),m*_+N*LO(E))),o+=A?S+C*IO:S,A^p>=n^x>=n){var T=Pae(zae(d),zae(b));Wae(T);var M=Pae(i,T);Wae(M);var D=(A^S>=0?-1:1)*KO(M[2]);(r>D||r===D&&(T[0]||T[1]))&&(u+=A^S>=0?1:-1)}}return(o<-1e-6||o<NO&&s<-1e-12)^1&u}(i,r);o.length?(f||(a.polygonStart(),f=!0),Rae(o,Kae,e,n,a)):e&&(f||(a.polygonStart(),f=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),f&&(a.polygonEnd(),f=!1),o=i=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function d(t,n){e(t,n)&&a.point(t,n)}function p(e,t){s.point(e,t)}function v(){h.point=p,s.lineStart()}function g(){h.point=d,s.lineEnd()}function m(e,t){u.push([e,t]),l.point(e,t)}function y(){l.lineStart(),u=[]}function b(){m(u[0][0],u[0][1]),l.lineEnd();var e,t,n,r,s=l.clean(),h=c.result(),d=h.length;if(u.pop(),i.push(u),u=null,d)if(1&s){if((t=(n=h[0]).length-1)>0){for(f||(a.polygonStart(),f=!0),a.lineStart(),e=0;e<t;++e)a.point((r=n[e])[0],r[1]);a.lineEnd()}}else d>1&&2&s&&h.push(h.pop().concat(h.shift())),o.push(h.filter(Yae))}return h}}function Yae(e){return e.length>1}function Kae(e,t){return((e=e.x)[0]<0?e[1]-DO-NO:DO-e[1])-((t=t.x)[0]<0?t[1]-DO-NO:DO-t[1])}var $ae=Xae((function(){return!0}),(function(e){var t,n=NaN,r=NaN,a=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(i,o){var u=i>0?MO:-MO,s=ZO(i-n);ZO(s-MO)<NO?(e.point(n,r=(r+o)/2>0?DO:-DO),e.point(a,r),e.lineEnd(),e.lineStart(),e.point(u,r),e.point(i,r),t=0):a!==u&&s>=MO&&(ZO(n-a)<NO&&(n-=a*NO),ZO(i-u)<NO&&(i-=u*NO),r=function(e,t,n,r){var a,i,o=qO(e-n);return ZO(o)>NO?BO((qO(t)*(i=LO(r))*qO(n)-qO(r)*(a=LO(t))*qO(e))/(a*i*o)):(t+r)/2}(n,r,i,o),e.point(a,r),e.lineEnd(),e.lineStart(),e.point(u,r),t=0),e.point(n=i,r=o),a=u},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}),(function(e,t,n,r){var a;if(null==e)a=n*DO,r.point(-MO,a),r.point(0,a),r.point(MO,a),r.point(MO,0),r.point(MO,-a),r.point(0,-a),r.point(-MO,-a),r.point(-MO,0),r.point(-MO,a);else if(ZO(e[0]-t[0])>NO){var i=e[0]<t[0]?MO:-MO;a=n*i/2,r.point(-i,a),r.point(0,a),r.point(i,a)}else r.point(t[0],t[1])}),[-MO,-DO]);function Qae(e,t,n,r,a,i){if(n){var o=LO(t),u=qO(t),s=r*n;null==a?(a=t+r*IO,i=t-s/2):(a=Jae(o,a),i=Jae(o,i),(r>0?a<i:a>i)&&(a+=r*IO));for(var c,l=a;r>0?l>i:l<i;l-=s)c=Bae([o,-u*LO(l),-u*qO(l)]),e.point(c[0],c[1])}}function Jae(e,t){(t=zae(t))[0]-=e,Wae(t);var n=YO(-t[1]);return((-t[2]<0?-n:n)+IO-NO)%IO}function eie(e){var t=LO(e),n=6*RO,r=t>0,a=ZO(t)>NO;function i(e,n){return LO(e)*LO(n)>t}function o(e,n,r){var a=[1,0,0],i=Pae(zae(e),zae(n)),o=Lae(i,i),u=i[0],s=o-u*u;if(!s)return!r&&e;var c=t*o/s,l=-t*u/s,f=Pae(a,i),h=Uae(a,c);jae(h,Uae(i,l));var d=f,p=Lae(h,d),v=Lae(d,d),g=p*p-v*(Lae(h,h)-1);if(!(g<0)){var m=GO(g),y=Uae(d,(-p-m)/v);if(jae(y,h),y=Bae(y),!r)return y;var b,x=e[0],w=n[0],k=e[1],_=n[1];w<x&&(b=x,x=w,w=b);var S=w-x,C=ZO(S-MO)<NO;if(!C&&_<k&&(b=k,k=_,_=b),C||S<NO?C?k+_>0^y[1]<(ZO(y[0]-x)<NO?k:_):k<=y[1]&&y[1]<=_:S>MO^(x<=y[0]&&y[0]<=w)){var E=Uae(d,(-p+m)/v);return jae(E,h),[y,Bae(E)]}}}function u(t,n){var a=r?e:MO-e,i=0;return t<-a?i|=1:t>a&&(i|=2),n<-a?i|=4:n>a&&(i|=8),i}return Xae(i,(function(e){var t,n,s,c,l;return{lineStart:function(){c=s=!1,l=1},point:function(f,h){var d,p=[f,h],v=i(f,h),g=r?v?0:u(f,h):v?u(f+(f<0?MO:-MO),h):0;if(!t&&(c=s=v)&&e.lineStart(),v!==s&&(!(d=o(t,p))||Iae(t,d)||Iae(p,d))&&(p[2]=1),v!==s)l=0,v?(e.lineStart(),d=o(p,t),e.point(d[0],d[1])):(d=o(t,p),e.point(d[0],d[1],2),e.lineEnd()),t=d;else if(a&&t&&r^v){var m;g&n||!(m=o(p,t,!0))||(l=0,r?(e.lineStart(),e.point(m[0][0],m[0][1]),e.point(m[1][0],m[1][1]),e.lineEnd()):(e.point(m[1][0],m[1][1]),e.lineEnd(),e.lineStart(),e.point(m[0][0],m[0][1],3)))}!v||t&&Iae(t,p)||e.point(p[0],p[1]),t=p,s=v,n=g},lineEnd:function(){s&&e.lineEnd(),t=null},clean:function(){return l|(c&&s)<<1}}}),(function(t,r,a,i){Qae(i,e,n,a,t,r)}),r?[0,-e]:[-MO,e-MO])}var tie=1e9,nie=-1e9;function rie(e,t,n,r){function a(a,i){return e<=a&&a<=n&&t<=i&&i<=r}function i(a,i,u,c){var l=0,f=0;if(null==a||(l=o(a,u))!==(f=o(i,u))||s(a,i)<0^u>0)do{c.point(0===l||3===l?e:n,l>1?r:t)}while((l=(l+u+4)%4)!==f);else c.point(i[0],i[1])}function o(r,a){return ZO(r[0]-e)<NO?a>0?0:3:ZO(r[0]-n)<NO?a>0?2:1:ZO(r[1]-t)<NO?a>0?1:0:a>0?3:2}function u(e,t){return s(e.x,t.x)}function s(e,t){var n=o(e,1),r=o(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(o){var s,c,l,f,h,d,p,v,g,m,y,b=o,x=Fae(),w={point:k,lineStart:function(){w.point=_,c&&c.push(l=[]);m=!0,g=!1,p=v=NaN},lineEnd:function(){s&&(_(f,h),d&&g&&x.rejoin(),s.push(x.result()));w.point=k,g&&b.lineEnd()},polygonStart:function(){b=x,s=[],c=[],y=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,a=c.length;n<a;++n)for(var i,o,u=c[n],s=1,l=u.length,f=u[0],h=f[0],d=f[1];s<l;++s)i=h,o=d,h=(f=u[s])[0],d=f[1],o<=r?d>r&&(h-i)*(r-o)>(d-o)*(e-i)&&++t:d<=r&&(h-i)*(r-o)<(d-o)*(e-i)&&--t;return t}(),n=y&&t,a=(s=Gae(s)).length;(n||a)&&(o.polygonStart(),n&&(o.lineStart(),i(null,null,1,o),o.lineEnd()),a&&Rae(s,u,t,i,o),o.polygonEnd());b=o,s=c=l=null}};function k(e,t){a(e,t)&&b.point(e,t)}function _(i,o){var u=a(i,o);if(c&&l.push([i,o]),m)f=i,h=o,d=u,m=!1,u&&(b.lineStart(),b.point(i,o));else if(u&&g)b.point(i,o);else{var s=[p=Math.max(nie,Math.min(tie,p)),v=Math.max(nie,Math.min(tie,v))],x=[i=Math.max(nie,Math.min(tie,i)),o=Math.max(nie,Math.min(tie,o))];!function(e,t,n,r,a,i){var o,u=e[0],s=e[1],c=0,l=1,f=t[0]-u,h=t[1]-s;if(o=n-u,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<l&&(l=o)}else if(f>0){if(o>l)return;o>c&&(c=o)}if(o=a-u,f||!(o<0)){if(o/=f,f<0){if(o>l)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<l&&(l=o)}if(o=r-s,h||!(o>0)){if(o/=h,h<0){if(o<c)return;o<l&&(l=o)}else if(h>0){if(o>l)return;o>c&&(c=o)}if(o=i-s,h||!(o<0)){if(o/=h,h<0){if(o>l)return;o>c&&(c=o)}else if(h>0){if(o<c)return;o<l&&(l=o)}return c>0&&(e[0]=u+c*f,e[1]=s+c*h),l<1&&(t[0]=u+l*f,t[1]=s+l*h),!0}}}}}(s,x,e,t,n,r)?u&&(b.lineStart(),b.point(i,o),y=!1):(g||(b.lineStart(),b.point(s[0],s[1])),b.point(x[0],x[1]),u||b.lineEnd(),y=!1)}p=i,v=o,g=u}return w}}function aie(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}function iie(e,t){return[ZO(e)>MO?e+Math.round(-e/IO)*IO:e,t]}function oie(e,t,n){return(e%=IO)?t||n?aie(sie(e),cie(t,n)):sie(e):t||n?cie(t,n):iie}function uie(e){return function(t,n){return[(t+=e)>MO?t-IO:t<-MO?t+IO:t,n]}}function sie(e){var t=uie(e);return t.invert=uie(-e),t}function cie(e,t){var n=LO(e),r=qO(e),a=LO(t),i=qO(t);function o(e,t){var o=LO(t),u=LO(e)*o,s=qO(e)*o,c=qO(t),l=c*n+u*r;return[zO(s*a-l*i,u*n-c*r),KO(l*a+s*i)]}return o.invert=function(e,t){var o=LO(t),u=LO(e)*o,s=qO(e)*o,c=qO(t),l=c*a-s*i;return[zO(s*a+c*i,u*n+l*r),KO(l*n-u*r)]},o}function lie(e){return function(t){var n=new fie;for(var r in e)n[r]=e[r];return n.stream=t,n}}function fie(){}function hie(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),Are(n,e.stream($re)),t($re.result()),null!=r&&e.clipExtent(r),e}function die(e,t,n){return hie(e,(function(n){var r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],i=Math.min(r/(n[1][0]-n[0][0]),a/(n[1][1]-n[0][1])),o=+t[0][0]+(r-i*(n[1][0]+n[0][0]))/2,u=+t[0][1]+(a-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([o,u])}),n)}function pie(e,t,n){return die(e,[[0,0],t],n)}function vie(e,t,n){return hie(e,(function(n){var r=+t,a=r/(n[1][0]-n[0][0]),i=(r-a*(n[1][0]+n[0][0]))/2,o=-a*n[0][1];e.scale(150*a).translate([i,o])}),n)}function gie(e,t,n){return hie(e,(function(n){var r=+t,a=r/(n[1][1]-n[0][1]),i=-a*n[0][0],o=(r-a*(n[1][1]+n[0][1]))/2;e.scale(150*a).translate([i,o])}),n)}iie.invert=iie,fie.prototype={constructor:fie,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var mie=LO(30*RO);function yie(e,t){return+t?function(e,t){function n(r,a,i,o,u,s,c,l,f,h,d,p,v,g){var m=c-r,y=l-a,b=m*m+y*y;if(b>4*t&&v--){var x=o+h,w=u+d,k=s+p,_=GO(x*x+w*w+k*k),S=KO(k/=_),C=ZO(ZO(k)-1)<NO||ZO(i-f)<NO?(i+f)/2:zO(w,x),E=e(C,S),A=E[0],N=E[1],T=A-r,M=N-a,D=y*T-m*M;(D*D/b>t||ZO((m*T+y*M)/b-.5)>.3||o*h+u*d+s*p<mie)&&(n(r,a,i,o,u,s,A,N,C,x/=_,w/=_,k,v,g),g.point(A,N),n(A,N,C,x,w,k,c,l,f,h,d,p,v,g))}}return function(t){var r,a,i,o,u,s,c,l,f,h,d,p,v={point:g,lineStart:m,lineEnd:b,polygonStart:function(){t.polygonStart(),v.lineStart=x},polygonEnd:function(){t.polygonEnd(),v.lineStart=m}};function g(n,r){n=e(n,r),t.point(n[0],n[1])}function m(){l=NaN,v.point=y,t.lineStart()}function y(r,a){var i=zae([r,a]),o=e(r,a);n(l,f,c,h,d,p,l=o[0],f=o[1],c=r,h=i[0],d=i[1],p=i[2],16,t),t.point(l,f)}function b(){v.point=g,t.lineEnd()}function x(){m(),v.point=w,v.lineEnd=k}function w(e,t){y(r=e,t),a=l,i=f,o=h,u=d,s=p,v.point=y}function k(){n(l,f,c,h,d,p,a,i,r,o,u,s,16,t),v.lineEnd=b,b()}return v}}(e,t):function(e){return lie({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)}var bie=lie({point:function(e,t){this.stream.point(e*RO,t*RO)}});function xie(e,t,n,r,a,i){if(!i)return function(e,t,n,r,a){function i(i,o){return[t+e*(i*=r),n-e*(o*=a)]}return i.invert=function(i,o){return[(i-t)/e*r,(n-o)/e*a]},i}(e,t,n,r,a);var o=LO(i),u=qO(i),s=o*e,c=u*e,l=o/e,f=u/e,h=(u*n-o*t)/e,d=(u*t+o*n)/e;function p(e,i){return[s*(e*=r)-c*(i*=a)+t,n-c*e-s*i]}return p.invert=function(e,t){return[r*(l*e-f*t+h),a*(d-f*e-l*t)]},p}function wie(e){return kie((function(){return e}))()}function kie(e){var t,n,r,a,i,o,u,s,c,l,f=150,h=480,d=250,p=0,v=0,g=0,m=0,y=0,b=0,x=1,w=1,k=null,_=$ae,S=null,C=wre,E=.5;function A(e){return s(e[0]*RO,e[1]*RO)}function N(e){return(e=s.invert(e[0],e[1]))&&[e[0]*OO,e[1]*OO]}function T(){var e=xie(f,0,0,x,w,b).apply(null,t(p,v)),r=xie(f,h-e[0],d-e[1],x,w,b);return n=oie(g,m,y),u=aie(t,r),s=aie(n,u),o=yie(u,E),M()}function M(){return c=l=null,A}return A.stream=function(e){return c&&l===e?c:c=bie(function(e){return lie({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}(n)(_(o(C(l=e)))))},A.preclip=function(e){return arguments.length?(_=e,k=void 0,M()):_},A.postclip=function(e){return arguments.length?(C=e,S=r=a=i=null,M()):C},A.clipAngle=function(e){return arguments.length?(_=+e?eie(k=e*RO):(k=null,$ae),M()):k*OO},A.clipExtent=function(e){return arguments.length?(C=null==e?(S=r=a=i=null,wre):rie(S=+e[0][0],r=+e[0][1],a=+e[1][0],i=+e[1][1]),M()):null==S?null:[[S,r],[a,i]]},A.scale=function(e){return arguments.length?(f=+e,T()):f},A.translate=function(e){return arguments.length?(h=+e[0],d=+e[1],T()):[h,d]},A.center=function(e){return arguments.length?(p=e[0]%360*RO,v=e[1]%360*RO,T()):[p*OO,v*OO]},A.rotate=function(e){return arguments.length?(g=e[0]%360*RO,m=e[1]%360*RO,y=e.length>2?e[2]%360*RO:0,T()):[g*OO,m*OO,y*OO]},A.angle=function(e){return arguments.length?(b=e%360*RO,T()):b*OO},A.reflectX=function(e){return arguments.length?(x=e?-1:1,T()):x<0},A.reflectY=function(e){return arguments.length?(w=e?-1:1,T()):w<0},A.precision=function(e){return arguments.length?(o=yie(u,E=e*e),M()):GO(E)},A.fitExtent=function(e,t){return die(A,e,t)},A.fitSize=function(e,t){return pie(A,e,t)},A.fitWidth=function(e,t){return vie(A,e,t)},A.fitHeight=function(e,t){return gie(A,e,t)},function(){return t=e.apply(this,arguments),A.invert=t.invert&&N,T()}}function _ie(e){var t=0,n=MO/3,r=kie(e),a=r(t,n);return a.parallels=function(e){return arguments.length?r(t=e[0]*RO,n=e[1]*RO):[t*OO,n*OO]},a}function Sie(e,t){var n=qO(e),r=(n+qO(t))/2;if(ZO(r)<NO)return function(e){var t=LO(e);function n(e,n){return[e*t,qO(n)/t]}return n.invert=function(e,n){return[e/t,KO(n*t)]},n}(e);var a=1+n*(2*r-n),i=GO(a)/r;function o(e,t){var n=GO(a-2*r*qO(t))/r;return[n*qO(e*=r),i-n*LO(e)]}return o.invert=function(e,t){var n=i-t,o=zO(e,ZO(n))*HO(n);return n*r<0&&(o-=MO*HO(e)*HO(n)),[o/r,KO((a-(e*e+n*n)*r*r)/(2*r))]},o}function Cie(){return _ie(Sie).scale(155.424).center([0,33.6442])}function Eie(){return Cie().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Aie(e){return function(t,n){var r=LO(t),a=LO(n),i=e(r*a);return i===1/0?[2,0]:[i*a*qO(t),i*qO(n)]}}function Nie(e){return function(t,n){var r=GO(t*t+n*n),a=e(r),i=qO(a),o=LO(a);return[zO(t*i,r*o),KO(r&&n*i/r)]}}var Tie=Aie((function(e){return GO(2/(1+e))}));Tie.invert=Nie((function(e){return 2*KO(e/2)}));var Mie=Aie((function(e){return(e=YO(e))&&e/qO(e)}));function Die(e,t){return[e,WO(XO((DO+t)/2))]}function Fie(e){var t,n,r,a=wie(e),i=a.center,o=a.scale,u=a.translate,s=a.clipExtent,c=null;function l(){var i=MO*o(),u=a(function(e){function t(t){return(t=e(t[0]*RO,t[1]*RO))[0]*=OO,t[1]*=OO,t}return e=oie(e[0]*RO,e[1]*RO,e.length>2?e[2]*RO:0),t.invert=function(t){return(t=e.invert(t[0]*RO,t[1]*RO))[0]*=OO,t[1]*=OO,t},t}(a.rotate()).invert([0,0]));return s(null==c?[[u[0]-i,u[1]-i],[u[0]+i,u[1]+i]]:e===Die?[[Math.max(u[0]-i,c),t],[Math.min(u[0]+i,n),r]]:[[c,Math.max(u[1]-i,t)],[n,Math.min(u[1]+i,r)]])}return a.scale=function(e){return arguments.length?(o(e),l()):o()},a.translate=function(e){return arguments.length?(u(e),l()):u()},a.center=function(e){return arguments.length?(i(e),l()):i()},a.clipExtent=function(e){return arguments.length?(null==e?c=t=n=r=null:(c=+e[0][0],t=+e[0][1],n=+e[1][0],r=+e[1][1]),l()):null==c?null:[[c,t],[n,r]]},l()}function Iie(e){return XO((DO+e)/2)}function Oie(e,t){var n=LO(e),r=e===t?qO(e):WO(n/LO(t))/WO(Iie(t)/Iie(e)),a=n*VO(Iie(e),r)/r;if(!r)return Die;function i(e,t){a>0?t<-DO+NO&&(t=-DO+NO):t>DO-NO&&(t=DO-NO);var n=a/VO(Iie(t),r);return[n*qO(r*e),a-n*LO(r*e)]}return i.invert=function(e,t){var n=a-t,i=HO(r)*GO(e*e+n*n),o=zO(e,ZO(n))*HO(n);return n*r<0&&(o-=MO*HO(e)*HO(n)),[o/r,2*BO(VO(a/i,1/r))-DO]},i}function Rie(e,t){return[e,t]}function Zie(e,t){var n=LO(e),r=e===t?qO(e):(n-LO(t))/(t-e),a=n/r+e;if(ZO(r)<NO)return Rie;function i(e,t){var n=a-t,i=r*e;return[n*qO(i),a-n*LO(i)]}return i.invert=function(e,t){var n=a-t,i=zO(e,ZO(n))*HO(n);return n*r<0&&(i-=MO*HO(e)*HO(n)),[i/r,a-HO(r)*GO(e*e+n*n)]},i}Mie.invert=Nie((function(e){return e})),Die.invert=function(e,t){return[e,2*BO(jO(t))-DO]},Rie.invert=Rie;var Bie=1.340264,zie=-.081106,Lie=893e-6,Pie=.003796,jie=GO(3)/2;function Uie(e,t){var n=KO(jie*qO(t)),r=n*n,a=r*r*r;return[e*LO(n)/(jie*(Bie+3*zie*r+a*(7*Lie+.034164*r))),n*(Bie+zie*r+a*(Lie+Pie*r))]}function Wie(e,t){var n=LO(t),r=LO(e)*n;return[n*qO(e)/r,qO(t)/r]}function Vie(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function qie(e,t){return[LO(t)*qO(e),qO(t)]}function Hie(e,t){var n=LO(t),r=1+LO(e)*n;return[n*qO(e)/r,qO(t)/r]}function Gie(e,t){return[WO(XO((DO+t)/2)),-e]}Uie.invert=function(e,t){for(var n,r=t,a=r*r,i=a*a*a,o=0;o<12&&(i=(a=(r-=n=(r*(Bie+zie*a+i*(Lie+Pie*a))-t)/(Bie+3*zie*a+i*(7*Lie+.034164*a)))*r)*a*a,!(ZO(n)<TO));++o);return[jie*e*(Bie+3*zie*a+i*(7*Lie+.034164*a))/LO(r),KO(qO(r)/jie)]},Wie.invert=Nie(BO),Vie.invert=function(e,t){var n,r=t,a=25;do{var i=r*r,o=i*i;r-=n=(r*(1.007226+i*(.015085+o*(.028874*i-.044475-.005916*o)))-t)/(1.007226+i*(.045255+o*(.259866*i-.311325-.005916*11*o)))}while(ZO(n)>NO&&--a>0);return[e/(.8707+(i=r*r)*(i*(i*i*i*(.003971-.001529*i)-.013791)-.131979)),r]},qie.invert=Nie(KO),Hie.invert=Nie((function(e){return 2*BO(e)})),Gie.invert=function(e,t){return[-t,2*BO(jO(e))-DO]};var Xie=Math.abs,Yie=(Math.atan,Math.atan2,Math.ceil,Math.cos),Kie=(Math.exp,Math.floor,Math.log,Math.max,Math.min,Math.pow,Math.round,Math.sign,Math.sin),$ie=(Math.tan,Math.PI),Qie=$ie/2,Jie=(Math.SQRT1_2,toe(2));toe($ie);function eoe(e){return e>1?Qie:e<-1?-Qie:Math.asin(e)}function toe(e){return e>0?Math.sqrt(e):0}function noe(e,t){var n,r=e*Kie(t),a=30;do{t-=n=(t+Kie(t)-r)/(1+Yie(t))}while(Xie(n)>1e-6&&--a>0);return t/2}var roe=function(e,t,n){function r(r,a){return[e*r*Yie(a=noe(n,a)),t*Kie(a)]}return r.invert=function(r,a){return a=eoe(a/t),[r/(e*Yie(a)),eoe((2*a+Kie(2*a))/n)]},r}(Jie/Qie,Jie,$ie);Dae();var aoe=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function ioe(e,t){return function n(){var r=t();return r.type=e,r.path=Dae().projection(r),r.copy=r.copy||function(){var e=n();return aoe.forEach((function(t){r[t]&&e[t](r[t]())})),e.path.pointRadius(r.path.pointRadius()),e},r}}function ooe(e,t){if(!e||"string"!==typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(uoe[e]=ioe(e,t),this):uoe[e]||null}var uoe={albers:Eie,albersusa:function(){var e,t,n,r,a,i,o=Eie(),u=Cie().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=Cie().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(e,t){i=[e,t]}};function l(e){var t=e[0],o=e[1];return i=null,n.point(t,o),i||(r.point(t,o),i)||(a.point(t,o),i)}function f(){return e=t=null,l}return l.invert=function(e){var t=o.scale(),n=o.translate(),r=(e[0]-n[0])/t,a=(e[1]-n[1])/t;return(a>=.12&&a<.234&&r>=-.425&&r<-.214?u:a>=.166&&a<.234&&r>=-.214&&r<-.115?s:o).invert(e)},l.stream=function(n){return e&&t===n?e:e=function(e){var t=e.length;return{point:function(n,r){for(var a=-1;++a<t;)e[a].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}([o.stream(t=n),u.stream(n),s.stream(n)])},l.precision=function(e){return arguments.length?(o.precision(e),u.precision(e),s.precision(e),f()):o.precision()},l.scale=function(e){return arguments.length?(o.scale(e),u.scale(.35*e),s.scale(e),l.translate(o.translate())):o.scale()},l.translate=function(e){if(!arguments.length)return o.translate();var t=o.scale(),i=+e[0],l=+e[1];return n=o.translate(e).clipExtent([[i-.455*t,l-.238*t],[i+.455*t,l+.238*t]]).stream(c),r=u.translate([i-.307*t,l+.201*t]).clipExtent([[i-.425*t+NO,l+.12*t+NO],[i-.214*t-NO,l+.234*t-NO]]).stream(c),a=s.translate([i-.205*t,l+.212*t]).clipExtent([[i-.214*t+NO,l+.166*t+NO],[i-.115*t-NO,l+.234*t-NO]]).stream(c),f()},l.fitExtent=function(e,t){return die(l,e,t)},l.fitSize=function(e,t){return pie(l,e,t)},l.fitWidth=function(e,t){return vie(l,e,t)},l.fitHeight=function(e,t){return gie(l,e,t)},l.scale(1070)},azimuthalequalarea:function(){return wie(Tie).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return wie(Mie).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return _ie(Oie).scale(109.5).parallels([30,30])},conicequalarea:Cie,conicequidistant:function(){return _ie(Zie).scale(131.154).center([0,13.9389])},equalEarth:function(){return wie(Uie).scale(177.158)},equirectangular:function(){return wie(Rie).scale(152.63)},gnomonic:function(){return wie(Wie).scale(144.049).clipAngle(60)},identity:function(){var e,t,n,r,a,i,o,u=1,s=0,c=0,l=1,f=1,h=0,d=null,p=1,v=1,g=lie({point:function(e,t){var n=b([e,t]);this.stream.point(n[0],n[1])}}),m=wre;function y(){return p=u*l,v=u*f,i=o=null,b}function b(n){var r=n[0]*p,a=n[1]*v;if(h){var i=a*e-r*t;r=r*e+a*t,a=i}return[r+s,a+c]}return b.invert=function(n){var r=n[0]-s,a=n[1]-c;if(h){var i=a*e+r*t;r=r*e-a*t,a=i}return[r/p,a/v]},b.stream=function(e){return i&&o===e?i:i=g(m(o=e))},b.postclip=function(e){return arguments.length?(m=e,d=n=r=a=null,y()):m},b.clipExtent=function(e){return arguments.length?(m=null==e?(d=n=r=a=null,wre):rie(d=+e[0][0],n=+e[0][1],r=+e[1][0],a=+e[1][1]),y()):null==d?null:[[d,n],[r,a]]},b.scale=function(e){return arguments.length?(u=+e,y()):u},b.translate=function(e){return arguments.length?(s=+e[0],c=+e[1],y()):[s,c]},b.angle=function(n){return arguments.length?(t=qO(h=n%360*RO),e=LO(h),y()):h*OO},b.reflectX=function(e){return arguments.length?(l=e?-1:1,y()):l<0},b.reflectY=function(e){return arguments.length?(f=e?-1:1,y()):f<0},b.fitExtent=function(e,t){return die(b,e,t)},b.fitSize=function(e,t){return pie(b,e,t)},b.fitWidth=function(e,t){return vie(b,e,t)},b.fitHeight=function(e,t){return gie(b,e,t)},b},mercator:function(){return Fie(Die).scale(961/IO)},mollweide:function(){return wie(roe).scale(169.529)},naturalEarth1:function(){return wie(Vie).scale(175.295)},orthographic:function(){return wie(qie).scale(249.5).clipAngle(90.000001)},stereographic:function(){return wie(Hie).scale(250).clipAngle(142)},transversemercator:function(){var e=Fie(Gie),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)}};for(var soe in uoe)ooe(soe,uoe[soe]);var coe,loe,foe,hoe,doe,poe="Literal",voe="Property",goe="ArrayExpression",moe="BinaryExpression",yoe="CallExpression",boe="ConditionalExpression",xoe="LogicalExpression",woe="MemberExpression",koe="ObjectExpression",_oe="UnaryExpression";function Soe(e){this.type=e}Soe.prototype.visit=function(e){var t,n,r;if(e(this))return 1;for(n=0,r=(t=function(e){switch(e.type){case goe:return e.elements;case moe:case xoe:return[e.left,e.right];case yoe:return[e.callee].concat(e.arguments);case boe:return[e.test,e.consequent,e.alternate];case woe:return[e.object,e.property];case koe:return e.properties;case voe:return[e.key,e.value];case _oe:return[e.argument];default:return[]}}(this)).length;n<r;++n)if(t[n].visit(e))return 1};(coe={})[1]="Boolean",coe[2]="<end>",coe[3]="Identifier",coe[4]="Keyword",coe[5]="Null",coe[6]="Numeric",coe[7]="Punctuator",coe[8]="String",coe[9]="RegularExpression";var Coe="Identifier",Eoe="Unexpected token %0",Aoe="Invalid regular expression",Noe="Invalid regular expression: missing /",Toe="Octal literals are not allowed in strict mode.",Moe="ILLEGAL",Doe="Disabled.",Foe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Ioe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Ooe(e,t){if(!e)throw new Error("ASSERT: "+t)}function Roe(e){return e>=48&&e<=57}function Zoe(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function Boe(e){return"01234567".indexOf(e)>=0}function zoe(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function Loe(e){return 10===e||13===e||8232===e||8233===e}function Poe(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&Foe.test(String.fromCharCode(e))}function joe(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&Ioe.test(String.fromCharCode(e))}var Uoe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function Woe(){for(;foe<hoe;){var e=loe.charCodeAt(foe);if(!zoe(e)&&!Loe(e))break;++foe}}function Voe(e){var t,n,r,a=0;for(n="u"===e?4:2,t=0;t<n;++t)foe<hoe&&Zoe(loe[foe])?(r=loe[foe++],a=16*a+"0123456789abcdef".indexOf(r.toLowerCase())):oue({},Eoe,Moe);return String.fromCharCode(a)}function qoe(){var e,t,n,r;for(t=0,"}"===(e=loe[foe])&&oue({},Eoe,Moe);foe<hoe&&Zoe(e=loe[foe++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&oue({},Eoe,Moe),t<=65535?String.fromCharCode(t):(n=55296+(t-65536>>10),r=56320+(t-65536&1023),String.fromCharCode(n,r))}function Hoe(){var e,t;for(e=loe.charCodeAt(foe++),t=String.fromCharCode(e),92===e&&(117!==loe.charCodeAt(foe)&&oue({},Eoe,Moe),++foe,(e=Voe("u"))&&"\\"!==e&&Poe(e.charCodeAt(0))||oue({},Eoe,Moe),t=e);foe<hoe&&joe(e=loe.charCodeAt(foe));)++foe,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==loe.charCodeAt(foe)&&oue({},Eoe,Moe),++foe,(e=Voe("u"))&&"\\"!==e&&joe(e.charCodeAt(0))||oue({},Eoe,Moe),t+=e);return t}function Goe(){var e,t;return e=foe,t=92===loe.charCodeAt(foe)?Hoe():function(){var e,t;for(e=foe++;foe<hoe;){if(92===(t=loe.charCodeAt(foe)))return foe=e,Hoe();if(!joe(t))break;++foe}return loe.slice(e,foe)}(),{type:1===t.length?3:Uoe.hasOwnProperty(t)?4:"null"===t?5:"true"===t||"false"===t?1:3,value:t,start:e,end:foe}}function Xoe(){var e,t,n,r,a=foe,i=loe.charCodeAt(foe),o=loe[foe];switch(i){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++foe,{type:7,value:String.fromCharCode(i),start:a,end:foe};default:if(61===(e=loe.charCodeAt(foe+1)))switch(i){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return foe+=2,{type:7,value:String.fromCharCode(i)+String.fromCharCode(e),start:a,end:foe};case 33:case 61:return foe+=2,61===loe.charCodeAt(foe)&&++foe,{type:7,value:loe.slice(a,foe),start:a,end:foe}}}return">>>="===(r=loe.substr(foe,4))?{type:7,value:r,start:a,end:foe+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:7,value:n,start:a,end:foe+=3}:o===(t=n.substr(0,2))[1]&&"+-<>&|".indexOf(o)>=0||"=>"===t?{type:7,value:t,start:a,end:foe+=2}:("//"===t&&oue({},Eoe,Moe),"<>=!+-*%&|^/".indexOf(o)>=0?{type:7,value:o,start:a,end:++foe}:void oue({},Eoe,Moe))}function Yoe(){var e,t,n;if(Ooe(Roe((n=loe[foe]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=foe,e="","."!==n){if(e=loe[foe++],n=loe[foe],"0"===e){if("x"===n||"X"===n)return++foe,function(e){for(var t="";foe<hoe&&Zoe(loe[foe]);)t+=loe[foe++];return 0===t.length&&oue({},Eoe,Moe),Poe(loe.charCodeAt(foe))&&oue({},Eoe,Moe),{type:6,value:parseInt("0x"+t,16),start:e,end:foe}}(t);if(Boe(n))return function(e){for(var t="0"+loe[foe++];foe<hoe&&Boe(loe[foe]);)t+=loe[foe++];return(Poe(loe.charCodeAt(foe))||Roe(loe.charCodeAt(foe)))&&oue({},Eoe,Moe),{type:6,value:parseInt(t,8),octal:!0,start:e,end:foe}}(t);n&&Roe(n.charCodeAt(0))&&oue({},Eoe,Moe)}for(;Roe(loe.charCodeAt(foe));)e+=loe[foe++];n=loe[foe]}if("."===n){for(e+=loe[foe++];Roe(loe.charCodeAt(foe));)e+=loe[foe++];n=loe[foe]}if("e"===n||"E"===n)if(e+=loe[foe++],"+"!==(n=loe[foe])&&"-"!==n||(e+=loe[foe++]),Roe(loe.charCodeAt(foe)))for(;Roe(loe.charCodeAt(foe));)e+=loe[foe++];else oue({},Eoe,Moe);return Poe(loe.charCodeAt(foe))&&oue({},Eoe,Moe),{type:6,value:parseFloat(e),start:t,end:foe}}function Koe(){var e,t,n,r;return doe=null,Woe(),e=foe,t=function(){var e,t,n,r;for(Ooe("/"===(e=loe[foe]),"Regular expression literal must start with a slash"),t=loe[foe++],n=!1,r=!1;foe<hoe;)if(t+=e=loe[foe++],"\\"===e)Loe((e=loe[foe++]).charCodeAt(0))&&oue({},Noe),t+=e;else if(Loe(e.charCodeAt(0)))oue({},Noe);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||oue({},Noe),{value:t.substr(1,t.length-2),literal:t}}(),n=function(){var e,t,n;for(t="",n="";foe<hoe&&joe((e=loe[foe]).charCodeAt(0));)++foe,"\\"===e&&foe<hoe?oue({},Eoe,Moe):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&oue({},Aoe,n),{value:n,literal:t}}(),r=function(e,t){var n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(function(e,t){if(parseInt(t,16)<=1114111)return"x";oue({},Aoe)})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(r){oue({},Aoe)}try{return new RegExp(e,t)}catch(a){return null}}(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:foe}}function $oe(){if(Woe(),foe>=hoe)return{type:2,start:foe,end:foe};var e=loe.charCodeAt(foe);return Poe(e)?Goe():40===e||41===e||59===e?Xoe():39===e||34===e?function(){var e,t,n,r,a="",i=!1;for(Ooe("'"===(e=loe[foe])||'"'===e,"String literal must starts with a quote"),t=foe,++foe;foe<hoe;){if((n=loe[foe++])===e){e="";break}if("\\"===n)if((n=loe[foe++])&&Loe(n.charCodeAt(0)))"\r"===n&&"\n"===loe[foe]&&++foe;else switch(n){case"u":case"x":"{"===loe[foe]?(++foe,a+=qoe()):a+=Voe(n);break;case"n":a+="\n";break;case"r":a+="\r";break;case"t":a+="\t";break;case"b":a+="\b";break;case"f":a+="\f";break;case"v":a+="\v";break;default:Boe(n)?(0!==(r="01234567".indexOf(n))&&(i=!0),foe<hoe&&Boe(loe[foe])&&(i=!0,r=8*r+"01234567".indexOf(loe[foe++]),"0123".indexOf(n)>=0&&foe<hoe&&Boe(loe[foe])&&(r=8*r+"01234567".indexOf(loe[foe++]))),a+=String.fromCharCode(r)):a+=n}else{if(Loe(n.charCodeAt(0)))break;a+=n}}return""!==e&&oue({},Eoe,Moe),{type:8,value:a,octal:i,start:t,end:foe}}():46===e?Roe(loe.charCodeAt(foe+1))?Yoe():Xoe():Roe(e)?Yoe():Xoe()}function Qoe(){var e=doe;return foe=e.end,doe=$oe(),foe=e.end,e}function Joe(){var e=foe;doe=$oe(),foe=e}function eue(e,t,n){var r=new Soe("||"===e||"&&"===e?"LogicalExpression":"BinaryExpression");return r.operator=e,r.left=t,r.right=n,r}function tue(e,t){var n=new Soe("CallExpression");return n.callee=e,n.arguments=t,n}function nue(e){var t=new Soe(Coe);return t.name=e,t}function rue(e){var t=new Soe("Literal");return t.value=e.value,t.raw=loe.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function aue(e,t,n){var r=new Soe("MemberExpression");return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function iue(e,t,n){var r=new Soe("Property");return r.key=t,r.value=n,r.kind=e,r}function oue(e,t){var n,r=Array.prototype.slice.call(arguments,2),a=t.replace(/%(\d)/g,(function(e,t){return Ooe(t<r.length,"Message reference must be in range"),r[t]}));throw(n=new Error(a)).index=foe,n.description=a,n}function uue(e){2===e.type&&oue(e,"Unexpected end of input"),6===e.type&&oue(e,"Unexpected number"),8===e.type&&oue(e,"Unexpected string"),3===e.type&&oue(e,"Unexpected identifier"),4===e.type&&oue(e,"Unexpected reserved word"),oue(e,Eoe,e.value)}function sue(e){var t=Qoe();7===t.type&&t.value===e||uue(t)}function cue(e){return 7===doe.type&&doe.value===e}function lue(e){return 4===doe.type&&doe.value===e}function fue(){var e=[];for(foe=doe.start,sue("[");!cue("]");)cue(",")?(Qoe(),e.push(null)):(e.push(_ue()),cue("]")||sue(","));return Qoe(),function(e){var t=new Soe("ArrayExpression");return t.elements=e,t}(e)}function hue(){foe=doe.start;var e=Qoe();return 8===e.type||6===e.type?(e.octal&&oue(e,Toe),rue(e)):nue(e.value)}function due(){var e,t,n;return foe=doe.start,3===(e=doe).type?(n=hue(),sue(":"),iue("init",n,_ue())):2!==e.type&&7!==e.type?(t=hue(),sue(":"),iue("init",t,_ue())):void uue(e)}function pue(){var e,t,n=[],r={},a=String;for(foe=doe.start,sue("{");!cue("}");)t="$"+((e=due()).key.type===Coe?e.key.name:a(e.key.value)),Object.prototype.hasOwnProperty.call(r,t)?oue({},"Duplicate data property in object literal not allowed in strict mode"):r[t]=!0,n.push(e),cue("}")||sue(",");return sue("}"),function(e){var t=new Soe("ObjectExpression");return t.properties=e,t}(n)}var vue={if:1};function gue(){var e,t,n;if(cue("("))return function(){sue("(");var e=Sue();return sue(")"),e}();if(cue("["))return fue();if(cue("{"))return pue();if(e=doe.type,foe=doe.start,3===e||vue[doe.value])n=nue(Qoe().value);else if(8===e||6===e)doe.octal&&oue(doe,Toe),n=rue(Qoe());else{if(4===e)throw new Error(Doe);1===e?((t=Qoe()).value="true"===t.value,n=rue(t)):5===e?((t=Qoe()).value=null,n=rue(t)):cue("/")||cue("/=")?(n=rue(Koe()),Joe()):uue(Qoe())}return n}function mue(){var e=[];if(sue("("),!cue(")"))for(;foe<hoe&&(e.push(_ue()),!cue(")"));)sue(",");return sue(")"),e}function yue(){return sue("."),function(){foe=doe.start;var e=Qoe();return function(e){return 3===e.type||4===e.type||1===e.type||5===e.type}(e)||uue(e),nue(e.value)}()}function bue(){sue("[");var e=Sue();return sue("]"),e}function xue(){var e=function(){var e;for(e=gue();;)if(cue("."))e=aue(".",e,yue());else if(cue("("))e=tue(e,mue());else{if(!cue("["))break;e=aue("[",e,bue())}return e}();if(7===doe.type&&(cue("++")||cue("--")))throw new Error(Doe);return e}function wue(){var e,t;if(7!==doe.type&&4!==doe.type)t=xue();else{if(cue("++")||cue("--"))throw new Error(Doe);if(cue("+")||cue("-")||cue("~")||cue("!"))e=Qoe(),t=wue(),t=function(e,t){var n=new Soe("UnaryExpression");return n.operator=e,n.argument=t,n.prefix=!0,n}(e.value,t);else{if(lue("delete")||lue("void")||lue("typeof"))throw new Error(Doe);t=xue()}}return t}function kue(e){var t=0;if(7!==e.type&&4!==e.type)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function _ue(){var e,t;return e=function(){var e,t,n,r,a,i,o,u,s,c;if(e=doe,s=wue(),0===(a=kue(r=doe)))return s;for(r.prec=a,Qoe(),t=[e,doe],i=[s,r,o=wue()];(a=kue(doe))>0;){for(;i.length>2&&a<=i[i.length-2].prec;)o=i.pop(),u=i.pop().value,s=i.pop(),t.pop(),n=eue(u,s,o),i.push(n);(r=Qoe()).prec=a,i.push(r),t.push(doe),n=wue(),i.push(n)}for(n=i[c=i.length-1],t.pop();c>1;)t.pop(),n=eue(i[c-1].value,i[c-2],n),c-=2;return n}(),cue("?")&&(Qoe(),t=_ue(),sue(":"),e=function(e,t,n){var r=new Soe("ConditionalExpression");return r.test=e,r.consequent=t,r.alternate=n,r}(e,t,_ue())),e}function Sue(){var e=_ue();if(cue(","))throw new Error(Doe);return e}var Cue={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Eue(e){function t(t,n,r){return function(a){return function(t,n,r,a){var i=e(n[0]);return r&&(i=r+"("+i+")",0===r.lastIndexOf("new ",0)&&(i="("+i+")")),i+"."+t+(a<0?"":0===a?"()":"("+n.slice(1).map(e).join(",")+")")}(t,a,n,r)}}var n="new Date",r="String",a="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){t.length<3&&Ht("Missing arguments to clamp function."),t.length>3&&Ht("Too many arguments to clamp function.");var n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:t("getDate",n,0),day:t("getDay",n,0),year:t("getFullYear",n,0),month:t("getMonth",n,0),hours:t("getHours",n,0),minutes:t("getMinutes",n,0),seconds:t("getSeconds",n,0),milliseconds:t("getMilliseconds",n,0),time:t("getTime",n,0),timezoneoffset:t("getTimezoneOffset",n,0),utcdate:t("getUTCDate",n,0),utcday:t("getUTCDay",n,0),utcyear:t("getUTCFullYear",n,0),utcmonth:t("getUTCMonth",n,0),utchours:t("getUTCHours",n,0),utcminutes:t("getUTCMinutes",n,0),utcseconds:t("getUTCSeconds",n,0),utcmilliseconds:t("getUTCMilliseconds",n,0),length:t("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase",r,0),lower:t("toLowerCase",r,0),substring:t("substring",r),split:t("split",r),trim:t("trim",r,0),regexp:a,test:t("test",a),if:function(t){t.length<3&&Ht("Missing arguments to if function."),t.length>3&&Ht("Too many arguments to if function.");var n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}var Aue=function(){function e(){(0,ud.Z)(this,e),this._partials=new Float64Array(32),this._n=0}return(0,sd.Z)(e,[{key:"add",value:function(e){for(var t=this._partials,n=0,r=0;r<this._n&&r<32;r++){var a=t[r],i=e+a,o=Math.abs(e)<Math.abs(a)?e-(i-a):a-(i-e);o&&(t[n++]=o),e=i}return t[n]=e,this._n=n+1,this}},{key:"valueOf",value:function(){var e,t,n,r=this._partials,a=this._n,i=0;if(a>0){for(i=r[--a];a>0&&(e=i,!(n=(t=r[--a])-((i=e+t)-e))););a>0&&(n<0&&r[a-1]<0||n>0&&r[a-1]>0)&&(t=2*n)==(e=i+t)-i&&(i=e)}return i}}]),e}();var Nue=1e-6,Tue=Math.PI,Mue=Tue/2,Due=Tue/4,Fue=2*Tue,Iue=180/Tue,Oue=Tue/180,Rue=Math.abs,Zue=(Math.atan,Math.atan2),Bue=Math.cos,zue=(Math.ceil,Math.exp,Math.floor,Math.hypot),Lue=(Math.log,Math.pow,Math.sin),Pue=(Math.sign,Math.sqrt);Math.tan;function jue(e){return e>1?Mue:e<-1?-Mue:Math.asin(e)}function Uue(){}function Wue(e,t){e&&que.hasOwnProperty(e.type)&&que[e.type](e,t)}var Vue={Feature:function(e,t){Wue(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,a=n.length;++r<a;)Wue(n[r].geometry,t)}},que={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Hue(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)Hue(n[r],t,0)},Polygon:function(e,t){Gue(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)Gue(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,a=n.length;++r<a;)Wue(n[r],t)}};function Hue(e,t,n){var r,a=-1,i=e.length-n;for(t.lineStart();++a<i;)r=e[a],t.point(r[0],r[1],r[2]);t.lineEnd()}function Gue(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Hue(e[n],t,1);t.polygonEnd()}function Xue(e,t){e&&Vue.hasOwnProperty(e.type)?Vue[e.type](e,t):Wue(e,t)}var Yue,Kue,$ue,Que,Jue,ese,tse,nse,rse,ase,ise,ose,use,sse,cse,lse,fse=new Aue,hse=new Aue,dse={point:Uue,lineStart:Uue,lineEnd:Uue,polygonStart:function(){fse=new Aue,dse.lineStart=pse,dse.lineEnd=vse},polygonEnd:function(){var e=+fse;hse.add(e<0?Fue+e:e),this.lineStart=this.lineEnd=this.point=Uue},sphere:function(){hse.add(Fue)}};function pse(){dse.point=gse}function vse(){mse(Yue,Kue)}function gse(e,t){dse.point=mse,Yue=e,Kue=t,$ue=e*=Oue,Que=Bue(t=(t*=Oue)/2+Due),Jue=Lue(t)}function mse(e,t){var n=(e*=Oue)-$ue,r=n>=0?1:-1,a=r*n,i=Bue(t=(t*=Oue)/2+Due),o=Lue(t),u=Jue*o,s=Que*i+u*Bue(a),c=u*r*Lue(a);fse.add(Zue(c,s)),$ue=e,Que=i,Jue=o}function yse(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}var bse,xse,wse,kse,_se,Sse,Cse,Ese,Ase,Nse,Tse,Mse,Dse,Fse,Ise,Ose,Rse={point:Zse,lineStart:zse,lineEnd:Lse,polygonStart:function(){Rse.point=Pse,Rse.lineStart=jse,Rse.lineEnd=Use,sse=new Aue,dse.polygonStart()},polygonEnd:function(){dse.polygonEnd(),Rse.point=Zse,Rse.lineStart=zse,Rse.lineEnd=Lse,fse<0?(ese=-(nse=180),tse=-(rse=90)):sse>Nue?rse=90:sse<-1e-6&&(tse=-90),lse[0]=ese,lse[1]=nse},sphere:function(){ese=-(nse=180),tse=-(rse=90)}};function Zse(e,t){cse.push(lse=[ese=e,nse=e]),t<tse&&(tse=t),t>rse&&(rse=t)}function Bse(e,t){var n=function(e){var t=e[0],n=e[1],r=Bue(n);return[r*Bue(t),r*Lue(t),Lue(n)]}([e*Oue,t*Oue]);if(use){var r=yse(use,n),a=yse([r[1],-r[0],0],r);!function(e){var t=Pue(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}(a),a=function(e){return[Zue(e[1],e[0]),jue(e[2])]}(a);var i,o=e-ase,u=o>0?1:-1,s=a[0]*Iue*u,c=Rue(o)>180;c^(u*ase<s&&s<u*e)?(i=a[1]*Iue)>rse&&(rse=i):c^(u*ase<(s=(s+360)%360-180)&&s<u*e)?(i=-a[1]*Iue)<tse&&(tse=i):(t<tse&&(tse=t),t>rse&&(rse=t)),c?e<ase?Wse(ese,e)>Wse(ese,nse)&&(nse=e):Wse(e,nse)>Wse(ese,nse)&&(ese=e):nse>=ese?(e<ese&&(ese=e),e>nse&&(nse=e)):e>ase?Wse(ese,e)>Wse(ese,nse)&&(nse=e):Wse(e,nse)>Wse(ese,nse)&&(ese=e)}else cse.push(lse=[ese=e,nse=e]);t<tse&&(tse=t),t>rse&&(rse=t),use=n,ase=e}function zse(){Rse.point=Bse}function Lse(){lse[0]=ese,lse[1]=nse,Rse.point=Zse,use=null}function Pse(e,t){if(use){var n=e-ase;sse.add(Rue(n)>180?n+(n>0?360:-360):n)}else ise=e,ose=t;dse.point(e,t),Bse(e,t)}function jse(){dse.lineStart()}function Use(){Pse(ise,ose),dse.lineEnd(),Rue(sse)>Nue&&(ese=-(nse=180)),lse[0]=ese,lse[1]=nse,use=null}function Wse(e,t){return(t-=e)<0?t+360:t}function Vse(e,t){return e[0]-t[0]}function qse(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var Hse={sphere:Uue,point:Gse,lineStart:Yse,lineEnd:Qse,polygonStart:function(){Hse.lineStart=Jse,Hse.lineEnd=ece},polygonEnd:function(){Hse.lineStart=Yse,Hse.lineEnd=Qse}};function Gse(e,t){e*=Oue;var n=Bue(t*=Oue);Xse(n*Bue(e),n*Lue(e),Lue(t))}function Xse(e,t,n){++bse,wse+=(e-wse)/bse,kse+=(t-kse)/bse,_se+=(n-_se)/bse}function Yse(){Hse.point=Kse}function Kse(e,t){e*=Oue;var n=Bue(t*=Oue);Fse=n*Bue(e),Ise=n*Lue(e),Ose=Lue(t),Hse.point=$se,Xse(Fse,Ise,Ose)}function $se(e,t){e*=Oue;var n=Bue(t*=Oue),r=n*Bue(e),a=n*Lue(e),i=Lue(t),o=Zue(Pue((o=Ise*i-Ose*a)*o+(o=Ose*r-Fse*i)*o+(o=Fse*a-Ise*r)*o),Fse*r+Ise*a+Ose*i);xse+=o,Sse+=o*(Fse+(Fse=r)),Cse+=o*(Ise+(Ise=a)),Ese+=o*(Ose+(Ose=i)),Xse(Fse,Ise,Ose)}function Qse(){Hse.point=Gse}function Jse(){Hse.point=tce}function ece(){nce(Mse,Dse),Hse.point=Gse}function tce(e,t){Mse=e,Dse=t,e*=Oue,t*=Oue,Hse.point=nce;var n=Bue(t);Fse=n*Bue(e),Ise=n*Lue(e),Ose=Lue(t),Xse(Fse,Ise,Ose)}function nce(e,t){e*=Oue;var n=Bue(t*=Oue),r=n*Bue(e),a=n*Lue(e),i=Lue(t),o=Ise*i-Ose*a,u=Ose*r-Fse*i,s=Fse*a-Ise*r,c=zue(o,u,s),l=jue(c),f=c&&-l/c;Ase.add(f*o),Nse.add(f*u),Tse.add(f*s),xse+=l,Sse+=l*(Fse+(Fse=r)),Cse+=l*(Ise+(Ise=a)),Ese+=l*(Ose+(Ose=i)),Xse(Fse,Ise,Ose)}function rce(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ace(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ice(){}var oce=.7,uce=1.4285714285714286,sce="\\s*([+-]?\\d+)\\s*",cce="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",lce="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",fce=/^#([0-9a-f]{3,8})$/,hce=new RegExp("^rgb\\(".concat(sce,",").concat(sce,",").concat(sce,"\\)$")),dce=new RegExp("^rgb\\(".concat(lce,",").concat(lce,",").concat(lce,"\\)$")),pce=new RegExp("^rgba\\(".concat(sce,",").concat(sce,",").concat(sce,",").concat(cce,"\\)$")),vce=new RegExp("^rgba\\(".concat(lce,",").concat(lce,",").concat(lce,",").concat(cce,"\\)$")),gce=new RegExp("^hsl\\(".concat(cce,",").concat(lce,",").concat(lce,"\\)$")),mce=new RegExp("^hsla\\(".concat(cce,",").concat(lce,",").concat(lce,",").concat(cce,"\\)$")),yce={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function bce(){return this.rgb().formatHex()}function xce(){return this.rgb().formatRgb()}function wce(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=fce.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?kce(t):3===n?new Ece(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?_ce(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?_ce(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=hce.exec(e))?new Ece(t[1],t[2],t[3],1):(t=dce.exec(e))?new Ece(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=pce.exec(e))?_ce(t[1],t[2],t[3],t[4]):(t=vce.exec(e))?_ce(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=gce.exec(e))?Fce(t[1],t[2]/100,t[3]/100,1):(t=mce.exec(e))?Fce(t[1],t[2]/100,t[3]/100,t[4]):yce.hasOwnProperty(e)?kce(yce[e]):"transparent"===e?new Ece(NaN,NaN,NaN,0):null}function kce(e){return new Ece(e>>16&255,e>>8&255,255&e,1)}function _ce(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ece(e,t,n,r)}function Sce(e){return e instanceof ice||(e=wce(e)),e?new Ece((e=e.rgb()).r,e.g,e.b,e.opacity):new Ece}function Cce(e,t,n,r){return 1===arguments.length?Sce(e):new Ece(e,t,n,null==r?1:r)}function Ece(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Ace(){return"#".concat(Dce(this.r)).concat(Dce(this.g)).concat(Dce(this.b))}function Nce(){var e=Tce(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(Mce(this.r),", ").concat(Mce(this.g),", ").concat(Mce(this.b)).concat(1===e?")":", ".concat(e,")"))}function Tce(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Mce(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Dce(e){return((e=Mce(e))<16?"0":"")+e.toString(16)}function Fce(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Rce(e,t,n,r)}function Ice(e){if(e instanceof Rce)return new Rce(e.h,e.s,e.l,e.opacity);if(e instanceof ice||(e=wce(e)),!e)return new Rce;if(e instanceof Rce)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,u=i-a,s=(i+a)/2;return u?(o=t===i?(n-r)/u+6*(n<r):n===i?(r-t)/u+2:(t-n)/u+4,u/=s<.5?i+a:2-i-a,o*=60):u=s>0&&s<1?0:o,new Rce(o,u,s,e.opacity)}function Oce(e,t,n,r){return 1===arguments.length?Ice(e):new Rce(e,t,n,null==r?1:r)}function Rce(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Zce(e){return(e=(e||0)%360)<0?e+360:e}function Bce(e){return Math.max(0,Math.min(1,e||0))}function zce(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}rce(ice,wce,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:bce,formatHex:bce,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Ice(this).formatHsl()},formatRgb:xce,toString:xce}),rce(Ece,Cce,ace(ice,{brighter:function(e){return e=null==e?uce:Math.pow(uce,e),new Ece(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?oce:Math.pow(oce,e),new Ece(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new Ece(Mce(this.r),Mce(this.g),Mce(this.b),Tce(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ace,formatHex:Ace,formatHex8:function(){return"#".concat(Dce(this.r)).concat(Dce(this.g)).concat(Dce(this.b)).concat(Dce(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:Nce,toString:Nce})),rce(Rce,Oce,ace(ice,{brighter:function(e){return e=null==e?uce:Math.pow(uce,e),new Rce(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?oce:Math.pow(oce,e),new Rce(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new Ece(zce(e>=240?e-240:e+120,a,r),zce(e,a,r),zce(e<120?e+240:e-120,a,r),this.opacity)},clamp:function(){return new Rce(Zce(this.h),Bce(this.s),Bce(this.l),Tce(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=Tce(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(Zce(this.h),", ").concat(100*Bce(this.s),"%, ").concat(100*Bce(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));var Lce=Math.PI/180,Pce=180/Math.PI,jce=.96422,Uce=.82521,Wce=4/29,Vce=6/29,qce=.12841854934601665;function Hce(e){if(e instanceof Xce)return new Xce(e.l,e.a,e.b,e.opacity);if(e instanceof tle)return nle(e);e instanceof Ece||(e=Sce(e));var t,n,r=Qce(e.r),a=Qce(e.g),i=Qce(e.b),o=Yce((.2225045*r+.7168786*a+.0606169*i)/1);return r===a&&a===i?t=n=o:(t=Yce((.4360747*r+.3850649*a+.1430804*i)/jce),n=Yce((.0139322*r+.0971045*a+.7141733*i)/Uce)),new Xce(116*o-16,500*(t-o),200*(o-n),e.opacity)}function Gce(e,t,n,r){return 1===arguments.length?Hce(e):new Xce(e,t,n,null==r?1:r)}function Xce(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function Yce(e){return e>.008856451679035631?Math.pow(e,1/3):e/qce+Wce}function Kce(e){return e>Vce?e*e*e:qce*(e-Wce)}function $ce(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Qce(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Jce(e){if(e instanceof tle)return new tle(e.h,e.c,e.l,e.opacity);if(e instanceof Xce||(e=Hce(e)),0===e.a&&0===e.b)return new tle(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Pce;return new tle(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function ele(e,t,n,r){return 1===arguments.length?Jce(e):new tle(e,t,n,null==r?1:r)}function tle(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function nle(e){if(isNaN(e.h))return new Xce(e.l,0,0,e.opacity);var t=e.h*Lce;return new Xce(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}function rle(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ale(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ile(){return 0}rce(Xce,Gce,ace(ice,{brighter:function(e){return new Xce(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new Xce(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new Ece($ce(3.1338561*(t=jce*Kce(t))-1.6168667*(e=1*Kce(e))-.4906146*(n=Uce*Kce(n))),$ce(-.9787684*t+1.9161415*e+.033454*n),$ce(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),rce(tle,ele,ace(ice,{brighter:function(e){return new tle(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new tle(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return nle(this).rgb()}}));Map;var ole,ule=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fle;if((0,ud.Z)(this,n),r=t.call(this),Object.defineProperties((0,By.Z)(r),{_intern:{value:new Map},_key:{value:a}}),null!=e){var i,o=(0,zt.Z)(e);try{for(o.s();!(i=o.n()).done;){var u=i.value;r.add(u)}}catch(s){o.e(s)}finally{o.f()}}return r}return(0,sd.Z)(n,[{key:"has",value:function(e){return(0,zy.Z)((0,Ly.Z)(n.prototype),"has",this).call(this,sle(this,e))}},{key:"add",value:function(e){return(0,zy.Z)((0,Ly.Z)(n.prototype),"add",this).call(this,cle(this,e))}},{key:"delete",value:function(e){return(0,zy.Z)((0,Ly.Z)(n.prototype),"delete",this).call(this,lle(this,e))}}]),n}((0,Uy.Z)(Set));function sle(e,t){var n=e._intern,r=(0,e._key)(t);return n.has(r)?n.get(r):t}function cle(e,t){var n=e._intern,r=(0,e._key)(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function lle(e,t){var n=e._intern,r=(0,e._key)(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function fle(e){return null!==e&&"object"===typeof e?e.valueOf():e}function hle(e){return e instanceof ule?e:new ule(e)}var dle=Symbol("vega_selection_getter");function ple(e){return e.getter&&e.getter[dle]||(e.getter=Xt(e.field),e.getter[dle]=!0),e.getter}var vle="intersect",gle="union",mle="_vgsid_",yle=Xt(mle),ble="index:unit";function xle(e,t){for(var n,r,a=t.fields,i=t.values,o=a.length,u=0;u<o;++u)if(zn(n=ple(r=a[u])(e))&&(n=cn(n)),zn(i[u])&&(i[u]=cn(i[u])),nn(i[u])&&zn(i[u][0])&&(i[u]=i[u].map(cn)),"E"===r.type){if(nn(i[u])?i[u].indexOf(n)<0:n!==i[u])return!1}else if("R"===r.type){if(!Bn(n,i[u]))return!1}else if("R-RE"===r.type){if(!Bn(n,i[u],!0,!1))return!1}else if("R-E"===r.type){if(!Bn(n,i[u],!1,!1))return!1}else if("R-LE"===r.type&&!Bn(n,i[u],!1,!0))return!1;return!0}function wle(e,t,n){for(var r,a,i,o,u,s=this.context.data[e],c=s?s.values.value:[],l=s?s[ble]&&s[ble].value:void 0,f=n===vle,h=c.length,d=0;d<h;++d)if(r=c[d],l&&f){if(-1===(i=(a=a||{})[o=r.unit]||0))continue;if(u=xle(t,r),a[o]=u?-1:++i,u&&1===l.size)return!0;if(!u&&i===l.get(o).count)return!1}else if(f^(u=xle(t,r)))return u;return h&&f}var kle=function(e){var t,n,r;function a(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<i){if(0!==t(r,r))return i;do{var o=a+i>>>1;n(e[o],r)<0?a=o+1:i=o}while(a<i)}return a}return 2!==e.length?(t=rle,n=function(t,n){return rle(e(t),n)},r=function(t,n){return e(t)-n}):(t=e===rle||e===ale?e:ile,n=e,r=e),{left:a,center:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,o=a(e,t,n,i-1);return o>n&&r(e[o-1],t)>-r(e[o],t)?o-1:o},right:function(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<i){if(0!==t(r,r))return i;do{var o=a+i>>>1;n(e[o],r)<=0?a=o+1:i=o}while(a<i)}return a}}}(yle),_le=kle.left,Sle=kle.right;function Cle(e,t,n){var r=this.context.data[e],a=r?r.values.value:[],i=r?r[ble]&&r[ble].value:void 0,o=n===vle,u=yle(t),s=_le(a,u);if(s===a.length)return!1;if(yle(a[s])!==u)return!1;if(i&&o){if(1===i.size)return!0;if(Sle(a,u)-s<i.size)return!1}return!0}function Ele(e,t){return e.map((function(e){return Mn(t.fields?{values:t.fields.map((function(t){return ple(t)(e.datum)}))}:(0,Ir.Z)({},mle,yle(e.datum)),t)}))}function Ale(e,t,n,r){for(var a,i,o,u,s,c,l,f,h,d,p,v,g=this.context.data[e],m=g?g.values.value:[],y={},b={},x={},w=m.length,k=0;k<w;++k)if(u=(a=m[k]).unit,i=a.fields,o=a.values,i&&o){for(p=0,v=i.length;p<v;++p)s=i[p],f=(l=y[s.field]||(y[s.field]={}))[u]||(l[u]=[]),x[s.field]=h=s.type.charAt(0),d=Nle["".concat(h,"_union")],l[u]=d(f,wn(o[p]));n&&(f=b[u]||(b[u]=[])).push(wn(o).reduce((function(e,t,n){return e[i[n].field]=t,e}),{}))}else s=mle,c=yle(a),(f=(l=y[s]||(y[s]={}))[u]||(l[u]=[])).push(c),n&&(f=b[u]||(b[u]=[])).push((0,Ir.Z)({},mle,c));(t=t||gle,y._vgsid_?y._vgsid_=Nle["".concat(mle,"_").concat(t)].apply(Nle,(0,$n.Z)(Object.values(y._vgsid_))):Object.keys(y).forEach((function(e){y[e]=Object.keys(y[e]).map((function(t){return y[e][t]})).reduce((function(n,r){return void 0===n?r:Nle["".concat(x[e],"_").concat(t)](n,r)}))})),m=Object.keys(b),n&&m.length)&&(y[r?"vlPoint":"vlMulti"]=t===gle?(0,Ir.Z)({},"or",m.reduce((function(e,t){return e.push.apply(e,(0,$n.Z)(b[t])),e}),[])):(0,Ir.Z)({},"and",m.map((function(e){return(0,Ir.Z)({},"or",b[e])}))));return y}var Nle=(ole={},(0,Ir.Z)(ole,"".concat(mle,"_union"),(function(){for(var e=new ule,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0,i=n;a<i.length;a++){var o,u=i[a],s=(0,zt.Z)(u);try{for(s.s();!(o=s.n()).done;){var c=o.value;e.add(c)}}catch(l){s.e(l)}finally{s.f()}}return e})),(0,Ir.Z)(ole,"".concat(mle,"_intersect"),(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=new ule(e),n=n.map(hle);var a,i=(0,zt.Z)(e);try{e:for(i.s();!(a=i.n()).done;){var o,u=a.value,s=(0,zt.Z)(n);try{for(s.s();!(o=s.n()).done;){var c=o.value;if(!c.has(u)){e.delete(u);continue e}}}catch(l){s.e(l)}finally{s.f()}}}catch(l){i.e(l)}finally{i.f()}return e})),(0,Ir.Z)(ole,"E_union",(function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e})),(0,Ir.Z)(ole,"E_intersect",(function(e,t){return e.length?e.filter((function(e){return t.indexOf(e)>=0})):t})),(0,Ir.Z)(ole,"R_union",(function(e,t){var n=cn(t[0]),r=cn(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]})),(0,Ir.Z)(ole,"R_intersect",(function(e,t){var n=cn(t[0]),r=cn(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]})),ole);function Tle(e,t,n,r){t[0].type!==poe&&Ht("First argument to selection functions must be a string literal.");var a=t[0].value,i="unit",o="@unit",u=":"+a;(t.length>=2&&sn(t).value)!==vle||In(r,o)||(r["@unit"]=n.getData(a).indataRef(n,i)),In(r,u)||(r[u]=n.getData(a).tuplesRef())}function Mle(e){var t=this.context.data[e];return t?t.values.value:[]}var Dle=function(e){return function(t,n){return this.context.dataflow.locale()[e](n)(t)}},Fle=Dle("format"),Ile=Dle("timeFormat"),Ole=Dle("utcFormat"),Rle=Dle("timeParse"),Zle=Dle("utcParse"),Ble=new Date(2e3,0,1);function zle(e,t,n){return Number.isInteger(e)&&Number.isInteger(t)?(Ble.setYear(2e3),Ble.setMonth(e),Ble.setDate(t),Ile.call(this,Ble,n)):""}function Lle(e,t,n,r){t[0].type!==poe&&Ht("First argument to data functions must be a string literal.");var a=t[0].value,i=":"+a;if(!In(i,r))try{r[i]=n.getData(a).tuplesRef()}catch(o){}}function Ple(e,t,n,r){if(t[0].type===poe)jle(n,r,t[0].value);else for(e in n.scales)jle(n,r,e)}function jle(e,t,n){var r="%"+n;if(!In(t,r))try{t[r]=e.scaleRef(n)}catch(a){}}function Ule(e,t){if(kn(e))return e;if(Pn(e)){var n=t.scales[e];return n&&function(e){return e&&!0===e[Mw]}(n.value)?n.value:void 0}}function Wle(e,t,n){t.__bandwidth=function(e){return e&&e.bandwidth?e.bandwidth():0},n._bandwidth=Ple,n._range=Ple,n._scale=Ple;var r=function(t){return"_["+(t.type===poe?Vn("%"+t.value):Vn("%")+"+"+e(t))+"]"};return{_bandwidth:function(e){return"this.__bandwidth(".concat(r(e[0]),")")},_range:function(e){return"".concat(r(e[0]),".range()")},_scale:function(t){return"".concat(r(t[0]),"(").concat(e(t[1]),")")}}}function Vle(e,t){return function(n,r,a){if(n){var i=Ule(n,(a||this).context);return i&&i.path[e](r)}return t(r)}}var qle=Vle("area",(function(e){return hse=new Aue,Xue(e,dse),2*hse})),Hle=Vle("bounds",(function(e){var t,n,r,a,i,o,u;if(rse=nse=-(ese=tse=1/0),cse=[],Xue(e,Rse),n=cse.length){for(cse.sort(Vse),t=1,i=[r=cse[0]];t<n;++t)qse(r,(a=cse[t])[0])||qse(r,a[1])?(Wse(r[0],a[1])>Wse(r[0],r[1])&&(r[1]=a[1]),Wse(a[0],r[1])>Wse(r[0],r[1])&&(r[0]=a[0])):i.push(r=a);for(o=-1/0,t=0,r=i[n=i.length-1];t<=n;r=a,++t)a=i[t],(u=Wse(r[1],a[0]))>o&&(o=u,ese=a[0],nse=r[1])}return cse=lse=null,ese===1/0||tse===1/0?[[NaN,NaN],[NaN,NaN]]:[[ese,tse],[nse,rse]]})),Gle=Vle("centroid",(function(e){bse=xse=wse=kse=_se=Sse=Cse=Ese=0,Ase=new Aue,Nse=new Aue,Tse=new Aue,Xue(e,Hse);var t=+Ase,n=+Nse,r=+Tse,a=zue(t,n,r);return a<1e-12&&(t=Sse,n=Cse,r=Ese,xse<Nue&&(t=wse,n=kse,r=_se),(a=zue(t,n,r))<1e-12)?[NaN,NaN]:[Zue(n,t)*Iue,jue(r/a)*Iue]}));function Xle(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function Yle(e){var t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Kle(e){var t=Cce(e);return.2126*Yle(t.r)+.7152*Yle(t.g)+.0722*Yle(t.b)}function $le(e,t){return e===t||e!==e&&t!==t||(nn(e)?!(!nn(t)||e.length!==t.length)&&function(e,t){for(var n=0,r=e.length;n<r;++n)if(!$le(e[n],t[n]))return!1;return!0}(e,t):!(!rn(e)||!rn(t))&&Qle(e,t))}function Qle(e,t){for(var n in e)if(!$le(e[n],t[n]))return!1;return!0}function Jle(e){return function(t){return Qle(e,t)}}var efe={};function tfe(e){return nn(e)||ArrayBuffer.isView(e)?e:null}function nfe(e){return tfe(e)||(Pn(e)?e:null)}var rfe=function(e){return e.data};function afe(e,t){var n=Mle.call(t,e);return n.root&&n.root.lookup||{}}var ife=function(){return"undefined"!==typeof window&&window||null};function ofe(e,t,n){if(!e)return[];var r=(0,gc.Z)(e,2),a=r[0],i=r[1],o=(new d_).set(a[0],a[1],i[0],i[1]);return function(e,t,n){var r=[],a=(new d_).union(t),i=e.marktype;return i?YE(e,a,n,r):"group"===i?KE(e,a,n,r):Ht("Intersect scene must be mark node or group item.")}(n||this.context.dataflow.scenegraph().root,o,function(e){var t=null;if(e){var n=wn(e.marktype),r=wn(e.markname);t=function(e){return(!n.length||n.some((function(t){return e.marktype===t})))&&(!r.length||r.some((function(t){return e.name===t})))}}return t}(t))}var ufe={random:function(){return Rc()},cumulativeNormal:Uc,cumulativeLogNormal:Xc,cumulativeUniform:Qc,densityNormal:jc,densityLogNormal:Gc,densityUniform:$c,quantileNormal:Wc,quantileLogNormal:Yc,quantileUniform:Jc,sampleNormal:Pc,sampleLogNormal:Hc,sampleUniform:Kc,isArray:nn,isBoolean:function(e){return"boolean"===typeof e},isDate:zn,isDefined:function(e){return void 0!==e},isNumber:Ln,isObject:rn,isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},isString:Pn,isTuple:As,isValid:function(e){return null!=e&&e===e},toBoolean:qn,toDate:function(e){return Gn(e)},toNumber:cn,toString:Xn,indexof:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return(t=nfe(e)).indexOf.apply(t,r)},join:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return(t=tfe(e)).join.apply(t,r)},lastindexof:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return(t=nfe(e)).lastIndexOf.apply(t,r)},replace:function(e,t,n){return kn(n)&&Ht("Function argument passed to replace."),String(e).replace(t,n)},reverse:function(e){return tfe(e).slice().reverse()},slice:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return(t=nfe(e)).slice.apply(t,r)},flush:function(e,t,n,r,a,i){if(!n&&0!==n)return i;var o,u=+n,s=e[0],c=sn(e);c<s&&(o=s,s=c,c=o),o=Math.abs(t-s);var l=Math.abs(c-t);return o<l&&o<=u?r:l<=u?a:i},lerp:function(e,t){var n=e[0],r=sn(e),a=+t;return a?1===a?r:n+a*(r-n):n},merge:function(){var e=[].slice.call(arguments);return e.unshift({}),Mn.apply(void 0,(0,$n.Z)(e))},pad:function(e,t,n,r){var a=n||" ",i=e+"",o=t-i.length;return o<=0?i:"left"===r?Un(a,o)+i:"center"===r?Un(a,~~(o/2))+i+Un(a,Math.ceil(o/2)):i+Un(a,o)},peek:sn,pluck:function(e,t){var n=efe[t]||(efe[t]=Xt(t));return nn(e)?e.map(n):n(e)},span:Wn,inrange:Bn,truncate:function(e,t,n,r){var a=null!=r?r:"\u2026",i=e+"",o=i.length,u=Math.max(0,t-a.length);return o<=t?i:"left"===n?a+i.slice(o-u):"center"===n?i.slice(0,Math.ceil(u/2))+a+i.slice(o-~~(u/2)):i.slice(0,u)+a},rgb:Cce,lab:Gce,hcl:ele,hsl:Oce,luminance:Kle,contrast:function(e,t){var n=Kle(e),r=Kle(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},sequence:function(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),i=new Array(a);++r<a;)i[r]=e+r*n;return i},format:Fle,utcFormat:Ole,utcParse:Zle,utcOffset:function(e,t,n){return gi(vi(e),t,n)},utcSequence:function(e,t,n,r){return mi(vi(e),t,n,r)},timeFormat:Ile,timeParse:Rle,timeOffset:function(e,t,n){return gi(pi(e),t,n)},timeSequence:function(e,t,n,r){return mi(pi(e),t,n,r)},timeUnitSpecifier:function(e,t){var n,r,a=Mn({},Ga,t),i=Ha(e),o=i.length,u="",s=0;for(s=0;s<o;)for(n=i.length;n>s;--n)if(null!=a[r=i.slice(s,n).join("-")]){u+=a[r],s=n;break}return u.trim()},monthFormat:function(e){return zle.call(this,e,1,"%B")},monthAbbrevFormat:function(e){return zle.call(this,e,1,"%b")},dayFormat:function(e){return zle.call(this,0,2+e,"%A")},dayAbbrevFormat:function(e){return zle.call(this,0,2+e,"%a")},quarter:function(e){return 1+~~(new Date(e).getMonth()/3)},utcquarter:function(e){return 1+~~(new Date(e).getUTCMonth()/3)},week:function(e){return $a(new Date(e))},utcweek:function(e){return ti(new Date(e))},dayofyear:function(e){return Ka(new Date(e))},utcdayofyear:function(e){return ei(new Date(e))},warn:function(){return Xle(this.context.dataflow,"warn",arguments)},info:function(){return Xle(this.context.dataflow,"info",arguments)},debug:function(){return Xle(this.context.dataflow,"debug",arguments)},extent:function(e){return Dn(e)},inScope:function(e){var t=this.context.group,n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n},intersect:ofe,clampRange:function(e,t,n){var r,a=e[0],i=e[1];return i<a&&(r=i,i=a,a=r),(r=i-a)>=n-t?[t,n]:[a=Math.min(Math.max(a,t),n-r),a+r]},pinchDistance:function(e){var t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)},pinchAngle:function(e){var t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)},screen:function(){var e=ife();return e?e.screen:{}},containerSize:function(){var e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]},windowSize:function(){var e=ife();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]},bandspace:function(e,t,n){return nw(e||0,t||0,n||0)},setdata:function(e,t){var n=this.context.dataflow,r=this.context.data[e].input;return n.pulse(r,n.changeset().remove(Jt).insert(t)),1},pathShape:function(e){var t=null;return function(n){return n?Lk(n,t=t||Nk(e)):e}},panLinear:function(e,t){return vn(e,t,cn,Kt)},panLog:function(e,t){var n=Math.sign(e[0]);return vn(e,t,fn(n),ln(n))},panPow:function(e,t,n){return vn(e,t,pn(n),pn(1/n))},panSymlog:function(e,t,n){return vn(e,t,hn(n),dn(n))},zoomLinear:mn,zoomLog:yn,zoomPow:bn,zoomSymlog:xn,encode:function(e,t,n){if(e){var r=this.context.dataflow,a=e.mark.source;r.pulse(a,r.changeset().encode(e,t))}return void 0!==n?n:e},modify:function(e,t,n,r,a,i){var o,u,s=this.context.dataflow,c=this.context.data[e],l=c.input,f=s.stamp(),h=c.changes;if(!1===s._trigger||!(l.value.length||t||r))return 0;if((!h||h.stamp<f)&&(c.changes=h=s.changeset(),h.stamp=f,s.runAfter((function(){c.modified=!0,s.pulse(l,h).run()}),!0,1)),n&&(o=!0===n?Jt:nn(n)||As(n)?n:Jle(n),h.remove(o)),t&&h.insert(t),r&&(o=Jle(r),l.value.some(o)?h.remove(o):h.insert(r)),a)for(u in i)h.modify(a,u,i[u]);return 1},lassoAppend:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=(e=wn(e))[e.length-1];return void 0===a||Math.hypot(a[0]-t,a[1]-n)>r?[].concat((0,$n.Z)(e),[[t,n]]):e},lassoPath:function(e){return wn(e).reduce((function(t,n,r){var a=(0,gc.Z)(n,2),i=a[0],o=a[1];return t+(0==r?"M ".concat(i,",").concat(o," "):r===e.length-1?" Z":"L ".concat(i,",").concat(o," "))}),"")},intersectLasso:function(e,t,n){var r,a=n.x,i=n.y,o=n.mark,u=(new d_).set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER),s=(0,zt.Z)(t);try{for(s.s();!(r=s.n()).done;){var c=(0,gc.Z)(r.value,2),l=c[0],f=c[1];l<u.x1&&(u.x1=l),l>u.x2&&(u.x2=l),f<u.y1&&(u.y1=f),f>u.y2&&(u.y2=f)}}catch(h){s.e(h)}finally{s.f()}return u.translate(a,i),ofe([[u.x1,u.y1],[u.x2,u.y2]],e,o).filter((function(e){return function(e,t,n){for(var r=0,a=0,i=n.length-1;a<n.length;i=a++){var o=(0,gc.Z)(n[i],2),u=o[0],s=o[1],c=(0,gc.Z)(n[a],2),l=c[0],f=c[1];f>t!=s>t&&e<(u-l)*(t-f)/(s-f)+l&&r++}return 1&r}(e.x,e.y,t)}))}},sfe=["view","item","group","xy","x","y"],cfe="this.",lfe={},ffe={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:function(e){return"_[".concat(Vn("$"+e),"]")},functions:function(e){var t=Eue(e);for(var n in sfe.forEach((function(e){return t[e]="event.vega."+e})),ufe)t[n]=cfe+n;return Mn(t,Wle(e,ufe,lfe)),t},constants:Cue,visitors:lfe},hfe=function(e){var t=(e=e||{}).allowed?Yn(e.allowed):{},n=e.forbidden?Yn(e.forbidden):{},r=e.constants||Cue,a=(e.functions||Eue)(f),i=e.globalvar,o=e.fieldvar,u=kn(i)?i:function(e){return"".concat(i,'["').concat(e,'"]')},s={},c={},l=0;function f(e){if(Pn(e))return e;var t=h[e.type];return null==t&&Ht("Unsupported type: "+e.type),t(e)}var h={Literal:function(e){return e.raw},Identifier:function(e){var a=e.name;return l>0?a:In(n,a)?Ht("Illegal identifier: "+a):In(r,a)?r[a]:In(t,a)?a:(s[a]=1,u(a))},MemberExpression:function(e){var t=!e.computed,n=f(e.object);t&&(l+=1);var r=f(e.property);return n===o&&(c[function(e){var t=e&&e.length-1;return t&&('"'===e[0]&&'"'===e[t]||"'"===e[0]&&"'"===e[t])?e.slice(1,-1):e}(r)]=1),t&&(l-=1),n+(t?"."+r:"["+r+"]")},CallExpression:function(e){"Identifier"!==e.callee.type&&Ht("Illegal callee type: "+e.callee.type);var t=e.callee.name,n=e.arguments,r=In(a,t)&&a[t];return r||Ht("Unrecognized function: "+t),kn(r)?r(n):r+"("+n.map(f).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(f).join(",")+"]"},BinaryExpression:function(e){return"("+f(e.left)+" "+e.operator+" "+f(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+f(e.argument)+")"},ConditionalExpression:function(e){return"("+f(e.test)+"?"+f(e.consequent)+":"+f(e.alternate)+")"},LogicalExpression:function(e){return"("+f(e.left)+e.operator+f(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(f).join(",")+"}"},Property:function(e){l+=1;var t=f(e.key);return l-=1,t+":"+f(e.value)}};function d(e){var t={code:f(e),globals:Object.keys(s),fields:Object.keys(c)};return s={},c={},t}return d.functions=a,d.constants=r,d}(ffe);function dfe(e,t,n){return 1===arguments.length?ufe[e]:(ufe[e]=t,n&&(lfe[e]=n),hfe&&(hfe.functions[e]=cfe+e),this)}function pfe(e,t){var n,r={};try{n=function(e){foe=0,hoe=(loe=e).length,doe=null,Joe();var t=Sue();if(2!==doe.type)throw new Error("Unexpect token after expression.");return t}(e=Pn(e)?e:Vn(e)+"")}catch(i){Ht("Expression parse error: "+e)}n.visit((function(e){if(e.type===yoe){var n=e.callee.name,a=ffe.visitors[n];a&&a(n,e.arguments,t,r)}}));var a=hfe(n);return a.globals.forEach((function(e){var n="$"+e;!In(r,n)&&t.getSignal(e)&&(r[n]=t.signalRef(e))})),{$expr:Mn({code:a.code},t.options.ast?{ast:n}:null),$fields:a.fields,$params:r}}dfe("bandwidth",(function(e,t){var n=Ule(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}),Ple),dfe("copy",(function(e,t){var n=Ule(e,(t||this).context);return n?n.copy():void 0}),Ple),dfe("domain",(function(e,t){var n=Ule(e,(t||this).context);return n?n.domain():[]}),Ple),dfe("range",(function(e,t){var n=Ule(e,(t||this).context);return n&&n.range?n.range():[]}),Ple),dfe("invert",(function(e,t,n){var r=Ule(e,(n||this).context);return r?nn(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}),Ple),dfe("scale",(function(e,t,n){var r=Ule(e,(n||this).context);return r?r(t):void 0}),Ple),dfe("gradient",(function(e,t,n,r,a){e=Ule(e,(a||this).context);var i=function(e,t){var n,r=[];return n={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:r,stop:function(e,t){return r.push({offset:e,color:t}),n}}}(t,n),o=e.domain(),u=o[0],s=sn(o),c=Kt;return s-u?c=Vw(e,u,s):e=(e.interpolator?Iw("sequential")().interpolator(e.interpolator()):Iw("linear")().interpolate(e.interpolate()).range(e.range())).domain([u=0,s=1]),e.ticks&&(u!==(o=e.ticks(+r||15))[0]&&o.unshift(u),s!==sn(o)&&o.push(s)),o.forEach((function(t){return i.stop(c(t),e(t))})),i}),Ple),dfe("geoArea",qle,Ple),dfe("geoBounds",Hle,Ple),dfe("geoCentroid",Gle,Ple),dfe("geoShape",(function(e,t,n){var r=Ule(e,(n||this).context);return function(e){return r?r.path.context(e)(t):""}}),Ple),dfe("geoScale",(function(e,t){var n=Ule(e,(t||this).context);return n&&n.scale()}),Ple),dfe("indata",(function(e,t,n){var r=this.context.data[e]["index:"+t],a=r?r.value.get(n):void 0;return a?a.count:a}),(function(e,t,n,r){t[0].type!==poe&&Ht("First argument to indata must be a string literal."),t[1].type!==poe&&Ht("Second argument to indata must be a string literal.");var a=t[0].value,i=t[1].value,o="@"+i;In(o,r)||(r[o]=n.getData(a).indataRef(n,i))})),dfe("data",Mle,Lle),dfe("treePath",(function(e,t,n){var r=afe(e,this),a=r[t],i=r[n];return a&&i?a.path(i).map(rfe):void 0}),Lle),dfe("treeAncestors",(function(e,t){var n=afe(e,this)[t];return n?n.ancestors().map(rfe):void 0}),Lle),dfe("vlSelectionTest",wle,Tle),dfe("vlSelectionIdTest",Cle,Tle),dfe("vlSelectionResolve",Ale,Tle),dfe("vlSelectionTuples",Ele);var vfe=Yn(["rule"]),gfe=Yn(["group","image","rect"]);function mfe(e){return(e+"").toLowerCase()}function yfe(e,t,n){n.endsWith(";")||(n="return("+n+");");var r=Function.apply(void 0,(0,$n.Z)(t.concat(n)));return e&&e.functions?r.bind(e.functions):r}var bfe={operator:function(e,t){return yfe(e,["_"],t.code)},parameter:function(e,t){return yfe(e,["datum","_"],t.code)},event:function(e,t){return yfe(e,["event"],t.code)},handler:function(e,t){return yfe(e,["_","event"],"var datum=event.item&&event.item.datum;return ".concat(t.code,";"))},encode:function(e,t){var n=t.marktype,r=t.channels,a="var o=item,datum=o.datum,m=0,$;";for(var i in r){var o="o["+Vn(i)+"]";a+="$=".concat(r[i].code,";if(").concat(o,"!==$)").concat(o,"=$,m=1;")}return a+=function(e,t){var n="";return vfe[t]||(e.x2&&(e.x?(gfe[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(gfe[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}(r,n),yfe(e,["item","_"],a+="return m;")},codegen:{get:function(e){var t="[".concat(e.map(Vn).join("]["),"]"),n=Function("_","return _".concat(t,";"));return n.path=t,n},comparator:function(e,t){var n,r=Function("a","b","var u, v; return "+e.map((function(e,r){var a,i,o=t[r];return e.path?(a="a".concat(e.path),i="b".concat(e.path)):((n=n||{})["f"+r]=e,a="this.f".concat(r,"(a)"),i="this.f".concat(r,"(b)")),function(e,t,n,r){return"((u = ".concat(e,") < (v = ").concat(t,") || u == null) && v != null ? ").concat(n,"\n  : (u > v || v == null) && u != null ? ").concat(r,"\n  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ").concat(n,"\n  : v !== v && u === u ? ").concat(r," : ")}(a,i,-o,o)})).join("")+"0;");return n?r.bind(n):r}}};function xfe(e,t,n){if(!e||!rn(e))return e;for(var r,a=0,i=wfe.length;a<i;++a)if(In(e,(r=wfe[a]).key))return r.parse(e,t,n);return e}var wfe=[{key:"$ref",parse:function(e,t){return t.get(e.$ref)||Ht("Operator not defined: "+e.$ref)}},{key:"$key",parse:function(e,t){var n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=jn(e.$key,e.$flat,t.expr.codegen))}},{key:"$expr",parse:function(e,t,n){e.$params&&t.parseParameters(e.$params,n);var r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Pt(t.parameterExpression(e.$expr),e.$fields))}},{key:"$field",parse:function(e,t){if(!e.$field)return null;var n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Xt(e.$field,e.$name,t.expr.codegen))}},{key:"$encode",parse:function(e,t){var n=e.$encode,r={};for(var a in n){var i=n[a];r[a]=Pt(t.encodeExpression(i.$expr),i.$fields),r[a].output=i.$output}return r}},{key:"$compare",parse:function(e,t){var n="c:"+e.$compare+"_"+e.$order,r=wn(e.$compare).map((function(e){return e&&e.$tupleid?Ns:e}));return t.fn[n]||(t.fn[n]=_n(r,e.$order,t.expr.codegen))}},{key:"$context",parse:function(e,t){return t}},{key:"$subflow",parse:function(e,t){var n=e.$subflow;return function(e,r,a){var i=t.fork().parse(n),o=i.get(n.operators[0].id),u=i.signals.parent;return u&&u.set(a),o.detachSubflow=function(){return t.detach(i)},o}}},{key:"$tupleid",parse:function(){return Ns}}];var kfe={skip:!0};function _fe(e,t,n,r){return new Sfe(e,t,n,r)}function Sfe(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||bfe,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Cfe(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}function Efe(e,t){e&&(null==t?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}Sfe.prototype=Cfe.prototype={fork:function(){var e=new Cfe(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach:function(e){this.subcontext=this.subcontext.filter((function(t){return t!==e}));for(var t=Object.keys(e.nodes),n=0,r=t;n<r.length;n++){var a=r[n];e.nodes[a]._targets=null}for(var i=0,o=t;i<o.length;i++){var u=o[i];e.nodes[u].detach()}e.nodes=null},get:function(e){return this.nodes[e]},set:function(e,t){return this.nodes[e]=t},add:function(e,t){var n=this,r=n.dataflow,a=e.value;if(n.set(e.id,t),function(e){return"collect"===mfe(e)}(e.type)&&a&&(a.$ingest?r.ingest(t,a.$ingest,a.$format):a.$request?r.preload(t,a.$request,a.$format):r.pulse(t,r.changeset().insert(a))),e.root&&(n.root=t),e.parent){var i=n.get(e.parent.$ref);i?(r.connect(i,[t]),t.targets().add(i)):(n.unresolved=n.unresolved||[]).push((function(){i=n.get(e.parent.$ref),r.connect(i,[t]),t.targets().add(i)}))}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data){var o=function(r){var a=n.data[r]||(n.data[r]={});e.data[r].forEach((function(e){return a[e]=t}))};for(var u in e.data)o(u)}},resolve:function(){return(this.unresolved||[]).forEach((function(e){return e()})),delete this.unresolved,this},operator:function(e,t){this.add(e,this.dataflow.add(e.value,t))},transform:function(e,t){this.add(e,this.dataflow.add(this.transforms[mfe(t)]))},stream:function(e,t){this.set(e.id,t)},update:function(e,t,n,r,a){this.dataflow.on(t,n,r,a,e.options)},operatorExpression:function(e){return this.expr.operator(this,e)},parameterExpression:function(e){return this.expr.parameter(this,e)},eventExpression:function(e){return this.expr.event(this,e)},handlerExpression:function(e){return this.expr.handler(this,e)},encodeExpression:function(e){return this.expr.encode(this,e)},parse:function(e){var t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach((function(e){return t.parseOperator(e)})),n.forEach((function(e){return t.parseOperatorParameters(e)})),(e.streams||[]).forEach((function(e){return t.parseStream(e)})),(e.updates||[]).forEach((function(e){return t.parseUpdate(e)})),t.resolve()},parseOperator:function(e){var t=this;!function(e){return"operator"===mfe(e)}(e.type)&&e.type?t.transform(e,e.type):t.operator(e,e.update?t.operatorExpression(e.update):null)},parseOperatorParameters:function(e){var t=this;if(e.params){var n=t.get(e.id);n||Ht("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}},parseParameters:function(e,t){t=t||{};var n=this;for(var r in e){var a=e[r];t[r]=nn(a)?a.map((function(e){return xfe(e,n,t)})):xfe(a,n,t)}return t},parseStream:function(e){var t,n=this,r=null!=e.filter?n.eventExpression(e.filter):void 0,a=null!=e.stream?n.get(e.stream):void 0;e.source?a=n.events(e.source,e.type,r):e.merge&&(a=(t=e.merge.map((function(e){return n.get(e)})))[0].merge.apply(t[0],t.slice(1))),e.between&&(t=e.between.map((function(e){return n.get(e)})),a=a.between(t[0],t[1])),e.filter&&(a=a.filter(r)),null!=e.throttle&&(a=a.throttle(+e.throttle)),null!=e.debounce&&(a=a.debounce(+e.debounce)),null==a&&Ht("Invalid stream definition: "+JSON.stringify(e)),e.consume&&a.consume(!0),n.stream(e,a)},parseUpdate:function(e){var t,n=this,r=rn(r=e.source)?r.$ref:r,a=n.get(r),i=e.update,o=void 0;a||Ht("Source not defined: "+e.source),t=e.target&&e.target.$expr?n.eventExpression(e.target.$expr):n.get(e.target),i&&i.$expr&&(i.$params&&(o=n.parseParameters(i.$params)),i=n.handlerExpression(i.$expr)),n.update(e,a,t,i,o)},getState:function(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach((function(n){var a=t.signals[n];e.signals(n,a)&&(r[n]=a.value)}))}if(e.data){var a=n.data={};Object.keys(t.data).forEach((function(n){var r=t.data[n];e.data(n,r)&&(a[n]=r.input.value)}))}return t.subcontext&&!1!==e.recurse&&(n.subcontext=t.subcontext.map((function(t){return t.getState(e)}))),n},setState:function(e){var t=this,n=t.dataflow,r=e.data,a=e.signals;Object.keys(a||{}).forEach((function(e){n.update(t.signals[e],a[e],kfe)})),Object.keys(r||{}).forEach((function(e){n.pulse(t.data[e].input,n.changeset().remove(Jt).insert(r[e]))})),(e.subcontext||[]).forEach((function(e,n){var r=t.subcontext[n];r&&r.setState(e)}))}};var Afe="default";function Nfe(e,t){var n=e.globalCursor()?"undefined"!==typeof document&&document.body:e.container();if(n)return null==t?n.style.removeProperty("cursor"):n.style.cursor=t}function Tfe(e,t){var n=e._runtime.data;return In(n,t)||Ht("Unrecognized data set: "+t),n[t]}function Mfe(e,t){Rs(t)||Ht("Second argument to changes must be a changeset.");var n=Tfe(this,e);return n.modified=!0,this.pulse(n.input,t)}function Dfe(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function Ffe(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function Ife(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Ofe(e){var t=Ife(e),n=Dfe(e),r=Ffe(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach((function(t){try{t(n,r)}catch(a){e.error(a)}}))}function Rfe(e,t,n){var r,a,i=e._renderer,o=i&&i.canvas();return o&&(a=Ife(e),(r=kC(t.changedTouches?t.changedTouches[0]:t,o))[0]-=a[0],r[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=function(e,t,n){var r=t?"group"===t.mark.marktype?t:t.mark.group:null;function a(e){var n,a=r;if(e)for(n=t;n;n=n.mark.group)if(n.mark.name===e){a=n;break}return a&&a.mark&&a.mark.interactive?a:{}}function i(e){if(!e)return n;Pn(e)&&(e=a(e));for(var t=n.slice();e;)t[0]-=e.x||0,t[1]-=e.y||0,e=e.mark&&e.mark.group;return t}return{view:Nn(e),item:Nn(t||{}),group:a,xy:i,x:function(e){return i(e)[0]},y:function(e){return i(e)[1]}}}(e,n,r),t}var Zfe="view",Bfe={trap:!1};function zfe(e,t,n,r){e._eventListeners.push({type:n,sources:wn(t),handler:r})}function Lfe(e,t,n){var r=e._eventConfig&&e._eventConfig[t];return!(!1===r||rn(r)&&!r[n])||(e.warn("Blocked ".concat(t," ").concat(n," event listener.")),!1)}function Pfe(e){return e.item}function jfe(e){return e.item.mark.source}function Ufe(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Wfe(e,t,n){var r=document.createElement(e);for(var a in t)r.setAttribute(a,t[a]);return null!=n&&(r.textContent=n),r}function Vfe(e,t,n,r){var a=n.event||"input",i=function(){return e.update(t.value)};r.signal(n.signal,t.value),t.addEventListener(a,i),zfe(r,t,a,i),e.set=function(e){t.value=e,t.dispatchEvent(function(e){return"undefined"!==typeof Event?new Event(e):{type:e}}(a))}}function qfe(e,t,n,r){var a=r.signal(n.signal),i=Wfe("div",{class:"vega-bind"}),o="radio"===n.input?i:i.appendChild(Wfe("label"));o.appendChild(Wfe("span",{class:"vega-bind-name"},n.name||n.signal)),t.appendChild(i);var u=Hfe;switch(n.input){case"checkbox":u=Gfe;break;case"select":u=Xfe;break;case"radio":u=Yfe;break;case"range":u=Kfe}u(e,o,n,a)}function Hfe(e,t,n,r){var a=Wfe("input");for(var i in n)"signal"!==i&&"element"!==i&&a.setAttribute("input"===i?"type":i,n[i]);a.setAttribute("name",n.signal),a.value=r,t.appendChild(a),a.addEventListener("input",(function(){return e.update(a.value)})),e.elements=[a],e.set=function(e){return a.value=e}}function Gfe(e,t,n,r){var a={type:"checkbox",name:n.signal};r&&(a.checked=!0);var i=Wfe("input",a);t.appendChild(i),i.addEventListener("change",(function(){return e.update(i.checked)})),e.elements=[i],e.set=function(e){return i.checked=!!e||null}}function Xfe(e,t,n,r){var a=Wfe("select",{name:n.signal}),i=n.labels||[];n.options.forEach((function(e,t){var n={value:e};$fe(e,r)&&(n.selected=!0),a.appendChild(Wfe("option",n,(i[t]||e)+""))})),t.appendChild(a),a.addEventListener("change",(function(){e.update(n.options[a.selectedIndex])})),e.elements=[a],e.set=function(e){for(var t=0,r=n.options.length;t<r;++t)if($fe(n.options[t],e))return void(a.selectedIndex=t)}}function Yfe(e,t,n,r){var a=Wfe("span",{class:"vega-bind-radio"}),i=n.labels||[];t.appendChild(a),e.elements=n.options.map((function(t,o){var u={type:"radio",name:n.signal,value:t};$fe(t,r)&&(u.checked=!0);var s=Wfe("input",u);s.addEventListener("change",(function(){return e.update(t)}));var c=Wfe("label",{},(i[o]||t)+"");return c.prepend(s),a.appendChild(c),s})),e.set=function(t){for(var n=e.elements,r=n.length,a=0;a<r;++a)$fe(n[a].value,t)&&(n[a].checked=!0)}}function Kfe(e,t,n,r){r=void 0!==r?r:(+n.max+ +n.min)/2;var a=null!=n.max?n.max:Math.max(100,+r)||100,i=n.min||Math.min(0,a,+r)||0,o=n.step||GT(i,a,100),u=Wfe("input",{type:"range",name:n.signal,min:i,max:a,step:o});u.value=r;var s=Wfe("span",{},+r);t.appendChild(u),t.appendChild(s);var c=function(){s.textContent=u.value,e.update(+u.value)};u.addEventListener("input",c),u.addEventListener("change",c),e.elements=[u],e.set=function(e){u.value=e,s.textContent=e}}function $fe(e,t){return e===t||e+""===t+""}function Qfe(e,t,n,r,a,i){return(t=t||new r(e.loader())).initialize(n,Dfe(e),Ffe(e),Ife(e),a,i).background(e.background())}function Jfe(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function ehe(e,t,n){if("string"===typeof t){if("undefined"===typeof document)return e.error("DOM document instance not found."),null;if(!(t=document.querySelector(t)))return e.error("Signal bind element not found: "+t),null}if(t&&n)try{t.innerHTML=""}catch(r){t=null,e.error(r)}return t}var the=function(e){return+e||0};function nhe(e){return rn(e)?{top:the(e.top),bottom:the(e.bottom),left:the(e.left),right:the(e.right)}:function(e){return{top:e,bottom:e,left:e,right:e}}(the(e))}function rhe(e,t,n,r){return ahe.apply(this,arguments)}function ahe(){return ahe=(0,Lt.Z)(S().mark((function e(t,n,r,a){var i,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=XE(n),(o=i&&i.headless)||Ht("Unrecognized renderer type: "+n),e.next=4,t.runAsync();case 4:return e.abrupt("return",Qfe(t,null,null,o,r,a).renderAsync(t._scenegraph.root));case 5:case"end":return e.stop()}}),e)}))),ahe.apply(this,arguments)}function ihe(){return ihe=(0,Lt.Z)(S().mark((function e(t,n){var r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t!==VE&&t!==HE&&t!==qE&&Ht("Unrecognized image type: "+t),e.next=3,rhe(this,t,n);case 3:return r=e.sent,e.abrupt("return",t===HE?ohe(r.svg(),"image/svg+xml"):r.canvas().toDataURL("image/png"));case 5:case"end":return e.stop()}}),e,this)}))),ihe.apply(this,arguments)}function ohe(e,t){var n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}function uhe(){return(uhe=(0,Lt.Z)(S().mark((function e(t,n){var r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rhe(this,VE,t,n);case 2:return r=e.sent,e.abrupt("return",r.canvas());case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function she(){return(she=(0,Lt.Z)(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rhe(this,HE,t);case 2:return n=e.sent,e.abrupt("return",n.svg());case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var che="width",lhe="height",fhe="padding",hhe={skip:!0};function dhe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===fhe?r.left+r.right:0)}function phe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===fhe?r.top+r.bottom:0)}function vhe(e,t){return t.modified&&nn(t.input.value)&&e.indexOf("_:vega:_")}function ghe(e,t){return!("parent"===e||t instanceof dc.proxy)}function mhe(e,t,n,r){var a=e.element();a&&a.setAttribute("title",function(e){return null==e?"":nn(e)?yhe(e):rn(e)&&!zn(e)?(t=e,Object.keys(t).map((function(e){var n=t[e];return e+": "+(nn(n)?yhe(n):bhe(n))})).join("\n")):e+"";var t}(r))}function yhe(e){return"["+e.map(bhe).join(", ")+"]"}function bhe(e){return nn(e)?"[\u2026]":rn(e)&&!zn(e)?"{\u2026}":e}function xhe(e,t){var n=this;if(t=t||{},lc.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),null!=t.logLevel&&n.logLevel(t.logLevel),t.locale||e.locale){var r=Mn({},e.locale,t.locale);n.locale(function(e,t){var n=e?zu(e):Lu(),r=t?Wu(t):Vu();return qu(n,r)}(r.number,r.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||VE,n._scenegraph=new vC;var a=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||mhe,n._redraw=!0,n._handler=(new qC).scene(a),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=function(e){var t=Mn({defaults:{}},e),n=function(e,t){t.forEach((function(t){nn(e[t])&&(e[t]=Yn(e[t]))}))};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);var i=function(e,t,n){return _fe(e,dc,ufe,n).parse(t)}(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map((function(e){return{state:null,param:Mn({},e)}})),i.root&&i.root.set(a),a.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(a.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=dhe(n,n._width),n._viewHeight=phe(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,function(e){var t=e._signals,n=t.width,r=t.height,a=t.padding;function i(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,(function(t){e._width=t.size,e._viewWidth=dhe(e,t.size),i()}),{size:n}),e._resizeHeight=e.add(null,(function(t){e._height=t.size,e._viewHeight=phe(e,t.size),i()}),{size:r});var o=e.add(null,i,{pad:a});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=a.rank+1}(n),function(e){e.add(null,(function(t){return e._background=t.bg,e._resize=1,t.bg}),{bg:e._signals.background})}(n),function(e){var t=e._signals.cursor||(e._signals.cursor=e.add({user:Afe,item:null}));e.on(e.events("view","mousemove"),t,(function(e,n){var r=t.value,a=r?Pn(r)?r:r.user:Afe,i=n.item&&n.item.cursor||null;return r&&a===r.user&&i==r.item?r:{user:a,item:i}})),e.add(null,(function(t){var n=t.cursor,r=this.value;return Pn(n)||(r=n.item,n=n.user),Nfe(e,n&&n!==Afe?n:r||n),r}),{cursor:t})}(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind)}function whe(e,t){return In(e._signals,t)?e._signals[t]:Ht("Unrecognized signal name: "+Vn(t))}function khe(e,t){var n=(e._targets||[]).filter((function(e){return e._update&&e._update.handler===t}));return n.length?n[0]:null}function _he(e,t,n,r){var a=khe(n,r);return a||((a=Jfe(e,(function(){return r(t,n.value)}))).handler=r,e.on(n,null,a)),e}function She(e,t,n){var r=khe(t,n);return r&&t._targets.remove(r),e}function Che(e,t,n){return e.fields=t||[],e.fname=n,e}function Ehe(e){return 1===e.length?Ahe(e[0]):Nhe(e)}Zn(xhe,lc,{evaluate:function(e,t,n){var r=this;return(0,Lt.Z)(S().mark((function a(){return S().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,lc.prototype.evaluate.call(r,e,t);case 2:if(!r._redraw&&!r._resize){a.next=14;break}if(a.prev=3,!r._renderer){a.next=8;break}return r._resize&&(r._resize=0,Ofe(r)),a.next=8,r._renderer.renderAsync(r._scenegraph.root);case 8:r._redraw=!1,a.next=14;break;case 11:a.prev=11,a.t0=a.catch(3),r.error(a.t0);case 14:return n&&_s(r,n),a.abrupt("return",r);case 16:case"end":return a.stop()}}),a,null,[[3,11]])})))()},dirty:function(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description:function(e){if(arguments.length){var t=null!=e?e+"":null;return t!==this._desc&&Efe(this._el,this._desc=t),this}return this._desc},container:function(){return this._el},scenegraph:function(){return this._scenegraph},origin:function(){return this._origin.slice()},signal:function(e,t,n){var r=whe(this,e);return 1===arguments.length?r.value:this.update(r,t,n)},width:function(e){return arguments.length?this.signal("width",e):this.signal("width")},height:function(e){return arguments.length?this.signal("height",e):this.signal("height")},padding:function(e){return arguments.length?this.signal("padding",nhe(e)):nhe(this.signal("padding"))},autosize:function(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background:function(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer:function(e){return arguments.length?(XE(e)||Ht("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip:function(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader:function(e){return arguments.length?(e!==this._loader&&(lc.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize:function(){return this._autosize=1,this.touch(whe(this,"autosize"))},_resetRenderer:function(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:function(e,t,n,r,a,i){this.runAfter((function(o){var u=0;o._autosize=0,o.width()!==n&&(u=1,o.signal(che,n,hhe),o._resizeWidth.skip(!0)),o.height()!==r&&(u=1,o.signal(lhe,r,hhe),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),o._origin[0]===a[0]&&o._origin[1]===a[1]||(o._resize=1,o._origin=a),u&&o.run("enter"),i&&o.runAfter((function(e){return e.resize()}))}),!1,1)},addEventListener:function(e,t,n){var r=t;return n&&!1===n.trap||((r=Jfe(this,t)).raw=t),this._handler.on(e,r),this},removeEventListener:function(e,t){for(var n,r,a=this._handler.handlers(e),i=a.length;--i>=0;)if(r=a[i].type,n=a[i].handler,e===r&&(t===n||t===n.raw)){this._handler.off(r,n);break}return this},addResizeListener:function(e){var t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},removeResizeListener:function(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener:function(e,t){return _he(this,e,whe(this,e),t)},removeSignalListener:function(e,t){return She(this,whe(this,e),t)},addDataListener:function(e,t){return _he(this,e,Tfe(this,e).values,t)},removeDataListener:function(e,t){return She(this,Tfe(this,e).values,t)},globalCursor:function(e){if(arguments.length){if(this._globalCursor!==!!e){var t=Nfe(this,null);this._globalCursor=!!e,t&&Nfe(this,t)}return this}return this._globalCursor},preventDefault:function(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:function(e,t){this._timers.push(function(e,t,n){var r=new oZ,a=t;return null==t?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(e,t,n){t=+t,n=null==n?aZ():+n,r._restart((function i(o){o+=a,r._restart(i,a+=t,n),e(o)}),t,n)},r.restart(e,t,n),r)}((function(t){e({timestamp:Date.now(),elapsed:t})}),t))},events:function(e,t,n){var r,a=this,i=new Vs(n),o=function(n,r){a.runAsync(null,(function(){e===Zfe&&function(e,t){var n=e._eventConfig.defaults,r=n.prevent,a=n.allow;return!1!==r&&!0!==a&&(!0===r||!1===a||(r?r[t]:a?!a[t]:e.preventDefault()))}(a,t)&&n.preventDefault(),i.receive(Rfe(a,n,r))}))};if("timer"===e)Lfe(a,"timer",t)&&a.timer(o,t);else if(e===Zfe)Lfe(a,"view",t)&&a.addEventListener(t,o,Bfe);else if("window"===e?Lfe(a,"window",t)&&"undefined"!==typeof window&&(r=[window]):"undefined"!==typeof document&&Lfe(a,"selector",t)&&(r=document.querySelectorAll(e)),r){for(var u=0,s=r.length;u<s;++u)r[u].addEventListener(t,o);zfe(a,r,t,o)}else a.warn("Can not resolve event source: "+e);return i},finalize:function(){var e,t,n,r=this._tooltip,a=this._timers,i=this._eventListeners;for(e=a.length;--e>=0;)a[e].stop();for(e=i.length;--e>=0;)for(t=(n=i[e]).sources.length;--t>=0;)n.sources[t].removeEventListener(n.type,n.handler);return r&&r.call(this,this._handler,null,null,null),this},hover:function(e,t){return t=[t||"update",(e=[e||"hover"])[0]],this.on(this.events("view","mouseover",Pfe),jfe,Ufe(e)),this.on(this.events("view","mouseout",Pfe),jfe,Ufe(t)),this},data:function(e,t){return arguments.length<2?Tfe(this,e).values.value:Mfe.call(this,e,Zs().remove(Jt).insert(t))},change:Mfe,insert:function(e,t){return Mfe.call(this,e,Zs().insert(t))},remove:function(e,t){return Mfe.call(this,e,Zs().remove(t))},scale:function(e){var t=this._runtime.scales;return In(t,e)||Ht("Unrecognized scale or projection: "+e),t[e].value},initialize:function(e,t){var n=this,r=n._renderType,a=n._eventConfig.bind,i=XE(r);e=n._el=e?ehe(n,e,!0):null,function(e){var t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),Efe(t,e.description()))}(n),i||n.error("Unrecognized renderer type: "+r);var o=i.handler||qC,u=e?i.renderer:i.headless;return n._renderer=u?Qfe(n,n._renderer,e,u):null,n._handler=function(e,t,n,r){var a=new r(e.loader(),Jfe(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,Ife(e),e);return t&&t.handlers().forEach((function(e){a.on(e.type,e.handler)})),a}(n,n._handler,e,o),n._redraw=!0,e&&"none"!==a&&(t=t?n._elBind=ehe(n,t,!0):e.appendChild(Wfe("form",{class:"vega-bindings"})),n._bind.forEach((function(e){e.param.element&&"container"!==a&&(e.element=ehe(n,e.param.element,!!e.param.input))})),n._bind.forEach((function(e){!function(e,t,n){if(t){var r=n.param,a=n.state;a||(a=n.state={elements:null,active:!1,set:null,update:function(t){t!=e.signal(r.signal)&&e.runAsync(null,(function(){a.source=!0,e.signal(r.signal,t)}))}},r.debounce&&(a.update=Tn(r.debounce,a.update))),(null==r.input&&r.element?Vfe:qfe)(a,t,r,e),a.active||(e.on(e._signals[r.signal],null,(function(){a.source?a.source=!1:a.set(e.signal(r.signal))})),a.active=!0)}}(n,e.element||t,e)}))),n},toImageURL:function(e,t){return ihe.apply(this,arguments)},toCanvas:function(e,t){return uhe.apply(this,arguments)},toSVG:function(e){return she.apply(this,arguments)},getState:function(e){return this._runtime.getState(e||{data:vhe,signals:ghe,recurse:!0})},setState:function(e){return this.runAsync(null,(function(t){t._trigger=!1,t._runtime.setState(e)}),(function(e){e._trigger=!0})),this}});var Ahe=function(e){return function(t){return t[e]}},Nhe=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function The(e){throw Error(e)}function Mhe(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n++),t=n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&c(),u=t=n+1):"]"===r&&(u||The("Access path missing open bracket: "+e),u>0&&c(),u=0,t=n+1):n>t?c():t=n+1}return u&&The("Access path missing closing bracket: "+e),o&&The("Access path missing closing quote: "+e),n>t&&(n++,c()),a}function Dhe(e,t,n){var r=Mhe(e);return e=1===r.length?r[0]:e,Che((n&&n.get||Ehe)(r),[e],t||e)}Dhe("id"),Che((function(e){return e}),[],"identity"),Che((function(){return 0}),[],"zero"),Che((function(){return 1}),[],"one"),Che((function(){return!0}),[],"true"),Che((function(){return!1}),[],"false");Array.isArray;function Fhe(e){return e===Object(e)}function Ihe(e){for(var t,n,r=1,a=arguments.length;r<a;++r)for(n in t=arguments[r])e[n]=t[n];return e}Object.prototype.hasOwnProperty;function Ohe(e){return"string"===typeof e}var Rhe=new Date,Zhe=new Date;function Bhe(e,t,n,r){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=function(t){return e(t=new Date(+t)),t},a.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},a.round=function(e){var t=a(e),n=a.ceil(e);return e-t<n-e?t:n},a.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},a.range=function(n,r,i){var o,u=[];if(n=a.ceil(n),i=null==i?1:Math.floor(i),!(n<r)||!(i>0))return u;do{u.push(o=new Date(+n)),t(n,i),e(n)}while(o<n&&n<r);return u},a.filter=function(n){return Bhe((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(a.count=function(t,r){return Rhe.setTime(+t),Zhe.setTime(+r),e(Rhe),e(Zhe),Math.floor(n(Rhe,Zhe))},a.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(r?function(t){return r(t)%e===0}:function(t){return a.count(0,t)%e===0}):a:null}),a}var zhe=1e3,Lhe=6e4,Phe=36e5,jhe=864e5,Uhe=6048e5,Whe=Bhe((function(e){return e.setHours(0,0,0,0)}),(function(e,t){return e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Lhe)/jhe}),(function(e){return e.getDate()-1})),Vhe=(Whe.range,Bhe((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/jhe}),(function(e){return e.getUTCDate()-1}))),qhe=(Vhe.range,Bhe((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/jhe}),(function(e){return Math.floor(e/jhe)})));qhe.range;function Hhe(e){return Bhe((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Lhe)/Uhe}))}var Ghe=Hhe(0),Xhe=Hhe(1),Yhe=Hhe(2),Khe=Hhe(3),$he=Hhe(4),Qhe=Hhe(5),Jhe=Hhe(6);Ghe.range,Xhe.range,Yhe.range,Khe.range,$he.range,Qhe.range,Jhe.range;function ede(e){return Bhe((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/Uhe}))}var tde=ede(0),nde=ede(1),rde=ede(2),ade=ede(3),ide=ede(4),ode=ede(5),ude=ede(6),sde=(tde.range,nde.range,rde.range,ade.range,ide.range,ode.range,ude.range,Bhe((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()})));sde.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Bhe((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};sde.range;var cde=Bhe((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));cde.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Bhe((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};cde.range;var lde=Bhe((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()})),fde=(lde.range,Bhe((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()}))),hde=(fde.range,Bhe((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*zhe-e.getMinutes()*Lhe)}),(function(e,t){e.setTime(+e+t*Phe)}),(function(e,t){return(t-e)/Phe}),(function(e){return e.getHours()}))),dde=(hde.range,Bhe((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*Phe)}),(function(e,t){return(t-e)/Phe}),(function(e){return e.getUTCHours()}))),pde=(dde.range,Bhe((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*zhe)}),(function(e,t){e.setTime(+e+t*Lhe)}),(function(e,t){return(t-e)/Lhe}),(function(e){return e.getMinutes()}))),vde=(pde.range,Bhe((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*Lhe)}),(function(e,t){return(t-e)/Lhe}),(function(e){return e.getUTCMinutes()}))),gde=(vde.range,Bhe((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*zhe)}),(function(e,t){return(t-e)/zhe}),(function(e){return e.getUTCSeconds()}))),mde=(gde.range,Bhe((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e})));mde.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?Bhe((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):mde:null};mde.range;var yde,bde,xde,wde,kde,_de,Sde,Cde="year",Ede="quarter",Ade="month",Nde="week",Tde="date",Mde="day",Dde="dayofyear",Fde="hours",Ide="minutes",Ode="seconds",Rde="milliseconds";[Cde,Ede,Ade,Nde,Tde,Mde,Dde,Fde,Ide,Ode,Rde].reduce((function(e,t,n){return e[t]=1+n,e}),{});yde={},(0,Ir.Z)(yde,Cde,"%Y "),(0,Ir.Z)(yde,Ede,"Q%q "),(0,Ir.Z)(yde,Ade,"%b "),(0,Ir.Z)(yde,Tde,"%d "),(0,Ir.Z)(yde,Nde,"W%U "),(0,Ir.Z)(yde,Mde,"%a "),(0,Ir.Z)(yde,Dde,"%j "),(0,Ir.Z)(yde,Fde,"%H:00"),(0,Ir.Z)(yde,Ide,"00:%M"),(0,Ir.Z)(yde,Ode,":%S"),(0,Ir.Z)(yde,Rde,".%L"),(0,Ir.Z)(yde,"".concat(Cde,"-").concat(Ade),"%Y-%m "),(0,Ir.Z)(yde,"".concat(Cde,"-").concat(Ade,"-").concat(Tde),"%Y-%m-%d "),(0,Ir.Z)(yde,"".concat(Fde,"-").concat(Ide),"%H:%M");var Zde=new Date;function Bde(e){return Zde.setFullYear(e),Zde.setMonth(0),Zde.setDate(1),Zde.setHours(0,0,0,0),Zde}function zde(e){return Whe.count(Bde(e.getFullYear())-1,e)}function Lde(e){return Ghe.count(Bde(e.getFullYear())-1,e)}function Pde(e){return Bde(e).getDay()}function jde(e){var t=Date.UTC(e.getUTCFullYear(),0,1);return Vhe.count(t-1,e)}function Ude(e){var t=Date.UTC(e.getUTCFullYear(),0,1);return tde.count(t-1,e)}function Wde(e){return Zde.setTime(Date.UTC(e,0,1)),Zde.getUTCDay()}function Vde(e,t,n){return t+7*e-(n+6)%7}bde={},(0,Ir.Z)(bde,Cde,(function(e){return e.getFullYear()})),(0,Ir.Z)(bde,Ede,(function(e){return Math.floor(e.getMonth()/3)})),(0,Ir.Z)(bde,Ade,(function(e){return e.getMonth()})),(0,Ir.Z)(bde,Tde,(function(e){return e.getDate()})),(0,Ir.Z)(bde,Fde,(function(e){return e.getHours()})),(0,Ir.Z)(bde,Ide,(function(e){return e.getMinutes()})),(0,Ir.Z)(bde,Ode,(function(e){return e.getSeconds()})),(0,Ir.Z)(bde,Rde,(function(e){return e.getMilliseconds()})),(0,Ir.Z)(bde,Dde,(function(e){return zde(e)})),(0,Ir.Z)(bde,Nde,(function(e){return Lde(e)})),(0,Ir.Z)(bde,"weekday",(function(e,t){return Vde(Lde(e),e.getDay(),Pde(t))})),(0,Ir.Z)(bde,Mde,(function(e,t){return Vde(1,e.getDay(),Pde(t))})),xde={},(0,Ir.Z)(xde,Ede,(function(e){return 3*e})),(0,Ir.Z)(xde,Nde,(function(e,t){return Vde(e,0,Pde(t))}));wde={},(0,Ir.Z)(wde,Cde,(function(e){return e.getUTCFullYear()})),(0,Ir.Z)(wde,Ede,(function(e){return Math.floor(e.getUTCMonth()/3)})),(0,Ir.Z)(wde,Ade,(function(e){return e.getUTCMonth()})),(0,Ir.Z)(wde,Tde,(function(e){return e.getUTCDate()})),(0,Ir.Z)(wde,Fde,(function(e){return e.getUTCHours()})),(0,Ir.Z)(wde,Ide,(function(e){return e.getUTCMinutes()})),(0,Ir.Z)(wde,Ode,(function(e){return e.getUTCSeconds()})),(0,Ir.Z)(wde,Rde,(function(e){return e.getUTCMilliseconds()})),(0,Ir.Z)(wde,Dde,(function(e){return jde(e)})),(0,Ir.Z)(wde,Nde,(function(e){return Ude(e)})),(0,Ir.Z)(wde,Mde,(function(e,t){return Vde(1,e.getUTCDay(),Wde(t))})),(0,Ir.Z)(wde,"weekday",(function(e,t){return Vde(Ude(e),e.getUTCDay(),Wde(t))})),kde={},(0,Ir.Z)(kde,Ede,(function(e){return 3*e})),(0,Ir.Z)(kde,Nde,(function(e,t){return Vde(e,0,Wde(t))}));var qde=(_de={},(0,Ir.Z)(_de,Cde,sde),(0,Ir.Z)(_de,Ede,lde.every(3)),(0,Ir.Z)(_de,Ade,lde),(0,Ir.Z)(_de,Nde,Ghe),(0,Ir.Z)(_de,Tde,Whe),(0,Ir.Z)(_de,Mde,Whe),(0,Ir.Z)(_de,Dde,Whe),(0,Ir.Z)(_de,Fde,hde),(0,Ir.Z)(_de,Ide,pde),(0,Ir.Z)(_de,Ode,gde),(0,Ir.Z)(_de,Rde,mde),_de),Hde=(Sde={},(0,Ir.Z)(Sde,Cde,cde),(0,Ir.Z)(Sde,Ede,fde.every(3)),(0,Ir.Z)(Sde,Ade,fde),(0,Ir.Z)(Sde,Nde,tde),(0,Ir.Z)(Sde,Tde,Vhe),(0,Ir.Z)(Sde,Mde,Vhe),(0,Ir.Z)(Sde,Dde,Vhe),(0,Ir.Z)(Sde,Fde,dde),(0,Ir.Z)(Sde,Ide,vde),(0,Ir.Z)(Sde,Ode,gde),(0,Ir.Z)(Sde,Rde,mde),Sde);function Gde(e){return qde[e]}function Xde(e){return Hde[e]}var Yde,Kde,$de=[Cde,Ade,Tde,Fde,Ide,Ode,Rde],Qde=$de.slice(0,-1),Jde=Qde.slice(0,-1),epe=Jde.slice(0,-1);epe.slice(0,-1);function tpe(e){var t={};return function(n){return t[n]||(t[n]=e(n))}}function npe(e){var t=tpe(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat:function(e){var n=X8(e||",");if(null==n.precision){switch(n.precision=12,n.type){case"%":n.precision-=2;break;case"e":n.precision-=1}return function(e,t){return function(n){var r=e(n),a=r.indexOf(t);if(a<0)return r;for(var i=function(e,t){var n,r=e.lastIndexOf("e");if(r>0)return r;for(r=e.length;--r>t;)if((n=e.charCodeAt(r))>=48&&n<=57)return r+1}(r,a),o=i<r.length?r.slice(i):"";--i>a;)if("0"!==r[i]){++i;break}return r.slice(0,i)+o}}(t(n),t(".1f")(1)[1])}return t(n)},formatSpan:function(e,r,a,i){i=X8(null==i?",f":i);var o,u=GT(e,r,a),s=Math.max(Math.abs(e),Math.abs(r));if(null==i.precision)switch(i.type){case"s":return isNaN(o=Q8(u,s))||(i.precision=o),n(i,s);case"":case"e":case"g":case"p":case"r":isNaN(o=s7(u,s))||(i.precision=o-("e"===i.type));break;case"f":case"%":isNaN(o=c7(u))||(i.precision=o-2*("%"===i.type))}return t(i)}}}function rpe(){return Yde=npe({format:r7,formatPrefix:a7})}function ape(e){return npe(u7(e))}function ipe(e){return arguments.length?Yde=ape(e):Yde}function ope(e,t,n){Fhe(n=n||{})||The("Invalid time multi-format specifier: ".concat(n));var r=t(Ode),a=t(Ide),i=t(Fde),o=t(Tde),u=t(Nde),s=t(Ade),c=t(Ede),l=t(Cde),f=e(n.milliseconds||".%L"),h=e(n.seconds||":%S"),d=e(n.minutes||"%I:%M"),p=e(n.hours||"%I %p"),v=e(n.date||n.day||"%a %d"),g=e(n.week||"%b %d"),m=e(n.month||"%B"),y=e(n.quarter||"%B"),b=e(n.year||"%Y");return function(e){return(r(e)<e?f:a(e)<e?h:i(e)<e?d:o(e)<e?p:s(e)<e?u(e)<e?v:g:l(e)<e?c(e)<e?m:y:b)(e)}}function upe(e){var t=tpe(e.format),n=tpe(e.utcFormat);return{timeFormat:function(e){return Ohe(e)?t(e):ope(t,Gde,e)},utcFormat:function(e){return Ohe(e)?n(e):ope(n,Xde,e)},timeParse:tpe(e.parse),utcParse:tpe(e.utcParse)}}function spe(){return Kde=upe({format:$7,parse:Q7,utcFormat:J7,utcParse:e9})}function cpe(e){return upe(Y7(e))}function lpe(e){return arguments.length?Kde=cpe(e):Kde}rpe(),spe();var fpe=function(e,t){return Ihe({},e,t)};function hpe(e,t){var n=e?ape(e):ipe(),r=t?cpe(t):lpe();return fpe(n,r)}function dpe(e,t){var n=arguments.length;return n&&2!==n&&The("defaultLocale expects either zero or two arguments."),n?fpe(ipe(e),lpe(t)):fpe(ipe(),lpe())}function ppe(){return rpe(),spe(),dpe()}function vpe(e,t,n){return e.fields=t||[],e.fname=n,e}function gpe(e){return 1===e.length?mpe(e[0]):ype(e)}var mpe=function(e){return function(t){return t[e]}},ype=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function bpe(e){throw Error(e)}function xpe(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n++),t=n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&c(),u=t=n+1):"]"===r&&(u||bpe("Access path missing open bracket: "+e),u>0&&c(),u=0,t=n+1):n>t?c():t=n+1}return u&&bpe("Access path missing closing bracket: "+e),o&&bpe("Access path missing closing quote: "+e),n>t&&(n++,c()),a}function wpe(e,t,n){var r=xpe(e);return e=1===r.length?r[0]:e,vpe((n&&n.get||gpe)(r),[e],t||e)}wpe("id");var kpe=vpe((function(e){return e}),[],"identity"),_pe=(vpe((function(){return 0}),[],"zero"),vpe((function(){return 1}),[],"one"),vpe((function(){return!0}),[],"true"));vpe((function(){return!1}),[],"false");var Spe=Array.isArray;function Cpe(e){return e===Object(e)}function Epe(e){return e[e.length-1]}function Ape(e){return null==e||""===e?null:+e}var Npe=function(e){return function(t){return e*Math.exp(t)}},Tpe=function(e){return function(t){return Math.log(e*t)}},Mpe=function(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}},Dpe=function(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}},Fpe=function(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}};function Ipe(e,t,n,r){var a=n(e[0]),i=n(Epe(e)),o=(i-a)*t;return[r(a-o),r(i-o)]}function Ope(e,t,n,r,a){var i=r(e[0]),o=r(Epe(e)),u=null!=t?r(t):(i+o)/2;return[a(u+(i-u)*n),a(u+(o-u)*n)]}function Rpe(e){return null!=e?Spe(e)?e:[e]:[]}function Zpe(e){return"function"===typeof e}function Bpe(e){for(var t,n,r=1,a=arguments.length;r<a;++r)for(n in t=arguments[r])e[n]=t[n];return e}var zpe=Object.prototype.hasOwnProperty;function Lpe(e,t){return zpe.call(e,t)}function Ppe(e,t,n){var r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Bpe(r,n)}function jpe(e){return"[object Date]"===Object.prototype.toString.call(e)}function Upe(e){return"number"===typeof e}function Wpe(e){return"string"===typeof e}function Vpe(e,t){for(var n="";--t>=0;)n+=e;return n}function qpe(e){return Spe(e)?"["+e.map(qpe)+"]":Cpe(e)||Wpe(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function Hpe(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e)&&!!e}var Gpe=function(e){return Upe(e)||jpe(e)?e:Date.parse(e)};function Xpe(e,t){return t=t||Gpe,null==e||""===e?null:t(e)}function Ype(e){return null==e||""===e?null:e+""}function Kpe(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return t}var $pe,Qpe="Literal",Jpe="Property",eve="ArrayExpression",tve="BinaryExpression",nve="CallExpression",rve="ConditionalExpression",ave="LogicalExpression",ive="MemberExpression",ove="ObjectExpression",uve="UnaryExpression";function sve(e){this.type=e}sve.prototype.visit=function(e){var t,n,r;if(e(this))return 1;for(n=0,r=(t=function(e){switch(e.type){case eve:return e.elements;case tve:case ave:return[e.left,e.right];case nve:return[e.callee].concat(e.arguments);case rve:return[e.test,e.consequent,e.alternate];case ive:return[e.object,e.property];case ove:return e.properties;case Jpe:return[e.key,e.value];case uve:return[e.argument];default:return[]}}(this)).length;n<r;++n)if(t[n].visit(e))return 1};($pe={})[1]="Boolean",$pe[2]="<end>",$pe[3]="Identifier",$pe[4]="Keyword",$pe[5]="Null",$pe[6]="Numeric",$pe[7]="Punctuator",$pe[8]="String",$pe[9]="RegularExpression";var cve={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function lve(e){function t(t,n,r){return function(a){return function(t,n,r,a){var i=e(n[0]);return r&&(i=r+"("+i+")",0===r.lastIndexOf("new ",0)&&(i="("+i+")")),i+"."+t+(a<0?"":0===a?"()":"("+n.slice(1).map(e).join(",")+")")}(t,a,n,r)}}var n="new Date",r="String",a="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){t.length<3&&bpe("Missing arguments to clamp function."),t.length>3&&bpe("Too many arguments to clamp function.");var n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:t("getDate",n,0),day:t("getDay",n,0),year:t("getFullYear",n,0),month:t("getMonth",n,0),hours:t("getHours",n,0),minutes:t("getMinutes",n,0),seconds:t("getSeconds",n,0),milliseconds:t("getMilliseconds",n,0),time:t("getTime",n,0),timezoneoffset:t("getTimezoneOffset",n,0),utcdate:t("getUTCDate",n,0),utcday:t("getUTCDay",n,0),utcyear:t("getUTCFullYear",n,0),utcmonth:t("getUTCMonth",n,0),utchours:t("getUTCHours",n,0),utcminutes:t("getUTCMinutes",n,0),utcseconds:t("getUTCSeconds",n,0),utcmilliseconds:t("getUTCMilliseconds",n,0),length:t("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase",r,0),lower:t("toLowerCase",r,0),substring:t("substring",r),split:t("split",r),trim:t("trim",r,0),regexp:a,test:t("test",a),if:function(t){t.length<3&&bpe("Missing arguments to if function."),t.length>3&&bpe("Too many arguments to if function.");var n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}var fve,hve,dve,pve,vve,gve,mve,yve,bve,xve,wve,kve,_ve,Sve,Cve,Eve,Ave=new Nre,Nve=new Nre,Tve={point:Tre,lineStart:Tre,lineEnd:Tre,polygonStart:function(){Ave=new Nre,Tve.lineStart=Mve,Tve.lineEnd=Dve},polygonEnd:function(){var e=+Ave;Nve.add(e<0?IO+e:e),this.lineStart=this.lineEnd=this.point=Tre},sphere:function(){Nve.add(IO)}};function Mve(){Tve.point=Fve}function Dve(){Ive(fve,hve)}function Fve(e,t){Tve.point=Ive,fve=e,hve=t,dve=e*=RO,pve=LO(t=(t*=RO)/2+FO),vve=qO(t)}function Ive(e,t){var n=(e*=RO)-dve,r=n>=0?1:-1,a=r*n,i=LO(t=(t*=RO)/2+FO),o=qO(t),u=vve*o,s=pve*i+u*LO(a),c=u*r*qO(a);Ave.add(zO(c,s)),dve=e,pve=i,vve=o}var Ove,Rve,Zve,Bve,zve,Lve,Pve,jve,Uve,Wve,Vve,qve,Hve,Gve,Xve,Yve,Kve={point:$ve,lineStart:Jve,lineEnd:ege,polygonStart:function(){Kve.point=tge,Kve.lineStart=nge,Kve.lineEnd=rge,Sve=new Nre,Tve.polygonStart()},polygonEnd:function(){Tve.polygonEnd(),Kve.point=$ve,Kve.lineStart=Jve,Kve.lineEnd=ege,Ave<0?(gve=-(yve=180),mve=-(bve=90)):Sve>NO?bve=90:Sve<-1e-6&&(mve=-90),Eve[0]=gve,Eve[1]=yve},sphere:function(){gve=-(yve=180),mve=-(bve=90)}};function $ve(e,t){Cve.push(Eve=[gve=e,yve=e]),t<mve&&(mve=t),t>bve&&(bve=t)}function Qve(e,t){var n=zae([e*RO,t*RO]);if(_ve){var r=Pae(_ve,n),a=Pae([r[1],-r[0],0],r);Wae(a),a=Bae(a);var i,o=e-xve,u=o>0?1:-1,s=a[0]*OO*u,c=ZO(o)>180;c^(u*xve<s&&s<u*e)?(i=a[1]*OO)>bve&&(bve=i):c^(u*xve<(s=(s+360)%360-180)&&s<u*e)?(i=-a[1]*OO)<mve&&(mve=i):(t<mve&&(mve=t),t>bve&&(bve=t)),c?e<xve?age(gve,e)>age(gve,yve)&&(yve=e):age(e,yve)>age(gve,yve)&&(gve=e):yve>=gve?(e<gve&&(gve=e),e>yve&&(yve=e)):e>xve?age(gve,e)>age(gve,yve)&&(yve=e):age(e,yve)>age(gve,yve)&&(gve=e)}else Cve.push(Eve=[gve=e,yve=e]);t<mve&&(mve=t),t>bve&&(bve=t),_ve=n,xve=e}function Jve(){Kve.point=Qve}function ege(){Eve[0]=gve,Eve[1]=yve,Kve.point=$ve,_ve=null}function tge(e,t){if(_ve){var n=e-xve;Sve.add(ZO(n)>180?n+(n>0?360:-360):n)}else wve=e,kve=t;Tve.point(e,t),Qve(e,t)}function nge(){Tve.lineStart()}function rge(){tge(wve,kve),Tve.lineEnd(),ZO(Sve)>NO&&(gve=-(yve=180)),Eve[0]=gve,Eve[1]=yve,_ve=null}function age(e,t){return(t-=e)<0?t+360:t}function ige(e,t){return e[0]-t[0]}function oge(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var uge={sphere:Tre,point:sge,lineStart:lge,lineEnd:dge,polygonStart:function(){uge.lineStart=pge,uge.lineEnd=vge},polygonEnd:function(){uge.lineStart=lge,uge.lineEnd=dge}};function sge(e,t){e*=RO;var n=LO(t*=RO);cge(n*LO(e),n*qO(e),qO(t))}function cge(e,t,n){++Ove,Zve+=(e-Zve)/Ove,Bve+=(t-Bve)/Ove,zve+=(n-zve)/Ove}function lge(){uge.point=fge}function fge(e,t){e*=RO;var n=LO(t*=RO);Gve=n*LO(e),Xve=n*qO(e),Yve=qO(t),uge.point=hge,cge(Gve,Xve,Yve)}function hge(e,t){e*=RO;var n=LO(t*=RO),r=n*LO(e),a=n*qO(e),i=qO(t),o=zO(GO((o=Xve*i-Yve*a)*o+(o=Yve*r-Gve*i)*o+(o=Gve*a-Xve*r)*o),Gve*r+Xve*a+Yve*i);Rve+=o,Lve+=o*(Gve+(Gve=r)),Pve+=o*(Xve+(Xve=a)),jve+=o*(Yve+(Yve=i)),cge(Gve,Xve,Yve)}function dge(){uge.point=sge}function pge(){uge.point=gge}function vge(){mge(qve,Hve),uge.point=sge}function gge(e,t){qve=e,Hve=t,e*=RO,t*=RO,uge.point=mge;var n=LO(t);Gve=n*LO(e),Xve=n*qO(e),Yve=qO(t),cge(Gve,Xve,Yve)}function mge(e,t){e*=RO;var n=LO(t*=RO),r=n*LO(e),a=n*qO(e),i=qO(t),o=Xve*i-Yve*a,u=Yve*r-Gve*i,s=Gve*a-Xve*r,c=UO(o,u,s),l=KO(c),f=c&&-l/c;Uve.add(f*o),Wve.add(f*u),Vve.add(f*s),Rve+=l,Lve+=l*(Gve+(Gve=r)),Pve+=l*(Xve+(Xve=a)),jve+=l*(Yve+(Yve=i)),cge(Gve,Xve,Yve)}function yge(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function bge(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function xge(e){var t,n,r;function a(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<i){if(0!==t(r,r))return i;do{var o=a+i>>>1;n(e[o],r)<0?a=o+1:i=o}while(a<i)}return a}return 2!==e.length?(t=yge,n=function(t,n){return yge(e(t),n)},r=function(t,n){return e(t)-n}):(t=e===yge||e===bge?e:wge,n=e,r=e),{left:a,center:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,o=a(e,t,n,i-1);return o>n&&r(e[o-1],t)>-r(e[o],t)?o-1:o},right:function(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<i){if(0!==t(r,r))return i;do{var o=a+i>>>1;n(e[o],r)<=0?a=o+1:i=o}while(a<i)}return a}}}function wge(){return 0}var kge=xge(yge),_ge=kge.right,Sge=(kge.left,xge((function(e){return null===e?NaN:+e})).center,_ge),Cge=Math.sqrt(50),Ege=Math.sqrt(10),Age=Math.sqrt(2);function Nge(e,t,n){var r,a,i,o=(t-e)/Math.max(0,n),u=Math.floor(Math.log10(o)),s=o/Math.pow(10,u),c=s>=Cge?10:s>=Ege?5:s>=Age?2:1;return u<0?(i=Math.pow(10,-u)/c,(r=Math.round(e*i))/i<e&&++r,(a=Math.round(t*i))/i>t&&--a,i=-i):(i=Math.pow(10,u)*c,(r=Math.round(e/i))*i<e&&++r,(a=Math.round(t/i))*i>t&&--a),a<r&&.5<=n&&n<2?Nge(e,t,2*n):[r,a,i]}function Tge(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];var r=t<e,a=r?Nge(t,e,n):Nge(e,t,n),i=(0,gc.Z)(a,3),o=i[0],u=i[1],s=i[2];if(!(u>=o))return[];var c=u-o+1,l=new Array(c);if(r)if(s<0)for(var f=0;f<c;++f)l[f]=(u-f)/-s;else for(var h=0;h<c;++h)l[h]=(u-h)*s;else if(s<0)for(var d=0;d<c;++d)l[d]=(o+d)/-s;else for(var p=0;p<c;++p)l[p]=(o+p)*s;return l}function Mge(e,t,n){return Nge(e=+e,t=+t,n=+n)[2]}function Dge(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Fge(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ige(e){var t,n,r;function a(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<i){if(0!==t(r,r))return i;do{var o=a+i>>>1;n(e[o],r)<0?a=o+1:i=o}while(a<i)}return a}return 2!==e.length?(t=Dge,n=function(t,n){return Dge(e(t),n)},r=function(t,n){return e(t)-n}):(t=e===Dge||e===Fge?e:Oge,n=e,r=e),{left:a,center:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,o=a(e,t,n,i-1);return o>n&&r(e[o-1],t)>-r(e[o],t)?o-1:o},right:function(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<i){if(0!==t(r,r))return i;do{var o=a+i>>>1;n(e[o],r)<=0?a=o+1:i=o}while(a<i)}return a}}}function Oge(){return 0}function Rge(e){return null===e?NaN:+e}var Zge=Ige(Dge),Bge=Zge.right,zge=(Zge.left,Ige(Rge).center,Bge);function Lge(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Pge(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function jge(){}var Uge=.7,Wge=1.4285714285714286,Vge="\\s*([+-]?\\d+)\\s*",qge="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Hge="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Gge=/^#([0-9a-f]{3,8})$/,Xge=new RegExp("^rgb\\(".concat(Vge,",").concat(Vge,",").concat(Vge,"\\)$")),Yge=new RegExp("^rgb\\(".concat(Hge,",").concat(Hge,",").concat(Hge,"\\)$")),Kge=new RegExp("^rgba\\(".concat(Vge,",").concat(Vge,",").concat(Vge,",").concat(qge,"\\)$")),$ge=new RegExp("^rgba\\(".concat(Hge,",").concat(Hge,",").concat(Hge,",").concat(qge,"\\)$")),Qge=new RegExp("^hsl\\(".concat(qge,",").concat(Hge,",").concat(Hge,"\\)$")),Jge=new RegExp("^hsla\\(".concat(qge,",").concat(Hge,",").concat(Hge,",").concat(qge,"\\)$")),eme={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function tme(){return this.rgb().formatHex()}function nme(){return this.rgb().formatRgb()}function rme(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Gge.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?ame(t):3===n?new sme(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?ime(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?ime(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Xge.exec(e))?new sme(t[1],t[2],t[3],1):(t=Yge.exec(e))?new sme(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Kge.exec(e))?ime(t[1],t[2],t[3],t[4]):(t=$ge.exec(e))?ime(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Qge.exec(e))?pme(t[1],t[2]/100,t[3]/100,1):(t=Jge.exec(e))?pme(t[1],t[2]/100,t[3]/100,t[4]):eme.hasOwnProperty(e)?ame(eme[e]):"transparent"===e?new sme(NaN,NaN,NaN,0):null}function ame(e){return new sme(e>>16&255,e>>8&255,255&e,1)}function ime(e,t,n,r){return r<=0&&(e=t=n=NaN),new sme(e,t,n,r)}function ome(e){return e instanceof jge||(e=rme(e)),e?new sme((e=e.rgb()).r,e.g,e.b,e.opacity):new sme}function ume(e,t,n,r){return 1===arguments.length?ome(e):new sme(e,t,n,null==r?1:r)}function sme(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function cme(){return"#".concat(dme(this.r)).concat(dme(this.g)).concat(dme(this.b))}function lme(){var e=fme(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(hme(this.r),", ").concat(hme(this.g),", ").concat(hme(this.b)).concat(1===e?")":", ".concat(e,")"))}function fme(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function hme(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function dme(e){return((e=hme(e))<16?"0":"")+e.toString(16)}function pme(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new mme(e,t,n,r)}function vme(e){if(e instanceof mme)return new mme(e.h,e.s,e.l,e.opacity);if(e instanceof jge||(e=rme(e)),!e)return new mme;if(e instanceof mme)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,u=i-a,s=(i+a)/2;return u?(o=t===i?(n-r)/u+6*(n<r):n===i?(r-t)/u+2:(t-n)/u+4,u/=s<.5?i+a:2-i-a,o*=60):u=s>0&&s<1?0:o,new mme(o,u,s,e.opacity)}function gme(e,t,n,r){return 1===arguments.length?vme(e):new mme(e,t,n,null==r?1:r)}function mme(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function yme(e){return(e=(e||0)%360)<0?e+360:e}function bme(e){return Math.max(0,Math.min(1,e||0))}function xme(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function wme(e,t,n,r,a){var i=e*e,o=i*e;return((1-3*e+3*i-o)*t+(4-6*i+3*o)*n+(1+3*e+3*i-3*o)*r+o*a)/6}function kme(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[r],i=e[r+1],o=r>0?e[r-1]:2*a-i,u=r<t-1?e[r+2]:2*i-a;return wme((n-r/t)*t,o,a,i,u)}}function _me(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),a=e[(r+t-1)%t],i=e[r%t],o=e[(r+1)%t],u=e[(r+2)%t];return wme((n-r/t)*t,a,i,o,u)}}Lge(jge,rme,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:tme,formatHex:tme,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return vme(this).formatHsl()},formatRgb:nme,toString:nme}),Lge(sme,ume,Pge(jge,{brighter:function(e){return e=null==e?Wge:Math.pow(Wge,e),new sme(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Uge:Math.pow(Uge,e),new sme(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new sme(hme(this.r),hme(this.g),hme(this.b),fme(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cme,formatHex:cme,formatHex8:function(){return"#".concat(dme(this.r)).concat(dme(this.g)).concat(dme(this.b)).concat(dme(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:lme,toString:lme})),Lge(mme,gme,Pge(jge,{brighter:function(e){return e=null==e?Wge:Math.pow(Wge,e),new mme(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Uge:Math.pow(Uge,e),new mme(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new sme(xme(e>=240?e-240:e+120,a,r),xme(e,a,r),xme(e<120?e+240:e-120,a,r),this.opacity)},clamp:function(){return new mme(yme(this.h),bme(this.s),bme(this.l),fme(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=fme(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(yme(this.h),", ").concat(100*bme(this.s),"%, ").concat(100*bme(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));var Sme=function(e){return function(){return e}};function Cme(e,t){return function(n){return e+n*t}}function Eme(e,t){var n=t-e;return n?Cme(e,n>180||n<-180?n-360*Math.round(n/360):n):Sme(isNaN(e)?t:e)}function Ame(e){return 1===(e=+e)?Nme:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Sme(isNaN(t)?n:t)}}function Nme(e,t){var n=t-e;return n?Cme(e,n):Sme(isNaN(e)?t:e)}var Tme=function e(t){var n=Ame(t);function r(e,t){var r=n((e=ume(e)).r,(t=ume(t)).r),a=n(e.g,t.g),i=n(e.b,t.b),o=Nme(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=i(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function Mme(e){return function(t){var n,r,a=t.length,i=new Array(a),o=new Array(a),u=new Array(a);for(n=0;n<a;++n)r=ume(t[n]),i[n]=r.r||0,o[n]=r.g||0,u[n]=r.b||0;return i=e(i),o=e(o),u=e(u),r.opacity=1,function(e){return r.r=i(e),r.g=o(e),r.b=u(e),r+""}}}var Dme=Mme(kme),Fme=Mme(_me);function Ime(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,a=t.slice();return function(i){for(n=0;n<r;++n)a[n]=e[n]*(1-i)+t[n]*i;return a}}function Ome(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Rme(e,t){return(Ome(t)?Ime:Zme)(e,t)}function Zme(e,t){var n,r=t?t.length:0,a=e?Math.min(r,e.length):0,i=new Array(a),o=new Array(r);for(n=0;n<a;++n)i[n]=Wme(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<a;++n)o[n]=i[n](e);return o}}function Bme(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function zme(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Lme(e,t){var n,r={},a={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=Wme(e[n],t[n]):a[n]=t[n];return function(e){for(n in r)a[n]=r[n](e);return a}}var Pme=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jme=new RegExp(Pme.source,"g");function Ume(e,t){var n,r,a,i=Pme.lastIndex=jme.lastIndex=0,o=-1,u=[],s=[];for(e+="",t+="";(n=Pme.exec(e))&&(r=jme.exec(t));)(a=r.index)>i&&(a=t.slice(i,a),u[o]?u[o]+=a:u[++o]=a),(n=n[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,s.push({i:o,x:zme(n,r)})),i=jme.lastIndex;return i<t.length&&(a=t.slice(i),u[o]?u[o]+=a:u[++o]=a),u.length<2?s[0]?function(e){return function(t){return e(t)+""}}(s[0].x):function(e){return function(){return e}}(t):(t=s.length,function(e){for(var n,r=0;r<t;++r)u[(n=s[r]).i]=n.x(e);return u.join("")})}function Wme(e,t){var n,r=typeof t;return null==t||"boolean"===r?Sme(t):("number"===r?zme:"string"===r?(n=rme(t))?(t=n,Tme):Ume:t instanceof rme?Tme:t instanceof Date?Bme:Ome(t)?Ime:Array.isArray(t)?Zme:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?Lme:zme)(e,t)}function Vme(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function qme(e){return+e}var Hme=[0,1];function Gme(e){return e}function Xme(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function Yme(e,t,n){var r=e[0],a=e[1],i=t[0],o=t[1];return a<r?(r=Xme(a,r),i=n(o,i)):(r=Xme(r,a),i=n(i,o)),function(e){return i(r(e))}}function Kme(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=Xme(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(t){var n=zge(e,t,1,r)-1;return i[n](a[n](t))}}function $me(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Qme(){var e,t,n,r,a,i,o=Hme,u=Hme,s=Wme,c=Gme;function l(){var e=Math.min(o.length,u.length);return c!==Gme&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(o[0],o[e-1])),r=e>2?Kme:Yme,a=i=null,f}function f(t){return null==t||isNaN(t=+t)?n:(a||(a=r(o.map(e),u,s)))(e(c(t)))}return f.invert=function(n){return c(t((i||(i=r(u,o.map(e),zme)))(n)))},f.domain=function(e){return arguments.length?(o=Array.from(e,qme),l()):o.slice()},f.range=function(e){return arguments.length?(u=Array.from(e),l()):u.slice()},f.rangeRound=function(e){return u=Array.from(e),s=Vme,l()},f.clamp=function(e){return arguments.length?(c=!!e||Gme,l()):c!==Gme},f.interpolate=function(e){return arguments.length?(s=e,l()):s},f.unknown=function(e){return arguments.length?(n=e,f):n},function(n,r){return e=n,t=r,l()}}function Jme(){return Qme()(Gme,Gme)}function eye(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function tye(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}var nye,rye=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function aye(e){if(!(t=rye.exec(e)))throw new Error("invalid format: "+e);var t;return new iye({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function iye(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function oye(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function uye(e){return(e=oye(Math.abs(e)))?e[1]:NaN}function sye(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(uye(t)/3)))-uye(Math.abs(e)))}function cye(e,t){var n=oye(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}aye.prototype=iye.prototype,iye.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var lye={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return cye(100*e,t)},r:cye,s:function(e,t){var n=oye(e,t);if(!n)return e+"";var r=n[0],a=n[1],i=a-(nye=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+oye(e,Math.max(0,t+i-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function fye(e){return e}var hye,dye,pye,vye=Array.prototype.map,gye=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function mye(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?fye:(t=vye.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var a=e.length,i=[],o=0,u=t[0],s=0;a>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),i.push(e.substring(a-=u,a+u)),!((s+=u+1)>r));)u=t[o=(o+1)%t.length];return i.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",u=void 0===e.numerals?fye:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(vye.call(e.numerals,String)),s=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",l=void 0===e.nan?"NaN":e.nan+"";function f(e){var t=(e=aye(e)).fill,n=e.align,f=e.sign,h=e.symbol,d=e.zero,p=e.width,v=e.comma,g=e.precision,m=e.trim,y=e.type;"n"===y?(v=!0,y="g"):lye[y]||(void 0===g&&(g=12),m=!0,y="g"),(d||"0"===t&&"="===n)&&(d=!0,t="0",n="=");var b="$"===h?a:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===h?i:/[%p]/.test(y)?s:"",w=lye[y],k=/[defgprs%]/.test(y);function _(e){var a,i,s,h=b,_=x;if("c"===y)_=w(e)+_,e="";else{var S=(e=+e)<0||1/e<0;if(e=isNaN(e)?l:w(Math.abs(e),g),m&&(e=function(e){e:for(var t,n=e.length,r=1,a=-1;r<n;++r)switch(e[r]){case".":a=t=r;break;case"0":0===a&&(a=r),t=r;break;default:if(!+e[r])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),S&&0===+e&&"+"!==f&&(S=!1),h=(S?"("===f?f:c:"-"===f||"("===f?"":f)+h,_=("s"===y?gye[8+nye/3]:"")+_+(S&&"("===f?")":""),k)for(a=-1,i=e.length;++a<i;)if(48>(s=e.charCodeAt(a))||s>57){_=(46===s?o+e.slice(a+1):e.slice(a))+_,e=e.slice(0,a);break}}v&&!d&&(e=r(e,1/0));var C=h.length+e.length+_.length,E=C<p?new Array(p-C+1).join(t):"";switch(v&&d&&(e=r(E+e,E.length?p-_.length:1/0),E=""),n){case"<":e=h+e+_+E;break;case"=":e=h+E+e+_;break;case"^":e=E.slice(0,C=E.length>>1)+h+e+_+E.slice(C);break;default:e=E+h+e+_}return u(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),_.toString=function(){return e+""},_}return{format:f,formatPrefix:function(e,t){var n=f(((e=aye(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(uye(t)/3))),a=Math.pow(10,-r),i=gye[8+r/3];return function(e){return n(a*e)+i}}}}function yye(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,uye(t)-uye(e))+1}function bye(e){return Math.max(0,-uye(Math.abs(e)))}function xye(e,t,n,r){var a,i=function(e,t,n){n=+n;var r=(t=+t)<(e=+e),a=r?Mge(t,e,n):Mge(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}(e,t,n);switch((r=aye(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(a=sye(i,o))||(r.precision=a),pye(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(a=yye(i,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=a-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(a=bye(i))||(r.precision=a-2*("%"===r.type))}return dye(r)}function wye(e){var t=e.domain;return e.ticks=function(e){var n=t();return Tge(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return xye(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,a,i=t(),o=0,u=i.length-1,s=i[o],c=i[u],l=10;for(c<s&&(a=s,s=c,c=a,a=o,o=u,u=a);l-- >0;){if((a=Mge(s,c,n))===r)return i[o]=s,i[u]=c,t(i);if(a>0)s=Math.floor(s/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;s=Math.ceil(s*a)/a,c=Math.floor(c*a)/a}r=a}return e},e}function kye(e,t){var n,r=0,a=(e=e.slice()).length-1,i=e[r],o=e[a];return o<i&&(n=r,r=a,a=n,n=i,i=o,o=n),e[r]=t.floor(i),e[a]=t.ceil(o),e}function _ye(e){return Math.log(e)}function Sye(e){return Math.exp(e)}function Cye(e){return-Math.log(-e)}function Eye(e){return-Math.exp(-e)}function Aye(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Nye(e){return function(t,n){return-e(-t,n)}}function Tye(e){var t,n,r=e(_ye,Sye),a=r.domain,i=10;function o(){return t=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}(i),n=function(e){return 10===e?Aye:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(i),a()[0]<0?(t=Nye(t),n=Nye(n),e(Cye,Eye)):e(_ye,Sye),r}return r.base=function(e){return arguments.length?(i=+e,o()):i},r.domain=function(e){return arguments.length?(a(e),o()):a()},r.ticks=function(e){var r=a(),o=r[0],u=r[r.length-1],s=u<o;if(s){var c=[u,o];o=c[0],u=c[1]}var l,f,h=t(o),d=t(u),p=null==e?10:+e,v=[];if(!(i%1)&&d-h<p){if(h=Math.floor(h),d=Math.ceil(d),o>0){for(;h<=d;++h)for(l=1;l<i;++l)if(!((f=h<0?l/n(-h):l*n(h))<o)){if(f>u)break;v.push(f)}}else for(;h<=d;++h)for(l=i-1;l>=1;--l)if(!((f=h>0?l/n(-h):l*n(h))<o)){if(f>u)break;v.push(f)}2*v.length<p&&(v=Tge(o,u,p))}else v=Tge(h,d,Math.min(d-h,p)).map(n);return s?v.reverse():v},r.tickFormat=function(e,a){if(null==e&&(e=10),null==a&&(a=10===i?"s":","),"function"!==typeof a&&(i%1||null!=(a=aye(a)).precision||(a.trim=!0),a=dye(a)),e===1/0)return a;var o=Math.max(1,i*e/r.ticks().length);return function(e){var r=e/n(Math.round(t(e)));return r*i<i-.5&&(r*=i),r<=o?a(e):""}},r.nice=function(){return a(kye(a(),{floor:function(e){return n(Math.floor(t(e)))},ceil:function(e){return n(Math.ceil(t(e)))}}))},r}function Mye(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Dye(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Fye(e){return e<0?-e*e:e*e}function Iye(e){var t=e(Gme,Gme),n=1;function r(){return 1===n?e(Gme,Gme):.5===n?e(Dye,Fye):e(Mye(n),Mye(1/n))}return t.exponent=function(e){return arguments.length?(n=+e,r()):n},wye(t)}function Oye(){var e=Iye(Qme());return e.copy=function(){return $me(e,Oye()).exponent(e.exponent())},eye.apply(e,arguments),e}function Rye(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Zye(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Bye(e){var t=1,n=e(Rye(t),Zye(t));return n.constant=function(n){return arguments.length?e(Rye(t=+n),Zye(t)):t},wye(n)}function zye(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Lye(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Pye(){return 0}!function(e){hye=mye(e),dye=hye.format,pye=hye.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});var jye=Math.sqrt(50),Uye=Math.sqrt(10),Wye=Math.sqrt(2);function Vye(e,t,n){var r,a,i,o=(t-e)/Math.max(0,n),u=Math.floor(Math.log10(o)),s=o/Math.pow(10,u),c=s>=jye?10:s>=Uye?5:s>=Wye?2:1;return u<0?(i=Math.pow(10,-u)/c,(r=Math.round(e*i))/i<e&&++r,(a=Math.round(t*i))/i>t&&--a,i=-i):(i=Math.pow(10,u)*c,(r=Math.round(e/i))*i<e&&++r,(a=Math.round(t/i))*i>t&&--a),a<r&&.5<=n&&n<2?Vye(e,t,2*n):[r,a,i]}function qye(e,t,n){return Vye(e=+e,t=+t,n=+n)[2]}function Hye(e,t,n){n=+n;var r=(t=+t)<(e=+e),a=r?qye(t,e,n):qye(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}var Gye=1e3,Xye=6e4,Yye=36e5,Kye=864e5,$ye=6048e5,Qye=2592e6,Jye=31536e6,ebe=new Date,tbe=new Date;function nbe(e,t,n,r){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=function(t){return e(t=new Date(+t)),t},a.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},a.round=function(e){var t=a(e),n=a.ceil(e);return e-t<n-e?t:n},a.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},a.range=function(n,r,i){var o,u=[];if(n=a.ceil(n),i=null==i?1:Math.floor(i),!(n<r)||!(i>0))return u;do{u.push(o=new Date(+n)),t(n,i),e(n)}while(o<n&&n<r);return u},a.filter=function(n){return nbe((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(a.count=function(t,r){return ebe.setTime(+t),tbe.setTime(+r),e(ebe),e(tbe),Math.floor(n(ebe,tbe))},a.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(r?function(t){return r(t)%e===0}:function(t){return a.count(0,t)%e===0}):a:null}),a}var rbe=nbe((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));rbe.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?nbe((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):rbe:null};rbe.range;var abe=nbe((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*Gye)}),(function(e,t){return(t-e)/Gye}),(function(e){return e.getUTCSeconds()})),ibe=(abe.range,nbe((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Gye)}),(function(e,t){e.setTime(+e+t*Xye)}),(function(e,t){return(t-e)/Xye}),(function(e){return e.getMinutes()}))),obe=(ibe.range,nbe((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*Xye)}),(function(e,t){return(t-e)/Xye}),(function(e){return e.getUTCMinutes()}))),ube=(obe.range,nbe((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Gye-e.getMinutes()*Xye)}),(function(e,t){e.setTime(+e+t*Yye)}),(function(e,t){return(t-e)/Yye}),(function(e){return e.getHours()}))),sbe=(ube.range,nbe((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*Yye)}),(function(e,t){return(t-e)/Yye}),(function(e){return e.getUTCHours()}))),cbe=(sbe.range,nbe((function(e){return e.setHours(0,0,0,0)}),(function(e,t){return e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Xye)/Kye}),(function(e){return e.getDate()-1}))),lbe=(cbe.range,nbe((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/Kye}),(function(e){return e.getUTCDate()-1}))),fbe=(lbe.range,nbe((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/Kye}),(function(e){return Math.floor(e/Kye)})));fbe.range;function hbe(e){return nbe((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Xye)/$ye}))}var dbe=hbe(0),pbe=hbe(1),vbe=hbe(2),gbe=hbe(3),mbe=hbe(4),ybe=hbe(5),bbe=hbe(6);dbe.range,pbe.range,vbe.range,gbe.range,mbe.range,ybe.range,bbe.range;function xbe(e){return nbe((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/$ye}))}var wbe=xbe(0),kbe=xbe(1),_be=xbe(2),Sbe=xbe(3),Cbe=xbe(4),Ebe=xbe(5),Abe=xbe(6),Nbe=(wbe.range,kbe.range,_be.range,Sbe.range,Cbe.range,Ebe.range,Abe.range,nbe((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}))),Tbe=(Nbe.range,nbe((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()}))),Mbe=(Tbe.range,nbe((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()})));Mbe.every=function(e){return isFinite(e=Math.floor(e))&&e>0?nbe((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};Mbe.range;var Dbe=nbe((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));Dbe.every=function(e){return isFinite(e=Math.floor(e))&&e>0?nbe((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};Dbe.range;function Fbe(e,t,n,r,a,i){var o=[[abe,1,Gye],[abe,5,5e3],[abe,15,15e3],[abe,30,3e4],[i,1,Xye],[i,5,3e5],[i,15,9e5],[i,30,18e5],[a,1,Yye],[a,3,108e5],[a,6,216e5],[a,12,432e5],[r,1,Kye],[r,2,1728e5],[n,1,$ye],[t,1,Qye],[t,3,7776e6],[e,1,Jye]];function u(t,n,r){var a=Math.abs(n-t)/r,i=function(e){var t,n,r;function a(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<i){if(0!==t(r,r))return i;do{var o=a+i>>>1;n(e[o],r)<0?a=o+1:i=o}while(a<i)}return a}return 2!==e.length?(t=zye,n=function(t,n){return zye(e(t),n)},r=function(t,n){return e(t)-n}):(t=e===zye||e===Lye?e:Pye,n=e,r=e),{left:a,center:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=a(e,t,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return i>n&&r(e[i-1],t)>-r(e[i],t)?i-1:i},right:function(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<i){if(0!==t(r,r))return i;do{var o=a+i>>>1;n(e[o],r)<=0?a=o+1:i=o}while(a<i)}return a}}}((function(e){return(0,gc.Z)(e,3)[2]})).right(o,a);if(i===o.length)return e.every(Hye(t/Jye,n/Jye,r));if(0===i)return rbe.every(Math.max(Hye(t,n,r),1));var u=(0,gc.Z)(o[a/o[i-1][2]<o[i][2]/a?i-1:i],2),s=u[0],c=u[1];return s.every(c)}return[function(e,t,n){var r=t<e;if(r){var a=[t,e];e=a[0],t=a[1]}var i=n&&"function"===typeof n.range?n:u(e,t,n),o=i?i.range(e,+t+1):[];return r?o.reverse():o},u]}var Ibe=Fbe(Dbe,Tbe,wbe,fbe,sbe,obe),Obe=(0,gc.Z)(Ibe,2),Rbe=Obe[0],Zbe=Obe[1],Bbe=Fbe(Mbe,Nbe,dbe,cbe,ube,ibe),zbe=(0,gc.Z)(Bbe,2),Lbe=zbe[0],Pbe=zbe[1];function jbe(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ube(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Wbe(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var Vbe,qbe,Hbe,Gbe,Xbe,Ybe={"-":"",_:" ",0:"0"},Kbe=/^\s*\d+/,$be=/^%/,Qbe=/[\\^$*+?|[\]().{}]/g;function Jbe(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function exe(e){return e.replace(Qbe,"\\$&")}function txe(e){return new RegExp("^(?:"+e.map(exe).join("|")+")","i")}function nxe(e){return new Map(e.map((function(e,t){return[e.toLowerCase(),t]})))}function rxe(e,t,n){var r=Kbe.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function axe(e,t,n){var r=Kbe.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function ixe(e,t,n){var r=Kbe.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function oxe(e,t,n){var r=Kbe.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function uxe(e,t,n){var r=Kbe.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function sxe(e,t,n){var r=Kbe.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function cxe(e,t,n){var r=Kbe.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function lxe(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function fxe(e,t,n){var r=Kbe.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function hxe(e,t,n){var r=Kbe.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function dxe(e,t,n){var r=Kbe.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function pxe(e,t,n){var r=Kbe.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function vxe(e,t,n){var r=Kbe.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function gxe(e,t,n){var r=Kbe.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function mxe(e,t,n){var r=Kbe.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function yxe(e,t,n){var r=Kbe.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function bxe(e,t,n){var r=Kbe.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function xxe(e,t,n){var r=$be.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function wxe(e,t,n){var r=Kbe.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function kxe(e,t,n){var r=Kbe.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function _xe(e,t){return Jbe(e.getDate(),t,2)}function Sxe(e,t){return Jbe(e.getHours(),t,2)}function Cxe(e,t){return Jbe(e.getHours()%12||12,t,2)}function Exe(e,t){return Jbe(1+cbe.count(Mbe(e),e),t,3)}function Axe(e,t){return Jbe(e.getMilliseconds(),t,3)}function Nxe(e,t){return Axe(e,t)+"000"}function Txe(e,t){return Jbe(e.getMonth()+1,t,2)}function Mxe(e,t){return Jbe(e.getMinutes(),t,2)}function Dxe(e,t){return Jbe(e.getSeconds(),t,2)}function Fxe(e){var t=e.getDay();return 0===t?7:t}function Ixe(e,t){return Jbe(dbe.count(Mbe(e)-1,e),t,2)}function Oxe(e){var t=e.getDay();return t>=4||0===t?mbe(e):mbe.ceil(e)}function Rxe(e,t){return e=Oxe(e),Jbe(mbe.count(Mbe(e),e)+(4===Mbe(e).getDay()),t,2)}function Zxe(e){return e.getDay()}function Bxe(e,t){return Jbe(pbe.count(Mbe(e)-1,e),t,2)}function zxe(e,t){return Jbe(e.getFullYear()%100,t,2)}function Lxe(e,t){return Jbe((e=Oxe(e)).getFullYear()%100,t,2)}function Pxe(e,t){return Jbe(e.getFullYear()%1e4,t,4)}function jxe(e,t){var n=e.getDay();return Jbe((e=n>=4||0===n?mbe(e):mbe.ceil(e)).getFullYear()%1e4,t,4)}function Uxe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Jbe(t/60|0,"0",2)+Jbe(t%60,"0",2)}function Wxe(e,t){return Jbe(e.getUTCDate(),t,2)}function Vxe(e,t){return Jbe(e.getUTCHours(),t,2)}function qxe(e,t){return Jbe(e.getUTCHours()%12||12,t,2)}function Hxe(e,t){return Jbe(1+lbe.count(Dbe(e),e),t,3)}function Gxe(e,t){return Jbe(e.getUTCMilliseconds(),t,3)}function Xxe(e,t){return Gxe(e,t)+"000"}function Yxe(e,t){return Jbe(e.getUTCMonth()+1,t,2)}function Kxe(e,t){return Jbe(e.getUTCMinutes(),t,2)}function $xe(e,t){return Jbe(e.getUTCSeconds(),t,2)}function Qxe(e){var t=e.getUTCDay();return 0===t?7:t}function Jxe(e,t){return Jbe(wbe.count(Dbe(e)-1,e),t,2)}function ewe(e){var t=e.getUTCDay();return t>=4||0===t?Cbe(e):Cbe.ceil(e)}function twe(e,t){return e=ewe(e),Jbe(Cbe.count(Dbe(e),e)+(4===Dbe(e).getUTCDay()),t,2)}function nwe(e){return e.getUTCDay()}function rwe(e,t){return Jbe(kbe.count(Dbe(e)-1,e),t,2)}function awe(e,t){return Jbe(e.getUTCFullYear()%100,t,2)}function iwe(e,t){return Jbe((e=ewe(e)).getUTCFullYear()%100,t,2)}function owe(e,t){return Jbe(e.getUTCFullYear()%1e4,t,4)}function uwe(e,t){var n=e.getUTCDay();return Jbe((e=n>=4||0===n?Cbe(e):Cbe.ceil(e)).getUTCFullYear()%1e4,t,4)}function swe(){return"+0000"}function cwe(){return"%"}function lwe(e){return+e}function fwe(e){return Math.floor(+e/1e3)}function hwe(e){return new Date(e)}function dwe(e){return e instanceof Date?+e:+new Date(+e)}function pwe(e,t,n,r,a,i,o,u,s,c){var l=Jme(),f=l.invert,h=l.domain,d=c(".%L"),p=c(":%S"),v=c("%I:%M"),g=c("%I %p"),m=c("%a %d"),y=c("%b %d"),b=c("%B"),x=c("%Y");function w(e){return(s(e)<e?d:u(e)<e?p:o(e)<e?v:i(e)<e?g:r(e)<e?a(e)<e?m:y:n(e)<e?b:x)(e)}return l.invert=function(e){return new Date(f(e))},l.domain=function(e){return arguments.length?h(Array.from(e,dwe)):h().map(hwe)},l.ticks=function(t){var n=h();return e(n[0],n[n.length-1],null==t?10:t)},l.tickFormat=function(e,t){return null==t?w:c(t)},l.nice=function(e){var n=h();return e&&"function"===typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?h(kye(n,e)):l},l.copy=function(){return $me(l,pwe(e,t,n,r,a,i,o,u,s,c))},l}function vwe(){var e,t,n,r,a,i=0,o=1,u=Gme,s=!1;function c(t){return null==t||isNaN(t=+t)?a:u(0===n?.5:(t=(r(t)-e)*n,s?Math.max(0,Math.min(1,t)):t))}function l(e){return function(t){var n,r,a,i;return arguments.length?(n=t,a=(r=(0,gc.Z)(n,2))[0],i=r[1],u=e(a,i),c):[u(0),u(1)]}}return c.domain=function(a){var u,s;return arguments.length?(u=a,s=(0,gc.Z)(u,2),i=s[0],o=s[1],e=r(i=+i),t=r(o=+o),n=e===t?0:1/(t-e),c):[i,o]},c.clamp=function(e){return arguments.length?(s=!!e,c):s},c.interpolator=function(e){return arguments.length?(u=e,c):u},c.range=l(Wme),c.rangeRound=l(Vme),c.unknown=function(e){return arguments.length?(a=e,c):a},function(a){return r=a,e=a(i),t=a(o),n=e===t?0:1/(t-e),c}}function gwe(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function mwe(){var e=wye(vwe()(Gme));return e.copy=function(){return gwe(e,mwe())},tye.apply(e,arguments)}function ywe(){var e=Iye(vwe());return e.copy=function(){return gwe(e,ywe()).exponent(e.exponent())},tye.apply(e,arguments)}function bwe(e,t){void 0===t&&(t=e,e=Wme);for(var n=0,r=t.length-1,a=t[0],i=new Array(r<0?0:r);n<r;)i[n]=e(a,a=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return i[t](e-t)}}function xwe(){var e,t,n,r,a,i,o,u=0,s=.5,c=1,l=1,f=Gme,h=!1;function d(e){return isNaN(e=+e)?o:(e=.5+((e=+i(e))-t)*(l*e<l*t?r:a),f(h?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var n,r,a,i,o;return arguments.length?(n=t,a=(r=(0,gc.Z)(n,3))[0],i=r[1],o=r[2],f=bwe(e,[a,i,o]),d):[f(0),f(.5),f(1)]}}return d.domain=function(o){var f,h;return arguments.length?(f=o,h=(0,gc.Z)(f,3),u=h[0],s=h[1],c=h[2],e=i(u=+u),t=i(s=+s),n=i(c=+c),r=e===t?0:.5/(t-e),a=t===n?0:.5/(n-t),l=t<e?-1:1,d):[u,s,c]},d.clamp=function(e){return arguments.length?(h=!!e,d):h},d.interpolator=function(e){return arguments.length?(f=e,d):f},d.range=p(Wme),d.rangeRound=p(Vme),d.unknown=function(e){return arguments.length?(o=e,d):o},function(o){return i=o,e=o(u),t=o(s),n=o(c),r=e===t?0:.5/(t-e),a=t===n?0:.5/(n-t),l=t<e?-1:1,d}}function wwe(){var e=Iye(xwe());return e.copy=function(){return gwe(e,wwe()).exponent(e.exponent())},tye.apply(e,arguments)}function kwe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Rge;if((r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,i=Math.floor(a),o=+n(e[i],i,e),u=+n(e[i+1],i+1,e);return o+(u-o)*(a-i)}}!function(e){Vbe=function(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,i=e.days,o=e.shortDays,u=e.months,s=e.shortMonths,c=txe(a),l=nxe(a),f=txe(i),h=nxe(i),d=txe(o),p=nxe(o),v=txe(u),g=nxe(u),m=txe(s),y=nxe(s),b={a:function(e){return o[e.getDay()]},A:function(e){return i[e.getDay()]},b:function(e){return s[e.getMonth()]},B:function(e){return u[e.getMonth()]},c:null,d:_xe,e:_xe,f:Nxe,g:Lxe,G:jxe,H:Sxe,I:Cxe,j:Exe,L:Axe,m:Txe,M:Mxe,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:lwe,s:fwe,S:Dxe,u:Fxe,U:Ixe,V:Rxe,w:Zxe,W:Bxe,x:null,X:null,y:zxe,Y:Pxe,Z:Uxe,"%":cwe},x={a:function(e){return o[e.getUTCDay()]},A:function(e){return i[e.getUTCDay()]},b:function(e){return s[e.getUTCMonth()]},B:function(e){return u[e.getUTCMonth()]},c:null,d:Wxe,e:Wxe,f:Xxe,g:iwe,G:uwe,H:Vxe,I:qxe,j:Hxe,L:Gxe,m:Yxe,M:Kxe,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:lwe,s:fwe,S:$xe,u:Qxe,U:Jxe,V:twe,w:nwe,W:rwe,x:null,X:null,y:awe,Y:owe,Z:swe,"%":cwe},w={a:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return S(e,t,n,r)},d:dxe,e:dxe,f:bxe,g:cxe,G:sxe,H:vxe,I:vxe,j:pxe,L:yxe,m:hxe,M:gxe,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=l.get(r[0].toLowerCase()),n+r[0].length):-1},q:fxe,Q:wxe,s:kxe,S:mxe,u:axe,U:ixe,V:oxe,w:rxe,W:uxe,x:function(e,t,r){return S(e,n,t,r)},X:function(e,t,n){return S(e,r,t,n)},y:cxe,Y:sxe,Z:lxe,"%":xxe};function k(e,t){return function(n){var r,a,i,o=[],u=-1,s=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++u<c;)37===e.charCodeAt(u)&&(o.push(e.slice(s,u)),null!=(a=Ybe[r=e.charAt(++u)])?r=e.charAt(++u):a="e"===r?" ":"0",(i=t[r])&&(r=i(n,a)),o.push(r),s=u+1);return o.push(e.slice(s,u)),o.join("")}}function _(e,t){return function(n){var r,a,i=Wbe(1900,void 0,1);if(S(i,e,n+="",0)!=n.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(t&&!("Z"in i)&&(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||i.V>53)return null;"w"in i||(i.w=1),"Z"in i?(a=(r=Ube(Wbe(i.y,0,1))).getUTCDay(),r=a>4||0===a?kbe.ceil(r):kbe(r),r=lbe.offset(r,7*(i.V-1)),i.y=r.getUTCFullYear(),i.m=r.getUTCMonth(),i.d=r.getUTCDate()+(i.w+6)%7):(a=(r=jbe(Wbe(i.y,0,1))).getDay(),r=a>4||0===a?pbe.ceil(r):pbe(r),r=cbe.offset(r,7*(i.V-1)),i.y=r.getFullYear(),i.m=r.getMonth(),i.d=r.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),a="Z"in i?Ube(Wbe(i.y,0,1)).getUTCDay():jbe(Wbe(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(a+5)%7:i.w+7*i.U-(a+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,Ube(i)):jbe(i)}}function S(e,t,n,r){for(var a,i,o=0,u=t.length,s=n.length;o<u;){if(r>=s)return-1;if(37===(a=t.charCodeAt(o++))){if(a=t.charAt(o++),!(i=w[a in Ybe?t.charAt(o++):a])||(r=i(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}return b.x=k(n,b),b.X=k(r,b),b.c=k(t,b),x.x=k(n,x),x.X=k(r,x),x.c=k(t,x),{format:function(e){var t=k(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=_(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=k(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=_(e+="",!0);return t.toString=function(){return e},t}}}(e),qbe=Vbe.format,Hbe=Vbe.parse,Gbe=Vbe.utcFormat,Xbe=Vbe.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var _we=Symbol("implicit");function Swe(){var e=new q0,t=[],n=[],r=_we;function a(a){var i=e.get(a);if(void 0===i){if(r!==_we)return r;e.set(a,i=t.push(a)-1)}return n[i%n.length]}return a.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new q0;var r,i=(0,zt.Z)(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;e.has(o)||e.set(o,t.push(o)-1)}}catch(u){i.e(u)}finally{i.f()}return a},a.range=function(e){return arguments.length?(n=Array.from(e),a):n.slice()},a.unknown=function(e){return arguments.length?(r=e,a):r},a.copy=function(){return Swe(t,n).unknown(r)},eye.apply(a,arguments),a}function Cwe(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Ewe(e,t){var n=Eme(+e,+t);return function(e){var t=n(e);return t-360*Math.floor(t/360)}}var Awe,Nwe=180/Math.PI,Twe={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Mwe(e,t,n,r,a,i){var o,u,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:a,translateY:i,rotate:Math.atan2(t,e)*Nwe,skewX:Math.atan(s)*Nwe,scaleX:o,scaleY:u}}function Dwe(e,t,n,r){function a(e){return e.length?e.pop()+" ":""}return function(i,o){var u=[],s=[];return i=e(i),o=e(o),function(e,r,a,i,o,u){if(e!==a||r!==i){var s=o.push("translate(",null,t,null,n);u.push({i:s-4,x:zme(e,a)},{i:s-2,x:zme(r,i)})}else(a||i)&&o.push("translate("+a+t+i+n)}(i.translateX,i.translateY,o.translateX,o.translateY,u,s),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(a(n)+"rotate(",null,r)-2,x:zme(e,t)})):t&&n.push(a(n)+"rotate("+t+r)}(i.rotate,o.rotate,u,s),function(e,t,n,i){e!==t?i.push({i:n.push(a(n)+"skewX(",null,r)-2,x:zme(e,t)}):t&&n.push(a(n)+"skewX("+t+r)}(i.skewX,o.skewX,u,s),function(e,t,n,r,i,o){if(e!==n||t!==r){var u=i.push(a(i)+"scale(",null,",",null,")");o.push({i:u-4,x:zme(e,n)},{i:u-2,x:zme(t,r)})}else 1===n&&1===r||i.push(a(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,o.scaleX,o.scaleY,u,s),i=o=null,function(e){for(var t,n=-1,r=s.length;++n<r;)u[(t=s[n]).i]=t.x(e);return u.join("")}}}var Fwe=Dwe((function(e){var t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Twe:Mwe(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Iwe=Dwe((function(e){return null==e?Twe:(Awe||(Awe=document.createElementNS("http://www.w3.org/2000/svg","g")),Awe.setAttribute("transform",e),(e=Awe.transform.baseVal.consolidate())?Mwe((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Twe)}),", ",")",")");function Owe(e){return((e=Math.exp(e))+1/e)/2}var Rwe=function e(t,n,r){function a(e,a){var i,o,u=e[0],s=e[1],c=e[2],l=a[0],f=a[1],h=a[2],d=l-u,p=f-s,v=d*d+p*p;if(v<1e-12)o=Math.log(h/c)/t,i=function(e){return[u+e*d,s+e*p,c*Math.exp(t*e*o)]};else{var g=Math.sqrt(v),m=(h*h-c*c+r*v)/(2*c*n*g),y=(h*h-c*c-r*v)/(2*h*n*g),b=Math.log(Math.sqrt(m*m+1)-m),x=Math.log(Math.sqrt(y*y+1)-y);o=(x-b)/t,i=function(e){var r=e*o,a=Owe(b),i=c/(n*g)*(a*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(t*r+b)-function(e){return((e=Math.exp(e))-1/e)/2}(b));return[u+i*d,s+i*p,c*a/Owe(t*r+b)]}}return i.duration=1e3*o*t/Math.SQRT2,i}return a.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},a}(Math.SQRT2,2,4);function Zwe(e){return function(t,n){var r=e((t=gme(t)).h,(n=gme(n)).h),a=Nme(t.s,n.s),i=Nme(t.l,n.l),o=Nme(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=a(e),t.l=i(e),t.opacity=o(e),t+""}}}var Bwe=Zwe(Eme),zwe=Zwe(Nme),Lwe=Math.PI/180,Pwe=180/Math.PI,jwe=.96422,Uwe=.82521,Wwe=4/29,Vwe=6/29,qwe=.12841854934601665;function Hwe(e){if(e instanceof Xwe)return new Xwe(e.l,e.a,e.b,e.opacity);if(e instanceof tke)return nke(e);e instanceof sme||(e=ome(e));var t,n,r=Qwe(e.r),a=Qwe(e.g),i=Qwe(e.b),o=Ywe((.2225045*r+.7168786*a+.0606169*i)/1);return r===a&&a===i?t=n=o:(t=Ywe((.4360747*r+.3850649*a+.1430804*i)/jwe),n=Ywe((.0139322*r+.0971045*a+.7141733*i)/Uwe)),new Xwe(116*o-16,500*(t-o),200*(o-n),e.opacity)}function Gwe(e,t,n,r){return 1===arguments.length?Hwe(e):new Xwe(e,t,n,null==r?1:r)}function Xwe(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function Ywe(e){return e>.008856451679035631?Math.pow(e,1/3):e/qwe+Wwe}function Kwe(e){return e>Vwe?e*e*e:qwe*(e-Wwe)}function $we(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Qwe(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Jwe(e){if(e instanceof tke)return new tke(e.h,e.c,e.l,e.opacity);if(e instanceof Xwe||(e=Hwe(e)),0===e.a&&0===e.b)return new tke(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Pwe;return new tke(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function eke(e,t,n,r){return 1===arguments.length?Jwe(e):new tke(e,t,n,null==r?1:r)}function tke(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function nke(e){if(isNaN(e.h))return new Xwe(e.l,0,0,e.opacity);var t=e.h*Lwe;return new Xwe(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}function rke(e,t){var n=Nme((e=Gwe(e)).l,(t=Gwe(t)).l),r=Nme(e.a,t.a),a=Nme(e.b,t.b),i=Nme(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=a(t),e.opacity=i(t),e+""}}function ake(e){return function(t,n){var r=e((t=eke(t)).h,(n=eke(n)).h),a=Nme(t.c,n.c),i=Nme(t.l,n.l),o=Nme(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=a(e),t.l=i(e),t.opacity=o(e),t+""}}}Lge(Xwe,Gwe,Pge(jge,{brighter:function(e){return new Xwe(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new Xwe(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new sme($we(3.1338561*(t=jwe*Kwe(t))-1.6168667*(e=1*Kwe(e))-.4906146*(n=Uwe*Kwe(n))),$we(-.9787684*t+1.9161415*e+.033454*n),$we(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),Lge(tke,eke,Pge(jge,{brighter:function(e){return new tke(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new tke(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return nke(this).rgb()}}));var ike=ake(Eme),oke=ake(Nme),uke=-.14861,ske=1.78277,cke=-.29227,lke=-.90649,fke=1.97294,hke=-1.7884503806,dke=3.5172982438,pke=-.6557636667999999;function vke(e){if(e instanceof mke)return new mke(e.h,e.s,e.l,e.opacity);e instanceof sme||(e=ome(e));var t=e.r/255,n=e.g/255,r=e.b/255,a=(pke*r+hke*t-dke*n)/-5.9615122912,i=r-a,o=(fke*(n-a)-cke*i)/lke,u=Math.sqrt(o*o+i*i)/(fke*a*(1-a)),s=u?Math.atan2(o,i)*Pwe-120:NaN;return new mke(s<0?s+360:s,u,a,e.opacity)}function gke(e,t,n,r){return 1===arguments.length?vke(e):new mke(e,t,n,null==r?1:r)}function mke(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function yke(e){return function t(n){function r(t,r){var a=e((t=gke(t)).h,(r=gke(r)).h),i=Nme(t.s,r.s),o=Nme(t.l,r.l),u=Nme(t.opacity,r.opacity);return function(e){return t.h=a(e),t.s=i(e),t.l=o(Math.pow(e,n)),t.opacity=u(e),t+""}}return n=+n,r.gamma=t,r}(1)}Lge(mke,gke,Pge(jge,{brighter:function(e){return e=null==e?Wge:Math.pow(Wge,e),new mke(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Uge:Math.pow(Uge,e),new mke(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*Lwe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),a=Math.sin(e);return new sme(255*(t+n*(uke*r+ske*a)),255*(t+n*(cke*r+lke*a)),255*(t+n*(fke*r)),this.opacity)}}));var bke,xke,wke,kke,_ke,Ske,Cke,Eke=yke(Eme),Ake=yke(Nme);function Nke(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var Tke="year",Mke="quarter",Dke="month",Fke="week",Ike="date",Oke="day",Rke="dayofyear",Zke="hours",Bke="minutes",zke="seconds",Lke="milliseconds",Pke=[Tke,Mke,Dke,Fke,Ike,Oke,Rke,Zke,Bke,zke,Lke].reduce((function(e,t,n){return e[t]=1+n,e}),{});var jke=(bke={},(0,Ir.Z)(bke,Tke,"%Y "),(0,Ir.Z)(bke,Mke,"Q%q "),(0,Ir.Z)(bke,Dke,"%b "),(0,Ir.Z)(bke,Ike,"%d "),(0,Ir.Z)(bke,Fke,"W%U "),(0,Ir.Z)(bke,Oke,"%a "),(0,Ir.Z)(bke,Rke,"%j "),(0,Ir.Z)(bke,Zke,"%H:00"),(0,Ir.Z)(bke,Bke,"00:%M"),(0,Ir.Z)(bke,zke,":%S"),(0,Ir.Z)(bke,Lke,".%L"),(0,Ir.Z)(bke,"".concat(Tke,"-").concat(Dke),"%Y-%m "),(0,Ir.Z)(bke,"".concat(Tke,"-").concat(Dke,"-").concat(Ike),"%Y-%m-%d "),(0,Ir.Z)(bke,"".concat(Zke,"-").concat(Bke),"%H:%M"),bke);var Uke=new Date;function Wke(e){return Uke.setFullYear(e),Uke.setMonth(0),Uke.setDate(1),Uke.setHours(0,0,0,0),Uke}function Vke(e){return cbe.count(Wke(e.getFullYear())-1,e)}function qke(e){return dbe.count(Wke(e.getFullYear())-1,e)}function Hke(e){return Wke(e).getDay()}function Gke(e){var t=Date.UTC(e.getUTCFullYear(),0,1);return lbe.count(t-1,e)}function Xke(e){var t=Date.UTC(e.getUTCFullYear(),0,1);return wbe.count(t-1,e)}function Yke(e){return Uke.setTime(Date.UTC(e,0,1)),Uke.getUTCDay()}function Kke(e,t,n){return t+7*e-(n+6)%7}xke={},(0,Ir.Z)(xke,Tke,(function(e){return e.getFullYear()})),(0,Ir.Z)(xke,Mke,(function(e){return Math.floor(e.getMonth()/3)})),(0,Ir.Z)(xke,Dke,(function(e){return e.getMonth()})),(0,Ir.Z)(xke,Ike,(function(e){return e.getDate()})),(0,Ir.Z)(xke,Zke,(function(e){return e.getHours()})),(0,Ir.Z)(xke,Bke,(function(e){return e.getMinutes()})),(0,Ir.Z)(xke,zke,(function(e){return e.getSeconds()})),(0,Ir.Z)(xke,Lke,(function(e){return e.getMilliseconds()})),(0,Ir.Z)(xke,Rke,(function(e){return Vke(e)})),(0,Ir.Z)(xke,Fke,(function(e){return qke(e)})),(0,Ir.Z)(xke,"weekday",(function(e,t){return Kke(qke(e),e.getDay(),Hke(t))})),(0,Ir.Z)(xke,Oke,(function(e,t){return Kke(1,e.getDay(),Hke(t))})),wke={},(0,Ir.Z)(wke,Mke,(function(e){return 3*e})),(0,Ir.Z)(wke,Fke,(function(e,t){return Kke(e,0,Hke(t))}));kke={},(0,Ir.Z)(kke,Tke,(function(e){return e.getUTCFullYear()})),(0,Ir.Z)(kke,Mke,(function(e){return Math.floor(e.getUTCMonth()/3)})),(0,Ir.Z)(kke,Dke,(function(e){return e.getUTCMonth()})),(0,Ir.Z)(kke,Ike,(function(e){return e.getUTCDate()})),(0,Ir.Z)(kke,Zke,(function(e){return e.getUTCHours()})),(0,Ir.Z)(kke,Bke,(function(e){return e.getUTCMinutes()})),(0,Ir.Z)(kke,zke,(function(e){return e.getUTCSeconds()})),(0,Ir.Z)(kke,Lke,(function(e){return e.getUTCMilliseconds()})),(0,Ir.Z)(kke,Rke,(function(e){return Gke(e)})),(0,Ir.Z)(kke,Fke,(function(e){return Xke(e)})),(0,Ir.Z)(kke,Oke,(function(e,t){return Kke(1,e.getUTCDay(),Yke(t))})),(0,Ir.Z)(kke,"weekday",(function(e,t){return Kke(Xke(e),e.getUTCDay(),Yke(t))})),_ke={},(0,Ir.Z)(_ke,Mke,(function(e){return 3*e})),(0,Ir.Z)(_ke,Fke,(function(e,t){return Kke(e,0,Yke(t))}));var $ke=(Ske={},(0,Ir.Z)(Ske,Tke,Mbe),(0,Ir.Z)(Ske,Mke,Nbe.every(3)),(0,Ir.Z)(Ske,Dke,Nbe),(0,Ir.Z)(Ske,Fke,dbe),(0,Ir.Z)(Ske,Ike,cbe),(0,Ir.Z)(Ske,Oke,cbe),(0,Ir.Z)(Ske,Rke,cbe),(0,Ir.Z)(Ske,Zke,ube),(0,Ir.Z)(Ske,Bke,ibe),(0,Ir.Z)(Ske,zke,abe),(0,Ir.Z)(Ske,Lke,rbe),Ske),Qke=(Cke={},(0,Ir.Z)(Cke,Tke,Dbe),(0,Ir.Z)(Cke,Mke,Tbe.every(3)),(0,Ir.Z)(Cke,Dke,Tbe),(0,Ir.Z)(Cke,Fke,wbe),(0,Ir.Z)(Cke,Ike,lbe),(0,Ir.Z)(Cke,Oke,lbe),(0,Ir.Z)(Cke,Rke,lbe),(0,Ir.Z)(Cke,Zke,sbe),(0,Ir.Z)(Cke,Bke,obe),(0,Ir.Z)(Cke,zke,abe),(0,Ir.Z)(Cke,Lke,rbe),Cke);function Jke(e){return $ke[e]}function e_e(e){return Qke[e]}function t_e(e,t,n){return e?e.offset(t,n):void 0}function n_e(e,t,n,r){return e?e.range(t,n,r):void 0}var r_e,a_e,i_e=[Tke,Dke,Ike,Zke,Bke,zke,Lke],o_e=i_e.slice(0,-1),u_e=o_e.slice(0,-1),s_e=u_e.slice(0,-1);s_e.slice(0,-1);function c_e(e,t,n){var r=e-t+2*n;return e?r>0?r:1:0}var l_e="linear",f_e="log",h_e="pow",d_e="sqrt",p_e="symlog",v_e="time",g_e="utc",m_e="sequential",y_e="diverging",b_e="quantile",x_e="quantize",w_e="threshold",k_e="continuous",__e="discrete",S_e="discretizing",C_e="interpolating",E_e="temporal";function A_e(){var e,t,n=Swe().unknown(void 0),r=n.domain,a=n.range,i=[0,1],o=!1,u=0,s=0,c=.5;function l(){var n=r().length,l=i[1]<i[0],f=i[1-l],h=c_e(n,u,s),d=i[l-0];e=(f-d)/(h||1),o&&(e=Math.floor(e)),d+=(f-d-e*(n-u))*c,t=e*(1-u),o&&(d=Math.round(d),t=Math.round(t));var p=function(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),i=new Array(a);++r<a;)i[r]=e+r*n;return i}(n).map((function(t){return d+e*t}));return a(l?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),l()):r()},n.range=function(e){return arguments.length?(i=[+e[0],+e[1]],l()):i.slice()},n.rangeRound=function(e){return i=[+e[0],+e[1]],o=!0,l()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(o=!!e,l()):o},n.padding=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),u=s,l()):u},n.paddingInner=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),l()):u},n.paddingOuter=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),l()):s},n.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),l()):c},n.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var n,o,u,s=i[1]<i[0],c=s?a().reverse():a(),l=c.length-1,f=+e[0],h=+e[1];if(f===f&&h===h&&(h<f&&(u=f,f=h,h=u),!(h<c[0]||f>i[1-s])))return n=Math.max(0,_ge(c,f)-1),o=f===h?n:_ge(c,h)-1,f-c[n]>t+1e-10&&++n,s&&(u=n,n=l-o,o=l-u),n>o?void 0:r().slice(n,o+1)}},n.invert=function(e){var t=n.invertRange([e,e]);return t?t[0]:t},n.copy=function(){return A_e().domain(r()).range(i).round(o).paddingInner(u).paddingOuter(s).align(c)},l()}function N_e(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return N_e(t())},e}var T_e=Array.prototype.map;function M_e(e){return T_e.call(e,Ape)}var D_e=Array.prototype.slice;var F_e=new Map,I_e=Symbol("vega_scale");function O_e(e,t,n){var r=function(){var n=t();return n.invertRange||(n.invertRange=n.invert?function(e){return function(t){var n,r=t[0],a=t[1];return a<r&&(n=r,r=a,a=n),[e.invert(r),e.invert(a)]}}(n):n.invertExtent?function(e){return function(t){var n,r,a,i,o=e.range(),u=t[0],s=t[1],c=-1;for(s<u&&(r=u,u=s,s=r),a=0,i=o.length;a<i;++a)o[a]>=u&&o[a]<=s&&(c<0&&(c=a),n=a);if(!(c<0))return u=e.invertExtent(o[c]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}}(n):void 0),n.type=e,function(e){return e[I_e]=!0,e}(n)};return r.metadata=Kpe(Rpe(n)),r}function R_e(e,t,n){return arguments.length>1?(F_e.set(e,O_e(e,t,n)),this):Z_e(e)?F_e.get(e):void 0}function Z_e(e){return F_e.has(e)}function B_e(e,t){var n=F_e.get(e);return n&&n.metadata[t]}function z_e(e){return B_e(e,__e)}R_e("identity",(function e(t){var n;function r(e){return null==e||isNaN(e=+e)?n:e}return r.invert=r,r.domain=r.range=function(e){return arguments.length?(t=Array.from(e,qme),r):t.slice()},r.unknown=function(e){return arguments.length?(n=e,r):n},r.copy=function(){return e(t).unknown(n)},t=arguments.length?Array.from(t,qme):[0,1],wye(r)})),R_e(l_e,(function e(){var t=Jme();return t.copy=function(){return $me(t,e())},eye.apply(t,arguments),wye(t)}),k_e),R_e(f_e,(function e(){var t=Tye(Qme()).domain([1,10]);return t.copy=function(){return $me(t,e()).base(t.base())},eye.apply(t,arguments),t}),[k_e,f_e]),R_e(h_e,Oye,k_e),R_e(d_e,(function(){return Oye.apply(null,arguments).exponent(.5)}),k_e),R_e(p_e,(function e(){var t=Bye(Qme());return t.copy=function(){return $me(t,e()).constant(t.constant())},eye.apply(t,arguments)}),k_e),R_e(v_e,(function(){return eye.apply(pwe(Lbe,Pbe,Mbe,Nbe,dbe,cbe,ube,ibe,abe,qbe).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}),[k_e,E_e]),R_e(g_e,(function(){return eye.apply(pwe(Rbe,Zbe,Dbe,Tbe,wbe,lbe,sbe,obe,abe,Gbe).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}),[k_e,E_e]),R_e(m_e,mwe,[k_e,C_e]),R_e("".concat(m_e,"-").concat(l_e),mwe,[k_e,C_e]),R_e("".concat(m_e,"-").concat(f_e),(function e(){var t=Tye(vwe()).domain([1,10]);return t.copy=function(){return gwe(t,e()).base(t.base())},tye.apply(t,arguments)}),[k_e,C_e,f_e]),R_e("".concat(m_e,"-").concat(h_e),ywe,[k_e,C_e]),R_e("".concat(m_e,"-").concat(d_e),(function(){return ywe.apply(null,arguments).exponent(.5)}),[k_e,C_e]),R_e("".concat(m_e,"-").concat(p_e),(function e(){var t=Bye(vwe());return t.copy=function(){return gwe(t,e()).constant(t.constant())},tye.apply(t,arguments)}),[k_e,C_e]),R_e("".concat(y_e,"-").concat(l_e),(function e(){var t=wye(xwe()(Gme));return t.copy=function(){return gwe(t,e())},tye.apply(t,arguments)}),[k_e,C_e]),R_e("".concat(y_e,"-").concat(f_e),(function e(){var t=Tye(xwe()).domain([.1,1,10]);return t.copy=function(){return gwe(t,e()).base(t.base())},tye.apply(t,arguments)}),[k_e,C_e,f_e]),R_e("".concat(y_e,"-").concat(h_e),wwe,[k_e,C_e]),R_e("".concat(y_e,"-").concat(d_e),(function(){return wwe.apply(null,arguments).exponent(.5)}),[k_e,C_e]),R_e("".concat(y_e,"-").concat(p_e),(function e(){var t=Bye(xwe());return t.copy=function(){return gwe(t,e()).constant(t.constant())},tye.apply(t,arguments)}),[k_e,C_e]),R_e(b_e,(function e(){var t,n=[],r=[],a=[];function i(){var e=0,t=Math.max(1,r.length);for(a=new Array(t-1);++e<t;)a[e-1]=kwe(n,e/t);return o}function o(e){return null==e||isNaN(e=+e)?t:r[zge(a,e)]}return o.invertExtent=function(e){var t=r.indexOf(e);return t<0?[NaN,NaN]:[t>0?a[t-1]:n[0],t<a.length?a[t]:n[n.length-1]]},o.domain=function(e){if(!arguments.length)return n.slice();n=[];var t,r=(0,zt.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;null==a||isNaN(a=+a)||n.push(a)}}catch(o){r.e(o)}finally{r.f()}return n.sort(Dge),i()},o.range=function(e){return arguments.length?(r=Array.from(e),i()):r.slice()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.quantiles=function(){return a.slice()},o.copy=function(){return e().domain(n).range(r).unknown(t)},eye.apply(o,arguments)}),[S_e,b_e]),R_e(x_e,(function e(){var t,n=0,r=1,a=1,i=[.5],o=[0,1];function u(e){return null!=e&&e<=e?o[zge(i,e,0,a)]:t}function s(){var e=-1;for(i=new Array(a);++e<a;)i[e]=((e+1)*r-(e-a)*n)/(a+1);return u}return u.domain=function(e){var t,a;return arguments.length?(t=e,a=(0,gc.Z)(t,2),n=a[0],r=a[1],n=+n,r=+r,s()):[n,r]},u.range=function(e){return arguments.length?(a=(o=Array.from(e)).length-1,s()):o.slice()},u.invertExtent=function(e){var t=o.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,i[0]]:t>=a?[i[a-1],r]:[i[t-1],i[t]]},u.unknown=function(e){return arguments.length?(t=e,u):u},u.thresholds=function(){return i.slice()},u.copy=function(){return e().domain([n,r]).range(o).unknown(t)},eye.apply(wye(u),arguments)}),S_e),R_e(w_e,(function e(){var t,n=[.5],r=[0,1],a=1;function i(e){return null!=e&&e<=e?r[zge(n,e,0,a)]:t}return i.domain=function(e){return arguments.length?(n=Array.from(e),a=Math.min(n.length,r.length-1),i):n.slice()},i.range=function(e){return arguments.length?(r=Array.from(e),a=Math.min(n.length,r.length-1),i):r.slice()},i.invertExtent=function(e){var t=r.indexOf(e);return[n[t-1],n[t]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return e().domain(n).range(r).unknown(t)},eye.apply(i,arguments)}),S_e),R_e("bin-ordinal",(function e(){var t=[],n=[];function r(e){return null==e||e!==e?void 0:n[(Sge(t,e)-1)%n.length]}return r.domain=function(e){return arguments.length?(t=M_e(e),r):t.slice()},r.range=function(e){return arguments.length?(n=D_e.call(e),r):n.slice()},r.tickFormat=function(e,n){return xye(t[0],Epe(t),null==e?10:e,n)},r.copy=function(){return e().domain(r.domain()).range(r.range())},r}),[__e,S_e]),R_e("ordinal",Swe,__e),R_e("band",A_e,__e),R_e("point",(function(){return N_e(A_e().paddingInner(1))}),__e);var L_e=["clamp","base","constant","exponent"];function P_e(e,t,n){return bwe(function(e,t){var n=b[function(e){return"interpolate"+e.toLowerCase().split("-").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("")}(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}(t||"rgb",n),e)}function j_e(e,t,n){var r,a,i,o,u=n-t;return u&&Number.isFinite(u)?(r=(a=e.type).indexOf("-"),a=r<0?a:a.slice(r+1),i=R_e(a)().domain([t,n]).range([0,1]),L_e.forEach((function(t){return e[t]?i[t](e[t]()):0})),i):Zpe(o=.5)?o:function(){return o}}function U_e(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function W_e(e,t){for(var n in e)q_e(n,t(e[n]))}var V_e={};function q_e(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(V_e[e]=t,this):V_e[e]}W_e({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},U_e),W_e({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(function(e){return P_e(U_e(e))}));var H_e=function(e){return Spe(e)?e.map((function(e){return String(e)})):String(e)},G_e=function(e,t){return e[1]-t[1]},X_e=function(e,t){return t[1]-e[1]};function Y_e(e,t){return e.bins?function(e,t,n){var r=e.range(),a=r[0],i=Epe(r),o=G_e;if(a>i&&(r=i,i=a,a=r,o=X_e),a=Math.floor(a),i=Math.ceil(i),t=t.map((function(t){return[t,e(t)]})).filter((function(e){return a<=e[1]&&e[1]<=i})).sort(o).map((function(e){return e[0]})),n>0&&t.length>1){for(var u=[t[0],Epe(t)];t.length>n&&t.length>=3;)t=t.filter((function(e,t){return!(t%2)}));t.length<3&&(t=u)}return t}(e,e.bins):e.ticks?e.ticks(t):e.domain()}function K_e(e,t,n,r,a,i){var o=t.type,u=H_e;if(o===v_e||a===v_e)u=e.timeFormat(r);else if(o===g_e||a===g_e)u=e.utcFormat(r);else if(function(e){return B_e(e,f_e)}(o)){var s=e.formatFloat(r);if(i||t.bins)u=s;else{var c=$_e(t,n,!1);u=function(e){return c(e)?s(e):""}}}else if(t.tickFormat){var l=t.domain();u=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(u=e.format(r));return u}function $_e(e,t,n){var r=Y_e(e,t),a=e.base(),i=Math.log(a),o=Math.max(1,a*t/r.length),u=function(e){var t=e/Math.pow(a,Math.round(Math.log(e)/i));return t*a<a-.5&&(t*=a),t<=o};return n?r.filter(u):u}var Q_e=(r_e={},(0,Ir.Z)(r_e,b_e,"quantiles"),(0,Ir.Z)(r_e,x_e,"thresholds"),(0,Ir.Z)(r_e,w_e,"domain"),r_e),J_e=(a_e={},(0,Ir.Z)(a_e,b_e,"quantiles"),(0,Ir.Z)(a_e,x_e,"domain"),a_e);function eSe(e,t){return e.bins?function(e){var t=e.slice(0,-1);return t.max=Epe(e),t}(e.bins):e.type===f_e?$_e(e,t,!0):Q_e[e.type]?function(e){var t=[-1/0].concat(e);return t.max=1/0,t}(e[Q_e[e.type]]()):Y_e(e,t)}function tSe(e,t,n,r,a,i,o){var u=J_e[t.type]&&i!==v_e&&i!==g_e?function(e,t,n){var r,a=t[J_e[t.type]](),i=a.length,o=i>1?a[1]-a[0]:a[0];for(r=1;r<i;++r)o=Math.min(o,a[r]-a[r-1]);return e.formatSpan(0,o,30,n)}(e,t,a):K_e(e,t,n,a,i,o);return"symbol"===r&&function(e){return Q_e[e.type]||e.bins}(t)?nSe(u):"discrete"===r?aSe(u):iSe(u)}var nSe=function(e){return function(t,n,r){var a=rSe(r[n+1],rSe(r.max,1/0)),i=oSe(t,e),o=oSe(a,e);return i&&o?i+" \u2013 "+o:o?"< "+o:"\u2265 "+i}},rSe=function(e,t){return null!=e?e:t},aSe=function(e){return function(t,n){return n?e(t):null}},iSe=function(e){return function(t){return e(t)}},oSe=function(e,t){return Number.isFinite(e)?t(e):null};function uSe(e,t,n,r){var a=r||t.type;return Wpe(n)&&function(e){return B_e(e,E_e)}(a)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||a!==v_e?n||a!==g_e?tSe(e,t,5,null,n,r,!0):e.utcFormat("%A, %d %B %Y, %X UTC"):e.timeFormat("%A, %d %B %Y, %X")}function sSe(e,t,n){n=n||{};var r=Math.max(3,n.maxlen||7),a=uSe(e,t,n.format,n.formatType);if(function(e){return B_e(e,S_e)}(t.type)){var i=eSe(t).slice(1).map(a),o=i.length;return"".concat(o," boundar").concat(1===o?"y":"ies",": ").concat(i.join(", "))}if(z_e(t.type)){var u=t.domain(),s=u.length,c=s>r?u.slice(0,r-2).map(a).join(", ")+", ending with "+u.slice(-1).map(a):u.map(a).join(", ");return"".concat(s," value").concat(1===s?"":"s",": ").concat(c)}var l=t.domain();return"values from ".concat(a(l[0])," to ").concat(a(Epe(l)))}function cSe(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function lSe(e){this._context=e}function fSe(){}function hSe(e){this._context=e}function dSe(e){this._context=e}function pSe(e,t){this._basis=new lSe(e),this._beta=t}lSe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:cSe(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:cSe(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},hSe.prototype={areaStart:fSe,areaEnd:fSe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:cSe(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},dSe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:cSe(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},pSe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,a=e[0],i=t[0],o=e[n]-a,u=t[n]-i,s=-1;++s<=n;)r=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(a+r*o),this._beta*t[s]+(1-this._beta)*(i+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var vSe=function e(t){function n(e){return 1===t?new lSe(e):new pSe(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function gSe(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function mSe(e,t){this._context=e,this._k=(1-t)/6}mSe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:gSe(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:gSe(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var ySe=function e(t){function n(e){return new mSe(e,t)}return n.tension=function(t){return e(+t)},n}(0);function bSe(e,t){this._context=e,this._k=(1-t)/6}bSe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:gSe(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var xSe=function e(t){function n(e){return new bSe(e,t)}return n.tension=function(t){return e(+t)},n}(0);function wSe(e,t){this._context=e,this._k=(1-t)/6}wSe.prototype={areaStart:fSe,areaEnd:fSe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:gSe(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var kSe=function e(t){function n(e){return new wSe(e,t)}return n.tension=function(t){return e(+t)},n}(0),_Se=Math.abs,SSe=Math.atan2,CSe=Math.cos,ESe=Math.max,ASe=Math.min,NSe=Math.sin,TSe=Math.sqrt,MSe=1e-12,DSe=Math.PI,FSe=DSe/2,ISe=2*DSe;function OSe(e){return e>1?0:e<-1?DSe:Math.acos(e)}function RSe(e){return e>=1?FSe:e<=-1?-FSe:Math.asin(e)}function ZSe(e,t,n){var r=e._x1,a=e._y1,i=e._x2,o=e._y2;if(e._l01_a>MSe){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,s=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/s,a=(a*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/s}if(e._l23_a>MSe){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,l=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*c+e._x1*e._l23_2a-t*e._l12_2a)/l,o=(o*c+e._y1*e._l23_2a-n*e._l12_2a)/l}e._context.bezierCurveTo(r,a,i,o,e._x2,e._y2)}function BSe(e,t){this._context=e,this._alpha=t}BSe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:ZSe(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var zSe=function e(t){function n(e){return t?new BSe(e,t):new mSe(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function LSe(e,t){this._context=e,this._alpha=t}LSe.prototype={areaStart:fSe,areaEnd:fSe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:ZSe(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var PSe=function e(t){function n(e){return t?new LSe(e,t):new wSe(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function jSe(e,t){this._context=e,this._alpha=t}jSe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ZSe(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var USe,WSe,VSe,qSe,HSe,GSe,XSe,YSe,KSe,$Se,QSe,JSe,eCe,tCe,nCe=function e(t){function n(e){return t?new jSe(e,t):new bSe(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function rCe(e){this._context=e}function aCe(e){return new rCe(e)}function iCe(e){this._context=e}function oCe(e){return e<0?-1:1}function uCe(e,t,n){var r=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(r||a<0&&-0),o=(n-e._y1)/(a||r<0&&-0),u=(i*a+o*r)/(r+a);return(oCe(i)+oCe(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(u))||0}function sCe(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function cCe(e,t,n){var r=e._x0,a=e._y0,i=e._x1,o=e._y1,u=(i-r)/3;e._context.bezierCurveTo(r+u,a+u*t,i-u,o-u*n,i,o)}function lCe(e){this._context=e}function fCe(e){this._context=new hCe(e)}function hCe(e){this._context=e}function dCe(e){this._context=e}function pCe(e){var t,n,r=e.length-1,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function vCe(e,t){this._context=e,this._t=t}function gCe(e){return function(){return e}}rCe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},iCe.prototype={areaStart:fSe,areaEnd:fSe,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},lCe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:cCe(this,this._t0,sCe(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,cCe(this,sCe(this,n=uCe(this,e,t)),n);break;default:cCe(this,this._t0,n=uCe(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(fCe.prototype=Object.create(lCe.prototype)).point=function(e,t){lCe.prototype.point.call(this,t,e)},hCe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,i){this._context.bezierCurveTo(t,e,r,n,i,a)}},dCe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=pCe(e),a=pCe(t),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(r[0][i],a[0][i],r[1][i],a[1][i],e[o],t[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},vCe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var mCe=Math.PI,yCe=2*mCe,bCe=1e-6,xCe=yCe-bCe;function wCe(e){this._+=e[0];for(var t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}var kCe=function(){function e(t){(0,ud.Z)(this,e),this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?wCe:function(e){var t=Math.floor(e);if(!(t>=0))throw new Error("invalid digits: ".concat(e));if(t>15)return wCe;var n=Math.pow(10,t);return function(e){this._+=e[0];for(var t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(t)}return(0,sd.Z)(e,[{key:"moveTo",value:function(e,t){this._append(USe||(USe=Hh(["M",",",""])),this._x0=this._x1=+e,this._y0=this._y1=+t)}},{key:"closePath",value:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(WSe||(WSe=Hh(["Z"]))))}},{key:"lineTo",value:function(e,t){this._append(VSe||(VSe=Hh(["L",",",""])),this._x1=+e,this._y1=+t)}},{key:"quadraticCurveTo",value:function(e,t,n,r){this._append(qSe||(qSe=Hh(["Q",",",",",",",""])),+e,+t,this._x1=+n,this._y1=+r)}},{key:"bezierCurveTo",value:function(e,t,n,r,a,i){this._append(HSe||(HSe=Hh(["C",",",",",",",",",",",""])),+e,+t,+n,+r,this._x1=+a,this._y1=+i)}},{key:"arcTo",value:function(e,t,n,r,a){if(e=+e,t=+t,n=+n,r=+r,(a=+a)<0)throw new Error("negative radius: ".concat(a));var i=this._x1,o=this._y1,u=n-e,s=r-t,c=i-e,l=o-t,f=c*c+l*l;if(null===this._x1)this._append(GSe||(GSe=Hh(["M",",",""])),this._x1=e,this._y1=t);else if(f>bCe)if(Math.abs(l*u-s*c)>bCe&&a){var h=n-i,d=r-o,p=u*u+s*s,v=h*h+d*d,g=Math.sqrt(p),m=Math.sqrt(f),y=a*Math.tan((mCe-Math.acos((p+f-v)/(2*g*m)))/2),b=y/m,x=y/g;Math.abs(b-1)>bCe&&this._append(YSe||(YSe=Hh(["L",",",""])),e+b*c,t+b*l),this._append(KSe||(KSe=Hh(["A",",",",0,0,",",",",",""])),a,a,+(l*h>c*d),this._x1=e+x*u,this._y1=t+x*s)}else this._append(XSe||(XSe=Hh(["L",",",""])),this._x1=e,this._y1=t);else;}},{key:"arc",value:function(e,t,n,r,a,i){if(e=+e,t=+t,i=!!i,(n=+n)<0)throw new Error("negative radius: ".concat(n));var o=n*Math.cos(r),u=n*Math.sin(r),s=e+o,c=t+u,l=1^i,f=i?r-a:a-r;null===this._x1?this._append($Se||($Se=Hh(["M",",",""])),s,c):(Math.abs(this._x1-s)>bCe||Math.abs(this._y1-c)>bCe)&&this._append(QSe||(QSe=Hh(["L",",",""])),s,c),n&&(f<0&&(f=f%yCe+yCe),f>xCe?this._append(JSe||(JSe=Hh(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),n,n,l,e-o,t-u,n,n,l,this._x1=s,this._y1=c):f>bCe&&this._append(eCe||(eCe=Hh(["A",",",",0,",",",",",",",""])),n,n,+(f>=mCe),l,this._x1=e+n*Math.cos(a),this._y1=t+n*Math.sin(a)))}},{key:"rect",value:function(e,t,n,r){this._append(tCe||(tCe=Hh(["M",",","h","v","h","Z"])),this._x0=this._x1=+e,this._y0=this._y1=+t,n=+n,+r,-n)}},{key:"toString",value:function(){return this._}}]),e}();function _Ce(){return new kCe}function SCe(e){var t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{var r=Math.floor(n);if(!(r>=0))throw new RangeError("invalid digits: ".concat(n));t=r}return e},function(){return new kCe(t)}}function CCe(e){return e.innerRadius}function ECe(e){return e.outerRadius}function ACe(e){return e.startAngle}function NCe(e){return e.endAngle}function TCe(e){return e&&e.padAngle}function MCe(e,t,n,r,a,i,o,u){var s=n-e,c=r-t,l=o-a,f=u-i,h=f*s-l*c;if(!(h*h<MSe))return[e+(h=(l*(t-i)-f*(e-a))/h)*s,t+h*c]}function DCe(e,t,n,r,a,i,o){var u=e-n,s=t-r,c=(o?i:-i)/TSe(u*u+s*s),l=c*s,f=-c*u,h=e+l,d=t+f,p=n+l,v=r+f,g=(h+p)/2,m=(d+v)/2,y=p-h,b=v-d,x=y*y+b*b,w=a-i,k=h*v-p*d,_=(b<0?-1:1)*TSe(ESe(0,w*w*x-k*k)),S=(k*b-y*_)/x,C=(-k*y-b*_)/x,E=(k*b+y*_)/x,A=(-k*y+b*_)/x,N=S-g,T=C-m,M=E-g,D=A-m;return N*N+T*T>M*M+D*D&&(S=E,C=A),{cx:S,cy:C,x01:-l,y01:-f,x11:S*(a/w-1),y11:C*(a/w-1)}}_Ce.prototype=kCe.prototype;Array.prototype.slice;function FCe(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function ICe(e){return e[0]}function OCe(e){return e[1]}function RCe(e,t){var n=gCe(!0),r=null,a=aCe,i=null,o=SCe(u);function u(u){var s,c,l,f=(u=FCe(u)).length,h=!1;for(null==r&&(i=a(l=o())),s=0;s<=f;++s)!(s<f&&n(c=u[s],s,u))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(c,s,u),+t(c,s,u));if(l)return i=null,l+""||null}return e="function"===typeof e?e:void 0===e?ICe:gCe(e),t="function"===typeof t?t:void 0===t?OCe:gCe(t),u.x=function(t){return arguments.length?(e="function"===typeof t?t:gCe(+t),u):e},u.y=function(e){return arguments.length?(t="function"===typeof e?e:gCe(+e),u):t},u.defined=function(e){return arguments.length?(n="function"===typeof e?e:gCe(!!e),u):n},u.curve=function(e){return arguments.length?(a=e,null!=r&&(i=a(r)),u):a},u.context=function(e){return arguments.length?(null==e?r=i=null:i=a(r=e),u):r},u}function ZCe(e,t,n){var r=null,a=gCe(!0),i=null,o=aCe,u=null,s=SCe(c);function c(c){var l,f,h,d,p,v=(c=FCe(c)).length,g=!1,m=new Array(v),y=new Array(v);for(null==i&&(u=o(p=s())),l=0;l<=v;++l){if(!(l<v&&a(d=c[l],l,c))===g)if(g=!g)f=l,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),h=l-1;h>=f;--h)u.point(m[h],y[h]);u.lineEnd(),u.areaEnd()}g&&(m[l]=+e(d,l,c),y[l]=+t(d,l,c),u.point(r?+r(d,l,c):m[l],n?+n(d,l,c):y[l]))}if(p)return u=null,p+""||null}function l(){return RCe().defined(a).curve(o).context(i)}return e="function"===typeof e?e:void 0===e?ICe:gCe(+e),t="function"===typeof t?t:gCe(void 0===t?0:+t),n="function"===typeof n?n:void 0===n?OCe:gCe(+n),c.x=function(t){return arguments.length?(e="function"===typeof t?t:gCe(+t),r=null,c):e},c.x0=function(t){return arguments.length?(e="function"===typeof t?t:gCe(+t),c):e},c.x1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:gCe(+e),c):r},c.y=function(e){return arguments.length?(t="function"===typeof e?e:gCe(+e),n=null,c):t},c.y0=function(e){return arguments.length?(t="function"===typeof e?e:gCe(+e),c):t},c.y1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:gCe(+e),c):n},c.lineX0=c.lineY0=function(){return l().x(e).y(t)},c.lineY1=function(){return l().x(e).y(n)},c.lineX1=function(){return l().x(r).y(t)},c.defined=function(e){return arguments.length?(a="function"===typeof e?e:gCe(!!e),c):a},c.curve=function(e){return arguments.length?(o=e,null!=i&&(u=o(i)),c):o},c.context=function(e){return arguments.length?(null==e?i=u=null:u=o(i=e),c):i},c}TSe(3);var BCe={draw:function(e,t){var n=TSe(t/DSe);e.moveTo(n,0),e.arc(0,0,n,0,ISe)}},zCe=(TSe(1/3),NSe(DSe/10)/NSe(7*DSe/10));NSe(ISe/10),CSe(ISe/10),TSe(3),TSe(3),TSe(3),TSe(12);var LCe={},PCe={};function jCe(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function UCe(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function WCe(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function VCe(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),a=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":function(e){return e<0?"-"+WCe(-e,6):e>9999?"+"+WCe(e,6):WCe(e,4)}(e.getUTCFullYear())+"-"+WCe(e.getUTCMonth()+1,2)+"-"+WCe(e.getUTCDate(),2)+(a?"T"+WCe(t,2)+":"+WCe(n,2)+":"+WCe(r,2)+"."+WCe(a,3)+"Z":r?"T"+WCe(t,2)+":"+WCe(n,2)+":"+WCe(r,2)+"Z":n||t?"T"+WCe(t,2)+":"+WCe(n,2)+"Z":"")}function qCe(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,a=[],i=e.length,o=0,u=0,s=i<=0,c=!1;function l(){if(s)return PCe;if(c)return c=!1,LCe;var t,r,a=o;if(34===e.charCodeAt(a)){for(;o++<i&&34!==e.charCodeAt(o)||34===e.charCodeAt(++o););return(t=o)>=i?s=!0:10===(r=e.charCodeAt(o++))?c=!0:13===r&&(c=!0,10===e.charCodeAt(o)&&++o),e.slice(a+1,t-1).replace(/""/g,'"')}for(;o<i;){if(10===(r=e.charCodeAt(t=o++)))c=!0;else if(13===r)c=!0,10===e.charCodeAt(o)&&++o;else if(r!==n)continue;return e.slice(a,t)}return s=!0,e.slice(a,i)}for(10===e.charCodeAt(i-1)&&--i,13===e.charCodeAt(i-1)&&--i;(r=l())!==PCe;){for(var f=[];r!==LCe&&r!==PCe;)f.push(r),r=l();t&&null==(f=t(f,u++))||a.push(f)}return a}function a(t,n){return t.map((function(t){return n.map((function(e){return o(t[e])})).join(e)}))}function i(t){return t.map(o).join(e)}function o(e){return null==e?"":e instanceof Date?VCe(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,a,i=r(e,(function(e,r){if(n)return n(e,r-1);a=e,n=t?function(e,t){var n=jCe(e);return function(r,a){return t(n(r),a,e)}}(e,t):jCe(e)}));return i.columns=a||[],i},parseRows:r,format:function(t,n){return null==n&&(n=UCe(t)),[n.map(o).join(e)].concat(a(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=UCe(e)),a(e,t).join("\n")},formatRows:function(e){return e.map(i).join("\n")},formatRow:i,formatValue:o}}var HCe=Math.sqrt(50),GCe=Math.sqrt(10),XCe=Math.sqrt(2);function YCe(e,t,n){var r,a,i,o=(t-e)/Math.max(0,n),u=Math.floor(Math.log10(o)),s=o/Math.pow(10,u),c=s>=HCe?10:s>=GCe?5:s>=XCe?2:1;return u<0?(i=Math.pow(10,-u)/c,(r=Math.round(e*i))/i<e&&++r,(a=Math.round(t*i))/i>t&&--a,i=-i):(i=Math.pow(10,u)*c,(r=Math.round(e/i))*i<e&&++r,(a=Math.round(t/i))*i>t&&--a),a<r&&.5<=n&&n<2?YCe(e,t,2*n):[r,a,i]}function KCe(e,t,n){return YCe(e=+e,t=+t,n=+n)[2]}function $Ce(e){var t={};return function(n){return t[n]||(t[n]=e(n))}}function QCe(e){var t=$Ce(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat:function(e){var n=aye(e||",");if(null==n.precision){switch(n.precision=12,n.type){case"%":n.precision-=2;break;case"e":n.precision-=1}return function(e,t){return function(n){var r=e(n),a=r.indexOf(t);if(a<0)return r;for(var i=function(e,t){var n,r=e.lastIndexOf("e");if(r>0)return r;for(r=e.length;--r>t;)if((n=e.charCodeAt(r))>=48&&n<=57)return r+1}(r,a),o=i<r.length?r.slice(i):"";--i>a;)if("0"!==r[i]){++i;break}return r.slice(0,i)+o}}(t(n),t(".1f")(1)[1])}return t(n)},formatSpan:function(e,r,a,i){i=aye(null==i?",f":i);var o,u=function(e,t,n){n=+n;var r=(t=+t)<(e=+e),a=r?KCe(t,e,n):KCe(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}(e,r,a),s=Math.max(Math.abs(e),Math.abs(r));if(null==i.precision)switch(i.type){case"s":return isNaN(o=sye(u,s))||(i.precision=o),n(i,s);case"":case"e":case"g":case"p":case"r":isNaN(o=yye(u,s))||(i.precision=o-("e"===i.type));break;case"f":case"%":isNaN(o=bye(u))||(i.precision=o-2*("%"===i.type))}return t(i)}}}function JCe(){return QCe({format:dye,formatPrefix:pye})}function eEe(e,t,n){Cpe(n=n||{})||bpe("Invalid time multi-format specifier: ".concat(n));var r=t(zke),a=t(Bke),i=t(Zke),o=t(Ike),u=t(Fke),s=t(Dke),c=t(Mke),l=t(Tke),f=e(n.milliseconds||".%L"),h=e(n.seconds||":%S"),d=e(n.minutes||"%I:%M"),p=e(n.hours||"%I %p"),v=e(n.date||n.day||"%a %d"),g=e(n.week||"%b %d"),m=e(n.month||"%B"),y=e(n.quarter||"%B"),b=e(n.year||"%Y");return function(e){return(r(e)<e?f:a(e)<e?h:i(e)<e?d:o(e)<e?p:s(e)<e?u(e)<e?v:g:l(e)<e?c(e)<e?m:y:b)(e)}}function tEe(e){var t=$Ce(e.format),n=$Ce(e.utcFormat);return{timeFormat:function(e){return Wpe(e)?t(e):eEe(t,Jke,e)},utcFormat:function(e){return Wpe(e)?n(e):eEe(n,e_e,e)},timeParse:$Ce(e.parse),utcParse:$Ce(e.utcParse)}}function nEe(){return tEe({format:qbe,parse:Hbe,utcFormat:Gbe,utcParse:Xbe})}JCe(),nEe();var rEe=/^(data:|([A-Za-z]+:)?\/\/)/,aEe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,iEe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,oEe="file://";function uEe(e,t){return sEe.apply(this,arguments)}function sEe(){return(sEe=(0,Lt.Z)(S().mark((function e(t,n){var r,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sanitize(t,n);case 2:return r=e.sent,a=r.href,e.abrupt("return",r.localFile?this.file(a):this.http(a,n));case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function cEe(e,t){return lEe.apply(this,arguments)}function lEe(){return lEe=(0,Lt.Z)(S().mark((function e(t,n){var r,a,i,o,u,s,c;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Bpe({},this.options,n),r=this.fileAccess,a={href:null},s=aEe.test(t.replace(iEe,"")),null!=t&&"string"===typeof t&&s||bpe("Sanitize failure, invalid URI: "+qpe(t)),c=rEe.test(t),(u=n.baseURL)&&!c&&(t.startsWith("/")||u.endsWith("/")||(t="/"+t),t=u+t),o=(i=t.startsWith(oEe))||"file"===n.mode||"http"!==n.mode&&!c&&r,i?t=t.slice(oEe.length):t.startsWith("//")&&("file"===n.defaultProtocol?(t=t.slice(2),o=!0):t=(n.defaultProtocol||"http")+":"+t),Object.defineProperty(a,"localFile",{value:!!o}),a.href=t,n.target&&(a.target=n.target+""),n.rel&&(a.rel=n.rel+""),"image"===n.context&&n.crossOrigin&&(a.crossOrigin=n.crossOrigin+""),e.abrupt("return",a);case 14:case"end":return e.stop()}}),e,this)}))),lEe.apply(this,arguments)}function fEe(e){return e?function(t){return new Promise((function(n,r){e.readFile(t,(function(e,t){e?r(e):n(t)}))}))}:hEe}function hEe(){return dEe.apply(this,arguments)}function dEe(){return(dEe=(0,Lt.Z)(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:bpe("No file system access.");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pEe(e){return e?function(){var t=(0,Lt.Z)(S().mark((function t(n,r){var a,i,o;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Bpe({},this.options.http,r),i=r&&r.response,t.next=4,e(n,a);case 4:return o=t.sent,t.abrupt("return",o.ok?Zpe(o[i])?o[i]():o.text():bpe(o.status+""+o.statusText));case 6:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}():vEe}function vEe(){return gEe.apply(this,arguments)}function gEe(){return(gEe=(0,Lt.Z)(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:bpe("No HTTP fetch method available.");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mEe(e){var t=function(t,n){var r={delimiter:e};return yEe(t,n?Bpe(n,r):r)};return t.responseType="text",t}function yEe(e,t){return t.header&&(e=t.header.map(qpe).join(t.delimiter)+"\n"+e),qCe(t.delimiter).parse(e+"")}function bEe(e,t){var n,r=t&&t.property?wpe(t.property):kpe;return!Cpe(e)||(n=e,"function"===typeof Buffer&&Zpe(Buffer.isBuffer)&&Buffer.isBuffer(n))?r(JSON.parse(e)):function(e,t){!Spe(e)&&function(e){return e&&Zpe(e[Symbol.iterator])}(e)&&(e=(0,$n.Z)(e));return t&&t.copy?JSON.parse(JSON.stringify(e)):e}(r(e),t)}yEe.responseType="text",bEe.responseType="json";var xEe={interior:function(e,t){return e!==t},exterior:function(e,t){return e===t}};function wEe(e,t){var n,r,a,i;return e=bEe(e,t),t&&t.feature?(n=or,a=t.feature):t&&t.mesh?(n=lr,a=t.mesh,i=xEe[t.filter]):bpe("Missing TopoJSON feature or mesh parameter."),(r=(r=e.objects[a])?n(e,r,i):bpe("Invalid TopoJSON object: "+a))&&r.features||[r]}wEe.responseType="json";mEe(","),mEe("\t");var kEe=function(e,t){return function(n){return{options:n||{},sanitize:cEe,load:uEe,fileAccess:!!t,file:fEe(t),http:pEe(e)}}}("undefined"!==typeof fetch&&fetch,null),_Ee=0;var SEe="p_";function CEe(e){return e&&e.gradient}function EEe(e,t,n){var r=e.gradient,a=e.id,i="radial"===r?SEe:"";return a||(a=e.id="gradient_"+_Ee++,"radial"===r?(e.x1=AEe(e.x1,.5),e.y1=AEe(e.y1,.5),e.r1=AEe(e.r1,0),e.x2=AEe(e.x2,.5),e.y2=AEe(e.y2,.5),e.r2=AEe(e.r2,.5),i=SEe):(e.x1=AEe(e.x1,0),e.y1=AEe(e.y1,0),e.x2=AEe(e.x2,1),e.y2=AEe(e.y2,0))),t[a]=e,"url("+(n||"")+"#"+i+a+")"}function AEe(e,t){return null!=e?e:t}var NEe={basis:{curve:function(e){return new lSe(e)}},"basis-closed":{curve:function(e){return new hSe(e)}},"basis-open":{curve:function(e){return new dSe(e)}},bundle:{curve:vSe,tension:"beta",value:.85},cardinal:{curve:ySe,tension:"tension",value:0},"cardinal-open":{curve:xSe,tension:"tension",value:0},"cardinal-closed":{curve:kSe,tension:"tension",value:0},"catmull-rom":{curve:zSe,tension:"alpha",value:.5},"catmull-rom-closed":{curve:PSe,tension:"alpha",value:.5},"catmull-rom-open":{curve:nCe,tension:"alpha",value:.5},linear:{curve:aCe},"linear-closed":{curve:function(e){return new iCe(e)}},monotone:{horizontal:function(e){return new fCe(e)},vertical:function(e){return new lCe(e)}},natural:{curve:function(e){return new dCe(e)}},step:{curve:function(e){return new vCe(e,.5)}},"step-after":{curve:function(e){return new vCe(e,1)}},"step-before":{curve:function(e){return new vCe(e,0)}}};function TEe(e,t,n){var r=Lpe(NEe,e)&&NEe[e],a=null;return r&&(a=r.curve||r[t||"vertical"],r.tension&&null!=n&&(a=a[r.tension](n))),a}var MEe={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},DEe=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,FEe=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,IEe=/^((\s+,?\s*)|(,\s*))/,OEe=/^[01]/;function REe(e){var t=[];return(e.match(DEe)||[]).forEach((function(e){var n=e[0],r=n.toLowerCase(),a=MEe[r],i=function(e,t,n){for(var r=[],a=0;t&&a<n.length;)for(var i=0;i<t;++i){var o="a"!==e||3!==i&&4!==i?FEe:OEe,u=n.slice(a).match(o);if(null===u)throw Error("Invalid SVG path, incorrect parameter type");a+=u[0].length,r.push(+u[0]);var s=n.slice(a).match(IEe);null!==s&&(a+=s[0].length)}return r}(r,a,e.slice(1).trim()),o=i.length;if(o<a||o&&o%a!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([n].concat((0,$n.Z)(i.slice(0,a)))),o!==a){"m"===r&&(n="M"===n?"L":"l");for(var u=a;u<o;u+=a)t.push([n].concat((0,$n.Z)(i.slice(u,u+a))))}})),t}var ZEe=Math.PI/180,BEe=Math.PI/2,zEe=2*Math.PI,LEe=Math.sqrt(3)/2,PEe={},jEe={},UEe=[].join;function WEe(e){var t=UEe.call(e);if(jEe[t])return jEe[t];var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],u=e[5],s=e[6],c=e[7],l=c*o,f=-s*u,h=s*o,d=c*u,p=Math.cos(a),v=Math.sin(a),g=Math.cos(i),m=Math.sin(i),y=.5*(i-a),b=Math.sin(.5*y),x=8/3*b*b/Math.sin(y),w=n+p-x*v,k=r+v+x*p,_=n+g,S=r+m,C=_+x*m,E=S-x*g;return jEe[t]=[l*w+f*k,h*w+d*k,l*C+f*E,h*C+d*E,l*_+f*S,h*_+d*S]}var VEe=["l",0,0,0,0,0,0,0];function qEe(e,t,n){var r=VEe[0]=e[0];if("a"===r||"A"===r)VEe[1]=t*e[1],VEe[2]=n*e[2],VEe[3]=e[3],VEe[4]=e[4],VEe[5]=e[5],VEe[6]=t*e[6],VEe[7]=n*e[7];else if("h"===r||"H"===r)VEe[1]=t*e[1];else if("v"===r||"V"===r)VEe[1]=n*e[1];else for(var a=1,i=e.length;a<i;++a)VEe[a]=(a%2==1?t:n)*e[a];return VEe}function HEe(e,t,n,r,a,i){var o,u,s,c,l,f=null,h=0,d=0,p=0,v=0,g=0,m=0;null==n&&(n=0),null==r&&(r=0),null==a&&(a=1),null==i&&(i=a),e.beginPath&&e.beginPath();for(var y=0,b=t.length;y<b;++y){switch(o=t[y],1===a&&1===i||(o=qEe(o,a,i)),o[0]){case"l":h+=o[1],d+=o[2],e.lineTo(h+n,d+r);break;case"L":h=o[1],d=o[2],e.lineTo(h+n,d+r);break;case"h":h+=o[1],e.lineTo(h+n,d+r);break;case"H":h=o[1],e.lineTo(h+n,d+r);break;case"v":d+=o[1],e.lineTo(h+n,d+r);break;case"V":d=o[1],e.lineTo(h+n,d+r);break;case"m":g=h+=o[1],m=d+=o[2],e.moveTo(h+n,d+r);break;case"M":g=h=o[1],m=d=o[2],e.moveTo(h+n,d+r);break;case"c":u=h+o[5],s=d+o[6],p=h+o[3],v=d+o[4],e.bezierCurveTo(h+o[1]+n,d+o[2]+r,p+n,v+r,u+n,s+r),h=u,d=s;break;case"C":h=o[5],d=o[6],p=o[3],v=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,p+n,v+r,h+n,d+r);break;case"s":u=h+o[3],s=d+o[4],p=2*h-p,v=2*d-v,e.bezierCurveTo(p+n,v+r,h+o[1]+n,d+o[2]+r,u+n,s+r),p=h+o[1],v=d+o[2],h=u,d=s;break;case"S":u=o[3],s=o[4],p=2*h-p,v=2*d-v,e.bezierCurveTo(p+n,v+r,o[1]+n,o[2]+r,u+n,s+r),h=u,d=s,p=o[1],v=o[2];break;case"q":u=h+o[3],s=d+o[4],p=h+o[1],v=d+o[2],e.quadraticCurveTo(p+n,v+r,u+n,s+r),h=u,d=s;break;case"Q":u=o[3],s=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,u+n,s+r),h=u,d=s,p=o[1],v=o[2];break;case"t":u=h+o[1],s=d+o[2],null===f[0].match(/[QqTt]/)?(p=h,v=d):"t"===f[0]?(p=2*h-c,v=2*d-l):"q"===f[0]&&(p=2*h-p,v=2*d-v),c=p,l=v,e.quadraticCurveTo(p+n,v+r,u+n,s+r),d=s,p=(h=u)+o[1],v=d+o[2];break;case"T":u=o[1],s=o[2],p=2*h-p,v=2*d-v,e.quadraticCurveTo(p+n,v+r,u+n,s+r),h=u,d=s;break;case"a":GEe(e,h+n,d+r,[o[1],o[2],o[3],o[4],o[5],o[6]+h+n,o[7]+d+r]),h+=o[6],d+=o[7];break;case"A":GEe(e,h+n,d+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),h=o[6],d=o[7];break;case"z":case"Z":h=g,d=m,e.closePath()}f=o}}function GEe(e,t,n,r){for(var a=function(e,t,n,r,a,i,o,u,s){var c=UEe.call(arguments);if(PEe[c])return PEe[c];var l=o*ZEe,f=Math.sin(l),h=Math.cos(l),d=h*(u-e)*.5+f*(s-t)*.5,p=h*(s-t)*.5-f*(u-e)*.5,v=d*d/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);v>1&&(n*=v=Math.sqrt(v),r*=v);var g=h/n,m=f/n,y=-f/r,b=h/r,x=g*u+m*s,w=y*u+b*s,k=g*e+m*t,_=y*e+b*t,S=1/((k-x)*(k-x)+(_-w)*(_-w))-.25;S<0&&(S=0);var C=Math.sqrt(S);i==a&&(C=-C);var E=.5*(x+k)-C*(_-w),A=.5*(w+_)+C*(k-x),N=Math.atan2(w-A,x-E),T=Math.atan2(_-A,k-E)-N;T<0&&1===i?T+=zEe:T>0&&0===i&&(T-=zEe);for(var M=Math.ceil(Math.abs(T/(BEe+.001))),D=[],F=0;F<M;++F){var I=N+F*T/M,O=N+(F+1)*T/M;D[F]=[E,A,I,O,n,r,f,h]}return PEe[c]=D}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n),i=0;i<a.length;++i){var o=WEe(a[i]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}var XEe=.5773502691896257,YEe={circle:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,zEe)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,a=n/2.5,i=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-i),e.lineTo(a,-i),e.lineTo(0,-n),e.lineTo(-a,-i),e.lineTo(-r,-i),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=LEe*n,a=r-n*XEe,i=n/4;e.moveTo(0,-r-a),e.lineTo(-i,r-a),e.lineTo(i,r-a),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=LEe*n,a=r-n*XEe;e.moveTo(0,-r-a),e.lineTo(-n,r-a),e.lineTo(n,r-a),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=LEe*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=LEe*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=LEe*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=LEe*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function KEe(e){return Lpe(YEe,e)?YEe[e]:function(e){if(!Lpe($Ee,e)){var t=REe(e);$Ee[e]={draw:function(e,n){HEe(e,t,0,0,Math.sqrt(n)/2)}}}return $Ee[e]}(e)}var $Ee={};var QEe=.448084975506;function JEe(e){return e.x}function eAe(e){return e.y}function tAe(e){return e.width}function nAe(e){return e.height}function rAe(e){return"function"===typeof e?e:function(){return+e}}function aAe(e,t,n){return Math.max(t,Math.min(e,n))}function iAe(e,t){return null!=e?e:t}var oAe=function(e){return e.x||0},uAe=function(e){return e.y||0},sAe=function(e){return!(!1===e.defined)},cAe=function(){var e=CCe,t=ECe,n=gCe(0),r=null,a=ACe,i=NCe,o=TCe,u=null,s=SCe(c);function c(){var c,l,f=+e.apply(this,arguments),h=+t.apply(this,arguments),d=a.apply(this,arguments)-FSe,p=i.apply(this,arguments)-FSe,v=_Se(p-d),g=p>d;if(u||(u=c=s()),h<f&&(l=h,h=f,f=l),h>MSe)if(v>ISe-MSe)u.moveTo(h*CSe(d),h*NSe(d)),u.arc(0,0,h,d,p,!g),f>MSe&&(u.moveTo(f*CSe(p),f*NSe(p)),u.arc(0,0,f,p,d,g));else{var m,y,b=d,x=p,w=d,k=p,_=v,S=v,C=o.apply(this,arguments)/2,E=C>MSe&&(r?+r.apply(this,arguments):TSe(f*f+h*h)),A=ASe(_Se(h-f)/2,+n.apply(this,arguments)),N=A,T=A;if(E>MSe){var M=RSe(E/f*NSe(C)),D=RSe(E/h*NSe(C));(_-=2*M)>MSe?(w+=M*=g?1:-1,k-=M):(_=0,w=k=(d+p)/2),(S-=2*D)>MSe?(b+=D*=g?1:-1,x-=D):(S=0,b=x=(d+p)/2)}var F=h*CSe(b),I=h*NSe(b),O=f*CSe(k),R=f*NSe(k);if(A>MSe){var Z,B=h*CSe(x),z=h*NSe(x),L=f*CSe(w),P=f*NSe(w);if(v<DSe)if(Z=MCe(F,I,L,P,B,z,O,R)){var j=F-Z[0],U=I-Z[1],W=B-Z[0],V=z-Z[1],q=1/NSe(OSe((j*W+U*V)/(TSe(j*j+U*U)*TSe(W*W+V*V)))/2),H=TSe(Z[0]*Z[0]+Z[1]*Z[1]);N=ASe(A,(f-H)/(q-1)),T=ASe(A,(h-H)/(q+1))}else N=T=0}S>MSe?T>MSe?(m=DCe(L,P,F,I,h,T,g),y=DCe(B,z,O,R,h,T,g),u.moveTo(m.cx+m.x01,m.cy+m.y01),T<A?u.arc(m.cx,m.cy,T,SSe(m.y01,m.x01),SSe(y.y01,y.x01),!g):(u.arc(m.cx,m.cy,T,SSe(m.y01,m.x01),SSe(m.y11,m.x11),!g),u.arc(0,0,h,SSe(m.cy+m.y11,m.cx+m.x11),SSe(y.cy+y.y11,y.cx+y.x11),!g),u.arc(y.cx,y.cy,T,SSe(y.y11,y.x11),SSe(y.y01,y.x01),!g))):(u.moveTo(F,I),u.arc(0,0,h,b,x,!g)):u.moveTo(F,I),f>MSe&&_>MSe?N>MSe?(m=DCe(O,R,B,z,f,-N,g),y=DCe(F,I,L,P,f,-N,g),u.lineTo(m.cx+m.x01,m.cy+m.y01),N<A?u.arc(m.cx,m.cy,N,SSe(m.y01,m.x01),SSe(y.y01,y.x01),!g):(u.arc(m.cx,m.cy,N,SSe(m.y01,m.x01),SSe(m.y11,m.x11),!g),u.arc(0,0,f,SSe(m.cy+m.y11,m.cx+m.x11),SSe(y.cy+y.y11,y.cx+y.x11),g),u.arc(y.cx,y.cy,N,SSe(y.y11,y.x11),SSe(y.y01,y.x01),!g))):u.arc(0,0,f,k,w,g):u.lineTo(O,R)}else u.moveTo(0,0);if(u.closePath(),c)return u=null,c+""||null}return c.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+a.apply(this,arguments)+ +i.apply(this,arguments))/2-DSe/2;return[CSe(r)*n,NSe(r)*n]},c.innerRadius=function(t){return arguments.length?(e="function"===typeof t?t:gCe(+t),c):e},c.outerRadius=function(e){return arguments.length?(t="function"===typeof e?e:gCe(+e),c):t},c.cornerRadius=function(e){return arguments.length?(n="function"===typeof e?e:gCe(+e),c):n},c.padRadius=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:gCe(+e),c):r},c.startAngle=function(e){return arguments.length?(a="function"===typeof e?e:gCe(+e),c):a},c.endAngle=function(e){return arguments.length?(i="function"===typeof e?e:gCe(+e),c):i},c.padAngle=function(e){return arguments.length?(o="function"===typeof e?e:gCe(+e),c):o},c.context=function(e){return arguments.length?(u=null==e?null:e,c):u},c}().startAngle((function(e){return e.startAngle||0})).endAngle((function(e){return e.endAngle||0})).padAngle((function(e){return e.padAngle||0})).innerRadius((function(e){return e.innerRadius||0})).outerRadius((function(e){return e.outerRadius||0})).cornerRadius((function(e){return e.cornerRadius||0})),lAe=ZCe().x(oAe).y1(uAe).y0((function(e){return(e.y||0)+(e.height||0)})).defined(sAe),fAe=ZCe().y(uAe).x1(oAe).x0((function(e){return(e.x||0)+(e.width||0)})).defined(sAe),hAe=RCe().x(oAe).y(uAe).defined(sAe),dAe=function(){var e=JEe,t=eAe,n=tAe,r=nAe,a=rAe(0),i=a,o=a,u=a,s=null;function c(c,l,f){var h,d=null!=l?l:+e.call(this,c),p=null!=f?f:+t.call(this,c),v=+n.call(this,c),g=+r.call(this,c),m=Math.min(v,g)/2,y=aAe(+a.call(this,c),0,m),b=aAe(+i.call(this,c),0,m),x=aAe(+o.call(this,c),0,m),w=aAe(+u.call(this,c),0,m);if(s||(s=h=_Ce()),y<=0&&b<=0&&x<=0&&w<=0)s.rect(d,p,v,g);else{var k=d+v,_=p+g;s.moveTo(d+y,p),s.lineTo(k-b,p),s.bezierCurveTo(k-QEe*b,p,k,p+QEe*b,k,p+b),s.lineTo(k,_-w),s.bezierCurveTo(k,_-QEe*w,k-QEe*w,_,k-w,_),s.lineTo(d+x,_),s.bezierCurveTo(d+QEe*x,_,d,_-QEe*x,d,_-x),s.lineTo(d,p+y),s.bezierCurveTo(d,p+QEe*y,d+QEe*y,p,d+y,p),s.closePath()}if(h)return s=null,h+""||null}return c.x=function(t){return arguments.length?(e=rAe(t),c):e},c.y=function(e){return arguments.length?(t=rAe(e),c):t},c.width=function(e){return arguments.length?(n=rAe(e),c):n},c.height=function(e){return arguments.length?(r=rAe(e),c):r},c.cornerRadius=function(e,t,n,r){return arguments.length?(a=rAe(e),i=null!=t?rAe(t):a,u=null!=n?rAe(n):a,o=null!=r?rAe(r):i,c):a},c.context=function(e){return arguments.length?(s=null==e?null:e,c):s},c}().x(oAe).y(uAe).width((function(e){return e.width||0})).height((function(e){return e.height||0})).cornerRadius((function(e){return iAe(e.cornerRadiusTopLeft,e.cornerRadius)||0}),(function(e){return iAe(e.cornerRadiusTopRight,e.cornerRadius)||0}),(function(e){return iAe(e.cornerRadiusBottomRight,e.cornerRadius)||0}),(function(e){return iAe(e.cornerRadiusBottomLeft,e.cornerRadius)||0})),pAe=function(e,t){var n=null,r=SCe(a);function a(){var a;if(n||(n=a=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return e="function"===typeof e?e:gCe(e||BCe),t="function"===typeof t?t:gCe(void 0===t?64:+t),a.type=function(t){return arguments.length?(e="function"===typeof t?t:gCe(t),a):e},a.size=function(e){return arguments.length?(t="function"===typeof e?e:gCe(+e),a):t},a.context=function(e){return arguments.length?(n=null==e?null:e,a):n},a}().type((function(e){return KEe(e.shape||"circle")})).size((function(e){return iAe(e.size,64)})),vAe=function(){var e,t,n,r,a,i,o,u,s=null;function c(e,t,n){var r=n/2;if(a){var c=o-t,l=e-i;if(c||l){var f=Math.hypot(c,l),h=(c/=f)*u,d=(l/=f)*u,p=Math.atan2(l,c);s.moveTo(i-h,o-d),s.lineTo(e-c*r,t-l*r),s.arc(e,t,r,p-Math.PI,p),s.lineTo(i+h,o+d),s.arc(i,o,u,p,p+Math.PI)}else s.arc(e,t,r,0,zEe);s.closePath()}else a=1;i=e,o=t,u=r}function l(i){var o,u,l,f=i.length,h=!1;for(null==s&&(s=l=_Ce()),o=0;o<=f;++o)!(o<f&&r(u=i[o],o,i))===h&&(h=!h)&&(a=0),h&&c(+e(u,o,i),+t(u,o,i),+n(u,o,i));if(l)return s=null,l+""||null}return l.x=function(t){return arguments.length?(e=t,l):e},l.y=function(e){return arguments.length?(t=e,l):t},l.size=function(e){return arguments.length?(n=e,l):n},l.defined=function(e){return arguments.length?(r=e,l):r},l.context=function(e){return arguments.length?(s=null==e?null:e,l):s},l}().x(oAe).y(uAe).defined(sAe).size((function(e){return e.size||1}));function gAe(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function mAe(e,t,n,r){return dAe.context(e)(t,n,r)}var yAe=1;function bAe(e,t,n){var r=t.clip,a=e._defs,i=t.clip_id||(t.clip_id="clip"+yAe++),o=a.clipping[i]||(a.clipping[i]={id:i});return Zpe(r)?o.path=r(null):gAe(n)?o.path=mAe(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+i+")"}function xAe(e){this.clear(),e&&this.union(e)}function wAe(e){this.mark=e,this.bounds=this.bounds||new xAe}function kAe(e){wAe.call(this,e),this.items=this.items||[]}function _Ae(e){this._pending=0,this._loader=e||kEe()}function SAe(e){e._pending+=1}function CAe(e){e._pending-=1}function EAe(e,t,n){if(t.stroke&&0!==t.opacity&&0!==t.strokeOpacity){var r=null!=t.strokeWidth?+t.strokeWidth:1;e.expand(r+(n?function(e,t){return e.strokeJoin&&"miter"!==e.strokeJoin?0:t}(t,r):0))}return e}xAe.prototype={clone:function(){return new xAe(this)},clear:function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty:function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals:function(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set:function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add:function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand:function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round:function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale:function(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate:function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate:function(e,t,n){var r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints:function(e,t,n){var r=this.x1,a=this.y1,i=this.x2,o=this.y2,u=Math.cos(e),s=Math.sin(e),c=t-t*u+n*s,l=n-t*s-n*u;return[u*r-s*a+c,s*r+u*a+l,u*r-s*o+c,s*r+u*o+l,u*i-s*a+c,s*i+u*a+l,u*i-s*o+c,s*i+u*o+l]},union:function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect:function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses:function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith:function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects:function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains:function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1}},Ppe(kAe,wAe),_Ae.prototype={pending:function(){return this._pending},sanitizeURL:function(e){var t=this;return SAe(t),t._loader.sanitize(e,{context:"href"}).then((function(e){return CAe(t),e})).catch((function(){return CAe(t),null}))},loadImage:function(e){var t=this,n=Qd();return SAe(t),t._loader.sanitize(e,{context:"image"}).then((function(e){var r=e.href;if(!r||!n)throw{url:r};var a=new n,i=Lpe(e,"crossOrigin")?e.crossOrigin:"anonymous";return null!=i&&(a.crossOrigin=i),a.onload=function(){return CAe(t)},a.onerror=function(){return CAe(t)},a.src=r,a})).catch((function(e){return CAe(t),{complete:!1,width:0,height:0,src:e&&e.url||""}}))},ready:function(){var e=this;return new Promise((function(t){!function n(r){e.pending()?setTimeout((function(){n(!0)}),10):t(r)}(!1)}))}};var AAe,NAe,TAe,MAe,DAe,FAe,IAe,OAe,RAe=zEe-1e-8,ZAe=function(e,t){return AAe.add(e,t)},BAe=function(e,t){return ZAe(NAe=e,TAe=t)},zAe=function(e){return ZAe(e,AAe.y1)},LAe=function(e){return ZAe(AAe.x1,e)},PAe=function(e,t){return DAe*e+IAe*t},jAe=function(e,t){return FAe*e+OAe*t},UAe=function(e,t){return ZAe(PAe(e,t),jAe(e,t))},WAe=function(e,t){return BAe(PAe(e,t),jAe(e,t))};function VAe(e,t){return AAe=e,t?(MAe=t*ZEe,DAe=OAe=Math.cos(MAe),FAe=Math.sin(MAe),IAe=-FAe):(DAe=OAe=1,MAe=FAe=IAe=0),qAe}var qAe={beginPath:function(){},closePath:function(){},moveTo:WAe,lineTo:WAe,rect:function(e,t,n,r){MAe?(UAe(e+n,t),UAe(e+n,t+r),UAe(e,t+r),WAe(e,t)):(ZAe(e+n,t+r),BAe(e,t))},quadraticCurveTo:function(e,t,n,r){var a=PAe(e,t),i=jAe(e,t),o=PAe(n,r),u=jAe(n,r);HAe(NAe,a,o,zAe),HAe(TAe,i,u,LAe),BAe(o,u)},bezierCurveTo:function(e,t,n,r,a,i){var o=PAe(e,t),u=jAe(e,t),s=PAe(n,r),c=jAe(n,r),l=PAe(a,i),f=jAe(a,i);GAe(NAe,o,s,l,zAe),GAe(TAe,u,c,f,LAe),BAe(l,f)},arc:function(e,t,n,r,a,i){if(r+=MAe,a+=MAe,NAe=n*Math.cos(a)+e,TAe=n*Math.sin(a)+t,Math.abs(a-r)>RAe)ZAe(e-n,t-n),ZAe(e+n,t+n);else{var o,u,s=function(r){return ZAe(n*Math.cos(r)+e,n*Math.sin(r)+t)};if(s(r),s(a),a!==r)if((r%=zEe)<0&&(r+=zEe),(a%=zEe)<0&&(a+=zEe),a<r&&(i=!i,o=r,r=a,a=o),i)for(a-=zEe,o=r-r%BEe,u=0;u<4&&o>a;++u,o-=BEe)s(o);else for(o=r-r%BEe+BEe,u=0;u<4&&o<a;++u,o+=BEe)s(o)}}};function HAe(e,t,n,r){var a=(e-t)/(e+n-2*t);0<a&&a<1&&r(e+(t-e)*a)}function GAe(e,t,n,r,a){var i,o=r-e+3*t-3*n,u=e+n-2*t,s=e-t,c=0,l=0;Math.abs(o)>1e-14?(i=u*u+s*o)>=0&&(c=(-u+(i=Math.sqrt(i)))/o,l=(-u-i)/o):c=.5*s/u,0<c&&c<1&&a(XAe(c,e,t,n,r)),0<l&&l<1&&a(XAe(l,e,t,n,r))}function XAe(e,t,n,r,a){var i=1-e,o=i*i,u=e*e;return o*i*t+3*o*e*n+3*i*u*r+u*e*a}var YAe=(YAe=$d(1,1))?YAe.getContext("2d"):null,KAe=new xAe;function $Ae(e){return function(t,n){if(!YAe)return!0;e(YAe,t),KAe.clear().union(t.bounds).intersect(n).round();for(var r=KAe.x1,a=KAe.y1,i=KAe.x2,o=KAe.y2,u=a;u<=o;++u)for(var s=r;s<=i;++s)if(YAe.isPointInPath(s,u))return!0;return!1}}function QAe(e,t){return t.contains(e.x||0,e.y||0)}function JAe(e,t){var n=e.x||0,r=e.y||0,a=e.width||0,i=e.height||0;return t.intersects(KAe.set(n,r,n+a,r+i))}function eNe(e,t,n,r,a){var i,o,u,s,c=e.x1,l=e.y1,f=e.x2,h=e.y2,d=r-t,p=a-n,v=0,g=1;for(s=0;s<4;++s){if(0===s&&(i=-d,o=-(c-t)),1===s&&(i=d,o=f-t),2===s&&(i=-p,o=-(l-n)),3===s&&(i=p,o=h-n),Math.abs(i)<1e-10&&o<0)return!1;if(u=o/i,i<0){if(u>g)return!1;u>v&&(v=u)}else if(i>0){if(u<v)return!1;u<g&&(g=u)}}return!0}function tNe(e,t){e.globalCompositeOperation=t.blend||"source-over"}function nNe(e,t){return null==e?t:e}function rNe(e,t){for(var n=t.length,r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function aNe(e,t,n){return CEe(n)?function(e,t,n){var r,a=n.width(),i=n.height();if("radial"===t.gradient)r=e.createRadialGradient(n.x1+nNe(t.x1,.5)*a,n.y1+nNe(t.y1,.5)*i,Math.max(a,i)*nNe(t.r1,0),n.x1+nNe(t.x2,.5)*a,n.y1+nNe(t.y2,.5)*i,Math.max(a,i)*nNe(t.r2,.5));else{var o=nNe(t.x1,0),u=nNe(t.y1,0),s=nNe(t.x2,1),c=nNe(t.y2,0);if(o!==s&&u!==c&&a!==i){var l=$d(Math.ceil(a),Math.ceil(i)),f=l.getContext("2d");return f.scale(a,i),f.fillStyle=rNe(f.createLinearGradient(o,u,s,c),t.stops),f.fillRect(0,0,a,i),e.createPattern(l,"no-repeat")}r=e.createLinearGradient(n.x1+o*a,n.y1+u*i,n.x1+s*a,n.y1+c*i)}return rNe(r,t.stops)}(e,n,t.bounds):n}function iNe(e,t,n){return(n*=null==t.fillOpacity?1:t.fillOpacity)>0&&(e.globalAlpha=n,e.fillStyle=aNe(e,t,t.fill),!0)}var oNe=[];function uNe(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&((n*=null==t.strokeOpacity?1:t.strokeOpacity)>0&&(e.globalAlpha=n,e.strokeStyle=aNe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||oNe),e.lineDashOffset=t.strokeDashOffset||0),!0))}function sNe(e,t){return e.zindex-t.zindex||e.index-t.index}function cNe(e){if(!e.zdirty)return e.zitems;var t,n,r,a=e.items,i=[];for(n=0,r=a.length;n<r;++n)(t=a[n]).index=n,t.zindex&&i.push(t);return e.zdirty=!1,e.zitems=i.sort(sNe)}function lNe(e,t){var n,r,a=e.items;if(a&&a.length){var i=cNe(e);if(i&&i.length){for(n=0,r=a.length;n<r;++n)a[n].zindex||t(a[n]);a=i}for(n=0,r=a.length;n<r;++n)t(a[n])}}function fNe(e,t){var n,r,a=e.items;if(!a||!a.length)return null;var i=cNe(e);for(i&&i.length&&(a=i),r=a.length;--r>=0;)if(n=t(a[r]))return n;if(a===i)for(r=(a=e.items).length;--r>=0;)if(!a[r].zindex&&(n=t(a[r])))return n;return null}function hNe(e){return function(t,n,r){lNe(n,(function(n){r&&!r.intersects(n.bounds)||pNe(e,t,n,n)}))}}function dNe(e){return function(t,n,r){!n.items.length||r&&!r.intersects(n.bounds)||pNe(e,t,n.items[0],n.items)}}function pNe(e,t,n,r){var a=null==n.opacity?1:n.opacity;0!==a&&(e(t,r)||(tNe(t,n),n.fill&&iNe(t,n,a)&&t.fill(),n.stroke&&uNe(t,n,a)&&t.stroke()))}function vNe(e){return e=e||_pe,function(t,n,r,a,i,o){return r*=t.pixelRatio,a*=t.pixelRatio,fNe(n,(function(n){var u=n.bounds;if((!u||u.contains(i,o))&&u)return e(t,n,r,a,i,o)?n:void 0}))}}function gNe(e,t){return function(n,r,a,i){var o,u,s=Array.isArray(r)?r[0]:r,c=null==t?s.fill:t,l=s.stroke&&n.isPointInStroke;return l&&(o=s.strokeWidth,u=s.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=u?u:"butt"),!e(n,r)&&(c&&n.isPointInPath(a,i)||l&&n.isPointInStroke(a,i))}}function mNe(e){return vNe(gNe(e))}function yNe(e,t){return"translate("+e+","+t+")"}function bNe(e){return"rotate("+e+")"}function xNe(e){return yNe(e.x||0,e.y||0)}function wNe(e,t,n){function r(e,n){var r=n.x||0,a=n.y||0,i=n.angle||0;e.translate(r,a),i&&e.rotate(i*=ZEe),e.beginPath(),t(e,n),i&&e.rotate(-i),e.translate(-r,-a)}return{type:e,tag:"path",nested:!1,attr:function(e,n){e("transform",function(e){return yNe(e.x||0,e.y||0)+(e.angle?" "+bNe(e.angle):"")}(n)),e("d",t(null,n))},bound:function(e,n){return t(VAe(e,n.angle),n),EAe(e,n).translate(n.x||0,n.y||0)},draw:hNe(r),pick:mNe(r),isect:n||$Ae(r)}}var kNe=wNe("arc",(function(e,t){return cAe.context(e)(t)}));function _Ne(e,t,n){function r(e,n){e.beginPath(),t(e,n)}var a=gNe(r);return{type:e,tag:"path",nested:!0,attr:function(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))},bound:function(e,n){var r=n.items;return 0===r.length?e:(t(VAe(e),r),EAe(e,r[0]))},draw:dNe(r),pick:function(e,t,n,r,i,o){var u=t.items,s=t.bounds;return!u||!u.length||s&&!s.contains(i,o)?null:(n*=e.pixelRatio,r*=e.pixelRatio,a(e,u,n,r)?u[0]:null)},isect:QAe,tip:n}}var SNe=_Ne("area",(function(e,t){var n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?fAe:lAe).curve(TEe(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,a="horizontal"===e[0].orient?t[1]:t[0],i="horizontal"===e[0].orient?"y":"x",o=e.length,u=1/0;--o>=0;)!1!==e[o].defined&&(r=Math.abs(e[o][i]-a))<u&&(u=r,n=e[o]);return n}));function CNe(e,t){e.beginPath(),gAe(t)?mAe(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function ENe(e){var t=nNe(e.strokeWidth,1);return null!=e.strokeOffset?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function ANe(e,t){var n=ENe(t);e("d",mAe(null,t,n,n))}function NNe(e,t,n,r){var a=ENe(t);e.beginPath(),mAe(e,t,(n||0)+a,(r||0)+a)}var TNe=gNe(NNe),MNe=gNe(NNe,!1),DNe=gNe(NNe,!0);var FNe={type:"group",tag:"g",nested:!1,attr:function(e,t){e("transform",xNe(t))},bound:function(e,t){if(!t.clip&&t.items)for(var n=t.items,r=n.length,a=0;a<r;++a)e.union(n[a].bounds);return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),EAe(e,t),e.translate(t.x||0,t.y||0)},draw:function(e,t,n,r){var a=this;lNe(t,(function(t){var i=t.x||0,o=t.y||0,u=t.strokeForeground,s=null==t.opacity?1:t.opacity;(t.stroke||t.fill)&&s&&(NNe(e,t,i,o),tNe(e,t),t.fill&&iNe(e,t,s)&&e.fill(),t.stroke&&!u&&uNe(e,t,s)&&e.stroke()),e.save(),e.translate(i,o),t.clip&&CNe(e,t),n&&n.translate(-i,-o),lNe(t,(function(t){("group"===t.marktype||null==r||r.includes(t.marktype))&&a.draw(e,t,n,r)})),n&&n.translate(i,o),e.restore(),u&&t.stroke&&s&&(NNe(e,t,i,o),tNe(e,t),uNe(e,t,s)&&e.stroke())}))},pick:function(e,t,n,r,a,i){var o=this;if(t.bounds&&!t.bounds.contains(a,i)||!t.items)return null;var u=n*e.pixelRatio,s=r*e.pixelRatio;return fNe(t,(function(c){var l,f,h,d=c.bounds;if(!d||d.contains(a,i)){f=c.x||0,h=c.y||0;var p=f+(c.width||0),v=h+(c.height||0),g=c.clip;if(!g||!(a<f||a>p||i<h||i>v)){if(e.save(),e.translate(f,h),f=a-f,h=i-h,g&&gAe(c)&&!DNe(e,c,u,s))return e.restore(),null;var m=c.strokeForeground,y=!1!==t.interactive;return y&&m&&c.stroke&&MNe(e,c,u,s)?(e.restore(),c):(!(l=fNe(c,(function(e){return function(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}(e,f,h)?o.pick(e,n,r,f,h):null})))&&y&&(c.fill||!m&&c.stroke)&&TNe(e,c,u,s)&&(l=c),e.restore(),l||null)}}}))},isect:JAe,content:function(e,t,n){e("clip-path",t.clip?bAe(n,t,t):null)},background:function(e,t){e("class","background"),e("aria-hidden",!0),ANe(e,t)},foreground:function(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?ANe(e,t):e("d","")}},INe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function ONe(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then((function(t){e.image=t,e.image.url=e.url}))),n}function RNe(e,t){return null!=e.width?e.width:t&&t.width?!1!==e.aspect&&e.height?e.height*t.width/t.height:t.width:0}function ZNe(e,t){return null!=e.height?e.height:t&&t.height?!1!==e.aspect&&e.width?e.width*t.height/t.width:t.height:0}function BNe(e,t){return"center"===e?t/2:"right"===e?t:0}function zNe(e,t){return"middle"===e?t/2:"bottom"===e?t:0}var LNe={type:"image",tag:"image",nested:!1,attr:function(e,t,n){var r=ONe(t,n),a=RNe(t,r),i=ZNe(t,r),o=(t.x||0)-BNe(t.align,a),u=(t.y||0)-zNe(t.baseline,i);e("href",!r.src&&r.toDataURL?r.toDataURL():r.src||"",INe["xmlns:xlink"],"xlink:href"),e("transform",yNe(o,u)),e("width",a),e("height",i),e("preserveAspectRatio",!1===t.aspect?"none":"xMidYMid")},bound:function(e,t){var n=t.image,r=RNe(t,n),a=ZNe(t,n),i=(t.x||0)-BNe(t.align,r),o=(t.y||0)-zNe(t.baseline,a);return e.set(i,o,i+r,o+a)},draw:function(e,t,n){var r=this;lNe(t,(function(t){if(!n||n.intersects(t.bounds)){var a=ONe(t,r),i=RNe(t,a),o=ZNe(t,a);if(0!==i&&0!==o){var u,s,c,l,f=(t.x||0)-BNe(t.align,i),h=(t.y||0)-zNe(t.baseline,o);!1!==t.aspect&&(s=a.width/a.height,c=t.width/t.height,s===s&&c===c&&s!==c&&(c<s?(h+=(o-(l=i/s))/2,o=l):(f+=(i-(l=o*s))/2,i=l))),(a.complete||a.toDataURL)&&(tNe(e,t),e.globalAlpha=null!=(u=t.opacity)?u:1,e.imageSmoothingEnabled=!1!==t.smooth,e.drawImage(a,f,h,i,o))}}}))},pick:vNe(),isect:_pe,get:ONe,xOffset:BNe,yOffset:zNe},PNe=_Ne("line",(function(e,t){var n=t[0],r=n.interpolate||"linear";return hAe.curve(TEe(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,a=Math.pow(e[0].strokeWidth||1,2),i=e.length;--i>=0;)if(!1!==e[i].defined&&(n=e[i].x-t[0])*n+(r=e[i].y-t[1])*r<a)return e[i];return null}));function jNe(e,t){var n=t.path;if(null==n)return!0;var r=t.x||0,a=t.y||0,i=t.scaleX||1,o=t.scaleY||1,u=(t.angle||0)*ZEe,s=t.pathCache;s&&s.path===n||((t.pathCache=s=REe(n)).path=n),u&&e.rotate&&e.translate?(e.translate(r,a),e.rotate(u),HEe(e,s,0,0,i,o),e.rotate(-u),e.translate(-r,-a)):HEe(e,s,r,a,i,o)}var UNe={type:"path",tag:"path",nested:!1,attr:function(e,t){var n=t.scaleX||1,r=t.scaleY||1;1===n&&1===r||e("vector-effect","non-scaling-stroke"),e("transform",function(e){return yNe(e.x||0,e.y||0)+(e.angle?" "+bNe(e.angle):"")+(e.scaleX||e.scaleY?" "+function(e,t){return"scale("+e+","+t+")"}(e.scaleX||1,e.scaleY||1):"")}(t)),e("d",t.path)},bound:function(e,t){return jNe(VAe(e,t.angle),t)?e.set(0,0,0,0):EAe(e,t,!0)},draw:hNe(jNe),pick:mNe(jNe),isect:$Ae(jNe)};function WNe(e,t){e.beginPath(),mAe(e,t)}var VNe={type:"rect",tag:"path",nested:!1,attr:function(e,t){e("d",mAe(null,t))},bound:function(e,t){var n,r;return EAe(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)},draw:hNe(WNe),pick:mNe(WNe),isect:JAe};function qNe(e,t,n){var r,a,i,o;return!(!t.stroke||!uNe(e,t,n))&&(r=t.x||0,a=t.y||0,i=null!=t.x2?t.x2:r,o=null!=t.y2?t.y2:a,e.beginPath(),e.moveTo(r,a),e.lineTo(i,o),!0)}var HNe={type:"rule",tag:"line",nested:!1,attr:function(e,t){e("transform",xNe(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function(e,t){var n,r;return EAe(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)},draw:function(e,t,n){lNe(t,(function(t){if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&qNe(e,t,r)&&(tNe(e,t),e.stroke())}}))},pick:vNe((function(e,t,n,r){return!!e.isPointInStroke&&(qNe(e,t,1)&&e.isPointInStroke(n,r))})),isect:function(e,t){var n=e.x||0,r=e.y||0;return eNe(t,n,r,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r)}},GNe=wNe("shape",(function(e,t){return(t.mark.shape||t.shape).context(e)(t)})),XNe=wNe("symbol",(function(e,t){return pAe.context(e)(t)}),QAe),YNe=function(e){var t,n,r;e=+e||1e4;var a=function(){t={},n={},r=0},i=function(a,i){return++r>e&&(n=t,t={},r=1),t[a]=i};return a(),{clear:a,has:function(e){return Lpe(t,e)||Lpe(n,e)},get:function(e){return Lpe(t,e)?t[e]:Lpe(n,e)?i(e,n[e]):void 0},set:function(e,n){return Lpe(t,e)?t[e]=n:i(e,n)}}}(),KNe={height:nTe,measureWidth:eTe,estimateWidth:QNe,width:QNe,canvas:$Ne};function $Ne(e){KNe.width=e&&YAe?eTe:QNe}function QNe(e,t){return JNe(iTe(e,t),nTe(e))}function JNe(e,t){return~~(.8*e.length*t)}function eTe(e,t){return nTe(e)<=0||!(t=iTe(e,t))?0:tTe(t,uTe(e))}function tTe(e,t){var n="(".concat(t,") ").concat(e),r=YNe.get(n);return void 0===r&&(YAe.font=t,r=YAe.measureText(e).width,YNe.set(n,r)),r}function nTe(e){return null!=e.fontSize?+e.fontSize||0:11}function rTe(e){return null!=e.lineHeight?e.lineHeight:nTe(e)+2}function aTe(e){return t=e.lineBreak&&e.text&&!Spe(e.text)?e.text.split(e.lineBreak):e.text,Spe(t)?t.length>1?t:t[0]:t;var t}function iTe(e,t){var n=null==t?"":(t+"").trim();return e.limit>0&&n.length?function(e,t){var n=+e.limit,r=function(e){if(KNe.width===eTe){var t=uTe(e);return function(e){return tTe(e,t)}}if(KNe.width===QNe){var n=nTe(e);return function(e){return JNe(e,n)}}return function(t){return KNe.width(e,t)}}(e);if(r(t)<n)return t;var a,i=e.ellipsis||"\u2026",o="rtl"===e.dir,u=0,s=t.length;if(n-=r(i),o){for(;u<s;)a=u+s>>>1,r(t.slice(a))>n?u=a+1:s=a;return i+t.slice(u)}for(;u<s;)a=1+(u+s>>>1),r(t.slice(0,a))<n?u=a:s=a-1;return t.slice(0,u)+i}(e,n):n}function oTe(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function uTe(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+nTe(e)+"px "+oTe(e,t)}function sTe(e){var t=e.baseline,n=nTe(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:"line-top"===t?.29*n+.5*rTe(e):"line-bottom"===t?.29*n-.5*rTe(e):0)}$Ne(!0);var cTe={left:"start",center:"middle",right:"end"},lTe=new xAe;function fTe(e){var t,n=e.x||0,r=e.y||0,a=e.radius||0;return a&&(t=(e.theta||0)-BEe,n+=a*Math.cos(t),r+=a*Math.sin(t)),lTe.x1=n,lTe.y1=r,lTe}function hTe(e,t,n){var r,a=KNe.height(t),i=t.align,o=fTe(t),u=o.x1,s=o.y1,c=t.dx||0,l=(t.dy||0)+sTe(t)-Math.round(.8*a),f=aTe(t);if(Spe(f)?(a+=rTe(t)*(f.length-1),r=f.reduce((function(e,n){return Math.max(e,KNe.width(t,n))}),0)):r=KNe.width(t,f),"center"===i?c-=r/2:"right"===i&&(c-=r),e.set(c+=u,l+=s,c+r,l+a),t.angle&&!n)e.rotate(t.angle*ZEe,u,s);else if(2===n)return e.rotatedPoints(t.angle*ZEe,u,s);return e}var dTe={type:"text",tag:"text",nested:!1,attr:function(e,t){var n,r=t.dx||0,a=(t.dy||0)+sTe(t),i=fTe(t),o=i.x1,u=i.y1,s=t.angle||0;e("text-anchor",cTe[t.align]||"start"),s?(n=yNe(o,u)+" "+bNe(s),(r||a)&&(n+=" "+yNe(r,a))):n=yNe(o+r,u+a),e("transform",n)},bound:hTe,draw:function(e,t,n){lNe(t,(function(t){var r,a,i,o,u,s,c,l=null==t.opacity?1:t.opacity;if(!(n&&!n.intersects(t.bounds)||0===l||t.fontSize<=0||null==t.text||0===t.text.length)){if(e.font=uTe(t),e.textAlign=t.align||"left",a=(r=fTe(t)).x1,i=r.y1,t.angle&&(e.save(),e.translate(a,i),e.rotate(t.angle*ZEe),a=i=0),a+=t.dx||0,i+=(t.dy||0)+sTe(t),s=aTe(t),tNe(e,t),Spe(s))for(u=rTe(t),o=0;o<s.length;++o)c=iTe(t,s[o]),t.fill&&iNe(e,t,l)&&e.fillText(c,a,i),t.stroke&&uNe(e,t,l)&&e.strokeText(c,a,i),i+=u;else c=iTe(t,s),t.fill&&iNe(e,t,l)&&e.fillText(c,a,i),t.stroke&&uNe(e,t,l)&&e.strokeText(c,a,i);t.angle&&e.restore()}}))},pick:vNe((function(e,t,n,r,a,i){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=fTe(t),u=o.x1,s=o.y1,c=hTe(lTe,t,1),l=-t.angle*ZEe,f=Math.cos(l),h=Math.sin(l),d=f*a-h*i+(u-f*u+h*s),p=h*a+f*i+(s-h*u-f*s);return c.contains(d,p)})),isect:function(e,t){var n=hTe(lTe,e,2);return eNe(t,n[0],n[1],n[2],n[3])||eNe(t,n[0],n[1],n[4],n[5])||eNe(t,n[4],n[5],n[6],n[7])||eNe(t,n[2],n[3],n[6],n[7])}},pTe=_Ne("trail",(function(e,t){return vAe.context(e)(t)}),(function(e,t){for(var n,r,a=e.length;--a>=0;)if(!1!==e[a].defined&&(n=e[a].x-t[0])*n+(r=e[a].y-t[1])*r<(n=e[a].size||1)*n)return e[a];return null})),vTe={arc:kNe,area:SNe,group:FNe,image:LNe,line:PNe,path:UNe,rect:VNe,rule:HNe,shape:GNe,symbol:XNe,text:dTe,trail:pTe};function gTe(e,t,n){return!e&&"undefined"!==typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function mTe(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,a=n.length;r<a;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function yTe(e,t,n,r){var a,i=e.childNodes[t];return i&&i.tagName.toLowerCase()===n.toLowerCase()||(a=i||null,i=gTe(e.ownerDocument,n,r),e.insertBefore(i,a)),i}function bTe(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function xTe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function wTe(e,t){var n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function kTe(e,t){this._active=null,this._handlers={},this._loader=e||kEe(),this._tooltip=t||_Te}function _Te(e,t,n,r){e.element().setAttribute("title",r||"")}function STe(e){this._el=null,this._bgcolor=null,this._loader=new _Ae(e)}kTe.prototype={initialize:function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},origin:function(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene:function(e){return arguments.length?(this._scene=e,this):this._scene},on:function(){},off:function(){},_handlerIndex:function(e,t,n){for(var r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers:function(e){var t=this._handlers,n=[];if(e)n.push.apply(n,(0,$n.Z)(t[this.eventName(e)]));else for(var r in t)n.push.apply(n,(0,$n.Z)(t[r]));return n},eventName:function(e){var t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref:function(e,t,n){this._loader.sanitize(n,{context:"href"}).then((function(t){var n=new MouseEvent(e.type,e),r=gTe(null,"a");for(var a in t)r.setAttribute(a,t[a]);r.dispatchEvent(n)})).catch((function(){}))},handleTooltip:function(e,t,n){if(t&&null!=t.tooltip){t=function(e,t,n,r){var a,i,o=e&&e.mark;if(o&&(a=vTe[o.marktype]).tip){for((i=wTe(t,n))[0]-=r[0],i[1]-=r[1];e=e.mark.group;)i[0]-=e.x||0,i[1]-=e.y||0;e=a.tip(o.items,i)}return e}(t,e,this.canvas(),this._origin);var r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect:function(e){var t=this.canvas();if(t){for(var n=t.getBoundingClientRect(),r=this._origin,a=e.bounds,i=a.width(),o=a.height(),u=a.x1+r[0]+n.left,s=a.y1+r[1]+n.top;e.mark&&(e=e.mark.group);)u+=e.x||0,s+=e.y||0;return{x:u,y:s,width:i,height:o,left:u,top:s,right:u+i,bottom:s+o}}}},STe.prototype={initialize:function(e,t,n,r,a){return this._el=e,this.resize(t,n,r,a)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},background:function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},resize:function(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty:function(){},render:function(e,t){var n=this;return n._call=function(){n._render(e,t)},n._call(),n._call=null,n},_render:function(){},renderAsync:function(e,t){var n=this.render(e,t);return this._ready?this._ready.then((function(){return n})):Promise.resolve(n)},_load:function(e,t){var n=this,r=n._loader[e](t);if(!n._ready){var a=n._call;n._ready=n._loader.ready().then((function(e){e&&a(),n._ready=null}))}return r},sanitizeURL:function(e){return this._load("sanitizeURL",e)},loadImage:function(e){return this._load("loadImage",e)}};var CTe="dragenter",ETe="dragleave",ATe="dragover",NTe="pointerdown",TTe="pointermove",MTe="pointerout",DTe="pointerover",FTe="mousedown",ITe="mousemove",OTe="mouseout",RTe="mouseover",ZTe="click",BTe="mousewheel",zTe="touchstart",LTe="touchmove",PTe="touchend",jTe=TTe,UTe=MTe,WTe=ZTe;function VTe(e,t){kTe.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}function qTe(e,t){(function(e){return e===zTe||e===LTe||e===PTe?[zTe,LTe,PTe]:[e]})(t).forEach((function(t){return function(e,t){var n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?function(n){return e[t](n)}:function(n){return e.fire(t,n)}))}(e,t)}))}function HTe(e,t,n){t.forEach((function(t){return e.fire(t,n)}))}function GTe(e,t,n){return function(r){var a=this._active,i=this.pickEvent(r);i===a||(a&&a.exit||HTe(this,n,r),this._active=i,HTe(this,t,r)),HTe(this,e,r)}}function XTe(e){return function(t){HTe(this,e,t),this._active=null}}function YTe(e,t,n,r,a,i){var o="undefined"!==typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,u=e.getContext("2d"),s=o?"undefined"!==typeof window&&window.devicePixelRatio||1:a;for(var c in e.width=t*s,e.height=n*s,i)u[c]=i[c];return o&&1!==s&&(e.style.width=t+"px",e.style.height=n+"px"),u.pixelRatio=s,u.setTransform(s,0,0,s,s*r[0],s*r[1]),e}function KTe(e){STe.call(this,e),this._options={},this._redraw=!1,this._dirty=new xAe,this._tempb=new xAe}Ppe(VTe,kTe,{initialize:function(e,t,n){var r=this;return this._canvas=e&&mTe(e,"canvas"),[ZTe,FTe,NTe,TTe,MTe,ETe].forEach((function(e){return qTe(r,e)})),kTe.prototype.initialize.call(this,e,t,n)},canvas:function(){return this._canvas},context:function(){return this._canvas.getContext("2d")},events:["keydown","keypress","keyup",CTe,ETe,ATe,NTe,"pointerup",TTe,MTe,DTe,FTe,"mouseup",ITe,OTe,RTe,ZTe,"dblclick","wheel",BTe,zTe,LTe,PTe],DOMMouseScroll:function(e){this.fire(BTe,e)},pointermove:GTe([TTe,ITe],[DTe,RTe],[MTe,OTe]),dragover:GTe([ATe],[CTe],[ETe]),pointerout:XTe([MTe,OTe]),dragleave:XTe([ETe]),pointerdown:function(e){this._down=this._active,this.fire(NTe,e)},mousedown:function(e){this._down=this._active,this.fire(FTe,e)},click:function(e){this._down===this._active&&(this.fire(ZTe,e),this._down=null)},touchstart:function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(zTe,e,!0)},touchmove:function(e){this.fire(LTe,e,!0)},touchend:function(e){this.fire(PTe,e,!0),this._touch=null},fire:function(e,t,n){var r=n?this._touch:this._active,a=this._handlers[e];if(t.vegaType=e,e===WTe&&r&&r.href?this.handleHref(t,r,r.href):e!==jTe&&e!==UTe||this.handleTooltip(t,r,e!==UTe),a)for(var i=0,o=a.length;i<o;++i)a[i].handler.call(this._obj,t,r)},on:function(e,t){var n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(qTe(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off:function(e,t){var n=this.eventName(e),r=this._handlers[n],a=this._handlerIndex(r,e,t);return a>=0&&r.splice(a,1),this},pickEvent:function(e){var t=wTe(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick:function(e,t,n,r,a){var i=this.context();return vTe[e.marktype].pick.call(this,i,e,t,n,r,a)}});var $Te=STe.prototype;function QTe(e,t){kTe.call(this,e,t);var n=this;n._hrefHandler=JTe(n,(function(e,t){t&&t.href&&n.handleHref(e,t,t.href)})),n._tooltipHandler=JTe(n,(function(e,t){n.handleTooltip(e,t,e.type!==UTe)}))}Ppe(KTe,STe,{initialize:function(e,t,n,r,a,i){return this._options=i||{},this._canvas=this._options.externalContext?null:$d(1,1,this._options.type),e&&this._canvas&&(bTe(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),$Te.initialize.call(this,e,t,n,r,a)},resize:function(e,t,n,r){if($Te.resize.call(this,e,t,n,r),this._canvas)YTe(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{var a=this._options.externalContext;a||bpe("CanvasRenderer is missing a valid canvas or context"),a.scale(this._scale,this._scale),a.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas:function(){return this._canvas},context:function(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty:function(e){for(var t=this._tempb.clear().union(e.bounds),n=e.mark.group;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render:function(e,t){var n=this.context(),r=this._origin,a=this._width,i=this._height,o=this._dirty,u=function(e,t,n){return(new xAe).set(0,0,t,n).translate(-e[0],-e[1])}(r,a,i);n.save();var s=this._redraw||o.empty()?(this._redraw=!1,u.expand(1)):function(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}(n,u.intersect(o),r);return this.clear(-r[0],-r[1],a,i),this.draw(n,e,s,t),n.restore(),o.clear(),this},draw:function(e,t,n,r){if("group"===t.marktype||null==r||r.includes(t.marktype)){var a=vTe[t.marktype];t.clip&&function(e,t){var n=t.clip;e.save(),Zpe(n)?(e.beginPath(),n(e),e.clip()):CNe(e,t.group)}(e,t),a.draw.call(this,e,t,n,r),t.clip&&e.restore()}},clear:function(e,t,n,r){var a=this._options,i=this.context();"pdf"===a.type||a.externalContext||i.clearRect(e,t,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,r))}});var JTe=function(e,t){return function(n){var r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)}};Ppe(QTe,kTe,{initialize:function(e,t,n){var r=this._svg;return r&&(r.removeEventListener(WTe,this._hrefHandler),r.removeEventListener(jTe,this._tooltipHandler),r.removeEventListener(UTe,this._tooltipHandler)),this._svg=r=e&&mTe(e,"svg"),r&&(r.addEventListener(WTe,this._hrefHandler),r.addEventListener(jTe,this._tooltipHandler),r.addEventListener(UTe,this._tooltipHandler)),kTe.prototype.initialize.call(this,e,t,n)},canvas:function(){return this._svg},on:function(e,t){var n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){var a={type:e,handler:t,listener:JTe(this,t)};(r[n]||(r[n]=[])).push(a),this._svg&&this._svg.addEventListener(n,a.listener)}return this},off:function(e,t){var n=this.eventName(e),r=this._handlers[n],a=this._handlerIndex(r,e,t);return a>=0&&(this._svg&&this._svg.removeEventListener(n,r[a].listener),r.splice(a,1)),this}});var eMe="aria-hidden",tMe="aria-label",nMe="role",rMe="aria-roledescription",aMe="graphics-object",iMe="graphics-symbol",oMe=function(e,t,n){var r;return r={},(0,Ir.Z)(r,nMe,e),(0,Ir.Z)(r,rMe,t),(0,Ir.Z)(r,tMe,n||void 0),r},uMe=Kpe(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),sMe={axis:{desc:"axis",caption:function(e){var t=e.datum,n=e.orient,r=t.title?dMe(e):null,a=e.context,i=a.scales[t.scale].value,o=a.dataflow.locale(),u=i.type;return"".concat("left"===n||"right"===n?"Y":"X","-axis")+(r?" titled '".concat(r,"'"):"")+" for a ".concat(z_e(u)?"discrete":u," scale")+" with ".concat(sSe(o,i,e))}},legend:{desc:"legend",caption:function(e){var t=e.datum,n=t.title?dMe(e):null,r="".concat(t.type||""," legend").trim(),a=t.scales,i=Object.keys(a),o=e.context,u=o.scales[a[i[0]]].value,s=o.dataflow.locale();return function(e){return e.length?e[0].toUpperCase()+e.slice(1):e}(r)+(n?" titled '".concat(n,"'"):"")+" for ".concat(function(e){return(e=e.map((function(e){return e+("fill"===e||"stroke"===e?" color":"")}))).length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Epe(e)}(i))+" with ".concat(sSe(s,u,e))}},"title-text":{desc:"title",caption:function(e){return"Title text '".concat(hMe(e),"'")}},"title-subtitle":{desc:"subtitle",caption:function(e){return"Subtitle text '".concat(hMe(e),"'")}}},cMe={ariaRole:nMe,ariaRoleDescription:rMe,description:tMe};function lMe(e,t){var n=!1===t.aria;if(e(eMe,n||void 0),n||null==t.description)for(var r in cMe)e(cMe[r],void 0);else{var a=t.mark.marktype;e(tMe,t.description),e(nMe,t.ariaRole||("group"===a?aMe:iMe)),e(rMe,t.ariaRoleDescription||"".concat(a," mark"))}}function fMe(e){return!1===e.aria?(0,Ir.Z)({},eMe,!0):uMe[e.role]?null:sMe[e.role]?function(e,t){try{var n=e.items[0],r=t.caption||function(){return""};return oMe(t.role||iMe,t.desc,n.description||r(n))}catch(a){return null}}(e,sMe[e.role]):function(e){var t=e.marktype,n="group"===t||"text"===t||e.items.some((function(e){return null!=e.description&&!1!==e.aria}));return oMe(n?aMe:iMe,"".concat(t," mark container"),e.description)}(e)}function hMe(e){return Rpe(e.text).join(" ")}function dMe(e){try{return Rpe(Epe(e.items).items[0].text).join(" ")}catch(t){return null}}var pMe=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};function vMe(){var e="",t="",n="",r=[],a=function(){return t=n=""},i=function(i){t&&(e+="".concat(t,">").concat(n),a()),r.push(i)},o=function(e,n){return null!=n&&(t+=" ".concat(e,'="').concat(pMe(n).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"),'"')),u},u={open:function(e){i(e),t="<"+e;for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var s=0,c=r;s<c.length;s++){var l=c[s];for(var f in l)o(f,l[f])}return u},close:function(){var i=r.pop();return e+=t?t+(n?">".concat(n,"</").concat(i,">"):"/>"):"</".concat(i,">"),a(),u},attr:o,text:function(e){return n+=pMe(e),u},toString:function(){return e}};return u}var gMe=function(e){return mMe(vMe(),e)+""};function mMe(e,t){if(e.open(t.tagName),t.hasAttributes())for(var n=t.attributes,r=n.length,a=0;a<r;++a)e.attr(n[a].name,n[a].value);if(t.hasChildNodes()){var i,o=t.childNodes,u=(0,zt.Z)(o);try{for(u.s();!(i=u.n()).done;){var s=i.value;3===s.nodeType?e.text(s.nodeValue):mMe(e,s)}}catch(c){u.e(c)}finally{u.f()}}return e.close()}var yMe={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},bMe={blend:"mix-blend-mode"},xMe={fill:"none","stroke-miterlimit":10},wMe="http://www.w3.org/2000/xmlns/",kMe=INe.xmlns;function _Me(e){STe.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var SMe=STe.prototype;function CMe(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function EMe(e,t,n){var r,a,i;if("radial"===t.gradient){var o=yTe(e,n++,"pattern",kMe);OMe(o,{id:SEe+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),OMe(o=yTe(o,0,"rect",kMe),{width:1,height:1,fill:"url(".concat(ZMe(),"#").concat(t.id,")")}),OMe(e=yTe(e,n++,"radialGradient",kMe),{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else OMe(e=yTe(e,n++,"linearGradient",kMe),{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,a=t.stops.length;r<a;++r)(i=yTe(e,r,"stop",kMe)).setAttribute("offset",t.stops[r].offset),i.setAttribute("stop-color",t.stops[r].color);return bTe(e,r),n}function AMe(e,t,n){return(e=yTe(e,n,"clipPath",kMe)).setAttribute("id",t.id),t.path?yTe(e,0,"path",kMe).setAttribute("d",t.path):OMe(yTe(e,0,"rect",kMe),{x:0,y:0,width:t.width,height:t.height}),bTe(e,1),n+1}function NMe(e,t,n,r,a){var i,o=e._svg;if(!o&&(o=gTe(i=t.ownerDocument,r,kMe),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},"g"===r))){var u=gTe(i,"path",kMe);o.appendChild(u),u.__data__=e;var s=gTe(i,"g",kMe);o.appendChild(s),s.__data__=e;var c=gTe(i,"path",kMe);o.appendChild(c),c.__data__=e,c.__values__={fill:"default"}}return(o.ownerSVGElement!==a||function(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}Ppe(_Me,STe,{initialize:function(e,t,n,r,a){return this._defs={},this._clearDefs(),e&&(this._svg=yTe(e,0,"svg",kMe),this._svg.setAttributeNS(wMe,"xmlns",kMe),this._svg.setAttributeNS(wMe,"xmlns:xlink",INe["xmlns:xlink"]),this._svg.setAttribute("version",INe.version),this._svg.setAttribute("class","marks"),bTe(e,1),this._root=yTe(this._svg,0,"g",kMe),OMe(this._root,xMe),bTe(this._svg,1)),this.background(this._bgcolor),SMe.initialize.call(this,e,t,n,r,a)},background:function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),SMe.background.apply(this,arguments)},resize:function(e,t,n,r){return SMe.resize.call(this,e,t,n,r),this._svg&&(OMe(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}),this._root.setAttribute("transform","translate(".concat(this._origin,")"))),this._dirty=[],this},canvas:function(){return this._svg},svg:function(){var e,t=this._svg,n=this._bgcolor;if(!t)return null;n&&(t.removeAttribute("style"),OMe(e=yTe(t,0,"rect",kMe),{width:this._width,height:this._height,fill:n}));var r=gMe(t);return n&&(t.removeChild(e),this._svg.style.setProperty("background-color",n)),r},_render:function(e,t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e,void 0,t),bTe(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty:function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty:function(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck:function(){this._dirtyAll=!0;var e=this._dirty;if(!e.length||!this._dirtyID)return!0;var t,n,r,a,i,o,u,s=++this._dirtyID;for(i=0,o=e.length;i<o;++i)(n=(t=e[i]).mark).marktype!==r&&(r=n.marktype,a=vTe[r]),n.zdirty&&n.dirty!==s&&(this._dirtyAll=!1,CMe(t,s),n.items.forEach((function(e){e.dirty=s}))),n.zdirty||(t.exit?(a.nested&&n.items.length?(u=n.items[0])._svg&&this._update(a,u._svg,u):t._svg&&(u=t._svg.parentNode)&&u.removeChild(t._svg),t._svg=null):(t=a.nested?n.items[0]:t)._update!==s&&(t._svg&&t._svg.ownerSVGElement?this._update(a,t._svg,t):(this._dirtyAll=!1,CMe(t,s)),t._update=s));return!this._dirtyAll},mark:function(e,t,n,r){var a=this;if(!this.isDirty(t))return t._svg;var i=this._svg,o=t.marktype,u=vTe[o],s=!1===t.interactive?"none":null,c="g"===u.tag,l=NMe(t,e,n,"g",i);if("group"!==o&&null!=r&&!r.includes(o))return bTe(l,0),t._svg;l.setAttribute("class",xTe(t));var f=fMe(t);for(var h in f)RMe(l,h,f[h]);c||RMe(l,"pointer-events",s),RMe(l,"clip-path",t.clip?bAe(this,t,t.group):null);var d=null,p=0,v=function(e){var t=a.isDirty(e),n=NMe(e,l,d,u.tag,i);t&&(a._update(u,n,e),c&&function(e,t,n,r){t=t.lastChild.previousSibling;var a,i=0;lNe(n,(function(n){a=e.mark(t,n,a,r),++i})),bTe(t,1+i)}(a,n,e,r)),d=n,++p};return u.nested?t.items.length&&v(t.items[0]):lNe(t,v),bTe(l,p),l},_update:function(e,t,n){TMe=t,MMe=t.__values__,lMe(FMe,n),e.attr(FMe,n,this);var r=DMe[e.type];r&&r.call(this,e,t,n),TMe&&this.style(TMe,n)},style:function(e,t){if(null!=t){for(var n in yMe){var r="font"===n?oTe(t):t[n];if(r!==MMe[n]){var a=yMe[n];null==r?e.removeAttribute(a):(CEe(r)&&(r=EEe(r,this._defs.gradient,ZMe())),e.setAttribute(a,r+"")),MMe[n]=r}}for(var i in bMe)IMe(e,bMe[i],t[i])}},defs:function(){var e=this._svg,t=this._defs,n=t.el,r=0;for(var a in t.gradient)n||(t.el=n=yTe(e,1,"defs",kMe)),r=EMe(n,t.gradient[a],r);for(var i in t.clipping)n||(t.el=n=yTe(e,1,"defs",kMe)),r=AMe(n,t.clipping[i],r);n&&(0===r?(e.removeChild(n),t.el=null):bTe(n,r))},_clearDefs:function(){var e=this._defs;e.gradient={},e.clipping={}}});var TMe=null,MMe=null,DMe={group:function(e,t,n){var r=TMe=t.childNodes[2];MMe=r.__values__,e.foreground(FMe,n,this),MMe=t.__values__,TMe=t.childNodes[1],e.content(FMe,n,this);var a=TMe=t.childNodes[0];e.background(FMe,n,this);var i=!1===n.mark.interactive?"none":null;if(i!==MMe.events&&(RMe(r,"pointer-events",i),RMe(a,"pointer-events",i),MMe.events=i),n.strokeForeground&&n.stroke){var o=n.fill;RMe(r,"display",null),this.style(a,n),RMe(a,"stroke",null),o&&(n.fill=null),MMe=r.__values__,this.style(r,n),o&&(n.fill=o),TMe=null}else RMe(r,"display","none")},image:function(e,t,n){!1===n.smooth?(IMe(t,"image-rendering","optimizeSpeed"),IMe(t,"image-rendering","pixelated")):IMe(t,"image-rendering",null)},text:function(e,t,n){var r,a,i,o,u=aTe(n);Spe(u)?(r=(a=u.map((function(e){return iTe(n,e)}))).join("\n"))!==MMe.text&&(bTe(t,0),i=t.ownerDocument,o=rTe(n),a.forEach((function(e,r){var a=gTe(i,"tspan",kMe);a.__data__=n,a.textContent=e,r&&(a.setAttribute("x",0),a.setAttribute("dy",o)),t.appendChild(a)})),MMe.text=r):(a=iTe(n,u))!==MMe.text&&(t.textContent=a,MMe.text=a),RMe(t,"font-family",oTe(n)),RMe(t,"font-size",nTe(n)+"px"),RMe(t,"font-style",n.fontStyle),RMe(t,"font-variant",n.fontVariant),RMe(t,"font-weight",n.fontWeight)}};function FMe(e,t,n){t!==MMe[e]&&(n?function(e,t,n,r){null!=n?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}(TMe,e,t,n):RMe(TMe,e,t),MMe[e]=t)}function IMe(e,t,n){n!==MMe[t]&&(null==n?e.style.removeProperty(t):e.style.setProperty(t,n+""),MMe[t]=n)}function OMe(e,t){for(var n in t)RMe(e,n,t[n])}function RMe(e,t,n){null!=n?e.setAttribute(t,n):e.removeAttribute(t)}function ZMe(){var e;return"undefined"===typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function BMe(e){STe.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}Ppe(BMe,STe,{svg:function(){return this._text},_render:function(e){var t=vMe();t.open("svg",Bpe({},INe,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}));var n=this._bgcolor;return n&&"transparent"!==n&&"none"!==n&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",xMe,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark:function(e,t){var n=this,r=vTe[t.marktype],a=r.tag,i=[lMe,r.attr];e.open("g",{class:xTe(t),"clip-path":t.clip?bAe(this,t,t.group):null},fMe(t),{"pointer-events":"g"!==a&&!1===t.interactive?"none":null});var o=function(o){var u=n.href(o);if(u&&e.open("a",u),e.open(a,n.attr(t,o,i,"g"!==a?a:null)),"text"===a){var s=aTe(o);if(Spe(s))for(var c={x:0,dy:rTe(o)},l=0;l<s.length;++l)e.open("tspan",l?c:null).text(iTe(o,s[l])).close();else e.text(iTe(o,s))}else if("g"===a){var f=o.strokeForeground,h=o.fill,d=o.stroke;f&&d&&(o.stroke=null),e.open("path",n.attr(t,o,r.background,"bgrect")).close(),e.open("g",n.attr(t,o,r.content)),lNe(o,(function(t){return n.mark(e,t)})),e.close(),f&&d?(h&&(o.fill=null),o.stroke=d,e.open("path",n.attr(t,o,r.foreground,"bgrect")).close(),h&&(o.fill=h)):e.open("path",n.attr(t,o,r.foreground,"bgfore")).close()}e.close(),u&&e.close()};return r.nested?t.items&&t.items.length&&o(t.items[0]):lNe(t,o),e.close()},href:function(e){var t,n=this,r=e.href;if(r){if(t=this._hrefs&&this._hrefs[r])return t;this.sanitizeURL(r).then((function(e){e["xlink:href"]=e.href,e.href=null,(n._hrefs||(n._hrefs={}))[r]=e}))}return null},attr:function(e,t,n,r){var a=this,i={},o=function(e,t,n,r){i[r||e]=t};return Array.isArray(n)?n.forEach((function(e){return e(o,t,a)})):n(o,t,this),r&&function(e,t,n,r,a){var i;if(null==t)return e;"bgrect"===r&&!1===n.interactive&&(e["pointer-events"]="none");if("bgfore"===r&&(!1===n.interactive&&(e["pointer-events"]="none"),e.display="none",null!==t.fill))return e;"image"===r&&!1===t.smooth&&(i=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]);"text"===r&&(e["font-family"]=oTe(t),e["font-size"]=nTe(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(var o in yMe){var u=t[o],s=yMe[o];("transparent"!==u||"fill"!==s&&"stroke"!==s)&&null!=u&&(CEe(u)&&(u=EEe(u,a.gradient,"")),e[s]=u)}for(var c in bMe){var l=t[c];null!=l&&(i=i||[]).push("".concat(bMe[c],": ").concat(l,";"))}i&&(e.style=i.join(" "))}(i,t,e,r,this._defs),i},defs:function(e){var t=this._defs.gradient,n=this._defs.clipping;if(0!==Object.keys(t).length+Object.keys(n).length){for(var r in e.open("defs"),t){var a=t[r],i=a.stops;"radial"===a.gradient?(e.open("pattern",{id:SEe+r,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+r+")"}).close(),e.close(),e.open("radialGradient",{id:r,fx:a.x1,fy:a.y1,fr:a.r1,cx:a.x2,cy:a.y2,r:a.r2})):e.open("linearGradient",{id:r,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2});for(var o=0;o<i.length;++o)e.open("stop",{offset:i[o].offset,"stop-color":i[o].color}).close();e.close()}for(var u in n){var s=n[u];e.open("clipPath",{id:u}),s.path?e.open("path",{d:s.path}).close():e.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),e.close()}e.close()}}});var zMe={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function LMe(e){STe.call(this,e),this._svgRenderer=new _Me(e),this._canvasRenderer=new KTe(e)}var PMe=STe.prototype;function jMe(e,t){VTe.call(this,e,t)}Ppe(LMe,STe,{initialize:function(e,t,n,r,a){this._root_el=yTe(e,0,"div");var i=yTe(this._root_el,0,"div"),o=yTe(this._root_el,1,"div");return this._root_el.style.position="relative",zMe.debug||(i.style.height="100%",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.height="100%",o.style.width="100%"),this._svgEl=zMe.svgOnTop?o:i,this._canvasEl=zMe.svgOnTop?i:o,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,t,n,r,a),this._svgRenderer.initialize(this._svgEl,t,n,r,a),PMe.initialize.call(this,e,t,n,r,a)},dirty:function(e){return zMe.svgMarkTypes.includes(e.mark.marktype)?this._svgRenderer.dirty(e):this._canvasRenderer.dirty(e),this},_render:function(e,t){var n=(null!==t&&void 0!==t?t:["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter((function(e){return!zMe.svgMarkTypes.includes(e)}));this._svgRenderer.render(e,zMe.svgMarkTypes),this._canvasRenderer.render(e,n)},resize:function(e,t,n,r){return PMe.resize.call(this,e,t,n,r),this._svgRenderer.resize(e,t,n,r),this._canvasRenderer.resize(e,t,n,r),this},background:function(e){return zMe.svgOnTop?this._canvasRenderer.background(e):this._svgRenderer.background(e),this}}),Ppe(jMe,VTe,{initialize:function(e,t,n){var r=yTe(yTe(e,0,"div"),zMe.svgOnTop?0:1,"div");return VTe.prototype.initialize.call(this,r,t,n)}});var UMe={};function WMe(e,t,n,r){if(function(e,t,n){return e.bounds&&t.intersects(e.bounds)&&("group"===e.marktype||!1!==e.interactive&&(!n||n(e)))}(e,t,n)){var a=e.items,i=e.marktype,o=a.length,u=0;if("group"===i)for(;u<o;++u)VMe(a[u],t,n,r);else for(var s=vTe[i].isect;u<o;++u){var c=a[u];qMe(c,t,s)&&r.push(c)}}return r}function VMe(e,t,n,r){n&&n(e.mark)&&qMe(e,t,vTe.group.isect)&&r.push(e);var a=e.items,i=a&&a.length;if(i){var o=e.x||0,u=e.y||0;t.translate(-o,-u);for(var s=0;s<i;++s)WMe(a[s],t,n,r);t.translate(o,u)}return r}function qMe(e,t,n){var r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}UMe.canvas=UMe.png={renderer:KTe,headless:KTe,handler:VTe},UMe.svg={renderer:_Me,headless:BMe,handler:QTe},UMe.hybrid={renderer:LMe,headless:LMe,handler:jMe},UMe.none={};new xAe;var HMe=Math.random;var GMe=Math.sqrt(2*Math.PI),XMe=Math.SQRT2,YMe=NaN;function KMe(e,t){e=e||0,t=null==t?1:t;var n,r,a=0,i=0;if(YMe===YMe)a=YMe,YMe=NaN;else{do{n=(a=2*HMe()-1)*a+(i=2*HMe()-1)*i}while(0===n||n>1);a*=r=Math.sqrt(-2*Math.log(n)/n),YMe=i*r}return e+a*t}function $Me(e,t,n){var r=(e-(t||0))/(n=null==n?1:n);return Math.exp(-.5*r*r)/(n*GMe)}function QMe(e,t,n){var r,a=(e-(t=t||0))/(n=null==n?1:n),i=Math.abs(a);if(i>37)r=0;else{var o=Math.exp(-i*i/2);i<7.07106781186547?(r=o*((((((.0352624965998911*i+.700383064443688)*i+6.37396220353165)*i+33.912866078383)*i+112.079291497871)*i+221.213596169931)*i+220.206867912376),r/=((((((.0883883476483184*i+1.75566716318264)*i+16.064177579207)*i+86.7807322029461)*i+296.564248779674)*i+637.333633378831)*i+793.826512519948)*i+440.413735824752):r=o/(i+1/(i+2/(i+3/(i+4/(i+.65)))))/2.506628274631}return a>0?1-r:r}function JMe(e,t,n){return e<0||e>1?NaN:(t||0)+(null==n?1:n)*XMe*function(e){var t,n=-Math.log((1-e)*(1+e));t=n<6.25?1.6536545626831027+(t=.24015818242558962+(t=(t=(t=.00018673420803405714+(t=(t=(t=4.2347877827932404e-7+(t=(t=(t=1.0512122733215323e-9+(t=(t=(t=26335093153082323e-28+(t=(t=(t=6637638134358324e-30+(t=20972767875968562e-33+(t=(t=11157877678025181e-33+(t=128584807152564e-32+(t=(t=-364441206401782e-35)*(n-=3.125)-16850591381820166e-35)*n)*n)*n-1333171662854621e-31)*n)*n)*n-4054566272975207e-29)*n-8151934197605472e-29)*n)*n-12975133253453532e-27)*n-5415412054294628e-26)*n)*n-4.112633980346984e-9)*n-2.9070369957882005e-8)*n)*n-13654692000834679e-22)*n-13882523362786469e-21)*n)*n-.000740702534166267)*n-.006033670871430149)*n)*n:n<16?3.0838856104922208+(t=1.0052589676941592+(t=.005370914553590064+(t=(t=.002491442096107851+(t=(t=.0009532893797373805+(t=(t=24031110387097894e-21+(t=6828485145957318e-20+(t=(t=12475304481671779e-21+(t=29234449089955446e-22+(t=(t=15027403968909828e-22+(t=1.8239629214389228e-8+(t=(t=9.075656193888539e-8+(t=2.2137376921775787e-9)*(n=Math.sqrt(n)-3.25))*n-2.7517406297064545e-7)*n)*n)*n-4013867526981546e-21)*n)*n)*n-47318229009055734e-21)*n)*n)*n-.0003550375203628475)*n)*n-.0016882755560235047)*n)*n-.003751208507569241)*n)*n)*n:Number.isFinite(n)?4.849906401408584+(t=1.0103004648645344+(t=(t=(t=7599527703001776e-20+(t=(t=4526062597223154e-21+(t=(t=2.2900482228026655e-7+(t=(t=2.914795345090108e-8+(t=(t=7.61570120807834e-9+(t=(t=1.5076572693500548e-9+(t=(t=-27109920616438573e-27)*(n=Math.sqrt(n)-5)-2.555641816996525e-10)*n)*n-3.789465440126737e-9)*n)*n-1.496002662714924e-8)*n)*n-6.771199775845234e-8)*n)*n-9.9298272942317e-7)*n)*n-1968177810553167e-20)*n)*n-.00021503011930044477)*n-.00013871931833623122)*n)*n:1/0;return t*e}(2*e-1)}function eDe(e,t){return e=e||0,t=null==t?1:t,Math.exp(e+KMe()*t)}function tDe(e,t,n){if(e<=0)return 0;t=t||0,n=null==n?1:n;var r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*GMe*e)}function nDe(e,t,n){return QMe(Math.log(e),t,n)}function rDe(e,t,n){return Math.exp(JMe(e,t,n))}function aDe(e,t){return null==t&&(t=null==e?1:e,e=0),e+(t-e)*HMe()}function iDe(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=t&&e<=n?1/(n-t):0}function oDe(e,t,n){return null==n&&(n=null==t?1:t,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function uDe(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=0&&e<=1?t+e*(n-t):NaN}Math.PI;function sDe(e){var t=this.context.data[e];return t?t.values.value:[]}var cDe=function(e){return function(t,n){return this.context.dataflow.locale()[e](n)(t)}},lDe=cDe("format"),fDe=cDe("timeFormat"),hDe=cDe("utcFormat"),dDe=cDe("timeParse"),pDe=cDe("utcParse"),vDe=new Date(2e3,0,1);function gDe(e,t,n){return Number.isInteger(e)&&Number.isInteger(t)?(vDe.setYear(2e3),vDe.setMonth(e),vDe.setDate(t),fDe.call(this,vDe,n)):""}function mDe(e,t,n,r){t[0].type!==Qpe&&bpe("First argument to data functions must be a string literal.");var a=t[0].value,i=":"+a;if(!Lpe(i,r))try{r[i]=n.getData(a).tuplesRef()}catch(o){}}function yDe(e,t,n,r){if(t[0].type===Qpe)bDe(n,r,t[0].value);else for(e in n.scales)bDe(n,r,e)}function bDe(e,t,n){var r="%"+n;if(!Lpe(t,r))try{t[r]=e.scaleRef(n)}catch(a){}}function xDe(e,t){var n;return Zpe(e)?e:Wpe(e)?(n=t.scales[e])&&n.value:void 0}function wDe(e,t,n){t.__bandwidth=function(e){return e&&e.bandwidth?e.bandwidth():0},n._bandwidth=yDe,n._range=yDe,n._scale=yDe;var r=function(t){return"_["+(t.type===Qpe?qpe("%"+t.value):qpe("%")+"+"+e(t))+"]"};return{_bandwidth:function(e){return"this.__bandwidth(".concat(r(e[0]),")")},_range:function(e){return"".concat(r(e[0]),".range()")},_scale:function(t){return"".concat(r(t[0]),"(").concat(e(t[1]),")")}}}function kDe(e,t){return function(n,r,a){if(n){var i=xDe(n,(a||this).context);return i&&i.path[e](r)}return t(r)}}var _De=kDe("area",(function(e){return Nve=new Nre,Are(e,Tve),2*Nve})),SDe=kDe("bounds",(function(e){var t,n,r,a,i,o,u;if(bve=yve=-(gve=mve=1/0),Cve=[],Are(e,Kve),n=Cve.length){for(Cve.sort(ige),t=1,i=[r=Cve[0]];t<n;++t)oge(r,(a=Cve[t])[0])||oge(r,a[1])?(age(r[0],a[1])>age(r[0],r[1])&&(r[1]=a[1]),age(a[0],r[1])>age(r[0],r[1])&&(r[0]=a[0])):i.push(r=a);for(o=-1/0,t=0,r=i[n=i.length-1];t<=n;r=a,++t)a=i[t],(u=age(r[1],a[0]))>o&&(o=u,gve=a[0],yve=r[1])}return Cve=Eve=null,gve===1/0||mve===1/0?[[NaN,NaN],[NaN,NaN]]:[[gve,mve],[yve,bve]]})),CDe=kDe("centroid",(function(e){Ove=Rve=Zve=Bve=zve=Lve=Pve=jve=0,Uve=new Nre,Wve=new Nre,Vve=new Nre,Are(e,uge);var t=+Uve,n=+Wve,r=+Vve,a=UO(t,n,r);return a<TO&&(t=Lve,n=Pve,r=jve,Rve<NO&&(t=Zve,n=Bve,r=zve),(a=UO(t,n,r))<TO)?[NaN,NaN]:[zO(n,t)*OO,KO(r/a)*OO]}));function EDe(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function ADe(e){var t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function NDe(e){var t=IN(e);return.2126*ADe(t.r)+.7152*ADe(t.g)+.0722*ADe(t.b)}function TDe(e,t){return e===t||e!==e&&t!==t||(Spe(e)?!(!Spe(t)||e.length!==t.length)&&function(e,t){for(var n=0,r=e.length;n<r;++n)if(!TDe(e[n],t[n]))return!1;return!0}(e,t):!(!Cpe(e)||!Cpe(t))&&MDe(e,t))}function MDe(e,t){for(var n in e)if(!TDe(e[n],t[n]))return!1;return!0}function DDe(e){return function(t){return MDe(e,t)}}var FDe={};function IDe(e){return Spe(e)||ArrayBuffer.isView(e)?e:null}function ODe(e){return IDe(e)||(Wpe(e)?e:null)}var RDe=function(e){return e.data};function ZDe(e,t){var n=sDe.call(t,e);return n.root&&n.root.lookup||{}}var BDe=function(){return"undefined"!==typeof window&&window||null};var zDe={random:function(){return HMe()},cumulativeNormal:QMe,cumulativeLogNormal:nDe,cumulativeUniform:oDe,densityNormal:$Me,densityLogNormal:tDe,densityUniform:iDe,quantileNormal:JMe,quantileLogNormal:rDe,quantileUniform:uDe,sampleNormal:KMe,sampleLogNormal:eDe,sampleUniform:aDe,isArray:Spe,isBoolean:function(e){return"boolean"===typeof e},isDate:jpe,isDefined:function(e){return void 0!==e},isNumber:Upe,isObject:Cpe,isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},isString:Wpe,isTuple:As,isValid:function(e){return null!=e&&e===e},toBoolean:Hpe,toDate:Xpe,toNumber:Ape,toString:Ype,indexof:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return(t=ODe(e)).indexOf.apply(t,r)},join:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return(t=IDe(e)).join.apply(t,r)},lastindexof:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return(t=ODe(e)).lastIndexOf.apply(t,r)},replace:function(e,t,n){return Zpe(n)&&bpe("Function argument passed to replace."),String(e).replace(t,n)},reverse:function(e){return IDe(e).slice().reverse()},slice:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return(t=ODe(e)).slice.apply(t,r)},flush:function(e,t,n,r,a,i){if(!n&&0!==n)return i;var o,u=+n,s=e[0],c=Epe(e);c<s&&(o=s,s=c,c=o),o=Math.abs(t-s);var l=Math.abs(c-t);return o<l&&o<=u?r:l<=u?a:i},lerp:function(e,t){var n=e[0],r=Epe(e),a=+t;return a?1===a?r:n+a*(r-n):n},merge:function(){var e=[].slice.call(arguments);return e.unshift({}),Bpe.apply(void 0,(0,$n.Z)(e))},pad:function(e,t,n,r){var a=n||" ",i=e+"",o=t-i.length;return o<=0?i:"left"===r?Vpe(a,o)+i:"center"===r?Vpe(a,~~(o/2))+i+Vpe(a,Math.ceil(o/2)):i+Vpe(a,o)},peek:Epe,pluck:function(e,t){var n=FDe[t]||(FDe[t]=wpe(t));return Spe(e)?e.map(n):n(e)},span:function(e){return e&&Epe(e)-e[0]||0},inrange:function(e,t,n,r){var a,i=t[0],o=t[t.length-1];return i>o&&(a=i,i=o,o=a),r=void 0===r||r,((n=void 0===n||n)?i<=e:i<e)&&(r?e<=o:e<o)},truncate:function(e,t,n,r){var a=null!=r?r:"\u2026",i=e+"",o=i.length,u=Math.max(0,t-a.length);return o<=t?i:"left"===n?a+i.slice(o-u):"center"===n?i.slice(0,Math.ceil(u/2))+a+i.slice(o-~~(u/2)):i.slice(0,u)+a},rgb:IN,lab:Kee,hcl:rte,hsl:PN,luminance:NDe,contrast:function(e,t){var n=NDe(e),r=NDe(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},sequence:_l,format:lDe,utcFormat:hDe,utcParse:pDe,utcOffset:function(e,t,n){return t_e(e_e(e),t,n)},utcSequence:function(e,t,n,r){return n_e(e_e(e),t,n,r)},timeFormat:fDe,timeParse:dDe,timeOffset:function(e,t,n){return t_e(Jke(e),t,n)},timeSequence:function(e,t,n,r){return n_e(Jke(e),t,n,r)},timeUnitSpecifier:function(e,t){var n,r,a=Bpe({},jke,t),i=function(e){var t=Rpe(e).slice(),n={};return t.length||bpe("Missing time unit."),t.forEach((function(e){Lpe(Pke,e)?n[e]=1:bpe("Invalid time unit: ".concat(e,"."))})),(n.week||n.day?1:0)+(n.quarter||n.month||n.date?1:0)+(n.dayofyear?1:0)>1&&bpe("Incompatible time units: ".concat(e)),t.sort((function(e,t){return Pke[e]-Pke[t]})),t}(e),o=i.length,u="",s=0;for(s=0;s<o;)for(n=i.length;n>s;--n)if(null!=a[r=i.slice(s,n).join("-")]){u+=a[r],s=n;break}return u.trim()},monthFormat:function(e){return gDe.call(this,e,1,"%B")},monthAbbrevFormat:function(e){return gDe.call(this,e,1,"%b")},dayFormat:function(e){return gDe.call(this,0,2+e,"%A")},dayAbbrevFormat:function(e){return gDe.call(this,0,2+e,"%a")},quarter:function(e){return 1+~~(new Date(e).getMonth()/3)},utcquarter:function(e){return 1+~~(new Date(e).getUTCMonth()/3)},week:function(e){return qke(new Date(e))},utcweek:function(e){return Xke(new Date(e))},dayofyear:function(e){return Vke(new Date(e))},utcdayofyear:function(e){return Gke(new Date(e))},warn:function(){return EDe(this.context.dataflow,"warn",arguments)},info:function(){return EDe(this.context.dataflow,"info",arguments)},debug:function(){return EDe(this.context.dataflow,"debug",arguments)},extent:function(e,t){var n,r,a,i,o=0;if(e&&(n=e.length))if(null==t){for(r=e[o];o<n&&(null==r||r!==r);r=e[++o]);for(a=i=r;o<n;++o)null!=(r=e[o])&&(r<a&&(a=r),r>i&&(i=r))}else{for(r=t(e[o]);o<n&&(null==r||r!==r);r=t(e[++o]));for(a=i=r;o<n;++o)null!=(r=t(e[o]))&&(r<a&&(a=r),r>i&&(i=r))}return[a,i]},inScope:function(e){var t=this.context.group,n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n},intersect:function(e,t,n){if(!e)return[];var r=(0,gc.Z)(e,2),a=r[0],i=r[1],o=(new xAe).set(a[0],a[1],i[0],i[1]);return function(e,t,n){var r=[],a=(new xAe).union(t),i=e.marktype;return i?WMe(e,a,n,r):"group"===i?VMe(e,a,n,r):bpe("Intersect scene must be mark node or group item.")}(n||this.context.dataflow.scenegraph().root,o,function(e){var t=null;if(e){var n=Rpe(e.marktype),r=Rpe(e.markname);t=function(e){return(!n.length||n.some((function(t){return e.marktype===t})))&&(!r.length||r.some((function(t){return e.name===t})))}}return t}(t))},clampRange:function(e,t,n){var r,a=e[0],i=e[1];return i<a&&(r=i,i=a,a=r),(r=i-a)>=n-t?[t,n]:[a=Math.min(Math.max(a,t),n-r),a+r]},pinchDistance:function(e){var t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.sqrt(n*n+r*r)},pinchAngle:function(e){var t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)},screen:function(){var e=BDe();return e?e.screen:{}},containerSize:function(){var e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]},windowSize:function(){var e=BDe();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]},bandspace:function(e,t,n){return c_e(e||0,t||0,n||0)},setdata:function(e,t){var n=this.context.dataflow,r=this.context.data[e].input;return n.pulse(r,n.changeset().remove(_pe).insert(t)),1},pathShape:function(e){var t=null;return function(n){return n?HEe(n,t=t||REe(e)):e}},panLinear:function(e,t){return Ipe(e,t,Ape,kpe)},panLog:function(e,t){var n=Math.sign(e[0]);return Ipe(e,t,Tpe(n),Npe(n))},panPow:function(e,t,n){return Ipe(e,t,Fpe(n),Fpe(1/n))},panSymlog:function(e,t,n){return Ipe(e,t,Mpe(n),Dpe(n))},zoomLinear:function(e,t,n){return Ope(e,t,n,Ape,kpe)},zoomLog:function(e,t,n){var r=Math.sign(e[0]);return Ope(e,t,n,Tpe(r),Npe(r))},zoomPow:function(e,t,n,r){return Ope(e,t,n,Fpe(r),Fpe(1/r))},zoomSymlog:function(e,t,n,r){return Ope(e,t,n,Mpe(r),Dpe(r))},encode:function(e,t,n){if(e){var r=this.context.dataflow,a=e.mark.source;r.pulse(a,r.changeset().encode(e,t))}return void 0!==n?n:e},modify:function(e,t,n,r,a,i){var o,u,s=this.context.dataflow,c=this.context.data[e],l=c.input,f=s.stamp(),h=c.changes;if(!1===s._trigger||!(l.value.length||t||r))return 0;if((!h||h.stamp<f)&&(c.changes=h=s.changeset(),h.stamp=f,s.runAfter((function(){c.modified=!0,s.pulse(l,h).run()}),!0,1)),n&&(o=!0===n?_pe:Spe(n)||As(n)?n:DDe(n),h.remove(o)),t&&h.insert(t),r&&(o=DDe(r),l.value.some(o)?h.remove(o):h.insert(r)),a)for(u in i)h.modify(a,u,i[u]);return 1}},LDe=["view","item","group","xy","x","y"],PDe="this.",jDe={},UDe={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:function(e){return"_[".concat(qpe("$"+e),"]")},functions:function(e){var t=lve(e);for(var n in LDe.forEach((function(e){return t[e]="event.vega."+e})),zDe)t[n]=PDe+n;return Bpe(t,wDe(e,zDe,jDe)),t},constants:cve,visitors:jDe},WDe=function(e){var t=(e=e||{}).allowed?Kpe(e.allowed):{},n=e.forbidden?Kpe(e.forbidden):{},r=e.constants||cve,a=(e.functions||lve)(f),i=e.globalvar,o=e.fieldvar,u=Zpe(i)?i:function(e){return"".concat(i,'["').concat(e,'"]')},s={},c={},l=0;function f(e){if(Wpe(e))return e;var t=h[e.type];return null==t&&bpe("Unsupported type: "+e.type),t(e)}var h={Literal:function(e){return e.raw},Identifier:function(e){var a=e.name;return l>0?a:Lpe(n,a)?bpe("Illegal identifier: "+a):Lpe(r,a)?r[a]:Lpe(t,a)?a:(s[a]=1,u(a))},MemberExpression:function(e){var t=!e.computed,n=f(e.object);t&&(l+=1);var r=f(e.property);return n===o&&(c[function(e){var t=e&&e.length-1;return t&&('"'===e[0]&&'"'===e[t]||"'"===e[0]&&"'"===e[t])?e.slice(1,-1):e}(r)]=1),t&&(l-=1),n+(t?"."+r:"["+r+"]")},CallExpression:function(e){"Identifier"!==e.callee.type&&bpe("Illegal callee type: "+e.callee.type);var t=e.callee.name,n=e.arguments,r=Lpe(a,t)&&a[t];return r||bpe("Unrecognized function: "+t),Zpe(r)?r(n):r+"("+n.map(f).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(f).join(",")+"]"},BinaryExpression:function(e){return"("+f(e.left)+" "+e.operator+" "+f(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+f(e.argument)+")"},ConditionalExpression:function(e){return"("+f(e.test)+"?"+f(e.consequent)+":"+f(e.alternate)+")"},LogicalExpression:function(e){return"("+f(e.left)+e.operator+f(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(f).join(",")+"}"},Property:function(e){l+=1;var t=f(e.key);return l-=1,t+":"+f(e.value)}};function d(e){var t={code:f(e),globals:Object.keys(s),fields:Object.keys(c)};return s={},c={},t}return d.functions=a,d.constants=r,d}(UDe);function VDe(e,t,n){return 1===arguments.length?zDe[e]:(zDe[e]=t,n&&(jDe[e]=n),WDe&&(WDe.functions[e]=PDe+e),this)}VDe("bandwidth",(function(e,t){var n=xDe(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}),yDe),VDe("copy",(function(e,t){var n=xDe(e,(t||this).context);return n?n.copy():void 0}),yDe),VDe("domain",(function(e,t){var n=xDe(e,(t||this).context);return n?n.domain():[]}),yDe),VDe("range",(function(e,t){var n=xDe(e,(t||this).context);return n&&n.range?n.range():[]}),yDe),VDe("invert",(function(e,t,n){var r=xDe(e,(n||this).context);return r?Spe(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}),yDe),VDe("scale",(function(e,t,n){var r=xDe(e,(n||this).context);return r?r(t):void 0}),yDe),VDe("gradient",(function(e,t,n,r,a){e=xDe(e,(a||this).context);var i=function(e,t){var n,r=[];return n={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:r,stop:function(e,t){return r.push({offset:e,color:t}),n}}}(t,n),o=e.domain(),u=o[0],s=Epe(o),c=kpe;return s-u?c=j_e(e,u,s):e=(e.interpolator?R_e("sequential")().interpolator(e.interpolator()):R_e("linear")().interpolate(e.interpolate()).range(e.range())).domain([u=0,s=1]),e.ticks&&(u!==(o=e.ticks(+r||15))[0]&&o.unshift(u),s!==Epe(o)&&o.push(s)),o.forEach((function(t){return i.stop(c(t),e(t))})),i}),yDe),VDe("geoArea",_De,yDe),VDe("geoBounds",SDe,yDe),VDe("geoCentroid",CDe,yDe),VDe("geoShape",(function(e,t,n){var r=xDe(e,(n||this).context);return function(e){return r?r.path.context(e)(t):""}}),yDe),VDe("indata",(function(e,t,n){var r=this.context.data[e]["index:"+t],a=r?r.value.get(n):void 0;return a?a.count:a}),(function(e,t,n,r){t[0].type!==Qpe&&bpe("First argument to indata must be a string literal."),t[1].type!==Qpe&&bpe("Second argument to indata must be a string literal.");var a=t[0].value,i=t[1].value,o="@"+i;Lpe(o,r)||(r[o]=n.getData(a).indataRef(n,i))})),VDe("data",sDe,mDe),VDe("treePath",(function(e,t,n){var r=ZDe(e,this),a=r[t],i=r[n];return a&&i?a.path(i).map(RDe):void 0}),mDe),VDe("treeAncestors",(function(e,t){var n=ZDe(e,this)[t];return n?n.ancestors().map(RDe):void 0}),mDe),VDe("vlSelectionTest",wle,Tle),VDe("vlSelectionIdTest",Cle,Tle),VDe("vlSelectionResolve",Ale,Tle),VDe("vlSelectionTuples",Ele);var qDe,HDe,GDe="[",XDe="]",YDe=/[[\]{}]/,KDe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};function $De(e,t,n,r,a){for(var i,o=e.length,u=0;t<o;++t){if(i=e[t],!u&&i===n)return t;a&&a.indexOf(i)>=0?--u:r&&r.indexOf(i)>=0&&++u}return t}function QDe(e){for(var t=[],n=e.length,r=0,a=0;a<n;)a=$De(e,a,",","[{","]}"),t.push(e.substring(r,a).trim()),r=++a;if(0===t.length)throw"Empty event selector: "+e;return t}function JDe(e){return"["===e[0]?function(e){var t,n=e.length,r=1;if((r=$De(e,r,XDe,GDe,XDe))===n)throw"Empty between selector: "+e;if(2!==(t=QDe(e.substring(1,r))).length)throw"Between selector must have two elements: "+e;if(">"!==(e=e.slice(r+1).trim())[0])throw"Expected '>' after between selector: "+e;t=t.map(JDe);var a=JDe(e.slice(1).trim());if(a.between)return{between:t,stream:a};a.between=t;return a}(e):function(e){var t,n,r={source:qDe},a=[],i=[0,0],o=0,u=0,s=e.length,c=0;if("}"===e[s-1]){if(!((c=e.lastIndexOf("{"))>=0))throw"Unmatched right brace: "+e;try{i=function(e){var t=e.split(",");if(!e.length||t.length>2)throw e;return t.map((function(t){var n=+t;if(n!==n)throw e;return n}))}(e.substring(c+1,s-1))}catch(l){throw"Invalid throttle specification: "+e}s=(e=e.slice(0,c).trim()).length,c=0}if(!s)throw e;"@"===e[0]&&(o=++c);(t=$De(e,c,":"))<s&&(a.push(e.substring(u,t).trim()),u=c=++t);if((c=$De(e,c,GDe))===s)a.push(e.substring(u,s).trim());else if(a.push(e.substring(u,c).trim()),n=[],(u=++c)===s)throw"Unmatched left bracket: "+e;for(;c<s;){if((c=$De(e,c,XDe))===s)throw"Unmatched left bracket: "+e;if(n.push(e.substring(u,c).trim()),c<s-1&&e[++c]!==GDe)throw"Expected left bracket: "+e;u=++c}if(!(s=a.length)||YDe.test(a[s-1]))throw"Invalid event selector: "+e;s>1?(r.type=a[1],o?r.markname=a[0].slice(1):!function(e){return HDe[e]}(a[0])?r.source=a[0]:r.marktype=a[0]):r.type=a[0];"!"===r.type.slice(-1)&&(r.consume=!0,r.type=r.type.slice(0,-1));null!=n&&(r.filter=n);i[0]&&(r.throttle=i[0]);i[1]&&(r.debounce=i[1]);return r}(e)}function eFe(e){return rn(e)?e:{type:e||"pad"}}var tFe=function(e){return+e||0};function nFe(e){return rn(e)?e.signal?e:{top:tFe(e.top),bottom:tFe(e.bottom),left:tFe(e.left),right:tFe(e.right)}:{top:t=tFe(e),bottom:t,left:t,right:t};var t}var rFe=function(e){return rn(e)&&!nn(e)?Mn({},e):{value:e}};function aFe(e,t,n,r){return null!=n?(rn(n)&&!nn(n)||nn(n)&&n.length&&rn(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function iFe(e,t,n){for(var r in t)aFe(e,r,t[r]);for(var a in n)aFe(e,a,n[a],"update")}function oFe(e,t,n){for(var r in t)n&&In(n,r)||(e[r]=Mn(e[r]||{},t[r]));return e}function uFe(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}var sFe="mark",cFe="frame",lFe="scope",fFe="legend-label",hFe="title-text",dFe="title-subtitle";function pFe(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}var vFe=function(e){return Pn(e)?Vn(e):e.signal?"(".concat(e.signal,")"):bFe(e)};function gFe(e){if(null!=e.gradient)return function(e){var t=[e.start,e.stop,e.count].map((function(e){return null==e?null:Vn(e)}));for(;t.length&&null==sn(t);)t.pop();return t.unshift(vFe(e.gradient)),"gradient(".concat(t.join(","),")")}(e);var t=e.signal?"(".concat(e.signal,")"):e.color?function(e){return e.c?mFe("hcl",e.h,e.c,e.l):e.h||e.s?mFe("hsl",e.h,e.s,e.l):e.l||e.a?mFe("lab",e.l,e.a,e.b):e.r||e.g||e.b?mFe("rgb",e.r,e.g,e.b):null}(e.color):null!=e.field?bFe(e.field):void 0!==e.value?Vn(e.value):void 0;return null!=e.scale&&(t=function(e,t){var n=vFe(e.scale);null!=e.range?t="lerp(_range(".concat(n,"), ").concat(+e.range,")"):(void 0!==t&&(t="_scale(".concat(n,", ").concat(t,")")),e.band&&(t=(t?t+"+":"")+"_bandwidth(".concat(n,")")+(1===+e.band?"":"*"+yFe(e.band)),e.extra&&(t="(datum.extra ? _scale(".concat(n,", datum.extra.value) : ").concat(t,")"))),null==t&&(t="0"));return t}(e,t)),void 0===t&&(t=null),null!=e.exponent&&(t="pow(".concat(t,",").concat(yFe(e.exponent),")")),null!=e.mult&&(t+="*".concat(yFe(e.mult))),null!=e.offset&&(t+="+".concat(yFe(e.offset))),e.round&&(t="round(".concat(t,")")),t}var mFe=function(e,t,n,r){return"(".concat(e,"(").concat([t,n,r].map(gFe).join(","),")+'')")};function yFe(e){return rn(e)?"("+gFe(e)+")":e}function bFe(e){return xFe(rn(e)?e:{datum:e})}function xFe(e){var t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Ht("Invalid field reference: "+Vn(e));return e.signal||(r=Pn(r)?Gt(r).map(Vn).join("]["):xFe(r)),t+"["+r+"]"}function wFe(e,t,n,r,a,i){var o={};for(var u in(i=i||{}).encoders={$encode:o},e=function(e,t,n,r,a){var i,o,u,s={},c={};for(o in o="lineBreak","text"!==t||null==a[o]||uFe(o,e)||pFe(s,o,a[o]),("legend"==n||String(n).startsWith("axis"))&&(n=null),u=n===cFe?a.group:n===sFe?Mn({},a.mark,a[t]):null)uFe(o,e)||("fill"===o||"stroke"===o)&&(uFe("fill",e)||uFe("stroke",e))||pFe(s,o,u[o]);for(o in wn(r).forEach((function(t){var n=a.style&&a.style[t];for(var r in n)uFe(r,e)||pFe(s,r,n[r])})),e=Mn({},e),s)(u=s[o]).signal?(i=i||{})[o]=u:c[o]=u;return e.enter=Mn(c,e.enter),i&&(e.update=Mn(i,e.update)),e}(e,t,n,r,a.config),e)o[u]=kFe(e[u],t,i,a);return i}function kFe(e,t,n,r){var a,i={},o={};for(var u in e)null!=e[u]&&(i[u]=_Fe((a=e[u],nn(a)?function(e){var t="";return e.forEach((function(e){var n=gFe(e);t+=e.test?"(".concat(e.test,")?").concat(n,":"):n})),":"===sn(t)&&(t+="null"),t}(a):gFe(a)),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function _Fe(e,t,n,r){var a=pfe(e,t);return a.$fields.forEach((function(e){return r[e]=1})),Mn(n,a.$params),a.$expr}var SFe=["value","update","init","react","bind"];function CFe(e,t){Ht(e+' for "outer" push: '+Vn(t))}function EFe(e,t){var n=e.name;if("outer"===e.push)t.signals[n]||CFe("No prior signal definition",n),SFe.forEach((function(t){void 0!==e[t]&&CFe("Invalid property ",t)}));else{var r=t.addSignal(n,e.value);!1===e.react&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function AFe(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function NFe(e,t,n,r){return new AFe(e,t,n,r)}function TFe(e,t){return NFe("operator",e,t)}function MFe(e){var t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function DFe(e,t){return t?{$field:e,$name:t}:{$field:e}}var FFe=DFe("key");function IFe(e,t){return{$compare:e,$order:t}}function OFe(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}var RFe="scope",ZFe="view";function BFe(e){return e&&e.signal}function zFe(e){if(BFe(e))return!0;if(rn(e))for(var t in e)if(zFe(e[t]))return!0;return!1}function LFe(e,t){return null!=e?e:t}function PFe(e){return e&&e.signal||e}var jFe="timer";function UFe(e,t){return(e.merge?WFe:e.stream?VFe:e.type?qFe:Ht("Invalid stream specification: "+Vn(e)))(e,t)}function WFe(e,t){var n=e.merge.map((function(e){return UFe(e,t)})),r=HFe({merge:n},e,t);return t.addStream(r).id}function VFe(e,t){var n=HFe({stream:UFe(e.stream,t)},e,t);return t.addStream(n).id}function qFe(e,t){var n;e.type===jFe?(n=t.event(jFe,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(function(e){return e===RFe?ZFe:e||ZFe}(e.source),e.type);var r=HFe({stream:n},e,t);return 1===Object.keys(r).length?n:t.addStream(r).id}function HFe(e,t,n){var r=t.between;return r&&(2!==r.length&&Ht('Stream "between" parameter must have 2 entries: '+Vn(t)),e.between=[UFe(r[0],n),UFe(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(function(e,t,n){var r="event.item";return r+(e&&"*"!==e?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}(t.marktype,t.markname,t.markrole)),t.source===RFe&&r.push("inScope(event.item)"),r.length&&(e.filter=pfe("("+r.join(")&&(")+")",n).$expr),null!=(r=t.throttle)&&(e.throttle=+r),null!=(r=t.debounce)&&(e.debounce=+r),t.consume&&(e.consume=!0),e}var GFe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function XFe(e,t,n){var r=e.encode,a={target:n},i=e.events,o=e.update,u=[];i||Ht("Signal update missing events specification."),Pn(i)&&(i=function(e,t,n){return qDe=t||"view",HDe=n||KDe,QDe(e.trim()).map(JDe)}(i,t.isSubscope()?RFe:ZFe)),i=wn(i).filter((function(e){return e.signal||e.scale?(u.push(e),0):1})),u.length>1&&(u=[YFe(u)]),i.length&&u.push(i.length>1?{merge:i}:i[0]),null!=r&&(o&&Ht("Signal encode and update are mutually exclusive."),o="encode(item(),"+Vn(r)+")"),a.update=Pn(o)?pfe(o,t):null!=o.expr?pfe(o.expr,t):null!=o.value?o.value:null!=o.signal?{$expr:GFe,$params:{$value:t.signalRef(o.signal)}}:Ht("Invalid signal update specification."),e.force&&(a.options={force:!0}),u.forEach((function(e){return t.addUpdate(Mn(function(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):UFe(e,t)}}(e,t),a))}))}function YFe(e){return{signal:"["+e.map((function(e){return e.scale?'scale("'+e.scale+'")':e.signal}))+"]"}}var KFe=function(e){return function(t,n,r){return NFe(e,n,t||void 0,r)}},$Fe=KFe("aggregate"),QFe=KFe("axisticks"),JFe=KFe("bound"),eIe=KFe("collect"),tIe=KFe("compare"),nIe=KFe("datajoin"),rIe=KFe("encode"),aIe=KFe("expression"),iIe=KFe("facet"),oIe=KFe("field"),uIe=KFe("key"),sIe=KFe("legendentries"),cIe=KFe("load"),lIe=KFe("mark"),fIe=KFe("multiextent"),hIe=KFe("multivalues"),dIe=KFe("overlap"),pIe=KFe("params"),vIe=KFe("prefacet"),gIe=KFe("projection"),mIe=KFe("proxy"),yIe=KFe("relay"),bIe=KFe("render"),xIe=KFe("scale"),wIe=KFe("sieve"),kIe=KFe("sortitems"),_Ie=KFe("viewlayout"),SIe=KFe("values"),CIe=0,EIe={min:"min",max:"max",count:"sum"};function AIe(e,t){var n,r=t.getScale(e.name).params;for(n in r.domain=DIe(e.domain,e,t),null!=e.range&&(r.range=LIe(e,t,r)),null!=e.interpolate&&function(e,t){t.interpolate=NIe(e.type||e),null!=e.gamma&&(t.interpolateGamma=NIe(e.gamma))}(e.interpolate,r),null!=e.nice&&(r.nice=function(e){return rn(e)?{interval:NIe(e.interval),step:NIe(e.step)}:NIe(e)}(e.nice)),null!=e.bins&&(r.bins=function(e,t){return e.signal||nn(e)?TIe(e,t):t.objectProperty(e)}(e.bins,t)),e)In(r,n)||"name"===n||(r[n]=NIe(e[n],t))}function NIe(e,t){return rn(e)?e.signal?t.signalRef(e.signal):Ht("Unsupported object: "+Vn(e)):e}function TIe(e,t){return e.signal?t.signalRef(e.signal):e.map((function(e){return NIe(e,t)}))}function MIe(e){Ht("Can not find data set: "+Vn(e))}function DIe(e,t,n){if(e)return e.signal?n.signalRef(e.signal):(nn(e)?FIe:e.fields?OIe:IIe)(e,t,n);null==t.domainMin&&null==t.domainMax||Ht("No scale domain defined for domainMin/domainMax to override.")}function FIe(e,t,n){return e.map((function(e){return NIe(e,n)}))}function IIe(e,t,n){var r=n.getData(e.data);return r||MIe(e.data),Bw(t.type)?r.valuesRef(n,e.field,ZIe(e.sort,!1)):jw(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function OIe(e,t,n){var r=e.data,a=e.fields.reduce((function(e,t){return t=Pn(t)?{data:r,field:t}:nn(t)||t.signal?function(e,t){var n="_:vega:_"+CIe++,r=eIe({});if(nn(e))r.value={$ingest:e};else if(e.signal){var a="setdata("+Vn(n)+","+e.signal+")";r.params.input=t.signalRef(a)}return t.addDataPipeline(n,[r,wIe({})]),{data:n,field:"data"}}(t,n):t,e.push(t),e}),[]);return(Bw(t.type)?RIe:jw(t.type)?BIe:zIe)(e,n,a)}function RIe(e,t,n){var r,a,i=ZIe(e.sort,!0),o=n.map((function(e){var n=t.getData(e.data);return n||MIe(e.data),n.countsRef(t,e.field,i)})),u={groupby:FFe,pulse:o};i&&(r=i.op||"count",a=i.field?OFe(r,i.field):"count",u.ops=[EIe[r]],u.fields=[t.fieldRef(a)],u.as=[a]),r=t.add($Fe(u));var s=t.add(eIe({pulse:MFe(r)}));return a=t.add(SIe({field:FFe,sort:t.sortRef(i),pulse:MFe(s)})),MFe(a)}function ZIe(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field&&e.op&&!EIe[e.op]&&Ht("Multiple domain scales can not be sorted using "+e.op):Ht("No field provided for sort aggregate op: "+e.op):rn(e)?e.field="key":e={field:"key"}),e}function BIe(e,t,n){var r=n.map((function(e){var n=t.getData(e.data);return n||MIe(e.data),n.domainRef(t,e.field)}));return MFe(t.add(hIe({values:r})))}function zIe(e,t,n){var r=n.map((function(e){var n=t.getData(e.data);return n||MIe(e.data),n.extentRef(t,e.field)}));return MFe(t.add(fIe({extents:r})))}function LIe(e,t,n){var r=t.config.range,a=e.range;if(a.signal)return t.signalRef(a.signal);if(Pn(a)){if(r&&In(r,a))return LIe(e=Mn({},e,{range:r[a]}),t,n);"width"===a?a=[0,{signal:"width"}]:"height"===a?a=Bw(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Ht("Unrecognized scale range value: "+Vn(a))}else{if(a.scheme)return n.scheme=nn(a.scheme)?TIe(a.scheme,t):NIe(a.scheme,t),a.extent&&(n.schemeExtent=TIe(a.extent,t)),void(a.count&&(n.schemeCount=NIe(a.count,t)));if(a.step)return void(n.rangeStep=NIe(a.step,t));if(Bw(e.type)&&!nn(a))return DIe(a,e,t);nn(a)||Ht("Unsupported range type: "+Vn(a))}return a.map((function(e){return(nn(e)?TIe:NIe)(e,t)}))}function PIe(e,t,n){return nn(e)?e.map((function(e){return PIe(e,t,n)})):rn(e)?e.signal?n.signalRef(e.signal):"fit"===t?e:Ht("Unsupported parameter object: "+Vn(e)):e}var jIe="top",UIe="left",WIe="right",VIe="bottom",qIe="center",HIe="index",GIe="label",XIe="perc",YIe="value",KIe="guide-label",$Ie="guide-title",QIe="group-title",JIe="group-subtitle",eOe="symbol",tOe="gradient",nOe="discrete",rOe="size",aOe=[rOe,"shape","fill","stroke","strokeWidth","strokeDash","opacity"],iOe={name:1,style:1,interactive:1},oOe={value:0},uOe={value:1},sOe="group",cOe="rect",lOe="rule",fOe="text";function hOe(e){return e.type=sOe,e.interactive=e.interactive||!1,e}function dOe(e,t){var n=function(n,r){return LFe(e[n],LFe(t[n],r))};return n.isVertical=function(n){return"vertical"===LFe(e.direction,t.direction||(n?t.symbolDirection:t.gradientDirection))},n.gradientLength=function(){return LFe(e.gradientLength,t.gradientLength||t.gradientWidth)},n.gradientThickness=function(){return LFe(e.gradientThickness,t.gradientThickness||t.gradientHeight)},n.entryColumns=function(){return LFe(e.columns,LFe(t.columns,+n.isVertical(!0)))},n}function pOe(e,t){var n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function vOe(e,t,n){return"item.anchor === '".concat("start","' ? ").concat(e," : item.anchor === '").concat("end","' ? ").concat(t," : ").concat(n)}var gOe=vOe(Vn(UIe),Vn(WIe),Vn(qIe));function mOe(e,t){return t?e?rn(e)?Object.assign({},e,{offset:mOe(e.offset,t)}):{value:e,offset:t}:t:e}function yOe(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=oFe(e.encode,t,iOe)):e.interactive=!1,e}function bOe(e,t,n,r){var a,i,o,u,s,c=dOe(e,n),l=c.isVertical(),f=c.gradientThickness(),h=c.gradientLength();l?(i=[0,1],o=[0,0],u=f,s=h):(i=[0,0],o=[1,0],u=h,s=f);var d={enter:a={opacity:oOe,x:oOe,y:oOe,width:rFe(u),height:rFe(s)},update:Mn({},a,{opacity:uOe,fill:{gradient:t,start:i,stop:o}}),exit:{opacity:oOe}};return iFe(d,{stroke:c("gradientStrokeColor"),strokeWidth:c("gradientStrokeWidth")},{opacity:c("gradientOpacity")}),yOe({type:cOe,role:"legend-gradient",encode:d},r)}function xOe(e,t,n,r,a){var i,o,u,s,c=dOe(e,n),l=c.isVertical(),f=c.gradientThickness(),h=c.gradientLength(),d="";l?(i="y",u="y2",o="x",s="width",d="1-"):(i="x",u="x2",o="y",s="height");var p={opacity:oOe,fill:{scale:t,field:YIe}};p[i]={signal:d+"datum."+XIe,mult:h},p[o]=oOe,p[u]={signal:d+"datum.perc2",mult:h},p[s]=rFe(f);var v={enter:p,update:Mn({},p,{opacity:uOe}),exit:{opacity:oOe}};return iFe(v,{stroke:c("gradientStrokeColor"),strokeWidth:c("gradientStrokeWidth")},{opacity:c("gradientOpacity")}),yOe({type:cOe,role:"legend-band",key:YIe,from:a,encode:v},r)}var wOe="datum.".concat(XIe,'<=0?"').concat(UIe,'":datum.').concat(XIe,'>=1?"').concat(WIe,'":"').concat(qIe,'"'),kOe="datum.".concat(XIe,'<=0?"').concat(VIe,'":datum.').concat(XIe,'>=1?"').concat(jIe,'":"').concat("middle",'"');function _Oe(e,t,n,r){var a,i,o,u,s=dOe(e,t),c=s.isVertical(),l=rFe(s.gradientThickness()),f=s.gradientLength(),h=s("labelOverlap"),d="",p={enter:a={opacity:oOe},update:i={opacity:uOe,text:{field:GIe}},exit:{opacity:oOe}};return iFe(p,{fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:LFe(e.labelLimit,t.gradientLabelLimit)}),c?(a.align={value:"left"},a.baseline=i.baseline={signal:kOe},o="y",u="x",d="1-"):(a.align=i.align={signal:wOe},a.baseline={value:"top"},o="x",u="y"),a[o]=i[o]={signal:d+"datum."+XIe,mult:f},a[u]=i[u]=l,l.offset=LFe(e.labelOffset,t.gradientLabelOffset)||0,h=h?{separation:s("labelSeparation"),method:h,order:"datum.index"}:void 0,yOe({type:fOe,role:fFe,style:KIe,key:YIe,from:r,encode:p,overlap:h},n)}function SOe(e,t,n,r,a){var i,o,u,s,c,l=dOe(e,t),f=n.entries,h=!(!f||!f.interactive),d=f?f.name:void 0,p=l("clipHeight"),v=l("symbolOffset"),g={data:"value"},m="(".concat(a,") ? datum.").concat("offset"," : datum.").concat(rOe),y=p?rFe(p):{field:rOe},b="datum.".concat(HIe),x="max(1, ".concat(a,")");y.mult=.5,i={enter:o={opacity:oOe,x:{signal:m,mult:.5,offset:v},y:y},update:u={opacity:uOe,x:o.x,y:o.y},exit:{opacity:oOe}};var w=null,k=null;e.fill||(w=t.symbolBaseFillColor,k=t.symbolBaseStrokeColor),iFe(i,{fill:l("symbolFillColor",w),shape:l("symbolType"),size:l("symbolSize"),stroke:l("symbolStrokeColor",k),strokeDash:l("symbolDash"),strokeDashOffset:l("symbolDashOffset"),strokeWidth:l("symbolStrokeWidth")},{opacity:l("symbolOpacity")}),aOe.forEach((function(t){e[t]&&(u[t]=o[t]={scale:e[t],field:YIe})}));var _=yOe({type:"symbol",role:"legend-symbol",key:YIe,from:g,clip:!!p||void 0,encode:i},n.symbols),S=rFe(v);S.offset=l("labelOffset"),iFe(i={enter:o={opacity:oOe,x:{signal:m,offset:S},y:y},update:u={opacity:uOe,text:{field:GIe},x:o.x,y:o.y},exit:{opacity:oOe}},{align:l("labelAlign"),baseline:l("labelBaseline"),fill:l("labelColor"),fillOpacity:l("labelOpacity"),font:l("labelFont"),fontSize:l("labelFontSize"),fontStyle:l("labelFontStyle"),fontWeight:l("labelFontWeight"),limit:l("labelLimit")});var C=yOe({type:fOe,role:fFe,style:KIe,key:YIe,from:g,encode:i},n.labels);return i={enter:{noBound:{value:!p},width:oOe,height:p?rFe(p):oOe,opacity:oOe},exit:{opacity:oOe},update:u={opacity:uOe,row:{signal:null},column:{signal:null}}},l.isVertical(!0)?(s="ceil(item.mark.items.length / ".concat(x,")"),u.row.signal="".concat(b,"%").concat(s),u.column.signal="floor(".concat(b," / ").concat(s,")"),c={field:["row",b]}):(u.row.signal="floor(".concat(b," / ").concat(x,")"),u.column.signal="".concat(b," % ").concat(x),c={field:b}),u.column.signal="(".concat(a,")?").concat(u.column.signal,":").concat(b),hOe({role:lFe,from:r={facet:{data:r,name:"value",groupby:HIe}},encode:oFe(i,f,iOe),marks:[_,C],name:d,interactive:h,sort:c})}var COe='item.orient === "left"',EOe='item.orient === "right"',AOe="(".concat(COe," || ").concat(EOe,")"),NOe="datum.vgrad && ".concat(AOe),TOe=vOe('"top"','"bottom"','"middle"'),MOe=vOe('"right"','"left"','"center"'),DOe="datum.vgrad && ".concat(EOe," ? (").concat(MOe,") : (").concat(AOe," && !(datum.vgrad && ").concat(COe,')) ? "left" : ').concat(gOe),FOe="item._anchor || (".concat(AOe,' ? "middle" : "start")'),IOe="".concat(NOe," ? (").concat(COe," ? -90 : 90) : 0"),OOe="".concat(AOe," ? (datum.vgrad ? (").concat(EOe,' ? "bottom" : "top") : ').concat(TOe,') : "top"');function ROe(e,t){var n;return rn(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+ZOe(e.path)+")":e.sphere&&(n="geoShape("+ZOe(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function ZOe(e){return rn(e)&&e.signal?e.signal:Vn(e)}function BOe(e){var t=e.role||"";return t.indexOf("axis")&&t.indexOf("legend")&&t.indexOf("title")?e.type===sOe?lFe:t||sFe:t}function zOe(e){return{marktype:e.type,name:e.name||void 0,role:e.role||BOe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function LOe(e,t){return e&&e.signal?t.signalRef(e.signal):!1!==e}function POe(e,t){var n=pc(e.type);n||Ht("Unrecognized transform type: "+Vn(e.type));var r=NFe(n.type.toLowerCase(),null,jOe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function jOe(e,t,n){for(var r={},a=e.params.length,i=0;i<a;++i){var o=e.params[i];r[o.name]=UOe(o,t,n)}return r}function UOe(e,t,n){var r=e.type,a=t[e.name];return"index"===r?function(e,t,n){Pn(t.from)||Ht('Lookup "from" parameter must be a string literal.');return n.getData(t.from).lookupRef(n,t.key)}(0,t,n):void 0!==a?"param"===r?function(e,t,n){var r=t[e.name];return e.array?(nn(r)||Ht("Expected an array of sub-parameters. Instead: "+Vn(r)),r.map((function(t){return VOe(e,t,n)}))):VOe(e,r,n)}(e,t,n):"projection"===r?n.projectionRef(t[e.name]):e.array&&!BFe(a)?a.map((function(t){return WOe(e,t,n)})):WOe(e,a,n):void(e.required&&Ht("Missing required "+Vn(t.type)+" parameter: "+Vn(e.name)))}function WOe(e,t,n){var r=e.type;if(BFe(t))return XOe(r)?Ht("Expression references can not be signals."):YOe(r)?n.fieldRef(t):KOe(r)?n.compareRef(t):n.signalRef(t.signal);var a=e.expr||YOe(r);return a&&qOe(t)?n.exprRef(t.expr,t.as):a&&HOe(t)?DFe(t.field,t.as):XOe(r)?pfe(t,n):GOe(r)?MFe(n.getData(t).values):YOe(r)?DFe(t):KOe(r)?n.compareRef(t):t}function VOe(e,t,n){for(var r,a=e.params.length,i=0;i<a;++i){for(var o in(r=e.params[i]).key)if(r.key[o]!==t[o]){r=null;break}if(r)break}r||Ht("Unsupported parameter: "+Vn(t));var u=Mn(jOe(r,t,n),r.key);return MFe(n.add(pIe(u)))}var qOe=function(e){return e&&e.expr},HOe=function(e){return e&&e.field},GOe=function(e){return"data"===e},XOe=function(e){return"expr"===e},YOe=function(e){return"field"===e},KOe=function(e){return"compare"===e};function $Oe(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:MFe(t.getData(e.data).output)}function QOe(e,t,n,r,a){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=a,this.index={}}function JOe(e){return Pn(e)?e:null}function eRe(e,t,n){var r,a=OFe(n.op,n.field);if(t.ops){for(var i=0,o=t.as.length;i<o;++i)if(t.as[i]===a)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(a))}function tRe(e,t,n,r,a,i,o){var u,s,c=t[n]||(t[n]={}),l=function(e){return rn(e)?("descending"===e.order?"-":"+")+OFe(e.op,e.field):""}(i),f=JOe(a);if(null!=f&&(e=t.scope,u=c[f+=l?"|"+l:""]),!u){var h=i?{field:FFe,pulse:t.countsRef(e,a,i)}:{field:e.fieldRef(a),pulse:MFe(t.output)};l&&(h.sort=e.sortRef(i)),s=e.add(NFe(r,void 0,h)),o&&(t.index[a]=s),u=MFe(s),null!=f&&(c[f]=u)}return u}function nRe(e,t,n){var r=e.remove,a=e.insert,i=e.toggle,o=e.modify,u=e.values,s=t.add(TFe()),c=pfe("if("+e.trigger+',modify("'+n+'",'+[a,r,i,o,u].map((function(e){return null==e?"null":e})).join(",")+"),0)",t);s.update=c.$expr,s.params=c.$params}function rRe(e,t){var n,r,a,i,o,u,s,c=BOe(e),l=e.type===sOe,f=e.from&&e.from.facet,h=e.overlap,d=e.layout||c===lFe||c===cFe,p=c===sFe||d||f,v=function(e,t,n){var r,a,i,o,u;return e?(r=e.facet)&&(t||Ht("Only group marks can be faceted."),null!=r.field?o=u=$Oe(r,n):(e.data?u=MFe(n.getData(e.data).aggregate):((i=POe(Mn({type:"aggregate",groupby:wn(r.groupby)},r.aggregate),n)).params.key=n.keyRef(r.groupby),i.params.pulse=$Oe(r,n),o=u=MFe(n.add(i))),a=n.keyRef(r.groupby,!0))):o=MFe(n.add(eIe(null,[{}]))),o||(o=$Oe(e,n)),{key:a,pulse:o,parent:u}}(e.from,l,t),g=MFe(r=t.add(nIe({key:v.key||(e.key?DFe(e.key):void 0),pulse:v.pulse,clean:!l})));r=a=t.add(eIe({pulse:g})),r=t.add(lIe({markdef:zOe(e),interactive:LOe(e.interactive,t),clip:ROe(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:MFe(r)}));var m=MFe(r);(r=i=t.add(rIe(wFe(e.encode,e.type,c,e.style,t,{mod:!1,pulse:m})))).params.parent=t.encode(),e.transform&&e.transform.forEach((function(e){var n=POe(e,t),a=n.metadata;(a.generates||a.changes)&&Ht("Mark transforms should not generate new data."),a.nomod||(i.params.mod=!0),n.params.pulse=MFe(r),t.add(r=n)})),e.sort&&(r=t.add(kIe({sort:t.compareRef(e.sort),pulse:MFe(r)})));var y=MFe(r);(f||d)&&(u=MFe(d=t.add(_Ie({layout:t.objectProperty(e.layout),legends:t.legends,mark:m,pulse:y}))));var b=t.add(JFe({mark:m,pulse:u||y}));s=MFe(b),l&&(p&&((n=t.operators).pop(),d&&n.pop()),t.pushState(y,u||s,g),f?function(e,t,n){var r,a=e.from.facet,i=a.name,o=$Oe(a,t);a.name||Ht("Facet must have a name: "+Vn(a)),a.data||Ht("Facet must reference a data set: "+Vn(a)),a.field?r=t.add(vIe({field:t.fieldRef(a.field),pulse:o})):a.groupby?r=t.add(iIe({key:t.keyRef(a.groupby),group:MFe(t.proxy(n.parent)),pulse:o})):Ht("Facet must specify groupby or field: "+Vn(a));var u=t.fork(),s=u.add(eIe()),c=u.add(wIe({pulse:MFe(s)}));u.addData(i,new QOe(u,s,s,c)),u.addSignal("parent",null),r.params.subflow={$subflow:u.parse(e).toRuntime()}}(e,t,v):p?function(e,t,n){var r=t.add(vIe({pulse:n.pulse})),a=t.fork();a.add(wIe()),a.addSignal("parent",null),r.params.subflow={$subflow:a.parse(e).toRuntime()}}(e,t,v):t.parse(e),t.popState(),p&&(d&&n.push(d),n.push(b))),h&&(s=function(e,t,n){var r=e.method,a=e.bound,i=e.separation,o={separation:BFe(i)?n.signalRef(i.signal):i,method:BFe(r)?n.signalRef(r.signal):r,pulse:t};e.order&&(o.sort=n.compareRef({field:e.order}));if(a){var u=a.tolerance;o.boundTolerance=BFe(u)?n.signalRef(u.signal):+u,o.boundScale=n.scaleRef(a.scale),o.boundOrient=a.orient}return MFe(n.add(dIe(o)))}(h,s,t));var x=t.add(bIe({pulse:s})),w=t.add(wIe({pulse:MFe(x)},void 0,t.parent()));null!=e.name&&(o=e.name,t.addData(o,new QOe(t,a,x,w)),e.on&&e.on.forEach((function(e){(e.insert||e.remove||e.toggle)&&Ht("Marks only support modify triggers."),nRe(e,t,o)})))}function aRe(e,t){var n,r,a,i=t.config.legend,o=e.encode||{},u=dOe(e,i),s=o.legend||{},c=s.name||void 0,l=s.interactive,f=s.style,h={},d=0;aOe.forEach((function(t){return e[t]?(h[t]=e[t],d=d||e[t]):0})),d||Ht("Missing valid scale for legend.");var p=function(e,t){var n=e.type||eOe;e.type||1!==function(e){return aOe.reduce((function(t,n){return t+(e[n]?1:0)}),0)}(e)||!e.fill&&!e.stroke||(n=Zw(t)?tOe:zw(t)?nOe:eOe);return n!==tOe?n:zw(t)?nOe:tOe}(e,t.scaleType(d)),v={title:null!=e.title,scales:h,type:p,vgrad:"symbol"!==p&&u.isVertical()},g=MFe(t.add(eIe(null,[v]))),m=MFe(t.add(sIe(r={type:p,scale:t.scaleRef(d),count:t.objectProperty(u("tickCount")),limit:t.property(u("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===tOe?(a=[bOe(e,d,i,o.gradient),_Oe(e,i,o.labels,m)],r.count=r.count||t.signalRef("max(2,2*floor((".concat(PFe(u.gradientLength()),")/100))"))):p===nOe?a=[xOe(e,d,i,o.gradient,m),_Oe(e,i,o.labels,m)]:(n=function(e,t){var n=dOe(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}(e,i),a=[SOe(e,i,o,m,PFe(n.columns))],r.size=function(e,t,n){var r=PFe(oRe("size",e,n)),a=PFe(oRe("strokeWidth",e,n)),i=PFe(function(e,t,n){return pOe("fontSize",e)||function(e,t,n){var r=t.config.style[n];return r&&r[e]}("fontSize",t,n)}(n[1].encode,t,KIe));return pfe("max(ceil(sqrt(".concat(r,")+").concat(a,"),").concat(i,")"),t)}(e,t,a[0].marks)),a=[hOe({role:"legend-entry",from:g,encode:{enter:{x:{value:0},y:{value:0}}},marks:a,layout:n,interactive:l})],v.title&&a.push(function(e,t,n,r){var a=dOe(e,t),i={enter:{opacity:oOe},update:{opacity:uOe,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:oOe}};return iFe(i,{orient:a("titleOrient"),_anchor:a("titleAnchor"),anchor:{signal:FOe},angle:{signal:IOe},align:{signal:DOe},baseline:{signal:OOe},text:e.title,fill:a("titleColor"),fillOpacity:a("titleOpacity"),font:a("titleFont"),fontSize:a("titleFontSize"),fontStyle:a("titleFontStyle"),fontWeight:a("titleFontWeight"),limit:a("titleLimit"),lineHeight:a("titleLineHeight")},{align:a("titleAlign"),baseline:a("titleBaseline")}),yOe({type:fOe,role:"legend-title",style:$Ie,from:r,encode:i},n)}(e,i,o.title,g)),rRe(hOe({role:"legend",from:g,encode:oFe(iRe(u,e,i),s,iOe),marks:a,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:c,interactive:l,style:f}),t)}function iRe(e,t,n){var r={enter:{},update:{}};return iFe(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function oRe(e,t,n){return t[e]?'scale("'.concat(t[e],'",datum)'):pOe(e,n[0].encode)}QOe.fromEntries=function(e,t){var n=t.length,r=t[n-1],a=t[n-2],i=t[0],o=null,u=1;for(i&&"load"===i.type&&(i=t[1]),e.add(t[0]);u<n;++u)t[u].params.pulse=MFe(t[u-1]),e.add(t[u]),"aggregate"===t[u].type&&(o=t[u]);return new QOe(e,i,a,r,o)},QOe.prototype={countsRef:function(e,t,n){var r,a,i,o=this,u=o.counts||(o.counts={}),s=JOe(t);return null!=s&&(e=o.scope,r=u[s]),r?n&&n.field&&eRe(e,r.agg.params,n):(i={groupby:e.fieldRef(t,"key"),pulse:MFe(o.output)},n&&n.field&&eRe(e,i,n),a=e.add($Fe(i)),r=e.add(eIe({pulse:MFe(a)})),r={agg:a,ref:MFe(r)},null!=s&&(u[s]=r)),r.ref},tuplesRef:function(){return MFe(this.values)},extentRef:function(e,t){return tRe(e,this,"extent","extent",t,!1)},domainRef:function(e,t){return tRe(e,this,"domain","values",t,!1)},valuesRef:function(e,t,n){return tRe(e,this,"vals","values",t,n||!0)},lookupRef:function(e,t){return tRe(e,this,"lookup","tupleindex",t,!1)},indataRef:function(e,t){return tRe(e,this,"indata","tupleindex",t,!0,!0)}};var uRe='item.orient==="'.concat(UIe,'"?-90:item.orient==="').concat(WIe,'"?90:0');function sRe(e,t){var n=dOe(e=Pn(e)?{text:e}:e,t.config.title),r=e.encode||{},a=r.group||{},i=a.name||void 0,o=a.interactive,u=a.style,s=[],c=MFe(t.add(eIe(null,[{}])));return s.push(function(e,t,n,r){var a={value:0},i=e.text,o={enter:{opacity:a},update:{opacity:{value:1}},exit:{opacity:a}};return iFe(o,{text:i,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),yOe({type:fOe,role:hFe,style:QIe,from:r,encode:o},n)}(e,n,function(e){var t=e.encode;return t&&t.title||Mn({name:e.name,interactive:e.interactive,style:e.style},t)}(e),c)),e.subtitle&&s.push(function(e,t,n,r){var a={value:0},i=e.subtitle,o={enter:{opacity:a},update:{opacity:{value:1}},exit:{opacity:a}};return iFe(o,{text:i,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),yOe({type:fOe,role:dFe,style:JIe,from:r,encode:o},n)}(e,n,r.subtitle,c)),rRe(hOe({role:"title",from:c,encode:cRe(n,a),marks:s,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:i,interactive:o,style:u}),t)}function cRe(e,t){var n={enter:{},update:{}};return iFe(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:gOe},angle:{signal:uRe},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),oFe(n,t,iOe)}function lRe(e,t){var n=[];e.transform&&e.transform.forEach((function(e){n.push(POe(e,t))})),e.on&&e.on.forEach((function(n){nRe(n,t,e.name)})),t.addDataPipeline(e.name,function(e,t,n){var r,a,i,o,u,s=[],c=null,l=!1,f=!1;e.values?BFe(e.values)||zFe(e.format)?(s.push(hRe(t,e)),s.push(c=fRe())):s.push(c=fRe({$ingest:e.values,$format:e.format})):e.url?zFe(e.url)||zFe(e.format)?(s.push(hRe(t,e)),s.push(c=fRe())):s.push(c=fRe({$request:e.url,$format:e.format})):e.source&&(c=r=wn(e.source).map((function(e){return MFe(t.getData(e).output)})),s.push(null));for(a=0,i=n.length;a<i;++a)u=(o=n[a]).metadata,c||u.source||s.push(c=fRe()),s.push(o),u.generates&&(f=!0),u.modifies&&!f&&(l=!0),u.source?c=o:u.changes&&(c=null);r&&(i=r.length-1,s[0]=yIe({derive:l,pulse:i?r:r[0]}),(l||i)&&s.splice(1,0,fRe()));c||s.push(fRe());return s.push(wIe({})),s}(e,t,n))}function fRe(e){var t=eIe({},e);return t.metadata={source:!0},t}function hRe(e,t){return cIe({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}var dRe=function(e){return e===VIe||e===jIe},pRe=function(e,t,n){return BFe(e)?xRe(e.signal,t,n):e===UIe||e===jIe?t:n},vRe=function(e,t,n){return BFe(e)?yRe(e.signal,t,n):dRe(e)?t:n},gRe=function(e,t,n){return BFe(e)?bRe(e.signal,t,n):dRe(e)?n:t},mRe=function(e,t,n){return BFe(e)?wRe(e.signal,t,n):e===jIe?{value:t}:{value:n}},yRe=function(e,t,n){return _Re("".concat(e," === '").concat(jIe,"' || ").concat(e," === '").concat(VIe,"'"),t,n)},bRe=function(e,t,n){return _Re("".concat(e," !== '").concat(jIe,"' && ").concat(e," !== '").concat(VIe,"'"),t,n)},xRe=function(e,t,n){return CRe("".concat(e," === '").concat(UIe,"' || ").concat(e," === '").concat(jIe,"'"),t,n)},wRe=function(e,t,n){return CRe("".concat(e," === '").concat(jIe,"'"),t,n)},kRe=function(e,t,n){return CRe("".concat(e," === '").concat(WIe,"'"),t,n)},_Re=function(e,t,n){return t=null!=t?rFe(t):t,n=null!=n?rFe(n):n,SRe(t)&&SRe(n)?(t=t?t.signal||Vn(t.value):null,n=n?n.signal||Vn(n.value):null,{signal:"".concat(e," ? (").concat(t,") : (").concat(n,")")}):[Mn({test:e},t)].concat(n||[])},SRe=function(e){return null==e||1===Object.keys(e).length},CRe=function(e,t,n){return{signal:"".concat(e," ? (").concat(ARe(t),") : (").concat(ARe(n),")")}},ERe=function(e,t,n,r,a){return{signal:(null!=r?"".concat(e," === '").concat(UIe,"' ? (").concat(ARe(r),") : "):"")+(null!=n?"".concat(e," === '").concat(VIe,"' ? (").concat(ARe(n),") : "):"")+(null!=a?"".concat(e," === '").concat(WIe,"' ? (").concat(ARe(a),") : "):"")+(null!=t?"".concat(e," === '").concat(jIe,"' ? (").concat(ARe(t),") : "):"")+"(null)"}},ARe=function(e){return BFe(e)?e.signal:null==e?null:Vn(e)},NRe=function(e,t){var n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function TRe(e,t,n,r){var a;if(t&&In(t,e))return t[e];if(In(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":a="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":a=e[5].toLowerCase()+e.slice(6)}return r["guide-title"][a]}if(e.startsWith("label")){switch(e){case"labelColor":a="fill";break;case"labelFont":case"labelFontSize":a=e[5].toLowerCase()+e.slice(6)}return r["guide-label"][a]}return null}function MRe(e){var t,n={},r=(0,zt.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(a)for(var i in a)n[i]=1}}catch(o){r.e(o)}finally{r.f()}return Object.keys(n)}function DRe(e,t){return{scale:e.scale,range:t}}function FRe(e,t,n,r,a){var i,o,u,s=dOe(e,t),c=e.orient,l=e.gridScale,f=pRe(c,1,-1),h=function(e,t){if(1===t);else if(rn(e)){for(var n=e=Mn({},e);null!=n.mult;){if(!rn(n.mult))return n.mult=BFe(t)?{signal:"(".concat(n.mult,") * (").concat(t.signal,")")}:n.mult*t,e;n=n.mult=Mn({},n.mult)}n.mult=t}else e=BFe(t)?{signal:"(".concat(t.signal,") * (").concat(e||0,")")}:t*(e||0);return e}(e.offset,f),d={enter:i={opacity:oOe},update:u={opacity:uOe},exit:o={opacity:oOe}};iFe(d,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});var p={scale:e.scale,field:YIe,band:a.band,extra:a.extra,offset:a.offset,round:s("tickRound")},v=vRe(c,{signal:"height"},{signal:"width"}),g=l?{scale:l,range:0,mult:f,offset:h}:{value:0,offset:h},m=l?{scale:l,range:1,mult:f,offset:h}:Mn(v,{mult:f,offset:h});return i.x=u.x=vRe(c,p,g),i.y=u.y=gRe(c,p,g),i.x2=u.x2=gRe(c,m),i.y2=u.y2=vRe(c,m),o.x=vRe(c,p),o.y=gRe(c,p),yOe({type:lOe,role:"axis-grid",key:YIe,from:r,encode:d},n)}function IRe(e,t,n,r,a){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+a+")"}}function ORe(e,t,n,r,a,i){var o,u=dOe(e,t),s=e.orient,c=e.scale,l=pRe(s,-1,1),f=PFe(u("labelFlush")),h=PFe(u("labelFlushOffset")),d=u("labelAlign"),p=u("labelBaseline"),v=0===f||!!f,g=rFe(a);g.mult=l,g.offset=rFe(u("labelPadding")||0),g.offset.mult=l;var m={scale:c,field:YIe,band:.5,offset:mOe(i.offset,u("labelOffset"))},y=vRe(s,v?IRe(c,f,'"left"','"right"','"center"'):{value:"center"},function(e,t,n){return BFe(e)?kRe(e.signal,t,n):e===WIe?{value:t}:{value:n}}(s,"left","right")),b=vRe(s,mRe(s,"bottom","top"),v?IRe(c,f,'"top"','"bottom"','"middle"'):{value:"middle"}),x=IRe(c,f,"-(".concat(h,")"),h,0);v=v&&h;var w={opacity:oOe,x:vRe(s,m,g),y:gRe(s,m,g)},k={enter:w,update:o={opacity:uOe,text:{field:GIe},x:w.x,y:w.y,align:y,baseline:b},exit:{opacity:oOe,x:w.x,y:w.y}};iFe(k,{dx:!d&&v?vRe(s,x):null,dy:!p&&v?gRe(s,x):null}),iFe(k,{angle:u("labelAngle"),fill:u("labelColor"),fillOpacity:u("labelOpacity"),font:u("labelFont"),fontSize:u("labelFontSize"),fontWeight:u("labelFontWeight"),fontStyle:u("labelFontStyle"),limit:u("labelLimit"),lineHeight:u("labelLineHeight")},{align:d,baseline:p});var _=u("labelBound"),S=u("labelOverlap");return S=S||_?{separation:u("labelSeparation"),method:S,order:"datum.index",bound:_?{scale:c,orient:s,tolerance:_}:null}:void 0,o.align!==y&&(o.align=NRe(o.align,y)),o.baseline!==b&&(o.baseline=NRe(o.baseline,b)),yOe({type:fOe,role:"axis-label",style:KIe,key:YIe,from:r,encode:k,overlap:S},n)}function RRe(e,t,n,r){var a,i,o=dOe(e,t),u=e.orient,s=pRe(u,-1,1),c={enter:a={opacity:oOe,anchor:rFe(o("titleAnchor",null)),align:{signal:gOe}},update:i=Mn({},a,{opacity:uOe,text:rFe(e.title)}),exit:{opacity:oOe}},l={signal:'lerp(range("'.concat(e.scale,'"), ').concat(vOe(0,1,.5),")")};return i.x=vRe(u,l),i.y=gRe(u,l),a.angle=vRe(u,oOe,function(e,t){return 0===t?0:BFe(e)?{signal:"(".concat(e.signal,") * ").concat(t)}:{value:e*t}}(s,90)),a.baseline=vRe(u,mRe(u,VIe,jIe),{value:VIe}),i.angle=a.angle,i.baseline=a.baseline,iFe(c,{fill:o("titleColor"),fillOpacity:o("titleOpacity"),font:o("titleFont"),fontSize:o("titleFontSize"),fontStyle:o("titleFontStyle"),fontWeight:o("titleFontWeight"),limit:o("titleLimit"),lineHeight:o("titleLineHeight")},{align:o("titleAlign"),angle:o("titleAngle"),baseline:o("titleBaseline")}),function(e,t,n,r){var a=function(e,t){return null!=e?(n.update[t]=NRe(rFe(e),n.update[t]),!1):!uFe(t,r)},i=a(e("titleX"),"x"),o=a(e("titleY"),"y");n.enter.auto=o===i?rFe(o):vRe(t,rFe(o),rFe(i))}(o,u,c,n),c.update.align=NRe(c.update.align,a.align),c.update.angle=NRe(c.update.angle,a.angle),c.update.baseline=NRe(c.update.baseline,a.baseline),yOe({type:fOe,role:"axis-title",style:$Ie,from:r,encode:c},n)}function ZRe(e,t){var n,r=function(e,t){var n,r,a,i=t.config,o=i.style,u=i.axis,s="band"===t.scaleType(e.scale)&&i.axisBand,c=e.orient;if(BFe(c)){var l=MRe([i.axisX,i.axisY]),f=MRe([i.axisTop,i.axisBottom,i.axisLeft,i.axisRight]);n={};var h,d=(0,zt.Z)(l);try{for(d.s();!(h=d.n()).done;)n[a=h.value]=vRe(c,TRe(a,i.axisX,u,o),TRe(a,i.axisY,u,o))}catch(g){d.e(g)}finally{d.f()}r={};var p,v=(0,zt.Z)(f);try{for(v.s();!(p=v.n()).done;)r[a=p.value]=ERe(c.signal,TRe(a,i.axisTop,u,o),TRe(a,i.axisBottom,u,o),TRe(a,i.axisLeft,u,o),TRe(a,i.axisRight,u,o))}catch(g){v.e(g)}finally{v.f()}}else n=c===jIe||c===VIe?i.axisX:i.axisY,r=i["axis"+c[0].toUpperCase()+c.slice(1)];return n||r||s?Mn({},u,n,r,s):u}(e,t),a=e.encode||{},i=a.axis||{},o=i.name||void 0,u=i.interactive,s=i.style,c=dOe(e,r),l=function(e){var t,n,r=e("tickBand"),a=e("tickOffset");return r?r.signal?(t={signal:"(".concat(r.signal,") === 'extent' ? 1 : 0.5")},n={signal:"(".concat(r.signal,") === 'extent'")},rn(a)||(a={signal:"(".concat(r.signal,") === 'extent' ? 0 : ").concat(a)})):"extent"===r?(t=1,n=!0,a=0):(t=.5,n=!1):(t=e("bandPosition"),n=e("tickExtra")),{extra:n,band:t,offset:a}}(c),f={scale:e.scale,ticks:!!c("ticks"),labels:!!c("labels"),grid:!!c("grid"),domain:!!c("domain"),title:null!=e.title},h=MFe(t.add(eIe({},[f]))),d=MFe(t.add(QFe({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),p=[];return f.grid&&p.push(FRe(e,r,a.grid,d,l)),f.ticks&&(n=c("tickSize"),p.push(function(e,t,n,r,a,i){var o,u,s,c=dOe(e,t),l=e.orient,f=pRe(l,-1,1),h={enter:o={opacity:oOe},update:s={opacity:uOe},exit:u={opacity:oOe}};iFe(h,{stroke:c("tickColor"),strokeCap:c("tickCap"),strokeDash:c("tickDash"),strokeDashOffset:c("tickDashOffset"),strokeOpacity:c("tickOpacity"),strokeWidth:c("tickWidth")});var d=rFe(a);d.mult=f;var p={scale:e.scale,field:YIe,band:i.band,extra:i.extra,offset:i.offset,round:c("tickRound")};return s.y=o.y=vRe(l,oOe,p),s.y2=o.y2=vRe(l,d),u.x=vRe(l,p),s.x=o.x=gRe(l,oOe,p),s.x2=o.x2=gRe(l,d),u.y=gRe(l,p),yOe({type:lOe,role:"axis-tick",key:YIe,from:r,encode:h},n)}(e,r,a.ticks,d,n,l))),f.labels&&(n=f.ticks?n:0,p.push(ORe(e,r,a.labels,d,n,l))),f.domain&&p.push(function(e,t,n,r){var a,i,o=dOe(e,t),u=e.orient,s={enter:a={opacity:oOe},update:i={opacity:uOe},exit:{opacity:oOe}};iFe(s,{stroke:o("domainColor"),strokeCap:o("domainCap"),strokeDash:o("domainDash"),strokeDashOffset:o("domainDashOffset"),strokeWidth:o("domainWidth"),strokeOpacity:o("domainOpacity")});var c=DRe(e,0),l=DRe(e,1);return a.x=i.x=vRe(u,c,oOe),a.x2=i.x2=vRe(u,l),a.y=i.y=gRe(u,c,oOe),a.y2=i.y2=gRe(u,l),yOe({type:lOe,role:"axis-domain",from:r,encode:s},n)}(e,r,a.domain,h)),f.title&&p.push(RRe(e,r,a.title,h)),rRe(hOe({role:"axis",from:h,encode:oFe(BRe(c,e),i,iOe),marks:p,aria:c("aria"),description:c("description"),zindex:c("zindex"),name:o,interactive:u,style:s}),t)}function BRe(e,t){var n={enter:{},update:{}};return iFe(n,{orient:e("orient"),offset:e("offset")||0,position:LFe(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:'abs(span(range("'.concat(t.scale,'")))')},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function zRe(e,t,n){var r=wn(e.signals),a=wn(e.scales);return n||r.forEach((function(e){return EFe(e,t)})),wn(e.projections).forEach((function(e){return function(e,t){var n=t.config.projection||{},r={};for(var a in e)"name"!==a&&(r[a]=PIe(e[a],a,t));for(var i in n)null==r[i]&&(r[i]=PIe(n[i],i,t));t.addProjection(e.name,r)}(e,t)})),a.forEach((function(e){return function(e,t){var n=e.type||"linear";Ow(n)||Ht("Unrecognized scale type: "+Vn(n)),t.addScale(e.name,{type:n,domain:void 0})}(e,t)})),wn(e.data).forEach((function(e){return lRe(e,t)})),a.forEach((function(e){return AIe(e,t)})),(n||r).forEach((function(e){return function(e,t){var n=t.getSignal(e.name),r=e.update;e.init&&(r?Ht("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=pfe(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach((function(e){return XFe(e,t,n.id)}))}(e,t)})),wn(e.axes).forEach((function(e){return ZRe(e,t)})),wn(e.marks).forEach((function(e){return rRe(e,t)})),wn(e.legends).forEach((function(e){return aRe(e,t)})),e.title&&sRe(e.title,t),t.parseLambdas(),t}function LRe(e,t){var n=t.config,r=MFe(t.root=t.add(TFe())),a=function(e,t){var n=function(n){return LFe(e[n],t[n])},r=[PRe("background",n("background")),PRe("autosize",eFe(n("autosize"))),PRe("padding",nFe(n("padding"))),PRe("width",n("width")||0),PRe("height",n("height")||0)],a=r.reduce((function(e,t){return e[t.name]=t,e}),{}),i={};return wn(e.signals).forEach((function(e){In(a,e.name)?e=Mn(a[e.name],e):r.push(e),i[e.name]=e})),wn(t.signals).forEach((function(e){In(i,e.name)||In(a,e.name)||r.push(e)})),r}(e,n);a.forEach((function(e){return EFe(e,t)})),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;var i=t.add(eIe()),o=t.add(rIe(wFe(function(e){return oFe({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e)}(e.encode),sOe,cFe,e.style,t,{pulse:MFe(i)}))),u=t.add(_Ie({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:MFe(o)}));t.operators.pop(),t.pushState(MFe(o),MFe(u),null),zRe(e,t,a),t.operators.push(u);var s=t.add(JFe({mark:r,pulse:MFe(u)}));return s=t.add(bIe({pulse:MFe(s)})),s=t.add(wIe({pulse:MFe(s)})),t.addData("root",new QOe(t,i,i,s)),t}function PRe(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function jRe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function URe(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}function WRe(e){return(nn(e)?VRe:qRe)(e)}function VRe(e){for(var t=e.length,n="[",r=0;r<t;++r){var a=e[r];n+=(r>0?",":"")+(rn(a)?a.signal||WRe(a):Vn(a))}return n+"]"}function qRe(e){var t,n,r="{",a=0;for(t in e)n=e[t],r+=(++a>1?",":"")+Vn(t)+":"+(rn(n)?n.signal||WRe(n):Vn(n));return r+"}"}function HRe(e,t,n){return rn(e)||Ht("Input Vega specification must be an object."),t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){for(var n in t)if("signals"===n)e.signals=un(e.signals,t.signals);else{var r="legend"===n?{layout:1}:"style"===n||null;on(e,n,t[n],r)}return e}),{})}(function(){var e="sans-serif",t="#4c78a8",n="#000",r="#888",a="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:t},area:{fill:t},image:null,line:{stroke:t,strokeWidth:2},path:{stroke:t},rect:{fill:t},rule:{stroke:n},shape:{stroke:t},symbol:{fill:t,size:64},text:{fill:n,font:e,fontSize:11},trail:{fill:t,size:2},style:{"guide-label":{fill:n,font:e,fontSize:10},"guide-title":{fill:n,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:n,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:n,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:a}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:r,grid:!1,gridWidth:1,gridColor:a,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:r,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:a,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:r,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}(),t,e.config),LRe(e,new jRe(t,n)).toRuntime()}function GRe(e,t,n){return e.fields=t||[],e.fname=n,e}function XRe(e){return 1===e.length?YRe(e[0]):KRe(e)}jRe.prototype=URe.prototype={parse:function(e){return zRe(e,this)},fork:function(){return new URe(this)},isSubscope:function(){return this._subid>0},toRuntime:function(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id:function(){return(this._subid?this._subid+":":0)+this._id++},add:function(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach((function(t){t.$ref=e.id})),e.refs=null),e},proxy:function(e){var t=e instanceof AFe?MFe(e):e;return this.add(mIe({value:t}))},addStream:function(e){return this.streams.push(e),e.id=this.id(),e},addUpdate:function(e){return this.updates.push(e),e},finish:function(){var e,t;for(e in this.root&&(this.root.root=!0),this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(e,t,n){var r;e&&((r=e.data||(e.data={}))[t]||(r[t]=[])).push(n)}for(e in this.data)for(var r in n((t=this.data[e]).input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values"),t.index)n(t.index[r],e,"index:"+r);return this},pushState:function(e,t,n){this._encode.push(MFe(this.add(wIe({pulse:e})))),this._parent.push(t),this._lookup.push(n?MFe(this.proxy(n)):null),this._markpath.push(-1)},popState:function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent:function(){return sn(this._parent)},encode:function(){return sn(this._encode)},lookup:function(){return sn(this._lookup)},markpath:function(){var e=this._markpath;return++e[e.length-1]},fieldRef:function(e,t){if(Pn(e))return DFe(e,t);e.signal||Ht("Unsupported field reference: "+Vn(e));var n=e.signal,r=this.field[n];if(!r){var a={name:this.signalRef(n)};t&&(a.as=t),this.field[n]=r=MFe(this.add(oIe(a)))}return r},compareRef:function(e){var t=this,n=!1,r=function(e){return BFe(e)?(n=!0,t.signalRef(e.signal)):function(e){return e&&e.expr}(e)?(n=!0,t.exprRef(e.expr)):e},a=wn(e.field).map(r),i=wn(e.order).map(r);return n?MFe(this.add(tIe({fields:a,orders:i}))):IFe(a,i)},keyRef:function(e,t){var n=!1,r=this.signals;return e=wn(e).map((function(e){return BFe(e)?(n=!0,MFe(r[e.signal])):e})),n?MFe(this.add(uIe({fields:e,flat:t}))):function(e,t){var n={$key:e};return t&&(n.$flat=!0),n}(e,t)},sortRef:function(e){if(!e)return e;var t=OFe(e.op,e.field),n=e.order||"ascending";return n.signal?MFe(this.add(tIe({fields:t,orders:this.signalRef(n.signal)}))):IFe(t,n)},event:function(e,t){var n=e+":"+t;if(!this.events[n]){var r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal:function(e){return In(this.signals,e)},addSignal:function(e,t){this.hasOwnSignal(e)&&Ht("Duplicate signal name: "+Vn(e));var n=t instanceof AFe?t:this.add(TFe(t));return this.signals[e]=n},getSignal:function(e){return this.signals[e]||Ht("Unrecognized signal name: "+Vn(e)),this.signals[e]},signalRef:function(e){return this.signals[e]?MFe(this.signals[e]):(In(this.lambdas,e)||(this.lambdas[e]=this.add(TFe(null))),MFe(this.lambdas[e]))},parseLambdas:function(){for(var e=Object.keys(this.lambdas),t=0,n=e.length;t<n;++t){var r=e[t],a=pfe(r,this),i=this.lambdas[r];i.params=a.$params,i.update=a.$expr}},property:function(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty:function(e){return e&&rn(e)?this.signalRef(e.signal||WRe(e)):e},exprRef:function(e,t){var n={expr:pfe(e,this)};return t&&(n.expr.$name=t),MFe(this.add(aIe(n)))},addBinding:function(e,t){this.bindings||Ht("Nested signals do not support binding: "+Vn(e)),this.bindings.push(Mn({signal:e},t))},addScaleProj:function(e,t){In(this.scales,e)&&Ht("Duplicate scale or projection name: "+Vn(e)),this.scales[e]=this.add(t)},addScale:function(e,t){this.addScaleProj(e,xIe(t))},addProjection:function(e,t){this.addScaleProj(e,gIe(t))},getScale:function(e){return this.scales[e]||Ht("Unrecognized scale name: "+Vn(e)),this.scales[e]},scaleRef:function(e){return MFe(this.getScale(e))},scaleType:function(e){return this.getScale(e).params.type},projectionRef:function(e){return this.scaleRef(e)},projectionType:function(e){return this.scaleType(e)},addData:function(e,t){return In(this.data,e)&&Ht("Duplicate data set name: "+Vn(e)),this.data[e]=t},getData:function(e){return this.data[e]||Ht("Undefined data set name: "+Vn(e)),this.data[e]},addDataPipeline:function(e,t){return In(this.data,e)&&Ht("Duplicate data set name: "+Vn(e)),this.addData(e,QOe.fromEntries(this,t))}};var YRe=function(e){return function(t){return t[e]}},KRe=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function $Re(e){throw Error(e)}function QRe(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n++),t=n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&c(),u=t=n+1):"]"===r&&(u||$Re("Access path missing open bracket: "+e),u>0&&c(),u=0,t=n+1):n>t?c():t=n+1}return u&&$Re("Access path missing closing bracket: "+e),o&&$Re("Access path missing closing quote: "+e),n>t&&(n++,c()),a}function JRe(e,t,n){var r=QRe(e);return e=1===r.length?r[0]:e,GRe((n&&n.get||XRe)(r),[e],t||e)}JRe("id"),GRe((function(e){return e}),[],"identity"),GRe((function(){return 0}),[],"zero"),GRe((function(){return 1}),[],"one"),GRe((function(){return!0}),[],"true"),GRe((function(){return!1}),[],"false");Array.isArray;function eZe(e){return"function"===typeof e}var tZe=Object.prototype.hasOwnProperty;function nZe(e,t){return tZe.call(e,t)}function rZe(e){return"string"===typeof e}function aZe(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return t}var iZe,oZe,uZe,sZe,cZe,lZe="Property",fZe="ArrayExpression",hZe="BinaryExpression",dZe="CallExpression",pZe="ConditionalExpression",vZe="LogicalExpression",gZe="MemberExpression",mZe="ObjectExpression",yZe="UnaryExpression";function bZe(e){this.type=e}bZe.prototype.visit=function(e){var t,n,r;if(e(this))return 1;for(n=0,r=(t=function(e){switch(e.type){case fZe:return e.elements;case hZe:case vZe:return[e.left,e.right];case dZe:return[e.callee].concat(e.arguments);case pZe:return[e.test,e.consequent,e.alternate];case gZe:return[e.object,e.property];case mZe:return e.properties;case lZe:return[e.key,e.value];case yZe:return[e.argument];default:return[]}}(this)).length;n<r;++n)if(t[n].visit(e))return 1};(iZe={})[1]="Boolean",iZe[2]="<end>",iZe[3]="Identifier",iZe[4]="Keyword",iZe[5]="Null",iZe[6]="Numeric",iZe[7]="Punctuator",iZe[8]="String",iZe[9]="RegularExpression";var xZe="Identifier",wZe="Unexpected token %0",kZe="Invalid regular expression",_Ze="Invalid regular expression: missing /",SZe="Octal literals are not allowed in strict mode.",CZe="ILLEGAL",EZe="Disabled.",AZe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),NZe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function TZe(e,t){if(!e)throw new Error("ASSERT: "+t)}function MZe(e){return e>=48&&e<=57}function DZe(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function FZe(e){return"01234567".indexOf(e)>=0}function IZe(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function OZe(e){return 10===e||13===e||8232===e||8233===e}function RZe(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&AZe.test(String.fromCharCode(e))}function ZZe(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&NZe.test(String.fromCharCode(e))}var BZe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function zZe(){for(;uZe<sZe;){var e=oZe.charCodeAt(uZe);if(!IZe(e)&&!OZe(e))break;++uZe}}function LZe(e){var t,n,r,a=0;for(n="u"===e?4:2,t=0;t<n;++t)uZe<sZe&&DZe(oZe[uZe])?(r=oZe[uZe++],a=16*a+"0123456789abcdef".indexOf(r.toLowerCase())):tBe({},wZe,CZe);return String.fromCharCode(a)}function PZe(){var e,t,n,r;for(t=0,"}"===(e=oZe[uZe])&&tBe({},wZe,CZe);uZe<sZe&&DZe(e=oZe[uZe++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&tBe({},wZe,CZe),t<=65535?String.fromCharCode(t):(n=55296+(t-65536>>10),r=56320+(t-65536&1023),String.fromCharCode(n,r))}function jZe(){var e,t;for(e=oZe.charCodeAt(uZe++),t=String.fromCharCode(e),92===e&&(117!==oZe.charCodeAt(uZe)&&tBe({},wZe,CZe),++uZe,(e=LZe("u"))&&"\\"!==e&&RZe(e.charCodeAt(0))||tBe({},wZe,CZe),t=e);uZe<sZe&&ZZe(e=oZe.charCodeAt(uZe));)++uZe,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==oZe.charCodeAt(uZe)&&tBe({},wZe,CZe),++uZe,(e=LZe("u"))&&"\\"!==e&&ZZe(e.charCodeAt(0))||tBe({},wZe,CZe),t+=e);return t}function UZe(){var e,t;return e=uZe,t=92===oZe.charCodeAt(uZe)?jZe():function(){var e,t;for(e=uZe++;uZe<sZe;){if(92===(t=oZe.charCodeAt(uZe)))return uZe=e,jZe();if(!ZZe(t))break;++uZe}return oZe.slice(e,uZe)}(),{type:1===t.length?3:BZe.hasOwnProperty(t)?4:"null"===t?5:"true"===t||"false"===t?1:3,value:t,start:e,end:uZe}}function WZe(){var e,t,n,r,a=uZe,i=oZe.charCodeAt(uZe),o=oZe[uZe];switch(i){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++uZe,{type:7,value:String.fromCharCode(i),start:a,end:uZe};default:if(61===(e=oZe.charCodeAt(uZe+1)))switch(i){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return uZe+=2,{type:7,value:String.fromCharCode(i)+String.fromCharCode(e),start:a,end:uZe};case 33:case 61:return uZe+=2,61===oZe.charCodeAt(uZe)&&++uZe,{type:7,value:oZe.slice(a,uZe),start:a,end:uZe}}}return">>>="===(r=oZe.substr(uZe,4))?{type:7,value:r,start:a,end:uZe+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:7,value:n,start:a,end:uZe+=3}:o===(t=n.substr(0,2))[1]&&"+-<>&|".indexOf(o)>=0||"=>"===t?{type:7,value:t,start:a,end:uZe+=2}:("//"===t&&tBe({},wZe,CZe),"<>=!+-*%&|^/".indexOf(o)>=0?{type:7,value:o,start:a,end:++uZe}:void tBe({},wZe,CZe))}function VZe(){var e,t,n;if(TZe(MZe((n=oZe[uZe]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=uZe,e="","."!==n){if(e=oZe[uZe++],n=oZe[uZe],"0"===e){if("x"===n||"X"===n)return++uZe,function(e){for(var t="";uZe<sZe&&DZe(oZe[uZe]);)t+=oZe[uZe++];return 0===t.length&&tBe({},wZe,CZe),RZe(oZe.charCodeAt(uZe))&&tBe({},wZe,CZe),{type:6,value:parseInt("0x"+t,16),start:e,end:uZe}}(t);if(FZe(n))return function(e){for(var t="0"+oZe[uZe++];uZe<sZe&&FZe(oZe[uZe]);)t+=oZe[uZe++];return(RZe(oZe.charCodeAt(uZe))||MZe(oZe.charCodeAt(uZe)))&&tBe({},wZe,CZe),{type:6,value:parseInt(t,8),octal:!0,start:e,end:uZe}}(t);n&&MZe(n.charCodeAt(0))&&tBe({},wZe,CZe)}for(;MZe(oZe.charCodeAt(uZe));)e+=oZe[uZe++];n=oZe[uZe]}if("."===n){for(e+=oZe[uZe++];MZe(oZe.charCodeAt(uZe));)e+=oZe[uZe++];n=oZe[uZe]}if("e"===n||"E"===n)if(e+=oZe[uZe++],"+"!==(n=oZe[uZe])&&"-"!==n||(e+=oZe[uZe++]),MZe(oZe.charCodeAt(uZe)))for(;MZe(oZe.charCodeAt(uZe));)e+=oZe[uZe++];else tBe({},wZe,CZe);return RZe(oZe.charCodeAt(uZe))&&tBe({},wZe,CZe),{type:6,value:parseFloat(e),start:t,end:uZe}}function qZe(){var e,t,n,r;return cZe=null,zZe(),e=uZe,t=function(){var e,t,n,r;for(TZe("/"===(e=oZe[uZe]),"Regular expression literal must start with a slash"),t=oZe[uZe++],n=!1,r=!1;uZe<sZe;)if(t+=e=oZe[uZe++],"\\"===e)OZe((e=oZe[uZe++]).charCodeAt(0))&&tBe({},_Ze),t+=e;else if(OZe(e.charCodeAt(0)))tBe({},_Ze);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||tBe({},_Ze),{value:t.substr(1,t.length-2),literal:t}}(),n=function(){var e,t,n;for(t="",n="";uZe<sZe&&ZZe((e=oZe[uZe]).charCodeAt(0));)++uZe,"\\"===e&&uZe<sZe?tBe({},wZe,CZe):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&tBe({},kZe,n),{value:n,literal:t}}(),r=function(e,t){var n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(function(e,t){if(parseInt(t,16)<=1114111)return"x";tBe({},kZe)})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(r){tBe({},kZe)}try{return new RegExp(e,t)}catch(a){return null}}(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:uZe}}function HZe(){if(zZe(),uZe>=sZe)return{type:2,start:uZe,end:uZe};var e=oZe.charCodeAt(uZe);return RZe(e)?UZe():40===e||41===e||59===e?WZe():39===e||34===e?function(){var e,t,n,r,a="",i=!1;for(TZe("'"===(e=oZe[uZe])||'"'===e,"String literal must starts with a quote"),t=uZe,++uZe;uZe<sZe;){if((n=oZe[uZe++])===e){e="";break}if("\\"===n)if((n=oZe[uZe++])&&OZe(n.charCodeAt(0)))"\r"===n&&"\n"===oZe[uZe]&&++uZe;else switch(n){case"u":case"x":"{"===oZe[uZe]?(++uZe,a+=PZe()):a+=LZe(n);break;case"n":a+="\n";break;case"r":a+="\r";break;case"t":a+="\t";break;case"b":a+="\b";break;case"f":a+="\f";break;case"v":a+="\v";break;default:FZe(n)?(0!==(r="01234567".indexOf(n))&&(i=!0),uZe<sZe&&FZe(oZe[uZe])&&(i=!0,r=8*r+"01234567".indexOf(oZe[uZe++]),"0123".indexOf(n)>=0&&uZe<sZe&&FZe(oZe[uZe])&&(r=8*r+"01234567".indexOf(oZe[uZe++]))),a+=String.fromCharCode(r)):a+=n}else{if(OZe(n.charCodeAt(0)))break;a+=n}}return""!==e&&tBe({},wZe,CZe),{type:8,value:a,octal:i,start:t,end:uZe}}():46===e?MZe(oZe.charCodeAt(uZe+1))?VZe():WZe():MZe(e)?VZe():WZe()}function GZe(){var e=cZe;return uZe=e.end,cZe=HZe(),uZe=e.end,e}function XZe(){var e=uZe;cZe=HZe(),uZe=e}function YZe(e,t,n){var r=new bZe("||"===e||"&&"===e?"LogicalExpression":"BinaryExpression");return r.operator=e,r.left=t,r.right=n,r}function KZe(e,t){var n=new bZe("CallExpression");return n.callee=e,n.arguments=t,n}function $Ze(e){var t=new bZe(xZe);return t.name=e,t}function QZe(e){var t=new bZe("Literal");return t.value=e.value,t.raw=oZe.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function JZe(e,t,n){var r=new bZe("MemberExpression");return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function eBe(e,t,n){var r=new bZe("Property");return r.key=t,r.value=n,r.kind=e,r}function tBe(e,t){var n,r=Array.prototype.slice.call(arguments,2),a=t.replace(/%(\d)/g,(function(e,t){return TZe(t<r.length,"Message reference must be in range"),r[t]}));throw(n=new Error(a)).index=uZe,n.description=a,n}function nBe(e){2===e.type&&tBe(e,"Unexpected end of input"),6===e.type&&tBe(e,"Unexpected number"),8===e.type&&tBe(e,"Unexpected string"),3===e.type&&tBe(e,"Unexpected identifier"),4===e.type&&tBe(e,"Unexpected reserved word"),tBe(e,wZe,e.value)}function rBe(e){var t=GZe();7===t.type&&t.value===e||nBe(t)}function aBe(e){return 7===cZe.type&&cZe.value===e}function iBe(e){return 4===cZe.type&&cZe.value===e}function oBe(){var e=[];for(uZe=cZe.start,rBe("[");!aBe("]");)aBe(",")?(GZe(),e.push(null)):(e.push(yBe()),aBe("]")||rBe(","));return GZe(),function(e){var t=new bZe("ArrayExpression");return t.elements=e,t}(e)}function uBe(){uZe=cZe.start;var e=GZe();return 8===e.type||6===e.type?(e.octal&&tBe(e,SZe),QZe(e)):$Ze(e.value)}function sBe(){var e,t,n;return uZe=cZe.start,3===(e=cZe).type?(n=uBe(),rBe(":"),eBe("init",n,yBe())):2!==e.type&&7!==e.type?(t=uBe(),rBe(":"),eBe("init",t,yBe())):void nBe(e)}function cBe(){var e,t,n=[],r={},a=String;for(uZe=cZe.start,rBe("{");!aBe("}");)t="$"+((e=sBe()).key.type===xZe?e.key.name:a(e.key.value)),Object.prototype.hasOwnProperty.call(r,t)?tBe({},"Duplicate data property in object literal not allowed in strict mode"):r[t]=!0,n.push(e),aBe("}")||rBe(",");return rBe("}"),function(e){var t=new bZe("ObjectExpression");return t.properties=e,t}(n)}var lBe={if:1};function fBe(){var e,t,n;if(aBe("("))return function(){rBe("(");var e=bBe();return rBe(")"),e}();if(aBe("["))return oBe();if(aBe("{"))return cBe();if(e=cZe.type,uZe=cZe.start,3===e||lBe[cZe.value])n=$Ze(GZe().value);else if(8===e||6===e)cZe.octal&&tBe(cZe,SZe),n=QZe(GZe());else{if(4===e)throw new Error(EZe);1===e?((t=GZe()).value="true"===t.value,n=QZe(t)):5===e?((t=GZe()).value=null,n=QZe(t)):aBe("/")||aBe("/=")?(n=QZe(qZe()),XZe()):nBe(GZe())}return n}function hBe(){var e=[];if(rBe("("),!aBe(")"))for(;uZe<sZe&&(e.push(yBe()),!aBe(")"));)rBe(",");return rBe(")"),e}function dBe(){return rBe("."),function(){uZe=cZe.start;var e=GZe();return function(e){return 3===e.type||4===e.type||1===e.type||5===e.type}(e)||nBe(e),$Ze(e.value)}()}function pBe(){rBe("[");var e=bBe();return rBe("]"),e}function vBe(){var e=function(){var e;for(e=fBe();;)if(aBe("."))e=JZe(".",e,dBe());else if(aBe("("))e=KZe(e,hBe());else{if(!aBe("["))break;e=JZe("[",e,pBe())}return e}();if(7===cZe.type&&(aBe("++")||aBe("--")))throw new Error(EZe);return e}function gBe(){var e,t;if(7!==cZe.type&&4!==cZe.type)t=vBe();else{if(aBe("++")||aBe("--"))throw new Error(EZe);if(aBe("+")||aBe("-")||aBe("~")||aBe("!"))e=GZe(),t=gBe(),t=function(e,t){var n=new bZe("UnaryExpression");return n.operator=e,n.argument=t,n.prefix=!0,n}(e.value,t);else{if(iBe("delete")||iBe("void")||iBe("typeof"))throw new Error(EZe);t=vBe()}}return t}function mBe(e){var t=0;if(7!==e.type&&4!==e.type)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function yBe(){var e,t;return e=function(){var e,t,n,r,a,i,o,u,s,c;if(e=cZe,s=gBe(),0===(a=mBe(r=cZe)))return s;for(r.prec=a,GZe(),t=[e,cZe],i=[s,r,o=gBe()];(a=mBe(cZe))>0;){for(;i.length>2&&a<=i[i.length-2].prec;)o=i.pop(),u=i.pop().value,s=i.pop(),t.pop(),n=YZe(u,s,o),i.push(n);(r=GZe()).prec=a,i.push(r),t.push(cZe),n=gBe(),i.push(n)}for(n=i[c=i.length-1],t.pop();c>1;)t.pop(),n=YZe(i[c-1].value,i[c-2],n),c-=2;return n}(),aBe("?")&&(GZe(),t=yBe(),rBe(":"),e=function(e,t,n){var r=new bZe("ConditionalExpression");return r.test=e,r.consequent=t,r.alternate=n,r}(e,t,yBe())),e}function bBe(){var e=yBe();if(aBe(","))throw new Error(EZe);return e}function xBe(e){uZe=0,sZe=(oZe=e).length,cZe=null,XZe();var t=bBe();if(2!==cZe.type)throw new Error("Unexpect token after expression.");return t}var wBe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function kBe(e){function t(t,n,r){return function(a){return function(t,n,r,a){var i=e(n[0]);return r&&(i=r+"("+i+")",0===r.lastIndexOf("new ",0)&&(i="("+i+")")),i+"."+t+(a<0?"":0===a?"()":"("+n.slice(1).map(e).join(",")+")")}(t,a,n,r)}}var n="new Date",r="String",a="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){t.length<3&&$Re("Missing arguments to clamp function."),t.length>3&&$Re("Too many arguments to clamp function.");var n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:t("getDate",n,0),day:t("getDay",n,0),year:t("getFullYear",n,0),month:t("getMonth",n,0),hours:t("getHours",n,0),minutes:t("getMinutes",n,0),seconds:t("getSeconds",n,0),milliseconds:t("getMilliseconds",n,0),time:t("getTime",n,0),timezoneoffset:t("getTimezoneOffset",n,0),utcdate:t("getUTCDate",n,0),utcday:t("getUTCDay",n,0),utcyear:t("getUTCFullYear",n,0),utcmonth:t("getUTCMonth",n,0),utchours:t("getUTCHours",n,0),utcminutes:t("getUTCMinutes",n,0),utcseconds:t("getUTCSeconds",n,0),utcmilliseconds:t("getUTCMilliseconds",n,0),length:t("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase",r,0),lower:t("toLowerCase",r,0),substring:t("substring",r),split:t("split",r),trim:t("trim",r,0),regexp:a,test:t("test",a),if:function(t){t.length<3&&$Re("Missing arguments to if function."),t.length>3&&$Re("Too many arguments to if function.");var n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}function _Be(e){var t=(e=e||{}).allowed?aZe(e.allowed):{},n=e.forbidden?aZe(e.forbidden):{},r=e.constants||wBe,a=(e.functions||kBe)(f),i=e.globalvar,o=e.fieldvar,u=eZe(i)?i:function(e){return"".concat(i,'["').concat(e,'"]')},s={},c={},l=0;function f(e){if(rZe(e))return e;var t=h[e.type];return null==t&&$Re("Unsupported type: "+e.type),t(e)}var h={Literal:function(e){return e.raw},Identifier:function(e){var a=e.name;return l>0?a:nZe(n,a)?$Re("Illegal identifier: "+a):nZe(r,a)?r[a]:nZe(t,a)?a:(s[a]=1,u(a))},MemberExpression:function(e){var t=!e.computed,n=f(e.object);t&&(l+=1);var r=f(e.property);return n===o&&(c[function(e){var t=e&&e.length-1;return t&&('"'===e[0]&&'"'===e[t]||"'"===e[0]&&"'"===e[t])?e.slice(1,-1):e}(r)]=1),t&&(l-=1),n+(t?"."+r:"["+r+"]")},CallExpression:function(e){"Identifier"!==e.callee.type&&$Re("Illegal callee type: "+e.callee.type);var t=e.callee.name,n=e.arguments,r=nZe(a,t)&&a[t];return r||$Re("Unrecognized function: "+t),eZe(r)?r(n):r+"("+n.map(f).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(f).join(",")+"]"},BinaryExpression:function(e){return"("+f(e.left)+" "+e.operator+" "+f(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+f(e.argument)+")"},ConditionalExpression:function(e){return"("+f(e.test)+"?"+f(e.consequent)+":"+f(e.alternate)+")"},LogicalExpression:function(e){return"("+f(e.left)+e.operator+f(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(f).join(",")+"}"},Property:function(e){l+=1;var t=f(e.key);return l-=1,t+":"+f(e.value)}};function d(e){var t={code:f(e),globals:Object.keys(s),fields:Object.keys(c)};return s={},c={},t}return d.functions=a,d.constants=r,d}var SBe,CBe,EBe="[",ABe="]",NBe=/[[\]{}]/,TBe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};function MBe(e,t,n){return SBe=t||"view",CBe=n||TBe,FBe(e.trim()).map(IBe)}function DBe(e,t,n,r,a){for(var i,o=e.length,u=0;t<o;++t){if(i=e[t],!u&&i===n)return t;a&&a.indexOf(i)>=0?--u:r&&r.indexOf(i)>=0&&++u}return t}function FBe(e){for(var t=[],n=e.length,r=0,a=0;a<n;)a=DBe(e,a,",","[{","]}"),t.push(e.substring(r,a).trim()),r=++a;if(0===t.length)throw"Empty event selector: "+e;return t}function IBe(e){return"["===e[0]?function(e){var t,n=e.length,r=1;if((r=DBe(e,r,ABe,EBe,ABe))===n)throw"Empty between selector: "+e;if(2!==(t=FBe(e.substring(1,r))).length)throw"Between selector must have two elements: "+e;if(">"!==(e=e.slice(r+1).trim())[0])throw"Expected '>' after between selector: "+e;t=t.map(IBe);var a=IBe(e.slice(1).trim());if(a.between)return{between:t,stream:a};a.between=t;return a}(e):function(e){var t,n,r={source:SBe},a=[],i=[0,0],o=0,u=0,s=e.length,c=0;if("}"===e[s-1]){if(!((c=e.lastIndexOf("{"))>=0))throw"Unmatched right brace: "+e;try{i=function(e){var t=e.split(",");if(!e.length||t.length>2)throw e;return t.map((function(t){var n=+t;if(n!==n)throw e;return n}))}(e.substring(c+1,s-1))}catch(l){throw"Invalid throttle specification: "+e}s=(e=e.slice(0,c).trim()).length,c=0}if(!s)throw e;"@"===e[0]&&(o=++c);(t=DBe(e,c,":"))<s&&(a.push(e.substring(u,t).trim()),u=c=++t);if((c=DBe(e,c,EBe))===s)a.push(e.substring(u,s).trim());else if(a.push(e.substring(u,c).trim()),n=[],(u=++c)===s)throw"Unmatched left bracket: "+e;for(;c<s;){if((c=DBe(e,c,ABe))===s)throw"Unmatched left bracket: "+e;if(n.push(e.substring(u,c).trim()),c<s-1&&e[++c]!==EBe)throw"Expected left bracket: "+e;u=++c}if(!(s=a.length)||NBe.test(a[s-1]))throw"Invalid event selector: "+e;s>1?(r.type=a[1],o?r.markname=a[0].slice(1):!function(e){return CBe[e]}(a[0])?r.source=a[0]:r.marktype=a[0]):r.type=a[0];"!"===r.type.slice(-1)&&(r.consume=!0,r.type=r.type.slice(0,-1));null!=n&&(r.filter=n);i[0]&&(r.throttle=i[0]);i[1]&&(r.debounce=i[1]);return r}(e)}var OBe="5.20.0";ut(dc,i,u,s,c,l,h,f,d,p,v,g);var RBe=OBe;function ZBe(e,t,n){return e.fields=t||[],e.fname=n,e}function BBe(e){return 1===e.length?zBe(e[0]):LBe(e)}var zBe=function(e){return function(t){return t[e]}},LBe=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function PBe(e){throw Error(e)}function jBe(e){var t,n,r,a=[],i=null,o=0,u=e.length,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<u;++n)if("\\"===(r=e[n]))s+=e.substring(t,n),s+=e.substring(++n,++n),t=n;else if(r===i)c(),i=null,o=-1;else{if(i)continue;t===o&&'"'===r||t===o&&"'"===r?(t=n+1,i=r):"."!==r||o?"["===r?(n>t&&c(),o=t=n+1):"]"===r&&(o||PBe("Access path missing open bracket: "+e),o>0&&c(),o=0,t=n+1):n>t?c():t=n+1}return o&&PBe("Access path missing closing bracket: "+e),i&&PBe("Access path missing closing quote: "+e),n>t&&(n++,c()),a}var UBe=[],WBe=(function(e,t,n){var r=jBe(e);e=1===r.length?r[0]:e,ZBe((n&&n.get||BBe)(r),[e],t||e)}("id"),ZBe((function(e){return e}),UBe,"identity"));ZBe((function(){return 0}),UBe,"zero"),ZBe((function(){return 1}),UBe,"one"),ZBe((function(){return!0}),UBe,"true"),ZBe((function(){return!1}),UBe,"false");function VBe(e,t,n){var r=[t].concat([].slice.call(n));console[e].apply(console,r)}var qBe=Array.isArray;function HBe(e){return e===Object(e)}var GBe=function(e){return"__proto__"!==e};function XBe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){for(var n in t)if("signals"===n)e.signals=KBe(e.signals,t.signals);else{var r="legend"===n?{layout:1}:"style"===n||null;YBe(e,n,t[n],r)}return e}),{})}function YBe(e,t,n,r){var a,i;if(GBe(t))if(HBe(n)&&!qBe(n))for(a in i=HBe(e[t])?e[t]:e[t]={},n)r&&(!0===r||r[a])?YBe(i,a,n[a]):GBe(a)&&(i[a]=n[a]);else e[t]=n}function KBe(e,t){if(null==e)return t;var n={},r=[];function a(e){n[e.name]||(n[e.name]=1,r.push(e))}return t.forEach(a),e.forEach(a),r}function $Be(e){return null!=e?qBe(e)?e:[e]:[]}var QBe=Object.prototype.hasOwnProperty;function JBe(e,t){return QBe.call(e,t)}function eze(e){return"boolean"===typeof e}function tze(e){return"number"===typeof e}function nze(e){return"string"===typeof e}function rze(e){return qBe(e)?"["+e.map(rze)+"]":HBe(e)||nze(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function aze(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t}function ize(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}Object.create;Object.create;Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function e(){var t=isNaN(arguments[0])?1:Number(arguments[0]);return t?Array.prototype.reduce.call(this,(function(n,r){return Array.isArray(r)?n.push.apply(n,e.call(r,t-1)):n.push(r),n}),[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(e){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var oze=n(3991),uze=n.n(oze),sze=n(8262),cze=n.n(sze),lze=n(2248),fze=n.n(lze);function hze(e){return!!e.or}function dze(e){return!!e.and}function pze(e){return!!e.not}function vze(e,t){if(pze(e))vze(e.not,t);else if(dze(e)){var n,r=(0,zt.Z)(e.and);try{for(r.s();!(n=r.n()).done;){vze(n.value,t)}}catch(o){r.e(o)}finally{r.f()}}else if(hze(e)){var a,i=(0,zt.Z)(e.or);try{for(i.s();!(a=i.n()).done;){vze(a.value,t)}}catch(o){i.e(o)}finally{i.f()}}else t(e)}function gze(e,t){return pze(e)?{not:gze(e.not,t)}:dze(e)?{and:e.and.map((function(e){return gze(e,t)}))}:hze(e)?{or:e.or.map((function(e){return gze(e,t)}))}:t(e)}var mze=cze(),yze=uze();function bze(e,t){var n,r={},a=(0,zt.Z)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;JBe(e,i)&&(r[i]=e[i])}}catch(o){a.e(o)}finally{a.f()}return r}function xze(e,t){var n,r=Object.assign({},e),a=(0,zt.Z)(t);try{for(a.s();!(n=a.n()).done;){delete r[n.value]}}catch(i){a.e(i)}finally{a.f()}return r}Set.prototype.toJSON=function(){return"Set(".concat((0,$n.Z)(this).map((function(e){return fze()(e)})).join(","),")")};var wze=fze();function kze(e){if(tze(e))return e;var t=nze(e)?e:fze()(e);if(t.length<250)return t;for(var n=0,r=0;r<t.length;r++){n=(n<<5)-n+t.charCodeAt(r),n&=n}return n}function _ze(e){return!1===e||null===e}function Sze(e,t){return e.indexOf(t)>-1}function Cze(e,t){var n,r=0,a=(0,zt.Z)(e.entries());try{for(a.s();!(n=a.n()).done;){var i=(0,gc.Z)(n.value,2),o=i[0];if(t(i[1],o,r++))return!0}}catch(u){a.e(u)}finally{a.f()}return!1}function Eze(e,t){var n,r=0,a=(0,zt.Z)(e.entries());try{for(a.s();!(n=a.n()).done;){var i=(0,gc.Z)(n.value,2),o=i[0];if(!t(i[1],o,r++))return!1}}catch(u){a.e(u)}finally{a.f()}return!0}function Aze(e,t){var n,r=(0,zt.Z)(Ize(t));try{for(r.s();!(n=r.n()).done;){var a=n.value;YBe(e,a,t[a],!0)}}catch(i){r.e(i)}finally{r.f()}}function Nze(e,t){var n,r,a=[],i={},o=(0,zt.Z)(e);try{for(o.s();!(r=o.n()).done;){var u=r.value;(n=t(u))in i||(i[n]=1,a.push(u))}}catch(s){o.e(s)}finally{o.f()}return a}function Tze(e,t){var n,r=(0,zt.Z)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(t.has(a))return!0}}catch(i){r.e(i)}finally{r.f()}return!1}function Mze(e){var t,n=new Set,r=(0,zt.Z)(e);try{var a=function(){var e,r=jBe(t.value).map((function(e,t){return 0===t?e:"[".concat(e,"]")})),a=r.map((function(e,t){return r.slice(0,t+1).join("")})),i=(0,zt.Z)(a);try{for(i.s();!(e=i.n()).done;){var o=e.value;n.add(o)}}catch(u){i.e(u)}finally{i.f()}};for(r.s();!(t=r.n()).done;)a()}catch(i){r.e(i)}finally{r.f()}return n}function Dze(e,t){return void 0===e||void 0===t||Tze(Mze(e),Mze(t))}function Fze(e){return 0===Ize(e).length}var Ize=Object.keys,Oze=Object.values;function Rze(e){var t=[];for(var n in e)JBe(e,n)&&t.push({key:n,value:e[n]});return t}function Zze(e){return!0===e||!1===e}function Bze(e){var t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function zze(e,t){return pze(e)?"!("+zze(e.not,t)+")":dze(e)?"("+e.and.map((function(e){return zze(e,t)})).join(") && (")+")":hze(e)?"("+e.or.map((function(e){return zze(e,t)})).join(") || (")+")":t(e)}function Lze(e,t){if(0===t.length)return!0;var n=t.shift();return n in e&&Lze(e[n],t)&&delete e[n],Fze(e)}function Pze(e){return e.charAt(0).toUpperCase()+e.substr(1)}function jze(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"datum",n=jBe(e),r=[],a=1;a<=n.length;a++){var i="[".concat(n.slice(0,a).map(rze).join("]["),"]");r.push("".concat(t).concat(i))}return r.join(" && ")}function Uze(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"datum";return"".concat(t,"[").concat(rze(jBe(e).join(".")),"]")}function Wze(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Vze(e){return"".concat(jBe(e).map(Wze).join("\\."))}function qze(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function Hze(e){return"".concat(jBe(e).join("."))}function Gze(e){return e?jBe(e).length:0}function Xze(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,a=t;r<a.length;r++){var i=a[r];if(void 0!==i)return i}}var Yze=42;function Kze(e){return function(e){return 0===e.indexOf("__")}(e)?e:"__".concat(e)}function $ze(e){if(void 0!==e)return(e%360+360)%360}function Qze(e){return!!tze(e)||!isNaN(e)&&!isNaN(parseFloat(e))}var Jze={domainColor:{part:"domain",vgProp:"stroke"},labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDash"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDash"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"},titleColor:{part:"title",vgProp:"fill"},title:null};function eLe(e){return e&&e.condition}var tLe=["domain","grid","labels","ticks","title"],nLe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"main",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},rLe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},aLe=Object.assign(Object.assign({},rLe),{style:1,labelExpr:1,encoding:1});function iLe(e){return!!aLe[e]}Ize(aLe);var oLe={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},uLe=oLe.arc,sLe=oLe.area,cLe=oLe.bar,lLe=oLe.image,fLe=oLe.line,hLe=oLe.point,dLe=oLe.rect,pLe=oLe.rule,vLe=oLe.text,gLe=oLe.tick,mLe=oLe.trail,yLe=oLe.circle,bLe=oLe.square,xLe=oLe.geoshape;function wLe(e){return Sze(["line","area","trail"],e)}function kLe(e){return Sze(["rect","bar","image","arc"],e)}var _Le=Ize(oLe);function SLe(e){return e.type}aze(_Le);var CLe=[].concat(["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],["fill","fillOpacity"]),ELe=Ize({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBand:1,timeUnitBandPosition:1}),ALe={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},NLe={binSpacing:1,continuousBandSize:5,timeUnitBandPosition:.5},TLe={binSpacing:0,continuousBandSize:5,timeUnitBandPosition:.5};function MLe(e){return"mark"in e}var DLe=function(){function e(t,n){(0,ud.Z)(this,e),this.name=t,this.run=n}return(0,sd.Z)(e,[{key:"hasMatchingType",value:function(e){return!!MLe(e)&&function(e){return SLe(e)?e.type:e}(e.mark)===this.name}}]),e}(),FLe={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},ILe={count:1,min:1,max:1};function OLe(e){return!!e&&!!e.argmin}function RLe(e){return!!e&&!!e.argmax}Ize(FLe);function ZLe(e){return nze(e)&&!!FLe[e]}var BLe=["count","valid","missing","distinct"];function zLe(e){return nze(e)&&Sze(BLe,e)}var LLe=["count","sum","distinct","valid","missing"],PLe=aze(["mean","average","median","q1","q3","min","max"]),jLe="row",ULe="column",WLe="facet",VLe="x",qLe="y",HLe="x2",GLe="y2",XLe="radius",YLe="radius2",KLe="theta",$Le="theta2",QLe="latitude",JLe="longitude",ePe="latitude2",tPe="longitude2",nPe="color",rPe="fill",aPe="stroke",iPe="shape",oPe="size",uPe="angle",sPe="opacity",cPe="fillOpacity",lPe="strokeOpacity",fPe="strokeWidth",hPe="strokeDash",dPe="text",pPe="order",vPe="detail",gPe="key",mPe="tooltip",yPe="href",bPe="url",xPe="description",wPe={theta:1,theta2:1,radius:1,radius2:1};function kPe(e){return e in wPe}var _Pe={longitude:1,longitude2:1,latitude:1,latitude2:1};var SPe=Ize(_Pe),CPe=Object.assign(Object.assign(Object.assign(Object.assign({},{x:1,y:1,x2:1,y2:1}),wPe),_Pe),{color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function EPe(e){return e===nPe||e===rPe||e===aPe}var APe={row:1,column:1,facet:1},NPe=Ize(APe),TPe=Object.assign(Object.assign({},CPe),APe),MPe=Ize(TPe),DPe=(TPe.order,TPe.detail,TPe.tooltip,ize(TPe,["order","detail","tooltip"])),FPe=(DPe.row,DPe.column,DPe.facet,ize(DPe,["row","column","facet"]));Ize(DPe),Ize(FPe);function IPe(e){return!!TPe[e]}var OPe=[HLe,GLe,ePe,tPe,$Le,YLe];function RPe(e){return ZPe(e)!==e}function ZPe(e){switch(e){case HLe:return VLe;case GLe:return qLe;case ePe:return QLe;case tPe:return JLe;case $Le:return KLe;case YLe:return XLe}return e}function BPe(e){if(kPe(e))switch(e){case KLe:return"startAngle";case $Le:return"endAngle";case XLe:return"outerRadius";case YLe:return"innerRadius"}return e}function zPe(e){switch(e){case VLe:return HLe;case qLe:return GLe;case QLe:return ePe;case JLe:return tPe;case KLe:return $Le;case XLe:return YLe}}function LPe(e){switch(e){case VLe:case HLe:return"width";case qLe:case GLe:return"height"}}Ize(CPe),CPe.x,CPe.y,CPe.x2,CPe.y2,CPe.latitude,CPe.longitude,CPe.latitude2,CPe.longitude2,CPe.theta,CPe.theta2,CPe.radius,CPe.radius2;var PPe=ize(CPe,["x","y","x2","y2","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),jPe=Ize(PPe),UPe={x:1,y:1},WPe=Ize(UPe);function VPe(e){return e in UPe}var qPe={theta:1,radius:1},HPe=Ize(qPe);function GPe(e){return"width"===e?VLe:qLe}PPe.text,PPe.tooltip,PPe.href,PPe.url,PPe.description,PPe.detail,PPe.key,PPe.order;var XPe=ize(PPe,["text","tooltip","href","url","description","detail","key","order"]),YPe=Ize(XPe);var KPe=Object.assign(Object.assign(Object.assign({},UPe),qPe),XPe),$Pe=Ize(KPe);function QPe(e){return!!KPe[e]}function JPe(e,t){return function(e){switch(e){case nPe:case rPe:case aPe:case xPe:case vPe:case gPe:case mPe:case yPe:case pPe:case sPe:case cPe:case lPe:case fPe:case WLe:case jLe:case ULe:return eje;case VLe:case qLe:case QLe:case JLe:return tje;case HLe:case GLe:case ePe:case tPe:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case oPe:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case hPe:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case iPe:return{point:"always",geoshape:"always"};case dPe:return{text:"always"};case uPe:return{point:"always",square:"always",text:"always"};case bPe:return{image:"always"};case KLe:case XLe:return{text:"always",arc:"always"};case $Le:case YLe:return{arc:"always"}}}(e)[t]}var eje={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},tje=ize(eje,["geoshape"]);function nje(e){switch(e){case VLe:case qLe:case KLe:case XLe:case oPe:case uPe:case fPe:case sPe:case cPe:case lPe:case HLe:case GLe:case $Le:case YLe:return;case WLe:case jLe:case ULe:case iPe:case hPe:case dPe:case mPe:case yPe:case bPe:case xPe:return"discrete";case nPe:case rPe:case aPe:return"flexible";case QLe:case JLe:case ePe:case tPe:case vPe:case gPe:case pPe:return}}function rje(e){return eze(e)&&(e=MVe(e,void 0)),"bin"+Ize(e).map((function(t){return uje(e[t])?Bze("_".concat(t,"_").concat(Object.entries(e[t]))):Bze("_".concat(t,"_").concat(e[t]))})).join("")}function aje(e){return!0===e||oje(e)&&!e.binned}function ije(e){return"binned"===e||oje(e)&&!0===e.binned}function oje(e){return HBe(e)}function uje(e){return null===e||void 0===e?void 0:e.selection}function sje(e){switch(e){case jLe:case ULe:case oPe:case nPe:case rPe:case aPe:case fPe:case sPe:case cPe:case lPe:case iPe:return 6;case hPe:return 4;default:return 10}}var cje=n(3009);function lje(e){return"Invalid specification ".concat(JSON.stringify(e),'. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".')}var fje='Autosize "fit" only works for single views and layered views.';function hje(e){return"".concat("width"==e?"Width":"Height",' "container" only works for single views and layered views.')}function dje(e){var t="width"==e?"x":"y";return"".concat("width"==e?"Width":"Height",' "container" only works well with autosize "fit" or "fit-').concat(t,'".')}function pje(e){return e?'Dropping "fit-'.concat(e,'" because spec has discrete ').concat(LPe(e),"."):'Dropping "fit" because spec has discrete size.'}function vje(e){return'Cannot project a selection on encoding channel "'.concat(e,'", which has no field.')}function gje(e,t){return'Cannot project a selection on encoding channel "'.concat(e,'" as it uses an aggregate function ("').concat(t,'").')}function mje(e){return"Selection not supported for ".concat(e," yet.")}function yje(e){return'The "columns" property cannot be used when "'.concat(e,'" has nested row/column.')}function bje(e,t,n){return'An ancestor parsed field "'.concat(e,'" as ').concat(n," but a child wants to parse the field as ").concat(t,".")}function xje(e){return"Ignoring an invalid transform: ".concat(wze(e),".")}function wje(e){return"Config.customFormatTypes is not true, thus custom format type and format for channel ".concat(e," are dropped.")}function kje(e){return'Invalid field type "'.concat(e,'".')}function _je(e,t){var n=t.fill,r=t.stroke;return"Dropping color ".concat(e," as the plot also has ").concat(n&&r?"fill and stroke":n?"fill":"stroke",".")}function Sje(e,t){return"Dropping ".concat(wze(e),' from channel "').concat(t,'" since it does not contain any data field, datum, value, or signal.')}function Cje(e,t,n){return"".concat(e,' dropped as it is incompatible with "').concat(t,'"').concat(n?" when ".concat(n):"",".")}function Eje(e){return"".concat(e," encoding should be discrete (ordinal / nominal / binned).")}function Aje(e,t){return'Using discrete channel "'.concat(e,'" to encode "').concat(t,'" field can be misleading as it does not encode ').concat("ordinal"===t?"order":"magnitude",".")}function Nje(e){return"Using unaggregated domain with raw field has no effect (".concat(wze(e),").")}function Tje(e){return'Unaggregated domain not applicable for "'.concat(e,'" since it produces values outside the origin domain of the source data.')}function Mje(e){return"Unaggregated domain is currently unsupported for log scale (".concat(wze(e),").")}function Dje(e,t,n){return"".concat(n,"-scale's \"").concat(t,'" is dropped as it does not work with ').concat(e," scale.")}function Fje(e){return'The step for "'.concat(e,'" is dropped because the ').concat("width"===e?"x":"y"," is continuous.")}var Ije="Domains that should be unioned has conflicting sort properties. Sort will be set to true.";function Oje(e){return'Cannot stack "'.concat(e,'" if there is already "').concat(e,'2".')}function Rje(e){return"Cannot stack non-linear scale (".concat(e,").")}function Zje(e){return'Stacking is applied even though the aggregate function is non-summative ("'.concat(e,'").')}function Bje(e,t){return"Invalid ".concat(e,": ").concat(wze(t),".")}function zje(e){return"1D error band does not support ".concat(e,".")}function Lje(e){return"Channel ".concat(e,' is required for "binned" bin.')}var Pje=function(e,t){var n=e||0;return{level:function(e){return arguments.length?(n=+e,this):n},error:function(){return n>=1&&VBe(t||"error","ERROR",arguments),this},warn:function(){return n>=2&&VBe(t||"warn","WARN",arguments),this},info:function(){return n>=3&&VBe(t||"log","INFO",arguments),this},debug:function(){return n>=4&&VBe(t||"log","DEBUG",arguments),this}}}(2),jje=Pje;function Uje(e){return jje=e}function Wje(){return jje=Pje}function Vje(){var e;(e=jje).warn.apply(e,arguments)}function qje(e){if(e&&HBe(e)){var t,n=(0,zt.Z)(tUe);try{for(n.s();!(t=n.n()).done;){if(t.value in e)return!0}}catch(r){n.e(r)}finally{n.f()}}return!1}var Hje=["january","february","march","april","may","june","july","august","september","october","november","december"],Gje=Hje.map((function(e){return e.substr(0,3)})),Xje=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Yje=Xje.map((function(e){return e.substr(0,3)}));function Kje(e,t){var n=[];if(t&&void 0!==e.day&&Ize(e).length>1&&(Vje(function(e){return"Dropping day from datetime ".concat(wze(e)," as day cannot be combined with other units.")}(e)),delete(e=yze(e)).day),void 0!==e.year?n.push(e.year):n.push(2012),void 0!==e.month){var r=t?function(e){if(Qze(e)&&(e=+e),tze(e))return e-1;var t=e.toLowerCase(),n=Hje.indexOf(t);if(-1!==n)return n;var r=t.substr(0,3),a=Gje.indexOf(r);if(-1!==a)return a;throw new Error(Bje("month",e))}(e.month):e.month;n.push(r)}else if(void 0!==e.quarter){var a=t?function(e){if(Qze(e)&&(e=+e),tze(e))return e>4&&Vje(Bje("quarter",e)),e-1;throw new Error(Bje("quarter",e))}(e.quarter):e.quarter;n.push(tze(a)?3*a:a+"*3")}else n.push(0);if(void 0!==e.date)n.push(e.date);else if(void 0!==e.day){var i=t?function(e){if(Qze(e)&&(e=+e),tze(e))return e%7;var t=e.toLowerCase(),n=Xje.indexOf(t);if(-1!==n)return n;var r=t.substr(0,3),a=Yje.indexOf(r);if(-1!==a)return a;throw new Error(Bje("day",e))}(e.day):e.day;n.push(tze(i)?i+1:i+"+1")}else n.push(1);for(var o=0,u=["hours","minutes","seconds","milliseconds"];o<u.length;o++){var s=e[u[o]];n.push("undefined"===typeof s?0:s)}return n}function $je(e){var t=Kje(e,!0).join(", ");return e.utc?"utc(".concat(t,")"):"datetime(".concat(t,")")}function Qje(e){var t=Kje(e,!1).join(", ");return e.utc?"utc(".concat(t,")"):"datetime(".concat(t,")")}function Jje(e){var t=Kje(e,!0);return e.utc?+new Date(Date.UTC.apply(Date,(0,$n.Z)(t))):+(0,cje.Z)(Date,(0,$n.Z)(t))}var eUe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},tUe=Ize(eUe);function nUe(e){return e.startsWith("utc")}var rUe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function aUe(e){var t,n=[],r=(0,zt.Z)(tUe);try{for(r.s();!(t=r.n()).done;){var a=t.value;iUe(e,a)&&n.push(a)}}catch(i){r.e(i)}finally{r.f()}return n}function iUe(e,t){var n=e.indexOf(t);return!(n<0)&&(!(n>0&&"seconds"===t&&"i"===e.charAt(n-1))&&(!(e.length>n+3&&"day"===t&&"o"===e.charAt(n+3))&&!(n>0&&"year"===t&&"f"===e.charAt(n-1))))}function oUe(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{end:!1},a=r.end,i=jze(t),o=nUe(e)?"utc":"";function u(e){return"quarter"===e?"(".concat(o,"quarter(").concat(i,")-1)"):"".concat(o).concat(e,"(").concat(i,")")}var s,c={},l=(0,zt.Z)(tUe);try{for(l.s();!(s=l.n()).done;){var f=s.value;iUe(e,f)&&(c[f]=u(f),n=f)}}catch(h){l.e(h)}finally{l.f()}return a&&(c[n]+="+1"),Qje(c)}function uUe(e){if(e){var t=aUe(e);return"timeUnitSpecifier(".concat(fze()(t),", ").concat(fze()(rUe),")")}}function sUe(e){var t;if(e)return nze(e)?t={unit:e}:HBe(e)&&(t=Object.assign(Object.assign({},e),e.unit?{unit:e.unit}:{})),nUe(t.unit)&&(t.utc=!0,t.unit=t.unit.substr(3)),t}function cUe(e){var t=sUe(e),n=t.utc,r=ize(t,["utc"]);return r.unit?(n?"utc":"")+Ize(r).map((function(e){return Bze("".concat("unit"===e?"":"_".concat(e,"_")).concat(r[e]))})).join(""):(n?"utc":"")+"timeunit"+Ize(r).map((function(e){return Bze("_".concat(e,"_").concat(r[e]))})).join("")}function lUe(e){return e&&!!e.signal}function fUe(e){return!!e.step}function hUe(e){return!qBe(e)&&("field"in e&&"data"in e)}var dUe=Ize({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1}),pUe={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},vUe=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function gUe(e){return e&&!!e.field&&void 0!==e.equal}function mUe(e){return e&&!!e.field&&void 0!==e.lt}function yUe(e){return e&&!!e.field&&void 0!==e.lte}function bUe(e){return e&&!!e.field&&void 0!==e.gt}function xUe(e){return e&&!!e.field&&void 0!==e.gte}function wUe(e){if(e&&e.field){if(qBe(e.range)&&2===e.range.length)return!0;if(lUe(e.range))return!0}return!1}function kUe(e){return e&&!!e.field&&(qBe(e.oneOf)||qBe(e.in))}function _Ue(e){return e&&!!e.field&&void 0!==e.valid}function SUe(e){return kUe(e)||gUe(e)||wUe(e)||mUe(e)||bUe(e)||yUe(e)||xUe(e)}function CUe(e,t){return IVe(e,{timeUnit:t,wrapTime:!0})}function EUe(e,t){return e.map((function(e){return CUe(e,t)}))}function AUe(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.field,a=null===(t=sUe(e.timeUnit))||void 0===t?void 0:t.unit,i=a?"time("+oUe(a,r)+")":dVe(e,{expr:"datum"});if(gUe(e))return i+"==="+CUe(e.equal,a);if(mUe(e)){var o=e.lt;return"".concat(i,"<").concat(CUe(o,a))}if(bUe(e)){var u=e.gt;return"".concat(i,">").concat(CUe(u,a))}if(yUe(e)){var s=e.lte;return"".concat(i,"<=").concat(CUe(s,a))}if(xUe(e)){var c=e.gte;return"".concat(i,">=").concat(CUe(c,a))}if(kUe(e))return"indexof([".concat(EUe(e.oneOf,a).join(","),"], ").concat(i,") !== -1");if(_Ue(e))return NUe(i,e.valid);if(wUe(e)){var l=e.range,f=lUe(l)?{signal:"".concat(l.signal,"[0]")}:l[0],h=lUe(l)?{signal:"".concat(l.signal,"[1]")}:l[1];if(null!==f&&null!==h&&n)return"inrange("+i+", ["+CUe(f,a)+", "+CUe(h,a)+"])";var d=[];return null!==f&&d.push("".concat(i," >= ").concat(CUe(f,a))),null!==h&&d.push("".concat(i," <= ").concat(CUe(h,a))),d.length>0?d.join(" && "):"true"}throw new Error("Invalid field predicate: ".concat(JSON.stringify(e)))}function NUe(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t?"isValid(".concat(e,") && isFinite(+").concat(e,")"):"!isValid(".concat(e,") || !isFinite(+").concat(e,")")}function TUe(e){var t;return SUe(e)&&e.timeUnit?Object.assign(Object.assign({},e),{timeUnit:null===(t=sUe(e.timeUnit))||void 0===t?void 0:t.unit}):e}var MUe={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};var DUe=MUe.quantitative,FUe=MUe.ordinal,IUe=MUe.temporal,OUe=MUe.nominal,RUe=MUe.geojson,ZUe=Ize(MUe);var BUe="linear",zUe="log",LUe="pow",PUe="sqrt",jUe="symlog",UUe="time",WUe="utc",VUe="quantile",qUe="quantize",HUe="threshold",GUe="point",XUe="band",YUe={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},KUe=Ize(YUe);function $Ue(e,t){var n=YUe[e],r=YUe[t];return n===r||"ordinal-position"===n&&"time"===r||"ordinal-position"===r&&"time"===n}var QUe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function JUe(e){return QUe[e]}var eWe=["linear","log","pow","sqrt","symlog","time","utc"],tWe=aze(eWe),nWe=aze(["linear","log","pow","sqrt","symlog"]);var rWe=aze(["quantile","quantize","threshold"]),aWe=aze(eWe.concat(["quantile","quantize","threshold","sequential","identity"])),iWe=aze(["ordinal","bin-ordinal","point","band"]);function oWe(e){return e in iWe}function uWe(e){return e in aWe}function sWe(e){return e in tWe}function cWe(e){return e in rWe}function lWe(e){return null===e||void 0===e?void 0:e.selection}var fWe={type:1,domain:1,domainMid:1,align:1,range:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},hWe=(Ize(fWe),ize(fWe,["type","domain","range","scheme"])),dWe=Ize(hWe);!function(){var e,t,n={},r=(0,zt.Z)(MPe);try{for(r.s();!(t=r.n()).done;){var a,i=t.value,o=(0,zt.Z)(ZUe);try{for(o.s();!(a=o.n()).done;){var u,s=a.value,c=(0,zt.Z)(KUe);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=yWe(i,s);mWe(i,l)&&gWe(l,s)&&(n[f]=null!==(e=n[f])&&void 0!==e?e:[],n[f].push(l))}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}}}catch(h){r.e(h)}finally{r.f()}}();function pWe(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!Sze(["point","band","identity"],e);case"bins":return!Sze(["point","band","identity","ordinal"],e);case"round":return sWe(e)||"band"===e||"point"===e;case"padding":return sWe(e)||Sze(["point","band"],e);case"paddingOuter":case"align":return Sze(["point","band"],e);case"paddingInner":return"band"===e;case"domainMid":case"clamp":return sWe(e);case"nice":return sWe(e)||"quantize"===e||"threshold"===e;case"exponent":return"pow"===e;case"base":return"log"===e;case"constant":return"symlog"===e;case"zero":return uWe(e)&&!Sze(["log","time","utc","threshold","quantile"],e)}}function vWe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return EPe(e)?void 0:'Cannot use the scale property "'.concat(e,'" with non-color channel.');case"align":case"type":case"bins":case"domain":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"reverse":case"round":case"clamp":case"zero":return}}function gWe(e,t){return Sze([FUe,OUe],t)?void 0===e||oWe(e):t===IUe?Sze([UUe,WUe,void 0],e):t!==DUe||Sze([zUe,LUe,PUe,jUe,VUe,qUe,HUe,BUe,void 0],e)}function mWe(e,t){if(!QPe(e))return!1;switch(e){case VLe:case qLe:case KLe:case XLe:return sWe(t)||Sze(["band","point"],t);case oPe:case fPe:case sPe:case cPe:case lPe:case uPe:return sWe(t)||cWe(t)||Sze(["band","point","ordinal"],t);case nPe:case rPe:case aPe:return"band"!==t;case hPe:return"ordinal"===t||cWe(t);case iPe:return"ordinal"===t}}function yWe(e,t){return e+"_"+t}function bWe(e){var t=e.channel,n=e.channelDef,r=e.markDef,a=e.scale,i=e.config,o=CWe(e);return eVe(n)&&!zLe(n.aggregate)&&a&&sWe(a.get("type"))&&!1===a.get("zero")?xWe({fieldDef:n,channel:t,markDef:r,ref:o,config:i}):o}function xWe(e){var t=e.fieldDef,n=e.channel,r=e.markDef,a=e.ref,i=e.config;return wLe(r.type)||null===UVe("invalid",r,i)?a:[wWe(t,n),a]}function wWe(e,t){var n=kWe(e,!0),r="y"===ZPe(t)?{field:{group:"height"}}:{value:0};return Object.assign({test:n},r)}function kWe(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return NUe(nze(e)?e:dVe(e,{expr:"datum"}),!t)}function _We(e,t,n,r){var a={};if(t&&(a.scale=t),nVe(e)){var i=e.datum;qje(i)?a.signal=$je(i):lUe(i)?a.signal=i.signal:a.value=i}else a.field=dVe(e,n);if(r){var o=r.offset,u=r.band;o&&(a.offset=o),u&&(a.band=u)}return a}function SWe(e){var t=e.scaleName,n=e.fieldOrDatumDef,r=e.fieldOrDatumDef2,a=e.offset,i=e.startSuffix,o=e.band,u=void 0===o?.5:o,s=0<u&&u<1?"datum":void 0,c=dVe(n,{expr:s,suffix:i}),l=void 0!==r?dVe(r,{expr:s}):dVe(n,{suffix:"end",expr:s}),f={};if(0===u||1===u){f.scale=t;var h=0===u?c:l;f.field=h}else{var d="".concat(u," * ").concat(c," + ").concat(1-u," * ").concat(l);f.signal='scale("'.concat(t,'", ').concat(d,")")}return a&&(f.offset=a),f}function CWe(e){var t,n=e.channel,r=e.channelDef,a=e.channel2Def,i=e.markDef,o=e.config,u=e.scaleName,s=e.scale,c=e.stack,l=e.offset,f=e.defaultRef,h=e.band;if(r){if(iVe(r)){if(oVe(r)){h=null!==h&&void 0!==h?h:YWe({channel:n,fieldDef:r,fieldDef2:a,markDef:i,stack:c,config:o,isMidPoint:!0});var d=r.bin,p=r.timeUnit,v=r.type;if(aje(d)||h&&p&&v===IUe)return c&&c.impute?_We(r,u,{binSuffix:"mid"},{offset:l}):h?SWe({scaleName:u,fieldOrDatumDef:r,band:h,offset:l}):_We(r,u,RVe(r,n)?{binSuffix:"range"}:{},{offset:l});if(ije(d)){if(eVe(a))return SWe({scaleName:u,fieldOrDatumDef:r,fieldOrDatumDef2:a,band:h,offset:l});Vje(Lje(n===VLe?HLe:GLe))}}var g=null===s||void 0===s?void 0:s.get("type");return _We(r,u,oWe(g)?{binSuffix:"range"}:{},{offset:l,band:"band"===g?null!==(t=null!==h&&void 0!==h?h:r.band)&&void 0!==t?t:.5:void 0})}if(uVe(r)){var m=r.value,y=l?{offset:l}:{};return Object.assign(Object.assign({},EWe(n,m)),y)}}return"function"===typeof f&&(f=f()),f?Object.assign(Object.assign({},f),l?{offset:l}:{}):f}function EWe(e,t){return Sze(["x","x2"],e)&&"width"===t?{field:{group:"width"}}:Sze(["y","y2"],e)&&"height"===t?{field:{group:"height"}}:zVe(t)}function AWe(e){return e&&"number"!==e&&"time"!==e}function NWe(e,t,n){return"".concat(e,"(").concat(t).concat(n?", ".concat(JSON.stringify(n)):"",")")}function TWe(e){var t,n,r=e.fieldOrDatumDef,a=e.format,i=e.formatType,o=e.expr,u=e.normalizeStack,s=e.config;if(AWe(i))return DWe({fieldOrDatumDef:r,format:a,formatType:i,expr:o,config:s});var c=MWe(r,o,u);if(FVe(r)){var l=function(e,t,n,r,a){return!t||n?(n=nze(n)?n:r,"".concat(a?"utc":"time","Format(").concat(e,", '").concat(n,"')")):function(e,t,n){if(e){var r=uUe(e),a=n||nUe(e);return"".concat(a?"utc":"time","Format(").concat(t,", ").concat(r,")")}}(t,e,a)}(c,eVe(r)?null===(t=sUe(r.timeUnit))||void 0===t?void 0:t.unit:void 0,a,s.timeFormat,sVe(r)&&(null===(n=r.scale)||void 0===n?void 0:n.type)===WUe);return l?{signal:l}:void 0}return a=OWe(tVe(r),a,s),eVe(r)&&aje(r.bin)?{signal:BWe(c,dVe(r,{expr:o,binSuffix:"end"}),a,i,s)}:a||"quantitative"===tVe(r)?{signal:"".concat(RWe(c,a))}:{signal:"isValid(".concat(c,") ? ").concat(c,' : ""+').concat(c)}}function MWe(e,t,n){return eVe(e)?n?"".concat(dVe(e,{expr:t,suffix:"end"}),"-").concat(dVe(e,{expr:t,suffix:"start"})):dVe(e,{expr:t}):function(e){var t=e.datum;return qje(t)?$je(t):"".concat(JSON.stringify(t))}(e)}function DWe(e){var t=e.fieldOrDatumDef,n=e.format,r=e.formatType,a=e.expr,i=e.normalizeStack,o=e.config,u=e.field;return u=null!==u&&void 0!==u?u:MWe(t,a,i),eVe(t)&&aje(t.bin)?{signal:BWe(u,dVe(t,{expr:a,binSuffix:"end"}),n,r,o)}:{signal:NWe(r,u,n)}}function FWe(e,t,n,r,a,i){var o;if(!AWe(r))return FVe(e)?function(e,t,n,r){if(e)return e;if(t)return{signal:uUe(t)};return r?void 0:n.timeFormat}(n,eVe(e)?null===(o=sUe(e.timeUnit))||void 0===o?void 0:o.unit:void 0,a,i):OWe(t,n,a)}function IWe(e,t,n){return e&&(lUe(e)||"number"===e||"time"===e)?e:FVe(t)&&"time"!==n&&"utc"!==n?"time":void 0}function OWe(e,t,n){return nze(t)?t:e===DUe?n.numberFormat:void 0}function RWe(e,t){return"format(".concat(e,', "').concat(t||"",'")')}function ZWe(e,t,n,r){var a;return AWe(n)?NWe(n,e,t):RWe(e,null!==(a=nze(t)?t:void 0)&&void 0!==a?a:r.numberFormat)}function BWe(e,t,n,r,a){var i=ZWe(e,n,r,a),o=ZWe(t,n,r,a);return"".concat(NUe(e,!1),' ? "null" : ').concat(i,' + "').concat(" \u2013 ",'" + ').concat(o)}var zWe="min",LWe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function PWe(e){return e in LWe}function jWe(e){return!!e&&!!e.encoding}function UWe(e){return!!e&&("count"===e.op||!!e.field)}function WWe(e){return!!e&&qBe(e)}function VWe(e){return"row"in e||"column"in e}function qWe(e){return!!e&&"header"in e}function HWe(e){return"facet"in e}function GWe(e){var t=e.field,n=e.timeUnit,r=e.bin,a=e.aggregate;return Object.assign(Object.assign(Object.assign(Object.assign({},n?{timeUnit:n}:{}),r?{bin:r}:{}),a?{aggregate:a}:{}),{field:t})}function XWe(e){return oVe(e)&&"sort"in e}function YWe(e){var t=e.channel,n=e.fieldDef,r=e.fieldDef2,a=e.markDef,i=e.stack,o=e.config,u=e.isMidPoint;if(iVe(n)&&void 0!==n.band)return n.band;if(eVe(n)){var s=n.timeUnit,c=n.bin;if(s&&!r)return u?WVe("timeUnitBandPosition",a,o):kLe(a.type)?WVe("timeUnitBand",a,o):0;if(aje(c))return kLe(a.type)&&!u?1:.5}return(null===i||void 0===i?void 0:i.fieldChannel)===t&&u?.5:void 0}function KWe(e,t,n,r,a,i){return!!(aje(t.bin)||t.timeUnit&&oVe(t)&&"temporal"===t.type)&&!!YWe({channel:e,fieldDef:t,fieldDef2:n,stack:r,markDef:a,config:i})}function $We(e){return!!e&&"condition"in e}function QWe(e){var t=e&&e.condition;return!!t&&!qBe(t)&&eVe(t)}function JWe(e){var t=e&&e.condition;return!!t&&!qBe(t)&&iVe(t)}function eVe(e){return!!e&&(!!e.field||"count"===e.aggregate)}function tVe(e){return e&&e.type}function nVe(e){return!!e&&"datum"in e}function rVe(e){return oVe(e)&&vVe(e)||aVe(e)}function aVe(e){return nVe(e)&&tze(e.datum)}function iVe(e){return eVe(e)||nVe(e)}function oVe(e){return!!e&&("field"in e&&"type"in e||"count"===e.aggregate)}function uVe(e){return e&&"value"in e&&"value"in e}function sVe(e){return!!e&&("scale"in e||"sort"in e)}function cVe(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function lVe(e){return!!e&&"legend"in e}function fVe(e){return!!e&&("format"in e||"formatType"in e)}function hVe(e){return"op"in e}function dVe(e){var t,n,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.field,o=a.prefix,u=a.suffix,s="";if(gVe(e))i=Kze("count");else{var c;if(!a.nofn)if(hVe(e))c=e.op;else{var l=e.bin,f=e.aggregate,h=e.timeUnit;aje(l)?(c=rje(l),u=(null!==(t=a.binSuffix)&&void 0!==t?t:"")+(null!==(n=a.suffix)&&void 0!==n?n:"")):f?RLe(f)?(s='["'.concat(i,'"]'),i="argmax_".concat(f.argmax)):OLe(f)?(s='["'.concat(i,'"]'),i="argmin_".concat(f.argmin)):c=String(f):h&&(c=cUe(h),u=(!Sze(["range","mid"],a.binSuffix)&&a.binSuffix||"")+(null!==(r=a.suffix)&&void 0!==r?r:""))}c&&(i=i?"".concat(c,"_").concat(i):c)}return u&&(i="".concat(i,"_").concat(u)),o&&(i="".concat(o,"_").concat(i)),a.forAs?Hze(i):a.expr?Uze(i,a.expr)+s:Vze(i)+s}function pVe(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return eVe(e)&&!!e.bin;case"temporal":return!1}throw new Error(kje(e.type))}function vVe(e){return!pVe(e)}function gVe(e){return"count"===e.aggregate}var mVe=function(e,t){switch(t.fieldTitle){case"plain":return e.field;case"functional":return function(e){var t=e.aggregate,n=e.bin,r=e.timeUnit,a=e.field;if(RLe(t))return"".concat(a," for argmax(").concat(t.argmax,")");if(OLe(t))return"".concat(a," for argmin(").concat(t.argmin,")");var i=sUe(r),o=t||(null===i||void 0===i?void 0:i.unit)||(null===i||void 0===i?void 0:i.maxbins)&&"timeunit"||aje(n)&&"bin";return o?o.toUpperCase()+"("+a+")":a}(e);default:return function(e,t){var n,r=e.field,a=e.bin,i=e.timeUnit,o=e.aggregate;if("count"===o)return t.countTitle;if(aje(a))return"".concat(r," (binned)");if(i){var u=null===(n=sUe(i))||void 0===n?void 0:n.unit;if(u)return"".concat(r," (").concat(aUe(u).join("-"),")")}else if(o)return RLe(o)?"".concat(r," for max ").concat(o.argmax):OLe(o)?"".concat(r," for min ").concat(o.argmin):"".concat(Pze(o)," of ").concat(r);return r}(e,t)}},yVe=mVe;function bVe(e){yVe=e}function xVe(){bVe(mVe)}function wVe(e,t,n){var r,a,i=n.allowDisabling,o=n.includeDefault,u=void 0===o||o,s=(null!==(r=kVe(e))&&void 0!==r?r:{}).title;if(!eVe(e))return s;var c=e,l=u?_Ve(c,t):void 0;return i?Xze(s,c.title,l):null!==(a=null!==s&&void 0!==s?s:c.title)&&void 0!==a?a:l}function kVe(e){return cVe(e)&&e.axis?e.axis:lVe(e)&&e.legend?e.legend:qWe(e)&&e.header?e.header:void 0}function _Ve(e,t){return yVe(e,t)}function SVe(e){var t;if(fVe(e))return{format:e.format,formatType:e.formatType};var n=null!==(t=kVe(e))&&void 0!==t?t:{};return{format:n.format,formatType:n.formatType}}function CVe(e){return eVe(e)?e:QWe(e)?e.condition:void 0}function EVe(e){return iVe(e)?e:JWe(e)?e.condition:void 0}function AVe(e,t,n){return nze(e)||tze(e)||eze(e)?(Vje(function(e,t,n){return"Channel ".concat(e," is a ").concat(t,". Converted to {value: ").concat(wze(n),"}.")}(t,nze(e)?"string":tze(e)?"number":"boolean",e)),{value:e}):iVe(e)?NVe(e,t,n):JWe(e)?Object.assign(Object.assign({},e),{condition:NVe(e.condition,t,n)}):e}function NVe(e,t,n){if(fVe(e)){e.format;var r=e.formatType,a=ize(e,["format","formatType"]);if(AWe(r)&&!n.customFormatTypes)return Vje(wje(t)),NVe(a,t,n)}else{var i=cVe(e)?"axis":lVe(e)?"legend":qWe(e)?"header":null;if(i&&e[i]){var o=e[i],u=(o.format,o.formatType),s=ize(o,["format","formatType"]);if(AWe(u)&&!n.customFormatTypes)return Vje(wje(t)),NVe(Object.assign(Object.assign({},e),(0,Ir.Z)({},i,s)),t,n)}}return eVe(e)?TVe(e,t):function(e){var t=e.type;if(t)return e;var n=e.datum;return t=tze(n)?"quantitative":nze(n)?"nominal":qje(n)?"temporal":void 0,Object.assign(Object.assign({},e),{type:t})}(e)}function TVe(e,t){var n=e.aggregate,r=e.timeUnit,a=e.bin,i=e.field,o=Object.assign({},e);if(!n||ZLe(n)||RLe(n)||OLe(n)||(Vje(function(e){return'Invalid aggregation operator "'.concat(e,'".')}(n)),delete o.aggregate),r&&(o.timeUnit=sUe(r)),i&&(o.field="".concat(i)),aje(a)&&(o.bin=MVe(a,t)),ije(a)&&!VPe(t)&&Vje("Channel ".concat(t,' should not be used with "binned" bin.')),oVe(o)){var u=o.type,s=function(e){if(e)switch(e=e.toLowerCase()){case"q":case DUe:return"quantitative";case"t":case IUe:return"temporal";case"o":case FUe:return"ordinal";case"n":case OUe:return"nominal";case RUe:return"geojson"}}(u);u!==s&&(o.type=s),"quantitative"!==u&&zLe(n)&&(Vje(function(e,t){return'Invalid field type "'.concat(e,'" for aggregate: "').concat(t,'", using "quantitative" instead.')}(u,n)),o.type="quantitative")}else if(!RPe(t)){var c=function(e,t){if(e.timeUnit)return"temporal";if(aje(e.bin))return"quantitative";switch(nje(t)){case"continuous":default:return"quantitative";case"discrete":case"flexible":return"nominal"}}(o,t);Vje(function(e,t){return'Missing type for channel "'.concat(e,'", using "').concat(t,'" instead.')}(t,c)),o.type=c}if(oVe(o)){var l=function(e,t){var n=e.type;if("geojson"===n&&"shape"!==t)return{compatible:!1,warning:"Channel ".concat(t," should not be used with a geojson data.")};switch(t){case jLe:case ULe:case WLe:return vVe(e)?{compatible:!1,warning:Eje(t)}:DVe;case VLe:case qLe:case nPe:case rPe:case aPe:case dPe:case vPe:case gPe:case mPe:case yPe:case bPe:case uPe:case KLe:case XLe:case xPe:return DVe;case JLe:case tPe:case QLe:case ePe:return n!==DUe?{compatible:!1,warning:"Channel ".concat(t," should be used with a quantitative field only, not ").concat(e.type," field.")}:DVe;case sPe:case cPe:case lPe:case fPe:case oPe:case $Le:case YLe:case HLe:case GLe:return"nominal"!==n||e.sort?DVe:{compatible:!1,warning:"Channel ".concat(t," should not be used with an unsorted discrete field.")};case hPe:return Sze(["ordinal","nominal"],e.type)?DVe:{compatible:!1,warning:"StrokeDash channel should be used with only discrete data."};case iPe:return Sze(["ordinal","nominal","geojson"],e.type)?DVe:{compatible:!1,warning:"Shape channel should be used with only either discrete or geojson data."};case pPe:return"nominal"!==e.type||"sort"in e?DVe:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}}(o,t),f=l.compatible,h=l.warning;f||Vje(h)}if(XWe(o)&&nze(o.sort)){var d=o.sort;if(PWe(d))return Object.assign(Object.assign({},o),{sort:{encoding:d}});var p=d.substr(1);if("-"===d.charAt(0)&&PWe(p))return Object.assign(Object.assign({},o),{sort:{encoding:p,order:"descending"}})}if(qWe(o)){var v=o.header,g=v.orient,m=ize(v,["orient"]);if(g)return Object.assign(Object.assign({},o),{header:Object.assign(Object.assign({},m),{labelOrient:v.labelOrient||g,titleOrient:v.titleOrient||g})})}return o}function MVe(e,t){return eze(e)?{maxbins:sje(t)}:"binned"===e?{binned:!0}:e.maxbins||e.step?e:Object.assign(Object.assign({},e),{maxbins:sje(t)})}var DVe={compatible:!0};function FVe(e){var t=SVe(e).formatType;return"time"===t||!t&&function(e){return e&&("temporal"===e.type||eVe(e)&&!!e.timeUnit)}(e)}function IVe(e,t){var n,r,a=t.timeUnit,i=t.type,o=t.wrapTime,u=t.undefinedIfExprNotRequired,s=a&&(null===(n=sUe(a))||void 0===n?void 0:n.unit),c=s||"temporal"===i;return lUe(e)?r=e.signal:qje(e)?(c=!0,r=$je(e)):(nze(e)||tze(e))&&c&&(r="datetime(".concat(JSON.stringify(e),")"),function(e){return!!eUe[e]}(s)&&(tze(e)&&e<1e4||nze(e)&&isNaN(Date.parse(e)))&&(r=$je((0,Ir.Z)({},s,e)))),r?o&&c?"time(".concat(r,")"):r:u?void 0:JSON.stringify(e)}function OVe(e,t){var n=e.type;return t.map((function(t){var r=IVe(t,{timeUnit:eVe(e)?e.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return void 0!==r?{signal:r}:t}))}function RVe(e,t){return aje(e.bin)?QPe(t)&&Sze(["ordinal","nominal"],e.type):(console.warn("Only call this method for binned field defs."),!1)}function ZVe(e){var t=e.anchor,n=e.frame,r=e.offset,a=e.orient,i=e.color,o=e.subtitleColor,u=e.subtitleFont,s=e.subtitleFontSize,c=e.subtitleFontStyle,l=e.subtitleFontWeight,f=e.subtitleLineHeight,h=e.subtitlePadding,d=ize(e,["anchor","frame","offset","orient","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),p=Object.assign(Object.assign({},d),i?{fill:i}:{}),v=Object.assign(Object.assign(Object.assign(Object.assign({},t?{anchor:t}:{}),n?{frame:n}:{}),r?{offset:r}:{}),a?{orient:a}:{}),g=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},o?{subtitleColor:o}:{}),u?{subtitleFont:u}:{}),s?{subtitleFontSize:s}:{}),c?{subtitleFontStyle:c}:{}),l?{subtitleFontWeight:l}:{}),f?{subtitleLineHeight:f}:{}),h?{subtitlePadding:h}:{});return{titleMarkConfig:p,subtitleMarkConfig:bze(p,["align","baseline","dx","dy","limit"]),nonMark:v,subtitle:g}}function BVe(e){return nze(e)||qBe(e)&&nze(e[0])}function zVe(e){return lUe(e)?e:void 0!==e?{value:e}:void 0}function LVe(e){return lUe(e)?e.signal:rze(e.value)}function PVe(e){return lUe(e)?e.signal:null==e?null:rze(e)}function jVe(e){var t;return[].concat(e.type,null!==(t=e.style)&&void 0!==t?t:[])}function UVe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.vgChannel,i=r.ignoreVgConfig;return a&&void 0!==t[a]?t[a]:void 0!==t[e]?t[e]:!i||a&&a!==e?WVe(e,t,n,r):void 0}function WVe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.vgChannel;return Xze(a?VVe(e,t,n.style):void 0,VVe(e,t,n.style),a?n[t.type][a]:void 0,n[t.type][e],a?n.mark[a]:n.mark[e])}function VVe(e,t,n){return qVe(e,jVe(t),n)}function qVe(e,t,n){var r;t=$Be(t);var a,i=(0,zt.Z)(t);try{for(i.s();!(a=i.n()).done;){var o=n[a.value];o&&void 0!==o[e]&&(r=o[e])}}catch(u){i.e(u)}finally{i.f()}return r}function HVe(e,t){return $Be(e).reduce((function(e,n){var r;return e.field.push(dVe(n,t)),e.order.push(null!==(r=n.sort)&&void 0!==r?r:"ascending"),e}),{field:[],order:[]})}function GVe(e,t){var n=(0,$n.Z)(e);return t.forEach((function(e){var t,r=(0,zt.Z)(n);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(mze(a,e))return}}catch(i){r.e(i)}finally{r.f()}n.push(e)})),n}function XVe(e,t){return mze(e,t)||!t?e:e?[].concat((0,$n.Z)($Be(e)),(0,$n.Z)($Be(t))).join(", "):t}function YVe(e,t){var n=e.value,r=t.value;if(null==n||null===r)return{explicit:e.explicit,value:null};if((BVe(n)||lUe(n))&&(BVe(r)||lUe(r)))return{explicit:e.explicit,value:XVe(n,r)};if(BVe(n)||lUe(n))return{explicit:e.explicit,value:n};if(BVe(r)||lUe(r))return{explicit:e.explicit,value:r};if(!BVe(n)&&!lUe(n)&&!BVe(r)&&!lUe(r))return{explicit:e.explicit,value:GVe(n,r)};throw new Error("It should never reach here")}function KVe(e,t){var n=e&&e[t];return!!n&&(qBe(n)?Cze(n,(function(e){return!!e.field})):eVe(n)||QWe(n))}function $Ve(e){return Cze(MPe,(function(t){if(KVe(e,t)){var n=e[t];if(qBe(n))return Cze(n,(function(e){return!!e.aggregate}));var r=CVe(n);return r&&!!r.aggregate}return!1}))}function QVe(e,t){var n=[],r=[],a=[],i=[],o={};return tqe(e,(function(u,s){if(eVe(u)){var c=u.field,l=u.aggregate,f=u.bin,h=u.timeUnit,d=ize(u,["field","aggregate","bin","timeUnit"]);if(l||h||f){var p,v=kVe(u),g=v&&v.title,m=dVe(u,{forAs:!0}),y=Object.assign(Object.assign(Object.assign({},g?[]:{title:wVe(u,t,{allowDisabling:!0})}),d),{field:m});if(l){if(RLe(l)?(p="argmax",m=dVe({op:"argmax",field:l.argmax},{forAs:!0}),y.field="".concat(m,".").concat(c)):OLe(l)?(p="argmin",m=dVe({op:"argmin",field:l.argmin},{forAs:!0}),y.field="".concat(m,".").concat(c)):"boxplot"!==l&&"errorbar"!==l&&"errorband"!==l&&(p=l),p){var b={op:p,as:m};c&&(b.field=c),i.push(b)}}else if(n.push(m),oVe(u)&&aje(f)){if(r.push({bin:f,field:c,as:m}),n.push(dVe(u,{binSuffix:"end"})),RVe(u,s)&&n.push(dVe(u,{binSuffix:"range"})),VPe(s)){var x={field:m+"_end"};o[s+"2"]=x}y.bin="binned",RPe(s)||(y.type=DUe)}else if(h){a.push({timeUnit:h,field:c,as:m});var w=oVe(u)&&u.type!==IUe&&"time";w&&(s===dPe||s===mPe?y.formatType=w:!function(e){return!!PPe[e]}(s)?VPe(s)&&(y.axis=Object.assign({formatType:w},y.axis)):y.legend=Object.assign({formatType:w},y.legend))}o[s]=y}else n.push(c),o[s]=e[s]}else o[s]=e[s]})),{bins:r,timeUnits:a,aggregate:i,groupby:n,encoding:o}}function JVe(e,t,n){var r=t.type;return Ize(e).reduce((function(a,i){if(!IPe(i))return Vje(function(e){return"".concat(e,"-encoding is dropped as ").concat(e," is not a valid encoding channel.")}(i)),a;var o=e[i];if("angle"!==i||"arc"!==r||e.theta||(Vje("Arc marks uses theta channel rather than angle, replacing angle with theta."),i=KLe),!function(e,t,n){var r=JPe(t,n);if(!r)return!1;if("binned"===r){var a=e[t===HLe?VLe:qLe];return!!(eVe(a)&&eVe(e[t])&&ije(a.bin))}return!0}(e,i,r))return Vje(Cje(i,r)),a;if(i===oPe&&"line"===r){var u=CVe(e[i]);if(null===u||void 0===u?void 0:u.aggregate)return Vje("Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead."),a}if(i===nPe&&(t.filled?"fill"in e:"stroke"in e))return Vje(_je("encoding",{fill:"fill"in e,stroke:"stroke"in e})),a;if(i===vPe||i===pPe&&!qBe(o)&&!uVe(o)||i===mPe&&qBe(o))o&&(a[i]=$Be(o).reduce((function(e,t){return eVe(t)?e.push(TVe(t,i)):Vje(Sje(t,i)),e}),[]));else{if(i===mPe&&null===o)a[i]=null;else if(!eVe(o)&&!nVe(o)&&!uVe(o)&&!$We(o)&&!lUe(o))return Vje(Sje(o,i)),a;a[i]=AVe(o,i,n)}return a}),{})}function eqe(e){var t,n=[],r=(0,zt.Z)(Ize(e));try{for(r.s();!(t=r.n()).done;){var a=t.value;if(KVe(e,a)){var i,o=$Be(e[a]),u=(0,zt.Z)(o);try{for(u.s();!(i=u.n()).done;){var s=i.value;eVe(s)?n.push(s):QWe(s)&&n.push(s.condition)}}catch(c){u.e(c)}finally{u.f()}}}}catch(c){r.e(c)}finally{r.f()}return n}function tqe(e,t,n){if(e){var r,a=(0,zt.Z)(Ize(e));try{for(a.s();!(r=a.n()).done;){var i=r.value,o=e[i];if(qBe(o)){var u,s=(0,zt.Z)(o);try{for(s.s();!(u=s.n()).done;){var c=u.value;t.call(n,c,i)}}catch(l){s.e(l)}finally{s.f()}}else t.call(n,o,i)}}catch(l){a.e(l)}finally{a.f()}}}function nqe(e,t,n,r){return e?Ize(e).reduce((function(n,a){var i=e[a];return qBe(i)?i.reduce((function(e,n){return t.call(r,e,n,a)}),n):t.call(r,n,i,a)}),n):n}function rqe(e,t){return Ize(t).reduce((function(n,r){switch(r){case VLe:case qLe:case yPe:case xPe:case bPe:case HLe:case GLe:case KLe:case $Le:case XLe:case YLe:case QLe:case JLe:case ePe:case tPe:case dPe:case iPe:case uPe:case mPe:return n;case pPe:if("line"===e||"trail"===e)return n;case vPe:case gPe:var a=t[r];if(qBe(a)||eVe(a)){var i,o=(0,zt.Z)($Be(a));try{for(o.s();!(i=o.n()).done;){var u=i.value;u.aggregate||n.push(dVe(u,{}))}}catch(c){o.e(c)}finally{o.f()}}return n;case oPe:if("trail"===e)return n;case nPe:case rPe:case aPe:case sPe:case cPe:case lPe:case hPe:case fPe:var s=CVe(t[r]);return s&&!s.aggregate&&n.push(dVe(s,{})),n}}),[])}function aqe(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if("tooltip"in n)return{tooltip:n.tooltip};var a=e.map((function(e){var n=e.fieldPrefix,a=e.titlePrefix,i=r?" of ".concat(t.field):"";return{field:n+t.field,type:t.type,title:lUe(a)?{signal:a+'"'.concat(escape(i),'"')}:a+i}}));return{tooltip:[].concat((0,$n.Z)(a),(0,$n.Z)(eqe(n)))}}function iqe(e){var t=e.axis,n=e.title,r=e.field;return t&&void 0!==t.title?void 0:Xze(n,r)}function oqe(e,t,n,r,a){var i=n.scale,o=n.axis;return function(u){var s=u.partName,c=u.mark,l=u.positionPrefix,f=u.endPositionPrefix,h=void 0===f?void 0:f,d=u.aria,p=u.extraEncoding,v=void 0===p?{}:p,g=iqe(n);return uqe(e,s,a,d,{mark:c,encoding:Object.assign(Object.assign(Object.assign((0,Ir.Z)({},t,Object.assign(Object.assign(Object.assign({field:l+"_"+n.field,type:n.type},void 0!==g?{title:g}:{}),void 0!==i?{scale:i}:{}),void 0!==o?{axis:o}:{})),nze(h)?(0,Ir.Z)({},t+"2",{field:h+"_"+n.field}):{}),r),v)})}}function uqe(e,t,n,r,a){var i=e.clip,o=e.color,u=e.opacity,s=e.type;return e[t]||void 0===e[t]&&n[t]?[Object.assign(Object.assign({},a),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n[t]),i?{clip:i}:{}),o?{color:o}:{}),u?{opacity:u}:{}),SLe(a.mark)?a.mark:{type:a.mark}),{style:"".concat(s,"-").concat(t)}),eze(e[t])?{}:e[t]),!1===r?{aria:r}:{})})]:[]}function sqe(e,t,n){var r=e.encoding,a="vertical"===t?"y":"x",i=r[a],o=r[a+"2"],u=r[a+"Error"],s=r[a+"Error2"];return{continuousAxisChannelDef:cqe(i,n),continuousAxisChannelDef2:cqe(o,n),continuousAxisChannelDefError:cqe(u,n),continuousAxisChannelDefError2:cqe(s,n),continuousAxis:a}}function cqe(e,t){if(e&&e.aggregate){var n=e.aggregate,r=ize(e,["aggregate"]);return n!==t&&Vje(function(e,t){return"Continuous axis should not have customized aggregation function ".concat(e,"; ").concat(t," already agregates the axis.")}(n,t)),r}return e}function lqe(e,t){var n=e.mark,r=e.encoding,a=r.x,i=r.y;if(rVe(a)){if(rVe(i)){var o=eVe(a)&&a.aggregate,u=eVe(i)&&i.aggregate;if(o||u!==t){if(u||o!==t){if(o===t&&u===t)throw new Error("Both x and y cannot have aggregate");return SLe(n)&&n.orient?n.orient:"vertical"}return"horizontal"}return"vertical"}return"horizontal"}if(rVe(i))return"vertical";throw new Error("Need a valid continuous axis for "+t+"s")}var fqe="boxplot",hqe=new DLe(fqe,pqe);function dqe(e){return tze(e)?"tukey":e}function pqe(e,t){var n,r,a=t.config,i=e.mark,o=(e.encoding,e.selection),u=(e.projection,ize(e,["mark","encoding","selection","projection"])),s=SLe(i)?i:{type:i};o&&Vje(mje("boxplot"));var c,l=null!==(n=s.extent)&&void 0!==n?n:a.boxplot.extent,f=UVe("size",s,a),h=dqe(l),d=function(e,t,n){var r=lqe(e,fqe),a=sqe(e,r,fqe),i=a.continuousAxisChannelDef,o=a.continuousAxis,u=i.field,s=dqe(t),c=[].concat((0,$n.Z)(vqe(u)),[{op:"median",field:u,as:"mid_box_"+u},{op:"min",field:u,as:("min-max"===s?"lower_whisker_":"min_")+u},{op:"max",field:u,as:("min-max"===s?"upper_whisker_":"max_")+u}]),l="min-max"===s||"tukey"===s?[]:[{calculate:'datum["upper_box_'.concat(u,'"] - datum["lower_box_').concat(u,'"]'),as:"iqr_"+u},{calculate:'min(datum["upper_box_'.concat(u,'"] + datum["iqr_').concat(u,'"] * ').concat(t,', datum["max_').concat(u,'"])'),as:"upper_whisker_"+u},{calculate:'max(datum["lower_box_'.concat(u,'"] - datum["iqr_').concat(u,'"] * ').concat(t,', datum["min_').concat(u,'"])'),as:"lower_whisker_"+u}],f=e.encoding,h=o,d=(f[h],function(e){var t,n,r=e.tooltip,a=ize(e,["tooltip"]);if(!r)return{filteredEncoding:e};if(qBe(r)){var i,o=(0,zt.Z)(r);try{for(o.s();!(i=o.n()).done;){var u=i.value;u.aggregate?(t||(t=[]),t.push(u)):(n||(n=[]),n.push(u))}}catch(s){o.e(s)}finally{o.f()}t&&(a.tooltip=t)}else r.aggregate?a.tooltip=r:n=r;return qBe(n)&&1===n.length&&(n=n[0]),{customTooltipWithoutAggregatedField:n,filteredEncoding:a}}(ize(f,["symbol"===typeof h?h:h+""]))),p=d.customTooltipWithoutAggregatedField,v=QVe(d.filteredEncoding,n),g=v.bins,m=v.timeUnits,y=v.aggregate,b=v.groupby,x=v.encoding,w="vertical"===r?"horizontal":"vertical",k=r;return{transform:[].concat((0,$n.Z)(g),(0,$n.Z)(m),[{aggregate:[].concat((0,$n.Z)(y),(0,$n.Z)(c)),groupby:b}],l),groupby:b,aggregate:y,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:x,ticksOrient:w,boxOrient:k,customTooltipWithoutAggregatedField:p}}(e,l,a),p=d.transform,v=d.continuousAxisChannelDef,g=d.continuousAxis,m=d.groupby,y=d.aggregate,b=d.encodingWithoutContinuousAxis,x=d.ticksOrient,w=d.boxOrient,k=d.customTooltipWithoutAggregatedField,_=(b.color,b.size),S=ize(b,["color","size"]),C=function(e){return oqe(s,g,v,e,a.boxplot)},E=C(S),A=C(b),N=C(Object.assign(Object.assign({},S),_?{size:_}:{})),T=aqe([{fieldPrefix:"min-max"===h?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===h?"lower_whisker_":"min_",titlePrefix:"Min"}],v,b),M={type:"tick",color:"black",opacity:1,orient:x,invalid:null},D="min-max"===h?T:aqe([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],v,b),F=[].concat((0,$n.Z)(E({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",aria:!1,extraEncoding:D})),(0,$n.Z)(E({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",aria:!1,extraEncoding:D})),(0,$n.Z)(E({partName:"ticks",mark:M,positionPrefix:"lower_whisker",aria:!1,extraEncoding:D})),(0,$n.Z)(E({partName:"ticks",mark:M,positionPrefix:"upper_whisker",aria:!1,extraEncoding:D}))),I=[].concat((0,$n.Z)("tukey"!==h?F:[]),(0,$n.Z)(A({partName:"box",mark:Object.assign(Object.assign({type:"bar"},f?{size:f}:{}),{orient:w,invalid:null}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",aria:!1,extraEncoding:T})),(0,$n.Z)(N({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:null},HBe(a.boxplot.median)&&a.boxplot.median.color?{color:a.boxplot.median.color}:{}),f?{size:f}:{}),{orient:x,ariaRoleDescription:"box"}),positionPrefix:"mid_box",extraEncoding:T})));if("min-max"!==h){var O='datum["lower_box_'.concat(v.field,'"]'),R='datum["upper_box_'.concat(v.field,'"]'),Z="(".concat(R," - ").concat(O,")"),B="".concat(O," - ").concat(l," * ").concat(Z),z="".concat(R," + ").concat(l," * ").concat(Z),L='datum["'.concat(v.field,'"]'),P={joinaggregate:vqe(v.field),groupby:m},j=void 0;"tukey"===h&&(j={transform:[{filter:"(".concat(B," <= ").concat(L,") && (").concat(L," <= ").concat(z,")")},{aggregate:[{op:"min",field:v.field,as:"lower_whisker_"+v.field},{op:"max",field:v.field,as:"upper_whisker_"+v.field},{op:"min",field:"lower_box_"+v.field,as:"lower_box_"+v.field},{op:"max",field:"upper_box_"+v.field,as:"upper_box_"+v.field}].concat((0,$n.Z)(y)),groupby:m}],layer:F});S.tooltip;var U=ize(S,["tooltip"]),W=v.scale,V=v.axis,q=iqe(v),H=uqe(s,"outliers",a.boxplot,!0,{transform:[{filter:"(".concat(L," < ").concat(B,") || (").concat(L," > ").concat(z,")")}],mark:"point",encoding:Object.assign(Object.assign((0,Ir.Z)({},g,Object.assign(Object.assign(Object.assign({field:v.field,type:v.type},void 0!==q?{title:q}:{}),void 0!==W?{scale:W}:{}),void 0!==V?{axis:V}:{})),U),k?{tooltip:k}:{})})[0];H&&j?c={transform:[P],layer:[H,j]}:H?(c=H).transform.unshift(P):j&&(c=j).transform.unshift(P)}return c?Object.assign(Object.assign({},u),{layer:[c,{transform:p,layer:I}]}):Object.assign(Object.assign({},u),{transform:(null!==(r=u.transform)&&void 0!==r?r:[]).concat(p),layer:I})}function vqe(e){return[{op:"q1",field:e,as:"lower_box_"+e},{op:"q3",field:e,as:"upper_box_"+e}]}var gqe="errorbar",mqe=new DLe(gqe,yqe);function yqe(e,t){var n=t.config,r=xqe(e,gqe,n),a=r.transform,i=r.continuousAxisChannelDef,o=r.continuousAxis,u=r.encodingWithoutContinuousAxis,s=r.ticksOrient,c=r.markDef,l=r.outerSpec,f=r.tooltipEncoding,h=oqe(c,o,i,u,n.errorbar),d={type:"tick",orient:s},p=[].concat((0,$n.Z)(h({partName:"ticks",mark:d,positionPrefix:"lower",aria:!1,extraEncoding:f})),(0,$n.Z)(h({partName:"ticks",mark:d,positionPrefix:"upper",aria:!1,extraEncoding:f})),(0,$n.Z)(h({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar"},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:f})));return Object.assign(Object.assign(Object.assign({},l),{transform:a}),p.length>1?{layer:p}:Object.assign({},p[0]))}function bqe(e,t){var n=e.encoding;if(function(e){return(iVe(e.x)||iVe(e.y))&&!iVe(e.x2)&&!iVe(e.y2)&&!iVe(e.xError)&&!iVe(e.xError2)&&!iVe(e.yError)&&!iVe(e.yError2)}(n))return{orient:lqe(e,t),inputType:"raw"};var r=function(e){return iVe(e.x2)||iVe(e.y2)}(n),a=function(e){return iVe(e.xError)||iVe(e.xError2)||iVe(e.yError)||iVe(e.yError2)}(n),i=n.x,o=n.y;if(r){if(a)throw new Error("".concat(t," cannot be both type aggregated-upper-lower and aggregated-error"));var u=n.x2,s=n.y2;if(iVe(u)&&iVe(s))throw new Error("".concat(t," cannot have both x2 and y2"));if(iVe(u)){if(rVe(i))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error("Both x and x2 have to be quantitative in ".concat(t))}if(iVe(s)){if(rVe(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error("Both y and y2 have to be quantitative in ".concat(t))}throw new Error("No ranged axis")}var c=n.xError,l=n.xError2,f=n.yError,h=n.yError2;if(iVe(l)&&!iVe(c))throw new Error("".concat(t," cannot have xError2 without xError"));if(iVe(h)&&!iVe(f))throw new Error("".concat(t," cannot have yError2 without yError"));if(iVe(c)&&iVe(f))throw new Error("".concat(t," cannot have both xError and yError with both are quantiative"));if(iVe(c)){if(rVe(i))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(iVe(f)){if(rVe(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}function xqe(e,t,n){var r,a=e.mark,i=e.encoding,o=e.selection,u=(e.projection,ize(e,["mark","encoding","selection","projection"])),s=SLe(a)?a:{type:a};o&&Vje(mje(t));var c=bqe(e,t),l=c.orient,f=c.inputType,h=sqe(e,l,t),d=h.continuousAxisChannelDef,p=h.continuousAxisChannelDef2,v=h.continuousAxisChannelDefError,g=h.continuousAxisChannelDefError2,m=h.continuousAxis,y=function(e,t,n,r,a,i,o,u){var s,c=[],l=[],f=t.field,h=!1;if("raw"===i){var d,p,v,g=e.center?e.center:e.extent?"iqr"===e.extent?"median":"mean":u.errorbar.center,m=e.extent?e.extent:"mean"===g?"stderr":"iqr";if("median"===g!==("iqr"===m)&&Vje(function(e,t,n){return"".concat(e," is not usually used with ").concat(t," for ").concat(n,".")}(g,m,o)),"stderr"===m||"stdev"===m)c=[{op:m,field:f,as:"extent_"+f},{op:g,field:f,as:"center_"+f}],l=[{calculate:'datum["center_'.concat(f,'"] + datum["extent_').concat(f,'"]'),as:"upper_"+f},{calculate:'datum["center_'.concat(f,'"] - datum["extent_').concat(f,'"]'),as:"lower_"+f}],s=[{fieldPrefix:"center_",titlePrefix:Pze(g)},{fieldPrefix:"upper_",titlePrefix:wqe(g,m,"+")},{fieldPrefix:"lower_",titlePrefix:wqe(g,m,"-")}],h=!0;else e.center&&e.extent&&Vje(function(e,t){return"Center is not needed to be specified in ".concat(t," when extent is ").concat(e,".")}(e.extent,o)),"ci"===m?(d="mean",p="ci0",v="ci1"):(d="median",p="q1",v="q3"),c=[{op:p,field:f,as:"lower_"+f},{op:v,field:f,as:"upper_"+f},{op:d,field:f,as:"center_"+f}],s=[{fieldPrefix:"upper_",titlePrefix:wVe({field:f,aggregate:v,type:"quantitative"},u,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:wVe({field:f,aggregate:p,type:"quantitative"},u,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:wVe({field:f,aggregate:d,type:"quantitative"},u,{allowDisabling:!1})}]}else{(e.center||e.extent)&&Vje(function(e,t){return"".concat(t?"extent ":"").concat(t&&e?"and ":"").concat(e?"center ":"").concat(t&&e?"are ":"is ","not needed when data are aggregated.")}(e.center,e.extent)),"aggregated-upper-lower"===i?(s=[],l=[{calculate:'datum["'.concat(n.field,'"]'),as:"upper_"+f},{calculate:'datum["'.concat(f,'"]'),as:"lower_"+f}]):"aggregated-error"===i&&(s=[{fieldPrefix:"",titlePrefix:f}],l=[{calculate:'datum["'.concat(f,'"] + datum["').concat(r.field,'"]'),as:"upper_"+f}],a?l.push({calculate:'datum["'.concat(f,'"] + datum["').concat(a.field,'"]'),as:"lower_"+f}):l.push({calculate:'datum["'.concat(f,'"] - datum["').concat(r.field,'"]'),as:"lower_"+f}));var y,b=(0,zt.Z)(l);try{for(b.s();!(y=b.n()).done;){var x=y.value;s.push({fieldPrefix:x.as.substring(0,6),titlePrefix:qze(qze(x.calculate,'datum["',""),'"]',"")})}}catch(w){b.e(w)}finally{b.f()}}return{postAggregateCalculates:l,errorBarSpecificAggregate:c,tooltipSummary:s,tooltipTitleWithFieldName:h}}(s,d,p,v,g,f,t,n),b=y.errorBarSpecificAggregate,x=y.postAggregateCalculates,w=y.tooltipSummary,k=y.tooltipTitleWithFieldName,_=i,S=m,C=(_[S],"x"===m?"x2":"y2"),E=(_[C],"x"===m?"xError":"yError"),A=(_[E],"x"===m?"xError2":"yError2"),N=(_[A],QVe(ize(_,["symbol"===typeof S?S:S+"","symbol"===typeof C?C:C+"","symbol"===typeof E?E:E+"","symbol"===typeof A?A:A+""]),n)),T=N.bins,M=N.timeUnits,D=N.aggregate,F=N.groupby,I=N.encoding,O=[].concat((0,$n.Z)(D),(0,$n.Z)(b)),R="raw"!==f?[]:F,Z=aqe(w,d,I,k);return{transform:[].concat((0,$n.Z)(null!==(r=u.transform)&&void 0!==r?r:[]),(0,$n.Z)(T),(0,$n.Z)(M),(0,$n.Z)(0===O.length?[]:[{aggregate:O,groupby:R}]),(0,$n.Z)(x)),groupby:R,continuousAxisChannelDef:d,continuousAxis:m,encodingWithoutContinuousAxis:I,ticksOrient:"vertical"===l?"horizontal":"vertical",markDef:s,outerSpec:u,tooltipEncoding:Z}}function wqe(e,t,n){return Pze(e)+" "+n+" "+t}var kqe="errorband",_qe=new DLe(kqe,Sqe);function Sqe(e,t){var n=t.config,r=xqe(e,kqe,n),a=r.transform,i=r.continuousAxisChannelDef,o=r.continuousAxis,u=r.encodingWithoutContinuousAxis,s=r.markDef,c=r.outerSpec,l=r.tooltipEncoding,f=s,h=oqe(f,o,i,u,n.errorband),d=void 0!==e.encoding.x&&void 0!==e.encoding.y,p={type:d?"area":"rect"},v={type:d?"line":"rule"},g=Object.assign(Object.assign({},f.interpolate?{interpolate:f.interpolate}:{}),f.tension&&f.interpolate?{tension:f.tension}:{});return d?(p=Object.assign(Object.assign(Object.assign({},p),g),{ariaRoleDescription:"errorband"}),v=Object.assign(Object.assign({},v),g)):f.interpolate?Vje(zje("interpolate")):f.tension&&Vje(zje("tension")),Object.assign(Object.assign({},c),{transform:a,layer:[].concat((0,$n.Z)(h({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})),(0,$n.Z)(h({partName:"borders",mark:v,positionPrefix:"lower",aria:!1,extraEncoding:l})),(0,$n.Z)(h({partName:"borders",mark:v,positionPrefix:"upper",aria:!1,extraEncoding:l})))})}var Cqe={};function Eqe(e,t,n){var r=new DLe(e,t);Cqe[e]={normalizer:r,parts:n}}Eqe(fqe,pqe,["box","median","outliers","rule","ticks"]),Eqe(gqe,yqe,["ticks","rule"]),Eqe(kqe,Sqe,["band","borders"]);var Aqe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],Nqe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Tqe={fillColor:{part:"legend",vgProp:"fill"},gradientStrokeColor:{part:"gradient",vgProp:"stroke"},labelColor:{part:"labels",vgProp:"fill"},strokeColor:{part:"legend",vgProp:"stroke"},symbolFillColor:{part:"symbols",vgProp:"fill"},symbolStrokeColor:{part:"symbols",vgProp:"stroke"},titleColor:{part:"title",vgProp:"fill"}},Mqe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Dqe=(Ize(Mqe),"_vgsid_"),Fqe={single:{on:"click",fields:[Dqe],resolve:"global",empty:"all",clear:"dblclick"},multi:{on:"click",fields:[Dqe],toggle:"event.shiftKey",resolve:"global",empty:"all",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Iqe(e){return!!e&&("legend"===e||!!e.legend)}function Oqe(e){return Iqe(e)&&HBe(e)}function Rqe(e){return"concat"in e}function Zqe(e){return"vconcat"in e}function Bqe(e){return"hconcat"in e}function zqe(e){return HBe(e)&&void 0!==e.step}function Lqe(e){return e.view||e.width||e.height}var Pqe=Ize({align:1,bounds:1,center:1,columns:1,spacing:1});function jqe(e,t){var n;return null!==(n=e[t])&&void 0!==n?n:e["width"===t?"continuousWidth":"continuousHeight"]}function Uqe(e,t){var n=Wqe(e,t);return zqe(n)?n.step:Vqe}function Wqe(e,t){var n;return Xze(null!==(n=e[t])&&void 0!==n?n:e["width"===t?"discreteWidth":"discreteHeight"],{step:e.step})}var Vqe=20;var qqe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:Vqe},mark:{color:"#4c78a8",invalid:"filter",timeUnitBand:1},arc:{},area:{},bar:NLe,circle:{},geoshape:{},image:{},line:{},point:{},rect:TLe,rule:{color:"black"},square:{},text:{color:"black"},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4},projection:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Fqe,style:{},title:{},facet:{spacing:20},concat:{spacing:20}},Hqe=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Gqe={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Xqe={blue:Hqe[0],orange:Hqe[1],red:Hqe[2],teal:Hqe[3],green:Hqe[4],yellow:Hqe[5],purple:Hqe[6],pink:Hqe[7],brown:Hqe[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Yqe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{signals:[{name:"color",value:HBe(e)?Object.assign(Object.assign({},Xqe),e):Xqe}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Kqe(e){return{signals:[{name:"fontSize",value:HBe(e)?Object.assign(Object.assign({},Gqe),e):Gqe}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function $qe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function Qqe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,n=e.font,r=e.fontSize,a=ize(e,["color","font","fontSize"]);return XBe({},qqe,n?$qe(n):{},t?Yqe(t):{},r?Kqe(r):{},a||{})}var Jqe=["view"].concat((0,$n.Z)(_Le)),eHe=["color","fontSize","background","padding","facet","concat","numberFormat","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],tHe=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},{area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]});function nHe(e){e=yze(e);var t,n=(0,zt.Z)(eHe);try{for(n.s();!(t=n.n()).done;){delete e[t.value]}}catch(_){n.e(_)}finally{n.f()}if(e.axis)for(var r in e.axis)eLe(e.axis[r])&&delete e.axis[r];if(e.legend){var a,i=(0,zt.Z)(Aqe);try{for(i.s();!(a=i.n()).done;){var o=a.value;delete e.legend[o]}}catch(_){i.e(_)}finally{i.f()}}if(e.mark){var u,s=(0,zt.Z)(ELe);try{for(s.s();!(u=s.n()).done;){var c=u.value;delete e.mark[c]}}catch(_){s.e(_)}finally{s.f()}e.mark.tooltip&&HBe(e.mark.tooltip)&&delete e.mark.tooltip}var l,f=(0,zt.Z)(Jqe);try{for(f.s();!(l=f.n()).done;){var h,d=l.value,p=(0,zt.Z)(ELe);try{for(p.s();!(h=p.n()).done;){var v=h.value;delete e[d][v]}}catch(_){p.e(_)}finally{p.f()}var g=tHe[d];if(g){var m,y=(0,zt.Z)(g);try{for(y.s();!(m=y.n()).done;){var b=m.value;delete e[d][b]}}catch(_){y.e(_)}finally{y.f()}}rHe(e,d)}}catch(_){f.e(_)}finally{f.f()}var x,w=(0,zt.Z)(Ize(Cqe));try{for(w.s();!(x=w.n()).done;){delete e[x.value]}}catch(_){w.e(_)}finally{w.f()}for(var k in function(e){var t=ZVe(e.title),n=t.titleMarkConfig,r=t.subtitleMarkConfig,a=t.subtitle;Fze(n)||(e.style["group-title"]=Object.assign(Object.assign({},e.style["group-title"]),n));Fze(r)||(e.style["group-subtitle"]=Object.assign(Object.assign({},e.style["group-subtitle"]),r));Fze(a)?delete e.title:e.title=a}(e),e)HBe(e[k])&&Fze(e[k])&&delete e[k];return Fze(e)?void 0:e}function rHe(e,t,n,r){var a=r?e[t][r]:e[t];"view"===t&&(n="cell");var i=Object.assign(Object.assign({},a),e.style[null!==n&&void 0!==n?n:t]);Fze(i)||(e.style[null!==n&&void 0!==n?n:t]=i),r||delete e[t]}function aHe(e){return"layer"in e}var iHe=function(){function e(){(0,ud.Z)(this,e)}return(0,sd.Z)(e,[{key:"map",value:function(e,t){return HWe(e)?this.mapFacet(e,t):function(e){return"repeat"in e}(e)?this.mapRepeat(e,t):Bqe(e)?this.mapHConcat(e,t):Zqe(e)?this.mapVConcat(e,t):Rqe(e)?this.mapConcat(e,t):this.mapLayerOrUnit(e,t)}},{key:"mapLayerOrUnit",value:function(e,t){if(aHe(e))return this.mapLayer(e,t);if(MLe(e))return this.mapUnit(e,t);throw new Error(lje(e))}},{key:"mapLayer",value:function(e,t){var n=this;return Object.assign(Object.assign({},e),{layer:e.layer.map((function(e){return n.mapLayerOrUnit(e,t)}))})}},{key:"mapHConcat",value:function(e,t){var n=this;return Object.assign(Object.assign({},e),{hconcat:e.hconcat.map((function(e){return n.map(e,t)}))})}},{key:"mapVConcat",value:function(e,t){var n=this;return Object.assign(Object.assign({},e),{vconcat:e.vconcat.map((function(e){return n.map(e,t)}))})}},{key:"mapConcat",value:function(e,t){var n=this,r=e.concat,a=ize(e,["concat"]);return Object.assign(Object.assign({},a),{concat:r.map((function(e){return n.map(e,t)}))})}},{key:"mapFacet",value:function(e,t){return Object.assign(Object.assign({},e),{spec:this.map(e.spec,t)})}},{key:"mapRepeat",value:function(e,t){return Object.assign(Object.assign({},e),{spec:this.map(e.spec,t)})}}]),e}(),oHe={zero:1,center:1,normalize:1};function uHe(e){return e in oHe}var sHe=new Set([uLe,cLe,sLe,pLe,hLe,yLe,bLe,fLe,vLe,gLe]),cHe=new Set([cLe,sLe,uLe]);function lHe(e,t){var n,r,a="x"===t?"y":"radius",i=e[t],o=e[a];if(eVe(i)&&eVe(o))if("quantitative"===tVe(i)&&"quantitative"===tVe(o)){if(i.stack)return t;if(o.stack)return a;var u=eVe(i)&&!!i.aggregate;if(u!==(eVe(o)&&!!o.aggregate))return u?t:a;var s=null===(n=i.scale)||void 0===n?void 0:n.type,c=null===(r=o.scale)||void 0===r?void 0:r.type;if(s&&"linear"!==s)return a;if(c&&"linear"!==c)return t}else{if("quantitative"===tVe(i))return t;if("quantitative"===tVe(o))return a}else{if("quantitative"===tVe(i))return t;if("quantitative"===tVe(o))return a}}function fHe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function hHe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=SLe(e)?e.type:e;if(!sHe.has(r))return null;var a=lHe(t,"x")||lHe(t,"theta");if(!a)return null;var i=t[a],o=eVe(i)?dVe(i,{}):void 0,u=fHe(a),s=t[u],c=eVe(s)?dVe(s,{}):void 0;c===o&&(c=void 0,s=void 0,u=void 0);var l,f=jPe.reduce((function(e,n){if("tooltip"!==n&&KVe(t,n)){var r,a=t[n],i=(0,zt.Z)($Be(a));try{for(i.s();!(r=i.n()).done;){var o=CVe(r.value);if(!o.aggregate){var u=dVe(o,{});u&&u===c||e.push({channel:n,fieldDef:o})}}}catch(s){i.e(s)}finally{i.f()}}return e}),[]);if(void 0!==i.stack?l=eze(i.stack)?i.stack?"zero":null:i.stack:f.length>0&&cHe.has(r)&&(l="zero"),!l||!uHe(l))return null;if($Ve(t)&&0===f.length)return null;if(i.scale&&i.scale.type&&i.scale.type!==BUe){if(n.disallowNonLinearStack)return null;Vje(Rje(i.scale.type))}return iVe(t[zPe(a)])?(void 0!==i.stack&&Vje(Oje(a)),null):(eVe(i)&&i.aggregate&&!Sze(LLe,i.aggregate)&&Vje(Zje(i.aggregate)),{groupbyChannel:s?u:void 0,groupbyField:c,fieldChannel:a,impute:null!==i.impute&&wLe(r),stackBy:f,offset:l})}function dHe(e){e.point,e.line;var t=ize(e,["point","line"]);return Ize(t).length>1?t:t.type}function pHe(e){for(var t=0,n=["line","area","rule","trail"];t<n.length;t++){var r=n[t];e[r]&&(e=Object.assign(Object.assign({},e),(0,Ir.Z)({},r,xze(e[r],["point","line"]))))}return e}function vHe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return"transparent"===e.point?{opacity:0}:e.point?HBe(e.point)?e.point:{}:void 0!==e.point?null:t.point||n.shape?HBe(t.point)?t.point:{}:void 0}function gHe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.line?!0===e.line?{}:e.line:void 0!==e.line?null:t.line?!0===t.line?{}:t.line:void 0}var mHe=function(){function e(){(0,ud.Z)(this,e),this.name="path-overlay"}return(0,sd.Z)(e,[{key:"hasMatchingType",value:function(e,t){if(MLe(e)){var n=e.mark,r=e.encoding,a=SLe(n)?n:{type:n};switch(a.type){case"line":case"rule":case"trail":return!!vHe(a,t[a.type],r);case"area":return!!vHe(a,t[a.type],r)||!!gHe(a,t[a.type])}}return!1}},{key:"run",value:function(e,t,n){var r=t.config,a=e.selection,i=e.projection,o=e.encoding,u=e.mark,s=ize(e,["selection","projection","encoding","mark"]),c=SLe(u)?u:{type:u},l=vHe(c,r[c.type],o),f="area"===c.type&&gHe(c,r[c.type]),h=[Object.assign(Object.assign({},a?{selection:a}:{}),{mark:dHe(Object.assign(Object.assign({},"area"===c.type&&void 0===c.opacity&&void 0===c.fillOpacity?{opacity:.7}:{}),c)),encoding:xze(o,["shape"])})],d=hHe(c,o),p=o;if(d){var v=d.fieldChannel,g=d.offset;p=Object.assign(Object.assign({},o),(0,Ir.Z)({},v,Object.assign(Object.assign({},o[v]),g?{stack:g}:{})))}return f&&h.push(Object.assign(Object.assign({},i?{projection:i}:{}),{mark:Object.assign(Object.assign({type:"line"},bze(c,["clip","interpolate","tension","tooltip"])),f),encoding:p})),l&&h.push(Object.assign(Object.assign({},i?{projection:i}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},bze(c,["clip","tooltip"])),l),encoding:p})),n(Object.assign(Object.assign({},s),{layer:h}),Object.assign(Object.assign({},t),{config:pHe(r)}))}}]),e}(),yHe=function(){function e(){(0,ud.Z)(this,e),this.name="RangeStep"}return(0,sd.Z)(e,[{key:"hasMatchingType",value:function(e){var t;if(MLe(e)&&e.encoding){var n,r=(0,zt.Z)(WPe);try{for(r.s();!(n=r.n()).done;){var a=n.value,i=e.encoding[a];if(i&&iVe(i)&&(null===(t=null===i||void 0===i?void 0:i.scale)||void 0===t?void 0:t.rangeStep))return!0}}catch(o){r.e(o)}finally{r.f()}}return!1}},{key:"run",value:function(e){var t,n,r={},a=Object.assign({},e.encoding),i=(0,zt.Z)(WPe);try{for(i.s();!(n=i.n()).done;){var o=n.value,u=LPe(o),s=a[o];if(s&&iVe(s)&&(null===(t=null===s||void 0===s?void 0:s.scale)||void 0===t?void 0:t.rangeStep)){var c=s.scale,l=ize(s,["scale"]),f=c,h=(f.rangeStep,ize(f,["rangeStep"]));r[u]={step:c.rangeStep},Vje('Scale\'s "rangeStep" is deprecated and will be removed in Vega-Lite 5.0. Please use "width"/"height": {"step": ...} instead. See https://vega.github.io/vega-lite/docs/size.html.'),a=Object.assign(Object.assign({},a),(0,Ir.Z)({},o,Object.assign(Object.assign({},l),Fze(h)?{}:{scale:h})))}}}catch(d){i.e(d)}finally{i.f()}return Object.assign(Object.assign(Object.assign({},r),e),{encoding:a})}}]),e}();function bHe(e,t){return t?VWe(e)?CHe(e,t):kHe(e,t):e}function xHe(e,t){return t?CHe(e,t):e}function wHe(e,t,n){var r=t[e];return function(e){return e&&!nze(e)&&"repeat"in e}(r)?r.repeat in n?Object.assign(Object.assign({},t),(0,Ir.Z)({},e,n[r.repeat])):void Vje(function(e){return'Unknown repeated value "'.concat(e,'".')}(r.repeat)):t}function kHe(e,t){if(void 0!==(e=wHe("field",e,t))){if(null===e)return null;if(XWe(e)&&UWe(e.sort)){var n=wHe("field",e.sort,t);e=Object.assign(Object.assign({},e),n?{sort:n}:{})}return e}}function _He(e,t){if(eVe(e))return kHe(e,t);var n=wHe("datum",e,t);return n===e||n.type||(n.type="nominal"),n}function SHe(e,t){if(!iVe(e)){if(JWe(e)){var n=_He(e.condition,t);if(n)return Object.assign(Object.assign({},e),{condition:n});e.condition;return ize(e,["condition"])}return e}var r=_He(e,t);return r||($We(e)?{condition:e.condition}:void 0)}function CHe(e,t){var n={};for(var r in e)if(JBe(e,r)){var a=e[r];if(qBe(a))n[r]=a.map((function(e){return SHe(e,t)})).filter((function(e){return e}));else{var i=SHe(a,t);void 0!==i&&(n[r]=i)}}return n}var EHe=function(){function e(){(0,ud.Z)(this,e),this.name="RuleForRangedLine"}return(0,sd.Z)(e,[{key:"hasMatchingType",value:function(e){if(MLe(e)){var t=e.encoding;if("line"===e.mark){var n,r=(0,zt.Z)(OPe);try{for(r.s();!(n=r.n()).done;){var a=n.value,i=t[ZPe(a)];if(t[a]&&(eVe(i)&&!ije(i.bin)||nVe(i)))return!0}}catch(o){r.e(o)}finally{r.f()}}}return!1}},{key:"run",value:function(e,t,n){var r,a,i=e.encoding;return Vje((r=!!i.x2,a=!!i.y2,"Line mark is for continuous lines and thus cannot be used with ".concat(r&&a?"x2 and y2":r?"x2":"y2",". We will use the rule mark (line segments) instead."))),n(Object.assign(Object.assign({},e),{mark:"rule"}),t)}}]),e}(),AHe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(){var e;return(0,ud.Z)(this,n),(e=t.apply(this,arguments)).nonFacetUnitNormalizers=[hqe,mqe,_qe,new mHe,new EHe,new yHe],e}return(0,sd.Z)(n,[{key:"map",value:function(e,t){if(MLe(e)){var r=KVe(e.encoding,jLe),a=KVe(e.encoding,ULe),i=KVe(e.encoding,WLe);if(r||a||i)return this.mapFacetedUnit(e,t)}return(0,zy.Z)((0,Ly.Z)(n.prototype),"map",this).call(this,e,t)}},{key:"mapUnit",value:function(e,t){var n=t.parentEncoding,r=t.parentProjection,a=Object.assign(Object.assign({},e),{encoding:xHe(e.encoding,t.repeater)});if(n||r)return this.mapUnitWithParentEncodingOrProjection(a,t);var i,o=this.mapLayerOrUnit.bind(this),u=(0,zt.Z)(this.nonFacetUnitNormalizers);try{for(u.s();!(i=u.n()).done;){var s=i.value;if(s.hasMatchingType(a,t.config))return s.run(a,t,o)}}catch(c){u.e(c)}finally{u.f()}return a}},{key:"mapRepeat",value:function(e,t){return function(e){return!qBe(e.repeat)&&e.repeat.layer}(e)?this.mapLayerRepeat(e,t):this.mapNonLayerRepeat(e,t)}},{key:"mapLayerRepeat",value:function(e,t){var n=this,r=e.repeat,a=e.spec,i=ize(e,["repeat","spec"]),o=r.row,u=r.column,s=r.layer,c=t.repeater,l=void 0===c?{}:c,f=t.repeaterPrefix,h=void 0===f?"":f;return o||u?this.mapRepeat(Object.assign(Object.assign({},e),{repeat:Object.assign(Object.assign({},o?{row:o}:{}),u?{column:u}:{}),spec:{repeat:{layer:s},spec:a}}),t):Object.assign(Object.assign({},i),{layer:s.map((function(e){var r=Object.assign(Object.assign({},l),{layer:e}),i=(a.name||"")+h+"child__layer_".concat(Bze(e)),o=n.mapLayerOrUnit(a,Object.assign(Object.assign({},t),{repeater:r,repeaterPrefix:i}));return o.name=i,o}))})}},{key:"mapNonLayerRepeat",value:function(e,t){var n,r=e,a=r.repeat,i=r.spec,o=r.data,u=ize(e,["repeat","spec","data"]);!qBe(a)&&e.columns&&(e=xze(e,["columns"]),Vje(yje("repeat")));var s,c=[],l=t.repeater,f=void 0===l?{}:l,h=t.repeaterPrefix,d=void 0===h?"":h,p=!qBe(a)&&a.row||[f?f.row:null],v=!qBe(a)&&a.column||[f?f.column:null],g=qBe(a)&&a||[f?f.repeat:null],m=(0,zt.Z)(g);try{for(m.s();!(s=m.n()).done;){var y,b=s.value,x=(0,zt.Z)(p);try{for(x.s();!(y=x.n()).done;){var w,k=y.value,_=(0,zt.Z)(v);try{for(_.s();!(w=_.n()).done;){var S=w.value,C={repeat:b,row:k,column:S,layer:f.layer},E=(i.name||"")+d+"child__"+(qBe(a)?"".concat(Bze(b)):(a.row?"row_".concat(Bze(k)):"")+(a.column?"column_".concat(Bze(S)):"")),A=this.map(i,Object.assign(Object.assign({},t),{repeater:C,repeaterPrefix:E}));A.name=E,c.push(xze(A,["data"]))}}catch(T){_.e(T)}finally{_.f()}}}catch(T){x.e(T)}finally{x.f()}}}catch(T){m.e(T)}finally{m.f()}var N=qBe(a)?e.columns:a.column?a.column.length:1;return Object.assign(Object.assign({data:null!==(n=i.data)&&void 0!==n?n:o,align:"all"},u),{columns:N,concat:c})}},{key:"mapFacet",value:function(e,t){return VWe(e.facet)&&e.columns&&(e=xze(e,["columns"]),Vje(yje("facet"))),(0,zy.Z)((0,Ly.Z)(n.prototype),"mapFacet",this).call(this,e,t)}},{key:"mapUnitWithParentEncodingOrProjection",value:function(e,t){var n=e.encoding,r=e.projection,a=t.parentEncoding,i=t.parentProjection,o=t.config,u=THe({parentProjection:i,projection:r}),s=NHe({parentEncoding:a,encoding:xHe(n,t.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},e),u?{projection:u}:{}),s?{encoding:s}:{}),{config:o})}},{key:"mapFacetedUnit",value:function(e,t){var n=e.encoding,r=n.row,a=n.column,i=n.facet,o=ize(n,["row","column","facet"]),u=e.mark,s=e.width,c=e.projection,l=e.height,f=e.view,h=e.selection,d=(e.encoding,ize(e,["mark","width","projection","height","view","selection","encoding"])),p=this.getFacetMappingAndLayout({row:r,column:a,facet:i},t),v=p.facetMapping,g=p.layout,m=xHe(o,t.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},d),g),{facet:v,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},s?{width:s}:{}),l?{height:l}:{}),f?{view:f}:{}),c?{projection:c}:{}),{mark:u,encoding:m}),h?{selection:h}:{})}),t)}},{key:"getFacetMappingAndLayout",value:function(e,t){var n,r=e.row,a=e.column,i=e.facet;if(r||a){i&&Vje((g=[].concat((0,$n.Z)(r?[jLe]:[]),(0,$n.Z)(a?[ULe]:[])),"Facet encoding dropped as ".concat(g.join(" and ")," ").concat(g.length>1?"are":"is"," also specified.")));for(var o={},u={},s=0,c=[jLe,ULe];s<c.length;s++){var l=c[s],f=e[l];if(f){f.align,f.center,f.spacing,f.columns;var h=ize(f,["align","center","spacing","columns"]);o[l]=h;for(var d=0,p=["align","center","spacing"];d<p.length;d++){var v=p[d];void 0!==f[v]&&(u[v]=null!==(n=u[v])&&void 0!==n?n:{},u[v][l]=f[v])}}}return{facetMapping:o,layout:u}}var g,m=i.align,y=i.center,b=i.spacing,x=i.columns;return{facetMapping:bHe(ize(i,["align","center","spacing","columns"]),t.repeater),layout:Object.assign(Object.assign(Object.assign(Object.assign({},m?{align:m}:{}),y?{center:y}:{}),b?{spacing:b}:{}),x?{columns:x}:{})}}},{key:"mapLayer",value:function(e,t){var r=t.parentEncoding,a=t.parentProjection,i=ize(t,["parentEncoding","parentProjection"]),o=e.encoding,u=e.projection,s=ize(e,["encoding","projection"]),c=Object.assign(Object.assign({},i),{parentEncoding:NHe({parentEncoding:r,encoding:o}),parentProjection:THe({parentProjection:a,projection:u})});return(0,zy.Z)((0,Ly.Z)(n.prototype),"mapLayer",this).call(this,s,c)}}]),n}(iHe);function NHe(e){var t,n=e.parentEncoding,r=e.encoding;if(n&&r){var a=Ize(n).reduce((function(e,t){return r[t]&&e.push(t),e}),[]);a.length>0&&Vje("Layer's shared ".concat((t=a).join(",")," channel ").concat(1===t.length?"is":"are"," overriden."))}var i=Object.assign(Object.assign({},null!==n&&void 0!==n?n:{}),null!==r&&void 0!==r?r:{});return Fze(i)?void 0:i}function THe(e){var t=e.parentProjection,n=e.projection;return t&&n&&Vje(function(e){var t=e.parentProjection,n=e.projection;return"Layer's shared projection ".concat(wze(t)," is overridden by a child projection ").concat(wze(n),".")}({parentProjection:t,projection:n})),null!==n&&void 0!==n?n:t}function MHe(e,t){void 0===t&&(t=Qqe(e.config));var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return DHe.map(e,{config:t})}(e,t),r=function(e,t,n){var r=t.width,a=t.height,i=MLe(e)||aHe(e),o={};i?"container"==r&&"container"==a?(o.type="fit",o.contains="padding"):"container"==r?(o.type="fit-x",o.contains="padding"):"container"==a&&(o.type="fit-y",o.contains="padding"):("container"==r&&(Vje(hje("width")),r=void 0),"container"==a&&(Vje(hje("height")),a=void 0));var u=Object.assign(Object.assign(Object.assign({type:"pad"},o),n?FHe(n.autosize):{}),FHe(e.autosize));"fit"!==u.type||i||(Vje(fje),u.type="pad");"container"==r&&"fit"!=u.type&&"fit-x"!=u.type&&Vje(dje("width"));"container"==a&&"fit"!=u.type&&"fit-y"!=u.type&&Vje(dje("height"));if(mze(u,{type:"pad"}))return;return u}(n,{width:e.width,height:e.height,autosize:e.autosize},t);return Object.assign(Object.assign({},n),r?{autosize:r}:{})}var DHe=new AHe;function FHe(e){return nze(e)?{type:e}:null!==e&&void 0!==e?e:{}}var IHe=["background","padding"];function OHe(e){return IHe.reduce((function(t,n){return e&&void 0!==e[n]&&(t[n]=e[n]),t}),{})}var RHe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,ud.Z)(this,e),this.explicit=t,this.implicit=n}return(0,sd.Z)(e,[{key:"clone",value:function(){return new e(yze(this.explicit),yze(this.implicit))}},{key:"combine",value:function(){return Object.assign(Object.assign({},this.explicit),this.implicit)}},{key:"get",value:function(e){return Xze(this.explicit[e],this.implicit[e])}},{key:"getWithExplicit",value:function(e){return void 0!==this.explicit[e]?{explicit:!0,value:this.explicit[e]}:void 0!==this.implicit[e]?{explicit:!1,value:this.implicit[e]}:{explicit:!1,value:void 0}}},{key:"setWithExplicit",value:function(e,t){void 0!==t.value&&this.set(e,t.value,t.explicit)}},{key:"set",value:function(e,t,n){return delete this[n?"implicit":"explicit"][e],this[n?"explicit":"implicit"][e]=t,this}},{key:"copyKeyFromSplit",value:function(e,t){void 0!==t.explicit[e]?this.set(e,t.explicit[e],!0):void 0!==t.implicit[e]&&this.set(e,t.implicit[e],!1)}},{key:"copyKeyFromObject",value:function(e,t){void 0!==t[e]&&this.set(e,t[e],!0)}},{key:"copyAll",value:function(e){var t,n=(0,zt.Z)(Ize(e.combine()));try{for(n.s();!(t=n.n()).done;){var r=t.value,a=e.getWithExplicit(r);this.setWithExplicit(r,a)}}catch(i){n.e(i)}finally{n.f()}}}]),e}();function ZHe(e){return{explicit:!0,value:e}}function BHe(e){return{explicit:!1,value:e}}function zHe(e){return function(t,n,r,a){var i=e(t.value,n.value);return i>0?t:i<0?n:LHe(t,n,r,a)}}function LHe(e,t,n,r){return e.explicit&&t.explicit&&Vje(function(e,t,n,r){return"Conflicting ".concat(t.toString(),' property "').concat(e.toString(),'" (').concat(wze(n)," and ").concat(wze(r),"). Using ").concat(wze(n),".")}(n,r,e.value,t.value)),e}function PHe(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:LHe;return void 0===e||void 0===e.value?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:mze(e.value,t.value)?e:a(e,t,n,r)}var jHe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,ud.Z)(this,n),(e=t.call(this,r,a)).explicit=r,e.implicit=a,e.parseNothing=i,e}return(0,sd.Z)(n,[{key:"clone",value:function(){var e=(0,zy.Z)((0,Ly.Z)(n.prototype),"clone",this).call(this);return e.parseNothing=this.parseNothing,e}}]),n}(RHe);function UHe(e){return"url"in e}function WHe(e){return"values"in e}function VHe(e){return"name"in e&&!UHe(e)&&!WHe(e)&&!qHe(e)}function qHe(e){return e&&(HHe(e)||GHe(e)||XHe(e))}function HHe(e){return"sequence"in e}function GHe(e){return"sphere"in e}function XHe(e){return"graticule"in e}var YHe="main",KHe="raw";function $He(e){return"filter"in e}function QHe(e){return"lookup"in e}function JHe(e){return"pivot"in e}function eGe(e){return"density"in e}function tGe(e){return"quantile"in e}function nGe(e){return"regression"in e}function rGe(e){return"loess"in e}function aGe(e){return"sample"in e}function iGe(e){return"window"in e}function oGe(e){return"joinaggregate"in e}function uGe(e){return"flatten"in e}function sGe(e){return"calculate"in e}function cGe(e){return"bin"in e}function lGe(e){return"impute"in e}function fGe(e){return"timeUnit"in e}function hGe(e){return"aggregate"in e}function dGe(e){return"stack"in e}function pGe(e){return"fold"in e}function vGe(e,t,n,r){var a=$We(t)&&t.condition,i=r(t);if(a){var o=$Be(a).map((function(t){var n=r(t),a=function(e){return e.selection}(t)?uKe(e,t.selection):cKe(e,t.test);return Object.assign({test:a},n)}));return(0,Ir.Z)({},n,[].concat((0,$n.Z)(o),(0,$n.Z)(void 0!==i?[i]:[])))}return void 0!==i?(0,Ir.Z)({},n,i):{}}function gGe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",n=e.encoding[t];return vGe(e,n,t,(function(t){return mGe(t,e.config)}))}function mGe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"datum";if(e){if(uVe(e))return zVe(e.value);if(iVe(e)){var r=SVe(e),a=r.format,i=r.formatType;return TWe({fieldOrDatumDef:e,format:a,formatType:i,expr:n,config:t})}}}function yGe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.encoding,r=e.markDef,a=e.config,i=e.stack,o=n.tooltip;if(qBe(o))return{tooltip:xGe({tooltip:o},i,a,t)};var u=t.reactiveGeom?"datum.datum":"datum";return vGe(e,o,"tooltip",(function(e){var o=mGe(e,a,u);if(o)return o;if(null!==e){var s=UVe("tooltip",r,a);return!0===s&&(s={content:"encoding"}),nze(s)?{value:s}:HBe(s)?"encoding"===s.content?xGe(n,i,a,t):{signal:u}:void 0}}))}function bGe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.reactiveGeom,i={},o=a?"datum.datum":"datum",u=[];function s(r,a){var s,c=ZPe(a),l=oVe(r)?r:Object.assign(Object.assign({},r),{type:e[c].type}),f=$Be(wVe(l,n,{allowDisabling:!1})).join(", ");if(VPe(a)){var h="x"===a?"x2":"y2",d=CVe(e[h]);if(ije(l.bin)&&d){var p=dVe(l,{expr:o}),v=dVe(d,{expr:o}),g=SVe(l);s=BWe(p,v,g.format,g.formatType,n),i[h]=!0}else if(t&&t.fieldChannel===a&&"normalize"===t.offset){var m=SVe(l);s=TWe({fieldOrDatumDef:l,format:m.format,formatType:m.formatType,expr:o,config:n,normalizeStack:!0}).signal}}s=null!==s&&void 0!==s?s:mGe(l,n,o).signal,u.push({channel:a,key:f,value:s})}tqe(e,(function(e,t){eVe(e)?s(e,t):QWe(e)&&s(e.condition,t)}));for(var c={},l=0,f=u;l<f.length;l++){var h=f[l],d=h.channel,p=h.key,v=h.value;i[d]||c[p]||(c[rze(p)]=v)}return c}function xGe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.reactiveGeom,i=bGe(e,t,n,{reactiveGeom:a}),o=Rze(i).map((function(e){var t=e.key,n=e.value;return"".concat(t,": ").concat(n)}));return o.length>0?{signal:"{".concat(o.join(", "),"}")}:void 0}function wGe(e){var t=UVe("aria",e.markDef,e.config);return!1===t?{}:Object.assign(Object.assign(Object.assign({},t?{aria:t}:{}),function(e){var t=e.mark,n=e.markDef,r=e.config;if(!1===r.aria)return{};var a=UVe("ariaRoleDescription",n,r);if(null!=a)return{ariaRoleDescription:{value:a}};return t in pUe?{}:{ariaRoleDescription:{value:t}}}(e)),function(e){var t=e.encoding,n=e.markDef,r=e.config,a=e.stack,i=t.description;if(i)return vGe(e,i,"description",(function(t){return mGe(t,e.config)}));var o=UVe("description",n,r);if(null!=o)return{description:zVe(o)};if(!1===r.aria)return{};var u=bGe(t,a,r);if(Fze(u))return;return{description:{signal:Rze(u).map((function(e){var t=e.key,n=e.value;return"".concat(t,' + ": " + (').concat(n,")")})).join(' + "; " + ')}}}(e))}function kGe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.markDef,a=t.encoding,i=t.config,o=n.vgChannel,u=n.defaultRef,s=n.defaultValue;void 0===u&&void 0!==(s=null!==s&&void 0!==s?s:UVe(e,r,i,{vgChannel:o,ignoreVgConfig:!0}))&&(u=zVe(s));var c=a[e];return vGe(t,c,null!==o&&void 0!==o?o:e,(function(n){return CWe({channel:e,channelDef:n,markDef:r,config:i,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:u})}))}function _Ge(e){var t,n,r,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{filled:void 0},o=e.markDef,u=e.encoding,s=e.config,c=o.type,l=null!==(t=i.filled)&&void 0!==t?t:UVe("filled",o,s),f=Sze(["bar","point","circle","square","geoshape"],c)?"transparent":void 0,h=null!==(r=null!==(n=UVe(!0===l?"color":void 0,o,s,{vgChannel:"fill"}))&&void 0!==n?n:s.mark[!0===l&&"color"])&&void 0!==r?r:f,d=null!==(a=UVe(!1===l?"color":void 0,o,s,{vgChannel:"stroke"}))&&void 0!==a?a:s.mark[!1===l&&"color"],p=l?"fill":"stroke",v=Object.assign(Object.assign({},h?{fill:zVe(h)}:{}),d?{stroke:zVe(d)}:{});return o.color&&(l?o.fill:o.stroke)&&Vje(_je("property",{fill:"fill"in o,stroke:"stroke"in o})),Object.assign(Object.assign(Object.assign(Object.assign({},v),kGe("color",e,{vgChannel:p,defaultValue:l?h:d})),kGe("fill",e,{defaultValue:u.fill?h:void 0})),kGe("stroke",e,{defaultValue:u.stroke?d:void 0}))}function SGe(e,t){var n=function(e){switch(e){case VLe:return"xOffset";case qLe:return"yOffset";case HLe:return"x2Offset";case GLe:return"y2Offset";case KLe:return"thetaOffset";case XLe:return"radiusOffset";case $Le:return"theta2Offset";case YLe:return"radius2Offset"}}(e),r=t[n];if(r)return r}function CGe(e,t,n){var r=n.defaultPos,a=n.vgChannel,i=n.isMidPoint,o=t.encoding,u=t.markDef,s=t.config,c=t.stack,l=o[e],f=o[zPe(e)],h=t.scaleName(e),d=t.getScaleComponent(e),p=SGe(e,u),v=EGe({model:t,defaultPos:r,channel:e,scaleName:h,scale:d}),g=!l&&VPe(e)&&(o.latitude||o.longitude)?{field:t.getName(e)}:function(e){var t=e.channel,n=e.channelDef,r=e.isMidPoint,a=e.scaleName,i=e.stack,o=e.offset,u=e.markDef,s=e.config;if(iVe(n)&&i&&t===i.fieldChannel){if(eVe(n)){var c=YWe({channel:t,fieldDef:n,isMidPoint:r,markDef:u,stack:i,config:s});if(void 0!==c)return SWe({scaleName:a,fieldOrDatumDef:n,startSuffix:"start",band:c,offset:o})}return _We(n,a,{suffix:"end"},{offset:o})}return bWe(e)}({channel:e,channelDef:l,channel2Def:f,markDef:u,config:s,isMidPoint:i,scaleName:h,scale:d,stack:c,offset:p,defaultRef:v});return g?(0,Ir.Z)({},a||e,g):void 0}function EGe(e){var t=e.model,n=e.defaultPos,r=e.channel,a=e.scaleName,i=e.scale,o=t.markDef,u=t.config;return function(){var e=ZPe(r),s=BPe(r),c=UVe(r,o,u,{vgChannel:s});if(void 0!==c)return EWe(r,c);switch(n){case"zeroOrMin":case"zeroOrMax":if(a){var l=i.get("type");if(Sze([zUe,UUe,WUe],l));else if(i.domainDefinitelyIncludesZero())return{scale:a,value:0}}if("zeroOrMin"===n)return"y"===e?{field:{group:"height"}}:{value:0};switch(e){case"radius":return{signal:"min(".concat(t.width.signal,",").concat(t.height.signal,")/2")};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":var f=t[LPe(r)];return Object.assign(Object.assign({},f),{mult:.5})}}}var AGe={left:"x",center:"xc",right:"x2"},NGe={top:"y",middle:"yc",bottom:"y2"};function TGe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"middle";if("radius"===e||"theta"===e)return BPe(e);var a="x"===e?"align":"baseline",i=UVe(a,t,n);return"x"===e?AGe[i||("top"===r?"left":"center")]:NGe[i||r]}function MGe(e,t,n){var r=n.defaultPos,a=n.defaultPos2;return n.range?DGe(e,t,{defaultPos:r,defaultPos2:a}):CGe(e,t,{defaultPos:r})}function DGe(e,t,n){var r=n.defaultPos,a=n.defaultPos2,i=t.markDef,o=t.config,u=zPe(e),s=LPe(e),c=function(e,t,n){var r,a=e.encoding,i=e.mark,o=e.markDef,u=e.stack,s=e.config,c=ZPe(n),l=LPe(n),f=BPe(n),h=a[c],d=e.scaleName(c),p=e.getScaleComponent(c),v=SGe(n in a||n in o?n:c,e.markDef);if(!h&&("x2"===n||"y2"===n)&&(a.latitude||a.longitude))return(0,Ir.Z)({},f,{field:e.getName(n)});var g=function(e){var t=e.channel,n=e.channelDef,r=e.channel2Def,a=e.markDef,i=e.config,o=e.scaleName,u=e.scale,s=e.stack,c=e.offset,l=e.defaultRef;if(iVe(n)&&s&&t.charAt(0)===s.fieldChannel.charAt(0))return _We(n,o,{suffix:"start"},{offset:c});return bWe({channel:t,channelDef:r,scaleName:o,scale:u,stack:s,markDef:a,config:i,offset:c,defaultRef:l})}({channel:n,channelDef:h,channel2Def:a[n],markDef:o,config:s,scaleName:d,scale:p,stack:u,offset:v,defaultRef:void 0});if(void 0!==g)return(0,Ir.Z)({},f,g);return FGe(n,o)||FGe(n,(r={},(0,Ir.Z)(r,n,VVe(n,o,s.style)),(0,Ir.Z)(r,l,VVe(l,o,s.style)),r))||FGe(n,s[i])||FGe(n,s.mark)||(0,Ir.Z)({},f,EGe({model:e,defaultPos:t,channel:n,scaleName:d,scale:p})())}(t,a,u),l=c[s]?TGe(e,i,o):BPe(e);return Object.assign(Object.assign({},CGe(e,t,{defaultPos:r,vgChannel:l})),c)}function FGe(e,t){var n=LPe(e),r=BPe(e);return void 0!==t[r]?(0,Ir.Z)({},r,EWe(e,t[r])):void 0!==t[e]?(0,Ir.Z)({},r,EWe(e,t[e])):t[n]?(0,Ir.Z)({},n,EWe(e,t[n])):void 0}function IGe(e,t,n){var r,a,i,o,u=e.config,s=e.encoding,c=e.markDef,l=e.stack,f=zPe(t),h=LPe(t),d=s[t],p=s[f],v=e.getScaleComponent(t),g=v?v.get("type"):void 0,m=e.scaleName(t),y=c.orient,b=null!==(a=null!==(r=s[h])&&void 0!==r?r:s.size)&&void 0!==a?a:UVe("size",c,u,{vgChannel:h}),x="bar"===n&&("x"===t?"vertical"===y:"horizontal"===y);if(eVe(d)&&(aje(d.bin)||ije(d.bin)||d.timeUnit&&!p)&&!b&&!oWe(g)){var w=YWe({channel:t,fieldDef:d,stack:l,markDef:c,config:u}),k=null===(i=e.component.axes[t])||void 0===i?void 0:i[0];return function(e){var t,n=e.fieldDef,r=e.fieldDef2,a=e.channel,i=e.band,o=e.scaleName,u=e.markDef,s=e.spacing,c=void 0===s?0:s,l=e.axisTranslate,f=e.reverse,h=e.config,d=zPe(a),p=BPe(a),v=BPe(d),g=SGe(a,u);if(aje(n.bin)||n.timeUnit)return t={},(0,Ir.Z)(t,v,RGe({channel:a,fieldDef:n,scaleName:o,markDef:u,band:(1-i)/2,offset:OGe(d,c,f,l,g),config:h})),(0,Ir.Z)(t,p,RGe({channel:a,fieldDef:n,scaleName:o,markDef:u,band:1-(1-i)/2,offset:OGe(a,c,f,l,g),config:h})),t;if(ije(n.bin)){var m,y,b=_We(n,o,{},{offset:OGe(d,c,f,l,g)});if(eVe(r))return m={},(0,Ir.Z)(m,v,b),(0,Ir.Z)(m,p,_We(r,o,{},{offset:OGe(a,c,f,l,g)})),m;if(oje(n.bin)&&n.bin.step)return y={},(0,Ir.Z)(y,v,b),(0,Ir.Z)(y,p,{signal:'scale("'.concat(o,'", ').concat(dVe(n,{expr:"datum"})," + ").concat(n.bin.step,")"),offset:OGe(a,c,f,l,g)}),y}return void Vje(Lje(d))}({fieldDef:d,fieldDef2:p,channel:t,markDef:c,scaleName:m,band:w,axisTranslate:null!==(o=null===k||void 0===k?void 0:k.get("translate"))&&void 0!==o?o:.5,spacing:VPe(t)?UVe("binSpacing",c,u):void 0,reverse:v.get("reverse"),config:u})}return(iVe(d)&&oWe(g)||x)&&!p?function(e,t,n,r){var a,i,o=r.markDef,u=r.encoding,s=r.config,c=r.stack,l=o.orient,f=r.scaleName(n),h=r.getScaleComponent(n),d=LPe(n),p=zPe(n),v="horizontal"===l&&"y"===n||"vertical"===l&&"x"===n,g=UVe(v?"size":d,o,s,{vgChannel:d});(u.size||void 0!==g)&&(v?i=kGe("size",r,{vgChannel:d,defaultValue:g}):Vje(function(e){return'Cannot apply size to non-oriented mark "'.concat(e,'".')}(o.type)));var m=null!==(a=iVe(t)?YWe({channel:n,fieldDef:t,markDef:o,stack:c,config:s}):void 0)&&void 0!==a?a:1;i=i||(0,Ir.Z)({},d,function(e,t,n,r,a,i){if(r){var o=r.get("type");if("point"===o||"band"===o){if(void 0!==a[e].discreteBandSize)return{value:a[e].discreteBandSize};if(o===GUe){var u=r.get("range");return fUe(u)&&tze(u.step)?{value:u.step-2}:{value:Vqe-2}}return{scale:n,band:i}}return{value:a[e].continuousBandSize}}var s=Uqe(a.view,t),c=Xze(a[e].discreteBandSize,s-2);return void 0!==c?{value:c}:void 0}(e,d,f,h,s,m));var y="band"!==(null===h||void 0===h?void 0:h.get("type"))||!("band"in i[d]),b=TGe(n,o,s,y?"middle":"top"),x=SGe(n,o),w=bWe({channel:n,channelDef:t,markDef:o,config:s,scaleName:f,scale:h,stack:c,offset:x,defaultRef:EGe({model:r,defaultPos:"mid",channel:n,scaleName:f,scale:h}),band:y?.5:(1-m)/2});if(d)return Object.assign((0,Ir.Z)({},b,w),i);var k,_=BPe(p),S=i[d],C=x?Object.assign(Object.assign({},S),{offset:x}):S;return k={},(0,Ir.Z)(k,b,w),(0,Ir.Z)(k,_,qBe(w)?[w[0],Object.assign(Object.assign({},w[1]),{offset:C})]:Object.assign(Object.assign({},w),{offset:C})),k}(n,d,t,e):DGe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function OGe(e,t,n,r,a){if(kPe(e))return 0;var i="x"===e||"y2"===e?-t/2:t/2;if(lUe(n)){var o=PVe(a);return{signal:"".concat(n.signal," ? ").concat(r-i).concat(o?"-"+o:""," : ").concat(r+i).concat(o?"+"+o:"")}}if(lUe(a)){var u=r+(n?-i:i);return{signal:"".concat(u||"").concat(n?" - ":u?" + ":"").concat(a.signal)}}return a=a||0,r+(n?-a-i:+a+i)}function RGe(e){var t=e.channel,n=e.fieldDef,r=e.scaleName,a=e.markDef,i=e.band,o=e.offset,u=e.config;return xWe({fieldDef:n,channel:t,markDef:a,ref:SWe({scaleName:r,fieldOrDatumDef:n,band:i,offset:o}),config:u})}var ZGe=new Set(["aria"]);function BGe(e,t){var n="include"===t.color?_Ge(e):{},r=n.fill,a=void 0===r?void 0:r,i=n.stroke,o=void 0===i?void 0:i;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},function(e,t){return dUe.reduce((function(n,r){return ZGe.has(r)||void 0===e[r]||"ignore"===t[r]||(n[r]=zVe(e[r])),n}),{})}(e.markDef,t)),zGe(e,"fill",a)),zGe(e,"stroke",o)),kGe("opacity",e)),kGe("fillOpacity",e)),kGe("strokeOpacity",e)),kGe("strokeWidth",e)),kGe("strokeDash",e)),yGe(e)),gGe(e,"href")),wGe(e))}function zGe(e,t,n){var r=e.config,a=e.mark;if("hide"===UVe("invalid",e.markDef,r)&&n&&!wLe(a)){var i=function(e,t){var n=t.invalid,r=void 0!==n&&n,a=t.channels.reduce((function(t,n){var r=e.getScaleComponent(n);if(r){var a=r.get("type"),i=e.vgField(n,{expr:"datum"});i&&uWe(a)&&(t[i]=!0)}return t}),{}),i=Ize(a);if(i.length>0){var o=r?"||":"&&";return i.map((function(e){return kWe(e,r)})).join(" ".concat(o," "))}return}(e,{invalid:!0,channels:$Pe});if(i)return(0,Ir.Z)({},t,[{test:i,value:null}].concat((0,$n.Z)($Be(n))))}return n?(0,Ir.Z)({},t,n):{}}function LGe(e){var t=e.config;if(UVe("invalid",e.markDef,t)){var n=function(e,t){var n=t.invalid,r=void 0!==n&&n,a=t.channels.reduce((function(t,n){var r=e.getScaleComponent(n);if(r){var a=r.get("type"),i=e.vgField(n,{expr:"datum"});i&&uWe(a)&&(t[i]=!0)}return t}),{}),i=Ize(a);if(i.length>0){var o=r?"||":"&&";return i.map((function(e){return kWe(e,r)})).join(" ".concat(o," "))}return}(e,{channels:WPe});if(n)return{defined:{signal:n}}}return{}}function PGe(e,t){if(void 0!==t)return(0,Ir.Z)({},e,zVe(t))}var jGe="voronoi",UGe={has:function(e){return"interval"!==e.type&&e.nearest},parse:function(e,t){if(t.events){var n,r=(0,zt.Z)(t.events);try{for(r.s();!(n=r.n()).done;){n.value.markname=e.getName(jGe)}}catch(a){r.e(a)}finally{r.f()}}},marks:function(e,t,n){var r=t.project.hasChannel,a=r.x,i=r.y,o=e.mark;if(wLe(o))return Vje('The "nearest" transform is not supported for '.concat(o," marks.")),n;var u={name:e.getName(jGe),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},yGe(e,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:a||!i?"datum.datum.x || 0":"0"},y:{expr:i||!a?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]},s=0,c=!1;return n.forEach((function(t,n){var r,a=null!==(r=t.name)&&void 0!==r?r:"";a===e.component.mark[0].name?s=n:a.indexOf(jGe)>=0&&(c=!0)})),c||n.splice(s+1,0,u),n}},WGe=UGe,VGe=function(){function e(t,n){(0,ud.Z)(this,e),this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}return(0,sd.Z)(e,[{key:"clone",value:function(){throw new Error("Cannot clone node")}},{key:"parent",get:function(){return this._parent},set:function(e){this._parent=e,e&&e.addChild(this)}},{key:"children",get:function(){return this._children}},{key:"numChildren",value:function(){return this._children.length}},{key:"addChild",value:function(e,t){this._children.indexOf(e)>-1?console.warn("Attempt to add the same child twice."):void 0!==t?this._children.splice(t,0,e):this._children.push(e)}},{key:"removeChild",value:function(e){var t=this._children.indexOf(e);return this._children.splice(t,1),t}},{key:"remove",value:function(){var e,t=this._parent.removeChild(this),n=(0,zt.Z)(this._children);try{for(n.s();!(e=n.n()).done;){var r=e.value;r._parent=this._parent,this._parent.addChild(r,t++)}}catch(a){n.e(a)}finally{n.f()}}},{key:"insertAsParentOf",value:function(e){var t=e.parent;t.removeChild(this),this.parent=t,e.parent=this}},{key:"swapWithParent",value:function(){var e,t=this._parent,n=t.parent,r=(0,zt.Z)(this._children);try{for(r.s();!(e=r.n()).done;){e.value.parent=t}}catch(a){r.e(a)}finally{r.f()}this._children=[],t.removeChild(this),t.parent.removeChild(t),this.parent=n,t.parent=this}}]),e}(),qGe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r,a,i){var o;return(0,ud.Z)(this,n),(o=t.call(this,e,r)).type=a,o.refCounts=i,o._source=o._name=r,o.refCounts&&!(o._name in o.refCounts)&&(o.refCounts[o._name]=0),o}return(0,sd.Z)(n,[{key:"clone",value:function(){var e=new this.constructor;return e.debugName="clone_"+this.debugName,e._source=this._source,e._name="clone_"+this._name,e.type=this.type,e.refCounts=this.refCounts,e.refCounts[e._name]=0,e}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){return new Set}},{key:"hash",value:function(){return void 0===this._hash&&(this._hash="Output ".concat(function(e){var t=++Yze;return e?String(e)+t:t}())),this._hash}},{key:"getSource",value:function(){return this.refCounts[this._name]++,this._source}},{key:"isRequired",value:function(){return!!this.refCounts[this._name]}},{key:"setSource",value:function(e){this._source=e}}]),n}(VGe),HGe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r){var a;return(0,ud.Z)(this,n),(a=t.call(this,e)).formula=r,a}return(0,sd.Z)(n,[{key:"clone",value:function(){return new n(null,yze(this.formula))}},{key:"merge",value:function(e){for(var t in this.formula=Object.assign({},this.formula),e.formula)this.formula[t]&&!e.formula[t].band||(this.formula[t]=e.formula[t]);var n,r=(0,zt.Z)(e.children);try{for(r.s();!(n=r.n()).done;){var a=n.value;e.removeChild(a),a.parent=this}}catch(i){r.e(i)}finally{r.f()}e.remove()}},{key:"producedFields",value:function(){return new Set(Oze(this.formula).map((function(e){return e.as})))}},{key:"dependentFields",value:function(){return new Set(Oze(this.formula).map((function(e){return e.field})))}},{key:"hash",value:function(){return"TimeUnit ".concat(kze(this.formula))}},{key:"assemble",value:function(){var e,t=[],n=(0,zt.Z)(Oze(this.formula));try{for(n.s();!(e=n.n()).done;){var r=e.value,a=r.field,i=r.as,o=sUe(r.timeUnit),u=o.unit,s=o.utc,c=ize(o,["unit","utc"]);t.push(Object.assign(Object.assign(Object.assign(Object.assign({field:Vze(a),type:"timeunit"},u?{units:aUe(u)}:{}),s?{timezone:"utc"}:{}),c),{as:[i,"".concat(i,"_end")]}))}}catch(l){n.e(l)}finally{n.f()}return t}}],[{key:"makeFromEncoding",value:function(e,t){var r=t.reduceFieldDef((function(e,n,r){var a=n.field,i=n.timeUnit,o=UQe(t)?t.encoding[zPe(r)]:void 0,u=UQe(t)&&KWe(r,n,o,t.stack,t.markDef,t.config);if(i){var s=dVe(n,{forAs:!0});e[kze({as:s,field:a,timeUnit:i})]=Object.assign({as:s,field:a,timeUnit:i},u?{band:!0}:{})}return e}),{});return Fze(r)?null:new n(e,r)}},{key:"makeFromTransform",value:function(e,t){var r=Object.assign({},t),a=r.timeUnit,i=ize(r,["timeUnit"]),o=sUe(a),u=Object.assign(Object.assign({},i),{timeUnit:o});return new n(e,(0,Ir.Z)({},kze(u),u))}}]),n}(VGe),GGe="_tuple_fields",XGe=(0,sd.Z)((function e(){(0,ud.Z)(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.items=n,this.hasChannel={},this.hasField={}})),YGe={has:function(){return!0},parse:function(e,t,n){var r,a,i,o=t.name,u=null!==(r=t.project)&&void 0!==r?r:t.project=new XGe,s={},c={},l=new Set,f=function(e,t){for(var n="visual"===t?e.channel:e.field,r=Bze("".concat(o,"_").concat(n)),a=1;l.has(r);a++)r=Bze("".concat(o,"_").concat(n,"_").concat(a));return l.add(r),(0,Ir.Z)({},t,r)};if(!n.fields&&!n.encodings){var h=e.config.selection[n.type];if(n.init){var d,p=(0,zt.Z)($Be(n.init));try{for(p.s();!(d=p.n()).done;){var v,g=d.value,m=(0,zt.Z)(Ize(g));try{for(m.s();!(v=m.n()).done;){var y=v.value;FPe[y]?(n.encodings||(n.encodings=[])).push(y):"interval"===n.type?(Vje('Interval selections should be initialized using "x" and/or "y" keys.'),n.encodings=h.encodings):(n.fields||(n.fields=[])).push(y)}}catch(I){m.e(I)}finally{m.f()}}}catch(I){p.e(I)}finally{p.f()}}else n.encodings=h.encodings,n.fields=h.fields}var b,x=(0,zt.Z)(null!==(a=n.fields)&&void 0!==a?a:[]);try{for(x.s();!(b=x.n()).done;){var w=b.value,k={type:"E",field:w};k.signals=Object.assign({},f(k,"data")),u.items.push(k),u.hasField[w]=k}}catch(I){x.e(I)}finally{x.f()}var _,S=(0,zt.Z)(null!==(i=n.encodings)&&void 0!==i?i:[]);try{for(S.s();!(_=S.n()).done;){var C=_.value,E=e.fieldDef(C);if(E){var A=E.field;if(E.aggregate){Vje(gje(C,E.aggregate));continue}if(!A){Vje(vje(C));continue}if(E.timeUnit){A=e.vgField(C);var N={timeUnit:E.timeUnit,as:A,field:E.field};c[kze(N)]=N}if(!s[A]){var T="E";if("interval"===t.type)uWe(e.getScaleComponent(C).get("type"))&&(T="R");else E.bin&&(T="R-RE");var M={field:A,channel:C,type:T};M.signals=Object.assign(Object.assign({},f(M,"data")),f(M,"visual")),u.items.push(s[A]=M),u.hasField[A]=u.hasChannel[C]=s[A]}}else Vje(vje(C))}}catch(I){S.e(I)}finally{S.f()}if(n.init){var D=function(e){return u.items.map((function(t){return void 0!==e[t.channel]?e[t.channel]:e[t.field]}))};if("interval"===n.type)t.init=D(n.init);else{var F=$Be(n.init);t.init=F.map(D)}}Fze(c)||(u.timeUnit=new HGe(null,c))},signals:function(e,t,n){var r=t.name+GGe,a=n.filter((function(e){return e.name===r}));return a.length>0?n:n.concat({name:r,value:t.project.items.map((function(e){e.signals,e.hasLegend;var t=ize(e,["signals","hasLegend"]);return t.field=Vze(t.field),t}))})}},KGe={has:function(e){return"single"===e.type&&"global"===e.resolve&&e.bind&&"scales"!==e.bind&&!Iqe(e.bind)},parse:function(e,t,n,r){r.on||delete t.events,r.clear||delete t.clear},topLevelSignals:function(e,t,n){var r=t.name,a=t.project,i=t.bind,o=t.init&&t.init[0],u=WGe.has(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return a.items.forEach((function(e,a){var s,c,l=Bze("".concat(r,"_").concat(e.field)),f=n.filter((function(e){return e.name===l}));f.length||n.unshift(Object.assign(Object.assign({name:l},o?{init:gXe(o[a])}:{value:null}),{on:t.events?[{events:t.events,update:"datum && item().mark.marktype !== 'group' ? ".concat(u,"[").concat(rze(e.field),"] : null")}]:[],bind:null!==(c=null!==(s=i[e.field])&&void 0!==s?s:i[e.channel])&&void 0!==c?c:i}))})),n},signals:function(e,t,n){var r=t.name,a=t.project,i=n.filter((function(e){return e.name===r+AXe}))[0],o=r+GGe,u=a.items.map((function(e){return Bze("".concat(r,"_").concat(e.field))})),s=u.map((function(e){return"".concat(e," !== null")})).join(" && ");return u.length&&(i.update="".concat(s," ? {fields: ").concat(o,", values: [").concat(u.join(", "),"]} : null")),delete i.value,delete i.on,n}},$Ge=KGe,QGe="_toggle",JGe={has:function(e){return"multi"===e.type&&!!e.toggle},signals:function(e,t,n){return n.concat({name:t.name+QGe,value:!1,on:[{events:t.events,update:t.toggle}]})},modifyExpr:function(e,t){var n=t.name+AXe,r=t.name+QGe;return"".concat(r," ? null : ").concat(n,", ")+("global"===t.resolve?"".concat(r," ? null : true, "):"".concat(r," ? null : {unit: ").concat(IXe(e),"}, "))+"".concat(r," ? ").concat(n," : null")}},eXe={has:function(e){return void 0!==e.clear&&!1!==e.clear},parse:function(e,t,n){n.clear&&(t.clear=nze(n.clear)?MBe(n.clear,"scope"):n.clear)},topLevelSignals:function(e,t,n){if($Ge.has(t)){var r,a=(0,zt.Z)(t.project.items);try{var i=function(){var e=r.value,a=n.findIndex((function(n){return n.name===Bze("".concat(t.name,"_").concat(e.field))}));-1!==a&&n[a].on.push({events:t.clear,update:"null"})};for(a.s();!(r=a.n()).done;)i()}catch(o){a.e(o)}finally{a.f()}}return n},signals:function(e,t,n){function r(e,r){-1!==e&&n[e].on&&n[e].on.push({events:t.clear,update:r})}if("interval"===t.type){var a,i=(0,zt.Z)(t.project.items);try{var o=function(){var e=a.value,t=n.findIndex((function(t){return t.name===e.signals.visual}));(r(t,"[0, 0]"),-1===t)&&r(n.findIndex((function(t){return t.name===e.signals.data})),"null")};for(i.s();!(a=i.n()).done;)o()}catch(s){i.e(s)}finally{i.f()}}else{var u=n.findIndex((function(e){return e.name===t.name+AXe}));r(u,"null"),JGe.has(t)&&r(u=n.findIndex((function(e){return e.name===t.name+QGe})),"false")}return n}},tXe={has:function(e){return"interval"===e.type&&"global"===e.resolve&&e.bind&&"scales"===e.bind},parse:function(e,t){var n,r=t.scales=[],a=(0,zt.Z)(t.project.items);try{for(a.s();!(n=a.n()).done;){var i=n.value,o=i.channel;if(QPe(o)){var u=e.getScaleComponent(o),s=u?u.get("type"):void 0;if(u&&uWe(s)){var c={selection:t.name,field:i.field};u.set("selectionExtent",c,!0),r.push(i)}else Vje("Scale bindings are currently only supported for scales with unbinned, continuous domains.")}}}catch(l){a.e(l)}finally{a.f()}},topLevelSignals:function(e,t,n){var r=t.scales.filter((function(e){return 0===n.filter((function(t){return t.name===e.signals.data})).length}));if(!e.parent||aXe(e)||0===r.length)return n;var a=n.filter((function(e){return e.name===t.name}))[0],i=a.update;if(i.indexOf(TXe)>=0)a.update="{".concat(r.map((function(e){return"".concat(rze(e.field),": ").concat(e.signals.data)})).join(", "),"}");else{var o,u=(0,zt.Z)(r);try{for(u.s();!(o=u.n()).done;){var s=o.value,c="".concat(rze(s.field),": ").concat(s.signals.data);i.indexOf(c)<0&&(i="".concat(i.substring(0,i.length-1),", ").concat(c,"}"))}}catch(l){u.e(l)}finally{u.f()}a.update=i}return n.concat(r.map((function(e){return{name:e.signals.data}})))},signals:function(e,t,n){if(e.parent&&!aXe(e)){var r,a=(0,zt.Z)(t.scales);try{var i=function(){var e=r.value,t=n.filter((function(t){return t.name===e.signals.data}))[0];t.push="outer",delete t.value,delete t.update};for(a.s();!(r=a.n()).done;)i()}catch(o){a.e(o)}finally{a.f()}}return n}},nXe=tXe;function rXe(e,t){var n=rze(e.scaleName(t));return"domain(".concat(n,")")}function aXe(e){var t;return e.parent&&qQe(e.parent)&&(null!==(t=!e.parent.parent)&&void 0!==t?t:aXe(e.parent.parent))}var iXe={has:function(e){var t="global"===e.resolve&&e.bind&&Iqe(e.bind),n=1===e.project.items.length&&e.project.items[0].field!==Dqe;return t&&!n&&Vje("Legend bindings are only supported for selections over an individual field or encoding channel."),t&&n},parse:function(e,t,n,r){var a;if(r.on||delete t.events,r.clear||delete t.clear,r.on||r.clear){var i,o='event.item && indexof(event.item.mark.role, "legend") < 0',u=(0,zt.Z)(t.events);try{for(u.s();!(i=u.n()).done;){var s=i.value;s.filter=$Be(null!==(a=s.filter)&&void 0!==a?a:[]),s.filter.indexOf(o)<0&&s.filter.push(o)}}catch(f){u.e(f)}finally{u.f()}}var c=Oqe(t.bind)?t.bind.legend:"click",l=nze(c)?MBe(c,"view"):$Be(c);t.bind={legend:{merge:l}}},topLevelSignals:function(e,t,n){var r,a=t.name,i=Oqe(t.bind)&&t.bind.legend,o=function(e){return function(t){var n=yze(t);return n.markname=e,n}},u=(0,zt.Z)(t.project.items);try{var s=function(){var e=r.value;if(!e.hasLegend)return"continue";var u="".concat(Bze(e.field),"_legend"),s="".concat(a,"_").concat(u),c=n.filter((function(e){return e.name===s}));if(0===c.length){var l=i.merge.map(o("".concat(u,"_symbols"))).concat(i.merge.map(o("".concat(u,"_labels")))).concat(i.merge.map(o("".concat(u,"_entries"))));n.unshift(Object.assign(Object.assign({name:s},t.init?{}:{value:null}),{on:[{events:l,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:"!event.item || !datum ? null : ".concat(s),force:!0}]}))}};for(u.s();!(r=u.n()).done;)s()}catch(c){u.e(c)}finally{u.f()}return n},signals:function(e,t,n){var r=t.name,a=t.project,i=n.find((function(e){return e.name===r+AXe})),o=r+GGe,u=a.items.filter((function(e){return e.hasLegend})).map((function(e){return Bze("".concat(r,"_").concat(Bze(e.field),"_legend"))})),s=u.map((function(e){return"".concat(e," !== null")})).join(" && "),c="".concat(s," ? {fields: ").concat(o,", values: [").concat(u.join(", "),"]} : null");t.events&&u.length>0?i.on.push({events:u.map((function(e){return{signal:e}})),update:c}):u.length>0&&(i.update=c,delete i.value,delete i.on);var l=n.find((function(e){return e.name===r+QGe})),f=Oqe(t.bind)&&t.bind.legend;return l&&(t.events?l.on.push(Object.assign(Object.assign({},l.on[0]),{events:f})):l.on[0].events=f),n}};var oXe="_translate_anchor",uXe="_translate_delta",sXe={has:function(e){return"interval"===e.type&&e.translate},signals:function(e,t,n){var r=t.name,a=nXe.has(t),i=r+oXe,o=t.project.hasChannel,u=o.x,s=o.y,c=MBe(t.translate,"scope");return a||(c=c.map((function(e){return e.between[0].markname=r+bXe,e}))),n.push({name:i,value:{},on:[{events:c.map((function(e){return e.between[0]})),update:"{x: x(unit), y: y(unit)"+(void 0!==u?", extent_x: "+(a?rXe(e,VLe):"slice(".concat(u.signals.visual,")")):"")+(void 0!==s?", extent_y: "+(a?rXe(e,qLe):"slice(".concat(s.signals.visual,")")):"")+"}"}]},{name:r+uXe,value:{},on:[{events:c,update:"{x: ".concat(i,".x - x(unit), y: ").concat(i,".y - y(unit)}")}]}),void 0!==u&&cXe(e,t,u,"width",n),void 0!==s&&cXe(e,t,s,"height",n),n}};function cXe(e,t,n,r,a){var i,o=t.name,u=o+oXe,s=o+uXe,c=n.channel,l=nXe.has(t),f=a.filter((function(e){return e.name===n.signals[l?"data":"visual"]}))[0],h=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(c),p=d.get("type"),v=l&&c===VLe?"-":"",g="".concat(u,".extent_").concat(c),m="".concat(v).concat(s,".").concat(c," / ")+(l?"".concat(h):"span(".concat(g,")")),y="".concat(l?"log"===p?"panLog":"pow"===p?"panPow":"panLinear":"panLinear","(").concat(g,", ").concat(m)+(l&&"pow"===p?", ".concat(null!==(i=d.get("exponent"))&&void 0!==i?i:1):"")+")";f.on.push({events:{signal:s},update:l?y:"clampRange(".concat(y,", 0, ").concat(h,")")})}var lXe="_zoom_anchor",fXe="_zoom_delta",hXe={has:function(e){return"interval"===e.type&&e.zoom},signals:function(e,t,n){var r=t.name,a=nXe.has(t),i=r+fXe,o=t.project.hasChannel,u=o.x,s=o.y,c=rze(e.scaleName(VLe)),l=rze(e.scaleName(qLe)),f=MBe(t.zoom,"scope");return a||(f=f.map((function(e){return e.markname=r+bXe,e}))),n.push({name:r+lXe,on:[{events:f,update:a?"{"+[c?"x: invert(".concat(c,", x(unit))"):"",l?"y: invert(".concat(l,", y(unit))"):""].filter((function(e){return!!e})).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:i,on:[{events:f,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==u&&dXe(e,t,u,"width",n),void 0!==s&&dXe(e,t,s,"height",n),n}};function dXe(e,t,n,r,a){var i,o=t.name,u=n.channel,s=nXe.has(t),c=a.filter((function(e){return e.name===n.signals[s?"data":"visual"]}))[0],l=e.getSizeSignalRef(r).signal,f=e.getScaleComponent(u),h=f.get("type"),d=s?rXe(e,u):c.name,p=o+fXe,v="".concat(o).concat(lXe,".").concat(u),g="".concat(s?"log"===h?"zoomLog":"pow"===h?"zoomPow":"zoomLinear":"zoomLinear","(").concat(d,", ").concat(v,", ").concat(p)+(s&&"pow"===h?", ".concat(null!==(i=f.get("exponent"))&&void 0!==i?i:1):"")+")";c.on.push({events:{signal:p},update:s?g:"clampRange(".concat(g,", 0, ").concat(l,")")})}var pXe=[YGe,JGe,nXe,iXe,sXe,hXe,$Ge,WGe,eXe];function vXe(e,t){var n,r=(0,zt.Z)(pXe);try{for(r.s();!(n=r.n()).done;){var a=n.value;a.has(e)&&t(a)}}catch(i){r.e(i)}finally{r.f()}}function gXe(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:WBe;if(qBe(e)){var r=e.map((function(e){return gXe(e,t,n)}));return t?"[".concat(r.join(", "),"]"):r}return qje(e)?n(t?$je(e):Jje(e)):t?n(JSON.stringify(e)):e}function mXe(e,t){return DXe(e,(function(n,r){t=r.marks?r.marks(e,n,t):t,vXe(n,(function(r){r.marks&&(t=r.marks(e,n,t))}))})),t}function yXe(e){return e.map((function(e){return e.on&&!e.on.length&&delete e.on,e}))}var bXe="_brush",xXe="_scale_trigger",wXe={signals:function(e,t){var n=t.name,r=n+GGe,a=nXe.has(t),i=[],o=[],u=[];if(t.translate&&!a){var s="!event.item || event.item.mark.name !== ".concat(rze(n+bXe));kXe(t,(function(e,t){var n,r=$Be(null!==(n=t.between[0].filter)&&void 0!==n?n:t.between[0].filter=[]);return r.indexOf(s)<0&&r.push(s),e}))}t.project.items.forEach((function(n,r){var a=n.channel;if(a===VLe||a===qLe){var s=t.init?t.init[r]:null,c=function(e,t,n,r){var a=n.channel,i=n.signals.visual,o=n.signals.data,u=nXe.has(t),s=rze(e.scaleName(a)),c=e.getScaleComponent(a),l=c?c.get("type"):void 0,f=function(e){return"scale(".concat(s,", ").concat(e,")")},h=e.getSizeSignalRef(a===VLe?"width":"height").signal,d="".concat(a,"(unit)"),p=kXe(t,(function(e,t){return[].concat((0,$n.Z)(e),[{events:t.between[0],update:"[".concat(d,", ").concat(d,"]")},{events:t,update:"[".concat(i,"[0], clamp(").concat(d,", 0, ").concat(h,")]")}])}));return p.push({events:{signal:t.name+xXe},update:uWe(l)?"[".concat(f("".concat(o,"[0]")),", ").concat(f("".concat(o,"[1]")),"]"):"[0, 0]"}),u?[{name:o,on:[]}]:[Object.assign(Object.assign({name:i},r?{init:gXe(r,!0,f)}:{value:[]}),{on:p}),Object.assign(Object.assign({name:o},r?{init:gXe(r)}:{}),{on:[{events:{signal:i},update:"".concat(i,"[0] === ").concat(i,"[1] ? null : invert(").concat(s,", ").concat(i,")")}]})]}(e,t,n,s),l=n.signals.data,f=n.signals.visual,h=rze(e.scaleName(a)),d=uWe(e.getScaleComponent(a).get("type"))?"+":"";i.push.apply(i,(0,$n.Z)(c)),o.push(l),u.push({scaleName:e.scaleName(a),expr:"(!isArray(".concat(l,") || ")+"(".concat(d,"invert(").concat(h,", ").concat(f,")[0] === ").concat(d).concat(l,"[0] && ")+"".concat(d,"invert(").concat(h,", ").concat(f,")[1] === ").concat(d).concat(l,"[1]))")})}else Vje("Interval selections only support x and y encoding channels.")})),a||i.push({name:n+xXe,value:{},on:[{events:u.map((function(e){return{scale:e.scaleName}})),update:u.map((function(e){return e.expr})).join(" && ")+" ? ".concat(n+xXe," : {}")}]});var c=t.init,l="unit: ".concat(IXe(e),", fields: ").concat(r,", values");return i.concat(Object.assign(Object.assign({name:n+AXe},c?{init:"{".concat(l,": ").concat(gXe(c),"}")}:{}),{on:[{events:[{signal:o.join(" || ")}],update:o.join(" && ")+" ? {".concat(l,": [").concat(o,"]} : null")}]}))},modifyExpr:function(e,t){return t.name+AXe+", "+("global"===t.resolve?"true":"{unit: ".concat(IXe(e),"}"))},marks:function(e,t,n){var r=t.name,a=t.project.hasChannel,i=a.x,o=a.y,u=i&&i.signals.visual,s=o&&o.signals.visual,c="data(".concat(rze(t.name+EXe),")");if(nXe.has(t))return n;var l={x:void 0!==i?{signal:"".concat(u,"[0]")}:{value:0},y:void 0!==o?{signal:"".concat(s,"[0]")}:{value:0},x2:void 0!==i?{signal:"".concat(u,"[1]")}:{field:{group:"width"}},y2:void 0!==o?{signal:"".concat(s,"[1]")}:{field:{group:"height"}}};if("global"===t.resolve){var f,h=(0,zt.Z)(Ize(l));try{for(h.s();!(f=h.n()).done;){var d=f.value;l[d]=[Object.assign({test:"".concat(c,".length && ").concat(c,"[0].unit === ").concat(IXe(e))},l[d]),{value:0}]}}catch(x){h.e(x)}finally{h.f()}}var p=t.mark,v=p.fill,g=p.fillOpacity,m=p.cursor,y=ize(p,["fill","fillOpacity","cursor"]),b=Ize(y).reduce((function(e,t){return e[t]=[{test:[void 0!==i&&"".concat(u,"[0] !== ").concat(u,"[1]"),void 0!==o&&"".concat(s,"[0] !== ").concat(s,"[1]")].filter((function(e){return e})).join(" && "),value:y[t]},{value:null}],e}),{});return[{name:r+bXe+"_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:v},fillOpacity:{value:g}},update:l}}].concat((0,$n.Z)(n),[{name:r+bXe,type:"rect",clip:!0,encode:{enter:Object.assign(Object.assign({},m?{cursor:{value:m}}:{}),{fill:{value:"transparent"}}),update:Object.assign(Object.assign({},l),b)}}])}};function kXe(e,t){return e.events.reduce((function(e,n){return n.between?t(e,n):(Vje("".concat(n," is not an ordered event stream for interval selections.")),e)}),[])}function _Xe(e,t){var n=t.name,r=n+GGe,a=t.project,i="(item().isVoronoi ? datum.datum : datum)",o=a.items.map((function(t){var n=e.fieldDef(t.channel);return n&&n.bin?"[".concat(i,"[").concat(rze(e.vgField(t.channel,{})),"], ")+"".concat(i,"[").concat(rze(e.vgField(t.channel,{binSuffix:"end"})),"]]"):"".concat(i,"[").concat(rze(t.field),"]")})).join(", "),u="unit: ".concat(IXe(e),", fields: ").concat(r,", values"),s=t.events;return[{name:n+AXe,on:s?[{events:s,update:"datum && item().mark.marktype !== 'group' ? {".concat(u,": [").concat(o,"]} : null"),force:!0}]:[]}]}var SXe={signals:_Xe,modifyExpr:function(e,t){return t.name+AXe+", "+("global"===t.resolve?"null":"{unit: ".concat(IXe(e),"}"))}},CXe={signals:_Xe,modifyExpr:function(e,t){return t.name+AXe+", "+("global"===t.resolve?"true":"{unit: ".concat(IXe(e),"}"))}},EXe="_store",AXe="_tuple",NXe="_modify",TXe="vlSelectionResolve",MXe={single:CXe,multi:SXe,interval:wXe};function DXe(e,t){var n=e.component.selection;if(n){var r,a=(0,zt.Z)(Oze(n));try{for(a.s();!(r=a.n()).done;){var i=r.value;if(!0===t(i,MXe[i.type]))break}}catch(o){a.e(o)}finally{a.f()}}}function FXe(e){for(var t=e.parent;t&&!WQe(t);)t=t.parent;return t}function IXe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{escape:!0},n=t.escape,r=n?rze(e.name):e.name,a=FXe(e);if(a){var i,o=a.facet,u=(0,zt.Z)(NPe);try{for(u.s();!(i=u.n()).done;){var s=i.value;o[s]&&(r+=" + '__facet_".concat(s,"_' + (facet[").concat(rze(a.vgField(s)),"])"))}}catch(c){u.e(c)}finally{u.f()}}return r}function OXe(e){var t=!1;return DXe(e,(function(e){t=t||e.project.items.some((function(e){return e.field===Dqe}))})),t}var RXe,ZXe,BXe,zXe,LXe,PXe="Property",jXe="ArrayExpression",UXe="BinaryExpression",WXe="CallExpression",VXe="ConditionalExpression",qXe="LogicalExpression",HXe="MemberExpression",GXe="ObjectExpression",XXe="UnaryExpression";function YXe(e){this.type=e}YXe.prototype.visit=function(e){var t,n,r;if(e(this))return 1;for(n=0,r=(t=function(e){switch(e.type){case jXe:return e.elements;case UXe:case qXe:return[e.left,e.right];case WXe:return[e.callee].concat(e.arguments);case VXe:return[e.test,e.consequent,e.alternate];case HXe:return[e.object,e.property];case GXe:return e.properties;case PXe:return[e.key,e.value];case XXe:return[e.argument];default:return[]}}(this)).length;n<r;++n)if(t[n].visit(e))return 1};(RXe={})[1]="Boolean",RXe[2]="<end>",RXe[3]="Identifier",RXe[4]="Keyword",RXe[5]="Null",RXe[6]="Numeric",RXe[7]="Punctuator",RXe[8]="String",RXe[9]="RegularExpression";var KXe="Identifier",$Xe="Unexpected token %0",QXe="Invalid regular expression",JXe="Invalid regular expression: missing /",eYe="Octal literals are not allowed in strict mode.",tYe="ILLEGAL",nYe="Disabled.",rYe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),aYe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function iYe(e,t){if(!e)throw new Error("ASSERT: "+t)}function oYe(e){return e>=48&&e<=57}function uYe(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function sYe(e){return"01234567".indexOf(e)>=0}function cYe(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function lYe(e){return 10===e||13===e||8232===e||8233===e}function fYe(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&rYe.test(String.fromCharCode(e))}function hYe(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&aYe.test(String.fromCharCode(e))}var dYe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function pYe(){for(var e;BXe<zXe&&(cYe(e=ZXe.charCodeAt(BXe))||lYe(e));)++BXe}function vYe(e){var t,n,r,a=0;for(n="u"===e?4:2,t=0;t<n;++t)BXe<zXe&&uYe(ZXe[BXe])?(r=ZXe[BXe++],a=16*a+"0123456789abcdef".indexOf(r.toLowerCase())):DYe({},$Xe,tYe);return String.fromCharCode(a)}function gYe(){var e,t,n,r;for(t=0,"}"===(e=ZXe[BXe])&&DYe({},$Xe,tYe);BXe<zXe&&uYe(e=ZXe[BXe++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&DYe({},$Xe,tYe),t<=65535?String.fromCharCode(t):(n=55296+(t-65536>>10),r=56320+(t-65536&1023),String.fromCharCode(n,r))}function mYe(){var e,t;for(e=ZXe.charCodeAt(BXe++),t=String.fromCharCode(e),92===e&&(117!==ZXe.charCodeAt(BXe)&&DYe({},$Xe,tYe),++BXe,(e=vYe("u"))&&"\\"!==e&&fYe(e.charCodeAt(0))||DYe({},$Xe,tYe),t=e);BXe<zXe&&hYe(e=ZXe.charCodeAt(BXe));)++BXe,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==ZXe.charCodeAt(BXe)&&DYe({},$Xe,tYe),++BXe,(e=vYe("u"))&&"\\"!==e&&hYe(e.charCodeAt(0))||DYe({},$Xe,tYe),t+=e);return t}function yYe(){var e,t;return e=BXe,t=92===ZXe.charCodeAt(BXe)?mYe():function(){var e,t;for(e=BXe++;BXe<zXe;){if(92===(t=ZXe.charCodeAt(BXe)))return BXe=e,mYe();if(!hYe(t))break;++BXe}return ZXe.slice(e,BXe)}(),{type:1===t.length?3:dYe.hasOwnProperty(t)?4:"null"===t?5:"true"===t||"false"===t?1:3,value:t,start:e,end:BXe}}function bYe(){var e,t,n,r,a=BXe,i=ZXe.charCodeAt(BXe),o=ZXe[BXe];switch(i){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++BXe,{type:7,value:String.fromCharCode(i),start:a,end:BXe};default:if(61===(e=ZXe.charCodeAt(BXe+1)))switch(i){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return BXe+=2,{type:7,value:String.fromCharCode(i)+String.fromCharCode(e),start:a,end:BXe};case 33:case 61:return BXe+=2,61===ZXe.charCodeAt(BXe)&&++BXe,{type:7,value:ZXe.slice(a,BXe),start:a,end:BXe}}}return">>>="===(r=ZXe.substr(BXe,4))?{type:7,value:r,start:a,end:BXe+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:7,value:n,start:a,end:BXe+=3}:o===(t=n.substr(0,2))[1]&&"+-<>&|".indexOf(o)>=0||"=>"===t?{type:7,value:t,start:a,end:BXe+=2}:"<>=!+-*%&|^/".indexOf(o)>=0?{type:7,value:o,start:a,end:++BXe}:void DYe({},$Xe,tYe)}function xYe(){var e,t,n;if(iYe(oYe((n=ZXe[BXe]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=BXe,e="","."!==n){if(e=ZXe[BXe++],n=ZXe[BXe],"0"===e){if("x"===n||"X"===n)return++BXe,function(e){for(var t="";BXe<zXe&&uYe(ZXe[BXe]);)t+=ZXe[BXe++];return 0===t.length&&DYe({},$Xe,tYe),fYe(ZXe.charCodeAt(BXe))&&DYe({},$Xe,tYe),{type:6,value:parseInt("0x"+t,16),start:e,end:BXe}}(t);if(sYe(n))return function(e){for(var t="0"+ZXe[BXe++];BXe<zXe&&sYe(ZXe[BXe]);)t+=ZXe[BXe++];return(fYe(ZXe.charCodeAt(BXe))||oYe(ZXe.charCodeAt(BXe)))&&DYe({},$Xe,tYe),{type:6,value:parseInt(t,8),octal:!0,start:e,end:BXe}}(t);n&&oYe(n.charCodeAt(0))&&DYe({},$Xe,tYe)}for(;oYe(ZXe.charCodeAt(BXe));)e+=ZXe[BXe++];n=ZXe[BXe]}if("."===n){for(e+=ZXe[BXe++];oYe(ZXe.charCodeAt(BXe));)e+=ZXe[BXe++];n=ZXe[BXe]}if("e"===n||"E"===n)if(e+=ZXe[BXe++],"+"!==(n=ZXe[BXe])&&"-"!==n||(e+=ZXe[BXe++]),oYe(ZXe.charCodeAt(BXe)))for(;oYe(ZXe.charCodeAt(BXe));)e+=ZXe[BXe++];else DYe({},$Xe,tYe);return fYe(ZXe.charCodeAt(BXe))&&DYe({},$Xe,tYe),{type:6,value:parseFloat(e),start:t,end:BXe}}function wYe(){var e,t,n,r;return LXe=null,pYe(),e=BXe,t=function(){var e,t,n,r;for(iYe("/"===(e=ZXe[BXe]),"Regular expression literal must start with a slash"),t=ZXe[BXe++],n=!1,r=!1;BXe<zXe;)if(t+=e=ZXe[BXe++],"\\"===e)lYe((e=ZXe[BXe++]).charCodeAt(0))&&DYe({},JXe),t+=e;else if(lYe(e.charCodeAt(0)))DYe({},JXe);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||DYe({},JXe),{value:t.substr(1,t.length-2),literal:t}}(),n=function(){var e,t,n;for(t="",n="";BXe<zXe&&hYe((e=ZXe[BXe]).charCodeAt(0));)++BXe,"\\"===e&&BXe<zXe?DYe({},$Xe,tYe):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&DYe({},QXe,n),{value:n,literal:t}}(),r=function(e,t){var n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(function(e,t){if(parseInt(t,16)<=1114111)return"x";DYe({},QXe)})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(r){DYe({},QXe)}try{return new RegExp(e,t)}catch(a){return null}}(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:BXe}}function kYe(){var e;return pYe(),BXe>=zXe?{type:2,start:BXe,end:BXe}:fYe(e=ZXe.charCodeAt(BXe))?yYe():40===e||41===e||59===e?bYe():39===e||34===e?function(){var e,t,n,r,a="",i=!1;for(iYe("'"===(e=ZXe[BXe])||'"'===e,"String literal must starts with a quote"),t=BXe,++BXe;BXe<zXe;){if((n=ZXe[BXe++])===e){e="";break}if("\\"===n)if((n=ZXe[BXe++])&&lYe(n.charCodeAt(0)))"\r"===n&&"\n"===ZXe[BXe]&&++BXe;else switch(n){case"u":case"x":"{"===ZXe[BXe]?(++BXe,a+=gYe()):a+=vYe(n);break;case"n":a+="\n";break;case"r":a+="\r";break;case"t":a+="\t";break;case"b":a+="\b";break;case"f":a+="\f";break;case"v":a+="\v";break;default:sYe(n)?(0!==(r="01234567".indexOf(n))&&(i=!0),BXe<zXe&&sYe(ZXe[BXe])&&(i=!0,r=8*r+"01234567".indexOf(ZXe[BXe++]),"0123".indexOf(n)>=0&&BXe<zXe&&sYe(ZXe[BXe])&&(r=8*r+"01234567".indexOf(ZXe[BXe++]))),a+=String.fromCharCode(r)):a+=n}else{if(lYe(n.charCodeAt(0)))break;a+=n}}return""!==e&&DYe({},$Xe,tYe),{type:8,value:a,octal:i,start:t,end:BXe}}():46===e?oYe(ZXe.charCodeAt(BXe+1))?xYe():bYe():oYe(e)?xYe():bYe()}function _Ye(){var e;return BXe=(e=LXe).end,LXe=kYe(),BXe=e.end,e}function SYe(){var e;e=BXe,LXe=kYe(),BXe=e}function CYe(e,t,n){var r=new YXe("||"===e||"&&"===e?"LogicalExpression":"BinaryExpression");return r.operator=e,r.left=t,r.right=n,r}function EYe(e,t){var n=new YXe("CallExpression");return n.callee=e,n.arguments=t,n}function AYe(e){var t=new YXe(KXe);return t.name=e,t}function NYe(e){var t=new YXe("Literal");return t.value=e.value,t.raw=ZXe.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function TYe(e,t,n){var r=new YXe("MemberExpression");return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function MYe(e,t,n){var r=new YXe("Property");return r.key=t,r.value=n,r.kind=e,r}function DYe(e,t){var n,r=Array.prototype.slice.call(arguments,2),a=t.replace(/%(\d)/g,(function(e,t){return iYe(t<r.length,"Message reference must be in range"),r[t]}));throw(n=new Error(a)).index=BXe,n.description=a,n}function FYe(e){2===e.type&&DYe(e,"Unexpected end of input"),6===e.type&&DYe(e,"Unexpected number"),8===e.type&&DYe(e,"Unexpected string"),3===e.type&&DYe(e,"Unexpected identifier"),4===e.type&&DYe(e,"Unexpected reserved word"),DYe(e,$Xe,e.value)}function IYe(e){var t=_Ye();7===t.type&&t.value===e||FYe(t)}function OYe(e){return 7===LXe.type&&LXe.value===e}function RYe(e){return 4===LXe.type&&LXe.value===e}function ZYe(){var e=[];for(BXe=LXe.start,IYe("[");!OYe("]");)OYe(",")?(_Ye(),e.push(null)):(e.push(XYe()),OYe("]")||IYe(","));return _Ye(),function(e){var t=new YXe("ArrayExpression");return t.elements=e,t}(e)}function BYe(){var e;return BXe=LXe.start,8===(e=_Ye()).type||6===e.type?(e.octal&&DYe(e,eYe),NYe(e)):AYe(e.value)}function zYe(){var e,t,n;return BXe=LXe.start,3===(e=LXe).type?(n=BYe(),IYe(":"),MYe("init",n,XYe())):2!==e.type&&7!==e.type?(t=BYe(),IYe(":"),MYe("init",t,XYe())):void FYe(e)}function LYe(){var e,t,n=[],r={},a=String;for(BXe=LXe.start,IYe("{");!OYe("}");)t="$"+((e=zYe()).key.type===KXe?e.key.name:a(e.key.value)),Object.prototype.hasOwnProperty.call(r,t)?DYe({},"Duplicate data property in object literal not allowed in strict mode"):r[t]=!0,n.push(e),OYe("}")||IYe(",");return IYe("}"),function(e){var t=new YXe("ObjectExpression");return t.properties=e,t}(n)}var PYe={if:1};function jYe(){var e,t,n;if(OYe("("))return function(){var e;return IYe("("),e=YYe(),IYe(")"),e}();if(OYe("["))return ZYe();if(OYe("{"))return LYe();if(e=LXe.type,BXe=LXe.start,3===e||PYe[LXe.value])n=AYe(_Ye().value);else if(8===e||6===e)LXe.octal&&DYe(LXe,eYe),n=NYe(_Ye());else{if(4===e)throw new Error(nYe);1===e?((t=_Ye()).value="true"===t.value,n=NYe(t)):5===e?((t=_Ye()).value=null,n=NYe(t)):OYe("/")||OYe("/=")?(n=NYe(wYe()),SYe()):FYe(_Ye())}return n}function UYe(){var e=[];if(IYe("("),!OYe(")"))for(;BXe<zXe&&(e.push(XYe()),!OYe(")"));)IYe(",");return IYe(")"),e}function WYe(){return IYe("."),function(){var e;return BXe=LXe.start,function(e){return 3===e.type||4===e.type||1===e.type||5===e.type}(e=_Ye())||FYe(e),AYe(e.value)}()}function VYe(){var e;return IYe("["),e=YYe(),IYe("]"),e}function qYe(){var e=function(){var e;for(e=jYe();;)if(OYe("."))e=TYe(".",e,WYe());else if(OYe("("))e=EYe(e,UYe());else{if(!OYe("["))break;e=TYe("[",e,VYe())}return e}();if(7===LXe.type&&(OYe("++")||OYe("--")))throw new Error(nYe);return e}function HYe(){var e,t;if(7!==LXe.type&&4!==LXe.type)t=qYe();else{if(OYe("++")||OYe("--"))throw new Error(nYe);if(OYe("+")||OYe("-")||OYe("~")||OYe("!"))e=_Ye(),t=HYe(),t=function(e,t){var n=new YXe("UnaryExpression");return n.operator=e,n.argument=t,n.prefix=!0,n}(e.value,t);else{if(RYe("delete")||RYe("void")||RYe("typeof"))throw new Error(nYe);t=qYe()}}return t}function GYe(e){var t=0;if(7!==e.type&&4!==e.type)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function XYe(){var e,t;return e=function(){var e,t,n,r,a,i,o,u,s,c;if(e=LXe,s=HYe(),0===(a=GYe(r=LXe)))return s;for(r.prec=a,_Ye(),t=[e,LXe],i=[s,r,o=HYe()];(a=GYe(LXe))>0;){for(;i.length>2&&a<=i[i.length-2].prec;)o=i.pop(),u=i.pop().value,s=i.pop(),t.pop(),n=CYe(u,s,o),i.push(n);(r=_Ye()).prec=a,i.push(r),t.push(LXe),n=HYe(),i.push(n)}for(n=i[c=i.length-1],t.pop();c>1;)t.pop(),n=CYe(i[c-1].value,i[c-2],n),c-=2;return n}(),OYe("?")&&(_Ye(),t=XYe(),IYe(":"),e=function(e,t,n){var r=new YXe("ConditionalExpression");return r.test=e,r.consequent=t,r.alternate=n,r}(e,t,XYe())),e}function YYe(){var e=XYe();if(OYe(","))throw new Error(nYe);return e}function KYe(e,t,n){return e.fields=t||[],e.fname=n,e}function $Ye(e){return 1===e.length?QYe(e[0]):JYe(e)}var QYe=function(e){return function(t){return t[e]}},JYe=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function eKe(e){throw Error(e)}function tKe(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n++),t=n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&c(),u=t=n+1):"]"===r&&(u||eKe("Access path missing open bracket: "+e),u>0&&c(),u=0,t=n+1):n>t?c():t=n+1}return u&&eKe("Access path missing closing bracket: "+e),o&&eKe("Access path missing closing quote: "+e),n>t&&(n++,c()),a}function nKe(e,t,n){var r=tKe(e);return e=1===r.length?r[0]:e,KYe((n&&n.get||$Ye)(r),[e],t||e)}nKe("id"),KYe((function(e){return e}),[],"identity"),KYe((function(){return 0}),[],"zero"),KYe((function(){return 1}),[],"one"),KYe((function(){return!0}),[],"true"),KYe((function(){return!1}),[],"false");Array.isArray;Object.prototype.hasOwnProperty;function rKe(e){var t=[];return"Identifier"===e.type?[e.name]:"Literal"===e.type?[e.value]:("MemberExpression"===e.type&&(t.push.apply(t,(0,$n.Z)(rKe(e.object))),t.push.apply(t,(0,$n.Z)(rKe(e.property)))),t)}function aKe(e){return"MemberExpression"===e.object.type?aKe(e.object):"datum"===e.object.name}function iKe(e){var t=function(e){BXe=0,zXe=(ZXe=e).length,LXe=null,SYe();var t=YYe();if(2!==LXe.type)throw new Error("Unexpect token after expression.");return t}(e),n=new Set;return t.visit((function(e){"MemberExpression"===e.type&&aKe(e)&&n.add(rKe(e).slice(1).join("."))})),n}var oKe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r,a){var i;return(0,ud.Z)(this,n),(i=t.call(this,e)).model=r,i.filter=a,i.expr=cKe(i.model,i.filter,(0,By.Z)(i)),i._dependentFields=iKe(i.expr),i}return(0,sd.Z)(n,[{key:"clone",value:function(){return new n(null,this.model,yze(this.filter))}},{key:"dependentFields",value:function(){return this._dependentFields}},{key:"producedFields",value:function(){return new Set}},{key:"assemble",value:function(){return{type:"filter",expr:this.expr}}},{key:"hash",value:function(){return"Filter ".concat(this.expr)}}]),n}(VGe);function uKe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"datum",a=[];function i(t){var i=Bze(t),o=e.getSelectionComponent(i,t),u=rze(i+EXe);if(o.project.timeUnit){var s=null!==n&&void 0!==n?n:e.component.data.raw,c=o.project.timeUnit.clone();s.parent?c.insertAsParentOf(s):s.parent=c}return"none"!==o.empty&&a.push(u),"vlSelectionTest(".concat(u,", ").concat(r)+("global"===o.resolve?")":", ".concat(rze(o.resolve),")"))}var o=zze(t,i);return(a.length?"!("+a.map((function(e){return"length(data(".concat(e,"))")})).join(" || ")+") || ":"")+"(".concat(o,")")}function sKe(e,t){var n=t.encoding,r=t.field;if(n||r){if(n&&!r){var a=e.project.items.filter((function(e){return e.channel===n}));!a.length||a.length>1?(r=e.project.items[0].field,Vje((a.length?"Multiple ":"No ")+"matching ".concat(rze(n)," encoding found for selection ").concat(rze(t.selection),". ")+'Using "field": '.concat(rze(r),"."))):r=a[0].field}}else r=e.project.items[0].field,e.project.items.length>1&&Vje('A "field" or "encoding" must be specified when using a selection as a scale domain. '+'Using "field": '.concat(rze(r),"."));return"".concat(e.name,"[").concat(rze(r),"]")}function cKe(e,t,n){return zze(t,(function(t){return nze(t)?t:function(e){return null===e||void 0===e?void 0:e.selection}(t)?uKe(e,t.selection,n):AUe(t)}))}function lKe(e,t){if(e)return qBe(e)&&!BVe(e)?e.map((function(e){return _Ve(e,t)})).join(", "):e}function fKe(e,t,n,r){var a,i,o;e.encode=null!==(a=e.encode)&&void 0!==a?a:{},e.encode[t]=null!==(i=e.encode[t])&&void 0!==i?i:{},e.encode[t].update=null!==(o=e.encode[t].update)&&void 0!==o?o:{},e.encode[t].update[n]=r}function hKe(e,t,n){var r,a,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{header:!1},o=e.combine(),u=o.disable,s=o.orient,c=o.scale,l=o.labelExpr,f=o.title,h=o.zindex,d=ize(o,["disable","orient","scale","labelExpr","title","zindex"]);if(!u){for(var p in d){var v=nLe[p],g=d[p];if(v&&v!==t&&"both"!==v)delete d[p];else if(eLe(g)){var m=g.condition,y=ize(g,["condition"]),b=$Be(m),x=Jze[p];if(x){var w=x.vgProp,k=x.part,_=[].concat((0,$n.Z)(b.map((function(e){var t=e.test,n=ize(e,["test"]);return Object.assign({test:cKe(null,t)},n)}))),[y]);fKe(d,k,w,_),delete d[p]}else if(null===x){var S={signal:b.map((function(e){var t=e.test,n=ize(e,["test"]);return"".concat(cKe(null,t)," ? ").concat(LVe(n)," : ")})).join("")+LVe(y)};d[p]=S}}else if(lUe(g)){var C=Jze[p];if(C){var E=C.vgProp,A=C.part;fKe(d,A,E,g),delete d[p]}}}if("grid"===t){if(!d.grid)return;if(d.encode){var N=d.encode.grid;d.encode=Object.assign({},N?{grid:N}:{}),Fze(d.encode)&&delete d.encode}return Object.assign(Object.assign({scale:c,orient:s},d),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Xze(h,0)})}if(i.header||!e.mainExtracted){if(void 0!==l){var T=l;(null===(a=null===(r=d.encode)||void 0===r?void 0:r.labels)||void 0===a?void 0:a.update)&&lUe(d.encode.labels.update.text)&&(T=qze(l,"datum.label",d.encode.labels.update.text.signal)),fKe(d,"labels","text",{signal:T})}if(null===d.labelAlign&&delete d.labelAlign,d.encode){var M,D=(0,zt.Z)(tLe);try{for(D.s();!(M=D.n()).done;){var F=M.value;e.hasAxisPart(F)||delete d.encode[F]}}catch(O){D.e(O)}finally{D.f()}Fze(d.encode)&&delete d.encode}var I=lKe(f,n);return Object.assign(Object.assign(Object.assign(Object.assign({scale:c,orient:s,grid:!1},I?{title:I}:{}),d),!1===n.aria?{aria:!1}:{}),{zindex:Xze(h,0)})}}}function dKe(e){var t,n=e.component.axes,r=[],a=(0,zt.Z)(WPe);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(n[i]){var o,u=(0,zt.Z)(n[i]);try{for(u.s();!(o=u.n()).done;){var s=o.value;if(!s.get("disable")&&!s.get("gridScale")){var c="x"===i?"height":"width",l=e.getSizeSignalRef(c).signal;c!==l&&r.push({name:c,update:l})}}}catch(f){u.e(f)}finally{u.f()}}}}catch(f){a.e(f)}finally{a.f()}return r}var pKe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},vKe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},gKe=Ize(pKe),mKe=Ize(vKe);function yKe(e,t,n,r){return Object.assign.apply(null,[{}].concat((0,$n.Z)(e.map((function(e){if("axisOrient"===e){var a,i="x"===n?"bottom":"left",o=t["x"===n?"axisBottom":"axisLeft"]||{},u=t["x"===n?"axisTop":"axisRight"]||{},s=new Set([].concat((0,$n.Z)(Ize(o)),(0,$n.Z)(Ize(u)))),c={},l=(0,zt.Z)(s.values());try{for(l.s();!(a=l.n()).done;){var f=a.value;c[f]={signal:"".concat(r.signal,' === "').concat(i,'" ? ').concat(PVe(o[f])," : ").concat(PVe(u[f]))}}}catch(h){l.e(h)}finally{l.f()}return c}return t[e]})))))}function bKe(e,t,n,r){var a="band"===t?["axisDiscrete","axisBand"]:"point"===t?["axisDiscrete","axisPoint"]:function(e){return e in nWe}(t)?["axisQuantitative"]:"time"===t||"utc"===t?["axisTemporal"]:[],i="x"===e?"axisX":"axisY",o=lUe(n)?"axisOrient":"axis"+Pze(n),u=[].concat(a,(0,$n.Z)(a.map((function(e){return i+e.substr(4)})))),s=["axis",o,i];return{vlOnlyAxisConfig:yKe(u,r,e,n),vgAxisConfig:yKe(s,r,e,n),axisConfigStyle:xKe([].concat(s,(0,$n.Z)(u)),r)}}function xKe(e,t){var n,r,a=[{}],i=(0,zt.Z)(e);try{for(i.s();!(r=i.n()).done;){var o=null===(n=t[r.value])||void 0===n?void 0:n.style;if(o){o=$Be(o);var u,s=(0,zt.Z)(o);try{for(s.s();!(u=s.n()).done;){var c=u.value;a.push(t.style[c])}}catch(l){s.e(l)}finally{s.f()}}}}catch(l){i.e(l)}finally{i.f()}return Object.assign.apply(null,a)}function wKe(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=qVe(e,n,t.style);if(void 0!==i)return{configFrom:"style",configValue:i};for(var o=0,u=["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"];o<u.length;o++){var s=u[o];if(void 0!==(null===(r=a[s])||void 0===r?void 0:r[e]))return{configFrom:s,configValue:a[s][e]}}return{}}var kKe={scale:function(e){var t=e.model,n=e.channel;return t.scaleName(n)},format:function(e){var t=e.fieldOrDatumDef,n=e.config,r=e.axis,a=r.format,i=r.formatType;return FWe(t,t.type,a,i,n,!0)},formatType:function(e){var t=e.axis,n=e.fieldOrDatumDef,r=e.scaleType,a=t.formatType;return IWe(a,n,r)},grid:function(e){var t,n=e.fieldOrDatumDef,r=e.axis,a=e.scaleType;return(!eVe(n)||!ije(n.bin))&&(null!==(t=r.grid)&&void 0!==t?t:function(e,t){return!oWe(e)&&eVe(t)&&!aje(null===t||void 0===t?void 0:t.bin)}(a,n))},gridScale:function(e){return function(e,t){var n="x"===t?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n);return}(e.model,e.channel)},labelAlign:function(e){var t=e.axis,n=e.labelAngle,r=e.orient,a=e.channel;return t.labelAlign||CKe(n,r,a)},labelAngle:function(e){return e.labelAngle},labelBaseline:function(e){var t=e.axis,n=e.labelAngle,r=e.orient,a=e.channel;return t.labelBaseline||SKe(n,r,a)},labelFlush:function(e){var t,n=e.axis,r=e.fieldOrDatumDef,a=e.channel;return null!==(t=n.labelFlush)&&void 0!==t?t:function(e,t){if("x"===t&&Sze(["quantitative","temporal"],e))return!0;return}(r.type,a)},labelOverlap:function(e){var t,n=e.axis,r=e.fieldOrDatumDef,a=e.scaleType;return null!==(t=n.labelOverlap)&&void 0!==t?t:function(e,t){if("nominal"!==e)return"log"!==t||"greedy";return}(r.type,a)},orient:function(e){return e.orient},tickCount:function(e){var t,n=e.channel,r=e.model,a=e.axis,i=e.fieldOrDatumDef,o=e.scaleType,u="x"===n?"width":"y"===n?"height":void 0,s=u?r.getSizeSignalRef(u):void 0;return null!==(t=a.tickCount)&&void 0!==t?t:function(e){var t,n=e.fieldOrDatumDef,r=e.scaleType,a=e.size;if(!e.values&&!oWe(r)&&"log"!==r){if(eVe(n)){if(aje(n.bin))return{signal:"ceil(".concat(a.signal,"/10)")};if(n.timeUnit&&Sze(["month","hours","day","quarter"],null===(t=sUe(n.timeUnit))||void 0===t?void 0:t.unit))return}return{signal:"ceil(".concat(a.signal,"/40)")}}return}({fieldOrDatumDef:i,scaleType:o,size:s,values:a.values})},title:function(e){var t=e.axis,n=e.model,r=e.channel;if(void 0!==t.title)return t.title;var a=EKe(n,r);if(void 0!==a)return a;var i=n.typedFieldDef(r),o="x"===r?"x2":"y2",u=n.fieldDef(o);return GVe(i?[GWe(i)]:[],eVe(u)?[GWe(u)]:[])},values:function(e){return function(e,t){var n=e.values;if(qBe(n))return OVe(t,n);if(lUe(n))return n;return}(e.axis,e.fieldOrDatumDef)},zindex:function(e){var t,n=e.axis,r=e.fieldOrDatumDef,a=e.mark;return null!==(t=n.zindex)&&void 0!==t?t:function(e,t){if("rect"===e&&pVe(t))return 1;return 0}(a,r)}};function _Ke(e){return"(((".concat(e.signal," % 360) + 360) % 360)")}function SKe(e,t,n,r){if(void 0!==e){if("x"===n){if(lUe(e)){var a=_Ke(e),i=lUe(t)?"(".concat(t.signal,' === "top")'):"top"===t;return{signal:"(45 < ".concat(a," && ").concat(a," < 135) || (225 < ").concat(a," && ").concat(a,' < 315) ? "middle" :')+"(".concat(a," <= 45 || 315 <= ").concat(a,") === ").concat(i,' ? "bottom" : "top"')}}if(45<e&&e<135||225<e&&e<315)return"middle";if(lUe(t)){var o=e<=45||315<=e?"===":"!==";return{signal:"".concat(t.signal," ").concat(o,' "top" ? "bottom" : "top"')}}return(e<=45||315<=e)===("top"===t)?"bottom":"top"}if(lUe(e)){var u=_Ke(e),s=lUe(t)?"(".concat(t.signal,' === "left")'):"left"===t,c=r?'"middle"':"null";return{signal:"".concat(u," <= 45 || 315 <= ").concat(u," || (135 <= ").concat(u," && ").concat(u," <= 225) ? ").concat(c," : (45 <= ").concat(u," && ").concat(u," <= 135) === ").concat(s,' ? "top" : "bottom"')}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(lUe(t)){var l=45<=e&&e<=135?"===":"!==";return{signal:"".concat(t.signal," ").concat(l,' "left" ? "top" : "bottom"')}}return(45<=e&&e<=135)===("left"===t)?"top":"bottom"}}function CKe(e,t,n){if(void 0!==e){var r="x"===n,a=r?0:90,i=r?"bottom":"left";if(lUe(e)){var o=_Ke(e),u=lUe(t)?"(".concat(t.signal,' === "').concat(i,'")'):t===i;return{signal:"(".concat(a?"("+o+" + 90)":o," % 180 === 0) ? ").concat(r?null:'"center"'," :")+"(".concat(a," < ").concat(o," && ").concat(o," < ").concat(180+a,") === ").concat(u,' ? "left" : "right"')}}if((e+a)%180===0)return r?null:"center";if(lUe(t)){var s=a<e&&e<180+a?"===":"!==",c="".concat(t.signal," ").concat(s,' "').concat(i,'"');return{signal:"".concat(c,' ? "left" : "right"')}}return(a<e&&e<180+a)===(t===i)?"left":"right"}}function EKe(e,t){var n="x"===t?"x2":"y2",r=e.fieldDef(t),a=e.fieldDef(n),i=r?r.title:void 0,o=a?a.title:void 0;return i&&o?XVe(i,o):i||(o||(void 0!==i?i:void 0!==o?o:void 0))}var AKe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r){var a;return(0,ud.Z)(this,n),(a=t.call(this,e)).transform=r,a._dependentFields=iKe(a.transform.calculate),a}return(0,sd.Z)(n,[{key:"clone",value:function(){return new n(null,yze(this.transform))}},{key:"producedFields",value:function(){return new Set([this.transform.as])}},{key:"dependentFields",value:function(){return this._dependentFields}},{key:"assemble",value:function(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}},{key:"hash",value:function(){return"Calculate ".concat(kze(this.transform))}}],[{key:"parseAllForSortIndex",value:function(e,t){return t.forEachFieldDef((function(t,r){if(sVe(t)&&WWe(t.sort)){var a=t.field,i=t.timeUnit,o=t.sort,u=o.map((function(e,t){return"".concat(AUe({field:a,timeUnit:i,equal:e})," ? ").concat(t," : ")})).join("")+o.length;e=new n(e,{calculate:u,as:NKe(t,r,{forAs:!0})})}})),e}}]),n}(VGe);function NKe(e,t,n){return dVe(e,Object.assign({prefix:t,suffix:"sort_index"},null!==n&&void 0!==n?n:{}))}function TKe(e,t){return Sze(["top","bottom"],t)?"column":Sze(["left","right"],t)||"row"===e?"row":"column"}function MKe(e,t,n,r){var a="row"===r?n.headerRow:"column"===r?n.headerColumn:n.headerFacet;return Xze(((null===t||void 0===t?void 0:t.header)||{})[e],a[e],n.header[e])}function DKe(e,t,n,r){var a,i={},o=(0,zt.Z)(e);try{for(o.s();!(a=o.n()).done;){var u=a.value,s=MKe(u,t,n,r);void 0!==s&&(i[u]=s)}}catch(c){o.e(c)}finally{o.f()}return i}var FKe=["row","column"],IKe=["header","footer"];function OKe(e,t){var n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,a=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,i=DKe(["titleAnchor","titleAngle","titleOrient"],a,r,t),o=i.titleAnchor,u=i.titleAngle,s=TKe(t,i.titleOrient),c=$ze(u);return{name:"".concat(t,"-title"),type:"group",role:"".concat(s,"-title"),title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:n},"row"===t?{orient:"left"}:{}),{style:"guide-title"}),ZKe(c,s)),RKe(s,c,o)),WKe(r,a,t,gKe,pKe))}}function RKe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"middle";switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}var r=CKe(t,"row"===e?"left":"top","row"===e?"y":"x");return r?{align:r}:{}}function ZKe(e,t){var n=SKe(e,"row"===t?"left":"top","row"===t?"y":"x",!0);return n?{baseline:n}:{}}function BKe(e,t){var n,r=e.component.layoutHeaders[t],a=[],i=(0,zt.Z)(IKe);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(r[o]){var u,s=(0,zt.Z)(r[o]);try{for(s.s();!(u=s.n()).done;){var c=PKe(e,t,o,r,u.value);null!=c&&a.push(c)}}catch(l){s.e(l)}finally{s.f()}}}}catch(l){i.e(l)}finally{i.f()}return a}function zKe(e,t){var n,r=e.sort;return UWe(r)?{field:dVe(r,{expr:"datum"}),order:null!==(n=r.order)&&void 0!==n?n:"ascending"}:qBe(r)?{field:NKe(e,t,{expr:"datum"}),order:"ascending"}:{field:dVe(e,{expr:"datum"}),order:null!==r&&void 0!==r?r:"ascending"}}function LKe(e,t,n){var r=DKe(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e,n,t),a=r.format,i=r.formatType,o=r.labelAngle,u=r.labelAnchor,s=r.labelOrient,c=r.labelExpr,l=TWe({fieldOrDatumDef:e,format:a,formatType:i,expr:"parent",config:n}).signal,f=TKe(t,s);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:c?qze(qze(c,"datum.label",l),"datum.value",dVe(e,{expr:"parent"})):l}},"row"===t?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),ZKe(o,f)),RKe(f,o,u)),WKe(n,e,t,mKe,vKe))}function PKe(e,t,n,r,a){if(a){var i=null,o=r.facetFieldDef,u=e.config?e.config:void 0;if(o&&a.labels){var s=DKe(["labelOrient"],o,u,t).labelOrient;("row"===t&&!Sze(["top","bottom"],s)||"column"===t&&!Sze(["left","right"],s))&&(i=LKe(o,t,u))}var c=WQe(e)&&!VWe(e.facet),l=a.axes,f=(null===l||void 0===l?void 0:l.length)>0;if(i||f){var h="row"===t?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName("".concat(t,"_").concat(n)),type:"group",role:"".concat(t,"-").concat(n)},r.facetFieldDef?{from:{data:e.getName(t+"_domain")},sort:zKe(o,t)}:{}),f&&c?{from:{data:e.getName("facet_domain_".concat(t))}}:{}),i?{title:i}:{}),a.sizeSignal?{encode:{update:(0,Ir.Z)({},h,a.sizeSignal)}}:{}),f?{axes:l}:{})}}return null}var jKe={column:{start:0,end:1},row:{start:1,end:0}};function UKe(e,t){return jKe[t][e]}function WKe(e,t,n,r,a){var i,o={},u=(0,zt.Z)(r);try{for(u.s();!(i=u.n()).done;){var s=i.value;if(a[s]){var c=MKe(s,t,e,n);void 0!==c&&(o[a[s]]=c)}}}catch(l){u.e(l)}finally{u.f()}return o}function VKe(e){return[].concat((0,$n.Z)(qKe(e,"width")),(0,$n.Z)(qKe(e,"height")),(0,$n.Z)(qKe(e,"childWidth")),(0,$n.Z)(qKe(e,"childHeight")))}function qKe(e,t){var n="width"===t?"x":"y",r=e.component.layoutSize.get(t);if(!r||"merged"===r)return[];var a=e.getSizeSignalRef(t).signal;if("step"===r){var i=e.getScaleComponent(n);if(i){var o=i.get("type"),u=i.get("range");if(oWe(o)&&fUe(u)){var s=e.scaleName(n);if(WQe(e.parent))if("independent"===e.parent.component.resolve.scale[n])return[HKe(s,u)];return[HKe(s,u),{name:a,update:GKe(s,i,"domain('".concat(s,"').length"))}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==r){var c=a.endsWith("width"),l=c?"containerSize()[0]":"containerSize()[1]",f=jqe(e.config.view,c?"width":"height"),h="isFinite(".concat(l,") ? ").concat(l," : ").concat(f);return[{name:a,init:h,on:[{update:h,events:"window:resize"}]}]}return[{name:a,value:r}]}function HKe(e,t){return{name:e+"_step",value:t.step}}function GKe(e,t,n){var r=t.get("type"),a=t.get("padding"),i=Xze(t.get("paddingOuter"),a),o=t.get("paddingInner");return o="band"===r?void 0!==o?o:a:1,"bandspace(".concat(n,", ").concat(o,", ").concat(i,") * ").concat(e,"_step")}function XKe(e){return"childWidth"===e?"width":"childHeight"===e?"height":e}function YKe(e,t){return Ize(e).reduce((function(n,r){var a=e[r];return Object.assign(Object.assign({},n),vGe(t,a,r,(function(e){return lUe(e)?e:{value:e.value}})))}),{})}function KKe(e,t){if(qQe(t)||WQe(t))return"shared";if(VQe(t))return VPe(e)?"independent":"shared";throw new Error("invalid model type for resolve")}function $Ke(e,t){var n=e.scale[t],r=VPe(t)?"axis":"legend";return"independent"===n?("shared"===e[r][t]&&Vje(function(e){return'Setting the scale to be independent for "'.concat(e,'" means we also have to set the guide (axis or legend) to be independent.')}(t)),"independent"):e[r][t]||"shared"}var QKe=Object.assign(Object.assign({},Mqe),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),JKe=Ize(QKe),e$e=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(){return(0,ud.Z)(this,n),t.apply(this,arguments)}return(0,sd.Z)(n)}(RHe),t$e={symbols:function(e,t){var n,r,a,i,o,u=t.fieldOrDatumDef,s=t.model,c=t.channel,l=t.legendCmpt;if("symbol"!==t.legendType)return;var f=s.markDef,h=s.encoding,d=s.config,p=s.mark,v=f.filled&&"trail"!==p,g=Object.assign(Object.assign({},function(e,t,n){var r,a=(0,zt.Z)(n);try{for(a.s();!(r=a.n()).done;){var i=r.value,o=WVe(i,t.markDef,t.config);void 0!==o&&(e[i]=zVe(o))}}catch(u){a.e(u)}finally{a.f()}return e}({},s,CLe)),_Ge(s,{filled:v})),m=null!==(n=n$e(h.opacity))&&void 0!==n?n:f.opacity;if(g.fill)if("fill"===c||v&&c===nPe)delete g.fill;else if(g.fill.field)l.get("symbolFillColor")?delete g.fill:(g.fill=zVe(null!==(r=d.legend.symbolBaseFillColor)&&void 0!==r?r:"black"),g.fillOpacity=zVe(null!==m&&void 0!==m?m:1));else if(qBe(g.fill)){var y=null!==(o=null!==(i=r$e(null!==(a=h.fill)&&void 0!==a?a:h.color))&&void 0!==i?i:f.fill)&&void 0!==o?o:v&&f.color;y&&(g.fill=zVe(y))}if(g.stroke)if("stroke"===c||!v&&c===nPe)delete g.stroke;else if(g.stroke.field)delete g.stroke;else if(qBe(g.stroke)){var b=Xze(r$e(h.stroke||h.color),f.stroke,v?f.color:void 0);b&&(g.stroke={value:b})}if(c!==sPe){var x=eVe(u)&&i$e(s,l,u);x?g.opacity=[Object.assign({test:x},zVe(null!==m&&void 0!==m?m:1)),zVe(d.legend.unselectedOpacity)]:m&&(g.opacity=zVe(m))}return Fze(g=Object.assign(Object.assign({},g),e))?void 0:g},gradient:function(e,t){var n=t.model;if("gradient"!==t.legendType)return;var r={},a=n$e(n.encoding.opacity)||n.markDef.opacity;a&&(r.opacity=zVe(a));return Fze(r=Object.assign(Object.assign({},r),e))?void 0:r},labels:function(e,t){var n=t.fieldOrDatumDef,r=t.model,a=t.channel,i=t.legendCmpt,o=r.legend(a)||{},u=r.config,s=eVe(n)?i$e(r,i,n):void 0,c=s?[{test:s,value:1},{value:u.legend.unselectedOpacity}]:void 0,l=o.format,f=o.formatType,h=AWe(f)?DWe({fieldOrDatumDef:n,field:"datum.value",format:l,formatType:f,config:u}):void 0,d=Object.assign(Object.assign(Object.assign({},c?{opacity:c}:{}),h?{text:h}:{}),e);return Fze(d)?void 0:d},entries:function(e,t){var n=t.legendCmpt.get("selections");return(null===n||void 0===n?void 0:n.length)?Object.assign(Object.assign({},e),{fill:{value:"transparent"}}):e}};function n$e(e){return a$e(e,(function(e,t){return Math.max(e,t.value)}))}function r$e(e){return a$e(e,(function(e,t){return Xze(e,t.value)}))}function a$e(e,t){return function(e){var t=e&&e.condition;return!!t&&(qBe(t)||uVe(t))}(e)?$Be(e.condition).reduce(t,e.value):uVe(e)?e.value:void 0}function i$e(e,t,n){var r=t.get("selections");if(null===r||void 0===r?void 0:r.length){var a=rze(n.field);return r.map((function(e){var t=rze(Bze(e)+EXe);return"(!length(data(".concat(t,")) || (").concat(e,"[").concat(a,"] && indexof(").concat(e,"[").concat(a,"], datum.value) >= 0))")})).join(" || ")}}var o$e={direction:function(e){return e.direction},format:function(e){var t=e.fieldOrDatumDef,n=e.legend,r=e.config,a=n.format,i=n.formatType;return FWe(t,t.type,a,i,r,!1)},formatType:function(e){var t=e.legend,n=e.fieldOrDatumDef,r=e.scaleType,a=t.formatType;return IWe(a,n,r)},gradientLength:function(e){var t,n,r=e.legend,a=e.legendConfig;return null!==(n=null!==(t=r.gradientLength)&&void 0!==t?t:a.gradientLength)&&void 0!==n?n:function(e){var t=e.legendConfig,n=e.model,r=e.direction,a=e.orient,i=e.scaleType,o=t.gradientHorizontalMaxLength,u=t.gradientHorizontalMinLength,s=t.gradientVerticalMaxLength,c=t.gradientVerticalMinLength;if(sWe(i))return"horizontal"===r?"top"===a||"bottom"===a?c$e(n,"width",u,o):u:c$e(n,"height",c,s);return}(e)},labelOverlap:function(e){var t,n,r=e.legend,a=e.legendConfig,i=e.scaleType;return null!==(n=null!==(t=r.labelOverlap)&&void 0!==t?t:a.labelOverlap)&&void 0!==n?n:function(e){if(Sze(["quantile","threshold","log"],e))return"greedy";return}(i)},symbolType:function(e){var t,n=e.legend,r=e.markDef,a=e.channel,i=e.encoding;return null!==(t=n.symbolType)&&void 0!==t?t:function(e,t,n,r){var a;if("shape"!==t){var i=null!==(a=r$e(n))&&void 0!==a?a:r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}(r.type,a,i.shape,r.shape)},title:function(e){return wVe(e.fieldOrDatumDef,e.config,{allowDisabling:!0})},type:function(e){var t=e.legendType,n=e.scaleType;if(EPe(e.channel)&&sWe(n)){if("gradient"===t)return}else if("symbol"===t)return;return t},values:function(e){var t=e.fieldOrDatumDef;return function(e,t){var n=e.values;if(qBe(n))return OVe(t,n);if(lUe(n))return n;return}(e.legend,t)}};function u$e(e){return Xze(e.legend.type,function(e){var t=e.channel,n=e.timeUnit,r=e.scaleType;if(EPe(t)){if(Sze(["quarter","month","day"],n))return"symbol";if(sWe(r))return"gradient"}return"symbol"}(e))}function s$e(e){var t,n,r=e.legendConfig,a=e.legendType,i=e.orient;return null!==(n=null!==(t=e.legend.direction)&&void 0!==t?t:r[a?"gradientDirection":"symbolDirection"])&&void 0!==n?n:function(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===t?"horizontal":void 0}}(i,a)}function c$e(e,t,n,r){var a=e.getSizeSignalRef(t).signal;return{signal:"clamp(".concat(a,", ").concat(n,", ").concat(r,")")}}function l$e(e){var t=UQe(e)?function(e){for(var t=e.encoding,n={},r=0,a=[nPe].concat((0,$n.Z)(Nqe));r<a.length;r++){var i=a[r],o=EVe(t[i]);o&&e.getScaleComponent(i)&&(i===iPe&&eVe(o)&&o.type===RUe||(n[i]=h$e(e,i)))}return n}(e):function(e){var t,n=e.component,r=n.legends,a=n.resolve,i=(0,zt.Z)(e.children);try{for(i.s();!(t=i.n()).done;){var o=t.value;l$e(o);var u,s=(0,zt.Z)(Ize(o.component.legends));try{for(s.s();!(u=s.n()).done;){var c=u.value;a.legend[c]=$Ke(e.component.resolve,c),"shared"===a.legend[c]&&(r[c]=d$e(r[c],o.component.legends[c]),r[c]||(a.legend[c]="independent",delete r[c]))}}catch(g){s.e(g)}finally{s.f()}}}catch(g){i.e(g)}finally{i.f()}var l,f=(0,zt.Z)(Ize(r));try{for(f.s();!(l=f.n()).done;){var h,d=l.value,p=(0,zt.Z)(e.children);try{for(p.s();!(h=p.n()).done;){var v=h.value;v.component.legends[d]&&("shared"===a.legend[d]&&delete v.component.legends[d])}}catch(g){p.e(g)}finally{p.f()}}}catch(g){f.e(g)}finally{f.f()}return r}(e);return e.component.legends=t,t}function f$e(e,t,n,r){switch(t){case"disable":return void 0!==n;case"values":return!!(null===n||void 0===n?void 0:n.values);case"title":if("title"===t&&e===(null===r||void 0===r?void 0:r.title))return!0}return e===(n||{})[t]}function h$e(e,t){var n,r,a,i=e.legend(t),o=e.markDef,u=e.encoding,s=e.config,c=s.legend,l=new e$e({},function(e,t){var n=e.scaleName(t);if("trail"===e.mark){if("color"===t)return{stroke:n};if("size"===t)return{strokeWidth:n}}return"color"===t?e.markDef.filled?{fill:n}:{stroke:n}:(0,Ir.Z)({},t,n)}(e,t));!function(e,t,n){var r,a=null===(r=e.fieldDef(t))||void 0===r?void 0:r.field;DXe(e,(function(e){var r,i,o=null!==(r=e.project.hasField[a])&&void 0!==r?r:e.project.hasChannel[t];if(o&&iXe.has(e)){var u=null!==(i=n.get("selections"))&&void 0!==i?i:[];u.push(e.name),n.set("selections",u,!1),o.hasLegend=!0}}))}(e,t,l);var f=void 0!==i?!i:c.disable;if(l.set("disable",f,void 0!==i),f)return l;i=i||{};var h,d=e.getScaleComponent(t).get("type"),p=EVe(u[t]),v=eVe(p)?null===(n=sUe(p.timeUnit))||void 0===n?void 0:n.unit:void 0,g=i.orient||s.legend.orient||"right",m=u$e({legend:i,channel:t,timeUnit:v,scaleType:d}),y={legend:i,channel:t,model:e,markDef:o,encoding:u,fieldOrDatumDef:p,legendConfig:c,config:s,scaleType:d,orient:g,legendType:m,direction:s$e({legend:i,legendType:m,orient:g,legendConfig:c})},b=(0,zt.Z)(JKe);try{for(b.s();!(h=b.n()).done;){var x=h.value,w=x in o$e?o$e[x](y):i[x];if(void 0!==w){var k=f$e(w,x,i,e.fieldDef(t));(k||void 0===s.legend[x])&&l.set(x,w,k)}}}catch(F){b.e(F)}finally{b.f()}for(var _=null!==(r=null===i||void 0===i?void 0:i.encoding)&&void 0!==r?r:{},S=l.get("selections"),C={},E={fieldOrDatumDef:p,model:e,channel:t,legendCmpt:l,legendType:m},A=0,N=["labels","legend","title","symbols","gradient","entries"];A<N.length;A++){var T=N[A],M=YKe(null!==(a=_[T])&&void 0!==a?a:{},e),D=T in t$e?t$e[T](M,E):M;void 0===D||Fze(D)||(C[T]=Object.assign(Object.assign(Object.assign({},(null===S||void 0===S?void 0:S.length)&&eVe(p)?{name:"".concat(Bze(p.field),"_legend_").concat(T)}:{}),(null===S||void 0===S?void 0:S.length)?{interactive:!!S}:{}),{update:D}))}return Fze(C)||l.set("encode",C,!!(null===i||void 0===i?void 0:i.encoding)),l}function d$e(e,t){var n,r,a,i;if(!e)return t.clone();var o=e.getWithExplicit("orient"),u=t.getWithExplicit("orient");if(!o.explicit||!u.explicit||o.value===u.value){var s,c=!1,l=(0,zt.Z)(JKe);try{var f=function(){var n=s.value,r=PHe(e.getWithExplicit(n),t.getWithExplicit(n),n,"legend",(function(e,t){switch(n){case"symbolType":return function(e,t){if("circle"===t.value)return t;return e}(e,t);case"title":return YVe(e,t);case"type":return c=!0,BHe("symbol")}return LHe(e,t,n,"legend")}));e.setWithExplicit(n,r)};for(l.s();!(s=l.n()).done;)f()}catch(h){l.e(h)}finally{l.f()}return c&&((null===(r=null===(n=e.implicit)||void 0===n?void 0:n.encode)||void 0===r?void 0:r.gradient)&&Lze(e.implicit,["encode","gradient"]),(null===(i=null===(a=e.explicit)||void 0===a?void 0:a.encode)||void 0===i?void 0:i.gradient)&&Lze(e.explicit,["encode","gradient"])),e}}function p$e(e,t,n,r){var a,i,o;e.encode=null!==(a=e.encode)&&void 0!==a?a:{},e.encode[t]=null!==(i=e.encode[t])&&void 0!==i?i:{},e.encode[t].update=null!==(o=e.encode[t].update)&&void 0!==o?o:{},e.encode[t].update[n]=r}function v$e(e){var t,n=e.component.legends,r={},a=(0,zt.Z)(Ize(n));try{for(a.s();!(t=a.n()).done;){var i=t.value,o=e.getScaleComponent(i),u=wze(o.get("domains"));if(r[u]){var s,c=(0,zt.Z)(r[u]);try{for(c.s();!(s=c.n()).done;){d$e(s.value,n[i])||r[u].push(n[i])}}catch(f){c.e(f)}finally{c.f()}}else r[u]=[n[i].clone()]}}catch(f){a.e(f)}finally{a.f()}var l=Oze(r).flat().map((function(t){return function(e,t){var n,r,a,i=e.combine(),o=i.disable,u=i.labelExpr,s=(i.selections,ize(i,["disable","labelExpr","selections"]));if(o)return;!1===t.aria&&void 0==s.aria&&(s.aria=!1);if(null===(n=s.encode)||void 0===n?void 0:n.symbols){var c=s.encode.symbols.update;!c.fill||"transparent"===c.fill.value||c.stroke||s.stroke||(c.stroke={value:"transparent"});var l,h=(0,zt.Z)(Nqe);try{for(h.s();!(l=h.n()).done;){var d=l.value;s[d]&&delete c[d]}}catch(f){h.e(f)}finally{h.f()}}s.title||delete s.title;if(void 0!==u){var p=u;(null===(a=null===(r=s.encode)||void 0===r?void 0:r.labels)||void 0===a?void 0:a.update)&&lUe(s.encode.labels.update.text)&&(p=qze(u,"datum.label",s.encode.labels.update.text.signal)),p$e(s,"labels","text",{signal:p})}for(var v in s){var g=s[v];if(lUe(g)){var m=Tqe[v];if(m){var y=m.vgProp;p$e(s,m.part,y,g),delete s[v]}}}return s}(t,e.config)})).filter((function(e){return void 0!==e}));return l}function g$e(e){return qQe(e)||VQe(e)?function(e){return e.children.reduce((function(e,t){return e.concat(t.assembleProjections())}),m$e(e))}(e):m$e(e)}function m$e(e){var t=e.component.projection;if(!t||t.merged)return[];var n=t.combine(),r=n.name;if(t.data){var a={signal:"[".concat(t.size.map((function(e){return e.signal})).join(", "),"]")},i=t.data.reduce((function(t,n){var r=lUe(n)?n.signal:"data('".concat(e.lookupDataSource(n),"')");return Sze(t,r)||t.push(r),t}),[]);if(i.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:r,size:a,fit:{signal:i.length>1?"[".concat(i.join(", "),"]"):i[0]}},n)]}return[Object.assign(Object.assign({name:r},{translate:{signal:"[width / 2, height / 2]"}}),n)]}var y$e=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"],b$e=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r,a,i){var o;return(0,ud.Z)(this,n),(o=t.call(this,Object.assign({},r),{name:e})).specifiedProjection=r,o.size=a,o.data=i,o.merged=!1,o}return(0,sd.Z)(n,[{key:"isFit",get:function(){return!!this.data}}]),n}(RHe);function x$e(e){e.component.projection=UQe(e)?function(e){var t;if(e.hasProjection){var n=e.specifiedProjection,r=!(n&&(null!=n.scale||null!=n.translate)),a=r?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=r?function(e){for(var t=[],n=e.encoding,r=0,a=[[JLe,QLe],[tPe,ePe]];r<a.length;r++){var i=a[r];(EVe(n[i[0]])||EVe(n[i[1]]))&&t.push({signal:e.getName("geojson_".concat(t.length))})}e.channelHasField(iPe)&&e.typedFieldDef(iPe).type===RUe&&t.push({signal:e.getName("geojson_".concat(t.length))});0===t.length&&t.push(e.requestDataName(YHe));return t}(e):void 0;return new b$e(e.projectionName(!0),Object.assign(Object.assign({},null!==(t=e.config.projection)&&void 0!==t?t:{}),null!==n&&void 0!==n?n:{}),a,i)}return}(e):function(e){if(0===e.children.length)return;var t,n,r=(0,zt.Z)(e.children);try{for(r.s();!(n=r.n()).done;){x$e(n.value)}}catch(h){r.e(h)}finally{r.f()}var a=Eze(e.children,(function(e){var n=e.component.projection;if(n){if(t){var r=function(e,t){var n=Eze(y$e,(function(n){return!JBe(e.explicit,n)&&!JBe(t.explicit,n)||!(!JBe(e.explicit,n)||!JBe(t.explicit,n)||wze(e.get(n))!==wze(t.get(n)))}));if(wze(e.size)===wze(t.size)){if(n)return e;if(wze(e.explicit)===wze({}))return t;if(wze(t.explicit)===wze({}))return e}return null}(t,n);return r&&(t=r),!!r}return t=n,!0}return!0}));if(t&&a){var i,o=e.projectionName(!0),u=new b$e(o,t.specifiedProjection,t.size,yze(t.data)),s=(0,zt.Z)(e.children);try{for(s.s();!(i=s.n()).done;){var c=i.value,l=c.component.projection;if(l){var f;if(l.isFit)(f=u.data).push.apply(f,(0,$n.Z)(c.component.projection.data));c.renameProjection(l.get("name"),o),l.merged=!0}}}catch(h){s.e(h)}finally{s.f()}return u}return}(e)}var w$e=n(4528);function k$e(e,t){return"".concat(rje(e),"_").concat(t)}function _$e(e,t,n){var r,a=k$e(null!==(r=MVe(n,void 0))&&void 0!==r?r:{},t);return e.getName("".concat(a,"_bins"))}function S$e(e,t,n){var r,a;r=function(e){return"as"in e}(e)?nze(e.as)?[e.as,"".concat(e.as,"_end")]:[e.as[0],e.as[1]]:[dVe(e,{forAs:!0}),dVe(e,{binSuffix:"end",forAs:!0})];var i=Object.assign({},MVe(t,void 0)),o=k$e(i,e.field),u=function(e,t){return{signal:e.getName("".concat(t,"_bins")),extentSignal:e.getName("".concat(t,"_extent"))}}(n,o),s=u.signal,c=u.extentSignal;if(uje(i.extent)){var l=i.extent,f=l.selection;a=sKe(n.getSelectionComponent(Bze(f),f),l),delete i.extent}return{key:o,binComponent:Object.assign(Object.assign(Object.assign({bin:i,field:e.field,as:[r]},s?{signal:s}:{}),c?{extentSignal:c}:{}),a?{span:a}:{})}}var C$e=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r){var a;return(0,ud.Z)(this,n),(a=t.call(this,e)).bins=r,a}return(0,sd.Z)(n,[{key:"clone",value:function(){return new n(null,yze(this.bins))}},{key:"merge",value:function(e,t){var n,r=(0,zt.Z)(Ize(e.bins));try{for(r.s();!(n=r.n()).done;){var a=n.value;a in this.bins?(t(e.bins[a].signal,this.bins[a].signal),this.bins[a].as=Nze([].concat((0,$n.Z)(this.bins[a].as),(0,$n.Z)(e.bins[a].as)),kze)):this.bins[a]=e.bins[a]}}catch(s){r.e(s)}finally{r.f()}var i,o=(0,zt.Z)(e.children);try{for(o.s();!(i=o.n()).done;){var u=i.value;e.removeChild(u),u.parent=this}}catch(s){o.e(s)}finally{o.f()}e.remove()}},{key:"producedFields",value:function(){return new Set(Oze(this.bins).map((function(e){return e.as})).flat(2))}},{key:"dependentFields",value:function(){return new Set(Oze(this.bins).map((function(e){return e.field})))}},{key:"hash",value:function(){return"Bin ".concat(kze(this.bins))}},{key:"assemble",value:function(){return Oze(this.bins).flatMap((function(e){var t=[],n=(0,w$e.Z)(e.as),r=n[0],a=n.slice(1),i=e.bin,o=i.extent,u=ize(i,["extent"]),s=Object.assign(Object.assign(Object.assign({type:"bin",field:Vze(e.field),as:r,signal:e.signal},uje(o)?{extent:null}:{extent:o}),e.span?{span:{signal:"span(".concat(e.span,")")}}:{}),u);!o&&e.extentSignal&&(t.push({type:"extent",field:Vze(e.field),signal:e.extentSignal}),s.extent={signal:e.extentSignal}),t.push(s);var c,l=(0,zt.Z)(a);try{for(l.s();!(c=l.n()).done;)for(var f=c.value,h=0;h<2;h++)t.push({type:"formula",expr:dVe({field:r[h]},{expr:"datum"}),as:f[h]})}catch(d){l.e(d)}finally{l.f()}return e.formula&&t.push({type:"formula",expr:e.formula,as:e.formulaAs}),t}))}}],[{key:"makeFromEncoding",value:function(e,t){var r=t.reduceFieldDef((function(e,n,r){if(oVe(n)&&aje(n.bin)){var a=S$e(n,n.bin,t),i=a.key,o=a.binComponent;e[i]=Object.assign(Object.assign(Object.assign({},o),e[i]),function(e,t,n,r){var a,i;if(RVe(t,n)){var o=UQe(e)&&null!==(i=null!==(a=e.axis(n))&&void 0!==a?a:e.legend(n))&&void 0!==i?i:{},u=dVe(t,{expr:"datum"}),s=dVe(t,{expr:"datum",binSuffix:"end"});return{formulaAs:dVe(t,{binSuffix:"range",forAs:!0}),formula:BWe(u,s,o.format,o.formatType,r)}}return{}}(t,n,r,t.config))}return e}),{});return Fze(r)?null:new n(e,r)}},{key:"makeFromTransform",value:function(e,t,r){var a=S$e(t,t.bin,r),i=a.key,o=a.binComponent;return new n(e,(0,Ir.Z)({},i,o))}}]),n}(VGe),E$e=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e){var r,a;if((0,ud.Z)(this,n),r=t.call(this,null),qHe(e=null!==e&&void 0!==e?e:{name:"source"})||(a=e.format?Object.assign({},xze(e.format,["parse"])):{}),WHe(e))r._data={values:e.values};else if(UHe(e)){if(r._data={url:e.url},!a.type){var i=/(?:\.([^.]+))?$/.exec(e.url)[1];Sze(["json","csv","tsv","dsv","topojson"],i)||(i="json"),a.type=i}}else GHe(e)?r._data={values:[{type:"Sphere"}]}:(VHe(e)||qHe(e))&&(r._data={});return r._generator=qHe(e),e.name&&(r._name=e.name),a&&!Fze(a)&&(r._data.format=a),r}return(0,sd.Z)(n,[{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){}},{key:"data",get:function(){return this._data}},{key:"hasName",value:function(){return!!this._name}},{key:"isGenerator",get:function(){return this._generator}},{key:"dataName",get:function(){return this._name},set:function(e){this._name=e}},{key:"parent",set:function(e){throw new Error("Source nodes have to be roots.")}},{key:"remove",value:function(){throw new Error("Source nodes are roots and cannot be removed.")}},{key:"hash",value:function(){throw new Error("Cannot hash sources")}},{key:"assemble",value:function(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}}]),n}(VGe);function A$e(e){var t,n=(0,zt.Z)(e);try{for(n.s();!(t=n.n()).done;){var r,a=t.value,i=(0,zt.Z)(a.children);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.parent!==a)return console.error("Dataflow graph is inconsistent.",a,o),!1}}catch(u){i.e(u)}finally{i.f()}if(!A$e(a.children))return!1}}catch(u){n.e(u)}finally{n.f()}return!0}var N$e=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r){var a;return(0,ud.Z)(this,n),(a=t.call(this,e)).params=r,a}return(0,sd.Z)(n,[{key:"clone",value:function(){return new n(null,this.params)}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){}},{key:"hash",value:function(){return"Graticule ".concat(kze(this.params))}},{key:"assemble",value:function(){return Object.assign({type:"graticule"},!0===this.params?{}:this.params)}}]),n}(VGe),T$e=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r){var a;return(0,ud.Z)(this,n),(a=t.call(this,e)).params=r,a}return(0,sd.Z)(n,[{key:"clone",value:function(){return new n(null,this.params)}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){var e;return new Set([null!==(e=this.params.as)&&void 0!==e?e:"data"])}},{key:"hash",value:function(){return"Hash ".concat(kze(this.params))}},{key:"assemble",value:function(){return Object.assign({type:"sequence"},this.params)}}]),n}(VGe);function M$e(e){return e instanceof E$e||e instanceof N$e||e instanceof T$e}var D$e=function(){function e(){(0,ud.Z)(this,e),this._mutated=!1}return(0,sd.Z)(e,[{key:"setMutated",value:function(){this._mutated=!0}},{key:"mutatedFlag",get:function(){return this._mutated}}]),e}(),F$e=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(){var e;return(0,ud.Z)(this,n),(e=t.call(this))._continue=!1,e}return(0,sd.Z)(n,[{key:"setContinue",value:function(){this._continue=!0}},{key:"continueFlag",get:function(){return this._continue}},{key:"flags",get:function(){return{continueFlag:this.continueFlag,mutatedFlag:this.mutatedFlag}},set:function(e){var t=e.continueFlag,n=e.mutatedFlag;t&&this.setContinue(),n&&this.setMutated()}},{key:"reset",value:function(){}},{key:"optimizeNextFromLeaves",value:function(e){if(M$e(e))return!1;var t=e.parent;return this.run(e).continueFlag&&this.optimizeNextFromLeaves(t),this.mutatedFlag}}]),n}(D$e),I$e=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(){return(0,ud.Z)(this,n),t.apply(this,arguments)}return(0,sd.Z)(n)}(D$e);function O$e(e,t,n,r){var a=UQe(r)?r.encoding[zPe(t)]:void 0;if(oVe(n)&&UQe(r)&&KWe(t,n,a,r.stack,r.markDef,r.config))e.add(dVe(n,{})),e.add(dVe(n,{suffix:"end"})),n.bin&&RVe(n,t)&&e.add(dVe(n,{binSuffix:"range"}));else if(function(e){return e in _Pe}(t)){var i=function(e){switch(e){case QLe:return"y";case ePe:return"y2";case JLe:return"x";case tPe:return"x2"}}(t);e.add(r.getName(i))}else e.add(dVe(n));return e}var R$e=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r,a){var i;return(0,ud.Z)(this,n),(i=t.call(this,e)).dimensions=r,i.measures=a,i}return(0,sd.Z)(n,[{key:"clone",value:function(){return new n(null,new Set(this.dimensions),yze(this.measures))}},{key:"groupBy",get:function(){return this.dimensions}},{key:"merge",value:function(e){return function(e,t){if(e.size!==t.size)return!1;var n,r=(0,zt.Z)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(!t.has(a))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(this.dimensions,e.dimensions)?(function(e,t){var n,r,a=(0,zt.Z)(Ize(t));try{for(a.s();!(r=a.n()).done;){var i,o=r.value,u=t[o],s=(0,zt.Z)(Ize(u));try{for(s.s();!(i=s.n()).done;){var c=i.value;o in e?e[o][c]=new Set([].concat((0,$n.Z)(null!==(n=e[o][c])&&void 0!==n?n:[]),(0,$n.Z)(u[c]))):e[o]=(0,Ir.Z)({},c,u[c])}}catch(l){s.e(l)}finally{s.f()}}}catch(l){a.e(l)}finally{a.f()}}(this.measures,e.measures),!0):(function(){var e;(e=jje).debug.apply(e,arguments)}("different dimensions, cannot merge"),!1)}},{key:"addDimensions",value:function(e){e.forEach(this.dimensions.add,this.dimensions)}},{key:"dependentFields",value:function(){return new Set([].concat((0,$n.Z)(this.dimensions),(0,$n.Z)(Ize(this.measures))))}},{key:"producedFields",value:function(){var e,t=new Set,n=(0,zt.Z)(Ize(this.measures));try{for(n.s();!(e=n.n()).done;){var r,a=e.value,i=(0,zt.Z)(Ize(this.measures[a]));try{for(i.s();!(r=i.n()).done;){var o=r.value,u=this.measures[a][o];0===u.size?t.add("".concat(o,"_").concat(a)):u.forEach(t.add,t)}}catch(s){i.e(s)}finally{i.f()}}}catch(s){n.e(s)}finally{n.f()}return t}},{key:"hash",value:function(){return"Aggregate ".concat(kze({dimensions:this.dimensions,measures:this.measures}))}},{key:"assemble",value:function(){var e,t=[],n=[],r=[],a=(0,zt.Z)(Ize(this.measures));try{for(a.s();!(e=a.n()).done;){var i,o=e.value,u=(0,zt.Z)(Ize(this.measures[o]));try{for(u.s();!(i=u.n()).done;){var s,c=i.value,l=(0,zt.Z)(this.measures[o][c]);try{for(l.s();!(s=l.n()).done;){var f=s.value;r.push(f),t.push(c),n.push("*"===o?null:Vze(o))}}catch(h){l.e(h)}finally{l.f()}}}catch(h){u.e(h)}finally{u.f()}}}catch(h){a.e(h)}finally{a.f()}return{type:"aggregate",groupby:(0,$n.Z)(this.dimensions).map(Vze),ops:t,fields:n,as:r}}}],[{key:"makeFromEncoding",value:function(e,t){var r=!1;t.forEachFieldDef((function(e){e.aggregate&&(r=!0)}));var a={},i=new Set;return r?(t.forEachFieldDef((function(e,n){var r,o,u,s,c=e.aggregate,l=e.field;if(c)if("count"===c)a["*"]=null!==(r=a["*"])&&void 0!==r?r:{},a["*"].count=new Set([dVe(e,{forAs:!0})]);else{if(OLe(c)||RLe(c)){var f=OLe(c)?"argmin":"argmax",h=c[f];a[h]=null!==(o=a[h])&&void 0!==o?o:{},a[h][f]=new Set([dVe({op:f,field:h},{forAs:!0})])}else a[l]=null!==(u=a[l])&&void 0!==u?u:{},a[l][c]=new Set([dVe(e,{forAs:!0})]);QPe(n)&&"unaggregated"===t.scaleDomain(n)&&(a[l]=null!==(s=a[l])&&void 0!==s?s:{},a[l].min=new Set([dVe({field:l,aggregate:"min"},{forAs:!0})]),a[l].max=new Set([dVe({field:l,aggregate:"max"},{forAs:!0})]))}else O$e(i,n,e,t)})),i.size+Ize(a).length===0?null:new n(e,i,a)):null}},{key:"makeFromTransform",value:function(e,t){var r,a,i,o,u=new Set,s={},c=(0,zt.Z)(t.aggregate);try{for(c.s();!(o=c.n()).done;){var l=o.value,f=l.op,h=l.field,d=l.as;f&&("count"===f?(s["*"]=null!==(r=s["*"])&&void 0!==r?r:{},s["*"].count=new Set([d||dVe(l,{forAs:!0})])):(s[h]=null!==(a=s[h])&&void 0!==a?a:{},s[h][f]=new Set([d||dVe(l,{forAs:!0})])))}}catch(m){c.e(m)}finally{c.f()}var p,v=(0,zt.Z)(null!==(i=t.groupby)&&void 0!==i?i:[]);try{for(v.s();!(p=v.n()).done;){var g=p.value;u.add(g)}}catch(m){v.e(m)}finally{v.f()}return u.size+Ize(s).length===0?null:new n(e,u,s)}}]),n}(VGe),Z$e=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r,a,i){var o;(0,ud.Z)(this,n),(o=t.call(this,e)).model=r,o.name=a,o.data=i;var u,s=(0,zt.Z)(NPe);try{for(s.s();!(u=s.n()).done;){var c=u.value,l=r.facet[c];if(l){var f=l.bin,h=l.sort;o[c]=Object.assign({name:r.getName("".concat(c,"_domain")),fields:[dVe(l)].concat((0,$n.Z)(aje(f)?[dVe(l,{binSuffix:"end"})]:[]))},UWe(h)?{sortField:h}:qBe(h)?{sortIndexField:NKe(l,c)}:{})}}}catch(d){s.e(d)}finally{s.f()}return o.childModel=r.child,o}return(0,sd.Z)(n,[{key:"hash",value:function(){var e,t="Facet",n=(0,zt.Z)(NPe);try{for(n.s();!(e=n.n()).done;){var r=e.value;this[r]&&(t+=" ".concat(r.charAt(0),":").concat(kze(this[r])))}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"fields",get:function(){var e,t,n=[],r=(0,zt.Z)(NPe);try{for(r.s();!(t=r.n()).done;){var a=t.value;(null===(e=this[a])||void 0===e?void 0:e.fields)&&n.push.apply(n,(0,$n.Z)(this[a].fields))}}catch(i){r.e(i)}finally{r.f()}return n}},{key:"dependentFields",value:function(){var e,t=new Set(this.fields),n=(0,zt.Z)(NPe);try{for(n.s();!(e=n.n()).done;){var r=e.value;this[r]&&(this[r].sortField&&t.add(this[r].sortField.field),this[r].sortIndexField&&t.add(this[r].sortIndexField))}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"producedFields",value:function(){return new Set}},{key:"getSource",value:function(){return this.name}},{key:"getChildIndependentFieldsWithStep",value:function(){var e,t={},n=(0,zt.Z)(WPe);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=this.childModel.component.scales[r];if(a&&!a.merged){var i=a.get("type"),o=a.get("range");if(oWe(i)&&fUe(o)){var u=wQe(kQe(this.childModel,r));u?t[r]=u:Vje("Unknown field for ".concat(r,". Cannot calculate view size."))}}}}catch(s){n.e(s)}finally{n.f()}return t}},{key:"assembleRowColumnHeaderData",value:function(e,t,n){var r={row:"y",column:"x"}[e],a=[],i=[],o=[];n&&n[r]&&(t?(a.push("distinct_".concat(n[r])),i.push("max")):(a.push(n[r]),i.push("distinct")),o.push("distinct_".concat(n[r])));var u=this[e],s=u.sortField,c=u.sortIndexField;if(s){var l=s.op,f=void 0===l?zWe:l,h=s.field;a.push(h),i.push(f),o.push(dVe(s,{forAs:!0}))}else c&&(a.push(c),i.push("max"),o.push(c));return{name:this[e].name,source:null!==t&&void 0!==t?t:this.data,transform:[Object.assign({type:"aggregate",groupby:this[e].fields},a.length?{fields:a,ops:i,as:o}:{})]}}},{key:"assembleFacetHeaderData",value:function(e){var t,n,r,a=this.model.layout.columns,i=this.model.component.layoutHeaders,o=[],u={},s=(0,zt.Z)(FKe);try{for(s.s();!(r=s.n()).done;){var c,l=r.value,f=(0,zt.Z)(IKe);try{for(f.s();!(c=f.n()).done;){var h,d=c.value,p=null!==(t=i[l]&&i[l][d])&&void 0!==t?t:[],v=(0,zt.Z)(p);try{for(v.s();!(h=v.n()).done;){if((null===(n=h.value.axes)||void 0===n?void 0:n.length)>0){u[l]=!0;break}}}catch(x){v.e(x)}finally{v.f()}}}catch(x){f.e(x)}finally{f.f()}if(u[l]){var g='length(data("'.concat(this.facet.name,'"))'),m="row"===l?a?{signal:"ceil(".concat(g," / ").concat(a,")")}:1:a?{signal:"min(".concat(g,", ").concat(a,")")}:{signal:g};o.push({name:"".concat(this.facet.name,"_").concat(l),transform:[{type:"sequence",start:0,stop:m}]})}}}catch(x){s.e(x)}finally{s.f()}var y=u.row,b=u.column;return(y||b)&&o.unshift(this.assembleRowColumnHeaderData("facet",null,e)),o}},{key:"assemble",value:function(){var e,t,n=[],r=null,a=this.getChildIndependentFieldsWithStep(),i=this.column,o=this.row,u=this.facet;if(i&&o&&(a.x||a.y)){r="cross_".concat(this.column.name,"_").concat(this.row.name);var s=[].concat(null!==(e=a.x)&&void 0!==e?e:[],null!==(t=a.y)&&void 0!==t?t:[]),c=s.map((function(){return"distinct"}));n.push({name:r,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:s,ops:c}]})}for(var l=0,f=[ULe,jLe];l<f.length;l++){var h=f[l];this[h]&&n.push(this.assembleRowColumnHeaderData(h,r,a))}if(u){var d=this.assembleFacetHeaderData(a);d&&n.push.apply(n,(0,$n.Z)(d))}return n}}]),n}(VGe);function B$e(e){return"'"===e[0]&&"'"===e[e.length-1]||'"'===e[0]&&'"'===e[e.length-1]?e.slice(1,-1):e}function z$e(e,t){var n=jze(e);if("number"===t)return"toNumber(".concat(n,")");if("boolean"===t)return"toBoolean(".concat(n,")");if("string"===t)return"toString(".concat(n,")");if("date"===t)return"toDate(".concat(n,")");if("flatten"===t)return n;if(0===t.indexOf("date:")){var r=B$e(t.slice(5,t.length));return"timeParse(".concat(n,",'").concat(r,"')")}if(0===t.indexOf("utc:")){var a=B$e(t.slice(4,t.length));return"utcParse(".concat(n,",'").concat(a,"')")}return Vje('Unrecognized parse "'.concat(t,'".')),null}function L$e(e){var t={};return vze(e.filter,(function(e){var n;if(SUe(e)){var r=null;gUe(e)?r=e.equal:wUe(e)?r=e.range[0]:kUe(e)&&(r=(null!==(n=e.oneOf)&&void 0!==n?n:e.in)[0]),r&&(qje(r)?t[e.field]="date":tze(r)?t[e.field]="number":nze(r)&&(t[e.field]="string")),e.timeUnit&&(t[e.field]="date")}})),t}function P$e(e){var t={};function n(e){var n;FVe(e)?t[e.field]="date":"quantitative"===e.type&&(nze(n=e.aggregate)&&Sze(["min","max"],n))?t[e.field]="number":Gze(e.field)>1?e.field in t||(t[e.field]="flatten"):sVe(e)&&UWe(e.sort)&&Gze(e.sort.field)>1&&(e.sort.field in t||(t[e.sort.field]="flatten"))}if((UQe(e)||WQe(e))&&e.forEachFieldDef((function(t,r){if(oVe(t))n(t);else{var a=ZPe(r),i=e.fieldDef(a);n(Object.assign(Object.assign({},t),{type:i.type}))}})),UQe(e)){var r=e.mark,a=e.markDef,i=e.encoding;if(wLe(r)&&!e.encoding.order){var o=i["horizontal"===a.orient?"y":"x"];eVe(o)&&"quantitative"===o.type&&!(o.field in t)&&(t[o.field]="number")}}return t}var j$e=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r){var a;return(0,ud.Z)(this,n),(a=t.call(this,e))._parse=r,a}return(0,sd.Z)(n,[{key:"clone",value:function(){return new n(null,yze(this._parse))}},{key:"hash",value:function(){return"Parse ".concat(kze(this._parse))}},{key:"parse",get:function(){return this._parse}},{key:"merge",value:function(e){this._parse=Object.assign(Object.assign({},this._parse),e.parse),e.remove()}},{key:"assembleFormatParse",value:function(){var e,t={},n=(0,zt.Z)(Ize(this._parse));try{for(n.s();!(e=n.n()).done;){var r=e.value,a=this._parse[r];1===Gze(r)&&(t[r]=a)}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"producedFields",value:function(){return new Set(Ize(this._parse))}},{key:"dependentFields",value:function(){return new Set(Ize(this._parse))}},{key:"assembleTransforms",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Ize(this._parse).filter((function(e){return!t||Gze(e)>1})).map((function(t){var n=z$e(t,e._parse[t]);return n?{type:"formula",expr:n,as:Hze(t)}:null})).filter((function(e){return null!==e}))}}],[{key:"makeExplicit",value:function(e,t,n){var r={},a=t.data;return!qHe(a)&&a&&a.format&&a.format.parse&&(r=a.format.parse),this.makeWithAncestors(e,r,{},n)}},{key:"makeWithAncestors",value:function(e,t,r,a){var i,o=(0,zt.Z)(Ize(r));try{for(o.s();!(i=o.n()).done;){var u=i.value,s=a.getWithExplicit(u);void 0!==s.value&&(s.explicit||s.value===r[u]||"derived"===s.value||"flatten"===r[u]?delete r[u]:Vje(bje(u,r[u],s.value)))}}catch(b){o.e(b)}finally{o.f()}var c,l=(0,zt.Z)(Ize(t));try{for(l.s();!(c=l.n()).done;){var f=c.value,h=a.get(f);void 0!==h&&(h===t[f]?delete t[f]:Vje(bje(f,t[f],h)))}}catch(b){l.e(b)}finally{l.f()}var d=new RHe(t,r);a.copyAll(d);var p,v={},g=(0,zt.Z)(Ize(d.combine()));try{for(g.s();!(p=g.n()).done;){var m=p.value,y=d.get(m);null!==y&&(v[m]=y)}}catch(b){g.e(b)}finally{g.f()}return 0===Ize(v).length||a.parseNothing?null:new n(e,v)}}]),n}(VGe),U$e=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e){return(0,ud.Z)(this,n),t.call(this,e)}return(0,sd.Z)(n,[{key:"clone",value:function(){return new n(null)}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){return new Set([Dqe])}},{key:"hash",value:function(){return"Identifier"}},{key:"assemble",value:function(){return{type:"identifier",as:Dqe}}}]),n}(VGe),W$e=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r){var a;return(0,ud.Z)(this,n),(a=t.call(this,e)).transform=r,a}return(0,sd.Z)(n,[{key:"clone",value:function(){return new n(null,yze(this.transform))}},{key:"addDimensions",value:function(e){this.transform.groupby=Nze(this.transform.groupby.concat(e),(function(e){return e}))}},{key:"dependentFields",value:function(){var e=new Set;return this.transform.groupby&&this.transform.groupby.forEach(e.add,e),this.transform.joinaggregate.map((function(e){return e.field})).filter((function(e){return void 0!==e})).forEach(e.add,e),e}},{key:"producedFields",value:function(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}},{key:"getDefaultName",value:function(e){var t;return null!==(t=e.as)&&void 0!==t?t:dVe(e)}},{key:"hash",value:function(){return"JoinAggregateTransform ".concat(kze(this.transform))}},{key:"assemble",value:function(){var e,t=[],n=[],r=[],a=(0,zt.Z)(this.transform.joinaggregate);try{for(a.s();!(e=a.n()).done;){var i=e.value;n.push(i.op),r.push(this.getDefaultName(i)),t.push(void 0===i.field?null:i.field)}}catch(u){a.e(u)}finally{a.f()}var o=this.transform.groupby;return Object.assign({type:"joinaggregate",as:r,ops:n,fields:t},void 0!==o?{groupby:o}:{})}}]),n}(VGe);var V$e=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r){var a;return(0,ud.Z)(this,n),(a=t.call(this,e))._stack=r,a}return(0,sd.Z)(n,[{key:"clone",value:function(){return new n(null,yze(this._stack))}},{key:"stack",get:function(){return this._stack}},{key:"addDimensions",value:function(e){var t;(t=this._stack.facetby).push.apply(t,(0,$n.Z)(e))}},{key:"dependentFields",value:function(){var e=new Set;return e.add(this._stack.stackField),this.getGroupbyFields().forEach(e.add,e),this._stack.facetby.forEach(e.add,e),this._stack.sort.field.forEach(e.add,e),e}},{key:"producedFields",value:function(){return new Set(this._stack.as)}},{key:"hash",value:function(){return"Stack ".concat(kze(this._stack))}},{key:"getGroupbyFields",value:function(){var e=this._stack,t=e.dimensionFieldDef,n=e.impute,r=e.groupby;return t?t.bin?n?[dVe(t,{binSuffix:"mid"})]:[dVe(t,{}),dVe(t,{binSuffix:"end"})]:[dVe(t)]:null!==r&&void 0!==r?r:[]}},{key:"assemble",value:function(){var e=[],t=this._stack,n=t.facetby,r=t.dimensionFieldDef,a=t.stackField,i=t.stackby,o=t.sort,u=t.offset,s=t.impute,c=t.as;if(s&&r){var l=r.band,f=void 0===l?.5:l;r.bin&&e.push({type:"formula",expr:"".concat(f,"*")+dVe(r,{expr:"datum"})+"+".concat(1-f,"*")+dVe(r,{expr:"datum",binSuffix:"end"}),as:dVe(r,{binSuffix:"mid",forAs:!0})}),e.push({type:"impute",field:a,groupby:[].concat((0,$n.Z)(i),(0,$n.Z)(n)),key:dVe(r,{binSuffix:"mid"}),method:"value",value:0})}return e.push({type:"stack",groupby:[].concat((0,$n.Z)(this.getGroupbyFields()),(0,$n.Z)(n)),field:a,sort:o,as:c,offset:u}),e}}],[{key:"makeFromTransform",value:function(e,t){var r=t.stack,a=t.groupby,i=t.as,o=t.offset,u=void 0===o?"zero":o,s=[],c=[];if(void 0!==t.sort){var l,f=(0,zt.Z)(t.sort);try{for(f.s();!(l=f.n()).done;){var h=l.value;s.push(h.field),c.push(Xze(h.order,"ascending"))}}catch(v){f.e(v)}finally{f.f()}}var d,p={field:s,order:c};return d=function(e){return qBe(e)&&e.every((function(e){return nze(e)}))&&e.length>1}(i)?i:nze(i)?[i,i+"_end"]:[t.stack+"_start",t.stack+"_end"],new n(e,{stackField:r,groupby:a,offset:u,sort:p,facetby:[],as:d})}},{key:"makeFromEncoding",value:function(e,t){var r=t.stack,a=t.encoding;if(!r)return null;var i,o=r.groupbyChannel,u=r.fieldChannel,s=r.offset,c=r.impute;o&&(i=CVe(a[o]));var l,f=function(e){return e.stack.stackBy.reduce((function(e,t){var n=dVe(t.fieldDef);return n&&e.push(n),e}),[])}(t),h=t.encoding.order;return l=qBe(h)||eVe(h)?HVe(h):f.reduce((function(e,t){return e.field.push(t),e.order.push("y"===u?"descending":"ascending"),e}),{field:[],order:[]}),new n(e,{dimensionFieldDef:i,stackField:t.vgField(u),facetby:[],stackby:f,sort:l,offset:s,impute:c,as:[t.vgField(u,{suffix:"start",forAs:!0}),t.vgField(u,{suffix:"end",forAs:!0})]})}}]),n}(VGe),q$e=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r){var a;return(0,ud.Z)(this,n),(a=t.call(this,e)).transform=r,a}return(0,sd.Z)(n,[{key:"clone",value:function(){return new n(null,yze(this.transform))}},{key:"addDimensions",value:function(e){this.transform.groupby=Nze(this.transform.groupby.concat(e),(function(e){return e}))}},{key:"dependentFields",value:function(){var e,t,n=new Set;return(null!==(e=this.transform.groupby)&&void 0!==e?e:[]).forEach(n.add,n),(null!==(t=this.transform.sort)&&void 0!==t?t:[]).forEach((function(e){return n.add(e.field)})),this.transform.window.map((function(e){return e.field})).filter((function(e){return void 0!==e})).forEach(n.add,n),n}},{key:"producedFields",value:function(){return new Set(this.transform.window.map(this.getDefaultName))}},{key:"getDefaultName",value:function(e){var t;return null!==(t=e.as)&&void 0!==t?t:dVe(e)}},{key:"hash",value:function(){return"WindowTransform ".concat(kze(this.transform))}},{key:"assemble",value:function(){var e,t,n=[],r=[],a=[],i=[],o=(0,zt.Z)(this.transform.window);try{for(o.s();!(t=o.n()).done;){var u=t.value;r.push(u.op),a.push(this.getDefaultName(u)),i.push(void 0===u.param?null:u.param),n.push(void 0===u.field?null:u.field)}}catch(m){o.e(m)}finally{o.f()}var s=this.transform.frame,c=this.transform.groupby;if(s&&null===s[0]&&null===s[1]&&r.every((function(e){return ZLe(e)})))return Object.assign({type:"joinaggregate",as:a,ops:r,fields:n},void 0!==c?{groupby:c}:{});var l=[],f=[];if(void 0!==this.transform.sort){var h,d=(0,zt.Z)(this.transform.sort);try{for(d.s();!(h=d.n()).done;){var p=h.value;l.push(p.field),f.push(null!==(e=p.order)&&void 0!==e?e:"ascending")}}catch(m){d.e(m)}finally{d.f()}}var v={field:l,order:f},g=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:i,as:a,ops:r,fields:n,sort:v},void 0!==g?{ignorePeers:g}:{}),void 0!==c?{groupby:c}:{}),void 0!==s?{frame:s}:{})}}]),n}(VGe),H$e=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(){return(0,ud.Z)(this,n),t.apply(this,arguments)}return(0,sd.Z)(n,[{key:"run",value:function(e){var t=e.parent;if(e instanceof j$e){if(M$e(t))return this.flags;if(t.numChildren()>1)return this.setContinue(),this.flags;if(t instanceof j$e)this.setMutated(),t.merge(e);else{if(Dze(t.producedFields(),e.dependentFields()))return this.setContinue(),this.flags;this.setMutated(),e.swapWithParent()}}return this.setContinue(),this.flags}}]),n}(F$e),G$e=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(){return(0,ud.Z)(this,n),t.apply(this,arguments)}return(0,sd.Z)(n,[{key:"mergeNodes",value:function(e,t){var n,r=t.shift(),a=(0,zt.Z)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;e.removeChild(i),i.parent=r,i.remove()}}catch(o){a.e(o)}finally{a.f()}}},{key:"run",value:function(e){for(var t=e.children.map((function(e){return e.hash()})),n={},r=0;r<t.length;r++)void 0===n[t[r]]?n[t[r]]=[e.children[r]]:n[t[r]].push(e.children[r]);var a,i=(0,zt.Z)(Ize(n));try{for(i.s();!(a=i.n()).done;){var o=a.value;n[o].length>1&&(this.setMutated(),this.mergeNodes(e,n[o]))}}catch(l){i.e(l)}finally{i.f()}var u,s=(0,zt.Z)(e.children);try{for(s.s();!(u=s.n()).done;){var c=u.value;this.run(c)}}catch(l){s.e(l)}finally{s.f()}return this.mutatedFlag}}]),n}(I$e),X$e=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(){return(0,ud.Z)(this,n),t.apply(this,arguments)}return(0,sd.Z)(n,[{key:"run",value:function(e){return e instanceof qGe||e.numChildren()>0||e instanceof Z$e||(this.setMutated(),e.remove()),this.flags}}]),n}(F$e),Y$e=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(){var e;return(0,ud.Z)(this,n),(e=t.apply(this,arguments)).fields=new Set,e.prev=null,e}return(0,sd.Z)(n,[{key:"run",value:function(e){if(this.setContinue(),e instanceof HGe){var t=e.producedFields();Tze(t,this.fields)?(this.setMutated(),this.prev.remove()):this.fields=new Set([].concat((0,$n.Z)(this.fields),(0,$n.Z)(t))),this.prev=e}return this.flags}},{key:"reset",value:function(){this.fields.clear()}}]),n}(F$e),K$e=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(){return(0,ud.Z)(this,n),t.apply(this,arguments)}return(0,sd.Z)(n,[{key:"run",value:function(e){this.setContinue();var t,n=e.parent.children.filter((function(e){return e instanceof HGe})),r=n.pop(),a=(0,zt.Z)(n);try{for(a.s();!(t=a.n()).done;){var i=t.value;this.setMutated(),r.merge(i)}}catch(o){a.e(o)}finally{a.f()}return this.flags}}]),n}(F$e);function $$e(e){if(e instanceof Z$e)if(1!==e.numChildren()||e.children[0]instanceof qGe){var t=e.model.component.data.main;Q$e(t);var n,r=(u=e,function e(t){if(!(t instanceof Z$e)){var n=t.clone();if(n instanceof qGe){var r=iQe+n.getSource();n.setSource(r),u.model.component.data.outputNodes[r]=n}else(n instanceof R$e||n instanceof V$e||n instanceof q$e||n instanceof W$e)&&n.addDimensions(u.fields);var a,i=(0,zt.Z)(t.children.flatMap(e));try{for(i.s();!(a=i.n()).done;)a.value.parent=n}catch(o){i.e(o)}finally{i.f()}return[n]}return t.children.flatMap(e)}),a=e.children.map(r).flat(),i=(0,zt.Z)(a);try{for(i.s();!(n=i.n()).done;){n.value.parent=t}}catch(s){i.e(s)}finally{i.f()}}else{var o=e.children[0];(o instanceof R$e||o instanceof V$e||o instanceof q$e||o instanceof W$e)&&o.addDimensions(e.fields),o.swapWithParent(),$$e(e)}else e.children.map($$e);var u}function Q$e(e){if(e instanceof qGe&&e.type===YHe&&1===e.numChildren()){var t=e.children[0];t instanceof Z$e||(t.swapWithParent(),Q$e(e))}}var J$e=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(){return(0,ud.Z)(this,n),t.call(this)}return(0,sd.Z)(n,[{key:"run",value:function(e){e instanceof qGe&&!e.isRequired()&&(this.setMutated(),e.remove());var t,n=(0,zt.Z)(e.children);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.run(r)}}catch(a){n.e(a)}finally{n.f()}return this.mutatedFlag}}]),n}(I$e),eQe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e){var r;return(0,ud.Z)(this,n),(r=t.call(this)).requiresSelectionId=e&&OXe(e),r}return(0,sd.Z)(n,[{key:"run",value:function(e){e instanceof U$e&&(this.requiresSelectionId&&(M$e(e.parent)||e.parent instanceof R$e||e.parent instanceof j$e)||(this.setMutated(),e.remove()));var t,n=(0,zt.Z)(e.children);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.run(r)}}catch(a){n.e(a)}finally{n.f()}return this.mutatedFlag}}]),n}(I$e),tQe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(){return(0,ud.Z)(this,n),t.apply(this,arguments)}return(0,sd.Z)(n,[{key:"run",value:function(e){var t=e.parent,n=(0,$n.Z)(t.children),r=t.children.filter((function(e){return e instanceof j$e}));if(t.numChildren()>1&&r.length>=1){var a,i={},o=new Set,u=(0,zt.Z)(r);try{for(u.s();!(a=u.n()).done;){var s,c=a.value.parse,l=(0,zt.Z)(Ize(c));try{for(l.s();!(s=l.n()).done;){var f=s.value;f in i?i[f]!==c[f]&&o.add(f):i[f]=c[f]}}catch(w){l.e(w)}finally{l.f()}}}catch(w){u.e(w)}finally{u.f()}var h,d=(0,zt.Z)(o);try{for(d.s();!(h=d.n()).done;){delete i[h.value]}}catch(w){d.e(w)}finally{d.f()}if(!Fze(i)){this.setMutated();var p,v=new j$e(t,i),g=(0,zt.Z)(n);try{for(g.s();!(p=g.n()).done;){var m=p.value;if(m instanceof j$e){var y,b=(0,zt.Z)(Ize(i));try{for(b.s();!(y=b.n()).done;){var x=y.value;delete m.parse[x]}}catch(w){b.e(w)}finally{b.f()}}t.removeChild(m),m.parent=v,m instanceof j$e&&0===Ize(m.parse).length&&m.remove()}}catch(w){g.e(w)}finally{g.f()}}}return this.setContinue(),this.flags}}]),n}(F$e),nQe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(){return(0,ud.Z)(this,n),t.apply(this,arguments)}return(0,sd.Z)(n,[{key:"run",value:function(e){var t,n=e.parent,r=n.children.filter((function(e){return e instanceof R$e})),a={},i=(0,zt.Z)(r);try{for(i.s();!(t=i.n()).done;){var o=t.value,u=kze(o.groupBy);u in a||(a[u]=[]),a[u].push(o)}}catch(v){i.e(v)}finally{i.f()}var s,c=(0,zt.Z)(Ize(a));try{for(c.s();!(s=c.n()).done;){var l=a[s.value];if(l.length>1){var f,h=l.pop(),d=(0,zt.Z)(l);try{for(d.s();!(f=d.n()).done;){var p=f.value;h.merge(p)&&(n.removeChild(p),p.parent=h,p.remove(),this.setMutated())}}catch(v){d.e(v)}finally{d.f()}}}}catch(v){c.e(v)}finally{c.f()}return this.setContinue(),this.flags}}]),n}(F$e),rQe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e){var r;return(0,ud.Z)(this,n),(r=t.call(this)).model=e,r}return(0,sd.Z)(n,[{key:"run",value:function(e){var t,n=e.parent,r=!(M$e(n)||n instanceof oKe||n instanceof j$e||n instanceof U$e),a=[],i=[],o=(0,zt.Z)(n.children);try{for(o.s();!(t=o.n()).done;){var u=t.value;u instanceof C$e&&(r&&!Dze(n.producedFields(),u.dependentFields())?a.push(u):i.push(u))}}catch(g){o.e(g)}finally{o.f()}if(a.length>0){var s,c=a.pop(),l=(0,zt.Z)(a);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.merge(f,this.model.renameSignal.bind(this.model))}}catch(g){l.e(g)}finally{l.f()}this.setMutated(),n instanceof C$e?n.merge(c,this.model.renameSignal.bind(this.model)):c.swapWithParent()}if(i.length>1){var h,d=i.pop(),p=(0,zt.Z)(i);try{for(p.s();!(h=p.n()).done;){var v=h.value;d.merge(v,this.model.renameSignal.bind(this.model))}}catch(g){p.e(g)}finally{p.f()}this.setMutated()}return this.setContinue(),this.flags}}]),n}(F$e),aQe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(){return(0,ud.Z)(this,n),t.apply(this,arguments)}return(0,sd.Z)(n,[{key:"run",value:function(e){var t=e.parent,n=(0,$n.Z)(t.children),r=Cze(n,(function(e){return e instanceof qGe}));if(!r||t.numChildren()<=1)return this.setContinue(),this.flags;var a,i,o=[],u=(0,zt.Z)(n);try{for(u.s();!(i=u.n()).done;){var s=i.value;if(s instanceof qGe){for(var c=s;1===c.numChildren();){var l=c.children[0];if(!(l instanceof qGe))break;c=l}o.push.apply(o,(0,$n.Z)(c.children)),a?(t.removeChild(s),s.parent=a.parent,a.parent.removeChild(a),a.parent=c,this.setMutated()):a=c}else o.push(s)}}catch(p){u.e(p)}finally{u.f()}if(o.length){this.setMutated();var f,h=(0,zt.Z)(o);try{for(h.s();!(f=h.n()).done;){var d=f.value;d.parent.removeChild(d),d.parent=a}}catch(p){h.e(p)}finally{h.f()}}return this.setContinue(),this.flags}}]),n}(F$e),iQe="scale_";function oQe(e){var t=[];function n(e){if(0===e.numChildren())t.push(e);else{var r,a=(0,zt.Z)(e.children);try{for(a.s();!(r=a.n()).done;){n(r.value)}}catch(i){a.e(i)}finally{a.f()}}}var r,a=(0,zt.Z)(e);try{for(a.s();!(r=a.n()).done;){n(r.value)}}catch(i){a.e(i)}finally{a.f()}return t}function uQe(e){return e}function sQe(e,t){return t.map((function(t){if(e instanceof F$e){var n=e.optimizeNextFromLeaves(t);return e.reset(),n}return e.run(t)})).some(uQe)}function cQe(e,t){var n=e.sources,r=new Set;return r.add(sQe(new J$e,n)),r.add(sQe(new eQe(t),n)),n=n.filter((function(e){return e.numChildren()>0})),r.add(sQe(new X$e,oQe(n))),n=n.filter((function(e){return e.numChildren()>0})),r.add(sQe(new H$e,oQe(n))),r.add(sQe(new rQe(t),oQe(n))),r.add(sQe(new Y$e,oQe(n))),r.add(sQe(new tQe,oQe(n))),r.add(sQe(new nQe,oQe(n))),r.add(sQe(new K$e,oQe(n))),r.add(sQe(new G$e,n)),r.add(sQe(new aQe,oQe(n))),e.sources=n,r.has(!0)}function lQe(e,t){A$e(e.sources);for(var n=0,r=0,a=0;a<5&&cQe(e,t);a++)n++;e.sources.map($$e);for(var i=0;i<5&&cQe(e,t);i++)r++;A$e(e.sources),5===Math.max(n,r)&&Vje("Maximum optimization runs(".concat(5,") reached."))}var fQe=function(){function e(t){(0,ud.Z)(this,e),Object.defineProperty(this,"signal",{enumerable:!0,get:t})}return(0,sd.Z)(e,null,[{key:"fromName",value:function(t,n){return new e((function(){return t(n)}))}}]),e}();function hQe(e){UQe(e)?function(e){var t,n=e.component.scales,r=(0,zt.Z)(Ize(n));try{for(r.s();!(t=r.n()).done;){var a=t.value,i=dQe(e,a);if(n[a].setWithExplicit("domains",i),mQe(e,a),e.component.data.isFaceted){for(var o=e;!WQe(o)&&o.parent;)o=o.parent;if("shared"===o.component.resolve.scale[a]){var u,s=(0,zt.Z)(i.value);try{for(s.s();!(u=s.n()).done;){var c=u.value;hUe(c)&&(c.data=iQe+c.data.replace(iQe,""))}}catch(l){s.e(l)}finally{s.f()}}}}}catch(l){r.e(l)}finally{r.f()}}(e):function(e){var t,n=(0,zt.Z)(e.children);try{for(n.s();!(t=n.n()).done;){hQe(t.value)}}catch(d){n.e(d)}finally{n.f()}var r,a=e.component.scales,i=(0,zt.Z)(Ize(a));try{for(i.s();!(r=i.n()).done;){var o,u=r.value,s=void 0,c=null,l=(0,zt.Z)(e.children);try{for(l.s();!(o=l.n()).done;){var f=o.value.component.scales[u];if(f){s=void 0===s?f.getWithExplicit("domains"):PHe(s,f.getWithExplicit("domains"),"domains","scale",bQe);var h=f.get("selectionExtent");c&&h&&c.selection!==h.selection&&Vje("The same selection must be used to override scale domains in a layered view."),c=h}}}catch(d){l.e(d)}finally{l.f()}a[u].setWithExplicit("domains",s),c&&a[u].set("selectionExtent",c,!0)}}catch(d){i.e(d)}finally{i.f()}}(e)}function dQe(e,t){var n=e.getScaleComponent(t).get("type"),r=e.encoding,a=function(e,t,n,r){if("unaggregated"===e){var a=yQe(t,n),i=a.valid,o=a.reason;if(!i)return void Vje(o)}else if(void 0===e&&r.useUnaggregatedDomain&&yQe(t,n).valid)return"unaggregated";return e}(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return a!==e.scaleDomain(t)&&(e.specifiedScales[t]=Object.assign(Object.assign({},e.specifiedScales[t]),{domain:a})),"x"===t&&EVe(r.x2)?EVe(r.x)?PHe(vQe(n,a,e,"x"),vQe(n,a,e,"x2"),"domain","scale",bQe):vQe(n,a,e,"x2"):"y"===t&&EVe(r.y2)?EVe(r.y)?PHe(vQe(n,a,e,"y"),vQe(n,a,e,"y2"),"domain","scale",bQe):vQe(n,a,e,"y2"):vQe(n,a,e,t)}function pQe(e,t,n){var r,a=null===(r=sUe(n))||void 0===r?void 0:r.unit;return"temporal"===t||a?function(e,t,n){return e.map((function(e){var r=IVe(e,{timeUnit:n,type:t});return{signal:"{data: ".concat(r,"}")}}))}(e,t,a):[e]}function vQe(e,t,n,r){var a=EVe(n.encoding[r]),i=a.type,o=a.timeUnit;if(function(e){return e&&e.unionWith}(t)){var u=vQe(e,void 0,n,r),s=pQe(t.unionWith,i,o);return ZHe([].concat((0,$n.Z)(u.value),(0,$n.Z)(s)))}if(lUe(t))return ZHe([t]);if(t&&"unaggregated"!==t&&!lWe(t))return ZHe(pQe(t,i,o));var c=n.stack;if(c&&r===c.fieldChannel){if("normalize"===c.offset)return BHe([[0,1]]);var l=n.requestDataName(YHe);return BHe([{data:l,field:n.vgField(r,{suffix:"start"})},{data:l,field:n.vgField(r,{suffix:"end"})}])}var f=QPe(r)&&eVe(a)?function(e,t,n){if(!oWe(n))return;var r=e.fieldDef(t),a=r.sort;if(WWe(a))return{op:"min",field:NKe(r,t),order:"ascending"};var i=e.stack,o=i?[].concat((0,$n.Z)(i.groupbyField?[i.groupbyField]:[]),(0,$n.Z)(i.stackBy.map((function(e){return e.fieldDef.field})))):void 0;if(UWe(a))return gQe(a,i&&!Sze(o,a.field));if(jWe(a)){var u=a.encoding,s=a.order,c=e.fieldDef(u),l=c.aggregate,f=c.field,h=i&&!Sze(o,f);if(OLe(l)||RLe(l))return gQe({field:dVe(c),order:s},h);if(ZLe(l)||!l)return gQe({op:l,field:f,order:s},h)}else{if("descending"===a)return{op:"min",field:e.vgField(t),order:"descending"};if(Sze(["ascending",void 0],a))return!0}return}(n,r,e):void 0;if(nVe(a))return BHe(pQe([a.datum],i,o));var h=a;if("unaggregated"===t){var d=n.requestDataName(YHe),p=a.field;return BHe([{data:d,field:dVe({field:p,aggregate:"min"})},{data:d,field:dVe({field:p,aggregate:"max"})}])}if(aje(h.bin)){if(oWe(e))return BHe("bin-ordinal"===e?[]:[{data:Zze(f)?n.requestDataName(YHe):n.requestDataName(KHe),field:n.vgField(r,RVe(h,r)?{binSuffix:"range"}:{}),sort:!0!==f&&HBe(f)?f:{field:n.vgField(r,{}),op:"min"}}]);var v=h.bin;if(aje(v)){var g=_$e(n,h.field,v);return BHe([new fQe((function(){var e=n.getSignalName(g);return"[".concat(e,".start, ").concat(e,".stop]")}))])}return BHe([{data:n.requestDataName(YHe),field:n.vgField(r,{})}])}if(h.timeUnit&&Sze(["time","utc"],e)&&KWe(r,h,UQe(n)?n.encoding[zPe(r)]:void 0,n.stack,n.markDef,n.config)){var m=n.requestDataName(YHe);return BHe([{data:m,field:n.vgField(r)},{data:m,field:n.vgField(r,{suffix:"end"})}])}return BHe(f?[{data:Zze(f)?n.requestDataName(YHe):n.requestDataName(KHe),field:n.vgField(r),sort:f}]:[{data:n.requestDataName(YHe),field:n.vgField(r)}])}function gQe(e,t){var n=e.op,r=e.field,a=e.order;return Object.assign(Object.assign({op:null!==n&&void 0!==n?n:t?"sum":zWe},r?{field:Vze(r)}:{}),a?{order:a}:{})}function mQe(e,t){var n,r=e.component.scales[t],a=e.specifiedScales[t].domain,i=null===(n=e.fieldDef(t))||void 0===n?void 0:n.bin,o=lWe(a)&&a,u=oje(i)&&uje(i.extent)&&i.extent;(o||u)&&r.set("selectionExtent",null!==o&&void 0!==o?o:u,!0)}function yQe(e,t){var n=e.aggregate,r=e.type;return n?nze(n)&&!PLe[n]?{valid:!1,reason:Tje(n)}:"quantitative"===r&&"log"===t?{valid:!1,reason:Mje(e)}:{valid:!0}:{valid:!1,reason:Nje(e)}}function bQe(e,t,n,r){return e.explicit&&t.explicit&&Vje(function(e,t,n,r){return"Conflicting ".concat(t.toString(),' property "').concat(e.toString(),'" (').concat(wze(n)," and ").concat(wze(r),"). Using the union of the two domains.")}(n,r,e.value,t.value)),{explicit:e.explicit,value:[].concat((0,$n.Z)(e.value),(0,$n.Z)(t.value))}}function xQe(e){var t=Nze(e.map((function(e){if(hUe(e)){e.sort;return ize(e,["sort"])}return e})),kze),n=Nze(e.map((function(e){if(hUe(e)){var t=e.sort;return void 0===t||Zze(t)||("op"in t&&"count"===t.op&&delete t.field,"ascending"===t.order&&delete t.order),t}})).filter((function(e){return void 0!==e})),kze);if(0!==t.length){if(1===t.length){var r=e[0];if(hUe(r)&&n.length>0){var a=n[0];if(n.length>1)Vje(Ije),a=!0;else if(HBe(a)&&"field"in a){var i=a.field;r.field===i&&(a=!a.order||{order:a.order})}return Object.assign(Object.assign({},r),{sort:a})}return r}var o,u=Nze(n.map((function(e){return Zze(e)||!("op"in e)||e.op in ILe?e:(Vje(function(e){return"Dropping sort property ".concat(wze(e),' as unioned domains only support boolean or op "count", "min", and "max".')}(e)),!0)})),kze);1===u.length?o=u[0]:u.length>1&&(Vje(Ije),o=!0);var s=Nze(e.map((function(e){return hUe(e)?e.data:null})),(function(e){return e}));return 1===s.length&&null!==s[0]?Object.assign({data:s[0],fields:t.map((function(e){return e.field}))},o?{sort:o}:{}):Object.assign({fields:t},o?{sort:o}:{})}}function wQe(e){if(hUe(e)&&nze(e.field))return e.field;if(function(e){return!qBe(e)&&"fields"in e&&!("data"in e)}(e)){var t,n,r=(0,zt.Z)(e.fields);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(hUe(a)&&nze(a.field))if(t){if(t!==a.field)return Vje("Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect."),t}else t=a.field}}catch(o){r.e(o)}finally{r.f()}return Vje("Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect."),t}if(function(e){return!qBe(e)&&"fields"in e&&"data"in e}(e)){Vje("Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.");var i=e.fields[0];return nze(i)?i:void 0}}function kQe(e,t){var n=e.component.scales[t].get("domains").map((function(t){return hUe(t)&&(t.data=e.lookupDataSource(t.data)),t}));return xQe(n)}function _Qe(e){return qQe(e)||VQe(e)?e.children.reduce((function(e,t){return e.concat(_Qe(t))}),SQe(e)):SQe(e)}function SQe(e){return Ize(e.component.scales).reduce((function(t,n){var r=e.component.scales[n];if(r.merged)return t;var a,i=r.combine(),o=i.name,u=i.type,s=i.selectionExtent,c=(i.domains,i.range,i.reverse),l=ize(i,["name","type","selectionExtent","domains","range","reverse"]),f=function(e,t,n){if(VPe(n)&&fUe(e))return{step:{signal:t+"_step"}};return e}(i.range,o,n);s&&(a=function(e,t){var n=t.selection;return{signal:sKe(e.getSelectionComponent(n,Bze(n)),t)}}(e,s));var h=kQe(e,n);return t.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:o,type:u},h?{domain:h}:{}),a?{domainRaw:a}:{}),{range:f}),void 0!==c?{reverse:c}:{}),l)),t}),[])}var CQe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r){var a;return(0,ud.Z)(this,n),(a=t.call(this,{},{name:e})).merged=!1,a.setWithExplicit("type",r),a}return(0,sd.Z)(n,[{key:"domainDefinitelyIncludesZero",value:function(){return!1!==this.get("zero")||Cze(this.get("domains"),(function(e){return qBe(e)&&2===e.length&&e[0]<=0&&e[1]>=0}))}}]),n}(RHe),EQe=["range","scheme"];function AQe(e){return"x"===e?"width":"y"===e?"height":void 0}function NQe(e,t){var n=e.fieldDef(t);if(n&&n.bin&&aje(n.bin)){var r=_$e(e,n.field,n.bin),a=AQe(t),i=e.getName(a);return new fQe((function(){var t=e.getSignalName(r),n="(".concat(t,".stop - ").concat(t,".start) / ").concat(t,".step");return"".concat(e.getSignalName(i)," / (").concat(n,")")}))}}function TQe(e,t){var n,r=t.specifiedScales[e],a=t.size,i=t.getScaleComponent(e).get("type"),o=(0,zt.Z)(EQe);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(void 0!==r[u]){var s=pWe(i,u),c=vWe(e,u);if(s)if(c)Vje(c);else switch(u){case"range":return qBe(r.range)&&VPe(e)?ZHe(r.range.map((function(e){if("width"===e||"height"===e){var n=t.getName(e),r=t.getSignalName.bind(t);return fQe.fromName(r,n)}return e}))):ZHe(r.range);case"scheme":return ZHe(MQe(r[u]))}else Vje(Dje(i,u,e))}}}catch(h){o.e(h)}finally{o.f()}if(e===VLe||e===qLe){var l=e===VLe?"width":"height",f=a[l];if(zqe(f)){if(oWe(i))return ZHe({step:f.step});Vje(Fje(l))}}return BHe(function(e,t){var n=t.size,r=t.config,a=t.mark,i=t.encoding,o=t.getSignalName.bind(t),u=EVe(i[e]).type,s=t.getScaleComponent(e).get("type"),c=t.specifiedScales[e],l=c.domain,f=c.domainMid;switch(e){case VLe:case qLe:if(Sze(["point","band"],s))if(e!==VLe||n.width){if(e===qLe&&!n.height){var h=Wqe(r.view,"height");if(zqe(h))return h}}else{var d=Wqe(r.view,"width");if(zqe(d))return d}var p=AQe(e),v=t.getName(p);return e===qLe&&uWe(s)?[fQe.fromName(o,v),0]:[0,fQe.fromName(o,v)];case oPe:var g=DQe(a,t.component.scales[e].get("zero"),r),m=function(e,t,n,r){var a={x:NQe(n,"x"),y:NQe(n,"y")};switch(e){case"bar":case"tick":if(void 0!==r.scale.maxBandSize)return r.scale.maxBandSize;var i=IQe(t,a,r.view);return tze(i)?i-1:new fQe((function(){return"".concat(i.signal," - 1")}));case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":if(r.scale.maxSize)return r.scale.maxSize;var o=IQe(t,a,r.view);return tze(o)?Math.pow(FQe*o,2):new fQe((function(){return"pow(".concat(FQe," * ").concat(o.signal,", 2)")}))}throw new Error(Cje("size",e))}(a,n,t,r);return cWe(s)?function(e,t,n){var r=function(){var r=PVe(t),a=PVe(e),i="(".concat(r," - ").concat(a,") / (").concat(n," - 1)");return"sequence(".concat(a,", ").concat(r," + ").concat(i,", ").concat(i,")")};return lUe(t)?new fQe(r):{signal:r()}}(g,m,function(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return void 0!==n&&qBe(n)?n.length+1:(Vje(function(e){return"Domain for ".concat(e," is required for threshold scale.")}(r)),3)}}(s,r,l,e)):[g,m];case KLe:return[0,2*Math.PI];case uPe:return[0,360];case XLe:return[0,new fQe((function(){var e=t.getSignalName("width"),n=t.getSignalName("height");return"min(".concat(e,",").concat(n,")/2")}))];case fPe:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case hPe:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case iPe:return"symbol";case nPe:case rPe:case aPe:return"ordinal"===s?"nominal"===u?"category":"ordinal":void 0!==f?"diverging":"rect"===a||"geoshape"===a?"heatmap":"ramp";case sPe:case cPe:case lPe:return[r.scale.minOpacity,r.scale.maxOpacity]}throw new Error("Scale range undefined for channel ".concat(e))}(e,t))}function MQe(e){return function(e){return!nze(e)&&!!e.name}(e)?Object.assign({scheme:e.name},xze(e,["name"])):{scheme:e}}function DQe(e,t,n){if(t)return lUe(t)?{signal:"".concat(t.signal," ? 0 : ").concat(DQe(e,!1,n))}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(Cje("size",e))}var FQe=.95;function IQe(e,t,n){var r=zqe(e.width)?e.width.step:Uqe(n,"width"),a=zqe(e.height)?e.height.step:Uqe(n,"height");return t.x||t.y?new fQe((function(){var e=[t.x?t.x.signal:r,t.y?t.y.signal:a];return"min(".concat(e.join(", "),")")})):Math.min(r,a)}function OQe(e,t){UQe(e)?function(e,t){var n,r=e.component.scales,a=e.config,i=e.encoding,o=e.markDef,u=e.specifiedScales,s=(0,zt.Z)(Ize(r));try{for(s.s();!(n=s.n()).done;){var c=n.value,l=u[c],f=r[c],h=e.getScaleComponent(c),d=EVe(i[c]),p=l[t],v=h.get("type"),g=h.get("padding"),m=h.get("paddingInner"),y=pWe(v,t),b=vWe(c,t);if(void 0!==p&&(y?b&&Vje(b):Vje(Dje(v,t,c))),y&&void 0===b)if(void 0!==p)f.copyKeyFromObject(t,l);else{var x=t in RQe?RQe[t]({model:e,channel:c,fieldOrDatumDef:d,scaleType:v,scalePadding:g,scalePaddingInner:m,domain:l.domain,markDef:o,config:a}):a.scale[t];void 0!==x&&f.set(t,x,!1)}}}catch(w){s.e(w)}finally{s.f()}}(e,t):BQe(e,t)}var RQe={bins:function(e){var t=e.model,n=e.fieldOrDatumDef;return eVe(n)?function(e,t){var n=t.bin;if(aje(n)){var r=_$e(e,t.field,n);return new fQe((function(){return e.getSignalName(r)}))}if(ije(n)&&oje(n)&&void 0!==n.step)return{step:n.step};return}(t,n):void 0},interpolate:function(e){return function(e,t){if(Sze([nPe,rPe,aPe],e)&&"nominal"!==t)return"hcl";return}(e.channel,e.fieldOrDatumDef.type)},nice:function(e){return function(e,t,n){var r;if((null===(r=CVe(n))||void 0===r?void 0:r.bin)||Sze([UUe,WUe],e))return;return t in UPe||void 0}(e.scaleType,e.channel,e.fieldOrDatumDef)},padding:function(e){var t=e.channel,n=e.scaleType,r=e.fieldOrDatumDef,a=e.markDef,i=e.config;return function(e,t,n,r,a,i){if(e in UPe){if(sWe(t)){if(void 0!==n.continuousPadding)return n.continuousPadding;var o=a.type,u=a.orient;if("bar"===o&&(!eVe(r)||!r.bin&&!r.timeUnit)&&("vertical"===u&&"x"===e||"horizontal"===u&&"y"===e))return i.continuousBandSize}if(t===GUe)return n.pointPadding}return}(t,n,i.scale,r,a,i.bar)},paddingInner:function(e){var t=e.scalePadding,n=e.channel,r=e.markDef,a=e.config;return function(e,t,n,r){if(void 0!==e)return;if(t in UPe){var a=r.bandPaddingInner,i=r.barBandPaddingInner,o=r.rectBandPaddingInner;return Xze(a,"bar"===n?i:o)}return}(t,n,r.type,a.scale)},paddingOuter:function(e){var t=e.scalePadding,n=e.channel,r=e.scaleType,a=e.markDef,i=e.scalePaddingInner,o=e.config;return function(e,t,n,r,a,i){if(void 0!==e)return;if(t in UPe){if(n===XUe)return Xze(i.bandPaddingOuter,lUe(a)?{signal:"".concat(a.signal,"/2")}:a/2)}return}(t,n,r,a.type,i,o.scale)},reverse:function(e){var t=e.fieldOrDatumDef,n=e.scaleType,r=e.channel,a=e.config;return function(e,t,n,r){if("x"===n&&void 0!==r.xReverse)return uWe(e)&&"descending"===t?lUe(r.xReverse)?{signal:"!".concat(r.xReverse.signal)}:!r.xReverse:r.xReverse;if(uWe(e)&&"descending"===t)return!0;return}(n,eVe(t)?t.sort:void 0,r,a.scale)},zero:function(e){return function(e,t,n,r,a){if(n&&"unaggregated"!==n&&uWe(a)){if(qBe(n)){var i=n[0],o=n[n.length-1];if(i<=0&&o>=0)return!0}return!1}if("size"===e&&"quantitative"===t.type&&!cWe(a))return!0;if((!eVe(t)||!t.bin)&&Sze([].concat((0,$n.Z)(WPe),(0,$n.Z)(HPe)),e)){var u=r.orient;return!Sze(["bar","area","line","trail"],r.type)||!("horizontal"===u&&"y"===e||"vertical"===u&&"x"===e)}return!1}(e.channel,e.fieldOrDatumDef,e.domain,e.markDef,e.scaleType)}};function ZQe(e){UQe(e)?function(e){var t,n=e.component.scales,r=(0,zt.Z)($Pe);try{for(r.s();!(t=r.n()).done;){var a=t.value,i=n[a];if(i){var o=TQe(a,e);i.setWithExplicit("range",o)}}}catch(u){r.e(u)}finally{r.f()}}(e):BQe(e,"range")}function BQe(e,t){var n,r=e.component.scales,a=(0,zt.Z)(e.children);try{for(a.s();!(n=a.n()).done;){var i=n.value;"range"===t?ZQe(i):OQe(i,t)}}catch(d){a.e(d)}finally{a.f()}var o,u=(0,zt.Z)(Ize(r));try{for(u.s();!(o=u.n()).done;){var s,c=o.value,l=void 0,f=(0,zt.Z)(e.children);try{for(f.s();!(s=f.n()).done;){var h=s.value.component.scales[c];if(h)l=PHe(l,h.getWithExplicit(t),t,"scale",zHe((function(e,n){return"range"===t&&e.step&&n.step?e.step-n.step:0})))}}catch(d){f.e(d)}finally{f.f()}r[c].setWithExplicit(t,l)}}catch(d){u.e(d)}finally{u.f()}}function zQe(e,t,n,r){var a=function(e,t,n){var r;switch(t.type){case"nominal":case"ordinal":if(EPe(e)||"discrete"===nje(e))return"shape"===e&&"ordinal"===t.type&&Vje(Aje(e,"ordinal")),"ordinal";if(e in UPe){if(Sze(["rect","bar","image","rule"],n))return"band"}else if("arc"===n&&e in qPe)return"band";return void 0!==t.band||cVe(t)&&(null===(r=t.axis)||void 0===r?void 0:r.tickBand)?"band":"point";case"temporal":return EPe(e)?"time":"discrete"===nje(e)?(Vje(Aje(e,"temporal")),"ordinal"):eVe(t)&&t.timeUnit&&sUe(t.timeUnit).utc?"utc":"time";case"quantitative":return EPe(e)?eVe(t)&&aje(t.bin)?"bin-ordinal":"linear":"discrete"===nje(e)?(Vje(Aje(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(kje(t.type))}(t,n,r),i=e.type;return QPe(t)?void 0!==i?mWe(t,i)?eVe(n)&&!gWe(i,n.type)?(Vje(function(e,t){return'FieldDef does not work with "'.concat(e,'" scale. We are using "').concat(t,'" scale instead.')}(i,a)),a):i:(Vje(function(e,t,n){return'Channel "'.concat(e,'" does not work with "').concat(t,'" scale. We are using "').concat(n,'" scale instead.')}(t,i,a)),a):a:null}function LQe(e){UQe(e)?e.component.scales=function(e){var t=e.encoding,n=e.mark;return $Pe.reduce((function(r,a){var i=EVe(t[a]);if(i&&n===xLe&&a===iPe&&i.type===RUe)return r;var o=i&&i.scale;if(i&&null!==o&&!1!==o){var u=zQe(o=null!==o&&void 0!==o?o:{},a,i,n);r[a]=new CQe(e.scaleName(a+"",!0),{value:u,explicit:o.type===u})}return r}),{})}(e):e.component.scales=function(e){var t,n,r=e.component.scales={},a={},i=e.component.resolve,o=(0,zt.Z)(e.children);try{for(o.s();!(n=o.n()).done;){var u=n.value;LQe(u);var s,c=(0,zt.Z)(Ize(u.component.scales));try{for(c.s();!(s=c.n()).done;){var l=s.value;if(i.scale[l]=null!==(t=i.scale[l])&&void 0!==t?t:KKe(l,e),"shared"===i.scale[l]){var f=a[l],h=u.component.scales[l].getWithExplicit("type");f?$Ue(f.value,h.value)?a[l]=PHe(f,h,"type","scale",PQe):(i.scale[l]="independent",delete a[l]):a[l]=h}}}catch(k){c.e(k)}finally{c.f()}}}catch(k){o.e(k)}finally{o.f()}var d,p=(0,zt.Z)(Ize(a));try{for(p.s();!(d=p.n()).done;){var v=d.value,g=e.scaleName(v,!0),m=a[v];r[v]=new CQe(g,m);var y,b=(0,zt.Z)(e.children);try{for(b.s();!(y=b.n()).done;){var x=y.value,w=x.component.scales[v];w&&(x.renameScale(w.get("name"),g),w.merged=!0)}}catch(k){b.e(k)}finally{b.f()}}}catch(k){p.e(k)}finally{p.f()}return r}(e)}var PQe=zHe((function(e,t){return JUe(e)-JUe(t)}));var jQe=function(){function e(){(0,ud.Z)(this,e),this.nameMap={}}return(0,sd.Z)(e,[{key:"rename",value:function(e,t){this.nameMap[e]=t}},{key:"has",value:function(e){return void 0!==this.nameMap[e]}},{key:"get",value:function(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e}}]),e}();function UQe(e){return"unit"===(null===e||void 0===e?void 0:e.type)}function WQe(e){return"facet"===(null===e||void 0===e?void 0:e.type)}function VQe(e){return"concat"===(null===e||void 0===e?void 0:e.type)}function qQe(e){return"layer"===(null===e||void 0===e?void 0:e.type)}var HQe=function(){function e(t,n,r,a,i,o,u){var s,c,l=this;(0,ud.Z)(this,e),this.type=n,this.parent=r,this.config=i,this.view=u,this.children=[],this.correctDataNames=function(e){return e.from&&e.from.data&&(e.from.data=l.lookupDataSource(e.from.data)),e.from&&e.from.facet&&e.from.facet.data&&(e.from.facet.data=l.lookupDataSource(e.from.facet.data)),e},this.parent=r,this.config=i,this.name=null!==(s=t.name)&&void 0!==s?s:a,this.title=BVe(t.title)?{text:t.title}:t.title,this.scaleNameMap=r?r.scaleNameMap:new jQe,this.projectionNameMap=r?r.projectionNameMap:new jQe,this.signalNameMap=r?r.signalNameMap:new jQe,this.data=t.data,this.description=t.description,this.transforms=function(e){return e.map((function(e){return $He(e)?{filter:gze(e.filter,TUe)}:e}))}(null!==(c=t.transform)&&void 0!==c?c:[]),this.layout="layer"===n||"unit"===n?{}:function(e,t,n){var r,a,i=n[t],o={},u=i.spacing,s=i.columns;void 0!==u&&(o.spacing=u),void 0!==s&&(HWe(e)&&!VWe(e.facet)||Rqe(e))&&(o.columns=s),Zqe(e)&&(o.columns=1);var c,l=(0,zt.Z)(Pqe);try{for(l.s();!(c=l.n()).done;){var f=c.value;if(void 0!==e[f])if("spacing"===f){var h=e[f];o[f]=tze(h)?h:{row:null!==(r=h.row)&&void 0!==r?r:u,column:null!==(a=h.column)&&void 0!==a?a:u}}else o[f]=e[f]}}catch(d){l.e(d)}finally{l.f()}return o}(t,n,i),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:HWe(t)||r&&r.component.data.isFaceted&&void 0===t.data},layoutSize:new RHe,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},o?yze(o):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}return(0,sd.Z)(e,[{key:"width",get:function(){return this.getSizeSignalRef("width")}},{key:"height",get:function(){return this.getSizeSignalRef("height")}},{key:"parse",value:function(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}},{key:"parseScale",value:function(){!function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ignoreRange;LQe(e),hQe(e);var n,r=(0,zt.Z)(dWe);try{for(r.s();!(n=r.n()).done;){OQe(e,n.value)}}catch(a){r.e(a)}finally{r.f()}t||ZQe(e)}(this)}},{key:"parseProjection",value:function(){x$e(this)}},{key:"renameTopLevelLayoutSizeSignal",value:function(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}},{key:"parseLegends",value:function(){l$e(this)}},{key:"assembleGroupStyle",value:function(){var e,t;if("unit"===this.type||"layer"===this.type)return null!==(t=null===(e=this.view)||void 0===e?void 0:e.style)&&void 0!==t?t:"cell"}},{key:"assembleEncodeFromView",value:function(e){e.style;var t,n=ize(e,["style"]),r={},a=(0,zt.Z)(Ize(n));try{for(a.s();!(t=a.n()).done;){var i=t.value,o=n[i];void 0!==o&&(r[i]=zVe(o))}}catch(u){a.e(u)}finally{a.f()}return r}},{key:"assembleGroupEncodeEntry",value:function(e){var t={};return this.view&&(t=this.assembleEncodeFromView(this.view)),e||(this.description&&(t.description=zVe(this.description)),"unit"!==this.type&&"layer"!==this.type)?Fze(t)?void 0:t:Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},null!==t&&void 0!==t?t:{})}},{key:"assembleLayout",value:function(){if(this.layout){var e=this.layout,t=e.spacing,n=ize(e,["spacing"]),r=this.component,a=this.config,i=function(e,t){var n,r={},a=(0,zt.Z)(NPe);try{for(a.s();!(n=a.n()).done;){var i=n.value,o=e[i];if(null===o||void 0===o?void 0:o.facetFieldDef){var u=DKe(["titleAnchor","titleOrient"],o.facetFieldDef,t,i),s=u.titleAnchor,c=TKe(i,u.titleOrient),l=UKe(s,c);void 0!==l&&(r[c]=l)}}}catch(f){a.e(f)}finally{a.f()}return Fze(r)?void 0:r}(r.layoutHeaders,a);return Object.assign(Object.assign(Object.assign({padding:t},this.assembleDefaultLayout()),n),i?{titleBand:i}:{})}}},{key:"assembleDefaultLayout",value:function(){return{}}},{key:"assembleHeaderMarks",value:function(){var e,t=this.component.layoutHeaders,n=[],r=(0,zt.Z)(NPe);try{for(r.s();!(e=r.n()).done;){var a=e.value;t[a].title&&n.push(OKe(this,a))}}catch(s){r.e(s)}finally{r.f()}var i,o=(0,zt.Z)(FKe);try{for(o.s();!(i=o.n()).done;){var u=i.value;n=n.concat(BKe(this,u))}}catch(s){o.e(s)}finally{o.f()}return n}},{key:"assembleAxes",value:function(){return function(e,t){var n=e.x,r=void 0===n?[]:n,a=e.y,i=void 0===a?[]:a;return[].concat((0,$n.Z)(r.map((function(e){return hKe(e,"grid",t)}))),(0,$n.Z)(i.map((function(e){return hKe(e,"grid",t)}))),(0,$n.Z)(r.map((function(e){return hKe(e,"main",t)}))),(0,$n.Z)(i.map((function(e){return hKe(e,"main",t)})))).filter((function(e){return e}))}(this.component.axes,this.config)}},{key:"assembleLegends",value:function(){return v$e(this)}},{key:"assembleProjections",value:function(){return g$e(this)}},{key:"assembleTitle",value:function(){var e,t,n,r=null!==(e=this.title)&&void 0!==e?e:{},a=r.encoding,i=ize(r,["encoding"]),o=Object.assign(Object.assign(Object.assign({},ZVe(this.config.title).nonMark),i),a?{encode:{update:a}}:{});if(o.text)return Sze(["unit","layer"],this.type)?Sze(["middle",void 0],o.anchor)&&(o.frame=null!==(t=o.frame)&&void 0!==t?t:"group"):o.anchor=null!==(n=o.anchor)&&void 0!==n?n:"start",Fze(o)?void 0:o}},{key:"assembleGroup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};(e=e.concat(this.assembleSignals())).length>0&&(t.signals=e);var n=this.assembleLayout();n&&(t.layout=n),t.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());var r=!this.parent||WQe(this.parent)?_Qe(this):[];r.length>0&&(t.scales=r);var a=this.assembleAxes();a.length>0&&(t.axes=a);var i=this.assembleLegends();return i.length>0&&(t.legends=i),t}},{key:"getName",value:function(e){return Bze((this.name?this.name+"_":"")+e)}},{key:"requestDataName",value:function(e){var t,n=this.getName(e),r=this.component.data.outputNodeRefCounts;return r[n]=(null!==(t=r[n])&&void 0!==t?t:0)+1,n}},{key:"getSizeSignalRef",value:function(e){if(WQe(this.parent)){var t=GPe(XKe(e)),n=this.component.scales[t];if(n&&!n.merged){var r=n.get("type"),a=n.get("range");if(oWe(r)&&fUe(a)){var i=n.get("name"),o=wQe(kQe(this,t));return o?{signal:GKe(i,n,dVe({aggregate:"distinct",field:o},{expr:"datum"}))}:(Vje("Unknown field for ".concat(t,". Cannot calculate view size.")),null)}}}return{signal:this.signalNameMap.get(this.getName(e))}}},{key:"lookupDataSource",value:function(e){var t=this.component.data.outputNodes[e];return t?t.getSource():e}},{key:"getSignalName",value:function(e){return this.signalNameMap.get(e)}},{key:"renameSignal",value:function(e,t){this.signalNameMap.rename(e,t)}},{key:"renameScale",value:function(e,t){this.scaleNameMap.rename(e,t)}},{key:"renameProjection",value:function(e,t){this.projectionNameMap.rename(e,t)}},{key:"scaleName",value:function(e,t){return t?this.getName(e):IPe(e)&&QPe(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e))?this.scaleNameMap.get(this.getName(e)):void 0}},{key:"projectionName",value:function(e){return e?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}},{key:"getScaleComponent",value:function(e){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");var t=this.component.scales[e];return t&&!t.merged?t:this.parent?this.parent.getScaleComponent(e):void 0}},{key:"getSelectionComponent",value:function(e,t){var n=this.component.selection[e];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(e,t)),!n)throw new Error('Cannot find a selection named "'.concat(t,'".'));return n}},{key:"hasAxisOrientSignalRef",value:function(){var e,t;return(null===(e=this.component.axes.x)||void 0===e?void 0:e.some((function(e){return e.hasOrientSignalRef()})))||(null===(t=this.component.axes.y)||void 0===t?void 0:t.some((function(e){return e.hasOrientSignalRef()})))}}]),e}(),GQe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(){return(0,ud.Z)(this,n),t.apply(this,arguments)}return(0,sd.Z)(n,[{key:"vgField",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.fieldDef(e);if(n)return dVe(n,t)}},{key:"reduceFieldDef",value:function(e,t){return nqe(this.getMapping(),(function(t,n,r){var a=CVe(n);return a?e(t,a,r):t}),t)}},{key:"forEachFieldDef",value:function(e,t){tqe(this.getMapping(),(function(t,n){var r=CVe(t);r&&e(r,n)}),t)}}]),n}(HQe),XQe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r){var a,i,o,u;(0,ud.Z)(this,n),(a=t.call(this,e)).transform=r,a.transform=yze(r);var s=null!==(i=a.transform.as)&&void 0!==i?i:[void 0,void 0];return a.transform.as=[null!==(o=s[0])&&void 0!==o?o:"value",null!==(u=s[1])&&void 0!==u?u:"density"],a}return(0,sd.Z)(n,[{key:"clone",value:function(){return new n(null,yze(this.transform))}},{key:"dependentFields",value:function(){var e;return new Set([this.transform.density].concat((0,$n.Z)(null!==(e=this.transform.groupby)&&void 0!==e?e:[])))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"DensityTransform ".concat(kze(this.transform))}},{key:"assemble",value:function(){var e=this.transform,t=e.density,n=ize(e,["density"]);return Object.assign({type:"kde",field:t},n)}}]),n}(VGe),YQe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r){var a;return(0,ud.Z)(this,n),(a=t.call(this,e)).filter=r,a}return(0,sd.Z)(n,[{key:"clone",value:function(){return new n(null,Object.assign({},this.filter))}},{key:"dependentFields",value:function(){return new Set(Ize(this.filter))}},{key:"producedFields",value:function(){return new Set}},{key:"hash",value:function(){return"FilterInvalid ".concat(kze(this.filter))}},{key:"assemble",value:function(){var e=this,t=Ize(this.filter).reduce((function(t,n){var r=e.filter[n],a=dVe(r,{expr:"datum"});return null!==r&&("temporal"===r.type?t.push("(isDate(".concat(a,") || (isValid(").concat(a,") && isFinite(+").concat(a,")))")):"quantitative"===r.type&&(t.push("isValid(".concat(a,")")),t.push("isFinite(+".concat(a,")")))),t}),[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}],[{key:"make",value:function(e,t){var r=t.config,a=t.mark;if("filter"!==UVe("invalid",t.markDef,r))return null;var i=t.reduceFieldDef((function(e,n,r){var i=QPe(r)&&t.getScaleComponent(r);i&&(uWe(i.get("type"))&&"count"!==n.aggregate&&!wLe(a)&&(e[n.field]=n));return e}),{});return Ize(i).length?new n(e,i):null}}]),n}(VGe),KQe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r){var a;(0,ud.Z)(this,n),(a=t.call(this,e)).transform=r,a.transform=yze(r);var i=a.transform,o=i.flatten,u=i.as,s=void 0===u?[]:u;return a.transform.as=o.map((function(e,t){var n;return null!==(n=s[t])&&void 0!==n?n:e})),a}return(0,sd.Z)(n,[{key:"clone",value:function(){return new n(this.parent,yze(this.transform))}},{key:"dependentFields",value:function(){return new Set(this.transform.flatten)}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"FlattenTransform ".concat(kze(this.transform))}},{key:"assemble",value:function(){var e=this.transform;return{type:"flatten",fields:e.flatten,as:e.as}}}]),n}(VGe),$Qe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r){var a,i,o,u;(0,ud.Z)(this,n),(a=t.call(this,e)).transform=r,a.transform=yze(r);var s=null!==(i=a.transform.as)&&void 0!==i?i:[void 0,void 0];return a.transform.as=[null!==(o=s[0])&&void 0!==o?o:"key",null!==(u=s[1])&&void 0!==u?u:"value"],a}return(0,sd.Z)(n,[{key:"clone",value:function(){return new n(null,yze(this.transform))}},{key:"dependentFields",value:function(){return new Set(this.transform.fold)}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"FoldTransform ".concat(kze(this.transform))}},{key:"assemble",value:function(){var e=this.transform;return{type:"fold",fields:e.fold,as:e.as}}}]),n}(VGe),QQe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r,a,i){var o;return(0,ud.Z)(this,n),(o=t.call(this,e)).fields=r,o.geojson=a,o.signal=i,o}return(0,sd.Z)(n,[{key:"clone",value:function(){return new n(null,yze(this.fields),this.geojson,this.signal)}},{key:"dependentFields",value:function(){var e,t=(null!==(e=this.fields)&&void 0!==e?e:[]).filter(nze);return new Set([].concat((0,$n.Z)(this.geojson?[this.geojson]:[]),(0,$n.Z)(t)))}},{key:"producedFields",value:function(){return new Set}},{key:"hash",value:function(){return"GeoJSON ".concat(this.geojson," ").concat(this.signal," ").concat(kze(this.fields))}},{key:"assemble",value:function(){return Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})}}],[{key:"parseAll",value:function(e,t){if(t.component.projection&&!t.component.projection.isFit)return e;for(var r=0,a=0,i=[[JLe,QLe],[tPe,ePe]];a<i.length;a++){var o=i[a].map((function(e){var n=EVe(t.encoding[e]);return eVe(n)?n.field:nVe(n)?{expr:"".concat(n.datum)}:uVe(n)?{expr:"".concat(n.value)}:void 0}));(o[0]||o[1])&&(e=new n(e,o,null,t.getName("geojson_".concat(r++))))}if(t.channelHasField(iPe)){var u=t.typedFieldDef(iPe);u.type===RUe&&(e=new n(e,null,u.field,t.getName("geojson_".concat(r++))))}return e}}]),n}(VGe),JQe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r,a,i){var o;return(0,ud.Z)(this,n),(o=t.call(this,e)).projection=r,o.fields=a,o.as=i,o}return(0,sd.Z)(n,[{key:"clone",value:function(){return new n(null,this.projection,yze(this.fields),yze(this.as))}},{key:"dependentFields",value:function(){return new Set(this.fields.filter(nze))}},{key:"producedFields",value:function(){return new Set(this.as)}},{key:"hash",value:function(){return"Geopoint ".concat(this.projection," ").concat(kze(this.fields)," ").concat(kze(this.as))}},{key:"assemble",value:function(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}],[{key:"parseAll",value:function(e,t){if(!t.projectionName())return e;for(var r=0,a=[[JLe,QLe],[tPe,ePe]];r<a.length;r++){var i=a[r],o=i.map((function(e){var n=EVe(t.encoding[e]);return eVe(n)?n.field:nVe(n)?{expr:"".concat(n.datum)}:uVe(n)?{expr:"".concat(n.value)}:void 0})),u=i[0]===tPe?"2":"";(o[0]||o[1])&&(e=new n(e,t.projectionName(),o,[t.getName("x"+u),t.getName("y"+u)]))}return e}}]),n}(VGe),eJe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r){var a;return(0,ud.Z)(this,n),(a=t.call(this,e)).transform=r,a}return(0,sd.Z)(n,[{key:"clone",value:function(){return new n(null,yze(this.transform))}},{key:"dependentFields",value:function(){var e;return new Set([this.transform.impute,this.transform.key].concat((0,$n.Z)(null!==(e=this.transform.groupby)&&void 0!==e?e:[])))}},{key:"producedFields",value:function(){return new Set([this.transform.impute])}},{key:"processSequence",value:function(e){var t=e.start,n=void 0===t?0:t,r=e.stop,a=e.step,i=[n,r].concat((0,$n.Z)(a?[a]:[])).join(",");return{signal:"sequence(".concat(i,")")}}},{key:"hash",value:function(){return"Impute ".concat(kze(this.transform))}},{key:"assemble",value:function(){var e,t=this.transform,n=t.impute,r=t.key,a=t.keyvals,i=t.method,o=t.groupby,u=t.value,s=t.frame,c=void 0===s?[null,null]:s,l=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:n,key:r},a?{keyvals:(e=a,void 0!==(null===e||void 0===e?void 0:e.stop)?this.processSequence(a):a)}:{}),{method:"value"}),o?{groupby:o}:{}),{value:i&&"value"!==i?null:u});return i&&"value"!==i?[l,Object.assign({type:"window",as:["imputed_".concat(n,"_value")],ops:[i],fields:[n],frame:c,ignorePeers:!1},o?{groupby:o}:{}),{type:"formula",expr:"datum.".concat(n," === null ? datum.imputed_").concat(n,"_value : datum.").concat(n),as:n}]:[l]}}],[{key:"makeFromTransform",value:function(e,t){return new n(e,t)}},{key:"makeFromEncoding",value:function(e,t){var r=t.encoding,a=r.x,i=r.y;if(eVe(a)&&eVe(i)){var o=a.impute?a:i.impute?i:void 0;if(void 0===o)return;var u=a.impute?i:i.impute?a:void 0,s=o.impute,c=s.method,l=s.value,f=s.frame,h=s.keyvals,d=rqe(t.mark,r);return new n(e,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:o.field,key:u.field},c?{method:c}:{}),void 0!==l?{value:l}:{}),f?{frame:f}:{}),void 0!==h?{keyvals:h}:{}),d.length?{groupby:d}:{}))}return null}}]),n}(VGe),tJe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r){var a,i,o,u;(0,ud.Z)(this,n),(a=t.call(this,e)).transform=r,a.transform=yze(r);var s=null!==(i=a.transform.as)&&void 0!==i?i:[void 0,void 0];return a.transform.as=[null!==(o=s[0])&&void 0!==o?o:r.on,null!==(u=s[1])&&void 0!==u?u:r.loess],a}return(0,sd.Z)(n,[{key:"clone",value:function(){return new n(null,yze(this.transform))}},{key:"dependentFields",value:function(){var e;return new Set([this.transform.loess,this.transform.on].concat((0,$n.Z)(null!==(e=this.transform.groupby)&&void 0!==e?e:[])))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"LoessTransform ".concat(kze(this.transform))}},{key:"assemble",value:function(){var e=this.transform,t=e.loess,n=e.on,r=ize(e,["loess","on"]);return Object.assign({type:"loess",x:n,y:t},r)}}]),n}(VGe),nJe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r,a){var i;return(0,ud.Z)(this,n),(i=t.call(this,e)).transform=r,i.secondary=a,i}return(0,sd.Z)(n,[{key:"clone",value:function(){return new n(null,yze(this.transform),this.secondary)}},{key:"dependentFields",value:function(){return new Set([this.transform.lookup])}},{key:"producedFields",value:function(){return new Set(this.transform.as?$Be(this.transform.as):this.transform.from.fields)}},{key:"hash",value:function(){return"Lookup ".concat(kze({transform:this.transform,secondary:this.secondary}))}},{key:"assemble",value:function(){var e;if(this.transform.from.fields)e=Object.assign({values:this.transform.from.fields},this.transform.as?{as:$Be(this.transform.as)}:{});else{var t=this.transform.as;nze(t)||(Vje('If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.'),t="_lookup"),e={as:[t]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},e),this.transform.default?{default:this.transform.default}:{})}}],[{key:"make",value:function(e,t,r,a){var i=t.component.data.sources,o=r.from,u=null;if(function(e){return"data"in e}(o)){var s=bJe(o.data,i);s||(s=new E$e(o.data),i.push(s));var c=t.getName("lookup_".concat(a));u=new qGe(s,c,"lookup",t.component.data.outputNodeRefCounts),t.component.data.outputNodes[c]=u}else if(function(e){return"selection"in e}(o)){var l=o.selection;if(r=Object.assign({as:l},r),!(u=t.getSelectionComponent(Bze(l),l).materialized))throw new Error('Cannot define and lookup the "'.concat(l,'" selection in the same view. ')+"Try moving the lookup into a second, layered view?")}return new n(e,r,u.getSource())}}]),n}(VGe),rJe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r){var a,i,o,u;(0,ud.Z)(this,n),(a=t.call(this,e)).transform=r,a.transform=yze(r);var s=null!==(i=a.transform.as)&&void 0!==i?i:[void 0,void 0];return a.transform.as=[null!==(o=s[0])&&void 0!==o?o:"prob",null!==(u=s[1])&&void 0!==u?u:"value"],a}return(0,sd.Z)(n,[{key:"clone",value:function(){return new n(null,yze(this.transform))}},{key:"dependentFields",value:function(){var e;return new Set([this.transform.quantile].concat((0,$n.Z)(null!==(e=this.transform.groupby)&&void 0!==e?e:[])))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"QuantileTransform ".concat(kze(this.transform))}},{key:"assemble",value:function(){var e=this.transform,t=e.quantile,n=ize(e,["quantile"]);return Object.assign({type:"quantile",field:t},n)}}]),n}(VGe),aJe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r){var a,i,o,u;(0,ud.Z)(this,n),(a=t.call(this,e)).transform=r,a.transform=yze(r);var s=null!==(i=a.transform.as)&&void 0!==i?i:[void 0,void 0];return a.transform.as=[null!==(o=s[0])&&void 0!==o?o:r.on,null!==(u=s[1])&&void 0!==u?u:r.regression],a}return(0,sd.Z)(n,[{key:"clone",value:function(){return new n(null,yze(this.transform))}},{key:"dependentFields",value:function(){var e;return new Set([this.transform.regression,this.transform.on].concat((0,$n.Z)(null!==(e=this.transform.groupby)&&void 0!==e?e:[])))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"RegressionTransform ".concat(kze(this.transform))}},{key:"assemble",value:function(){var e=this.transform,t=e.regression,n=e.on,r=ize(e,["regression","on"]);return Object.assign({type:"regression",x:n,y:t},r)}}]),n}(VGe),iJe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r){var a;return(0,ud.Z)(this,n),(a=t.call(this,e)).transform=r,a}return(0,sd.Z)(n,[{key:"clone",value:function(){return new n(null,yze(this.transform))}},{key:"addDimensions",value:function(e){var t;this.transform.groupby=Nze((null!==(t=this.transform.groupby)&&void 0!==t?t:[]).concat(e),(function(e){return e}))}},{key:"producedFields",value:function(){}},{key:"dependentFields",value:function(){var e;return new Set([this.transform.pivot,this.transform.value].concat((0,$n.Z)(null!==(e=this.transform.groupby)&&void 0!==e?e:[])))}},{key:"hash",value:function(){return"PivotTransform ".concat(kze(this.transform))}},{key:"assemble",value:function(){var e=this.transform,t=e.pivot,n=e.value,r=e.groupby,a=e.limit,i=e.op;return Object.assign(Object.assign(Object.assign({type:"pivot",field:t,value:n},void 0!==a?{limit:a}:{}),void 0!==i?{op:i}:{}),void 0!==r?{groupby:r}:{})}}]),n}(VGe),oJe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r){var a;return(0,ud.Z)(this,n),(a=t.call(this,e)).transform=r,a}return(0,sd.Z)(n,[{key:"clone",value:function(){return new n(null,yze(this.transform))}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){return new Set}},{key:"hash",value:function(){return"SampleTransform ".concat(kze(this.transform))}},{key:"assemble",value:function(){return{type:"sample",size:this.transform.sample}}}]),n}(VGe);function uJe(e){var t=0;return function n(r,a){var i,o,u;if(r instanceof E$e&&(r.isGenerator||UHe(r.data)||(e.push(a),a={name:null,source:a.name,transform:[]})),r instanceof j$e&&(r.parent instanceof E$e&&!a.source?(a.format=Object.assign(Object.assign({},null!==(i=a.format)&&void 0!==i?i:{}),{parse:r.assembleFormatParse()}),(o=a.transform).push.apply(o,(0,$n.Z)(r.assembleTransforms(!0)))):(u=a.transform).push.apply(u,(0,$n.Z)(r.assembleTransforms()))),r instanceof Z$e){a.name||(a.name="data_".concat(t++)),!a.source||a.transform.length>0?(e.push(a),r.data=a.name):r.data=a.source;var s,c=(0,zt.Z)(r.assemble());try{for(c.s();!(s=c.n()).done;){var l=s.value;e.push(l)}}catch(v){c.e(v)}finally{c.f()}}else{var f;if((r instanceof N$e||r instanceof T$e||r instanceof YQe||r instanceof oKe||r instanceof AKe||r instanceof JQe||r instanceof QQe||r instanceof R$e||r instanceof nJe||r instanceof q$e||r instanceof W$e||r instanceof $Qe||r instanceof KQe||r instanceof XQe||r instanceof tJe||r instanceof rJe||r instanceof aJe||r instanceof U$e||r instanceof oJe||r instanceof iJe)&&a.transform.push(r.assemble()),r instanceof C$e||r instanceof HGe||r instanceof eJe||r instanceof V$e)(f=a.transform).push.apply(f,(0,$n.Z)(r.assemble()));if(r instanceof qGe)if(a.source&&0===a.transform.length)r.setSource(a.source);else if(r.parent instanceof qGe)r.setSource(a.name);else{if(a.name||(a.name="data_".concat(t++)),r.setSource(a.name),1===r.numChildren())e.push(a),a={name:null,source:a.name,transform:[]}}switch(r.numChildren()){case 0:r instanceof qGe&&(!a.source||a.transform.length>0)&&e.push(a);break;case 1:n(r.children[0],a);break;default:a.name||(a.name="data_".concat(t++));var h=a.name;!a.source||a.transform.length>0?e.push(a):h=a.source;var d,p=(0,zt.Z)(r.children);try{for(p.s();!(d=p.n()).done;){n(d.value,{name:null,source:h,transform:[]})}}catch(v){p.e(v)}finally{p.f()}}}}}function sJe(e,t){var n,r,a,i=[],o=uJe(i),u=0,s=(0,zt.Z)(e.sources);try{for(s.s();!(a=s.n()).done;){var c=a.value;c.hasName()||(c.dataName="source_".concat(u++));var l=c.assemble();o(c,l)}}catch(T){s.e(T)}finally{s.f()}for(var f=0,h=i;f<h.length;f++){var d=h[f];0===d.transform.length&&delete d.transform}var p,v=0,g=(0,zt.Z)(i.entries());try{for(g.s();!(p=g.n()).done;){var m=(0,gc.Z)(p.value,2),y=m[0],b=m[1];0!==(null!==(n=b.transform)&&void 0!==n?n:[]).length||b.source||i.splice(v++,0,i.splice(y,1)[0])}}catch(T){g.e(T)}finally{g.f()}for(var x=0,w=i;x<w.length;x++){var k,_=w[x],S=(0,zt.Z)(null!==(r=_.transform)&&void 0!==r?r:[]);try{for(S.s();!(k=S.n()).done;){var C=k.value;"lookup"===C.type&&(C.from=e.outputNodes[C.from].getSource())}}catch(T){S.e(T)}finally{S.f()}}for(var E=0,A=i;E<A.length;E++){var N=A[E];N.name in t&&(N.values=t[N.name])}return i}function cJe(e){return"top"===e||"left"===e||lUe(e)?"header":"footer"}function lJe(e,t){var n,r=e.facet,a=e.config,i=e.child,o=e.component;if(e.channelHasField(t)){var u=r[t],s=MKe("title",null,a,t),c=wVe(u,a,{allowDisabling:!0,includeDefault:void 0===s||!!s});i.component.layoutHeaders[t].title&&(c=qBe(c)?c.join(", "):c,c+=" / "+i.component.layoutHeaders[t].title,i.component.layoutHeaders[t].title=null);var l=MKe("labelOrient",u,a,t),f=Xze((null!==(n=u.header)&&void 0!==n?n:{}).labels,a.header.labels,!0),h=Sze(["bottom","right"],l)?"footer":"header";o.layoutHeaders[t]=(0,Ir.Z)({title:c,facetFieldDef:u},h,"facet"===t?[]:[fJe(e,t,f)])}}function fJe(e,t,n){var r="row"===t?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function hJe(e,t){var n,r=e.child;if(r.component.axes[t]){var a=e.component,i=a.layoutHeaders,o=a.resolve;if(o.axis[t]=$Ke(o,t),"shared"===o.axis[t]){var u,s="x"===t?"column":"row",c=i[s],l=(0,zt.Z)(r.component.axes[t]);try{for(l.s();!(u=l.n()).done;){var f=u.value,h=cJe(f.get("orient"));c[h]=null!==(n=c[h])&&void 0!==n?n:[fJe(e,s,!1)];var d=hKe(f,"main",e.config,{header:!0});d&&c[h][0].axes.push(d),f.mainExtracted=!0}}catch(p){l.e(p)}finally{l.f()}}}}function dJe(e){pJe(e);var t=1===e.layout.columns?"width":"childWidth",n=void 0===e.layout.columns?"height":"childHeight";vJe(e,t),vJe(e,n)}function pJe(e){var t,n=(0,zt.Z)(e.children);try{for(n.s();!(t=n.n()).done;){t.value.parseLayoutSize()}}catch(r){n.e(r)}finally{n.f()}}function vJe(e,t){var n,r,a=XKe(t),i=GPe(a),o=e.component.resolve,u=e.component.layoutSize,s=(0,zt.Z)(e.children);try{for(s.s();!(r=s.n()).done;){var c=r.value.component.layoutSize.getWithExplicit(a),l=o.scale[i];if("independent"===l&&"step"===c.value){n=void 0;break}if(n){if("independent"===l&&n.value!==c.value){n=void 0;break}n=PHe(n,c,a,"")}else n=c}}catch(p){s.e(p)}finally{s.f()}if(n){var f,h=(0,zt.Z)(e.children);try{for(h.s();!(f=h.n()).done;){var d=f.value;e.renameSignal(d.getName(a),e.getName(t)),d.component.layoutSize.set(a,"merged",!1)}}catch(p){h.e(p)}finally{h.f()}u.setWithExplicit(t,n)}else u.setWithExplicit(t,{explicit:!1,value:void 0})}function gJe(e,t){var n="width"===t?"x":"y",r=e.config,a=e.getScaleComponent(n);if(a){var i=a.get("type"),o=a.get("range");if(oWe(i)){var u=Wqe(r.view,t);return fUe(o)||zqe(u)?"step":u}return jqe(r.view,t)}if(e.hasProjection||"arc"===e.mark)return jqe(r.view,t);var s=Wqe(r.view,t);return zqe(s)?s.step:s}function mJe(e,t,n){return dVe(t,Object.assign({suffix:"by_".concat(dVe(e))},null!==n&&void 0!==n?n:{}))}var yJe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r,a,i){var o;return(0,ud.Z)(this,n),(o=t.call(this,e,"facet",r,a,i,e.resolve)).child=YJe(e.spec,(0,By.Z)(o),o.getName("child"),void 0,i),o.children=[o.child],o.facet=o.initFacet(e.facet,i),o}return(0,sd.Z)(n,[{key:"initFacet",value:function(e,t){return VWe(e)?nqe(e,(function(e,n,r){return Sze([jLe,ULe],r)?void 0===n.field?(Vje(Sje(n,r)),e):(e[r]=AVe(n,r,t),e):(Vje(Cje(r,"facet")),e)}),{}):{facet:AVe(e,"facet",t)}}},{key:"channelHasField",value:function(e){return!!this.facet[e]}},{key:"fieldDef",value:function(e){return this.facet[e]}},{key:"parseData",value:function(){this.component.data=wJe(this),this.child.parseData()}},{key:"parseLayoutSize",value:function(){pJe(this)}},{key:"parseSelections",value:function(){this.child.parseSelections(),this.component.selection=this.child.component.selection}},{key:"parseMarkGroup",value:function(){this.child.parseMarkGroup()}},{key:"parseAxesAndHeaders",value:function(){this.child.parseAxesAndHeaders(),function(e){var t,n=(0,zt.Z)(NPe);try{for(n.s();!(t=n.n()).done;)lJe(e,t.value)}catch(r){n.e(r)}finally{n.f()}hJe(e,"x"),hJe(e,"y")}(this)}},{key:"assembleSelectionTopLevelSignals",value:function(e){return this.child.assembleSelectionTopLevelSignals(e)}},{key:"assembleSignals",value:function(){return this.child.assembleSignals(),[]}},{key:"assembleSelectionData",value:function(e){return this.child.assembleSelectionData(e)}},{key:"getHeaderLayoutMixins",value:function(){var e,t,n,r,a={},i=(0,zt.Z)(NPe);try{for(i.s();!(r=i.n()).done;){var o,u=r.value,s=(0,zt.Z)(IKe);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=this.component.layoutHeaders[u],f=l[c],h=l.facetFieldDef;if(h){var d=MKe("titleOrient",h,this.config,u);if(Sze(["right","bottom"],d)){var p=TKe(u,d);a.titleAnchor=null!==(e=a.titleAnchor)&&void 0!==e?e:{},a.titleAnchor[p]="end"}}if(null===f||void 0===f?void 0:f[0]){var v="row"===u?"height":"width",g="header"===c?"headerBand":"footerBand";"facet"===u||this.child.component.layoutSize.get(v)||(a[g]=null!==(t=a[g])&&void 0!==t?t:{},a[g][u]=.5),l.title&&(a.offset=null!==(n=a.offset)&&void 0!==n?n:{},a.offset["row"===u?"rowTitle":"columnTitle"]=10)}}}catch(m){s.e(m)}finally{s.f()}}}catch(m){i.e(m)}finally{i.f()}return a}},{key:"assembleDefaultLayout",value:function(){var e=this.facet,t=e.column,n=e.row,r=t?this.columnDistinctSignal():n?1:void 0,a="all";return(n||"independent"!==this.component.resolve.scale.x)&&(t||"independent"!==this.component.resolve.scale.y)||(a="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),r?{columns:r}:{}),{bounds:"full",align:a})}},{key:"assembleLayoutSignals",value:function(){return this.child.assembleLayoutSignals()}},{key:"columnDistinctSignal",value:function(){if(!(this.parent&&this.parent instanceof n)){var e=this.getName("column_domain");return{signal:"length(data('".concat(e,"'))")}}}},{key:"assembleGroup",value:function(e){return this.parent&&this.parent instanceof n?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:dVe(this.facet.column,{prefix:"distinct"})}}}}:{}),(0,zy.Z)((0,Ly.Z)(n.prototype),"assembleGroup",this).call(this,e)):(0,zy.Z)((0,Ly.Z)(n.prototype),"assembleGroup",this).call(this,e)}},{key:"getCardinalityAggregateForChild",value:function(){var e=[],t=[],r=[];if(this.child instanceof n){if(this.child.channelHasField("column")){var a=dVe(this.child.facet.column);e.push(a),t.push("distinct"),r.push("distinct_".concat(a))}}else{var i,o=(0,zt.Z)(WPe);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=this.child.component.scales[u];if(s&&!s.merged){var c=s.get("type"),l=s.get("range");if(oWe(c)&&fUe(l)){var f=wQe(kQe(this.child,u));f?(e.push(f),t.push("distinct"),r.push("distinct_".concat(f))):Vje("Unknown field for ".concat(u,". Cannot calculate view size."))}}}}catch(h){o.e(h)}finally{o.f()}}return{fields:e,ops:t,as:r}}},{key:"assembleFacet",value:function(){var e,t=this.component.data.facetRoot,n=t.name,r=t.data,a=this.facet,i=a.row,o=a.column,u=this.getCardinalityAggregateForChild(),s=u.fields,c=u.ops,l=u.as,f=[],h=(0,zt.Z)(NPe);try{for(h.s();!(e=h.n()).done;){var d=e.value,p=this.facet[d];if(p){f.push(dVe(p));var v=p.bin,g=p.sort;if(aje(v)&&f.push(dVe(p,{binSuffix:"end"})),UWe(g)){var m=g.field,y=g.op,b=void 0===y?zWe:y,x=mJe(p,g);i&&o?(s.push(x),c.push("max"),l.push(x)):(s.push(m),c.push(b),l.push(x))}else if(qBe(g)){var w=NKe(p,d);s.push(w),c.push("max"),l.push(w)}}}}catch(_){h.e(_)}finally{h.f()}var k=!!i&&!!o;return Object.assign({name:n,data:r,groupby:f},k||s.length>0?{aggregate:Object.assign(Object.assign({},k?{cross:k}:{}),s.length?{fields:s,ops:c,as:l}:{})}:{})}},{key:"facetSortFields",value:function(e){var t=this.facet[e];return t?UWe(t.sort)?[mJe(t,t.sort,{expr:"datum"})]:qBe(t.sort)?[NKe(t,e,{expr:"datum"})]:[dVe(t,{expr:"datum"})]:[]}},{key:"facetSortOrder",value:function(e){var t=this.facet[e];if(t){var n=t.sort;return[(UWe(n)?n.order:!qBe(n)&&n)||"ascending"]}return[]}},{key:"assembleLabelTitle",value:function(){var e=this.facet,t=this.config;if(e.facet)return LKe(e.facet,"facet",t);var n,r={row:["top","bottom"],column:["left","right"]},a=(0,zt.Z)(FKe);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(e[i]){var o=MKe("labelOrient",e[i],t,i);if(Sze(r[i],o))return LKe(e[i],i,t)}}}catch(u){a.e(u)}finally{a.f()}}},{key:"assembleMarks",value:function(){var e=this,t=this.child,n=function(e){var t,n=[],r=uJe(n),a=(0,zt.Z)(e.children);try{for(a.s();!(t=a.n()).done;)r(t.value,{source:e.name,name:null,transform:[]})}catch(i){a.e(i)}finally{a.f()}return n}(this.component.data.facetRoot),r=t.assembleGroupEncodeEntry(!1),a=this.assembleLabelTitle()||t.assembleTitle(),i=t.assembleGroupStyle(),o=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},a?{title:a}:{}),i?{style:i}:{}),{from:{facet:this.assembleFacet()},sort:{field:NPe.map((function(t){return e.facetSortFields(t)})).flat(),order:NPe.map((function(t){return e.facetSortOrder(t)})).flat()}}),n.length>0?{data:n}:{}),r?{encode:{update:r}}:{}),t.assembleGroup(function(e,t){if(e.component.selection&&Ize(e.component.selection).length){var n=rze(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:MBe("mousemove","scope"),update:"isTuple(facet) ? facet : group(".concat(n,").datum")}]})}return yXe(t)}(this,[])));return[o]}},{key:"getMapping",value:function(){return this.facet}}]),n}(GQe);function bJe(e,t){var n,r,a,i,o,u,s,c,l,f,h,d=(0,zt.Z)(t);try{for(d.s();!(h=d.n()).done;){var p=h.value,v=p.data;if((!e.name||!p.hasName()||e.name===p.dataName)&&((!(null===(n=e.format)||void 0===n?void 0:n.mesh)||!(null===(r=v.format)||void 0===r?void 0:r.feature))&&(!(null===(a=e.format)||void 0===a?void 0:a.feature)&&!(null===(i=v.format)||void 0===i?void 0:i.feature)||(null===(o=e.format)||void 0===o?void 0:o.feature)===(null===(u=v.format)||void 0===u?void 0:u.feature))&&(!(null===(s=e.format)||void 0===s?void 0:s.mesh)&&!(null===(c=v.format)||void 0===c?void 0:c.mesh)||(null===(l=e.format)||void 0===l?void 0:l.mesh)===(null===(f=v.format)||void 0===f?void 0:f.mesh))))if(WHe(e)&&WHe(v)){if(mze(e.values,v.values))return p}else if(UHe(e)&&UHe(v)){if(e.url===v.url)return p}else if(VHe(e)&&e.name===p.dataName)return p}}catch(g){d.e(g)}finally{d.f()}return null}function xJe(e,t){if(e.data||!e.parent){if(null===e.data){var n=new E$e({values:[]});return t.push(n),n}var r=bJe(e.data,t);if(r)return qHe(e.data)||(r.data.format=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0,i=n;a<i.length;a++){var o=i[a];Aze(e,null!==o&&void 0!==o?o:{})}return e}({},e.data.format,r.data.format)),!r.hasName()&&e.data.name&&(r.dataName=e.data.name),r;var a=new E$e(e.data);return t.push(a),a}return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function wJe(e){var t,n,r,a,i,o,u,s,c,l,f=xJe(e,e.component.data.sources),h=e.component.data,d=h.outputNodes,p=h.outputNodeRefCounts,v=e.parent?e.parent.component.data.ancestorParse.clone():new jHe,g=e.data;qHe(g)?(HHe(g)?f=new T$e(f,g.sequence):XHe(g)&&(f=new N$e(f,g.graticule)),v.parseNothing=!0):null===(null===(t=null===g||void 0===g?void 0:g.format)||void 0===t?void 0:t.parse)&&(v.parseNothing=!0),f=null!==(n=j$e.makeExplicit(f,e,v))&&void 0!==n?n:f,f=new U$e(f);var m=e.parent&&qQe(e.parent);(UQe(e)||WQe(e))&&m&&(f=null!==(r=C$e.makeFromEncoding(f,e))&&void 0!==r?r:f),e.transforms.length>0&&(f=function(e,t,n){var r,a,i,o=0,u=(0,zt.Z)(t.transforms);try{for(u.s();!(i=u.n()).done;){var s=i.value,c=void 0,l=void 0;if(sGe(s))l=e=new AKe(e,s),c="derived";else if($He(s)){var f=L$e(s);l=e=null!==(r=j$e.makeWithAncestors(e,{},f,n))&&void 0!==r?r:e,e=new oKe(e,t,s.filter)}else if(cGe(s))l=e=C$e.makeFromTransform(e,s,t),c="number";else if(fGe(s))c="date",void 0===n.getWithExplicit(s.field).value&&(e=new j$e(e,(0,Ir.Z)({},s.field,c)),n.set(s.field,c,!1)),l=e=HGe.makeFromTransform(e,s);else if(hGe(s))l=e=R$e.makeFromTransform(e,s),c="number",OXe(t)&&(e=new U$e(e));else if(QHe(s))l=e=nJe.make(e,t,s,o++),c="derived";else if(iGe(s))l=e=new q$e(e,s),c="number";else if(oGe(s))l=e=new W$e(e,s),c="number";else if(dGe(s))l=e=V$e.makeFromTransform(e,s),c="derived";else if(pGe(s))l=e=new $Qe(e,s),c="derived";else if(uGe(s))l=e=new KQe(e,s),c="derived";else if(JHe(s))l=e=new iJe(e,s),c="derived";else if(aGe(s))e=new oJe(e,s);else if(lGe(s))l=e=eJe.makeFromTransform(e,s),c="derived";else if(eGe(s))l=e=new XQe(e,s),c="derived";else if(tGe(s))l=e=new rJe(e,s),c="derived";else if(nGe(s))l=e=new aJe(e,s),c="derived";else{if(!rGe(s)){Vje(xje(s));continue}l=e=new tJe(e,s),c="derived"}if(l&&void 0!==c){var h,d=(0,zt.Z)(null!==(a=l.producedFields())&&void 0!==a?a:[]);try{for(d.s();!(h=d.n()).done;){var p=h.value;n.set(p,c,!1)}}catch(v){d.e(v)}finally{d.f()}}}}catch(v){u.e(v)}finally{u.f()}return e}(f,e,v));var y=function(e){var t={};if(UQe(e)&&e.component.selection){var n,r=(0,zt.Z)(Ize(e.component.selection));try{for(r.s();!(n=r.n()).done;){var a,i=n.value,o=e.component.selection[i],u=(0,zt.Z)(o.project.items);try{for(u.s();!(a=u.n()).done;){var s=a.value;!s.channel&&Gze(s.field)>1&&(t[s.field]="flatten")}}catch(c){u.e(c)}finally{u.f()}}}catch(c){r.e(c)}finally{r.f()}}return t}(e),b=P$e(e);f=null!==(a=j$e.makeWithAncestors(f,{},Object.assign(Object.assign({},y),b),v))&&void 0!==a?a:f,UQe(e)&&(f=QQe.parseAll(f,e),f=JQe.parseAll(f,e)),(UQe(e)||WQe(e))&&(m||(f=null!==(i=C$e.makeFromEncoding(f,e))&&void 0!==i?i:f),f=null!==(o=HGe.makeFromEncoding(f,e))&&void 0!==o?o:f,f=AKe.parseAllForSortIndex(f,e));var x=e.getName(KHe),w=new qGe(f,x,KHe,p);if(d[x]=w,f=w,UQe(e)){var k=R$e.makeFromEncoding(f,e);k&&(f=k,OXe(e)&&(f=new U$e(f))),f=null!==(u=eJe.makeFromEncoding(f,e))&&void 0!==u?u:f,f=null!==(s=V$e.makeFromEncoding(f,e))&&void 0!==s?s:f}UQe(e)&&(f=null!==(c=YQe.make(f,e))&&void 0!==c?c:f);var _=e.getName(YHe),S=new qGe(f,_,YHe,p);d[_]=S,f=S,UQe(e)&&function(e,t){DXe(e,(function(n){var r=n.name,a=e.getName("lookup_".concat(r));e.component.data.outputNodes[a]=n.materialized=new qGe(new oKe(t,e,{selection:r}),a,"lookup",e.component.data.outputNodeRefCounts)}))}(e,S);var C=null;if(WQe(e)){var E=e.getName("facet");f=null!==(l=function(e,t){var n=t.row,r=t.column;if(n&&r){for(var a=null,i=0,o=[n,r];i<o.length;i++){var u=o[i];if(UWe(u.sort)){var s=u.sort,c=s.field,l=s.op;e=a=new W$e(e,{joinaggregate:[{op:void 0===l?zWe:l,field:c,as:mJe(u,u.sort,{forAs:!0})}],groupby:[dVe(u)]})}}return a}return null}(f,e.facet))&&void 0!==l?l:f,C=new Z$e(f,e,E,S.getSource()),d[E]=C}return Object.assign(Object.assign({},e.component.data),{outputNodes:d,outputNodeRefCounts:p,raw:w,main:S,facetRoot:C,ancestorParse:v})}var kJe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r,a,i){var o,u,s,c,l;return(0,ud.Z)(this,n),o=t.call(this,e,"concat",r,a,i,e.resolve),"shared"!==(null===(s=null===(u=e.resolve)||void 0===u?void 0:u.axis)||void 0===s?void 0:s.x)&&"shared"!==(null===(l=null===(c=e.resolve)||void 0===c?void 0:c.axis)||void 0===l?void 0:l.y)||Vje("Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415)."),o.children=o.getChildren(e).map((function(e,t){return YJe(e,(0,By.Z)(o),o.getName("concat_"+t),void 0,i)})),o}return(0,sd.Z)(n,[{key:"parseData",value:function(){this.component.data=wJe(this);var e,t=(0,zt.Z)(this.children);try{for(t.s();!(e=t.n()).done;){e.value.parseData()}}catch(n){t.e(n)}finally{t.f()}}},{key:"parseSelections",value:function(){this.component.selection={};var e,t=(0,zt.Z)(this.children);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.parseSelections();var r,a=(0,zt.Z)(Ize(n.component.selection));try{for(a.s();!(r=a.n()).done;){var i=r.value;this.component.selection[i]=n.component.selection[i]}}catch(o){a.e(o)}finally{a.f()}}}catch(o){t.e(o)}finally{t.f()}}},{key:"parseMarkGroup",value:function(){var e,t=(0,zt.Z)(this.children);try{for(t.s();!(e=t.n()).done;){e.value.parseMarkGroup()}}catch(n){t.e(n)}finally{t.f()}}},{key:"parseAxesAndHeaders",value:function(){var e,t=(0,zt.Z)(this.children);try{for(t.s();!(e=t.n()).done;){e.value.parseAxesAndHeaders()}}catch(n){t.e(n)}finally{t.f()}}},{key:"getChildren",value:function(e){return Zqe(e)?e.vconcat:Bqe(e)?e.hconcat:e.concat}},{key:"parseLayoutSize",value:function(){dJe(this)}},{key:"parseAxisGroup",value:function(){return null}},{key:"assembleSelectionTopLevelSignals",value:function(e){return this.children.reduce((function(e,t){return t.assembleSelectionTopLevelSignals(e)}),e)}},{key:"assembleSignals",value:function(){return this.children.forEach((function(e){return e.assembleSignals()})),[]}},{key:"assembleLayoutSignals",value:function(){var e,t=VKe(this),n=(0,zt.Z)(this.children);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,$n.Z)(r.assembleLayoutSignals()))}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"assembleSelectionData",value:function(e){return this.children.reduce((function(e,t){return t.assembleSelectionData(e)}),e)}},{key:"assembleMarks",value:function(){return this.children.map((function(e){var t=e.assembleTitle(),n=e.assembleGroupStyle(),r=e.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:e.getName("group")},t?{title:t}:{}),n?{style:n}:{}),r?{encode:{update:r}}:{}),e.assembleGroup())}))}},{key:"assembleDefaultLayout",value:function(){var e=this.layout.columns;return Object.assign(Object.assign({},null!=e?{columns:e}:{}),{bounds:"full",align:"each"})}}]),n}(HQe);var _Je=Object.assign(Object.assign({disable:1,gridScale:1,scale:1},rLe),{labelExpr:1,encode:1}),SJe=Ize(_Je),CJe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,ud.Z)(this,n),(e=t.call(this)).explicit=r,e.implicit=a,e.mainExtracted=i,e}return(0,sd.Z)(n,[{key:"clone",value:function(){return new n(yze(this.explicit),yze(this.implicit),this.mainExtracted)}},{key:"hasAxisPart",value:function(e){return"axis"===e||("grid"===e||"title"===e?!!this.get(e):!(!1===(t=this.get(e))||null===t));var t}},{key:"hasOrientSignalRef",value:function(){return lUe(this.explicit.orient)}}]),n}(RHe);var EJe={bottom:"top",top:"bottom",left:"right",right:"left"};function AJe(e,t){if(!e)return t.map((function(e){return e.clone()}));if(e.length===t.length){for(var n=e.length,r=0;r<n;r++){var a=e[r],i=t[r];if(!!a!==!!i)return;if(a&&i){var o=a.getWithExplicit("orient"),u=i.getWithExplicit("orient");if(o.explicit&&u.explicit&&o.value!==u.value)return;e[r]=NJe(a,i)}}return e}}function NJe(e,t){var n,r=(0,zt.Z)(SJe);try{var a=function(){var r=n.value,a=PHe(e.getWithExplicit(r),t.getWithExplicit(r),r,"axis",(function(e,t){switch(r){case"title":return YVe(e,t);case"gridScale":return{explicit:e.explicit,value:Xze(e.value,t.value)}}return LHe(e,t,r,"axis")}));e.setWithExplicit(r,a)};for(r.s();!(n=r.n()).done;)a()}catch(i){r.e(i)}finally{r.f()}return e}function TJe(e,t,n,r,a){if("disable"===t)return void 0!==n;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(lUe(n.labelAngle)?n.labelAngle:$ze(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===EKe(r,a))return!0}return e===n[t]}var MJe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function DJe(e,t){var n,r,a,i=t.axis(e),o=new CJe,u=EVe(t.encoding[e]),s=t.mark,c=t.config,l=(null===i||void 0===i?void 0:i.orient)||(null===(n=c["x"===e?"axisX":"axisY"])||void 0===n?void 0:n.orient)||(null===(r=c.axis)||void 0===r?void 0:r.orient)||function(e){return"x"===e?"bottom":"left"}(e),f=t.getScaleComponent(e).get("type"),h=bKe(e,f,l,t.config),d=void 0!==i?!i:wKe("disable",c,null===i||void 0===i?void 0:i.style,h).configValue;if(o.set("disable",d,void 0!==i),d)return o;var p,v=function(e,t,n,r,a){var i=null===t||void 0===t?void 0:t.labelAngle;if(void 0!==i)return lUe(i)?i:$ze(i);var o=wKe("labelAngle",e.config,null===t||void 0===t?void 0:t.style,a).configValue;return void 0!==o?$ze(o):n===VLe&&Sze([OUe,FUe],r.type)?270:void 0}(t,i=i||{},e,u,h),g={fieldOrDatumDef:u,axis:i,channel:e,model:t,scaleType:f,orient:l,labelAngle:v,mark:s,config:c},m=(0,zt.Z)(SJe);try{for(m.s();!(p=m.n()).done;){var y=p.value,b=y in kKe?kKe[y](g):iLe(y)?i[y]:void 0,x=void 0!==b,w=TJe(b,y,i,t,e);if(x&&w)o.set(y,b,w);else{var k=iLe(y)&&"values"!==y?wKe(y,t.config,i.style,h):{},_=k.configValue,S=void 0===_?void 0:_,C=k.configFrom,E=void 0===C?void 0:C,A=void 0!==S;x&&!A?o.set(y,b,w):("vgAxisConfig"!==E||MJe.has(y)&&A||eLe(S)||lUe(S))&&o.set(y,S,!1)}}}catch(M){m.e(M)}finally{m.f()}var N=null!==(a=i.encoding)&&void 0!==a?a:{},T=tLe.reduce((function(n,r){var a;if(!o.hasAxisPart(r))return n;var i=YKe(null!==(a=N[r])&&void 0!==a?a:{},t),u="labels"===r?function(e,t,n){var r,a=e.encoding,i=e.config,o=null!==(r=EVe(a[t]))&&void 0!==r?r:EVe(a[zPe(t)]),u=e.axis(t)||{},s=u.format,c=u.formatType;return AWe(c)?Object.assign({text:DWe({fieldOrDatumDef:o,field:"datum.value",format:s,formatType:c,config:i})},n):n}(t,e,i):i;return void 0===u||Fze(u)||(n[r]={update:u}),n}),{});return Fze(T)||o.set("encode",T,!!i.encoding||void 0!==i.labelAngle),o}function FJe(e){var t,n=e.encoding,r=e.size,a=(0,zt.Z)(WPe);try{for(a.s();!(t=a.n()).done;){var i=t.value,o=LPe(i);zqe(r[o])&&rVe(n[i])&&(delete r[o],Vje(Fje(o)))}}catch(u){a.e(u)}finally{a.f()}return r}function IJe(e,t,n,r){var a,i,o=r.graticule,u=SLe(e)?Object.assign({},e):{type:e},s=UVe("orient",u,n);if(u.orient=function(e,t,n){switch(e){case hLe:case yLe:case bLe:case vLe:case dLe:case lLe:return}var r=t.x,a=t.y,i=t.x2,o=t.y2;switch(e){case cLe:if(eVe(r)&&(ije(r.bin)||eVe(a)&&a.aggregate&&!r.aggregate))return"vertical";if(eVe(a)&&(ije(a.bin)||eVe(r)&&r.aggregate&&!a.aggregate))return"horizontal";if(o||i){if(n)return n;if(!i&&(eVe(r)&&r.type===DUe&&!aje(r.bin)||aVe(r)))return"horizontal";if(!o&&(eVe(a)&&a.type===DUe&&!aje(a.bin)||aVe(a)))return"vertical"}case pLe:if(i&&(!eVe(r)||!ije(r.bin))&&o&&(!eVe(a)||!ije(a.bin)))return;case sLe:if(o)return eVe(a)&&ije(a.bin)?"horizontal":"vertical";if(i)return eVe(r)&&ije(r.bin)?"vertical":"horizontal";if(e===pLe){if(r&&!a)return"vertical";if(a&&!r)return"horizontal"}case fLe:case gLe:var u=rVe(r),s=rVe(a);if(u&&!s)return"tick"!==e?"horizontal":"vertical";if(!u&&s)return"tick"!==e?"vertical":"horizontal";if(u&&s){var c=r,l=a,f=c.type===IUe,h=l.type===IUe;return f&&!h?"tick"!==e?"vertical":"horizontal":!f&&h?"tick"!==e?"horizontal":"vertical":!c.aggregate&&l.aggregate?"tick"!==e?"vertical":"horizontal":c.aggregate&&!l.aggregate?"tick"!==e?"horizontal":"vertical":n||"vertical"}return n||void 0}return"vertical"}(u.type,t,s),void 0!==s&&s!==u.orient&&Vje((a=u.orient,i=s,'Specified orient "'.concat(a,'" overridden with "').concat(i,'".'))),"bar"===u.type&&u.orient){var c=UVe("cornerRadiusEnd",u,n);if(void 0!==c){var l,f="horizontal"===u.orient&&t.x2||"vertical"===u.orient&&t.y2?["cornerRadius"]:ALe[u.orient],h=(0,zt.Z)(f);try{for(h.s();!(l=h.n()).done;){u[l.value]=c}}catch(d){h.e(d)}finally{h.f()}void 0!==u.cornerRadiusEnd&&delete u.cornerRadiusEnd}}return void 0===UVe("opacity",u,n)&&(u.opacity=function(e,t){if(Sze([hLe,gLe,yLe,bLe],e)&&!$Ve(t))return.7;return}(u.type,t)),void 0===u.filled&&(u.filled=!o&&function(e,t){var n=WVe("filled",e,t),r=e.type;return Xze(n,r!==hLe&&r!==fLe&&r!==pLe)}(u,n)),void 0===UVe("cursor",u,n)&&(u.cursor=function(e,t,n){if(t.href||e.href||UVe("href",e,n))return"pointer";return e.cursor}(u,t,n)),u}function OJe(e,t){e.config;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},BGe(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),CGe("x",e,{defaultPos:"mid"})),CGe("y",e,{defaultPos:"mid"})),kGe("size",e)),kGe("angle",e)),function(e,t,n){if(n)return{shape:{value:n}};return kGe("shape",e)}(e,0,t))}var RJe={vgMark:"rule",encodeEntry:function(e){var t=e.markDef.orient;return e.encoding.x||e.encoding.y||e.encoding.latitude||e.encoding.longitude?Object.assign(Object.assign(Object.assign(Object.assign({},BGe(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),MGe("x",e,{defaultPos:"horizontal"===t?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==t})),MGe("y",e,{defaultPos:"vertical"===t?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==t})),kGe("size",e,{vgChannel:"strokeWidth"})):{}}};var ZJe={vgMark:"rect",encodeEntry:function(e){var t=e.config,n=e.markDef,r=n.orient,a="horizontal"===r?"width":"height",i="horizontal"===r?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},BGe(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),CGe("x",e,{defaultPos:"mid",vgChannel:"xc"})),CGe("y",e,{defaultPos:"mid",vgChannel:"yc"})),kGe("size",e,{defaultValue:BJe(e),vgChannel:a})),(0,Ir.Z)({},i,zVe(UVe("thickness",n,t))))}};function BJe(e){var t,n=e.config,r=e.markDef,a=r.orient,i="horizontal"===a?"width":"height",o=e.getScaleComponent("horizontal"===a?"x":"y"),u=null!==(t=UVe("size",r,n,{vgChannel:i}))&&void 0!==t?t:n.tick.bandSize;if(void 0!==u)return u;var s=o?o.get("range"):void 0;return s&&fUe(s)&&tze(s.step)?3*s.step/4:3*Uqe(n.view,i)/4}var zJe={arc:{vgMark:"arc",encodeEntry:function(e){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},BGe(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),CGe("x",e,{defaultPos:"mid"})),CGe("y",e,{defaultPos:"mid"})),IGe(e,"radius","arc")),IGe(e,"theta","arc"))}},area:{vgMark:"area",encodeEntry:function(e){return Object.assign(Object.assign(Object.assign(Object.assign({},BGe(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),MGe("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===e.markDef.orient})),MGe("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===e.markDef.orient})),LGe(e))}},bar:{vgMark:"rect",encodeEntry:function(e){return Object.assign(Object.assign(Object.assign({},BGe(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),IGe(e,"x","bar")),IGe(e,"y","bar"))}},circle:{vgMark:"symbol",encodeEntry:function(e){return OJe(e,"circle")}},geoshape:{vgMark:"shape",encodeEntry:function(e){return Object.assign({},BGe(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}))},postEncodingTransform:function(e){var t=e.encoding.shape;return[Object.assign({type:"geoshape",projection:e.projectionName()},t&&eVe(t)&&t.type===RUe?{field:dVe(t,{expr:"datum"})}:{})]}},image:{vgMark:"image",encodeEntry:function(e){return Object.assign(Object.assign(Object.assign(Object.assign({},BGe(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),IGe(e,"x","image")),IGe(e,"y","image")),gGe(e,"url"))}},line:{vgMark:"line",encodeEntry:function(e){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},BGe(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),CGe("x",e,{defaultPos:"mid"})),CGe("y",e,{defaultPos:"mid"})),kGe("size",e,{vgChannel:"strokeWidth"})),LGe(e))}},point:{vgMark:"symbol",encodeEntry:function(e){return OJe(e)}},rect:{vgMark:"rect",encodeEntry:function(e){return Object.assign(Object.assign(Object.assign({},BGe(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),IGe(e,"x","rect")),IGe(e,"y","rect"))}},rule:RJe,square:{vgMark:"symbol",encodeEntry:function(e){return OJe(e,"square")}},text:{vgMark:"text",encodeEntry:function(e){var t=e.config;e.encoding;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},BGe(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),CGe("x",e,{defaultPos:"mid"})),CGe("y",e,{defaultPos:"mid"})),gGe(e)),kGe("size",e,{vgChannel:"fontSize"})),kGe("angle",e)),PGe("align",function(e,t,n){if(void 0===UVe("align",e,n))return"center";return}(e.markDef,0,t))),PGe("baseline",function(e,t,n){if(void 0===UVe("baseline",e,n))return"middle";return}(e.markDef,0,t))),CGe("radius",e,{defaultPos:null,isMidPoint:!0})),CGe("theta",e,{defaultPos:null,isMidPoint:!0}))}},tick:ZJe,trail:{vgMark:"trail",encodeEntry:function(e){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},BGe(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),CGe("x",e,{defaultPos:"mid"})),CGe("y",e,{defaultPos:"mid"})),kGe("size",e)),LGe(e))}}};function LJe(e){return Sze([fLe,sLe,mLe],e.mark)?function(e){var t=rqe(e.mark,e.encoding),n=WJe(e,{fromPrefix:t.length>0?PJe:""});return t.length>0?[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:PJe+e.requestDataName(YHe),data:e.requestDataName(YHe),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:n}]:n}(e):Sze([cLe],e.mark)?function(e){var t=vUe.some((function(t){return UVe(t,e.markDef,e.config)}));if(e.stack&&!e.fieldDef("size")&&t){var n,r,a=WJe(e,{fromPrefix:jJe}),i=(0,gc.Z)(a,1)[0],o=e.scaleName(e.stack.fieldChannel),u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.vgField(e.stack.fieldChannel,t)},s=function(e,t){var n=[u({prefix:"min",suffix:"start",expr:t}),u({prefix:"max",suffix:"start",expr:t}),u({prefix:"min",suffix:"end",expr:t}),u({prefix:"max",suffix:"end",expr:t})];return"".concat(e,"(").concat(n.map((function(e){return"scale('".concat(o,"',").concat(e,")")})).join(","),")")};"x"===e.stack.fieldChannel?(n=Object.assign(Object.assign({},bze(i.encode.update,["y","yc","y2","height"].concat((0,$n.Z)(vUe)))),{x:{signal:s("min","datum")},x2:{signal:s("max","datum")},clip:{value:!0}}),r={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},i.encode.update=Object.assign(Object.assign({},xze(i.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(n=Object.assign(Object.assign({},bze(i.encode.update,["x","xc","x2","width"])),{y:{signal:s("min","datum")},y2:{signal:s("max","datum")},clip:{value:!0}}),r={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},i.encode.update=Object.assign(Object.assign({},xze(i.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));var c,l=(0,zt.Z)(vUe);try{for(l.s();!(c=l.n()).done;){var f=c.value,h=WVe(f,e.markDef,e.config);i.encode.update[f]?(n[f]=i.encode.update[f],delete i.encode.update[f]):h&&(n[f]=zVe(h)),h&&(i.encode.update[f]={value:0})}}catch(v){l.e(v)}finally{l.f()}var d=e.fieldDef(e.stack.groupbyChannel),p=dVe(d)?[dVe(d)]:[];return((null===d||void 0===d?void 0:d.bin)||(null===d||void 0===d?void 0:d.timeUnit))&&p.push(dVe(d,{binSuffix:"end"})),n=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((function(t,n){if(i.encode.update[n])return Object.assign(Object.assign({},t),(0,Ir.Z)({},n,i.encode.update[n]));var r=WVe(n,e.markDef,e.config);return void 0!==r?Object.assign(Object.assign({},t),(0,Ir.Z)({},n,zVe(r))):t}),n),n.stroke&&(n.strokeForeground={value:!0},n.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(YHe),name:jJe+e.requestDataName(YHe),groupby:p,aggregate:{fields:[u({suffix:"start"}),u({suffix:"start"}),u({suffix:"end"}),u({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:n},marks:[{type:"group",encode:{update:r},marks:[i]}]}]}return WJe(e)}(e):WJe(e)}var PJe="faceted_path_";var jJe="stack_group_";function UJe(e){var t=e.encoding,n=e.stack,r=e.mark,a=e.markDef,i=e.config,o=t.order;if(!(!qBe(o)&&uVe(o)&&_ze(o.value)||!o&&_ze(UVe("order",a,i)))){if((qBe(o)||eVe(o))&&!n)return HVe(o,{expr:"datum"});if(wLe(r)){var u="horizontal"===a.orient?"y":"x",s=t[u];if(eVe(s)){var c=s.sort;return qBe(c)?{field:dVe(s,{prefix:u,suffix:"sort_index",expr:"datum"})}:UWe(c)?{field:dVe({aggregate:$Ve(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})}:jWe(c)?{field:dVe(e.fieldDef(c.encoding),{expr:"datum"}),order:c.order}:null===c?void 0:{field:dVe(s,{binSuffix:e.stack&&e.stack.impute?"mid":void 0,expr:"datum"})}}}else;}}function WJe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fromPrefix:""},n=e.mark,r=e.markDef,a=e.config,i=Xze(r.clip,VJe(e),qJe(e)),o=jVe(r),u=e.encoding.key,s=UJe(e),c=HJe(e),l=UVe("aria",r,a),f=zJe[n].postEncodingTransform?zJe[n].postEncodingTransform(e):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName("marks"),type:zJe[n].vgMark},i?{clip:!0}:{}),o?{style:o}:{}),u?{key:u.field}:{}),s?{sort:s}:{}),c||{}),!1===l?{aria:l}:{}),{from:{data:t.fromPrefix+e.requestDataName(YHe)},encode:{update:zJe[n].encodeEntry(e)}}),f?{transform:f}:{})]}function VJe(e){var t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return!!(t&&t.get("selectionExtent")||n&&n.get("selectionExtent"))||void 0}function qJe(e){var t=e.component.projection;return!(!t||t.isFit)||void 0}function HJe(e){if(!e.component.selection)return null;for(var t=Ize(e.component.selection).length,n=t,r=e.parent;r&&0===n;)n=Ize(r.component.selection).length,r=r.parent;return n?{interactive:t>0}:null}var GJe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r,a){var i,o,u,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4?arguments[4]:void 0;(0,ud.Z)(this,n),(i=t.call(this,e,"unit",r,a,c,void 0,Lqe(e)?e.view:void 0)).specifiedScales={},i.specifiedAxes={},i.specifiedLegends={},i.specifiedProjection={},i.selection={},i.children=[];var l=SLe(e.mark)?e.mark.type:e.mark;i.markDef=IJe(e.mark,null!==(o=e.encoding)&&void 0!==o?o:{},c,{graticule:e.data&&XHe(e.data)});var f=i.encoding=JVe(null!==(u=e.encoding)&&void 0!==u?u:{},i.markDef,c);return i.size=FJe({encoding:f,size:Lqe(e)?Object.assign(Object.assign(Object.assign({},s),e.width?{width:e.width}:{}),e.height?{height:e.height}:{}):s}),i.stack=hHe(l,f),i.specifiedScales=i.initScales(l,f),i.specifiedAxes=i.initAxes(f),i.specifiedLegends=i.initLegend(f),i.specifiedProjection=e.projection,i.selection=e.selection,i}return(0,sd.Z)(n,[{key:"hasProjection",get:function(){var e=this.encoding,t=this.mark===xLe,n=e&&SPe.some((function(t){return iVe(e[t])}));return t||n}},{key:"scaleDomain",value:function(e){var t=this.specifiedScales[e];return t?t.domain:void 0}},{key:"axis",value:function(e){return this.specifiedAxes[e]}},{key:"legend",value:function(e){return this.specifiedLegends[e]}},{key:"initScales",value:function(e,t){return $Pe.reduce((function(e,n){var r,a=EVe(t[n]);return a&&(e[n]=null!==(r=a.scale)&&void 0!==r?r:{}),e}),{})}},{key:"initAxes",value:function(e){return WPe.reduce((function(t,n){var r=e[n];if(iVe(r)||n===VLe&&iVe(e.x2)||n===qLe&&iVe(e.y2)){var a=iVe(r)?r.axis:void 0;t[n]=a?Object.assign({},a):a}return t}),{})}},{key:"initLegend",value:function(e){return YPe.reduce((function(t,n){var r=EVe(e[n]);if(r&&function(e){switch(e){case nPe:case rPe:case aPe:case oPe:case iPe:case sPe:case fPe:case hPe:return!0;case cPe:case lPe:case uPe:return!1}}(n)){var a=r.legend;t[n]=a?Object.assign({},a):a}return t}),{})}},{key:"parseData",value:function(){this.component.data=wJe(this)}},{key:"parseLayoutSize",value:function(){!function(e){var t,n=e.size,r=e.component,a=(0,zt.Z)(WPe);try{for(a.s();!(t=a.n()).done;){var i=LPe(t.value);if(n[i]){var o=n[i];r.layoutSize.set(i,zqe(o)?"step":o,!0)}else{var u=gJe(e,i);r.layoutSize.set(i,u,!1)}}}catch(s){a.e(s)}finally{a.f()}}(this)}},{key:"parseSelections",value:function(){this.component.selection=function(e,t){var n,r,a={},i=e.config.selection,o=(0,zt.Z)(Ize(null!==t&&void 0!==t?t:{}));try{var u=function(){var o=r.value,u=yze(t[o]),s=i[u.type],c=(s.fields,s.encodings,ize(s,["fields","encodings"]));for(var l in c)"encodings"===l&&u.fields||"fields"===l&&u.encodings||("mark"===l&&(u[l]=Object.assign(Object.assign({},c[l]),u[l])),void 0!==u[l]&&!0!==u[l]||(u[l]=null!==(n=c[l])&&void 0!==n?n:u[l]));var f=Bze(o),h=a[f]=Object.assign(Object.assign({},u),{name:f,events:nze(u.on)?MBe(u.on,"scope"):yze(u.on)});vXe(h,(function(n){n.has(h)&&n.parse&&n.parse(e,h,u,t[o])}))};for(o.s();!(r=o.n()).done;)u()}catch(s){o.e(s)}finally{o.f()}return a}(this,this.selection)}},{key:"parseMarkGroup",value:function(){this.component.mark=LJe(this)}},{key:"parseAxesAndHeaders",value:function(){var e;this.component.axes=(e=this,WPe.reduce((function(t,n){return e.component.scales[n]&&(t[n]=[DJe(n,e)]),t}),{}))}},{key:"assembleSelectionTopLevelSignals",value:function(e){return function(e,t){var n=!1;if(DXe(e,(function(r,a){var i=r.name,o=rze(i+EXe),u=t.filter((function(e){return e.name===i}));if(0===u.length){var s="global"===r.resolve?"union":r.resolve,c="multi"===r.type?", true)":")";t.push({name:r.name,update:"".concat(TXe,"(").concat(o,", ").concat(rze(s)).concat(c)})}n=!0,a.topLevelSignals&&(t=a.topLevelSignals(e,r,t)),vXe(r,(function(n){n.topLevelSignals&&(t=n.topLevelSignals(e,r,t))}))})),n){var r=t.filter((function(e){return"unit"===e.name}));0===r.length&&t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]})}return yXe(t)}(this,e)}},{key:"assembleSignals",value:function(){return[].concat((0,$n.Z)(dKe(this)),(0,$n.Z)((t=[],DXe(e=this,(function(n,r){var a,i=n.name,o=r.modifyExpr(e,n);(a=t).push.apply(a,(0,$n.Z)(r.signals(e,n))),vXe(n,(function(r){r.signals&&(t=r.signals(e,n,t)),r.modifyExpr&&(o=r.modifyExpr(e,n,o))})),t.push({name:i+NXe,on:[{events:{signal:n.name+AXe},update:"modify(".concat(rze(n.name+EXe),", ").concat(o,")")}]})})),yXe(t))));var e,t}},{key:"assembleSelectionData",value:function(e){return function(e,t){var n=(0,$n.Z)(t);return DXe(e,(function(t){var r={name:t.name+EXe};if(t.init){var a=t.project.items.map((function(e){return e.signals,ize(e,["signals"])})),i=t.init.map((function(e){return gXe(e,!1)}));r.values="interval"===t.type?[{unit:IXe(e,{escape:!1}),fields:a,values:i}]:i.map((function(t){return{unit:IXe(e,{escape:!1}),fields:a,values:t}}))}n.filter((function(e){return e.name===t.name+EXe})).length||n.push(r)})),n}(this,e)}},{key:"assembleLayout",value:function(){return null}},{key:"assembleLayoutSignals",value:function(){return VKe(this)}},{key:"assembleMarks",value:function(){var e,t=null!==(e=this.component.mark)&&void 0!==e?e:[];return this.parent&&qQe(this.parent)||(t=mXe(this,t)),t.map(this.correctDataNames)}},{key:"getMapping",value:function(){return this.encoding}},{key:"mark",get:function(){return this.markDef.type}},{key:"channelHasField",value:function(e){return KVe(this.encoding,e)}},{key:"fieldDef",value:function(e){return CVe(this.encoding[e])}},{key:"typedFieldDef",value:function(e){var t=this.fieldDef(e);return oVe(t)?t:null}}]),n}(GQe),XJe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(e,r,a,i,o){var u;(0,ud.Z)(this,n),u=t.call(this,e,"layer",r,a,o,e.resolve,e.view);var s=Object.assign(Object.assign(Object.assign({},i),e.width?{width:e.width}:{}),e.height?{height:e.height}:{});return u.children=e.layer.map((function(e,t){if(aHe(e))return new n(e,(0,By.Z)(u),u.getName("layer_"+t),s,o);if(MLe(e))return new GJe(e,(0,By.Z)(u),u.getName("layer_"+t),s,o);throw new Error(lje(e))})),u}return(0,sd.Z)(n,[{key:"parseData",value:function(){this.component.data=wJe(this);var e,t=(0,zt.Z)(this.children);try{for(t.s();!(e=t.n()).done;){e.value.parseData()}}catch(n){t.e(n)}finally{t.f()}}},{key:"parseLayoutSize",value:function(){var e;pJe(e=this),vJe(e,"width"),vJe(e,"height")}},{key:"parseSelections",value:function(){this.component.selection={};var e,t=(0,zt.Z)(this.children);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.parseSelections();var r,a=(0,zt.Z)(Ize(n.component.selection));try{for(a.s();!(r=a.n()).done;){var i=r.value;this.component.selection[i]=n.component.selection[i]}}catch(o){a.e(o)}finally{a.f()}}}catch(o){t.e(o)}finally{t.f()}}},{key:"parseMarkGroup",value:function(){var e,t=(0,zt.Z)(this.children);try{for(t.s();!(e=t.n()).done;){e.value.parseMarkGroup()}}catch(n){t.e(n)}finally{t.f()}}},{key:"parseAxesAndHeaders",value:function(){!function(e){var t,n,r=e.component,a=r.axes,i=r.resolve,o={top:0,bottom:0,right:0,left:0},u=(0,zt.Z)(e.children);try{for(u.s();!(n=u.n()).done;){var s=n.value;s.parseAxesAndHeaders();var c,l=(0,zt.Z)(Ize(s.component.axes));try{for(l.s();!(c=l.n()).done;){var f=c.value;i.axis[f]=$Ke(e.component.resolve,f),"shared"===i.axis[f]&&(a[f]=AJe(a[f],s.component.axes[f]),a[f]||(i.axis[f]="independent",delete a[f]))}}catch(N){l.e(N)}finally{l.f()}}}catch(N){u.e(N)}finally{u.f()}var h,d=(0,zt.Z)(WPe);try{for(d.s();!(h=d.n()).done;){var p,v=h.value,g=(0,zt.Z)(e.children);try{for(g.s();!(p=g.n()).done;){var m=p.value;if(m.component.axes[v]){if("independent"===i.axis[v]){a[v]=(null!==(t=a[v])&&void 0!==t?t:[]).concat(m.component.axes[v]);var y,b=(0,zt.Z)(m.component.axes[v]);try{for(b.s();!(y=b.n()).done;){var x=y.value,w=x.getWithExplicit("orient"),k=w.value,_=w.explicit;if(!lUe(k)){if(o[k]>0&&!_){var S=EJe[k];o[k]>o[S]&&x.set("orient",S,!1)}o[k]++}}}catch(N){b.e(N)}finally{b.f()}}delete m.component.axes[v]}}}catch(N){g.e(N)}finally{g.f()}if("independent"===i.axis[v]&&a[v]&&a[v].length>1){var C,E=(0,zt.Z)(a[v]);try{for(E.s();!(C=E.n()).done;){var A=C.value;A.get("grid")&&!A.explicit.grid&&(A.implicit.grid=!1)}}catch(N){E.e(N)}finally{E.f()}}}}catch(N){d.e(N)}finally{d.f()}}(this)}},{key:"assembleSelectionTopLevelSignals",value:function(e){return this.children.reduce((function(e,t){return t.assembleSelectionTopLevelSignals(e)}),e)}},{key:"assembleSignals",value:function(){return this.children.reduce((function(e,t){return e.concat(t.assembleSignals())}),dKe(this))}},{key:"assembleLayoutSignals",value:function(){return this.children.reduce((function(e,t){return e.concat(t.assembleLayoutSignals())}),VKe(this))}},{key:"assembleSelectionData",value:function(e){return this.children.reduce((function(e,t){return t.assembleSelectionData(e)}),e)}},{key:"assembleTitle",value:function(){var e=(0,zy.Z)((0,Ly.Z)(n.prototype),"assembleTitle",this).call(this);if(e)return e;var t,r=(0,zt.Z)(this.children);try{for(r.s();!(t=r.n()).done;){if(e=t.value.assembleTitle())return e}}catch(a){r.e(a)}finally{r.f()}}},{key:"assembleLayout",value:function(){return null}},{key:"assembleMarks",value:function(){return function(e,t){var n,r=(0,zt.Z)(e.children);try{for(r.s();!(n=r.n()).done;){var a=n.value;UQe(a)&&(t=mXe(a,t))}}catch(i){r.e(i)}finally{r.f()}return t}(this,this.children.flatMap((function(e){return e.assembleMarks()})))}},{key:"assembleLegends",value:function(){return this.children.reduce((function(e,t){return e.concat(t.assembleLegends())}),v$e(this))}}]),n}(HQe);function YJe(e,t,n,r,a){if(HWe(e))return new yJe(e,t,n,a);if(aHe(e))return new XJe(e,t,n,r,a);if(MLe(e))return new GJe(e,t,n,r,a);if(function(e){return Zqe(e)||Bqe(e)||Rqe(e)}(e))return new kJe(e,t,n,a);throw new Error(lje(e))}function KJe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.logger&&Uje(t.logger),t.fieldTitle&&bVe(t.fieldTitle);try{var n=Qqe(XBe(t.config,e.config)),r=MHe(e,n),a=YJe(r,null,"",void 0,n);a.parse(),lQe(a.component.data,a);var i=QJe(a,$Je(e,r.autosize,n,a),e.datasets,e.usermeta);return{spec:i,normalized:r}}finally{t.logger&&Wje(),t.fieldTitle&&xVe()}}function $Je(e,t,n,r){var a,i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(void 0===t?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):nze(t)&&(t={type:t}),i&&o&&("fit"===(a=t.type)||"fit-x"===a||"fit-y"===a))if("step"===i&&"step"===o)Vje(pje()),t.type="pad";else if("step"===i||"step"===o){var u="step"===i?"width":"height";Vje(pje(GPe(u)));var s="width"===u?"height":"width";t.type=function(e){return e?"fit-".concat(GPe(e)):"fit"}(s)}return Object.assign(Object.assign(Object.assign({},1===Ize(t).length&&t.type?"pad"===t.type?{}:{autosize:t.type}:{autosize:t}),OHe(n)),OHe(e))}function QJe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,a=e.config?nHe(e.config):void 0,i=[].concat(e.assembleSelectionData([]),sJe(e.component.data,n)),o=e.assembleProjections(),u=e.assembleTitle(),s=e.assembleGroupStyle(),c=e.assembleGroupEncodeEntry(!0),l=e.assembleLayoutSignals();return l=l.filter((function(e){return"width"!==e.name&&"height"!==e.name||void 0===e.value||(t[e.name]=+e.value,!1)})),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},e.description?{description:e.description}:{}),t),u?{title:u}:{}),s?{style:s}:{}),c?{encode:{update:c}}:{}),{data:i}),o.length>0?{projections:o}:{}),e.assembleGroup([].concat((0,$n.Z)(l),(0,$n.Z)(e.assembleSelectionTopLevelSignals([]))))),a?{config:a}:{}),r?{usermeta:r}:{})}var JJe=function(e){(0,Py.Z)(n,e);var t=(0,jy.Z)(n);function n(){return(0,ud.Z)(this,n),t.apply(this,arguments)}return(0,sd.Z)(n,[{key:"mapUnit",value:function(e,t){var n=t.config;if(e.encoding){var r=e.encoding,a=e.transform,i=QVe(r,n),o=i.bins,u=i.timeUnits,s=i.aggregate,c=i.groupby,l=i.encoding,f=[].concat((0,$n.Z)(a||[]),(0,$n.Z)(o),(0,$n.Z)(u),(0,$n.Z)(0===s.length?[]:[{aggregate:s,groupby:c}]));return Object.assign(Object.assign(Object.assign({},e),f.length>0?{transform:f}:{}),{encoding:l})}return e}}]),n}(iHe),e0e=new JJe;function t0e(e,t){return e0e.map(e,{config:t})}var n0e="4.13.1";var r0e=function(e){var t=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3),n=(0,gc.Z)(t,2);return{library:n[0],version:n[1]}},a0e="2.14.0",i0e="#fff",o0e="#888",u0e={background:"#333",view:{stroke:o0e},title:{color:i0e,subtitleColor:i0e},style:{"guide-label":{fill:i0e},"guide-title":{fill:i0e}},axis:{domainColor:i0e,gridColor:o0e,tickColor:i0e}},s0e="#4572a7",c0e={background:"#fff",arc:{fill:s0e},area:{fill:s0e},line:{stroke:s0e,strokeWidth:2},path:{stroke:s0e},rect:{fill:s0e},shape:{stroke:s0e},symbol:{fill:s0e,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},l0e="#30a2da",f0e="#cbcbcb",h0e="#f0f0f0",d0e="#333",p0e={arc:{fill:l0e},area:{fill:l0e},axis:{domainColor:f0e,grid:!0,gridColor:f0e,gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:f0e,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:h0e,group:{fill:h0e},legend:{labelColor:d0e,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:d0e,titleFontSize:14,titlePadding:10},line:{stroke:l0e,strokeWidth:2},path:{stroke:l0e,strokeWidth:.5},rect:{fill:l0e},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:l0e},bar:{binSpacing:2,fill:l0e,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},v0e="#000",g0e={group:{fill:"#e5e5e5"},arc:{fill:v0e},area:{fill:v0e},line:{stroke:v0e},path:{stroke:v0e},rect:{fill:v0e},shape:{stroke:v0e},symbol:{fill:v0e,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},m0e="Benton Gothic, sans-serif",y0e="#82c6df",b0e="Benton Gothic Bold, sans-serif",x0e="normal",w0e={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},k0e={background:"#ffffff",title:{anchor:"start",color:"#000000",font:b0e,fontSize:22,fontWeight:"normal"},arc:{fill:y0e},area:{fill:y0e},line:{stroke:y0e,strokeWidth:2},path:{stroke:y0e},rect:{fill:y0e},shape:{stroke:y0e},symbol:{fill:y0e,size:30},axis:{labelFont:m0e,labelFontSize:11.5,labelFontWeight:"normal",titleFont:b0e,titleFontSize:13,titleFontWeight:x0e},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:m0e,labelFontSize:11.5,symbolType:"square",titleFont:b0e,titleFontSize:13,titleFontWeight:x0e},range:{category:w0e["category-6"],diverging:w0e["fireandice-6"],heatmap:w0e["fire-7"],ordinal:w0e["fire-7"],ramp:w0e["fire-7"]}},_0e="#ab5787",S0e="#979797",C0e={background:"#f9f9f9",arc:{fill:_0e},area:{fill:_0e},line:{stroke:_0e},path:{stroke:_0e},rect:{fill:_0e},shape:{stroke:_0e},symbol:{fill:_0e,size:30},axis:{domainColor:S0e,domainWidth:.5,gridWidth:.2,labelColor:S0e,tickColor:S0e,tickWidth:.2,titleColor:S0e},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},E0e="#3e5c69",A0e={background:"#fff",arc:{fill:E0e},area:{fill:E0e},line:{stroke:E0e},path:{stroke:E0e},rect:{fill:E0e},shape:{stroke:E0e},symbol:{fill:E0e},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},N0e="#1696d2",T0e="#000000",M0e="Lato",D0e="Lato",F0e={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},I0e={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:M0e},axisX:{domain:!0,domainColor:T0e,domainWidth:1,grid:!1,labelFontSize:12,labelFont:D0e,labelAngle:0,tickColor:T0e,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:M0e},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:D0e,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:M0e,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:D0e,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:M0e,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:F0e["six-groups-cat-1"],diverging:F0e["diverging-colors"],heatmap:F0e["diverging-colors"],ordinal:F0e["six-groups-seq"],ramp:F0e["shades-blue"]},area:{fill:N0e},rect:{fill:N0e},line:{color:N0e,stroke:N0e,strokeWidth:5},trail:{color:N0e,stroke:N0e,strokeWidth:0,size:1},path:{stroke:N0e,strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:N0e,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:N0e,stroke:null}},arc:{fill:N0e},shape:{stroke:N0e},symbol:{fill:N0e,size:30}},O0e="#3366CC",R0e="#ccc",Z0e="Arial, sans-serif",B0e={arc:{fill:O0e},area:{fill:O0e},path:{stroke:O0e},rect:{fill:O0e},shape:{stroke:O0e},symbol:{stroke:O0e},circle:{fill:O0e},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Z0e,fontSize:12},"guide-title":{font:Z0e,fontSize:12},"group-title":{font:Z0e,fontSize:12}},title:{font:Z0e,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:R0e,tickColor:R0e,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},z0e=function(e){return e*(1/3+1)},L0e=z0e(9),P0e=z0e(10),j0e=z0e(12),U0e="Segoe UI",W0e="wf_standard-font, helvetica, arial, sans-serif",V0e="#252423",q0e="#605E5C",H0e="transparent",G0e="#118DFF",X0e="#DEEFFF",Y0e=[X0e,G0e],K0e={view:{stroke:H0e},background:H0e,font:U0e,header:{titleFont:W0e,titleFontSize:j0e,titleColor:V0e,labelFont:U0e,labelFontSize:P0e,labelColor:q0e},axis:{ticks:!1,grid:!1,domain:!1,labelColor:q0e,labelFontSize:L0e,titleFont:W0e,titleColor:V0e,titleFontSize:j0e,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:"#C8C6C4",gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:G0e},line:{stroke:G0e,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:U0e,fontSize:L0e,fill:q0e},arc:{fill:G0e},area:{fill:G0e,line:!0,opacity:.6},path:{stroke:G0e},rect:{fill:G0e},point:{fill:G0e,filled:!0,size:75},shape:{stroke:G0e},symbol:{fill:G0e,strokeWidth:1.5,size:50},legend:{titleFont:U0e,titleFontWeight:"bold",titleColor:q0e,labelFont:U0e,labelFontSize:P0e,labelColor:q0e,symbolType:"circle",symbolSize:75},range:{category:[G0e,"#12239E","#E66C37","#6B007B","#E044A7","#744EC2","#D9B300","#D64550"],diverging:Y0e,heatmap:Y0e,ordinal:[X0e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",G0e]}},$0e='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Q0e=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],J0e=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function e1e(e){var t=e.type,n="dark"===t?"#161616":"#ffffff",r="dark"===t?"#f4f4f4":"#161616",a="dark"===t?"#d4bbff":"#6929c4";return{background:e.background,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:n,stroke:n},group:{fill:n},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:$0e,fontWeight:600},axis:{labelColor:r,labelFontSize:12,grid:!0,gridColor:"#525252",titleColor:r,labelAngle:0},style:{"guide-label":{font:$0e,fill:r,fontWeight:400},"guide-title":{font:$0e,fill:r,fontWeight:400}},range:{category:"dark"===t?Q0e:J0e,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}var t1e=e1e({type:"light",background:"#ffffff"}),n1e=e1e({type:"light",background:"#f4f4f4"}),r1e=e1e({type:"dark",background:"#262626"}),a1e=e1e({type:"dark",background:"#161616"}),i1e=a0e,o1e="vg-tooltip-element",u1e={offsetX:10,offsetY:10,id:o1e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2};function s1e(e,t,n){if(nn(e))return"[".concat(e.map((function(e){return t(Pn(e)?e:c1e(e,n))})).join(", "),"]");if(rn(e)){var r="",a=e,i=a.title,o=a.image,u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(a,["title","image"]);i&&(r+="<h2>".concat(t(i),"</h2>")),o&&(r+='<img src="'.concat(t(o),'">'));var s=Object.keys(u);if(s.length>0){r+="<table>";var c,l=(0,zt.Z)(s);try{for(l.s();!(c=l.n()).done;){var f=c.value,h=u[f];void 0!==h&&(rn(h)&&(h=c1e(h,n)),r+='<tr><td class="key">'.concat(t(f),':</td><td class="value">').concat(t(h),"</td></tr>"))}}catch(d){l.e(d)}finally{l.f()}r+="</table>"}return r||"{}"}return t(e)}function c1e(e,t){return JSON.stringify(e,function(e){var t=[];return function(n,r){if("object"!==typeof r||null===r)return r;var a=t.indexOf(this)+1;return t.length=a,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}(t))}var l1e=function(){function e(t){(0,ud.Z)(this,e),this.options=Object.assign(Object.assign({},u1e),t);var n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){var r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=function(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return"#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black; }\n  #vg-tooltip-element.visible {\n    visibility: visible; }\n  #vg-tooltip-element h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 13px; }\n  #vg-tooltip-element img {\n    max-width: 200px;\n    max-height: 200px; }\n  #vg-tooltip-element table {\n    border-spacing: 0; }\n    #vg-tooltip-element table tr {\n      border: none; }\n      #vg-tooltip-element table tr td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-top: 2px;\n        padding-bottom: 2px; }\n        #vg-tooltip-element table tr td.key {\n          color: #808080;\n          max-width: 150px;\n          text-align: right;\n          padding-right: 4px; }\n        #vg-tooltip-element table tr td.value {\n          display: block;\n          max-width: 300px;\n          max-height: 7em;\n          text-align: left; }\n  #vg-tooltip-element.dark-theme {\n    background-color: rgba(32, 32, 32, 0.9);\n    border: 1px solid #f5f5f5;\n    color: white; }\n    #vg-tooltip-element.dark-theme td.key {\n      color: #bfbfbf; }\n".toString().replace(o1e,e)}(n);var a=document.head;a.childNodes.length>0?a.insertBefore(r,a.childNodes[0]):a.appendChild(r)}}return(0,sd.Z)(e,[{key:"tooltipHandler",value:function(e,t,n,r){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el)),(null!=document.fullscreenElement?document.fullscreenElement:document.body).appendChild(this.el),null!=r&&""!==r){this.el.innerHTML=s1e(r,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible","".concat(this.options.theme,"-theme"));var a=function(e,t,n,r){var a=e.clientX+n;a+t.width>window.innerWidth&&(a=+e.clientX-n-t.width);var i=e.clientY+r;return i+t.height>window.innerHeight&&(i=+e.clientY-r-t.height),{x:a,y:i}}(t,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY),i=a.x,o=a.y;this.el.setAttribute("style","top: ".concat(o,"px; left: ").concat(i,"px"))}else this.el.classList.remove("visible","".concat(this.options.theme,"-theme"))}}]),e}();function f1e(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,u)}s((r=r.apply(e,t||[])).next())}))}function h1e(e,t,n){var r=e.open(t),a=new URL(t).origin,i=40;e.addEventListener("message",(function t(n){n.source===r&&(i=0,e.removeEventListener("message",t,!1))}),!1),setTimeout((function e(){i<=0||(r.postMessage(n,a),setTimeout(e,250),i-=1)}),250)}var d1e,p1e='.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box; }\n  .vega-embed.has-actions {\n    padding-right: 38px; }\n  .vega-embed details:not([open]) > :not(summary) {\n    display: none !important; }\n  .vega-embed summary {\n    list-style: none;\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 6px;\n    z-index: 1000;\n    background: white;\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n    color: #1b1e23;\n    border: 1px solid #aaa;\n    border-radius: 999px;\n    opacity: 0.2;\n    transition: opacity 0.4s ease-in;\n    outline: none;\n    cursor: pointer;\n    line-height: 0px; }\n    .vega-embed summary::-webkit-details-marker {\n      display: none; }\n    .vega-embed summary:active {\n      box-shadow: #aaa 0px 0px 0px 1px inset; }\n    .vega-embed summary svg {\n      width: 14px;\n      height: 14px; }\n  .vega-embed details[open] summary {\n    opacity: 0.7; }\n  .vega-embed:hover summary,\n  .vega-embed:focus summary {\n    opacity: 1 !important;\n    transition: opacity 0.2s ease; }\n  .vega-embed .vega-actions {\n    position: absolute;\n    z-index: 1001;\n    top: 35px;\n    right: -9px;\n    display: flex;\n    flex-direction: column;\n    padding-bottom: 8px;\n    padding-top: 8px;\n    border-radius: 4px;\n    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n    border: 1px solid #d9d9d9;\n    background: white;\n    animation-duration: 0.15s;\n    animation-name: scale-in;\n    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n    text-align: left; }\n    .vega-embed .vega-actions a {\n      padding: 8px 16px;\n      font-family: sans-serif;\n      font-size: 14px;\n      font-weight: 600;\n      white-space: nowrap;\n      color: #434a56;\n      text-decoration: none; }\n      .vega-embed .vega-actions a:hover {\n        background-color: #f7f7f9;\n        color: black; }\n    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n      content: "";\n      display: inline-block;\n      position: absolute; }\n    .vega-embed .vega-actions::before {\n      left: auto;\n      right: 14px;\n      top: -16px;\n      border: 8px solid #0000;\n      border-bottom-color: #d9d9d9; }\n    .vega-embed .vega-actions::after {\n      left: auto;\n      right: 15px;\n      top: -14px;\n      border: 7px solid #0000;\n      border-bottom-color: #fff; }\n  .vega-embed .chart-wrapper {\n    width: 100%;\n    height: 100%; }\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px; }\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6); }\n  to {\n    opacity: 1;\n    transform: scale(1); } }\n';function v1e(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0,i=n;a<i.length;a++){var o=i[a];g1e(e,o)}return e}function g1e(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var a=r[n];Me(e,a,t[a],!0)}}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e});var m1e=x,y1e=w,b1e="undefined"!==typeof window?window:void 0;void 0===y1e&&(null===(d1e=null===b1e||void 0===b1e?void 0:b1e.vl)||void 0===d1e?void 0:d1e.compile)&&(y1e=b1e.vl);var x1e={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},w1e={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},k1e={vega:"Vega","vega-lite":"Vega-Lite"},_1e={vega:m1e.version,"vega-lite":y1e?y1e.version:"not available"},S1e={vega:function(e){return e},"vega-lite":function(e,t){return y1e.compile(e,{config:t}).spec}},C1e='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>',E1e="chart-wrapper";function A1e(e){return"function"===typeof e}function N1e(e,t,n,r){var a="<html><head>".concat(t,'</head><body><pre><code class="json">'),i="</code></pre>".concat(n,"</body></html>"),o=window.open("");o.document.write(a+e+i),o.document.title="".concat(k1e[r]," JSON Source")}function T1e(e,t){var n;if(e.$schema){var r=r0e(e.$schema);t&&t!==r.library&&console.warn("The given visualization spec is written in ".concat(k1e[r.library],", but mode argument sets ").concat(null!==(n=k1e[t])&&void 0!==n?n:t,"."));var a=r.library;return(0,re.satisfies)(_1e[a],"^".concat(r.version.slice(1)))||console.warn("The input spec uses ".concat(k1e[a]," ").concat(r.version,", but the current version of ").concat(k1e[a]," is v").concat(_1e[a],".")),a}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":null!==t&&void 0!==t?t:"vega"}function M1e(e){return(t=e)&&"load"in t?e:m1e.loader(e);var t}function D1e(e){var t;return null!==(t=e.usermeta&&e.usermeta.embedOptions)&&void 0!==t?t:{}}function F1e(e,t){var n;return f1e(this,void 0,void 0,S().mark((function r(){var a,i;return S().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!kt(e.config)){r.next=8;break}return r.t1=JSON,r.next=4,t.load(e.config);case 4:r.t2=r.sent,r.t0=r.t1.parse.call(r.t1,r.t2),r.next=9;break;case 8:r.t0=null!==(n=e.config)&&void 0!==n?n:{};case 9:if(a=r.t0,!kt(e.patch)){r.next=18;break}return r.t4=JSON,r.next=14,t.load(e.patch);case 14:r.t5=r.sent,r.t3=r.t4.parse.call(r.t4,r.t5),r.next=19;break;case 18:r.t3=e.patch;case 19:return i=r.t3,r.abrupt("return",Object.assign(Object.assign(Object.assign({},e),i?{patch:i}:{}),a?{config:a}:{}));case 21:case"end":return r.stop()}}),r)})))}function I1e(e){var t,n=e.getRootNode?e.getRootNode():document;return n instanceof ShadowRoot?{root:n,rootContainer:n}:{root:document,rootContainer:null!==(t=document.head)&&void 0!==t?t:document.body}}function O1e(e,t){var n,r,a,i,o,u,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=arguments.length>3?arguments[3]:void 0;return f1e(this,void 0,void 0,S().mark((function l(){var f,h,d,p,v,g,m,y,b,x,w,_,C,E,A,N,T,M,D,F,I,O,R,Z,B,z,L,P,j,W,V,q,H,G,X,Y,K,$,Q;return S().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(Q=function(){L&&document.removeEventListener("click",L),I.finalize()},f=s.theme?Te(k[s.theme],null!==(n=s.config)&&void 0!==n?n:{}):s.config,h=mt(s.actions)?s.actions:v1e({},x1e,null!==(r=s.actions)&&void 0!==r?r:{}),d=Object.assign(Object.assign({},w1e),s.i18n),p=null!==(a=s.renderer)&&void 0!==a?a:"canvas",v=null!==(i=s.logLevel)&&void 0!==i?i:m1e.Warn,g=null!==(o=s.downloadFileName)&&void 0!==o?o:"visualization",m="string"===typeof e?document.querySelector(e):e){l.next=10;break}throw new Error("".concat(e," does not exist"));case 10:return!1!==s.defaultStyle&&(y="vega-embed-style",b=I1e(m),x=b.root,w=b.rootContainer,x.getElementById(y)||((_=document.createElement("style")).id=y,_.innerText=void 0===s.defaultStyle||!0===s.defaultStyle?p1e.toString():s.defaultStyle,w.appendChild(_))),C=T1e(t,s.mode),E=S1e[C](t,f),"vega-lite"===C&&E.$schema&&(A=r0e(E.$schema),(0,re.satisfies)(_1e.vega,"^".concat(A.version.slice(1)))||console.warn("The compiled spec uses Vega ".concat(A.version,", but current version is v").concat(_1e.vega,"."))),m.classList.add("vega-embed"),h&&m.classList.add("has-actions"),m.innerHTML="",N=m,h&&((T=document.createElement("div")).classList.add(E1e),m.appendChild(T),N=T),(M=s.patch)&&(E=M instanceof Function?M(E):U(E,M,!0,!1).newDocument),s.formatLocale&&m1e.formatLocale(s.formatLocale),s.timeFormatLocale&&m1e.timeFormatLocale(s.timeFormatLocale),D=s.ast,F=m1e.parse(E,"vega-lite"===C?{}:f,{ast:D}),I=new(s.viewClass||m1e.View)(F,Object.assign({loader:c,logLevel:v,renderer:p},D?{expr:m1e.expressionInterpreter}:{})),!1!==s.tooltip&&(O=A1e(s.tooltip)?s.tooltip:new l1e(!0===s.tooltip?{}:s.tooltip).call,I.tooltip(O)),void 0===(R=s.hover)&&(R="vega"===C),R&&(B=(Z="boolean"===typeof R?{}:R).hoverSet,z=Z.updateSet,I.hover(B,z)),s&&(null!=s.width&&I.width(s.width),null!=s.height&&I.height(s.height),null!=s.padding&&I.padding(s.padding)),l.next=33,I.initialize(N,s.bind).runAsync();case 33:if(!1!==h){if(P=m,!1!==s.defaultStyle&&((j=document.createElement("details")).title=d.CLICK_TO_VIEW_ACTIONS,m.append(j),P=j,(W=document.createElement("summary")).innerHTML=C1e,j.append(W),L=function(e){j.contains(e.target)||j.removeAttribute("open")},document.addEventListener("click",L)),V=document.createElement("div"),P.append(V),V.classList.add("vega-actions"),!0===h||!1!==h.export)for(q=function(){var e=G[H];if(!0===h||!0===h.export||h.export[e]){var t=d["".concat(e.toUpperCase(),"_ACTION")],n=document.createElement("a");n.text=t,n.href="#",n.target="_blank",n.download="".concat(g,".").concat(e),n.addEventListener("mousedown",(function(t){return f1e(this,void 0,void 0,S().mark((function n(){var r;return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),n.next=3,I.toImageURL(e,s.scaleFactor);case 3:r=n.sent,this.href=r;case 5:case"end":return n.stop()}}),n,this)})))})),V.append(n)}},H=0,G=["svg","png"];H<G.length;H++)q();!0!==h&&!1===h.source||((X=document.createElement("a")).text=d.SOURCE_ACTION,X.href="#",X.addEventListener("click",(function(e){var n,r;N1e(ne()(t),null!==(n=s.sourceHeader)&&void 0!==n?n:"",null!==(r=s.sourceFooter)&&void 0!==r?r:"",C),e.preventDefault()})),V.append(X)),"vega-lite"!==C||!0!==h&&!1===h.compiled||((Y=document.createElement("a")).text=d.COMPILED_ACTION,Y.href="#",Y.addEventListener("click",(function(e){var t,n;N1e(ne()(E),null!==(t=s.sourceHeader)&&void 0!==t?t:"",null!==(n=s.sourceFooter)&&void 0!==n?n:"","vega"),e.preventDefault()})),V.append(Y)),!0!==h&&!1===h.editor||(K=null!==(u=s.editorUrl)&&void 0!==u?u:"https://vega.github.io/editor/",($=document.createElement("a")).text=d.EDITOR_ACTION,$.href="#",$.addEventListener("click",(function(e){h1e(window,K,{config:f,mode:C,renderer:p,spec:ne()(t)}),e.preventDefault()})),V.append($))}return l.abrupt("return",{view:I,spec:t,vgSpec:E,finalize:Q});case 35:case"end":return l.stop()}}),l)})))}var R1e=function(e,t){var n,r,a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return f1e(this,void 0,void 0,S().mark((function o(){var u,s,c,l,f,h;return S().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!kt(t)){o.next=9;break}return s=M1e(i.loader),o.t0=JSON,o.next=5,s.load(t);case 5:o.t1=o.sent,u=o.t0.parse.call(o.t0,o.t1),o.next=10;break;case 9:u=t;case 10:return c=D1e(u).loader,s&&!c||(s=M1e(null!==(n=i.loader)&&void 0!==n?n:c)),o.next=14,F1e(D1e(u),s);case 14:return l=o.sent,o.next=17,F1e(i,s);case 17:return f=o.sent,h=Object.assign(Object.assign({},v1e(f,l)),{config:Te(null!==(r=f.config)&&void 0!==r?r:{},null!==(a=l.config)&&void 0!==a?a:{})}),o.next=21,O1e(e,u,h,s);case 21:return o.abrupt("return",o.sent);case 22:case"end":return o.stop()}}),o)})))}},2391:function(e){"use strict";var t=function(){};e.exports=t},4175:function(e,t,n){"use strict";var r=n(4322);e.exports=function(e){e.prototype[Symbol.iterator]=r.mark((function e(){var t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.head;case 1:if(!t){e.next=7;break}return e.next=4,t.value;case 4:t=t.next,e.next=1;break;case 7:case"end":return e.stop()}}),e,this)}))}},400:function(e,t,n){"use strict";function r(e){var t=this;if(t instanceof r||(t=new r),t.tail=null,t.head=null,t.length=0,e&&"function"===typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var n=0,a=arguments.length;n<a;n++)t.push(arguments[n]);return t}function a(e,t,n){var r=t===e.head?new u(n,null,t,e):new u(n,t,t.next,e);return null===r.next&&(e.tail=r),null===r.prev&&(e.head=r),e.length++,r}function i(e,t){e.tail=new u(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function o(e,t){e.head=new u(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function u(e,t,n,r){if(!(this instanceof u))return new u(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}e.exports=r,r.Node=u,r.create=r,r.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},r.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},r.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},r.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)i(this,arguments[e]);return this.length},r.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)o(this,arguments[e]);return this.length},r.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},r.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},r.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},r.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},r.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},r.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},r.prototype.map=function(e,t){t=t||this;for(var n=new r,a=this.head;null!==a;)n.push(e.call(t,a.value,this)),a=a.next;return n},r.prototype.mapReverse=function(e,t){t=t||this;for(var n=new r,a=this.tail;null!==a;)n.push(e.call(t,a.value,this)),a=a.prev;return n},r.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var a=0;null!==r;a++)n=e(n,r.value,a),r=r.next;return n},r.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var a=this.length-1;null!==r;a--)n=e(n,r.value,a),r=r.prev;return n},r.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},r.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},r.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var a=0,i=this.head;null!==i&&a<e;a++)i=i.next;for(;null!==i&&a<t;a++,i=i.next)n.push(i.value);return n},r.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var a=this.length,i=this.tail;null!==i&&a>t;a--)i=i.prev;for(;null!==i&&a>e;a--,i=i.prev)n.push(i.value);return n},r.prototype.splice=function(e,t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,r=this.head;null!==r&&n<e;n++)r=r.next;var i=[];for(n=0;r&&n<t;n++)i.push(r.value),r=this.removeNode(r);null===r&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev);for(n=0;n<(arguments.length<=2?0:arguments.length-2);n++)r=a(this,r,n+2<2||arguments.length<=n+2?void 0:arguments[n+2]);return i},r.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};try{n(4175)(r)}catch(s){}},5314:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},807:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},4011:function(e,t,n){var r=n(5314);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4587:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},8064:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},8231:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},9504:function(e,t,n){var r=n(5816);e.exports=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}},e.exports.__esModule=!0,e.exports.default=e.exports},3744:function(e,t,n){var r=n(3890),a=n(9548),i=n(634);e.exports=function(e){var t=a();return function(){var n,a=r(e);if(t){var o=r(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return i(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports},1955:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},3890:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},9137:function(e,t,n){var r=n(8181);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},9548:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},5962:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},1581:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(s){u=!0,a=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw a}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},6258:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},4815:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},634:function(e,t,n){var r=n(7798).default,a=n(4587);e.exports=function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8181:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4534:function(e,t,n){var r=n(807),a=n(1581),i=n(5816),o=n(6258);e.exports=function(e,t){return r(e)||a(e,t)||i(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},8485:function(e,t,n){var r=n(4011),a=n(5962),i=n(5816),o=n(4815);e.exports=function(e){return r(e)||a(e)||i(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},7798:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},5816:function(e,t,n){var r=n(5314);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},4322:function(e,t,n){e.exports=n(9727)},5410:function(){},8628:function(){},1601:function(){},7792:function(){},4977:function(){},5042:function(){},1418:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,i(n)))}return e}function i(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=o(t,n));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},3333:function(e){"use strict";var t=/("(?:[^\\"]|\\.)*")|[:,]/g;e.exports=function(e,n){var r,a,i;return n=n||{},r=JSON.stringify([1],void 0,void 0===n.indent?2:n.indent).slice(2,-3),a=""===r?1/0:void 0===n.maxLength?80:n.maxLength,i=n.replacer,function e(n,o,u){var s,c,l,f,h,d,p,v,g,m,y,b;if(n&&"function"===typeof n.toJSON&&(n=n.toJSON()),void 0===(y=JSON.stringify(n,i)))return y;if(p=a-o.length-u,y.length<=p&&(g=y.replace(t,(function(e,t){return t||e+" "}))).length<=p)return g;if(null!=i&&(n=JSON.parse(y),i=void 0),"object"===typeof n&&null!==n){if(v=o+r,l=[],c=0,Array.isArray(n))for(m="[",s="]",p=n.length;c<p;c++)l.push(e(n[c],v,c===p-1?0:1)||"null");else for(m="{",s="}",p=(d=Object.keys(n)).length;c<p;c++)f=d[c],h=JSON.stringify(f)+": ",void 0!==(b=e(n[f],v,h.length+(c===p-1?0:1)))&&l.push(h+b);if(l.length>0)return[m,r+l.join(",\n"+v),s].join("\n"+o)}return y}(e,"",0)}},4400:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},2781:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},6148:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},3032:function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var u=e[i](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function u(e){r(o,a,i,u,s,"next",e)}function s(e){r(o,a,i,u,s,"throw",e)}u(void 0)}))}}n.d(t,{Z:function(){return a}})},7853:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},3009:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9384),a=n(3268);function i(e,t,n){return i=(0,a.Z)()?Reflect.construct:function(e,t,n){var a=[null];a.push.apply(a,t);var i=new(Function.bind.apply(e,a));return n&&(0,r.Z)(i,n.prototype),i},i.apply(null,arguments)}},4531:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,{Z:function(){return a}})},9472:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(2327);function a(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,r.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}},804:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(3538),a=n(3268);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var o=n(6148);function u(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,o.Z)(e)}function s(e){var t=(0,a.Z)();return function(){var n,a=(0,r.Z)(e);if(t){var i=(0,r.Z)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return u(this,n)}}},6222:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},4474:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(3538);function a(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,r.Z)(e)););return e}function i(){return i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=a(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},i.apply(this,arguments)}},3538:function(e,t,n){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,{Z:function(){return r}})},1020:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9384);function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,r.Z)(e,t)}},3268:function(e,t,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}n.d(t,{Z:function(){return r}})},5253:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},4501:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},9384:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},678:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(2781);var a=n(2327),i=n(4501);function o(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(s){u=!0,a=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw a}}return i}}(e,t)||(0,a.Z)(e,t)||(0,i.Z)()}},4528:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(2781),a=n(5253),i=n(2327),o=n(4501);function u(e){return(0,r.Z)(e)||(0,a.Z)(e)||(0,i.Z)(e)||(0,o.Z)()}},1303:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(4400);var a=n(5253),i=n(2327);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,a.Z)(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},2327:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(4400);function a(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}},9099:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(3538),a=n(9384);var i=n(3009);function o(e){var t="function"===typeof Map?new Map:void 0;return o=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return(0,i.Z)(e,arguments,(0,r.Z)(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),(0,a.Z)(o,e)},o(e)}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&a&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(i,o),i}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){"use strict";var e={};n.r(e),n.d(e,{json:function(){return Qv}});var t={};n.r(t),n.d(t,{json:function(){return Jv}});var r={};n.r(r),n.d(r,{json:function(){return eg}});var a={};n.r(a),n.d(a,{json:function(){return tg}});var i={};n.r(i),n.d(i,{json:function(){return ng}});var o={};n.r(o),n.d(o,{json:function(){return rg}});var u={};n.r(u),n.d(u,{json:function(){return ag}});var s={};n.r(s),n.d(s,{json:function(){return ig}});var c={};n.r(c),n.d(c,{json:function(){return og}});var l={};n.r(l),n.d(l,{json:function(){return ug}});var f={};n.r(f),n.d(f,{json:function(){return sg}});var h={};n.r(h),n.d(h,{json:function(){return cg}});var d={};n.r(d),n.d(d,{json:function(){return lg}});var p={};n.r(p),n.d(p,{json:function(){return fg}});var v={};n.r(v),n.d(v,{json:function(){return hg}});var g={};n.r(g),n.d(g,{json:function(){return dg}});var m={};n.r(m),n.d(m,{json:function(){return pg}});var y={};n.r(y),n.d(y,{json:function(){return vg}});var b={};n.r(b),n.d(b,{json:function(){return gg}});var x={};n.r(x),n.d(x,{OP_SCOPE_SUFFIX:function(){return Ig.zvA},abs:function(){return Ig.WnP},acos:function(){return Ig.Khb},acosh:function(){return Ig.__u},add:function(){return Ig.IHx},addN:function(){return Ig.QBD},all:function(){return Ig.$6P},any:function(){return Ig.YjB},argMax:function(){return Ig.NqF},argMin:function(){return Ig.vHJ},asin:function(){return Ig.ZRM},asinh:function(){return Ig.VfV},atan:function(){return Ig.z4N},atan2:function(){return Ig.fvJ},atanh:function(){return Ig.C80},avgPool:function(){return Ig.wS1},avgPool3d:function(){return Ig.uR5},basicLSTMCell:function(){return Ig.zEQ},batchNorm:function(){return Ig.tgs},batchNorm2d:function(){return Ig.Dxk},batchNorm3d:function(){return Ig.JY5},batchNorm4d:function(){return Ig.p3b},batchToSpaceND:function(){return Ig.E4h},bincount:function(){return Ig.yE8},bitwiseAnd:function(){return Ig.ycw},booleanMaskAsync:function(){return Ig.anm},broadcastArgs:function(){return Ig.XsQ},broadcastTo:function(){return Ig.UFq},buffer:function(){return Ig.f3b},cast:function(){return Ig.pju},ceil:function(){return Ig.mDi},clipByValue:function(){return Ig.iUl},clone:function(){return Ig.d9v},complex:function(){return Ig.PYB},concat:function(){return Ig.zoF},concat1d:function(){return Ig.gME},concat2d:function(){return Ig.Izb},concat3d:function(){return Ig.MNy},concat4d:function(){return Ig.ZaL},conv1d:function(){return Ig.PAt},conv2d:function(){return Ig.Tek},conv2dTranspose:function(){return Ig.bc},conv3d:function(){return Ig.pdZ},conv3dTranspose:function(){return Ig.$QV},cos:function(){return Ig.mCk},cosh:function(){return Ig.f9Y},cosineWindow:function(){return Ig.mew},cumprod:function(){return Ig.$Gn},cumsum:function(){return Ig.zbp},denseBincount:function(){return Ig.ppE},depthToSpace:function(){return Ig.nTT},depthwiseConv2d:function(){return Ig.B10},diag:function(){return Ig.Ka3},dilation2d:function(){return Ig.WmZ},div:function(){return Ig.hiC},divNoNan:function(){return Ig.NTj},dot:function(){return Ig.AKD},dropout:function(){return Ig.rvX},einsum:function(){return Ig.WYO},elu:function(){return Ig.pyx},enclosingPowerOfTwo:function(){return Ig.GRh},ensureShape:function(){return Ig.EDe},equal:function(){return Ig.DgJ},erf:function(){return Ig.qNN},euclideanNorm:function(){return Ig.d2q},exp:function(){return Ig.Qqt},expandDims:function(){return Ig.dt4},expm1:function(){return Ig.t$B},eye:function(){return Ig.iyy},fft:function(){return Ig.kp_},fill:function(){return Ig.hlL},floor:function(){return Ig.GWj},floorDiv:function(){return Ig.qPi},fused:function(){return Ig.imm},gather:function(){return Ig.Iqj},gatherND:function(){return Ig.dbB},greater:function(){return Ig.pjt},greaterEqual:function(){return Ig.brS},ifft:function(){return Ig.Sxn},imag:function(){return Ig.asL},image:function(){return Ig.BHj},inTopKAsync:function(){return Ig.V3u},irfft:function(){return Ig.wx0},isFinite:function(){return Ig.xVT},isInf:function(){return Ig.UWc},isNaN:function(){return Ig.i2d},leakyRelu:function(){return Ig.hi7},less:function(){return Ig.d9m},lessEqual:function(){return Ig.zN1},linalg:function(){return Ig.$r2},linspace:function(){return Ig.SX3},localResponseNormalization:function(){return Ig.G9k},log:function(){return Ig.cM7},log1p:function(){return Ig.Krr},logSigmoid:function(){return Ig.e_t},logSoftmax:function(){return Ig.CmS},logSumExp:function(){return Ig.l_t},logicalAnd:function(){return Ig.HvI},logicalNot:function(){return Ig.hJK},logicalOr:function(){return Ig.K5V},logicalXor:function(){return Ig.egP},losses:function(){return Ig.MB5},lowerBound:function(){return Ig.eab},matMul:function(){return Ig.OI3},max:function(){return Ig.Fp7},maxPool:function(){return Ig._sB},maxPool3d:function(){return Ig.YQQ},maxPoolWithArgmax:function(){return Ig.Ip$},maximum:function(){return Ig.gWQ},mean:function(){return Ig.J69},meshgrid:function(){return Ig.ry_},min:function(){return Ig.VV$},minimum:function(){return Ig.LTh},mirrorPad:function(){return Ig.VdP},mod:function(){return Ig.wQq},moments:function(){return Ig.Gi7},movingAverage:function(){return Ig.p_},mul:function(){return Ig.dC7},multiRNNCell:function(){return Ig.rq4},multinomial:function(){return Ig.SJ_},neg:function(){return Ig.W76},norm:function(){return Ig.KOy},notEqual:function(){return Ig.Quu},oneHot:function(){return Ig.lfX},ones:function(){return Ig.iUs},onesLike:function(){return Ig.JpU},op:function(){return Ig.op},outerProduct:function(){return Ig.N2O},pad:function(){return Ig.vku},pad1d:function(){return Ig.pNR},pad2d:function(){return Ig.koy},pad3d:function(){return Ig.t1L},pad4d:function(){return Ig.lGY},pool:function(){return Ig.d_R},pow:function(){return Ig.sQ3},prelu:function(){return Ig.AL3},print:function(){return Ig.S0v},prod:function(){return Ig.WVs},raggedGather:function(){return Ig.$gW},raggedRange:function(){return Ig.VT$},raggedTensorToTensor:function(){return Ig.N89},rand:function(){return Ig.TN_},randomGamma:function(){return Ig.wzB},randomNormal:function(){return Ig.nGf},randomStandardNormal:function(){return Ig.ruB},randomUniform:function(){return Ig.LGj},randomUniformInt:function(){return Ig.pe5},range:function(){return Ig.w6H},real:function(){return Ig.kwC},reciprocal:function(){return Ig.M25},relu:function(){return Ig.UYe},relu6:function(){return Ig.btT},reshape:function(){return Ig.XLQ},reverse:function(){return Ig.GYS},reverse1d:function(){return Ig.SDf},reverse2d:function(){return Ig.diP},reverse3d:function(){return Ig.sx7},reverse4d:function(){return Ig.mG2},rfft:function(){return Ig.QEs},round:function(){return Ig.NMM},rsqrt:function(){return Ig.bp0},scalar:function(){return Ig.iD$},scatterND:function(){return Ig.snQ},searchSorted:function(){return Ig.zcT},selu:function(){return Ig.U8D},separableConv2d:function(){return Ig.U_I},setdiff1dAsync:function(){return Ig.ODp},sigmoid:function(){return Ig.XD2},sign:function(){return Ig.Xxe},signal:function(){return Ig.tdS},sin:function(){return Ig.O$l},sinh:function(){return Ig.R_K},slice:function(){return Ig.tPi},slice1d:function(){return Ig.jZU},slice2d:function(){return Ig.SmN},slice3d:function(){return Ig.CnO},slice4d:function(){return Ig.p0P},softmax:function(){return Ig.XAC},softplus:function(){return Ig.Wvh},spaceToBatchND:function(){return Ig.fBT},sparse:function(){return Ig.rVs},sparseToDense:function(){return Ig.ers},spectral:function(){return Ig.uN7},split:function(){return Ig.Vl2},sqrt:function(){return Ig._b3},square:function(){return Ig.h62},squaredDifference:function(){return Ig.$i},squeeze:function(){return Ig.L9e},stack:function(){return Ig.knu},step:function(){return Ig.Nbs},stridedSlice:function(){return Ig.NXj},string:function(){return Ig.Z_8},sub:function(){return Ig.luU},sum:function(){return Ig.Smz},tan:function(){return Ig.ORZ},tanh:function(){return Ig.AEp},tensor:function(){return Ig.XeE},tensor1d:function(){return Ig.RRF},tensor2d:function(){return Ig.odF},tensor3d:function(){return Ig.wOQ},tensor4d:function(){return Ig.yXz},tensor5d:function(){return Ig.Bfx},tensor6d:function(){return Ig.xZs},tensorScatterUpdate:function(){return Ig.Pg0},tile:function(){return Ig.Gg6},topk:function(){return Ig.hg7},transpose:function(){return Ig.p4s},truncatedNormal:function(){return Ig.Xu6},unique:function(){return Ig.Two},unsortedSegmentSum:function(){return Ig.pUJ},unstack:function(){return Ig.HHK},upperBound:function(){return Ig.GaM},variable:function(){return Ig.VD$},where:function(){return Ig.arb},whereAsync:function(){return Ig.itS},zeros:function(){return Ig.lls},zerosLike:function(){return Ig.P84}});var w,k=n(2791),_=n.t(k,2),S=n(1250),C=n(678),E=n(4322),A=n.n(E),N=n(4164),T=n.t(N,2),M=n(1303),D=n(7853),F=n(4531),I=n(1020),O=n(804),R=n(9099),Z=n(4528),B=n(9472);function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(w||(w={}));var L,P="popstate";function j(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function U(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function W(e,t){return{usr:e.state,key:e.key,idx:t}}function V(e,t,n,r){return void 0===n&&(n=null),z({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?H(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function q(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,a=void 0===r?"":r,i=e.hash,o=void 0===i?"":i;return a&&"?"!==a&&(n+="?"===a.charAt(0)?a:"?"+a),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function H(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function G(e,t,n,r){void 0===r&&(r={});var a=r,i=a.window,o=void 0===i?document.defaultView:i,u=a.v5Compat,s=void 0!==u&&u,c=o.history,l=w.Pop,f=null,h=d();function d(){return(c.state||{idx:null}).idx}function p(){l=w.Pop;var e=d(),t=null==e?null:e-h;h=e,f&&f({action:l,location:g.location,delta:t})}function v(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:q(e);return j(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==h&&(h=0,c.replaceState(z({},c.state,{idx:h}),""));var g={get action(){return l},get location(){return e(o,c)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(P,p),f=e,function(){o.removeEventListener(P,p),f=null}},createHref:function(e){return t(o,e)},createURL:v,encodeLocation:function(e){var t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=w.Push;var r=V(g.location,e,t);n&&n(r,e);var a=W(r,h=d()+1),i=g.createHref(r);try{c.pushState(a,"",i)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;o.location.assign(i)}s&&f&&f({action:l,location:g.location,delta:1})},replace:function(e,t){l=w.Replace;var r=V(g.location,e,t);n&&n(r,e);var a=W(r,h=d()),i=g.createHref(r);c.replaceState(a,"",i),s&&f&&f({action:l,location:g.location,delta:0})},go:function(e){return c.go(e)}};return g}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(L||(L={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function X(e,t,n){void 0===n&&(n="/");var r=re(("string"===typeof t?H(t):t).pathname||"/",n);if(null==r)return null;var a=Y(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(a);for(var i=null,o=0;null==i&&o<a.length;++o)i=ee(a[o],ne(r));return i}function Y(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var a=function(e,a,i){var o={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};o.relativePath.startsWith("/")&&(j(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=se([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(j(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),Y(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:J(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,i=(0,B.Z)(K(e.path));try{for(i.s();!(r=i.n()).done;){var o=r.value;a(e,t,o)}}catch(u){i.e(u)}finally{i.f()}}else a(e,t)})),t}function K(e){var t=e.split("/");if(0===t.length)return[];var n=(0,Z.Z)(t),r=n[0],a=n.slice(1),i=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===a.length)return i?[o,""]:[o];var u=K(a.join("/")),s=[];return s.push.apply(s,(0,M.Z)(u.map((function(e){return""===e?o:[o,e].join("/")})))),i&&s.push.apply(s,(0,M.Z)(u)),s.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var $=/^:[\w-]+$/,Q=function(e){return"*"===e};function J(e,t){var n=e.split("/"),r=n.length;return n.some(Q)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!Q(e)})).reduce((function(e,t){return e+($.test(t)?3:""===t?1:10)}),r)}function ee(e,t){for(var n=e.routesMeta,r={},a="/",i=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===a?t:t.slice(a.length)||"/",l=te({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;i.push({params:r,pathname:se([a,l.pathname]),pathnameBase:ce(se([a,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(a=se([a,l.pathnameBase]))}return i}function te(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);U("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(function(e,t,n){return r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"}));e.endsWith("*")?(r.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");return[new RegExp(a,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=(0,C.Z)(n,2),a=r[0],i=r[1],o=t.match(a);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:i.reduce((function(e,t,n){var r=t.paramName,a=t.isOptional;if("*"===r){var i=c[n]||"";s=u.slice(0,u.length-i.length).replace(/(.)\/+$/,"$1")}var o=c[n];return e[r]=a&&!o?void 0:function(e,t){try{return decodeURIComponent(e)}catch(n){return U(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(o||"",r),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function ne(e){try{return decodeURI(e)}catch(t){return U(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function re(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function ae(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function ie(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function oe(e,t){var n=ie(e);return t?n.map((function(t,n){return n===e.length-1?t.pathname:t.pathnameBase})):n.map((function(e){return e.pathnameBase}))}function ue(e,t,n,r){var a;void 0===r&&(r=!1),"string"===typeof e?a=H(e):(j(!(a=z({},e)).pathname||!a.pathname.includes("?"),ae("?","pathname","search",a)),j(!a.pathname||!a.pathname.includes("#"),ae("#","pathname","hash",a)),j(!a.search||!a.search.includes("#"),ae("#","search","hash",a)));var i,o=""===e||""===a.pathname,u=o?"/":a.pathname;if(null==u)i=n;else{var s=t.length-1;if(!r&&u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;a.pathname=c.join("/")}i=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?H(e):e,r=n.pathname,a=n.search,i=void 0===a?"":a,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:le(i),hash:fe(u)}}(a,i),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var se=function(e){return e.join("/").replace(/\/\/+/g,"/")},ce=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},le=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},fe=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},he=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.apply(this,arguments)}return(0,F.Z)(n)}((0,R.Z)(Error));function de(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var pe=["post","put","patch","delete"],ve=(new Set(pe),["get"].concat(pe));new Set(ve),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ge.apply(this,arguments)}var me=k.createContext(null);var ye=k.createContext(null);var be=k.createContext(null);var xe=k.createContext(null);var we=k.createContext(null);var ke=k.createContext({outlet:null,matches:[],isDataRoute:!1});var _e=k.createContext(null);function Se(){return null!=k.useContext(we)}function Ce(){return Se()||j(!1),k.useContext(we).location}function Ee(e){k.useContext(xe).static||k.useLayoutEffect(e)}function Ae(){return k.useContext(ke).isDataRoute?function(){var e=Be(Re.UseNavigateStable).router,t=Le(Ze.UseNavigateStable),n=k.useRef(!1);Ee((function(){n.current=!0}));var r=k.useCallback((function(r,a){void 0===a&&(a={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,ge({fromRouteId:t},a)))}),[e,t]);return r}():function(){Se()||j(!1);var e=k.useContext(me),t=k.useContext(xe),n=t.basename,r=t.future,a=t.navigator,i=k.useContext(ke).matches,o=Ce().pathname,u=JSON.stringify(oe(i,r.v7_relativeSplatPath)),s=k.useRef(!1);Ee((function(){s.current=!0}));var c=k.useCallback((function(t,r){if(void 0===r&&(r={}),s.current)if("number"!==typeof t){var i=ue(t,JSON.parse(u),o,"path"===r.relative);null==e&&"/"!==n&&(i.pathname="/"===i.pathname?n:se([n,i.pathname])),(r.replace?a.replace:a.push)(i,r.state,r)}else a.go(t)}),[n,a,u,o,e]);return c}()}function Ne(e,t){var n=(void 0===t?{}:t).relative,r=k.useContext(xe).future,a=k.useContext(ke).matches,i=Ce().pathname,o=JSON.stringify(oe(a,r.v7_relativeSplatPath));return k.useMemo((function(){return ue(e,JSON.parse(o),i,"path"===n)}),[e,o,i,n])}function Te(e,t,n,r){Se()||j(!1);var a,i=k.useContext(xe).navigator,o=k.useContext(ke).matches,u=o[o.length-1],s=u?u.params:{},c=(u&&u.pathname,u?u.pathnameBase:"/"),l=(u&&u.route,Ce());if(t){var f,h="string"===typeof t?H(t):t;"/"===c||(null==(f=h.pathname)?void 0:f.startsWith(c))||j(!1),a=h}else a=l;var d=a.pathname||"/",p=X(e,{pathname:"/"===c?d:d.slice(c.length)||"/"});var v=Oe(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:se([c,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:se([c,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,n,r);return t&&v?k.createElement(we.Provider,{value:{location:ge({pathname:"/",search:"",hash:"",state:null,key:"default"},a),navigationType:w.Pop}},v):v}function Me(){var e=function(){var e,t=k.useContext(_e),n=ze(Ze.UseRouteError),r=Le(Ze.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=de(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},t),n?k.createElement("pre",{style:a},n):null,null)}var De=k.createElement(Me,null),Fe=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},r}return(0,F.Z)(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return void 0!==this.state.error?k.createElement(ke.Provider,{value:this.props.routeContext},k.createElement(_e.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),n}(k.Component);function Ie(e){var t=e.routeContext,n=e.match,r=e.children,a=k.useContext(me);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(ke.Provider,{value:t},r)}function Oe(e,t,n,r){var a;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var i;if(null==(i=n)||!i.errors)return null;e=n.matches}var o=e,u=null==(a=n)?void 0:a.errors;if(null!=u){var s=o.findIndex((function(e){return e.route.id&&(null==u?void 0:u[e.route.id])}));s>=0||j(!1),o=o.slice(0,Math.min(o.length,s+1))}var c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(var f=0;f<o.length;f++){var h=o[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(l=f),h.route.id){var d=n,p=d.loaderData,v=d.errors,g=h.route.loader&&void 0===p[h.route.id]&&(!v||void 0===v[h.route.id]);if(h.route.lazy||g){c=!0,o=l>=0?o.slice(0,l+1):[o[0]];break}}}return o.reduceRight((function(e,r,a){var i,s,f=!1,h=null,d=null;n&&(i=u&&r.route.id?u[r.route.id]:void 0,h=r.route.errorElement||De,c&&(l<0&&0===a?(s="route-fallback",!1||Pe[s]||(Pe[s]=!0),f=!0,d=null):l===a&&(f=!0,d=r.route.hydrateFallbackElement||null)));var p=t.concat(o.slice(0,a+1)),v=function(){var t;return t=i?h:f?d:r.route.Component?k.createElement(r.route.Component,null):r.route.element?r.route.element:e,k.createElement(Ie,{match:r,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===a)?k.createElement(Fe,{location:n.location,revalidation:n.revalidation,component:h,error:i,children:v(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):v()}),null)}var Re=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Re||{}),Ze=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ze||{});function Be(e){var t=k.useContext(me);return t||j(!1),t}function ze(e){var t=k.useContext(ye);return t||j(!1),t}function Le(e){var t=function(e){var t=k.useContext(ke);return t||j(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||j(!1),n.route.id}var Pe={};_.startTransition;function je(e){j(!1)}function Ue(e){var t=e.basename,n=void 0===t?"/":t,r=e.children,a=void 0===r?null:r,i=e.location,o=e.navigationType,u=void 0===o?w.Pop:o,s=e.navigator,c=e.static,l=void 0!==c&&c,f=e.future;Se()&&j(!1);var h=n.replace(/^\/*/,"/"),d=k.useMemo((function(){return{basename:h,navigator:s,static:l,future:ge({v7_relativeSplatPath:!1},f)}}),[h,f,s,l]);"string"===typeof i&&(i=H(i));var p=i,v=p.pathname,g=void 0===v?"/":v,m=p.search,y=void 0===m?"":m,b=p.hash,x=void 0===b?"":b,_=p.state,S=void 0===_?null:_,C=p.key,E=void 0===C?"default":C,A=k.useMemo((function(){var e=re(g,h);return null==e?null:{location:{pathname:e,search:y,hash:x,state:S,key:E},navigationType:u}}),[h,g,y,x,S,E,u]);return null==A?null:k.createElement(xe.Provider,{value:d},k.createElement(we.Provider,{children:a,value:A}))}function We(e){var t=e.children,n=e.location;return Te(He(t),n)}var Ve=function(e){return e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error",e}(Ve||{}),qe=new Promise((function(){}));k.Component;function He(e,t){void 0===t&&(t=[]);var n=[];return k.Children.forEach(e,(function(e,r){if(k.isValidElement(e)){var a=[].concat((0,M.Z)(t),[r]);if(e.type!==k.Fragment){e.type!==je&&j(!1),e.props.index&&e.props.children&&j(!1);var i={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=He(e.props.children,a)),n.push(i)}else n.push.apply(n,He(e.props.children,a))}})),n}function Ge(){return Ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ge.apply(this,arguments)}function Xe(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var Ye=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];new Map;var Ke=_.startTransition;T.flushSync,_.useId;function $e(e){var t=e.basename,n=e.children,r=e.future,a=e.window,i=k.useRef();null==i.current&&(i.current=function(e){return void 0===e&&(e={}),G((function(e,t){var n=H(e.location.hash.substr(1)),r=n.pathname,a=void 0===r?"/":r,i=n.search,o=void 0===i?"":i,u=n.hash,s=void 0===u?"":u;return a.startsWith("/")||a.startsWith(".")||(a="/"+a),V("",{pathname:a,search:o,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){var n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){var a=e.location.href,i=a.indexOf("#");r=-1===i?a:a.slice(0,i)}return r+"#"+("string"===typeof t?t:q(t))}),(function(e,t){U("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),e)}({window:a,v5Compat:!0}));var o=i.current,u=k.useState({action:o.action,location:o.location}),s=(0,C.Z)(u,2),c=s[0],l=s[1],f=(r||{}).v7_startTransition,h=k.useCallback((function(e){f&&Ke?Ke((function(){return l(e)})):l(e)}),[l,f]);return k.useLayoutEffect((function(){return o.listen(h)}),[o,h]),k.createElement(Ue,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}var Qe="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Je=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,et=k.forwardRef((function(e,t){var n,r=e.onClick,a=e.relative,i=e.reloadDocument,o=e.replace,u=e.state,s=e.target,c=e.to,l=e.preventScrollReset,f=e.unstable_viewTransition,h=Xe(e,Ye),d=k.useContext(xe).basename,p=!1;if("string"===typeof c&&Je.test(c)&&(n=c,Qe))try{var v=new URL(window.location.href),g=c.startsWith("//")?new URL(v.protocol+c):new URL(c),m=re(g.pathname,d);g.origin===v.origin&&null!=m?c=m+g.search+g.hash:p=!0}catch(x){}var y=function(e,t){var n=(void 0===t?{}:t).relative;Se()||j(!1);var r=k.useContext(xe),a=r.basename,i=r.navigator,o=Ne(e,{relative:n}),u=o.hash,s=o.pathname,c=o.search,l=s;return"/"!==a&&(l="/"===s?a:se([a,s])),i.createHref({pathname:l,search:c,hash:u})}(c,{relative:a}),b=function(e,t){var n=void 0===t?{}:t,r=n.target,a=n.replace,i=n.state,o=n.preventScrollReset,u=n.relative,s=n.unstable_viewTransition,c=Ae(),l=Ce(),f=Ne(e,{relative:u});return k.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();var n=void 0!==a?a:q(l)===q(f);c(e,{replace:n,state:i,preventScrollReset:o,relative:u,unstable_viewTransition:s})}}),[l,c,f,a,i,r,e,o,u,s])}(c,{replace:o,state:u,target:s,preventScrollReset:l,relative:a,unstable_viewTransition:f});return k.createElement("a",Ge({},h,{href:n||y,onClick:p||i?r:function(e){r&&r(e),e.defaultPrevented||b(e)},ref:t,target:s}))}));var tt,nt;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(tt||(tt={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(nt||(nt={}));var rt=n(184);var at=function(){return(0,rt.jsxs)("div",{className:"container-sm",style:{maxWidth:1e3},children:[(0,rt.jsxs)("div",{className:"frame",children:[(0,rt.jsxs)("h1",{className:"display-1",children:[(0,rt.jsxs)("div",{className:"display-5",style:{marginBottom:10},children:[(0,rt.jsx)("img",{src:"megaphone-fill.svg",alt:"megaphone",height:"40px",className:"megaphone"}),(0,rt.jsx)("span",{style:{color:"#fd7e14"},children:"Et Toi"})," (",(0,rt.jsx)("span",{style:{color:"#065f71"},children:"French"}),': "',(0,rt.jsx)("span",{style:{color:"#105e3a"},children:"And You"}),'")']}),(0,rt.jsx)("img",{src:"logo.png",alt:"logo with letters E2AI",height:"70px",className:"logo-align"}),"The ",(0,rt.jsx)("span",{className:"title-underline",children:"E2AI"})," Project:"]}),(0,rt.jsx)("h2",{className:"display-5",style:{color:"#646161",padding:"0 20px"},children:"Introducing Ethical and Explainable AI Literacy to Students"}),(0,rt.jsx)("h2",{className:"display-6",style:{marginTop:70,marginBottom:20},children:"Objectives"}),(0,rt.jsx)("div",{className:"container-sm",style:{justifyContent:"center",display:"flex"},children:(0,rt.jsxs)("ol",{children:[(0,rt.jsxs)("li",{children:["Advocating for ",(0,rt.jsx)("span",{className:"link-offset-2 underline",children:"AI Literacy for anyone interacting with AI"}),", especially inclusion in K-12 curriculum along with other literacy teachings like financial, sex, nutrition, health, etc."]}),(0,rt.jsxs)("li",{children:["Gaining competence in not just using and applying \u201coff-the-shelf\u201d pre-trained models developed by large corporations and organizations and treating them as \u201cblack boxes\u201d, but ",(0,rt.jsx)("span",{className:"link-offset-2 underline",children:"learning to understand the data, AI's interaction with that data, interpreting how it works, and keeping in mind ethical considerations around privacy, diversity and inclusion, equal access, bias, and sustainability"}),"."]}),(0,rt.jsxs)("li",{children:["With the prevalence of large foundational text models (at least among people with privileged access to electricity, the internet, and computer literacy, among others) and the ushering into a digital era, learning AI competencies that make ",(0,rt.jsx)("span",{className:"link-offset-2 underline",children:"mindful, inquiring, and practical student leaders"}),"."]})]})}),(0,rt.jsx)("h2",{className:"display-6",style:{marginTop:50,marginBottom:30},children:"Modules"}),(0,rt.jsx)("div",{className:"container-sm",style:{justifyContent:"center",display:"flex"},children:(0,rt.jsx)(et,{to:"cnn",className:"link-offset-3 module-link",children:"Image Classification with CNNs"})})]}),(0,rt.jsx)("hr",{style:{margin:0},className:"border border-2 "}),(0,rt.jsxs)("div",{className:"footer",children:["Designed and Developed by ",(0,rt.jsx)("a",{href:"https://ynshah3.github.io",className:"link-offset-3 footer-link",children:"Yash Shah"})]})]})},it=n(6222);function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(n),!0).forEach((function(t){(0,it.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function st(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ct=n(1418),lt=n.n(ct),ft=["as","disabled"];function ht(e){var t=e.tagName,n=e.disabled,r=e.href,a=e.target,i=e.rel,o=e.role,u=e.onClick,s=e.tabIndex,c=void 0===s?0:s,l=e.type;t||(t=null!=r||null!=a||null!=i?"a":"button");var f={tagName:t};if("button"===t)return[{type:l||"button",disabled:n},f];var h=function(e){(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==u||u(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:null!=o?o:"button",disabled:void 0,tabIndex:n?void 0:c,href:r,target:"a"===t?a:void 0,"aria-disabled":n||void 0,rel:"a"===t?i:void 0,onClick:h,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),h(e))}},f]}var dt=k.forwardRef((function(e,t){var n=e.as,r=e.disabled,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,ft),i=ht(Object.assign({tagName:n,disabled:r},a)),o=(0,C.Z)(i,2),u=o[0],s=o[1].tagName;return(0,rt.jsx)(s,Object.assign({},a,u,{ref:t}))}));dt.displayName="Button";var pt=dt,vt=["xxl","xl","lg","md","sm","xs"],gt=k.createContext({prefixes:{},breakpoints:vt,minBreakpoint:"xs"});gt.Consumer,gt.Provider;function mt(e,t){var n=(0,k.useContext)(gt).prefixes;return e||n[t]||t}function yt(){return(0,k.useContext)(gt).breakpoints}function bt(){return(0,k.useContext)(gt).minBreakpoint}var xt=["as","bsPrefix","variant","size","active","disabled","className"],wt=k.forwardRef((function(e,t){var n=e.as,r=e.bsPrefix,a=e.variant,i=void 0===a?"primary":a,o=e.size,u=e.active,s=void 0!==u&&u,c=e.disabled,l=void 0!==c&&c,f=e.className,h=st(e,xt),d=mt(r,"btn"),p=ht(ut({tagName:n,disabled:l},h)),v=(0,C.Z)(p,2),g=v[0],m=v[1].tagName;return(0,rt.jsx)(m,ut(ut(ut({},g),h),{},{ref:t,disabled:l,className:lt()(f,d,s&&"active",i&&"".concat(d,"-").concat(i),o&&"".concat(d,"-").concat(o),h.href&&l&&"disabled")}))}));wt.displayName="Button";var kt=wt,_t=!("undefined"===typeof window||!window.document||!window.document.createElement),St=!1,Ct=!1;try{var Et={get passive(){return St=!0},get once(){return Ct=St=!0}};_t&&(window.addEventListener("test",Et,Et),window.removeEventListener("test",Et,!0))}catch(ZR){}var At=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!Ct){var a=r.once,i=r.capture,o=n;!Ct&&a&&(o=n.__once||function e(r){this.removeEventListener(t,e,i),n.call(this,r)},n.__once=o),e.addEventListener(t,o,St?r:i)}e.addEventListener(t,n,r)};function Nt(e){return e&&e.ownerDocument||document}var Tt,Mt=function(e,t,n,r){var a=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,a),n.__once&&e.removeEventListener(t,n.__once,a)};function Dt(e){if((!Tt&&0!==Tt||e)&&_t){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Tt=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Tt}var Ft=function(e){var t=(0,k.useRef)(e);return(0,k.useEffect)((function(){t.current=e}),[e]),t};function It(e){var t=Ft(e);return(0,k.useCallback)((function(){return t.current&&t.current.apply(t,arguments)}),[t])}var Ot=function(e){return e&&"function"!==typeof e?function(t){e.current=t}:e};var Rt=function(e,t){return(0,k.useMemo)((function(){return function(e,t){var n=Ot(e),r=Ot(t);return function(e){n&&n(e),r&&r(e)}}(e,t)}),[e,t])};function Zt(e){var t=function(e){var t=(0,k.useRef)(e);return t.current=e,t}(e);(0,k.useEffect)((function(){return function(){return t.current()}}),[])}function Bt(e,t){return function(e){var t=Nt(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var zt=/([A-Z])/g;var Lt=/^ms-/;function Pt(e){return function(e){return e.replace(zt,"-$1").toLowerCase()}(e).replace(Lt,"-ms-")}var jt=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;var Ut=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(Pt(t))||Bt(e).getPropertyValue(Pt(t));Object.keys(t).forEach((function(a){var i=t[a];i||0===i?!function(e){return!(!e||!jt.test(e))}(a)?n+=Pt(a)+": "+i+";":r+=a+"("+i+") ":e.style.removeProperty(Pt(a))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n};var Wt=function(e,t,n,r){return At(e,t,n,r),function(){Mt(e,t,n,r)}};function Vt(e,t,n){void 0===n&&(n=5);var r=!1,a=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var a=document.createEvent("HTMLEvents");a.initEvent(t,n,r),e.dispatchEvent(a)}}(e,"transitionend",!0)}),t+n),i=Wt(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(a),i()}}function qt(e,t,n,r){null==n&&(n=function(e){var t=Ut(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var a=Vt(e,n,r),i=Wt(e,"transitionend",t);return function(){a(),i()}}function Ht(e){void 0===e&&(e=Nt());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(ZR){return e.body}}function Gt(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function Xt(e){return"".concat("data-rr-ui-").concat(e)}var Yt=Xt("modal-open"),Kt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.ownerDocument,r=t.handleContainerOverflow,a=void 0===r||r,i=t.isRTL,o=void 0!==i&&i;(0,D.Z)(this,e),this.handleContainerOverflow=a,this.isRTL=o,this.modals=[],this.ownerDocument=n}return(0,F.Z)(e,[{key:"getScrollbarWidth",value:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}},{key:"getElement",value:function(){return(this.ownerDocument||document).body}},{key:"setModalAttributes",value:function(e){}},{key:"removeModalAttributes",value:function(e){}},{key:"setContainerStyle",value:function(e){var t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style=(0,it.Z)({overflow:r.style.overflow},n,r.style[n]),e.scrollBarWidth&&(t[n]="".concat(parseInt(Ut(r,n)||"0",10)+e.scrollBarWidth,"px")),r.setAttribute(Yt,""),Ut(r,t)}},{key:"reset",value:function(){var e=this;(0,M.Z)(this.modals).forEach((function(t){return e.remove(t)}))}},{key:"removeContainerStyle",value:function(e){var t=this.getElement();t.removeAttribute(Yt),Object.assign(t.style,e.style)}},{key:"add",value:function(e){var t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}},{key:"isTopModal",value:function(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}]),e}(),$t=Kt,Qt=(0,k.createContext)(_t?window:void 0);Qt.Provider;function Jt(){return(0,k.useContext)(Qt)}var en=function(e,t){return _t?null==e?(t||Nt()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null};var tn="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,nn="undefined"!==typeof document||tn?k.useLayoutEffect:k.useEffect;var rn=function(e){var t=e.children,n=e.in,r=e.onExited,a=e.mountOnEnter,i=e.unmountOnExit,o=(0,k.useRef)(null),u=(0,k.useRef)(n),s=It(r);(0,k.useEffect)((function(){n?u.current=!0:s(o.current)}),[n,s]);var c=Rt(o,t.ref),l=(0,k.cloneElement)(t,{ref:c});return n?l:i||!u.current&&a?null:l};function an(e){var t=e.children,n=e.in,r=e.onExited,a=e.onEntered,i=e.transition,o=(0,k.useState)(!n),u=(0,C.Z)(o,2),s=u[0],c=u[1];n&&s&&c(!1);var l=function(e){var t=e.in,n=e.onTransition,r=(0,k.useRef)(null),a=(0,k.useRef)(!0),i=It(n);return nn((function(){if(r.current){var e=!1;return i({in:t,element:r.current,initial:a.current,isStale:function(){return e}}),function(){e=!0}}}),[t,i]),nn((function(){return a.current=!1,function(){a.current=!0}}),[]),r}({in:!!n,onTransition:function(e){Promise.resolve(i(e)).then((function(){e.isStale()||(e.in?null==a||a(e.element,e.initial):(c(!0),null==r||r(e.element)))}),(function(t){throw e.in||c(!0),t}))}}),f=Rt(l,t.ref);return s&&!n?null:(0,k.cloneElement)(t,{ref:f})}function on(e,t,n){return e?(0,rt.jsx)(e,Object.assign({},n)):t?(0,rt.jsx)(an,Object.assign({},n,{transition:t})):(0,rt.jsx)(rn,Object.assign({},n))}var un,sn=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function cn(e){var t=Jt(),n=e||function(e){return un||(un=new $t({ownerDocument:null==e?void 0:e.document})),un}(t),r=(0,k.useRef)({dialog:null,backdrop:null});return Object.assign(r.current,{add:function(){return n.add(r.current)},remove:function(){return n.remove(r.current)},isTopModal:function(){return n.isTopModal(r.current)},setDialogRef:(0,k.useCallback)((function(e){r.current.dialog=e}),[]),setBackdropRef:(0,k.useCallback)((function(e){r.current.backdrop=e}),[])})}var ln=(0,k.forwardRef)((function(e,t){var n=e.show,r=void 0!==n&&n,a=e.role,i=void 0===a?"dialog":a,o=e.className,u=e.style,s=e.children,c=e.backdrop,l=void 0===c||c,f=e.keyboard,h=void 0===f||f,d=e.onBackdropClick,p=e.onEscapeKeyDown,v=e.transition,g=e.runTransition,m=e.backdropTransition,y=e.runBackdropTransition,b=e.autoFocus,x=void 0===b||b,w=e.enforceFocus,_=void 0===w||w,S=e.restoreFocus,E=void 0===S||S,A=e.restoreFocusOptions,T=e.renderDialog,M=e.renderBackdrop,D=void 0===M?function(e){return(0,rt.jsx)("div",Object.assign({},e))}:M,F=e.manager,I=e.container,O=e.onShow,R=e.onHide,Z=void 0===R?function(){}:R,B=e.onExit,z=e.onExited,L=e.onExiting,P=e.onEnter,j=e.onEntering,U=e.onEntered,W=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,sn),V=Jt(),q=function(e,t){var n=Jt(),r=(0,k.useState)((function(){return en(e,null==n?void 0:n.document)})),a=(0,C.Z)(r,2),i=a[0],o=a[1];if(!i){var u=en(e);u&&o(u)}return(0,k.useEffect)((function(){t&&i&&t(i)}),[t,i]),(0,k.useEffect)((function(){var t=en(e);t!==i&&o(t)}),[e,i]),i}(I),H=cn(F),G=function(){var e=(0,k.useRef)(!0),t=(0,k.useRef)((function(){return e.current}));return(0,k.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),t.current}(),X=function(e){var t=(0,k.useRef)(null);return(0,k.useEffect)((function(){t.current=e})),t.current}(r),Y=(0,k.useState)(!r),K=(0,C.Z)(Y,2),$=K[0],Q=K[1],J=(0,k.useRef)(null);(0,k.useImperativeHandle)(t,(function(){return H}),[H]),_t&&!X&&r&&(J.current=Ht(null==V?void 0:V.document)),r&&$&&Q(!1);var ee=It((function(){if(H.add(),oe.current=Wt(document,"keydown",ae),ie.current=Wt(document,"focus",(function(){return setTimeout(ne)}),!0),O&&O(),x){var e,t,n=Ht(null!=(e=null==(t=H.dialog)?void 0:t.ownerDocument)?e:null==V?void 0:V.document);H.dialog&&n&&!Gt(H.dialog,n)&&(J.current=n,H.dialog.focus())}})),te=It((function(){var e;(H.remove(),null==oe.current||oe.current(),null==ie.current||ie.current(),E)&&(null==(e=J.current)||null==e.focus||e.focus(A),J.current=null)}));(0,k.useEffect)((function(){r&&q&&ee()}),[r,q,ee]),(0,k.useEffect)((function(){$&&te()}),[$,te]),Zt((function(){te()}));var ne=It((function(){if(_&&G()&&H.isTopModal()){var e=Ht(null==V?void 0:V.document);H.dialog&&e&&!Gt(H.dialog,e)&&H.dialog.focus()}})),re=It((function(e){e.target===e.currentTarget&&(null==d||d(e),!0===l&&Z())})),ae=It((function(e){h&&function(e){return"Escape"===e.code||27===e.keyCode}(e)&&H.isTopModal()&&(null==p||p(e),e.defaultPrevented||Z())})),ie=(0,k.useRef)(),oe=(0,k.useRef)();if(!q)return null;var ue=Object.assign({role:i,ref:H.setDialogRef,"aria-modal":"dialog"===i||void 0},W,{style:u,className:o,tabIndex:-1}),se=T?T(ue):(0,rt.jsx)("div",Object.assign({},ue,{children:k.cloneElement(s,{role:"document"})}));se=on(v,g,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!r,onExit:B,onExiting:L,onExited:function(){Q(!0),null==z||z.apply(void 0,arguments)},onEnter:P,onEntering:j,onEntered:U,children:se});var ce=null;return l&&(ce=D({ref:H.setBackdropRef,onClick:re}),ce=on(m,y,{in:!!r,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:ce})),(0,rt.jsx)(rt.Fragment,{children:N.createPortal((0,rt.jsxs)(rt.Fragment,{children:[ce,se]}),q)})}));ln.displayName="Modal";var fn=Object.assign(ln,{Manager:$t}),hn=n(4474),dn=n(3538);var pn=Function.prototype.bind.call(Function.prototype.call,[].slice);function vn(e,t){return pn(e.querySelectorAll(t))}function gn(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var mn,yn=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",bn=".sticky-top",xn=".navbar-toggler",wn=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.apply(this,arguments)}return(0,F.Z)(n,[{key:"adjustAndStore",value:function(e,t,n){var r=t.style[e];t.dataset[e]=r,Ut(t,(0,it.Z)({},e,"".concat(parseFloat(Ut(t,e))+n,"px")))}},{key:"restore",value:function(e,t){var n=t.dataset[e];void 0!==n&&(delete t.dataset[e],Ut(t,(0,it.Z)({},e,n)))}},{key:"setContainerStyle",value:function(e){var t=this;(0,hn.Z)((0,dn.Z)(n.prototype),"setContainerStyle",this).call(this,e);var r,a,i=this.getElement();if(a="modal-open",(r=i).classList?r.classList.add(a):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(r,a)||("string"===typeof r.className?r.className=r.className+" "+a:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+a)),e.scrollBarWidth){var o=this.isRTL?"paddingLeft":"paddingRight",u=this.isRTL?"marginLeft":"marginRight";vn(i,yn).forEach((function(n){return t.adjustAndStore(o,n,e.scrollBarWidth)})),vn(i,bn).forEach((function(n){return t.adjustAndStore(u,n,-e.scrollBarWidth)})),vn(i,xn).forEach((function(n){return t.adjustAndStore(u,n,e.scrollBarWidth)}))}}},{key:"removeContainerStyle",value:function(e){var t=this;(0,hn.Z)((0,dn.Z)(n.prototype),"removeContainerStyle",this).call(this,e);var r,a,i=this.getElement();a="modal-open",(r=i).classList?r.classList.remove(a):"string"===typeof r.className?r.className=gn(r.className,a):r.setAttribute("class",gn(r.className&&r.className.baseVal||"",a));var o=this.isRTL?"paddingLeft":"paddingRight",u=this.isRTL?"marginLeft":"marginRight";vn(i,yn).forEach((function(e){return t.restore(o,e)})),vn(i,bn).forEach((function(e){return t.restore(u,e)})),vn(i,xn).forEach((function(e){return t.restore(u,e)}))}}]),n}($t);function kn(e,t){return kn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kn(e,t)}var _n=!1,Sn=k.createContext(null),Cn="unmounted",En="exited",An="entering",Nn="entered",Tn="exiting",Mn=function(e){var t,n;function r(t,n){var r;r=e.call(this,t,n)||this;var a,i=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?i?(a=En,r.appearStatus=An):a=Nn:a=t.unmountOnExit||t.mountOnEnter?Cn:En,r.state={status:a},r.nextCallback=null,r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,kn(t,n),r.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Cn?{status:En}:null};var a=r.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==An&&n!==Nn&&(t=An):n!==An&&n!==Nn||(t=Tn)}this.updateStatus(!1,t)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},a.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===An){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:N.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===En&&this.setState({status:Cn})},a.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,a=this.props.nodeRef?[r]:[N.findDOMNode(this),r],i=a[0],o=a[1],u=this.getTimeouts(),s=r?u.appear:u.enter;!e&&!n||_n?this.safeSetState({status:Nn},(function(){t.props.onEntered(i)})):(this.props.onEnter(i,o),this.safeSetState({status:An},(function(){t.props.onEntering(i,o),t.onTransitionEnd(s,(function(){t.safeSetState({status:Nn},(function(){t.props.onEntered(i,o)}))}))})))},a.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:N.findDOMNode(this);t&&!_n?(this.props.onExit(r),this.safeSetState({status:Tn},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:En},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:En},(function(){e.props.onExited(r)}))},a.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},a.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},a.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:N.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],i=a[0],o=a[1];this.props.addEndListener(i,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},a.render=function(){var e=this.state.status;if(e===Cn)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return k.createElement(Sn.Provider,{value:null},"function"===typeof n?n(e,r):k.cloneElement(k.Children.only(n),r))},r}(k.Component);function Dn(){}Mn.contextType=Sn,Mn.propTypes={},Mn.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Dn,onEntering:Dn,onEntered:Dn,onExit:Dn,onExiting:Dn,onExited:Dn},Mn.UNMOUNTED=Cn,Mn.EXITED=En,Mn.ENTERING=An,Mn.ENTERED=Nn,Mn.EXITING=Tn;var Fn=Mn;function In(e,t){var n=Ut(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function On(e,t){var n=In(e,"transitionDuration"),r=In(e,"transitionDelay"),a=qt(e,(function(n){n.target===e&&(a(),t(n))}),n+r)}var Rn,Zn=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],Bn=k.forwardRef((function(e,t){var n=e.onEnter,r=e.onEntering,a=e.onEntered,i=e.onExit,o=e.onExiting,u=e.onExited,s=e.addEndListener,c=e.children,l=e.childRef,f=st(e,Zn),h=(0,k.useRef)(null),d=Rt(h,l),p=function(e){var t;d((t=e)&&"setState"in t?N.findDOMNode(t):null!=t?t:null)},v=function(e){return function(t){e&&h.current&&e(h.current,t)}},g=(0,k.useCallback)(v(n),[n]),m=(0,k.useCallback)(v(r),[r]),y=(0,k.useCallback)(v(a),[a]),b=(0,k.useCallback)(v(i),[i]),x=(0,k.useCallback)(v(o),[o]),w=(0,k.useCallback)(v(u),[u]),_=(0,k.useCallback)(v(s),[s]);return(0,rt.jsx)(Fn,ut(ut({ref:t},f),{},{onEnter:g,onEntered:y,onEntering:m,onExit:b,onExited:w,onExiting:x,addEndListener:_,nodeRef:h,children:"function"===typeof c?function(e,t){return c(e,ut(ut({},t),{},{ref:p}))}:k.cloneElement(c,{ref:p})}))})),zn=["className","children","transitionClasses","onEnter"],Ln=(Rn={},(0,it.Z)(Rn,An,"show"),(0,it.Z)(Rn,Nn,"show"),Rn),Pn=k.forwardRef((function(e,t){var n=e.className,r=e.children,a=e.transitionClasses,i=void 0===a?{}:a,o=e.onEnter,u=ut({in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},st(e,zn)),s=(0,k.useCallback)((function(e,t){!function(e){e.offsetHeight}(e),null==o||o(e,t)}),[o]);return(0,rt.jsx)(Bn,ut(ut({ref:t,addEndListener:On},u),{},{onEnter:s,childRef:r.ref,children:function(e,t){return k.cloneElement(r,ut(ut({},t),{},{className:lt()("fade",n,r.props.className,Ln[e],i[e])}))}}))}));Pn.displayName="Fade";var jn=Pn,Un=["className","bsPrefix","as"],Wn=k.forwardRef((function(e,t){var n=e.className,r=e.bsPrefix,a=e.as,i=void 0===a?"div":a,o=st(e,Un);return r=mt(r,"modal-body"),(0,rt.jsx)(i,ut({ref:t,className:lt()(n,r)},o))}));Wn.displayName="ModalBody";var Vn=Wn,qn=k.createContext({onHide:function(){}}),Hn=["bsPrefix","className","contentClassName","centered","size","fullscreen","children","scrollable"],Gn=k.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.contentClassName,i=e.centered,o=e.size,u=e.fullscreen,s=e.children,c=e.scrollable,l=st(e,Hn);n=mt(n,"modal");var f="".concat(n,"-dialog"),h="string"===typeof u?"".concat(n,"-fullscreen-").concat(u):"".concat(n,"-fullscreen");return(0,rt.jsx)("div",ut(ut({},l),{},{ref:t,className:lt()(f,r,o&&"".concat(n,"-").concat(o),i&&"".concat(f,"-centered"),c&&"".concat(f,"-scrollable"),u&&h),children:(0,rt.jsx)("div",{className:lt()("".concat(n,"-content"),a),children:s})}))}));Gn.displayName="ModalDialog";var Xn=Gn,Yn=["className","bsPrefix","as"],Kn=k.forwardRef((function(e,t){var n=e.className,r=e.bsPrefix,a=e.as,i=void 0===a?"div":a,o=st(e,Yn);return r=mt(r,"modal-footer"),(0,rt.jsx)(i,ut({ref:t,className:lt()(n,r)},o))}));Kn.displayName="ModalFooter";var $n=Kn,Qn=n(2007),Jn=n.n(Qn),er=["className","variant","aria-label"],tr={"aria-label":Jn().string,onClick:Jn().func,variant:Jn().oneOf(["white"])},nr=k.forwardRef((function(e,t){var n=e.className,r=e.variant,a=e["aria-label"],i=void 0===a?"Close":a,o=st(e,er);return(0,rt.jsx)("button",ut({ref:t,type:"button",className:lt()("btn-close",r&&"btn-close-".concat(r),n),"aria-label":i},o))}));nr.displayName="CloseButton",nr.propTypes=tr;var rr=nr,ar=["closeLabel","closeVariant","closeButton","onHide","children"],ir=k.forwardRef((function(e,t){var n=e.closeLabel,r=void 0===n?"Close":n,a=e.closeVariant,i=e.closeButton,o=void 0!==i&&i,u=e.onHide,s=e.children,c=st(e,ar),l=(0,k.useContext)(qn),f=It((function(){null==l||l.onHide(),null==u||u()}));return(0,rt.jsxs)("div",ut(ut({ref:t},c),{},{children:[s,o&&(0,rt.jsx)(rr,{"aria-label":r,variant:a,onClick:f})]}))})),or=ir,ur=["bsPrefix","className","closeLabel","closeButton"],sr=k.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.closeLabel,i=void 0===a?"Close":a,o=e.closeButton,u=void 0!==o&&o,s=st(e,ur);return n=mt(n,"modal-header"),(0,rt.jsx)(or,ut(ut({ref:t},s),{},{className:lt()(r,n),closeLabel:i,closeButton:u}))}));sr.displayName="ModalHeader";var cr,lr=sr,fr=["className","bsPrefix","as"],hr=(cr="h4",k.forwardRef((function(e,t){return(0,rt.jsx)("div",ut(ut({},e),{},{ref:t,className:lt()(e.className,cr)}))}))),dr=k.forwardRef((function(e,t){var n=e.className,r=e.bsPrefix,a=e.as,i=void 0===a?hr:a,o=st(e,fr);return r=mt(r,"modal-title"),(0,rt.jsx)(i,ut({ref:t,className:lt()(n,r)},o))}));dr.displayName="ModalTitle";var pr=dr,vr=["bsPrefix","className","style","dialogClassName","contentClassName","children","dialogAs","data-bs-theme","aria-labelledby","aria-describedby","aria-label","show","animation","backdrop","keyboard","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"];function gr(e){return(0,rt.jsx)(jn,ut(ut({},e),{},{timeout:null}))}function mr(e){return(0,rt.jsx)(jn,ut(ut({},e),{},{timeout:null}))}var yr=k.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.style,i=e.dialogClassName,o=e.contentClassName,u=e.children,s=e.dialogAs,c=void 0===s?Xn:s,l=e["data-bs-theme"],f=e["aria-labelledby"],h=e["aria-describedby"],d=e["aria-label"],p=e.show,v=void 0!==p&&p,g=e.animation,m=void 0===g||g,y=e.backdrop,b=void 0===y||y,x=e.keyboard,w=void 0===x||x,_=e.onEscapeKeyDown,S=e.onShow,E=e.onHide,A=e.container,N=e.autoFocus,T=void 0===N||N,M=e.enforceFocus,D=void 0===M||M,F=e.restoreFocus,I=void 0===F||F,O=e.restoreFocusOptions,R=e.onEntered,Z=e.onExit,B=e.onExiting,z=e.onEnter,L=e.onEntering,P=e.onExited,j=e.backdropClassName,U=e.manager,W=st(e,vr),V=(0,k.useState)({}),q=(0,C.Z)(V,2),H=q[0],G=q[1],X=(0,k.useState)(!1),Y=(0,C.Z)(X,2),K=Y[0],$=Y[1],Q=(0,k.useRef)(!1),J=(0,k.useRef)(!1),ee=(0,k.useRef)(null),te=(0,k.useState)(null),ne=(0,C.Z)(te,2),re=ne[0],ae=ne[1],ie=Rt(t,ae),oe=It(E),ue="rtl"===(0,k.useContext)(gt).dir;n=mt(n,"modal");var se=(0,k.useMemo)((function(){return{onHide:oe}}),[oe]);function ce(){return U||function(e){return mn||(mn=new wn(e)),mn}({isRTL:ue})}function le(e){if(_t){var t=ce().getScrollbarWidth()>0,n=e.scrollHeight>Nt(e).documentElement.clientHeight;G({paddingRight:t&&!n?Dt():void 0,paddingLeft:!t&&n?Dt():void 0})}}var fe=It((function(){re&&le(re.dialog)}));Zt((function(){Mt(window,"resize",fe),null==ee.current||ee.current()}));var he=function(){Q.current=!0},de=function(e){Q.current&&re&&e.target===re.dialog&&(J.current=!0),Q.current=!1},pe=function(){$(!0),ee.current=qt(re.dialog,(function(){$(!1)}))},ve=function(e){"static"!==b?J.current||e.target!==e.currentTarget?J.current=!1:null==E||E():function(e){e.target===e.currentTarget&&pe()}(e)},ge=(0,k.useCallback)((function(e){return(0,rt.jsx)("div",ut(ut({},e),{},{className:lt()("".concat(n,"-backdrop"),j,!m&&"show")}))}),[m,j,n]),me=ut(ut({},a),H);me.display="block";return(0,rt.jsx)(qn.Provider,{value:se,children:(0,rt.jsx)(fn,{show:v,ref:ie,backdrop:b,container:A,keyboard:!0,autoFocus:T,enforceFocus:D,restoreFocus:I,restoreFocusOptions:O,onEscapeKeyDown:function(e){w?null==_||_(e):(e.preventDefault(),"static"===b&&pe())},onShow:S,onHide:E,onEnter:function(e,t){e&&le(e),null==z||z(e,t)},onEntering:function(e,t){null==L||L(e,t),At(window,"resize",fe)},onEntered:R,onExit:function(e){null==ee.current||ee.current(),null==Z||Z(e)},onExiting:B,onExited:function(e){e&&(e.style.display=""),null==P||P(e),Mt(window,"resize",fe)},manager:ce(),transition:m?gr:void 0,backdropTransition:m?mr:void 0,renderBackdrop:ge,renderDialog:function(e){return(0,rt.jsx)("div",ut(ut({role:"dialog"},e),{},{style:me,className:lt()(r,n,K&&"".concat(n,"-static"),!m&&"show"),onClick:b?ve:void 0,onMouseUp:de,"data-bs-theme":l,"aria-label":d,"aria-labelledby":f,"aria-describedby":h,children:(0,rt.jsx)(c,ut(ut({},W),{},{onMouseDown:he,className:i,contentClassName:o,children:u}))}))}})})}));yr.displayName="Modal";var br=Object.assign(yr,{Body:Vn,Header:lr,Title:pr,Footer:$n,Dialog:Xn,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),xr=["as","className","type","tooltip"],wr={type:Jn().string,tooltip:Jn().bool,as:Jn().elementType},kr=k.forwardRef((function(e,t){var n=e.as,r=void 0===n?"div":n,a=e.className,i=e.type,o=void 0===i?"valid":i,u=e.tooltip,s=void 0!==u&&u,c=st(e,xr);return(0,rt.jsx)(r,ut(ut({},c),{},{ref:t,className:lt()(a,"".concat(o,"-").concat(s?"tooltip":"feedback"))}))}));kr.displayName="Feedback",kr.propTypes=wr;var _r=kr,Sr=k.createContext({}),Cr=["id","bsPrefix","className","type","isValid","isInvalid","as"],Er=k.forwardRef((function(e,t){var n=e.id,r=e.bsPrefix,a=e.className,i=e.type,o=void 0===i?"checkbox":i,u=e.isValid,s=void 0!==u&&u,c=e.isInvalid,l=void 0!==c&&c,f=e.as,h=void 0===f?"input":f,d=st(e,Cr),p=(0,k.useContext)(Sr).controlId;return r=mt(r,"form-check-input"),(0,rt.jsx)(h,ut(ut({},d),{},{ref:t,type:o,id:n||p,className:lt()(a,r,s&&"is-valid",l&&"is-invalid")}))}));Er.displayName="FormCheckInput";var Ar=Er,Nr=["bsPrefix","className","htmlFor"],Tr=k.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.htmlFor,i=st(e,Nr),o=(0,k.useContext)(Sr).controlId;return n=mt(n,"form-check-label"),(0,rt.jsx)("label",ut(ut({},i),{},{ref:t,htmlFor:a||o,className:lt()(r,n)}))}));Tr.displayName="FormCheckLabel";var Mr=Tr;function Dr(e,t){var n=0;return k.Children.map(e,(function(e){return k.isValidElement(e)?t(e,n++):e}))}var Fr=["id","bsPrefix","bsSwitchPrefix","inline","reverse","disabled","isValid","isInvalid","feedbackTooltip","feedback","feedbackType","className","style","title","type","label","children","as"],Ir=k.forwardRef((function(e,t){var n=e.id,r=e.bsPrefix,a=e.bsSwitchPrefix,i=e.inline,o=void 0!==i&&i,u=e.reverse,s=void 0!==u&&u,c=e.disabled,l=void 0!==c&&c,f=e.isValid,h=void 0!==f&&f,d=e.isInvalid,p=void 0!==d&&d,v=e.feedbackTooltip,g=void 0!==v&&v,m=e.feedback,y=e.feedbackType,b=e.className,x=e.style,w=e.title,_=void 0===w?"":w,S=e.type,C=void 0===S?"checkbox":S,E=e.label,A=e.children,N=e.as,T=void 0===N?"input":N,M=st(e,Fr);r=mt(r,"form-check"),a=mt(a,"form-switch");var D=(0,k.useContext)(Sr).controlId,F=(0,k.useMemo)((function(){return{controlId:n||D}}),[D,n]),I=!A&&null!=E&&!1!==E||function(e,t){return k.Children.toArray(e).some((function(e){return k.isValidElement(e)&&e.type===t}))}(A,Mr),O=(0,rt.jsx)(Ar,ut(ut({},M),{},{type:"switch"===C?"checkbox":C,ref:t,isValid:h,isInvalid:p,disabled:l,as:T}));return(0,rt.jsx)(Sr.Provider,{value:F,children:(0,rt.jsx)("div",{style:x,className:lt()(b,I&&r,o&&"".concat(r,"-inline"),s&&"".concat(r,"-reverse"),"switch"===C&&a),children:A||(0,rt.jsxs)(rt.Fragment,{children:[O,I&&(0,rt.jsx)(Mr,{title:_,children:E}),m&&(0,rt.jsx)(_r,{type:y,tooltip:g,children:m})]})})})}));Ir.displayName="FormCheck";var Or=Object.assign(Ir,{Input:Ar,Label:Mr}),Rr=(n(2391),["bsPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","as"]),Zr=k.forwardRef((function(e,t){var n=e.bsPrefix,r=e.type,a=e.size,i=e.htmlSize,o=e.id,u=e.className,s=e.isValid,c=void 0!==s&&s,l=e.isInvalid,f=void 0!==l&&l,h=e.plaintext,d=e.readOnly,p=e.as,v=void 0===p?"input":p,g=st(e,Rr),m=(0,k.useContext)(Sr).controlId;return n=mt(n,"form-control"),(0,rt.jsx)(v,ut(ut({},g),{},{type:r,size:i,ref:t,readOnly:d,id:o||m,className:lt()(u,h?"".concat(n,"-plaintext"):n,a&&"".concat(n,"-").concat(a),"color"===r&&"".concat(n,"-color"),c&&"is-valid",f&&"is-invalid")}))}));Zr.displayName="FormControl";var Br=Object.assign(Zr,{Feedback:_r}),zr=["className","bsPrefix","as"],Lr=k.forwardRef((function(e,t){var n=e.className,r=e.bsPrefix,a=e.as,i=void 0===a?"div":a,o=st(e,zr);return r=mt(r,"form-floating"),(0,rt.jsx)(i,ut({ref:t,className:lt()(n,r)},o))}));Lr.displayName="FormFloating";var Pr=Lr,jr=["controlId","as"],Ur=k.forwardRef((function(e,t){var n=e.controlId,r=e.as,a=void 0===r?"div":r,i=st(e,jr),o=(0,k.useMemo)((function(){return{controlId:n}}),[n]);return(0,rt.jsx)(Sr.Provider,{value:o,children:(0,rt.jsx)(a,ut(ut({},i),{},{ref:t}))})}));Ur.displayName="FormGroup";var Wr=Ur,Vr=["as","bsPrefix","className"],qr=["className"];var Hr=k.forwardRef((function(e,t){var n=function(e){var t=e.as,n=e.bsPrefix,r=e.className,a=st(e,Vr);n=mt(n,"col");var i=yt(),o=bt(),u=[],s=[];return i.forEach((function(e){var t,r,i,c=a[e];delete a[e],"object"===typeof c&&null!=c?(t=c.span,r=c.offset,i=c.order):t=c;var l=e!==o?"-".concat(e):"";t&&u.push(!0===t?"".concat(n).concat(l):"".concat(n).concat(l,"-").concat(t)),null!=i&&s.push("order".concat(l,"-").concat(i)),null!=r&&s.push("offset".concat(l,"-").concat(r))})),[ut(ut({},a),{},{className:lt().apply(void 0,[r].concat(u,s))}),{as:t,bsPrefix:n,spans:u}]}(e),r=(0,C.Z)(n,2),a=r[0],i=a.className,o=st(a,qr),u=r[1],s=u.as,c=void 0===s?"div":s,l=u.bsPrefix,f=u.spans;return(0,rt.jsx)(c,ut(ut({},o),{},{ref:t,className:lt()(i,!f.length&&l)}))}));Hr.displayName="Col";var Gr=Hr,Xr=["as","bsPrefix","column","visuallyHidden","className","htmlFor"],Yr=k.forwardRef((function(e,t){var n=e.as,r=void 0===n?"label":n,a=e.bsPrefix,i=e.column,o=void 0!==i&&i,u=e.visuallyHidden,s=void 0!==u&&u,c=e.className,l=e.htmlFor,f=st(e,Xr),h=(0,k.useContext)(Sr).controlId;a=mt(a,"form-label");var d="col-form-label";"string"===typeof o&&(d="".concat(d," ").concat(d,"-").concat(o));var p=lt()(c,a,s&&"visually-hidden",o&&d);return l=l||h,o?(0,rt.jsx)(Gr,ut({ref:t,as:"label",className:p,htmlFor:l},f)):(0,rt.jsx)(r,ut({ref:t,className:p,htmlFor:l},f))}));Yr.displayName="FormLabel";var Kr=Yr,$r=["bsPrefix","className","id"],Qr=k.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.id,i=st(e,$r),o=(0,k.useContext)(Sr).controlId;return n=mt(n,"form-range"),(0,rt.jsx)("input",ut(ut({},i),{},{type:"range",ref:t,className:lt()(r,n),id:a||o}))}));Qr.displayName="FormRange";var Jr=Qr,ea=["bsPrefix","size","htmlSize","className","isValid","isInvalid","id"],ta=k.forwardRef((function(e,t){var n=e.bsPrefix,r=e.size,a=e.htmlSize,i=e.className,o=e.isValid,u=void 0!==o&&o,s=e.isInvalid,c=void 0!==s&&s,l=e.id,f=st(e,ea),h=(0,k.useContext)(Sr).controlId;return n=mt(n,"form-select"),(0,rt.jsx)("select",ut(ut({},f),{},{size:a,ref:t,className:lt()(i,n,r&&"".concat(n,"-").concat(r),u&&"is-valid",c&&"is-invalid"),id:l||h}))}));ta.displayName="FormSelect";var na=ta,ra=["bsPrefix","className","as","muted"],aa=k.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.as,i=void 0===a?"small":a,o=e.muted,u=st(e,ra);return n=mt(n,"form-text"),(0,rt.jsx)(i,ut(ut({},u),{},{ref:t,className:lt()(r,n,o&&"text-muted")}))}));aa.displayName="FormText";var ia=aa,oa=k.forwardRef((function(e,t){return(0,rt.jsx)(Or,ut(ut({},e),{},{ref:t,type:"switch"}))}));oa.displayName="Switch";var ua=Object.assign(oa,{Input:Or.Input,Label:Or.Label}),sa=["bsPrefix","className","children","controlId","label"],ca=k.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.children,i=e.controlId,o=e.label,u=st(e,sa);return n=mt(n,"form-floating"),(0,rt.jsxs)(Wr,ut(ut({ref:t,className:lt()(r,n),controlId:i},u),{},{children:[a,(0,rt.jsx)("label",{htmlFor:i,children:o})]}))}));ca.displayName="FloatingLabel";var la=ca,fa=["className","validated","as"],ha={_ref:Jn().any,validated:Jn().bool,as:Jn().elementType},da=k.forwardRef((function(e,t){var n=e.className,r=e.validated,a=e.as,i=void 0===a?"form":a,o=st(e,fa);return(0,rt.jsx)(i,ut(ut({},o),{},{ref:t,className:lt()(n,r&&"was-validated")}))}));da.displayName="Form",da.propTypes=ha;var pa=Object.assign(da,{Group:Wr,Control:Br,Floating:Pr,Check:Or,Switch:ua,Label:Kr,Text:ia,Range:Jr,Select:na,FloatingLabel:la});function va(){return va=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},va.apply(this,arguments)}n(2176);function ga(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function ma(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function ya(e,t){return Object.keys(t).reduce((function(n,r){var a,i=n,o=i[ga(r)],u=i[r],s=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(i,[ga(r),r].map(ma)),c=t[r],l=function(e,t,n){var r=(0,k.useRef)(void 0!==e),a=(0,k.useState)(t),i=a[0],o=a[1],u=void 0!==e,s=r.current;return r.current=u,!u&&s&&i!==t&&o(t),[u?e:i,(0,k.useCallback)((function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];n&&n.apply(void 0,[e].concat(r)),o(e)}),[n])]}(u,o,e[c]),f=l[0],h=l[1];return va({},s,((a={})[r]=f,a[c]=h,a))}),e)}function ba(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function xa(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function wa(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}ba.__suppressDeprecationWarning=!0,xa.__suppressDeprecationWarning=!0,wa.__suppressDeprecationWarning=!0;function ka(e,t,n){var r=(0,k.useRef)(void 0!==e),a=(0,k.useState)(t),i=(0,C.Z)(a,2),o=i[0],u=i[1],s=void 0!==e,c=r.current;return r.current=s,!s&&c&&o!==t&&u(t),[s?e:o,(0,k.useCallback)((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=t[0],i=t.slice(1),o=null==n?void 0:n.apply(void 0,[a].concat((0,M.Z)(i)));return u(a),o}),[n])]}var _a={prefix:String(Math.round(1e10*Math.random())),current:0},Sa=k.createContext(_a),Ca=k.createContext(!1);var Ea=Boolean("undefined"!==typeof window&&window.document&&window.document.createElement),Aa=new WeakMap;function Na(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,k.useContext)(Sa),n=(0,k.useRef)(null);if(null===n.current&&!e){var r,a,i=null===(a=k.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)||void 0===a||null===(r=a.ReactCurrentOwner)||void 0===r?void 0:r.current;if(i){var o=Aa.get(i);null==o?Aa.set(i,{id:t.current,state:i.memoizedState}):i.memoizedState!==o.state&&(t.current=o.id,Aa.delete(i))}n.current=++t.current}return n.current}var Ta="function"===typeof k.useId?function(e){var t=k.useId(),n=(0,k.useState)("function"===typeof k.useSyncExternalStore?k.useSyncExternalStore(Fa,Ma,Da):(0,k.useContext)(Ca)),r=(0,C.Z)(n,1)[0]?"react-aria":"react-aria".concat(_a.prefix);return e||"".concat(r,"-").concat(t)}:function(e){var t=(0,k.useContext)(Sa);t!==_a||Ea||console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");var n=Na(!!e),r="react-aria".concat(t.prefix);return e||"".concat(r,"-").concat(n)};function Ma(){return!1}function Da(){return!0}function Fa(e){return function(){}}var Ia=k.createContext(null),Oa=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=e?String(e):t||null},Ra=k.createContext(null),Za=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],Ba=["activeKey","getControlledId","getControllerId"],za=["as"];function La(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function Pa(e){var t=e.active,n=e.eventKey,r=e.mountOnEnter,a=e.transition,i=e.unmountOnExit,o=e.role,u=void 0===o?"tabpanel":o,s=e.onEnter,c=e.onEntering,l=e.onEntered,f=e.onExit,h=e.onExiting,d=e.onExited,p=La(e,Za),v=(0,k.useContext)(Ia);if(!v)return[Object.assign({},p,{role:u}),{eventKey:n,isActive:t,mountOnEnter:r,transition:a,unmountOnExit:i,onEnter:s,onEntering:c,onEntered:l,onExit:f,onExiting:h,onExited:d}];var g=v.activeKey,m=v.getControlledId,y=v.getControllerId,b=La(v,Ba),x=Oa(n);return[Object.assign({},p,{role:u,id:m(n),"aria-labelledby":y(n)}),{eventKey:n,isActive:null==t&&null!=x?Oa(g)===x:t,transition:a||b.transition,mountOnEnter:null!=r?r:b.mountOnEnter,unmountOnExit:null!=i?i:b.unmountOnExit,onEnter:s,onEntering:c,onEntered:l,onExit:f,onExiting:h,onExited:d}]}var ja=k.forwardRef((function(e,t){var n=e.as,r=void 0===n?"div":n,a=Pa(La(e,za)),i=(0,C.Z)(a,2),o=i[0],u=i[1],s=u.isActive,c=u.onEnter,l=u.onEntering,f=u.onEntered,h=u.onExit,d=u.onExiting,p=u.onExited,v=u.mountOnEnter,g=u.unmountOnExit,m=u.transition,y=void 0===m?rn:m;return(0,rt.jsx)(Ia.Provider,{value:null,children:(0,rt.jsx)(Ra.Provider,{value:null,children:(0,rt.jsx)(y,{in:s,onEnter:c,onEntering:l,onEntered:f,onExit:h,onExiting:d,onExited:p,mountOnEnter:v,unmountOnExit:g,children:(0,rt.jsx)(r,Object.assign({},o,{ref:t,hidden:!s,"aria-hidden":!s}))})})})}));ja.displayName="TabPanel";var Ua=function(e){var t=e.id,n=e.generateChildId,r=e.onSelect,a=e.activeKey,i=e.defaultActiveKey,o=e.transition,u=e.mountOnEnter,s=e.unmountOnExit,c=e.children,l=ka(a,i,r),f=(0,C.Z)(l,2),h=f[0],d=f[1],p=Ta(t),v=(0,k.useMemo)((function(){return n||function(e,t){return p?"".concat(p,"-").concat(t,"-").concat(e):null}}),[p,n]),g=(0,k.useMemo)((function(){return{onSelect:d,activeKey:h,transition:o,mountOnEnter:u||!1,unmountOnExit:s||!1,getControlledId:function(e){return v(e,"tabpane")},getControllerId:function(e){return v(e,"tab")}}}),[d,h,o,u,s,v]);return(0,rt.jsx)(Ia.Provider,{value:g,children:(0,rt.jsx)(Ra.Provider,{value:d||null,children:c})})};Ua.Panel=ja;var Wa=Ua;n(3573);var Va=k.createContext(null);Va.displayName="NavContext";var qa=Va,Ha=["as","active","eventKey"];function Ga(e){var t=e.key,n=e.onClick,r=e.active,a=e.id,i=e.role,o=e.disabled,u=(0,k.useContext)(Ra),s=(0,k.useContext)(qa),c=(0,k.useContext)(Ia),l=r,f={role:i};if(s){i||"tablist"!==s.role||(f.role="tab");var h=s.getControllerId(null!=t?t:null),d=s.getControlledId(null!=t?t:null);f[Xt("event-key")]=t,f.id=h||a,!(l=null==r&&null!=t?s.activeKey===t:r)&&(null!=c&&c.unmountOnExit||null!=c&&c.mountOnEnter)||(f["aria-controls"]=d)}return"tab"===f.role&&(f["aria-selected"]=l,l||(f.tabIndex=-1),o&&(f.tabIndex=-1,f["aria-disabled"]=!0)),f.onClick=It((function(e){o||(null==n||n(e),null!=t&&u&&!e.isPropagationStopped()&&u(t,e))})),[f,{isActive:l}]}var Xa=k.forwardRef((function(e,t){var n=e.as,r=void 0===n?pt:n,a=e.active,i=e.eventKey,o=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,Ha),u=Ga(Object.assign({key:Oa(i,o.href),active:a},o)),s=(0,C.Z)(u,2),c=s[0],l=s[1];return c[Xt("active")]=l.isActive,(0,rt.jsx)(r,Object.assign({},o,c,{ref:t}))}));Xa.displayName="NavItem";var Ya=Xa,Ka=["as","onSelect","activeKey","role","onKeyDown"];var $a=function(){},Qa=Xt("event-key"),Ja=k.forwardRef((function(e,t){var n,r,a=e.as,i=void 0===a?"div":a,o=e.onSelect,u=e.activeKey,s=e.role,c=e.onKeyDown,l=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,Ka),f=function(){var e=(0,k.useReducer)((function(e){return!e}),!1);return(0,C.Z)(e,2)[1]}(),h=(0,k.useRef)(!1),d=(0,k.useContext)(Ra),p=(0,k.useContext)(Ia);p&&(s=s||"tablist",u=p.activeKey,n=p.getControlledId,r=p.getControllerId);var v=(0,k.useRef)(null),g=function(e){var t=v.current;if(!t)return null;var n=vn(t,"[".concat(Qa,"]:not([aria-disabled=true])")),r=t.querySelector("[aria-selected=true]");if(!r||r!==document.activeElement)return null;var a=n.indexOf(r);if(-1===a)return null;var i=a+e;return i>=n.length&&(i=0),i<0&&(i=n.length-1),n[i]},m=function(e,t){null!=e&&(null==o||o(e,t),null==d||d(e,t))};(0,k.useEffect)((function(){if(v.current&&h.current){var e=v.current.querySelector("[".concat(Qa,"][aria-selected=true]"));null==e||e.focus()}h.current=!1}));var y=Rt(t,v);return(0,rt.jsx)(Ra.Provider,{value:m,children:(0,rt.jsx)(qa.Provider,{value:{role:s,activeKey:Oa(u),getControlledId:n||$a,getControllerId:r||$a},children:(0,rt.jsx)(i,Object.assign({},l,{onKeyDown:function(e){if(null==c||c(e),p){var t,n;switch(e.key){case"ArrowLeft":case"ArrowUp":t=g(-1);break;case"ArrowRight":case"ArrowDown":t=g(1);break;default:return}if(t)e.preventDefault(),m(t.dataset[(n="EventKey","".concat("rrUi").concat(n))]||null,e),h.current=!0,f()}},ref:y,role:s}))})})}));Ja.displayName="Nav";var ei=Object.assign(Ja,{Item:Ya}),ti=k.createContext(null);ti.displayName="NavbarContext";var ni=ti,ri=k.createContext(null);ri.displayName="CardHeaderContext";var ai=ri,ii=["className","bsPrefix","as"],oi=k.forwardRef((function(e,t){var n=e.className,r=e.bsPrefix,a=e.as,i=void 0===a?"div":a,o=st(e,ii);return r=mt(r,"nav-item"),(0,rt.jsx)(i,ut({ref:t,className:lt()(n,r)},o))}));oi.displayName="NavItem";var ui=oi;new WeakMap;var si=["onKeyDown"];var ci=k.forwardRef((function(e,t){var n,r=e.onKeyDown,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,si),i=ht(Object.assign({tagName:"a"},a)),o=(0,C.Z)(i,1)[0],u=It((function(e){o.onKeyDown(e),null==r||r(e)}));return(n=a.href)&&"#"!==n.trim()&&"button"!==a.role?(0,rt.jsx)("a",Object.assign({ref:t},a,{onKeyDown:r})):(0,rt.jsx)("a",Object.assign({ref:t},a,o,{onKeyDown:u}))}));ci.displayName="Anchor";var li=ci,fi=["bsPrefix","className","as","active","eventKey","disabled"],hi=k.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.as,i=void 0===a?li:a,o=e.active,u=e.eventKey,s=e.disabled,c=void 0!==s&&s,l=st(e,fi);n=mt(n,"nav-link");var f=Ga(ut({key:Oa(u,l.href),active:o,disabled:c},l)),h=(0,C.Z)(f,2),d=h[0],p=h[1];return(0,rt.jsx)(i,ut(ut(ut({},l),d),{},{ref:t,disabled:c,className:lt()(r,n,c&&"disabled",p.isActive&&"active")}))}));hi.displayName="NavLink";var di=hi,pi=["as","bsPrefix","variant","fill","justify","navbar","navbarScroll","className","activeKey"],vi=k.forwardRef((function(e,t){var n,r,a,i=ya(e,{activeKey:"onSelect"}),o=i.as,u=void 0===o?"div":o,s=i.bsPrefix,c=i.variant,l=i.fill,f=void 0!==l&&l,h=i.justify,d=void 0!==h&&h,p=i.navbar,v=i.navbarScroll,g=i.className,m=i.activeKey,y=st(i,pi),b=mt(s,"nav"),x=!1,w=(0,k.useContext)(ni),_=(0,k.useContext)(ai);return w?(r=w.bsPrefix,x=null==p||p):_&&(a=_.cardHeaderBsPrefix),(0,rt.jsx)(ei,ut({as:u,ref:t,activeKey:m,className:lt()(g,(n={},(0,it.Z)(n,b,!x),(0,it.Z)(n,"".concat(r,"-nav"),x),(0,it.Z)(n,"".concat(r,"-nav-scroll"),x&&v),(0,it.Z)(n,"".concat(a,"-").concat(c),!!a),(0,it.Z)(n,"".concat(b,"-").concat(c),!!c),(0,it.Z)(n,"".concat(b,"-fill"),f),(0,it.Z)(n,"".concat(b,"-justified"),d),n))},y))}));vi.displayName="Nav";var gi=Object.assign(vi,{Item:ui,Link:di}),mi=["className","bsPrefix","as"],yi=k.forwardRef((function(e,t){var n=e.className,r=e.bsPrefix,a=e.as,i=void 0===a?"div":a,o=st(e,mi);return r=mt(r,"tab-content"),(0,rt.jsx)(i,ut({ref:t,className:lt()(n,r)},o))}));yi.displayName="TabContent";var bi=yi;function xi(e){return"boolean"===typeof e?e?jn:rn:e}var wi=["bsPrefix","transition"],ki=["className","as"],_i=k.forwardRef((function(e,t){var n=e.bsPrefix,r=e.transition,a=Pa(ut(ut({},st(e,wi)),{},{transition:xi(r)})),i=(0,C.Z)(a,2),o=i[0],u=o.className,s=o.as,c=void 0===s?"div":s,l=st(o,ki),f=i[1],h=f.isActive,d=f.onEnter,p=f.onEntering,v=f.onEntered,g=f.onExit,m=f.onExiting,y=f.onExited,b=f.mountOnEnter,x=f.unmountOnExit,w=f.transition,k=void 0===w?jn:w,_=mt(n,"tab-pane");return(0,rt.jsx)(Ia.Provider,{value:null,children:(0,rt.jsx)(Ra.Provider,{value:null,children:(0,rt.jsx)(k,{in:h,onEnter:d,onEntering:p,onEntered:v,onExit:g,onExiting:m,onExited:y,mountOnEnter:b,unmountOnExit:x,children:(0,rt.jsx)(c,ut(ut({},l),{},{ref:t,className:lt()(u,_,h&&"active")}))})})})}));_i.displayName="TabPane";var Si=_i,Ci=["id","onSelect","transition","mountOnEnter","unmountOnExit","variant","children","activeKey"];function Ei(e){var t;return function(e,t){var n=0;k.Children.forEach(e,(function(e){k.isValidElement(e)&&t(e,n++)}))}(e,(function(e){null==t&&(t=e.props.eventKey)})),t}function Ai(e){var t=e.props,n=t.title,r=t.eventKey,a=t.disabled,i=t.tabClassName,o=t.tabAttrs,u=t.id;return null==n?null:(0,rt.jsx)(ui,{as:"li",role:"presentation",children:(0,rt.jsx)(di,ut(ut({as:"button",type:"button",eventKey:r,disabled:a,id:u,className:i},o),{},{children:n}))})}var Ni=function(e){var t=ya(e,{activeKey:"onSelect"}),n=t.id,r=t.onSelect,a=t.transition,i=t.mountOnEnter,o=void 0!==i&&i,u=t.unmountOnExit,s=void 0!==u&&u,c=t.variant,l=void 0===c?"tabs":c,f=t.children,h=t.activeKey,d=void 0===h?Ei(f):h,p=st(t,Ci);return(0,rt.jsxs)(Wa,{id:n,activeKey:d,onSelect:r,transition:xi(a),mountOnEnter:o,unmountOnExit:s,children:[(0,rt.jsx)(gi,ut(ut({},p),{},{role:"tablist",as:"ul",variant:l,children:Dr(f,Ai)})),(0,rt.jsx)(bi,{children:Dr(f,(function(e){var t=ut({},e.props);return delete t.title,delete t.disabled,delete t.tabClassName,delete t.tabAttrs,(0,rt.jsx)(Si,ut({},t))}))})]})};Ni.displayName="Tabs";var Ti=Ni,Mi=["transition"],Di=function(e){var t=e.transition,n=st(e,Mi);return(0,rt.jsx)(Wa,ut(ut({},n),{},{transition:xi(t)}))};Di.displayName="TabContainer";var Fi=Di,Ii={eventKey:Jn().oneOfType([Jn().string,Jn().number]),title:Jn().node.isRequired,disabled:Jn().bool,tabClassName:Jn().string,tabAttrs:Jn().object},Oi=function(){throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};Oi.propTypes=Ii;var Ri=Object.assign(Oi,{Container:Fi,Content:bi,Pane:Si}),Zi=function(){var e=(0,M.Z)(Array(100).keys()),t=(0,k.useState)(""),n=(0,C.Z)(t,2),r=n[0],a=n[1];return(0,rt.jsxs)("div",{style:{marginBottom:50},children:[(0,rt.jsx)("h2",{className:"display-6",children:"Explore The Dataset!"}),(0,rt.jsxs)("div",{className:"container-sm",style:{marginTop:50,maxWidth:800},children:[(0,rt.jsxs)("figure",{className:"text-center",children:[(0,rt.jsx)("blockquote",{className:"blockquote",children:(0,rt.jsx)("p",{children:"AI brings educational technology to an inflection point. We can either increase disparities or shrink them, depending on what we do now"})}),(0,rt.jsx)("figcaption",{className:"blockquote-footer",children:"Dr. Russell Shilling"})]}),(0,rt.jsxs)("div",{style:{textAlign:"justify"},children:['The first step towards using AI for any task is to "become one with the data" [2]. Not only does a diverse training dataset help the model learn more discriminatory features that generalize better and more accurately to the diversity found in the real world [3], but it also addresses issues around racial equity and unfair bias ("algorithmic bias") [4]. Exploring the dataset--the different categories, and human or machine-generated annotations--is critical, especially when we use "off-the-shelf" models not trained by us. Detailing "A Human Rights Approach to AI", UNESCO advocates for ',(0,rt.jsx)("em",{children:"Right to Privacy and Data Protection"}),", ",(0,rt.jsx)("em",{children:"Transparency and Explainability"}),", and ",(0,rt.jsx)("em",{children:"Fairness and Non-Discrimination"}),", among others [5]. One way in which privacy can be established is by blurring identifiable facial features prior to training, although a more robust-to-attacks solution would require addressing privacy in the camera hardware itself [6].",(0,rt.jsx)("br",{}),(0,rt.jsx)("br",{}),"Below are 100 out of the 500 images (representative) from every category, taken from ImageNet [7] and Flickr-Faces-HQ [8]:"]}),(0,rt.jsx)(pa.Check,{type:"switch",id:"blur-switch",label:""===r?"Blur Faces":"Un-Blur Faces",onClick:function(e){a(""===r?"_blurred":"")},style:{textAlign:"left",fontSize:"1.3rem",color:"#751ae3",margin:"20px 0 0 0"}}),(0,rt.jsx)(Ti,{defaultActiveKey:"face",id:"dataset-tabs",className:"mb-3",style:{alignContent:"center",marginTop:30},children:[["Church","church"],[" Dog","dog"],["Face","face"],["Fish","fish"],["Parachute","parachute"]].map((function(t,n){return(0,rt.jsx)(Ri,{eventKey:t[1],title:t[0],children:(0,rt.jsx)("div",{children:e.map((function(e,n){return(0,rt.jsx)("img",{src:"images/"+t[1]+r+"/"+n+".jpeg",className:"img-fluid zoom",alt:t[0]+" image "+n,width:"50"},t[0]+"-image-"+n)}))})},"tab-"+(n+1))}))})]})]})},Bi=n(3032),zi=["bsPrefix","variant","animation","size","as","className"],Li=k.forwardRef((function(e,t){var n=e.bsPrefix,r=e.variant,a=e.animation,i=void 0===a?"border":a,o=e.size,u=e.as,s=void 0===u?"div":u,c=e.className,l=st(e,zi);n=mt(n,"spinner");var f="".concat(n,"-").concat(i);return(0,rt.jsx)(s,ut(ut({ref:t},l),{},{className:lt()(c,f,o&&"".concat(f,"-").concat(o),r&&"text-".concat(r))}))}));Li.displayName="Spinner";var Pi=Li,ji=["bsPrefix","className","as"],Ui=k.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.as,i=void 0===a?"div":a,o=st(e,ji),u=mt(n,"row"),s=yt(),c=bt(),l="".concat(u,"-cols"),f=[];return s.forEach((function(e){var t,n=o[e];delete o[e],t=null!=n&&"object"===typeof n?n.cols:n;var r=e!==c?"-".concat(e):"";null!=t&&f.push("".concat(l).concat(r,"-").concat(t))})),(0,rt.jsx)(i,ut(ut({ref:t},o),{},{className:lt().apply(void 0,[r,u].concat(f))}))}));Ui.displayName="Row";var Wi=Ui;function Vi(){return Vi=(0,Bi.Z)(A().mark((function e(t){var n,r,a,i,o,u,s,c,l,f;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=document.getElementById("inconv").getContext("2d"),r=n.getImageData(0,0,200,200),a=function(){var e=(0,Bi.Z)(A().mark((function e(t,n){var a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Math.max(0,Math.min(t,199)),n=Math.max(0,Math.min(n,199)),a=4*(200*n+t),e.abrupt("return",[r.data[a+0],r.data[a+1],r.data[a+2],r.data[a+3]]);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),i=function(){var e=(0,Bi.Z)(A().mark((function e(n,r){var i,o,u,s,c;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=[0,0,0,0],o=0;case 2:if(!(o<t.height)){e.next=18;break}u=0;case 4:if(!(u<t.width)){e.next=15;break}return s=t.weightArray[o][u],e.next=8,a(n+u-t.centerX,r+o-t.centerY);case 8:c=e.sent,i[0]+=c[0]*s,i[1]+=c[1]*s,i[2]+=c[2]*s;case 12:++u,e.next=4;break;case 15:++o,e.next=2;break;case 18:return i[3]=255,e.abrupt("return",i);case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),o=document.getElementById("outconv").getContext("2d",{willReadFrequently:!0}),u=o.getImageData(0,0,200,200),s=0;case 7:if(!(s<200)){e.next=24;break}c=0;case 9:if(!(c<200)){e.next=21;break}return e.next=12,i(c,s);case 12:l=e.sent,f=4*(200*s+c),u.data[f+0]=Math.floor(l[0]),u.data[f+1]=Math.floor(l[1]),u.data[f+2]=Math.floor(l[2]),u.data[f+3]=Math.floor(l[3]);case 18:++c,e.next=9;break;case 21:++s,e.next=7;break;case 24:o.putImageData(u,0,0),document.getElementById("spnconv").style.display="none",document.getElementById("outconv").style.display="block";case 27:case"end":return e.stop()}}),e)}))),Vi.apply(this,arguments)}var qi=(0,F.Z)((function e(t,n){(0,D.Z)(this,e),this.width=t,this.height=n,this.centerX=Math.floor(t/2),this.centerY=Math.floor(n/2),this.weightArray=[];for(var r=0;r<n;++r){this.weightArray.push([]);for(var a=0;a<t;++a)this.weightArray[r].push(0)}})),Hi=new qi(3,3);Hi.weightArray[0]=[8,0,-8],Hi.weightArray[1]=[8,0,-8],Hi.weightArray[2]=[8,0,-8];var Gi=new qi(3,3);Gi.weightArray[0]=[-2,-1,0],Gi.weightArray[1]=[-1,1,1],Gi.weightArray[2]=[0,1,2];var Xi=new qi(3,3);Xi.weightArray[0]=[8,-4,-4],Xi.weightArray[1]=[-4,8,-4],Xi.weightArray[2]=[-4,-4,8];var Yi=new qi(3,3);Yi.weightArray[0]=[-1,-1,-1],Yi.weightArray[1]=[-1,8,-1],Yi.weightArray[2]=[-1,-1,-1];var Ki=function(){var e=(0,k.useState)(void 0),t=(0,C.Z)(e,2),n=t[0],r=t[1],a=(0,k.useState)({a:0,b:0,c:0,d:0,e:0,f:0,g:0,h:0,i:0}),i=(0,C.Z)(a,2),o=i[0],u=i[1],s=(0,k.useState)(void 0),c=(0,C.Z)(s,2),l=c[0],f=c[1],h=function(){var e=(0,Bi.Z)(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=new Image).src="test.jpg",n.onload=function(){t.drawImage(n,0,0)};case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,k.useEffect)((function(){var e=document.getElementById("inconv").getContext("2d",{willReadFrequently:!0});h(e)}),[]);var d=function(e){r(e)},p=function(e){var t=e.target,n=t.name,r=t.value;u(ut(ut({},o),{},(0,it.Z)({},n,r)))};(0,k.useEffect)((function(){var e;n&&(e="filter1"===n?Hi:"filter2"===n?Gi:"filter3"===n?Xi:"filter4"===n?Yi:l,document.getElementById("spnconv").style.display="inline-block",document.getElementById("outconv").style.display="none",setTimeout((function(){return function(e){return Vi.apply(this,arguments)}(e)}),1e3))}),[n,l]);var v=function(e,t){var n=e.weightArray;return(0,rt.jsx)("table",{onClick:function(){return d(t)},children:(0,rt.jsxs)("tbody",{children:[(0,rt.jsxs)("tr",{children:[(0,rt.jsx)("td",{children:n[0][0]}),(0,rt.jsx)("td",{children:n[0][1]}),(0,rt.jsx)("td",{children:n[0][2]})]}),(0,rt.jsxs)("tr",{children:[(0,rt.jsx)("td",{children:n[1][0]}),(0,rt.jsx)("td",{children:n[1][1]}),(0,rt.jsx)("td",{children:n[1][2]})]}),(0,rt.jsxs)("tr",{children:[(0,rt.jsx)("td",{children:n[2][0]}),(0,rt.jsx)("td",{children:n[2][1]}),(0,rt.jsx)("td",{children:n[2][2]})]})]})})};return(0,rt.jsxs)("div",{children:[(0,rt.jsxs)("div",{style:{textAlign:"justify",marginBottom:20},children:["A convolution between an image and a filter is defined as the sliding of the filter over the image from left to right and top to bottom, with elementwise multiplication of the part of the image contained in the convolution window with the filter and summing up the resulting values to give a single scalar value [1].",(0,rt.jsx)("br",{}),(0,rt.jsx)("br",{}),"Click on the below ",(0,rt.jsx)("tt",{children:"3 x 3"})," filters to see what happens when they are convolved over the image:"]}),(0,rt.jsx)(kt,{variant:"secondary",onClick:function(){return d("filter1")},children:v(Hi,"filter1")}),(0,rt.jsx)(kt,{variant:"secondary",onClick:function(){return d("filter2")},children:v(Gi,"filter2")}),(0,rt.jsx)(kt,{variant:"secondary",onClick:function(){return d("filter3")},children:v(Xi,"filter3")}),(0,rt.jsx)(kt,{variant:"secondary",onClick:function(){return d("filter4")},children:v(Yi,"filter4")}),(0,rt.jsx)("br",{}),(0,rt.jsx)("br",{}),(0,rt.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexWrap:"wrap"},children:[(0,rt.jsx)("canvas",{id:"inconv",height:200,width:200,style:{margin:"0 20px 30px 20px"}}),(0,rt.jsx)("canvas",{id:"outconv",height:200,width:200,style:{display:"none",margin:"0 20px 30px 20px"}}),(0,rt.jsx)(Pi,{id:"spnconv",style:{display:"none"}}),(0,rt.jsxs)("div",{style:{textAlign:"justify",marginBottom:20},children:["Now here's a challenge... the first filter above represents a ",(0,rt.jsx)("em",{children:"vertical"})," edge detector (which can be verified from the vertical lines extracted from the image). Try to design a horizontal edge detector and check if the convolved image (shown above) matches your expectations!"]}),(0,rt.jsxs)(pa,{children:[(0,rt.jsxs)(Wi,{children:[(0,rt.jsx)(Gr,{children:(0,rt.jsx)(pa.Control,{type:"number",name:"a",value:o.a,onChange:p,min:-200,max:200})}),(0,rt.jsx)(Gr,{children:(0,rt.jsx)(pa.Control,{type:"number",name:"b",value:o.b,onChange:p,min:-200,max:200})}),(0,rt.jsx)(Gr,{children:(0,rt.jsx)(pa.Control,{type:"number",name:"c",value:o.c,onChange:p,min:-200,max:200})})]}),(0,rt.jsxs)(Wi,{children:[(0,rt.jsx)(Gr,{children:(0,rt.jsx)(pa.Control,{type:"number",name:"d",value:o.d,onChange:p,min:-200,max:200})}),(0,rt.jsx)(Gr,{children:(0,rt.jsx)(pa.Control,{type:"number",name:"e",value:o.e,onChange:p,min:-200,max:200})}),(0,rt.jsx)(Gr,{children:(0,rt.jsx)(pa.Control,{type:"number",name:"f",value:o.f,onChange:p,min:-200,max:200})})]}),(0,rt.jsxs)(Wi,{children:[(0,rt.jsx)(Gr,{children:(0,rt.jsx)(pa.Control,{type:"number",name:"g",value:o.g,onChange:p,min:-200,max:200})}),(0,rt.jsx)(Gr,{children:(0,rt.jsx)(pa.Control,{type:"number",name:"h",value:o.h,onChange:p,min:-200,max:200})}),(0,rt.jsx)(Gr,{children:(0,rt.jsx)(pa.Control,{type:"number",name:"i",value:o.i,onChange:p,min:-200,max:200})})]}),(0,rt.jsx)(kt,{variant:"primary",type:"submit",style:{marginTop:20},onClick:function(e){e.preventDefault();var t=new qi(3,3);t.weightArray[0]=[o.a,o.b,o.c],t.weightArray[1]=[o.d,o.e,o.f],t.weightArray[2]=[o.g,o.h,o.i],f(t),r("custom")},children:"Convolve!"})]})]})]})};function $i(){return $i=(0,Bi.Z)(A().mark((function e(t){var n,r,a,i,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=document.getElementById("inrelu").getContext("2d"),r=n.getImageData(0,0,200,200),a=document.getElementById("outrelu").getContext("2d",{willReadFrequently:!0}),i=a.getImageData(0,0,200,200),o=0;o<16e4;++o)r.data[o]<t?i.data[o]=t:i.data[o]=r.data[o];a.putImageData(i,0,0),document.getElementById("spnrelu").style.display="none",document.getElementById("outrelu").style.display="block";case 8:case"end":return e.stop()}}),e)}))),$i.apply(this,arguments)}var Qi=function(){var e=(0,k.useState)(0),t=(0,C.Z)(e,2),n=t[0],r=t[1],a=function(){var e=(0,Bi.Z)(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=new Image).src="test.jpg",n.onload=function(){t.drawImage(n,0,0)};case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,k.useEffect)((function(){var e=document.getElementById("inrelu").getContext("2d",{willReadFrequently:!0});a(e)}),[]);return(0,rt.jsxs)("div",{children:[(0,rt.jsxs)("div",{style:{textAlign:"justify"},children:["Rectified Linear Unit (ReLU) is a nonlinear activation function that allows neural networks to model nonlinear relationships between variables in the dataset. Rectifiers are also biologically-plausible because they introduce sparsity in activations, similar to sparse neuronal coding observed in the brain [10].",(0,rt.jsx)("br",{}),(0,rt.jsx)("br",{}),"For any input ",(0,rt.jsx)("tt",{children:"x"}),", ",(0,rt.jsx)("tt",{children:"ReLU(x) = max(0, x)"}),(0,rt.jsx)("br",{}),(0,rt.jsx)("br",{}),"To see this in action, choose a threshold ",(0,rt.jsx)("tt",{children:"T"})," between 0 and 255. All pixels lesser than ",(0,rt.jsx)("tt",{children:"T"})," will be clipped to equal ",(0,rt.jsx)("tt",{children:"T"}),", effectively preventing the model from learning anything useful from them. This is implemented through the expression: ",(0,rt.jsx)("tt",{children:"pixel = ReLU(pixel - T) + T"}),"."]}),(0,rt.jsxs)(pa,{style:{display:"flex",justifyContent:"center"},children:[(0,rt.jsx)(pa.Control,{type:"number",name:"N",value:n,onChange:function(e){r(e.target.value)},min:0,max:255,style:{width:100,margin:20}}),(0,rt.jsx)(kt,{variant:"primary",type:"submit",onClick:function(e){e.preventDefault(),document.getElementById("spnrelu").style.display="inline-block",document.getElementById("outrelu").style.display="none",setTimeout((function(){return function(e){return $i.apply(this,arguments)}(n)}),1e3)},style:{margin:20},children:"ReLU!"})]}),(0,rt.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexWrap:"wrap"},children:[(0,rt.jsx)("canvas",{id:"inrelu",height:200,width:200,style:{margin:"0 20px 30px 20px"}}),(0,rt.jsx)("canvas",{id:"outrelu",height:200,width:200,style:{display:"none",margin:"0 20px 30px 20px"}}),(0,rt.jsx)(Pi,{id:"spnrelu",style:{display:"none"}})]})]})},Ji=["bsPrefix","size","vertical","className","role","as"],eo=k.forwardRef((function(e,t){var n=e.bsPrefix,r=e.size,a=e.vertical,i=void 0!==a&&a,o=e.className,u=e.role,s=void 0===u?"group":u,c=e.as,l=void 0===c?"div":c,f=st(e,Ji),h=mt(n,"btn-group"),d=h;return i&&(d="".concat(h,"-vertical")),(0,rt.jsx)(l,ut(ut({},f),{},{ref:t,role:s,className:lt()(o,d,r&&"".concat(h,"-").concat(r))}))}));eo.displayName="ButtonGroup";var to=eo;function no(){return no=(0,Bi.Z)(A().mark((function e(t){var n,r,a,i,o,u,s,c,l,f,h;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=document.getElementById("inpool").getContext("2d"),r=n.getImageData(0,0,200,200),a=function(){var e=(0,Bi.Z)(A().mark((function e(t,n,r,a,i){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("max"!==t){e.next=4;break}return e.abrupt("return",Math.max(n,r,a,i));case 4:if("min"!==t){e.next=8;break}return e.abrupt("return",Math.min(n,r,a,i));case 8:return e.abrupt("return",(n+r+a+i)/4);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,a,i){return e.apply(this,arguments)}}(),i=document.getElementById("outpool").getContext("2d",{willReadFrequently:!0}),o=i.getImageData(0,0,100,100),u=0;case 6:if(!(u<200)){e.next=25;break}s=0;case 8:if(!(s<200)){e.next=22;break}return l=2*(100*u+s),f=(c=4*(200*u+s))+800,e.next=14,a(t,r.data[c+1],r.data[c+5],r.data[f+1],r.data[f+5]);case 14:h=e.sent,o.data[l+0]=Math.floor(h),o.data[l+1]=Math.floor(h),o.data[l+2]=Math.floor(h),o.data[l+3]=255;case 19:s+=2,e.next=8;break;case 22:u+=2,e.next=6;break;case 25:i.putImageData(o,0,0),document.getElementById("spnpool").style.display="none",document.getElementById("outpool").style.display="block";case 28:case"end":return e.stop()}}),e)}))),no.apply(this,arguments)}var ro=function(){(0,k.useEffect)((function(){!function(){for(var e=document.getElementById("inpool").getContext("2d",{willReadFrequently:!0}),t=e.getImageData(0,0,200,200),n=0,r=0;r<16e4;r+=4)t.data[r]=n,t.data[r+1]=n,t.data[r+2]=n,t.data[r+3]=255,n=r%800===0?0===n?0:255:0===n?255:0;e.putImageData(t,0,0)}()}),[]);var e=function(e){document.getElementById("spnpool").style.display="inline-block",document.getElementById("outpool").style.display="none",setTimeout((function(){return function(e){return no.apply(this,arguments)}(e)}),1e3)};return(0,rt.jsxs)("div",{children:[(0,rt.jsxs)("div",{style:{textAlign:"justify",marginBottom:20},children:["Pooling is a way in which information from an input is gradually aggregated so that convolutional layers downstream can learn a more global representation. It is equivalent to spatially downsampling the input, and can be thought of as allowing the model to learn low-level features such as edges in the earlier layers, and more high-level features like eyes, faces, hands, etc. in the later layers [1].",(0,rt.jsx)("br",{}),(0,rt.jsx)("br",{}),"Max pooling, Min Pooling, and Average Pooling compute the ",(0,rt.jsx)("tt",{children:"maximum"}),", ",(0,rt.jsx)("tt",{children:"minimum"}),", and ",(0,rt.jsx)("tt",{children:"average"})," over some pre-defined window as a way of aggregation. See how these work below! (Windows are ",(0,rt.jsx)("tt",{children:"2 x 2"})," in size). The image below is checkered; it has an alternating black (0) and white (255) pixel pattern. Why do the following results make sense? Hint: Think about what value you get after applying each of the below pooling operations to the ",(0,rt.jsx)("tt",{children:"2 x 2"})," square window [[255, 0], [0, 255]]."]}),(0,rt.jsxs)(to,{children:[(0,rt.jsx)(kt,{variant:"secondary",onClick:function(){return e("max")},children:"Max Pooling"}),(0,rt.jsx)(kt,{variant:"secondary",onClick:function(){return e("min")},children:"Min Pooling"}),(0,rt.jsx)(kt,{variant:"secondary",onClick:function(){return e("avg")},children:"Average Pooling"})]}),(0,rt.jsx)("br",{}),(0,rt.jsx)("br",{}),(0,rt.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexWrap:"wrap"},children:[(0,rt.jsx)("canvas",{id:"inpool",height:200,width:200,style:{margin:"0 20px 30px 20px"}}),(0,rt.jsx)("canvas",{id:"outpool",height:100,width:100,style:{display:"none",margin:"0 20px 30px 20px",padding:"auto"}}),(0,rt.jsx)(Pi,{id:"spnpool",style:{display:"none"}})]})]})},ao=function(){return(0,rt.jsxs)("div",{style:{marginBottom:50},children:[(0,rt.jsx)("h2",{className:"display-6",children:"Inside the Model!"}),(0,rt.jsxs)("div",{className:"container-sm",style:{marginTop:50,maxWidth:800},children:[(0,rt.jsxs)("div",{style:{textAlign:"justify"},children:['AI Literacy necessitates understanding of how models work "under-the-hood" so we can critically examine and address areas of issues and needs for improvement, and question the model\'s interaction with people, society, and the environment. The pipeline for image classification used in this module is:',(0,rt.jsx)("br",{}),(0,rt.jsx)("br",{}),(0,rt.jsx)("img",{src:"arch.png",alt:"model architecture",className:"img-fluid",width:"100%"}),(0,rt.jsx)("br",{}),(0,rt.jsx)("br",{}),"Here, BlazeFace is a lightweight, sub-millisecond face detector designed specifically for mobile inference [9]. We will be using a pre-trained MobileNet V3 backbone [11] and train a Classifier Head for image classification.",(0,rt.jsx)("br",{}),(0,rt.jsx)("br",{}),"Go through the following tabs to learn about convolutions, non-linearities, and pooling that are used by these models:",(0,rt.jsx)("br",{})]}),(0,rt.jsxs)(Ti,{defaultActiveKey:"convolution",id:"dataset-tabs",className:"mb-3",style:{alignContent:"center",marginTop:20},children:[(0,rt.jsx)(Ri,{eventKey:"convolution",title:"Convolution",children:(0,rt.jsx)(Ki,{})},"tab-0"),(0,rt.jsx)(Ri,{eventKey:"relu",title:"ReLU",children:(0,rt.jsx)(Qi,{})},"tab-1"),(0,rt.jsx)(Ri,{eventKey:"maxpool",title:"Pooling",children:(0,rt.jsx)(ro,{})},"tab-2")]})]})]})},io=n(3613),oo=n(2145),uo=n(9118),so=n(651),co=n(4031),lo={kernelName:oo.SYM,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return(0,so.d)(e,(0,co.N)((0,uo.p)(n,"float32"),-1))}}}},fo=n(5750),ho=n(4362),po=n(7067),vo=n(6902),go=n(7391),mo=n(4774),yo={kernelName:oo.VGw,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){var t=(0,go.h)((0,uo.p)(n,"float32")),r=(0,vo._)((0,mo.l)((0,po.i)(1),t));return(0,ho.W)((0,fo.h)(e,r))}}}},bo={kernelName:oo.SpW,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){var t=(0,vo._)((0,mo.l)((0,go.h)((0,uo.p)(n,"float32")),1));return(0,fo.h)(e,t)}}}},xo=n(5774),wo=n(5561),ko=n(227),_o={kernelName:oo.mm_,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,C.Z)(t,2),r=n[0],a=n[1],i=xo.assertAndGetBroadcastShape(r.shape,a.shape);return{a:function(){var t=e,n=xo.getReductionAxes(r.shape,i);return n.length>0&&(t=(0,ko.S)(t,n)),(0,wo.X)(t,r.shape)},b:function(){var t=e,n=xo.getReductionAxes(a.shape,i);return n.length>0&&(t=(0,ko.S)(t,n)),(0,wo.X)(t,a.shape)}}}},So={kernelName:oo.Xze,saveAllInputs:!0,gradFunc:function(e,t){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}},Co=n(7293),Eo={kernelName:oo.sJF,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return(0,Co.P)(n)}}}},Ao={kernelName:oo.aJk,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return(0,Co.P)(n)}}}},No={kernelName:oo.M2y,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return(0,fo.h)(e,(0,vo._)((0,mo.l)((0,po.i)(1),(0,go.h)((0,uo.p)(n,"float32")))))}}}},To=n(3312),Mo={kernelName:oo.qw7,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){var t=(0,vo._)((0,To.I)((0,po.i)(1),(0,go.h)((0,uo.p)(n,"float32"))));return(0,fo.h)(e,t)}}}},Do={kernelName:oo.QCc,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,C.Z)(t,2),r=n[0],a=n[1],i=(0,xo.assertAndGetBroadcastShape)(r.shape,a.shape);return{a:function(){var t=(0,To.I)((0,go.h)(r),(0,go.h)(a)),n=(0,so.d)(e,(0,fo.h)(a,t)),o=(0,xo.getReductionAxes)(r.shape,i);return o.length>0&&(n=(0,ko.S)(n,o)),(0,wo.X)(n,r.shape)},b:function(){var t=(0,To.I)((0,go.h)(r),(0,go.h)(a)),n=(0,ho.W)((0,so.d)(e,(0,fo.h)(r,t))),o=(0,xo.getReductionAxes)(a.shape,i);return o.length>0&&(n=(0,ko.S)(n,o)),(0,wo.X)(n,a.shape)}}}},Fo={kernelName:oo.jMg,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return(0,fo.h)(e,(0,To.I)((0,go.h)((0,uo.p)(n,"float32")),1))}}}},Io={kernelName:oo.Oyi,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return(0,fo.h)(e,(0,mo.l)((0,po.i)(1),(0,go.h)((0,uo.p)(n,"float32"))))}}}},Oo=n(318),Ro=n(8354),Zo=n(6147),Bo=n(9151),zo=n(8640);var Lo=(0,zo.op)({avgPool3dGrad_:function(e,t,n,r,a,i){var o=(0,Ro._1)(e,"dy","avgPool3dGrad"),u=(0,Ro._1)(t,"input","avgPool3dGrad"),s=o,c=u,l=!1;4===u.rank&&(l=!0,s=(0,wo.X)(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),c=(0,wo.X)(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),Zo.hu(5===s.rank,(function(){return"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(s.rank,".")})),Zo.hu(5===c.rank,(function(){return"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(c.rank,".")})),(0,Bo.m)("avgPool3dGrad",a,i);var f={dy:s,input:c},h={filterSize:n,strides:r,pad:a,dimRoundingMode:i},d=Oo.BV.runKernel(oo.IMb,f,h);return l?(0,wo.X)(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}}),Po={kernelName:oo._k9,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,C.Z)(t,1)[0],a=n.filterSize,i=n.strides,o=n.pad,u=n.dimRoundingMode;return{x:function(){return Lo(e,r,a,i,o,u)}}}};var jo=(0,zo.op)({avgPoolGrad_:function(e,t,n,r,a){var i=(0,Ro._1)(e,"dy","avgPoolGrad"),o=(0,Ro._1)(t,"input","avgPoolGrad");Zo.hu(o.rank===i.rank,(function(){return"Rank of input (".concat(o.rank,") does not match rank of dy (").concat(i.rank,")")}));var u=o,s=i,c=!1;3===o.rank&&(c=!0,u=(0,wo.X)(o,[1,o.shape[0],o.shape[1],o.shape[2]]),s=(0,wo.X)(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Zo.hu(4===s.rank,(function(){return"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(s.rank,".")})),Zo.hu(4===u.rank,(function(){return"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(u.rank,".")}));var l={dy:s,input:u},f={filterSize:n,strides:r,pad:a},h=Oo.BV.runKernel(oo.ROF,l,f);return c?(0,wo.X)(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),Uo={kernelName:oo.JhU,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,C.Z)(t,1)[0],a=n.filterSize,i=n.strides,o=n.pad;return{x:function(){return jo(e,r,a,i,o)}}}},Wo=n(7221),Vo={kernelName:oo.XLW,inputsToSave:["a","b"],gradFunc:function(e,t,n){var r=(0,C.Z)(t,2),a=r[0],i=r[1],o=n.transposeA,u=n.transposeB;return o||u?!o&&u?{a:function(){return(0,Wo.O)(e,i,!1,!1)},b:function(){return(0,Wo.O)(e,a,!0,!1)}}:o&&!u?{a:function(){return(0,Wo.O)(i,e,!1,!0)},b:function(){return(0,Wo.O)(a,e,!1,!1)}}:{a:function(){return(0,Wo.O)(i,e,!0,!0)},b:function(){return(0,Wo.O)(e,a,!0,!0)}}:{a:function(){return(0,Wo.O)(e,i,!1,!0)},b:function(){return(0,Wo.O)(a,e,!0,!1)}}}},qo=n(5696),Ho={kernelName:oo.zws,gradFunc:function(e,t,n){var r=n.blockShape,a=n.crops;return{x:function(){return(0,qo.f)(e,r,a)}}}},Go={kernelName:oo.Ly9,gradFunc:function(e,t,n){for(var r=n,a=r.inputShape,i=r.shape,o=Array.from(i),u=a.length-1;u>=0;u--)if(a[u]===i[u])o[u]=1;else if(1!==a[u])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(i,"]."));for(var s=[],c=0;c<o.length;c++)o[c]>1&&s.push(c);return{x:function(){return(0,ko.S)(e,s,!0)}}}},Xo={kernelName:oo.RFZ,gradFunc:function(e){return{x:function(){return e.clone()}}}},Yo={kernelName:oo.gJX,gradFunc:function(e){return{x:function(){return(0,Co.P)(e)}}}},Ko=n(8327),$o=n(2642),Qo=n(2177),Jo=n(329),eu={kernelName:oo.xnO,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,C.Z)(t,1)[0],a=n.clipValueMin,i=n.clipValueMax;return{x:function(){return(0,Jo.a)((0,Qo.H)((0,Ko.b)(r,a),(0,$o.z)(r,i)),e,(0,Co.P)(e))}}}},tu={kernelName:oo.yj2,inputsToSave:["x"],gradFunc:lo.gradFunc},nu=n(2588),ru={kernelName:oo.Eh3,saveAllInputs:!0,gradFunc:function(e,t,n){var r=t.map((function(e){return e.shape})),a=n.axis,i=(0,Zo.EC)(a,t[0].shape)[0],o=r.map((function(e){return e[i]}));return(0,nu.V)(e,o,i).map((function(e){return function(){return e}}))}},au=n(8744),iu=n(1045),ou={kernelName:oo.mhS,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=(0,C.Z)(t,2),a=r[0],i=r[1],o=n.dilations,u=n.strides,s=n.pad,c=n.dataFormat;return Zo.hu(Bo.I0(o),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(o,"'")})),{x:function(){return(0,iu._)(a.shape,e,i,u,s,c)},filter:function(){return(0,au.p)(a,e,i.shape,u,s,c)}}}},uu=n(3457),su={kernelName:oo.wm,inputsToSave:["dy","filter"],gradFunc:function(e,t,n){var r=(0,C.Z)(t,2),a=r[0],i=r[1],o=n.strides,u=n.pad,s=n.dataFormat,c=n.dimRoundingMode;return{dy:function(){return(0,uu.T)(e,i,o,u,s,1,c)},filter:function(){return(0,au.p)(e,a,i.shape,o,u,s,c)}}}};var cu=(0,zo.op)({conv3DBackpropFilter_:function(e,t,n,r,a){var i=e;4===e.rank&&(i=(0,wo.X)(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));var o=t;4===o.rank&&(o=(0,wo.X)(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),Zo.hu(5===i.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(i.shape,".")})),Zo.hu(5===o.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(o.shape,".")})),Zo.hu(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,".")})),Zo.hu(i.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input ".concat(i.shape[4],") must ")+"match input depth in filter (".concat(n[3],".")})),Zo.hu(o.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy (".concat(o.shape[4],") must ")+"match output depth for filter (".concat(n[4],").")}));var u={x:i,dy:o},s={strides:r,pad:a,filterShape:n};return Oo.BV.runKernel(oo.o2y,u,s)}}),lu=n(1873),fu={kernelName:oo.x12,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad;Zo.hu((0,Bo.I0)(r),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(r,"'")}));var o=(0,C.Z)(t,2),u=o[0],s=o[1];return{x:function(){return(0,lu._)(u.shape,e,s,a,i)},filter:function(){return cu(u,e,s.shape,a,i)}}}},hu=n(7254),du={kernelName:oo.mc4,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return(0,so.d)((0,ho.W)((0,hu.O)((0,uo.p)(n,"float32"))),e)}}}},pu=n(7657),vu={kernelName:oo.TR1,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return(0,so.d)((0,pu.R)((0,uo.p)(n,"float32")),e)}}}},gu=n(8473),mu=n(8862),yu=n(1240),bu={kernelName:oo.iHb,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,C.Z)(t,1)[0],a=n.axis,i=n.exclusive,o=n.reverse;return{x:function(){var t=(0,gu.Q3)([a],r.rank),n=(0,mu.z)(e,a,i,!o);return null!=t&&(n=(0,yu.p)(n,t)),n}}}},xu=n(288),wu=n(6939),ku={kernelName:oo.cie,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad,o=n.dimRoundingMode,u=null==r?[1,1]:r;Zo.hu(Bo.I0(u),(function(){return"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(u,"'")}));var s=(0,C.Z)(t,2),c=s[0],l=s[1];return Zo.hu(4===c.rank,(function(){return"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(c.rank,".")})),Zo.hu(4===l.rank,(function(){return"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(l.rank,".")})),Zo.hu(c.shape[3]===l.shape[2],(function(){return"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(c.shape[3],") must match the inChannels dimension ")+"in filter ".concat(l.shape[2],".")})),Zo.hu(Bo.jT(a,u),(function(){return"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(a," and dilations ")+"'".concat(u,"'.")})),Bo.m("depthwiseConv2d",i,o),{x:function(){return(0,wu.v)(c.shape,e,l,a,i,u,o)},filter:function(){return(0,xu.z)(c,e,l.shape,a,i,u,o)}}}},_u={kernelName:oo.p4S,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=(0,C.Z)(t,2),a=r[0],i=r[1],o={x:a,filter:i,dy:e},u={x:a,filter:i,dy:e};return{x:function(){return Oo.BV.runKernel(oo.ekb,o,n)},filter:function(){return Oo.BV.runKernel(oo.Vn9,u,n)}}}},Su={kernelName:oo.SX0,outputsToSave:[!0],gradFunc:function(e,t){var n={dy:e,y:(0,C.Z)(t,1)[0]};return{x:function(){return Oo.BV.runKernel(oo.HEU,n)}}}},Cu=n(411),Eu={kernelName:oo.Omj,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0],r=(0,so.d)((0,Cu.Q)((0,ho.W)((0,go.h)(n))),2/Math.sqrt(Math.PI));return{x:function(){return(0,so.d)(e,r)}}}},Au={kernelName:oo.NEP,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return(0,so.d)(e,n)}}}},Nu={kernelName:oo.YFo,inputsToSave:["input"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{input:function(){return(0,wo.X)(e,n.shape)}}}},Tu={kernelName:oo.Y0y,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return(0,so.d)(e,(0,Cu.Q)(n))}}}},Mu={kernelName:oo.OR,gradFunc:function(e){return{x:function(){return(0,Co.P)(e)}}}},Du={kernelName:oo.jeX,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,C.Z)(t,2),r=n[0],a=n[1],i=(0,xo.assertAndGetBroadcastShape)(r.shape,a.shape);return{a:function(){var t=(0,fo.h)(e,(0,uo.p)(a,"float32")),n=(0,xo.getReductionAxes)(r.shape,i);return n.length>0?(0,wo.X)((0,ko.S)(t,n),r.shape):t},b:function(){var t=(0,so.d)(e,(0,uo.p)(r,"float32")),n=(0,xo.getReductionAxes)(a.shape,i);n.length>0&&(t=(0,wo.X)((0,ko.S)(t,n),a.shape));var o=(0,go.h)(a);return(0,ho.W)((0,fo.h)(t,(0,uo.p)(o,"float32")))}}}},Fu=n(5115),Iu=n(2343),Ou={kernelName:oo.sHE,inputsToSave:["x","mean","variance","scale"],gradFunc:function(e,t,n){var r=n.varianceEpsilon,a=(0,C.Z)(t,4),i=a[0],o=a[1],u=a[2],s=a[3],c=null==s?(0,po.i)(1):s,l=(0,xo.getReductionAxes)(o.shape,i.shape),f=[];if(1===o.rank){for(var h=0;h<i.shape.length-1;++h)f.push(i.shape[h]);f.push(1)}var d=(0,mo.l)(i,o),p=(0,so.d)(e,c),v=(0,Fu.b)((0,To.I)(u,(0,po.i)(r))),g=(0,so.d)((0,so.d)((0,so.d)(v,v),v),(0,po.i)(-.5));return{x:function(){return 1===o.rank?(0,wo.X)((0,so.d)((0,so.d)(e,(0,Iu.G)((0,wo.X)(v,[1,1,1,o.shape[0]]),f)),c),i.shape):(0,wo.X)((0,so.d)((0,so.d)(e,v),c),i.shape)},mean:function(){var e=(0,so.d)((0,so.d)(v,(0,po.i)(-1)),p);return 1===o.rank&&(e=(0,ko.S)(e,l)),(0,wo.X)(e,o.shape)},variance:function(){var e=(0,so.d)((0,so.d)(g,d),p);return 1===o.rank&&(e=(0,ko.S)(e,l)),(0,wo.X)(e,o.shape)},scale:function(){var t=(0,so.d)(d,v),n=(0,so.d)(e,t);return 1===o.rank&&(n=(0,ko.S)(n,l)),(0,wo.X)(n,o.shape)},offset:function(){var t=e;return 1===o.rank&&(t=(0,ko.S)(t,l)),(0,wo.X)(t,o.shape)}}}},Ru=n(8306),Zu=n(6918),Bu={kernelName:oo.qi_,inputsToSave:["x","indices"],gradFunc:function(e,t,n){var r=(0,C.Z)(t,2),a=r[0],i=r[1],o=n.axis,u=n.batchDims,s=(0,Zo.EC)(o,a.shape)[0],c=function(e,t,n){return function(){var r=e.shape,a=t.size,i=r.slice(0,s),u=i.length,c=r.slice(o,r.length).slice(1),l=c.length,f=zu(0,u),h=zu(u+1,u+1+l),d=Lu([i,[a],c]),p=(0,wo.X)(n,d),v=(0,wo.X)(t,[a]),g=Lu([[u],f,h]),m=(0,yu.p)(p,g),y=(0,Zu.p)(m,v,e.shape[s]),b=(0,gu.LJ)(g);return y=(0,yu.p)(y,b)}};if(1===u){var l=a.shape[0],f=a.split(l,0);return{x:function(){var t=(0,Ru.k)(f.map((function(t,n){return c(t,i.slice(n,1),e.slice(n,1))()})));return t.reshape(a.shape)},indices:function(){return i}}}return{x:c(a,i,e),indices:function(){return i}}}};function zu(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function Lu(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var Pu={kernelName:oo.Acj,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,C.Z)(t,2),r=n[0],a=n[1];return{a:function(){return(0,Co.P)(r)},b:function(){return(0,Co.P)(a)}}}},ju={kernelName:oo.iJz,gradFunc:function(e){return{x:function(){return(0,uo.p)(e,"float32")}}}},Uu={kernelName:oo.avt,gradFunc:function(e){return{x:function(){return(0,Co.P)(e)}}}},Wu={kernelName:oo.iWB,gradFunc:function(e){return{x:function(){return(0,Co.P)(e)}}}},Vu={kernelName:oo.r7n,gradFunc:function(e){return{x:function(){return(0,Co.P)(e)}}}},qu=n(5014),Hu={kernelName:oo.J$2,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,C.Z)(t,1)[0],a=n.alpha,i=(0,qu.p)(r,0);return{x:function(){return(0,Jo.a)(i,e,(0,so.d)(e,a))}}}},Gu={kernelName:oo.kU,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return(0,fo.h)(e,(0,To.I)(n,1))}}}},Xu={kernelName:oo.ZbH,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return(0,fo.h)(e,(0,uo.p)(n,"float32"))}}}},Yu={kernelName:oo.qCd,inputsToSave:[],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,C.Z)(t,1)[0],a=n.axis;return{logits:function(){var t=(0,Cu.Q)(r);return(0,mo.l)(e,(0,so.d)((0,ko.S)(e,a,!0),t))}}}};var Ku=(0,zo.op)({localResponseNormalizationBackprop_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5,u={x:e,y:t,dy:n},s={depthRadius:r,bias:a,alpha:i,beta:o};return Oo.BV.runKernel(oo.Hhh,u,s)}}),$u={kernelName:oo.eZ0,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,C.Z)(t,2),a=r[0],i=r[1],o=n.depthRadius,u=n.bias,s=n.alpha,c=n.beta;return{x:function(){return Ku(a,i,e,o,u,s,c)}}}},Qu=n(3254);function Ju(e,t,n,r){return t.rank<n.rank&&(t=(0,wo.X)(t,gu.rv(t.shape,r))),e.rank<n.rank&&(e=(0,wo.X)(e,gu.rv(e.shape,r))),{x:function(){return(0,so.d)(e,(0,uo.p)((0,Qu.D)(n,t),e.dtype))}}}var es={kernelName:oo.YoZ,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.reductionIndices,a=t[0],i=Ju(e,t[1],a,Zo.EC(r,a.shape));return{x:function(){return i.x()}}}},ts=n(4920),ns={kernelName:oo.BMI,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,C.Z)(t,2),r=n[0],a=n[1];return{a:function(){return(0,so.d)(e,(0,uo.p)((0,Ko.b)(r,a),"float32"))},b:function(){return(0,so.d)(e,(0,uo.p)((0,ts.d)(r,a),"float32"))}}}};var rs=(0,zo.op)({maxPool3dGrad_:function(e,t,n,r,a,i,o){var u=(0,Ro._1)(e,"dy","maxPool3dGrad"),s=(0,Ro._1)(t,"input","maxPool3dGrad"),c=(0,Ro._1)(n,"output","maxPool3dGrad"),l=u,f=s,h=c,d=!1;4===s.rank&&(d=!0,l=(0,wo.X)(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),f=(0,wo.X)(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),h=(0,wo.X)(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),Zo.hu(5===l.rank,(function(){return"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(l.rank,".")})),Zo.hu(5===f.rank,(function(){return"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(f.rank,".")})),Zo.hu(5===h.rank,(function(){return"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(h.rank,".")})),(0,Bo.m)("maxPool3dGrad",i,o);var p={dy:l,input:f,output:h},v={filterSize:r,strides:a,pad:i,dimRoundingMode:o},g=Oo.BV.runKernel(oo.OU7,p,v);return d?(0,wo.X)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}}),as={kernelName:oo.OAf,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,C.Z)(t,2),a=r[0],i=r[1],o=n.filterSize,u=n.strides,s=n.pad,c=n.dimRoundingMode;return{x:function(){return rs(e,a,i,o,u,s,c)}}}};var is=(0,zo.op)({maxPoolGrad_:function(e,t,n,r,a,i,o){var u=(0,Ro._1)(e,"dy","maxPoolGrad"),s=(0,Ro._1)(t,"input","maxPoolGrad"),c=(0,Ro._1)(n,"output","maxPoolGrad");Zo.hu(s.rank===u.rank,(function(){return"Rank of input (".concat(s.rank,") does not match rank of dy ")+"(".concat(u.rank,")")})),Zo.hu(4===u.rank,(function(){return"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(u.rank,".")})),Zo.hu(4===s.rank,(function(){return"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(s.rank,".")})),Bo.m("maxPoolGrad",i,o);var l={dy:u,input:s,output:c},f={filterSize:r,strides:a,pad:i,dimRoundingMode:o};return Oo.BV.runKernel(oo.OV7,l,f)}}),os={kernelName:oo.mTV,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,C.Z)(t,2),a=r[0],i=r[1],o=n.filterSize,u=n.strides,s=n.pad;return{x:function(){return is(e,a,i,o,u,s)}}}},us=n(6100),ss={kernelName:oo.q2K,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,C.Z)(t,1)[0],a=n.axis,i=Zo.EC(a,r.shape),o=(0,gu.kz)(r.shape,i)[1],u=Zo.NA(o);return{x:function(){var t=r.shape.slice();i.forEach((function(e){t[e]=1}));var n=(0,wo.X)(e,t);return(0,fo.h)((0,so.d)(n,(0,us.i)(r.shape,"float32")),u)}}}},cs={kernelName:oo.c17,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.axis,a=(0,C.Z)(t,2),i=a[0],o=Ju(e,a[1],i,Zo.EC(r,i.shape));return{x:function(){return o.x()}}}},ls={kernelName:oo.q8u,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,C.Z)(t,2),r=n[0],a=n[1];return{a:function(){return(0,so.d)(e,(0,uo.p)((0,$o.z)(r,a),"float32"))},b:function(){return(0,so.d)(e,(0,uo.p)((0,qu.p)(r,a),"float32"))}}}},fs=n(9238),hs={kernelName:oo.jQs,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return(0,fs.t)(e,a,r.shape)}}}},ds=n(2628),ps={kernelName:oo.Vbg,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,C.Z)(t,2),r=n[0],a=n[1],i=(0,xo.assertAndGetBroadcastShape)(r.shape,a.shape);return{a:function(){var t=(0,xo.getReductionAxes)(r.shape,i);return t.length>0?(0,wo.X)((0,ko.S)(e,t),r.shape):e},b:function(){var t=(0,so.d)(e,(0,ho.W)((0,ds.G)((0,fo.h)(r,a)))),n=(0,xo.getReductionAxes)(a.shape,i);return n.length>0?(0,wo.X)((0,ko.S)(t,n),a.shape):t}}}},vs={kernelName:oo.wYn,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,C.Z)(t,2),r=n[0],a=n[1],i=(0,xo.assertAndGetBroadcastShape)(r.shape,a.shape);return{a:function(){var t=(0,so.d)(e,(0,uo.p)(a,"float32")),n=(0,xo.getReductionAxes)(r.shape,i);return n.length>0?(0,wo.X)((0,ko.S)(t,n),r.shape):t},b:function(){var t=(0,so.d)(e,(0,uo.p)(r,"float32")),n=(0,xo.getReductionAxes)(a.shape,i);return n.length>0?(0,wo.X)((0,ko.S)(t,n),a.shape):t}}}},gs={kernelName:oo.kuV,gradFunc:function(e){return{x:function(){return(0,ho.W)(e)}}}},ms=n(7742),ys={kernelName:oo.we_,inputsToSave:["indices"],gradFunc:function(e,t){var n=t[0];return{indices:function(){return(0,ms.l)(n.shape,"float32")}}}},bs={kernelName:oo.qWM,gradFunc:function(e){return{x:function(){return(0,Co.P)(e)}}}},xs=n(4566),ws={kernelName:oo.QiL,saveAllInputs:!0,gradFunc:function(e,t,n){var r=n.axis;return(0,xs.H)(e,r).map((function(e){return function(){return e}}))}},ks={kernelName:oo.lyA,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return(0,fs.t)(e,a,r.shape)}}}},_s=n(378),Ss=n(4334),Cs={kernelName:oo.pe_,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:function(e,t){var n=(0,C.Z)(t,3),r=n[0],a=n[1],i=n[2],o=r,u=a,s=xo.assertAndGetBroadcastShape(o.shape,u.shape);return{a:function(){var t=(0,uo.p)(u,"float32"),n=(0,so.d)(e,(0,so.d)(t,(0,Ss.s)(o,(0,mo.l)(t,(0,po.i)(1))))),r=xo.getReductionAxes(o.shape,s);return r.length>0&&(n=(0,ko.S)(n,r)),(0,wo.X)(n,o.shape)},b:function(){var t=(0,qu.p)(o,0),n=(0,Jo.a)(t,(0,_s.c)(o),(0,Co.P)(o)),r=(0,so.d)(e,(0,so.d)(i,n)),a=xo.getReductionAxes(u.shape,s);return a.length>0&&(r=(0,ko.S)(r,a)),(0,wo.X)(r,u.shape)}}}},Es={kernelName:oo.o0g,inputsToSave:["x","alpha"],gradFunc:function(e,t){var n=(0,C.Z)(t,2),r=n[0],a=n[1],i=(0,qu.p)(r,0);return{x:function(){return(0,Jo.a)(i,e,(0,so.d)(e,a))},alpha:function(){var t=(0,Jo.a)(i,(0,Co.P)(e),(0,so.d)(e,r)),n=(0,xo.getReductionAxes)(a.shape,e.shape);return n.length>0&&(t=(0,ko.S)(t,n)),(0,wo.X)(t,a.shape)}}}},As=n(9457);function Ns(e,t,n){var r=e.shape.length,a=r-n.length,i=gu.Q3(n,r),o=e;null!=i&&(o=(0,yu.p)(e,i));var u=o.shape.slice(),s=u.splice(r-n.length,n.length).reduce((function(e,t){return e*t}),1);u.push(s);var c=function(e,t,n){var r=e.shape.slice();r[n]=1;var a=(0,wo.X)(t,r),i=(0,As.$)(e,n,!0,!1),o=(0,As.$)(e,n,!0,!0),u=(0,so.d)(i,o);return(0,so.d)(a,u)}(o.reshape(u),t,a);if(c=c.reshape(o.shape),null!=i){var l=gu.LJ(i);c=(0,yu.p)(c,l)}return c}var Ts={kernelName:oo.DlI,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,C.Z)(t,1)[0],a=n.axis,i=[];return i=void 0===a||null===a?r.shape.map((function(e,t){return t})):"number"===typeof a?[a]:a,{x:function(){return Ns(r,e,i)}}}},Ms={kernelName:oo.oHH,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,C.Z)(t,2),r=n[0],a=n[1],i=xo.assertAndGetBroadcastShape(r.shape,a.shape);return{a:function(){var t=(0,fo.h)(e,(0,uo.p)(a,"float32")),n=xo.getReductionAxes(r.shape,i);return n.length>0?(0,wo.X)((0,ko.S)(t,n),r.shape):t},b:function(){var t=(0,so.d)(e,(0,uo.p)(r,"float32")),n=xo.getReductionAxes(a.shape,i);n.length>0&&(t=(0,wo.X)((0,ko.S)(t,n),a.shape));var o=(0,go.h)(a);return(0,ho.W)((0,fo.h)(t,(0,uo.p)(o,"float32")))}}}},Ds={kernelName:oo.$HU,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return(0,fo.h)(e,(0,ho.W)((0,go.h)(n)))}}}},Fs={kernelName:oo.SbG,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0],r=(0,so.d)((0,$o.z)(n,6),(0,co.N)(n));return{x:function(){return(0,so.d)(e,(0,uo.p)(r,"float32"))}}}},Is={kernelName:oo.qkr,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return(0,so.d)(e,(0,uo.p)((0,co.N)(n),"float32"))}}}},Os={kernelName:oo.HZH,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return(0,wo.X)(e,n.shape)}}}},Rs={kernelName:oo._Yw,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:(0,C.Z)(t,1)[0]};return{images:function(){return Oo.BV.runKernel(oo.zbQ,r,n)}}}},Zs={kernelName:oo.dpD,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:(0,C.Z)(t,1)[0]};return{images:function(){return Oo.BV.runKernel(oo.Hmb,r,n)}}}},Bs=n(4933),zs={kernelName:oo.mKl,gradFunc:function(e,t,n){var r=n.dims,a=(0,Zo.EC)(r,e.shape);return{x:function(){return(0,Bs.G)(e,a)}}}},Ls={kernelName:oo.e07,gradFunc:function(e){return{x:function(){return(0,Co.P)(e)}}}},Ps={kernelName:oo.bV0,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return(0,ho.W)((0,fo.h)(e,(0,so.d)((0,Ss.s)(n,1.5),2)))}}}},js=n(875),Us={kernelName:oo.PhF,inputsToSave:["condition"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{condition:function(){return(0,uo.p)((0,Co.P)(n),"float32")},t:function(){return(0,so.d)(e,(0,uo.p)(n,e.dtype))},e:function(){return(0,so.d)(e,(0,uo.p)((0,js.h)(n),e.dtype))}}}},Ws=n(349),Vs={kernelName:oo.oFR,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){var t=(0,qu.p)(n,(0,po.i)(0)),r=(0,po.i)(Ws.y),a=(0,po.i)(Ws.$),i=(0,so.d)(e,a),o=(0,so.d)((0,so.d)(e,r),(0,Cu.Q)((0,uo.p)(n,"float32")));return(0,Jo.a)(t,i,o)}}}},qs={kernelName:oo.a5O,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return(0,so.d)(e,(0,so.d)(n,(0,mo.l)((0,po.i)(1),n)))}}}},Hs={kernelName:oo.i5y,gradFunc:function(e){return{x:function(){return(0,Co.P)(e)}}}},Gs=n(1227),Xs={kernelName:oo.RQH,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return(0,so.d)((0,Gs.m)((0,uo.p)(n,"float32")),e)}}}},Ys=n(6679),Ks={kernelName:oo.wYB,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return(0,so.d)((0,Ys.f)((0,uo.p)(n,"float32")),e)}}}},$s=n(1970),Qs=n(2875),Js={kernelName:oo.p2w,inputsToSave:["x"],gradFunc:function(e,t,n){for(var r=(0,C.Z)(t,1)[0],a=n.begin,i=n.size,o=r.shape,u=(0,Qs.parseSliceParams)(r,a,i),s=(0,C.Z)(u,2),c=s[0],l=s[1],f=[],h=0;h<e.rank;h++)f.push([c[h],o[h]-c[h]-l[h]]);return{x:function(){return(0,$s.v)(e,f)}}}},ec={kernelName:oo.Gcp,outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,C.Z)(t,1)[0],a=n.dim,i=(0,so.d)(e,r);return{logits:function(){return(0,mo.l)(i,(0,so.d)((0,ko.S)(i,[a],true),r))}}}},tc=n(7643),nc={kernelName:oo.MRv,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return(0,so.d)(e,(0,tc.X)(n))}}}},rc=n(6994),ac={kernelName:oo.TQc,gradFunc:function(e,t,n){var r=n.blockShape,a=n.paddings;return{x:function(){return(0,rc.E)(e,r,a)}}}},ic=n(4836),oc={kernelName:oo.L8s,gradFunc:function(e,t,n){var r=n.axis;return{x:function(){return(0,ic.z)(e,r)}}}},uc={kernelName:oo.FKq,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return(0,fo.h)(e,(0,so.d)((0,vo._)((0,uo.p)(n,"float32")),2))}}}},sc={kernelName:oo.bK0,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return(0,so.d)(e,(0,so.d)((0,uo.p)(n,"float32"),2))}}}},cc={kernelName:oo._tC,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,C.Z)(t,2),r=n[0],a=n[1],i=(0,po.i)(2);return{a:function(){return(0,so.d)(e,(0,so.d)(i,(0,mo.l)(r,a)))},b:function(){return(0,so.d)(e,(0,so.d)(i,(0,mo.l)(a,r)))}}}},lc={kernelName:oo.h8e,gradFunc:function(e){return{x:function(){return(0,Co.P)(e)}}}},fc={kernelName:oo.Tr8,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,C.Z)(t,2),r=n[0],a=n[1],i=xo.assertAndGetBroadcastShape(r.shape,a.shape);return{a:function(){var t=e,n=xo.getReductionAxes(r.shape,i);return n.length>0&&(t=(0,ko.S)(t,n)),(0,wo.X)(t,r.shape)},b:function(){var t=e,n=xo.getReductionAxes(a.shape,i);return n.length>0&&(t=(0,ko.S)(t,n)),(0,wo.X)((0,ho.W)(t),a.shape)}}}},hc={kernelName:oo.GBy,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,C.Z)(t,1)[0],a=r.shape.slice(),i=n.axis;(0,Zo.EC)(i,r.shape).forEach((function(e){a[e]=1}));var o=(0,wo.X)(e,a),u=(0,so.d)(o,(0,us.i)(r.shape,"float32"));return{x:function(){return u}}}},dc={kernelName:oo.sEM,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return(0,fo.h)(e,(0,go.h)((0,Gs.m)(n)))}}}},pc={kernelName:oo.MIZ,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return(0,so.d)((0,mo.l)((0,po.i)(1),(0,go.h)(n)),e)}}}},vc={kernelName:oo.n9L,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,C.Z)(t,1)[0],a=n.reps;return{x:function(){var t=(0,Co.P)(r);if(1===r.rank)for(var n=0;n<a[0];++n)t=(0,To.I)(t,(0,fs.t)(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(var i=0;i<a[0];++i)for(var o=0;o<a[1];++o)t=(0,To.I)(t,(0,fs.t)(e,[i*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(var u=0;u<a[0];++u)for(var s=0;s<a[1];++s)for(var c=0;c<a[2];++c)t=(0,To.I)(t,(0,fs.t)(e,[u*r.shape[0],s*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(r.rank," tensors yet."));for(var l=0;l<a[0];++l)for(var f=0;f<a[1];++f)for(var h=0;h<a[2];++h)for(var d=0;d<a[3];++d)t=(0,To.I)(t,(0,fs.t)(e,[l*r.shape[0],f*r.shape[1],h*r.shape[2],d*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},gc={kernelName:oo.G3Y,gradFunc:function(e,t,n){var r=n.perm,a=gu.LJ(r);return{x:function(){return(0,yu.p)(e,a)}}}},mc={kernelName:oo.ToN,gradFunc:function(e,t,n){var r=n.axis;return{value:function(){return(0,Ru.k)(e,r)}}}},yc=n(2975),bc=n(9498),xc=n(705),wc={kernelName:oo.Qvg,inputsToSave:["segmentIds"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return function(e,t){for(var n=(0,xc.g)(t,(0,Co.P)(t)),r=(0,bc.I)(e,n),a=(0,Ko.b)(t,(0,po.i)(0,"int32")),i=r.rank-a.rank,o=0;o<i;++o)a=(0,yc.d)(a,o+1);a=(0,Qo.H)(a,(0,us.i)(r.shape,"bool"));var u=(0,Co.P)(r);return(0,Jo.a)(a,r,u)}(e,n)}}}};for(var kc={kernelName:oo.RuY,gradFunc:function(e){return{x:function(){return(0,Co.P)(e)}}}},_c=n(8864),Sc=0,Cc=[lo,yo,bo,_o,So,Eo,Ao,No,Mo,Do,Fo,Io,Po,Uo,Vo,Ho,Go,Xo,Yo,eu,tu,ru,su,ou,fu,du,vu,bu,ku,_u,Ms,Su,Eu,Au,Nu,Tu,Du,Mu,Ou,Bu,Pu,ju,Uu,Wu,Vu,Hu,Gu,Xu,Yu,$u,es,es,ns,as,os,ss,cs,ls,hs,ps,vs,gs,ys,bs,ws,ks,ks,Cs,Es,Ts,Ds,Fs,Is,Os,Rs,Zs,zs,Ls,Ps,Us,Vs,qs,Hs,Xs,Ks,Js,ec,nc,ac,ac,oc,oc,uc,cc,sc,lc,fc,hc,dc,pc,vc,gc,mc,wc,kc];Sc<Cc.length;Sc++){var Ec=Cc[Sc];(0,_c.Li)(Ec)}n(4672);var Ac=n(6148),Nc=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),r=t.call(this,e),Object.setPrototypeOf((0,Ac.Z)(r),n.prototype),r}return(0,F.Z)(n)}((0,R.Z)(Error)),Tc=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),r=t.call(this,e),Object.setPrototypeOf((0,Ac.Z)(r),n.prototype),r}return(0,F.Z)(n)}((0,R.Z)(Error)),Mc=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),r=t.call(this,e),Object.setPrototypeOf((0,Ac.Z)(r),n.prototype),r}return(0,F.Z)(n)}((0,R.Z)(Error)),Dc=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),r=t.call(this,e),Object.setPrototypeOf((0,Ac.Z)(r),n.prototype),r}return(0,F.Z)(n)}((0,R.Z)(Error)),Fc=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),r=t.call(this,e),Object.setPrototypeOf((0,Ac.Z)(r),n.prototype),r}return(0,F.Z)(n)}((0,R.Z)(Error)),Ic=(Error,function(){function e(t){(0,D.Z)(this,e),this.maxEntries=t||100,this.cache=new Map}return(0,F.Z)(e,[{key:"get",value:function(e){var t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}},{key:"put",value:function(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(e,t)}},{key:"getMaxEntries",value:function(){return this.maxEntries}},{key:"setMaxEntries",value:function(e){if(e<0)throw new Error("The maxEntries of LRU caches must be at least 0, but got ".concat(e,"."));if(this.maxEntries>e)for(var t=0;t<this.maxEntries-e;t++){var n=this.cache.keys().next().value;this.cache.delete(n)}this.maxEntries=e}}]),e}());function Oc(e,t){if(Array.isArray(e)){for(var n=[],r=0;r<t;r++)n=n.concat(e);return n}var a=new Array(t);return a.fill(e),a}function Rc(e,t){if(!e)throw new Fc(t)}function Zc(e,t){var n,r=0,a=(0,B.Z)(e);try{for(a.s();!(n=a.n()).done;){n.value===t&&r++}}catch(i){a.e(i)}finally{a.f()}return r}function Bc(e){return 1===e.length?e[0]:e}function zc(e){return Array.isArray(e)?e:[e]}function Lc(e){var t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function Pc(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(function(e,t){return t.toUpperCase()}))}var jc={};function Uc(e){if(null===e||void 0===e)return null;var t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function Wc(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach((function(e){return Wc(e)}));else for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t],a=e[r];null!=a&&"object"===typeof a&&(Array.isArray(a)||"ndarray"!==a.type||"number"!==typeof a.value?Wc(a):e[r]=a.value)}}function Vc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){var i,o=e;if(o in n)i=n[o];else if(o in jc)i=jc[o];else if(null==(i=t[o]))throw new Mc("Unknown ".concat(r,": ").concat(e,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return i}var u=e;if(null==u.className||null==u.config)throw new Mc("".concat(r,": Improper config format: ")+"".concat(JSON.stringify(u),".\n")+"'className' and 'config' must set.");var s,c,l=u.className;if(l in n){var f=(0,C.Z)(n[l],2);s=f[0],c=f[1]}else if(l in jc){var h=(0,C.Z)(jc.className,2);s=h[0],c=h[1]}else if(l in t){var d=(0,C.Z)(t[l],2);s=d[0],c=d[1]}if(null==s)throw new Mc("Unknown ".concat(r,": ").concat(l,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=c){for(var p={},v=0,g=Object.keys(jc);v<g.length;v++){var m=g[v];p[m]=jc[m]}for(var y=0,b=Object.keys(n);y<b.length;y++){var x=b[y];p[x]=n[x]}var w=u.config;w.customObjects=p;for(var k=Object.assign({},jc),_=0,S=Object.keys(n);_<S.length;_++){var E=S[_];jc[E]=n[E]}Wc(u.config);var A=c(s,u.config,n,a);return jc=Object.assign({},k),A}for(var N=Object.assign({},jc),T=0,M=Object.keys(n);T<M.length;T++){var D=M[T];jc[D]=n[D]}var F=new s(u.config);return jc=Object.assign({},N),F}function qc(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function Hc(e){if(null==e)return e;var t,n=[],r=(0,B.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;-1===n.indexOf(a)&&n.push(a)}}catch(i){r.e(i)}finally{r.f()}return n}function Gc(e){if(null==e)throw new Mc("Invalid value in obj: ".concat(JSON.stringify(e)));for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function Xc(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new Mc("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function Yc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return Rc(n>=0),Rc(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((function(e){return typeof e===t}))}function Kc(e,t){Array.isArray(e)?(io.util.assert(e.length>0,(function(){return"".concat(t," is unexpectedly an empty array.")})),e.forEach((function(e,n){return Kc(e,"element ".concat(n+1," of ").concat(t))}))):io.util.assert(Number.isInteger(e)&&e>0,(function(){return"Expected ".concat(t," to be a positive integer, but got ")+"".concat($c(e),".")}))}function $c(e){return null===e?"null":Array.isArray(e)?"["+e.map((function(e){return $c(e)})).join(",")+"]":"string"===typeof e?'"'.concat(e,'"'):"".concat(e)}function Qc(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}var Jc=0;function el(){return Jc++}var tl={};function nl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in tl||(tl[e]=0),tl[e]+=1,e+tl[e].toString()}var rl=["channelsFirst","channelsLast"],al=["nearest","bilinear"],il=["valid","same","causal"],ol=["max","avg"],ul=["sum","mul","concat","ave"],sl=new Map;function cl(e){Xc(rl,"DataFormat",e)}function ll(e){Xc(il,"PaddingMode",e)}function fl(e){Xc(ol,"PoolMode",e)}var hl=[];function dl(e,t){hl.push(e);try{var n=t();return hl.pop(),n}catch(ZR){throw hl.pop(),ZR}}function pl(e){if(!yl(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===hl.length?"":hl.join("/")+"/")+e}function vl(e){if(!yl(e))throw new Error("Not a valid tensor name: '"+e+"'");sl.has(e)||sl.set(e,0);var t=sl.get(e);if(sl.set(e,sl.get(e)+1),t>0){var n="".concat(e,"_").concat(t);return sl.set(n,1),n}return e}var gl,ml=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function yl(e){return!!e.match(ml)}function bl(e,t,n){null==t&&(t=0),null==n&&(n=e.length);for(var r=1,a=t;a<n;++a)r*=e[a];return r}function xl(e){if(0===e.length)return Number.NaN;for(var t=Number.POSITIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r<t&&(t=r)}return t}function wl(e){if(0===e.length)return Number.NaN;for(var t=Number.NEGATIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r>t&&(t=r)}return t}function kl(e,t){if(t<e)throw new Mc("end (".concat(t,") < begin (").concat(e,") is forbidden."));for(var n=[],r=e;r<t;++r)n.push(r);return n}function _l(){return null==gl&&(gl=(0,io.backend)().epsilon()),gl}function Sl(e,t){return io.cast(e,t)}function Cl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),io.reshape(e,n)}function El(e){var t=[bl(e.shape)];return io.reshape(e,t)}function Al(e,t,n){return(0,io.tidy)((function(){switch(e.rank){case 1:return io.slice1d(e,t,n);case 2:return io.slice2d(e,[t,0],[n,e.shape[1]]);case 3:return io.slice3d(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return io.slice4d(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return io.slice(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return io.slice(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new Mc("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function Nl(e,t,n){return(0,io.tidy)((function(){switch(e.rank){case 1:return io.slice1d(e,t,n);case 2:return io.slice2d(e,[0,t],[e.shape[0],n]);case 3:return io.slice3d(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return io.slice4d(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new Mc("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function Tl(e,t,n,r){return(0,io.tidy)((function(){switch(e.rank){case 1:return io.slice1d(e,t,n);case 2:switch(r){case 1:return Al(e,t,n);case 2:return Nl(e,t,n);default:throw new Mc("The axis is not within the rank of the tensor "+"".concat(r))}case 3:switch(r){case 1:return Al(e,t,n);case 2:return io.slice3d(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return Nl(e,t,n);default:throw new Mc("The axis is not within the rank of the tensor "+"".concat(r))}case 4:switch(r){case 1:return Al(e,t,n);case 2:return io.slice4d(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return io.slice4d(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return Nl(e,t,n);default:throw new Mc("The axis is not within the rank of the tensor "+"".concat(r))}default:throw new Mc("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function Ml(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(n=0!==(t=e[0].rank)?t:0),n===e[0].rank&&(n=-1),io.concat(e,n)}function Dl(e,t){switch(e.rank){case 1:return io.concat1d([e,t]);case 2:return io.concat2d([e,t],0);case 3:return io.concat3d([e,t],0);case 4:return io.concat4d([e,t],0);default:throw new Mc("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function Fl(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new Mc("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return io.tile(e,t)}function Il(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;return io.randomNormal(e,t,n,r,a)}function Ol(e,t,n,r){if(e.rank<2||t.rank<2)throw new Dc("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new Dc("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape));if(2===e.rank&&2===t.rank){return io.fused.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?Bl(e.rank,r,"channelsLast"):null,activation:n})}var a=e.shape.slice(),i=a.pop();e=io.reshape(e,[-1,i]);var o=t.shape.slice(),u=o.pop(),s=o.pop(),c=[].concat((0,M.Z)(o),[u]),l=Array.from({length:t.rank},(function(e,n){return 0===n?t.rank-2:n<=t.rank-2?n-1:n}));t=io.reshape(io.transpose(t,l),[s,-1]);var f=[].concat((0,M.Z)(a),(0,M.Z)(c));return io.reshape(io.fused.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?Bl(e.rank,r,"channelsLast"):null,activation:n}),f)}function Rl(e,t,n){return(0,io.tidy)((function(){return t=Array.isArray(t)?(0,io.tensor1d)(t,"int32"):io.cast(t,"int32"),io.gather(e,t,n)}))}function Zl(e){return io.mul(e,e)}function Bl(e,t,n){var r=t.shape;if(1!==t.rank&&t.rank!==e)throw new Mc("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(5===e){if("channelsFirst"===n)return 1===r.length?io.reshape(t,[1,r[0],1,1,1]):io.reshape(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?io.reshape(t,[1,1,1,1,r[0]]):io.reshape(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?io.reshape(t,[1,r[0],1,1]):io.reshape(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?io.reshape(t,[1,1,1,r[0]]):io.reshape(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?io.reshape(t,[1,r[0],1]):io.reshape(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?io.reshape(t,[1,1,r[0]]):io.reshape(t,[1].concat(r))}else if(e<3)return t;throw new Mc("Unsupported input rank by biasAdd: ".concat(t.rank))}function zl(e,t,n){return(0,io.tidy)((function(){return null==n&&(n="channelsLast"),cl(n),io.add(e,Bl(e.rank,t,n))}))}function Ll(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new Dc("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return io.elu(e)}function Pl(e,t,n,r){return(0,io.tidy)((function(){return io.dropout(e,t,n,r)}))}function jl(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?e():t()}var Ul=["fanIn","fanOut","fanAvg"],Wl=["normal","uniform","truncatedNormal"];var Vl=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.apply(this,arguments)}return(0,F.Z)(n,[{key:"fromConfigUsesCustomObjects",value:function(){return!1}},{key:"getConfig",value:function(){return{}}}]),n}(io.serialization.Serializable),ql=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.apply(this,arguments)}return(0,F.Z)(n,[{key:"apply",value:function(e,t){return(0,io.zeros)(e,t)}}]),n}(Vl);ql.className="Zeros",io.serialization.registerClass(ql);var Hl=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.apply(this,arguments)}return(0,F.Z)(n,[{key:"apply",value:function(e,t){return(0,io.ones)(e,t)}}]),n}(Vl);Hl.className="Ones",io.serialization.registerClass(Hl);var Gl=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;if((0,D.Z)(this,n),r=t.call(this),"object"!==typeof e)throw new Mc("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new Mc("config must have value set but got ".concat(e));return r.value=e.value,r}return(0,F.Z)(n,[{key:"apply",value:function(e,t){var n=this;return(0,io.tidy)((function(){return(0,io.mul)((0,io.scalar)(n.value),(0,io.ones)(e,t))}))}},{key:"getConfig",value:function(){return{value:this.value}}}]),n}(Vl);Gl.className="Constant",io.serialization.registerClass(Gl);var Xl=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this)).DEFAULT_MINVAL=-.05,r.DEFAULT_MAXVAL=.05,r.minval=e.minval||r.DEFAULT_MINVAL,r.maxval=e.maxval||r.DEFAULT_MAXVAL,r.seed=e.seed,r}return(0,F.Z)(n,[{key:"apply",value:function(e,t){return(0,io.randomUniform)(e,this.minval,this.maxval,t,this.seed)}},{key:"getConfig",value:function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}]),n}(Vl);Xl.className="RandomUniform",io.serialization.registerClass(Xl);var Yl=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return(0,F.Z)(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new Dc("randomNormal does not support dType ".concat(t,"."));return Il(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(Vl);Yl.className="RandomNormal",io.serialization.registerClass(Yl);var Kl=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return(0,F.Z)(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new Dc("truncatedNormal does not support dType ".concat(t,"."));return(0,io.truncatedNormal)(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(Vl);Kl.className="TruncatedNormal",io.serialization.registerClass(Kl);var $l=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this)).gain=null!=e.gain?e.gain:1,r}return(0,F.Z)(n,[{key:"apply",value:function(e,t){var n=this;return(0,io.tidy)((function(){if(2!==e.length||e[0]!==e[1])throw new Mc("Identity matrix initializer can only be used for 2D square matrices.");return(0,io.mul)(n.gain,(0,io.eye)(e[0]))}))}},{key:"getConfig",value:function(){return{gain:this.gain}}}]),n}(Vl);$l.className="Identity",io.serialization.registerClass($l);var Ql=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r,a;if((0,D.Z)(this,n),r=t.call(this),e.scale<0)throw new Mc("scale must be a positive float. Got: ".concat(e.scale));return r.scale=null==e.scale?1:e.scale,r.mode=null==e.mode?"fanIn":e.mode,a=r.mode,Xc(Ul,"FanMode",a),r.distribution=null==e.distribution?"normal":e.distribution,function(e){Xc(Wl,"Distribution",e)}(r.distribution),r.seed=e.seed,r}return(0,F.Z)(n,[{key:"apply",value:function(e,t){var n=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(cl(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){var a=bl(e,2);t=e[1]*a,n=e[0]*a}else if("channelsLast"===r){var i=bl(e,0,e.length-2);t=e[e.length-2]*i,n=e[e.length-1]*i}}else{var o=bl(e);t=Math.sqrt(o),n=Math.sqrt(o)}return[t,n]}(e),r=n[0],a=n[1],i=this.scale;if("fanIn"===this.mode?i/=Math.max(1,r):"fanOut"===this.mode?i/=Math.max(1,a):i/=Math.max(1,(r+a)/2),"normal"===this.distribution){var o=Math.sqrt(i);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new Dc("".concat(this.getClassName()," does not support dType ").concat(t,"."));return(0,io.truncatedNormal)(e,0,o,t,this.seed)}var u=Math.sqrt(3*i);return(0,io.randomUniform)(e,-u,u,t,this.seed)}},{key:"getConfig",value:function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}]),n}(Vl);Ql.className="VarianceScaling",io.serialization.registerClass(Ql);var Jl=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){return(0,D.Z)(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}return(0,F.Z)(n,[{key:"getClassName",value:function(){return Ql.className}}]),n}(Ql);Jl.className="GlorotUniform",io.serialization.registerClass(Jl);var ef=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){return(0,D.Z)(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}return(0,F.Z)(n,[{key:"getClassName",value:function(){return Ql.className}}]),n}(Ql);ef.className="GlorotNormal",io.serialization.registerClass(ef);var tf=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){return(0,D.Z)(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return(0,F.Z)(n,[{key:"getClassName",value:function(){return Ql.className}}]),n}(Ql);tf.className="HeNormal",io.serialization.registerClass(tf);var nf=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){return(0,D.Z)(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return(0,F.Z)(n,[{key:"getClassName",value:function(){return Ql.className}}]),n}(Ql);nf.className="HeUniform",io.serialization.registerClass(nf);var rf=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){return(0,D.Z)(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return(0,F.Z)(n,[{key:"getClassName",value:function(){return Ql.className}}]),n}(Ql);rf.className="LeCunNormal",io.serialization.registerClass(rf);var af=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){return(0,D.Z)(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return(0,F.Z)(n,[{key:"getClassName",value:function(){return Ql.className}}]),n}(Ql);af.className="LeCunUniform",io.serialization.registerClass(af);var of=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this)).DEFAULT_GAIN=1,r.ELEMENTS_WARN_SLOW=2e3,r.gain=null==e.gain?r.DEFAULT_GAIN:e.gain,r.seed=e.seed,r}return(0,F.Z)(n,[{key:"apply",value:function(e,t){var n=this;return(0,io.tidy)((function(){if(e.length<2)throw new Dc("Shape must be at least 2D.");if("int32"!==t&&"float32"!==t&&void 0!==t)throw new TypeError("Unsupported data type ".concat(t,"."));var r=io.util.sizeFromShape(e.slice(0,-1)),a=e[e.length-1],i=r*a;i>n.ELEMENTS_WARN_SLOW&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than ".concat(n.ELEMENTS_WARN_SLOW," (").concat(i,") elements: ")+"Slowness may result.");var o=Il([Math.max(a,r),Math.min(a,r)],0,1,t,n.seed),u=io.linalg.qr(o,!1),s=u[0],c=u[1].flatten().stridedSlice([0],[Math.min(a,r)*Math.min(a,r)],[Math.min(a,r)+1]);return s=(0,io.mul)(s,c.sign()),r<a&&(s=s.transpose()),(0,io.mul)((0,io.scalar)(n.gain),s.reshape(e))}))}},{key:"getConfig",value:function(){return{gain:this.gain,seed:this.seed}}}]),n}(Vl);of.className="Orthogonal",io.serialization.registerClass(of);var uf={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function sf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Vc(e,io.serialization.SerializationMap.getMap().classNameMap,t,"initializer")}function cf(e){return Uc(e)}function lf(e){if("string"===typeof e){var t=e in uf?uf[e]:e;if("GlorotNormal"===t)return new ef;if("GlorotUniform"===t)return new Jl;if("HeNormal"===t)return new tf;if("HeUniform"===t)return new nf;if("LeCunNormal"===t)return new rf;if("LeCunUniform"===t)return new af;var n={};return n.className=t,n.config={},sf(n)}return e instanceof Vl?e:sf(e)}function ff(e){return Array.isArray(e)&&Array.isArray(e[0])}function hf(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function df(e){var t;if(Array.isArray(e)){if(1!==e.length)throw new Mc("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function pf(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new Mc("Expected exactly 1 Shape; got ".concat(e.length))}return e}function vf(e){var t,n=0,r=(0,B.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;0===a.shape.length?n+=1:n+=a.shape.reduce((function(e,t){return e*t}))}}catch(i){r.e(i)}finally{r.f()}return n}var gf="Variable",mf=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gf,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;(0,D.Z)(this,e),this.dtype=null==n?"float32":n,this.shape=t.shape,this.id=el(),r=null==r?gf:r,this.originalName=pl(r),this.name=vl(this.originalName),this.trainable_=a,this.constraint=i,this.val=io.variable(t,this.trainable_,this.name,this.dtype)}return(0,F.Z)(e,[{key:"read",value:function(){return this.assertNotDisposed(),this.val}},{key:"write",value:function(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}},{key:"dispose",value:function(){this.assertNotDisposed(),this.val.dispose()}},{key:"assertNotDisposed",value:function(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.trainable_=e,this.val.trainable=e}}]),e}();function yf(e){return e.map((function(e){return e.read()}))}function bf(e){e.forEach((function(e){e[0].write(e[1])}))}var xf=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.dtype=t.dtype,this.shape=t.shape,null!=t.shape?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}})),wf=(0,F.Z)((function e(t,n,r,a,i,o,u){(0,D.Z)(this,e),this.dtype=t,this.shape=n,this.sourceLayer=r,this.inputs=a,this.callArgs=i,this.outputTensorIndex=u,this.id=el(),null!=o&&(this.originalName=pl(o),this.name=vl(this.originalName)),this.rank=n.length})),kf=0,_f=function(){function e(t,n){(0,D.Z)(this,e),this.callArgs=n,this.id=kf++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;var r,a=(0,B.Z)(t.inboundLayers);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&i.outboundNodes.push(this)}}catch(o){a.e(o)}finally{a.f()}t.outboundLayer.inboundNodes.push(this)}return(0,F.Z)(e,[{key:"getConfig",value:function(){var e,t=[],n=(0,B.Z)(this.inboundLayers);try{for(n.s();!(e=n.n()).done;){var r=e.value;null!=r?t.push(r.name):t.push(null)}}catch(a){n.e(a)}finally{n.f()}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}]),e}(),Sf=0,Cf=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,D.Z)(this,n),(e=t.call(this))._callHook=null,e._addedWeightNames=[],e._stateful=!1,e.id=Sf++,e.activityRegularizer=null,e.inputSpec=null,e.supportsMasking=!1,e._trainableWeights=[],e._nonTrainableWeights=[],e._losses=[],e._updates=[],e._built=!1,e.inboundNodes=[],e.outboundNodes=[];var a=r.name;if(!a){var i=e.getClassName();a=Lc(i)+"_"+nl(i)}if(e.name=a,e.trainable_=null==r.trainable||r.trainable,null!=r.inputShape||null!=r.batchInputShape){var o;if(null!=r.batchInputShape)o=r.batchInputShape;else if(null!=r.inputShape){var u=null;null!=r.batchSize&&(u=r.batchSize),o=[u].concat(r.inputShape)}e.batchInputShape=o;var s=r.dtype;null==s&&(s=r.inputDType),null==s&&(s="float32"),e.dtype=s}return null!=r.weights?e.initialWeights=r.weights:e.initialWeights=null,e._refCount=null,e.fastWeightInitDuringBuild=!1,e}return(0,F.Z)(n,[{key:"getNodeAtIndex",value:function(e,t){if(0===this.inboundNodes.length)throw new Tc("The layer has never been called "+"and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new Mc("Asked to get ".concat(t," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}},{key:"getInputAt",value:function(e){return Bc(this.getNodeAtIndex(e,"input").inputTensors)}},{key:"getOutputAt",value:function(e){return Bc(this.getNodeAtIndex(e,"output").outputTensors)}},{key:"input",get:function(){if(this.inboundNodes.length>1)throw new Nc("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new Nc("Layer ".concat(this.name)+" is not connected, no input to return.");return Bc(this.getNodeAtIndex(0,"input").inputTensors)}},{key:"output",get:function(){if(0===this.inboundNodes.length)throw new Nc("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new Nc("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return Bc(this.getNodeAtIndex(0,"output").outputTensors)}},{key:"losses",get:function(){return this._losses}},{key:"calculateLosses",value:function(){return this.losses.map((function(e){return e()}))}},{key:"updates",get:function(){return this._updates}},{key:"built",get:function(){return this._built},set:function(e){this._built=e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this._trainableWeights.forEach((function(t){return t.trainable=e})),this.trainable_=e}},{key:"trainableWeights",get:function(){return this.trainable_?this._trainableWeights.filter((function(e){return e.trainable})):[]},set:function(e){this._trainableWeights=e}},{key:"nonTrainableWeights",get:function(){return this.trainable?this._trainableWeights.filter((function(e){return!e.trainable})).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"stateful",get:function(){return this._stateful}},{key:"resetStates",value:function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}},{key:"assertInputCompatibility",value:function(e){var t=zc(e);if(null!=this.inputSpec&&0!==this.inputSpec.length){var n=zc(this.inputSpec);if(t.length!==n.length)throw new Mc("Layer ".concat(this.name," expects ").concat(n.length," inputs, ")+"but it received ".concat(t.length," input tensors. ")+"Input received: ".concat(e));for(var r=0;r<t.length;r++){var a=t[r],i=n[r];if(null!=i){var o=a.rank;if(null!=i.ndim&&o!==i.ndim)throw new Mc("Input ".concat(r," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(i.ndim,", found ndim=").concat(o));if(null!=i.maxNDim&&o>i.maxNDim)throw new Mc("Input ".concat(r," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(i.maxNDim,", found ndim=").concat(o));if(null!=i.minNDim&&o<i.minNDim)throw new Mc("Input ".concat(r," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(i.minNDim,", found ndim=").concat(o,"."));if(null!=i.dtype&&a.dtype!==i.dtype)throw new Mc("Input ".concat(r," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(i.dtype,", found dtype=").concat(a.dtype,"."));if(i.axes){var u=a.shape;for(var s in i.axes){var c=Number(s),l=i.axes[s],f=c>=0?u[c]:u[u.length+c];if(null!=l&&-1===[l,null].indexOf(f))throw new Mc("Input ".concat(r," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(c," of input shape to ")+"have value ".concat(l," but got shape ").concat(u,"."))}}if(null!=i.shape)for(var h=0;h<i.shape.length;++h){var d=i.shape[h],p=a.shape[h];if(null!=d&&null!=p&&d!==p)throw new Mc("Input ".concat(r," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(i.shape,", ")+"found shape=".concat(a.shape,"."))}}}}}},{key:"call",value:function(e,t){return e}},{key:"invokeCallHook",value:function(e,t){null!=this._callHook&&this._callHook(e,t)}},{key:"setCallHook",value:function(e){this._callHook=e}},{key:"clearCallHook",value:function(){this._callHook=null}},{key:"apply",value:function(e,t){var n=this;t=t||{},this.assertNotDisposed();var r=zc(e),a=function(e){var t,n=!0,r=(0,B.Z)(zc(e));try{for(r.s();!(t=r.n()).done;){if(!(t.value instanceof wf)){n=!1;break}}}catch(a){r.e(a)}finally{r.f()}return n}(e),i=function(e){var t,n=!0,r=(0,B.Z)(zc(e));try{for(r.s();!(t=r.n()).done;){if(t.value instanceof wf){n=!1;break}}}catch(a){r.e(a)}finally{r.f()}return n}(e);if(a===i)throw new Mc("Arguments to apply() must be all SymbolicTensors or all Tensors");return dl(this.name,(function(){if(!n.built){n.assertInputCompatibility(e);var a,o=[],u=(0,B.Z)(zc(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;o.push(s.shape)}}catch(b){u.e(b)}finally{u.f()}n.build(Bc(o)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&i&&(n._refCount=1)}if(n.assertInputCompatibility(e),i){var c=n.call(e,t);n.supportsMasking&&n.setMaskMetadata(e,c);var l,f=zc(c),h=[],d=(0,B.Z)(f);try{for(d.s();!(l=d.n()).done;){var p=l.value;-1!==r.indexOf(p)&&(p=p.clone()),h.push(p)}}catch(b){d.e(b)}finally{d.f()}if(c=Bc(h),null!=n.activityRegularizer)throw new Dc("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return c}var v,g=function(e){e=zc(e);var t,n=[],r=(0,B.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(a.shape)}}catch(b){r.e(b)}finally{r.f()}return Bc(n)}(e),m=n.computeOutputShape(g),y="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(e)?g[0]:g),v=null!=m&&m.length>0&&Array.isArray(m[0])?m.map((function(r,a){return new wf(y,r,n,zc(e),t,n.name,a)})):new wf(y,m,n,zc(e),t,n.name),n.addInboundNode(e,v,null,null,g,m,t),n._refCount++,null!=n.activityRegularizer)throw new Dc("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return v}))}},{key:"warnOnIncompatibleInputShape",value:function(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{var t=!1;this.batchInputShape.forEach((function(n,r){null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}},{key:"outputShape",get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new Nc("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");var e,t=[],n=(0,B.Z)(this.inboundNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=JSON.stringify(r.outputShapes);-1===t.indexOf(a)&&t.push(a)}}catch(o){n.e(o)}finally{n.f()}if(1===t.length){var i=this.inboundNodes[0].outputShapes;return Array.isArray(i)&&Array.isArray(i[0])&&1===i.length?i[0]:i}throw new Nc("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}},{key:"countParams",value:function(){if(!this.built)throw new Tc("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return vf(this.weights)}},{key:"build",value:function(e){this.built=!0}},{key:"getWeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return yf(e?this.trainableWeights:this.weights)}},{key:"setWeights",value:function(e){var t=this;(0,io.tidy)((function(){var n=t.weights;if(n.length!==e.length)throw new Mc('You called setWeights(weights) on layer "'.concat(t.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(n.length," weights. ")+"Provided weights: ".concat(e,"..."));if(0!==n.length){for(var r=[],a=yf(n),i=0;i<a.length;++i){var o=a[i],u=n[i],s=e[i];if(!io.util.arraysEqual(o.shape,s.shape))throw new Mc("Layer weight shape ".concat(o.shape," ")+"not compatible with provided weight shape ".concat(s.shape));r.push([u,s])}bf(r)}}))}},{key:"addWeight",value:function(e,t,n,r,a,i,o,u){if(-1!==this._addedWeightNames.indexOf(e))throw new Mc("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=u?u():lf("zeros"));var s=r.apply(t,n),c=new mf(s,n,e,i,o);return s.dispose(),null!=a&&this.addLoss((function(){return a.apply(c.read())})),null==i&&(i=!0),i?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}},{key:"setFastWeightInitDuringBuild",value:function(e){this.fastWeightInitDuringBuild=e}},{key:"addLoss",value:function(e){var t;null==e||Array.isArray(e)&&0===e.length||(e=zc(e),void 0!==this._losses&&null!==this._losses&&(t=this.losses).push.apply(t,(0,M.Z)(e)))}},{key:"computeOutputShape",value:function(e){return e}},{key:"computeMask",value:function(e,t){var n=this;if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");t.forEach((function(e){if(null!=e)throw new TypeError("Layer ".concat(n.name," does not support masking, ")+"but was passed an inputMask.")}))}return null}return t}},{key:"setMaskMetadata",value:function(e,t,n){if(this.supportsMasking){var r=this.computeMask(e,n),a=zc(t),i=zc(r);if(a.length!==i.length)throw new Error("".concat(this.name," outputs ").concat(a.length," tensors ")+"but ".concat(a.length," masks for those tensors"));for(var o=0;o<a.length;o++)a[o].kerasMask=i[o]}}},{key:"addInboundNode",value:function(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=zc(e);t=zc(t),n=zc(n),r=zc(r),a=hf(a),i=hf(i);var s,c=[],l=[],f=[],h=(0,B.Z)(u);try{for(h.s();!(s=h.n()).done;){var d=s.value;c.push(d.sourceLayer),l.push(d.nodeIndex),f.push(d.tensorIndex)}}catch(v){h.e(v)}finally{h.f()}new _f({outboundLayer:this,inboundLayers:c,nodeIndices:l,tensorIndices:f,inputTensors:u,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:i},o);for(var p=0;p<t.length;p++)t[p].sourceLayer=this,t[p].nodeIndex=this.inboundNodes.length-1,t[p].tensorIndex=p}},{key:"getConfig",value:function(){var e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}},{key:"disposeWeights",value:function(){return this.weights.forEach((function(e){return e.dispose()})),this.weights.length}},{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();var e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}],[{key:"nodeKey",value:function(e,t){return e.name+"_ib-"+t.toString()}}]),n}(io.serialization.Serializable);function Ef(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];var r=t.inboundNodes[n];if(0===r.inboundLayers.length)return r.inputTensors;for(var a=[],i=0;i<r.inboundLayers.length;i++){var o,u=Ef(r.inputTensors[i],r.inboundLayers[i],r.nodeIndices[i]),s=(0,B.Z)(u);try{for(s.s();!(o=s.n()).done;){var c=o.value;-1===a.indexOf(c)&&a.push(c)}}catch(l){s.e(l)}finally{s.f()}}return a}var Af=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;if((0,D.Z)(this,n),r=t.call(this,{dtype:e.dtype,name:null!=e.name?e.name:nl("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),r.trainable=!1,r.built=!0,r.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new Mc("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var a=e.batchInputShape;if(null==a){if(null==e.inputShape)throw new Mc("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");a=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new Mc("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var i=e.dtype||"float32";r.batchInputShape=a,r.dtype=i,r.inputSpec=[{shape:a}];var o=new wf(r.dtype,r.batchInputShape,(0,Ac.Z)(r),[],{},r.name);return o.nodeIndex=0,o.tensorIndex=0,new _f({outboundLayer:(0,Ac.Z)(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[a],outputShapes:[a]}),r}return(0,F.Z)(n,[{key:"apply",value:function(e,t){throw new Mc("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}},{key:"dispose",value:function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}},{key:"getConfig",value:function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}]),n}(Cf);function Nf(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new Mc("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));var n=e.dtype;return null==n&&(n="float32"),new Af({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}Af.className="InputLayer",io.serialization.registerClass(Af);var Tf=function(){function e(t){if((0,D.Z)(this,e),this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof e)for(var n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(null==t)return;var r,a=(0,B.Z)(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.add(i.key,i.value)}}catch(o){a.e(o)}finally{a.f()}}}return(0,F.Z)(e,[{key:"add",value:function(e,t,n){if(null!=this.id2Value[e.id])throw new Mc("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return(0,io.cast)(t,e.dtype)}catch(n){throw new Mc("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}},{key:"addFeed",value:function(e){this.add(e.key,e.value)}},{key:"hasKey",value:function(e){return null!=this.id2Value[e.id]}},{key:"names",value:function(){return Object.keys(this.name2Id)}},{key:"getValue",value:function(e){if(e instanceof wf){if(null==this.id2Value[e.id])throw new Mc("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}var t=this.name2Id[e];if(null==t)throw new Mc("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}},{key:"getMask",value:function(e){if(e instanceof wf){if(null==this.id2Value[e.id])throw new Mc("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}var t=this.name2Id[e];if(null==t)throw new Mc("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}},{key:"disposeMasks",value:function(){null!=this.id2Mask&&(0,io.dispose)(this.id2Mask)}}]),e}(),Mf=new Ic,Df=new Ic;function Ff(e,t,n,r){var a,i=null!=n&&n.training,o=Array.isArray(e),u=o?e:[e],s=u.map((function(e){return e.name})),c=[],l=t.names(),f=(0,B.Z)(s);try{for(f.s();!(a=f.n()).done;){var h=a.value;-1!==l.indexOf(h)?c.push(t.getValue(h)):c.push(null)}}catch(z){f.e(z)}finally{f.f()}null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);var d,p=s.join(",")+"|"+t.names().sort().join(","),v=Mf.get(p);if(null==v){var g=function(e,t){io.util.assert(null!=e&&e.length>0,(function(){return"Expected at least one fetch, got none"}));var n=[],r={};if(1===e.length){var a=Of(e[0],t);n=a.sorted,r=a.recipientMap}else{var i,o=new Set,u=(0,B.Z)(e);try{for(u.s();!(i=u.n()).done;){var s,c=Of(i.value,t),l=c.sorted,f=c.recipientMap,h=(0,B.Z)(l);try{for(h.s();!(s=h.n()).done;){var d=s.value;o.has(d.name)||(n.push(d),o.add(d.name))}}catch(z){h.e(z)}finally{h.f()}var p=function(e){null==r[e]&&(r[e]=new Set),f[e].forEach((function(t){return r[e].add(t)}))};for(var v in f)p(v)}}catch(z){u.e(z)}finally{u.f()}}return{sorted:n,recipientCounts:If(r)}}(u,t);v=g.sorted,d=g.recipientCounts,Mf.put(p,v),Df.put(p,d)}d={},i||Object.assign(d,Df.get(p));for(var m=new Tf(t),y=0;y<v.length;++y){if(null!=r){var b=(0,io.memory)().numTensors;b>r.maxNumTensors&&(r.maxNumTensors=b),b<r.minNumTensors&&(r.minNumTensors=b)}var x=v[y],w=x.sourceLayer;if(!(w instanceof Af)){var k,_=[],S=[],C=[],E=!1,A=(0,B.Z)(x.inputs);try{for(A.s();!(k=A.n()).done;){var N=k.value,T=m.getValue(N),M=m.getMask(N);_.push(T),S.push(M),null!=M&&(E=!0),i||(d[N.name]--,0!==d[N.name]||t.hasKey(N)||-1!==s.indexOf(N.name)||T.isDisposed||!0===N.sourceLayer.stateful||C.push(T))}}catch(z){A.e(z)}finally{A.f()}E&&((n=n||{}).mask=S[0]);var D=zc(w.apply(_,n)),F=null;w.supportsMasking&&(F=w.computeMask(_,S));for(var I=Rf(x),O=Array.isArray(I)?I:[I],R=0;R<O.length;++R){m.hasKey(O[R])||m.add(O[R],D[R],Array.isArray(F)?F[0]:F);var Z=s.indexOf(O[R].name);-1!==Z&&(c[Z]=D[R])}i||(0,io.dispose)(C)}}return m.disposeMasks(),o?c:c[0]}function If(e){var t={};for(var n in e)t[n]=e[n].size;return t}function Of(e,t){var n,r=new Set,a=[],i={},o=(0,B.Z)(t.names());try{for(o.s();!(n=o.n()).done;){var u=n.value;r.add(u)}}catch(v){o.e(v)}finally{o.f()}var s=[],c=[];for(s.push(e);s.length>0;){var l=s[s.length-1];if(r.has(l.name))s.pop();else{var f=c[c.length-1]===s.length-1;if(0===l.inputs.length||f)s.pop(),a.push(l),r.add(l.name),f&&c.pop();else{c.push(s.length-1);var h,d=(0,B.Z)(l.inputs);try{for(d.s();!(h=d.n()).done;){var p=h.value;null==i[p.name]&&(i[p.name]=new Set),i[p.name].add(l.name),r.has(p.name)||s.push(p)}}catch(v){d.e(v)}finally{d.f()}}}}return{sorted:a,recipientMap:i}}function Rf(e){var t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{for(var n=null,r=0;r<e.sourceLayer.inboundNodes.length;++r){var a,i=(0,B.Z)(e.sourceLayer.inboundNodes[r].outputTensors);try{for(i.s();!(a=i.n()).done;){if(a.value.id===e.id){n=r;break}}}catch(o){i.e(o)}finally{i.f()}}t=e.sourceLayer.getOutputAt(n)}return t}function Zf(e,t){return(0,io.tidy)((function(){return io.sqrt(io.sum(io.mul(e,e),t,!0))}))}(0,io.env)().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",(function(){return 100}),(function(e){null!=Mf&&Mf.setMaxEntries(e),null!=Df&&Df.setMaxEntries(e)}));var Bf=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.apply(this,arguments)}return(0,F.Z)(n,[{key:"getConfig",value:function(){return{}}}]),n}(io.serialization.Serializable),zf=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this)).defaultMaxValue=2,r.defaultAxis=0,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return(0,F.Z)(n,[{key:"apply",value:function(e){var t=this;return(0,io.tidy)((function(){var n=Zf(e,t.axis),r=io.clipByValue(n,0,t.maxValue);return io.mul(e,io.div(r,io.add(_l(),n)))}))}},{key:"getConfig",value:function(){return{maxValue:this.maxValue,axis:this.axis}}}]),n}(Bf);zf.className="MaxNorm",io.serialization.registerClass(zf);var Lf=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this)).defaultAxis=0,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return(0,F.Z)(n,[{key:"apply",value:function(e){var t=this;return(0,io.tidy)((function(){return io.div(e,io.add(_l(),Zf(e,t.axis)))}))}},{key:"getConfig",value:function(){return{axis:this.axis}}}]),n}(Bf);Lf.className="UnitNorm",io.serialization.registerClass(Lf);var Pf=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.apply(this,arguments)}return(0,F.Z)(n,[{key:"apply",value:function(e){return io.relu(e)}}]),n}(Bf);Pf.className="NonNeg",io.serialization.registerClass(Pf);var jf=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this)).defaultMinValue=0,r.defaultMaxValue=1,r.defaultRate=1,r.defaultAxis=0,r.minValue=null!=e.minValue?e.minValue:r.defaultMinValue,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.rate=null!=e.rate?e.rate:r.defaultRate,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return(0,F.Z)(n,[{key:"apply",value:function(e){var t=this;return(0,io.tidy)((function(){var n=Zf(e,t.axis),r=io.add(io.mul(t.rate,io.clipByValue(n,t.minValue,t.maxValue)),io.mul(1-t.rate,n));return io.mul(e,io.div(r,io.add(_l(),n)))}))}},{key:"getConfig",value:function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}]),n}(Bf);jf.className="MinMaxNorm",io.serialization.registerClass(jf);var Uf,Wf={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Vf(e){return Uc(e)}function qf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Vc(e,io.serialization.SerializationMap.getMap().classNameMap,t,"constraint")}function Hf(e){return null==e?null:"string"===typeof e?qf({className:e in Wf?Wf[e]:e,config:{}}):e instanceof Bf?e:qf(e)}function Gf(e){return Xf.apply(this,arguments)}function Xf(){return(Xf=(0,Bi.Z)(A().mark((function e(t){var n,r,a,i,o,u,s,c;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return");case 2:for(i in n=[],r=[],a=[],t)"number"!==typeof(o=t[i])&&(u=o,n.push(u.data()),r.push(i),a.push(u));if(!(n.length>0)){e.next=12;break}return e.next=9,Promise.all(n);case 9:for(s=e.sent,c=0;c<s.length;++c)t[r[c]]=s[c][0];(0,io.dispose)(a);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yf(e){if(null!=e)for(var t in e){var n=e[t];"number"!==typeof n&&n.dispose()}}!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(Uf||(Uf={}));var Kf=function(){function e(){(0,D.Z)(this,e),this.validationData=null}return(0,F.Z)(e,[{key:"setParams",value:function(e){this.params=e}},{key:"onEpochBegin",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=(0,Bi.Z)(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=(0,Bi.Z)(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setModel",value:function(e){}}]),e}(),$f=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;(0,D.Z)(this,e),null==t&&(t=[]),this.callbacks=t,this.queueLength=n}return(0,F.Z)(e,[{key:"append",value:function(e){this.callbacks.push(e)}},{key:"setParams",value:function(e){var t,n=(0,B.Z)(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setParams(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"setModel",value:function(e){var t,n=(0,B.Z)(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setModel(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"onEpochBegin",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){var r,a,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=(0,B.Z)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){var r,a,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=(0,B.Z)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){var r,a,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=(0,B.Z)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){var r,a,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=(0,B.Z)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=(0,Bi.Z)(A().mark((function e(t){var n,r,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=(0,B.Z)(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainBegin(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=(0,Bi.Z)(A().mark((function e(t){var n,r,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=(0,B.Z)(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainEnd(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Qf=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.call(this)}return(0,F.Z)(n,[{key:"onEpochBegin",value:function(){var e=(0,Bi.Z)(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.seen=0,this.totals={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){var r,a,i,o=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in null==n&&(n={}),r=null==n.size?0:n.size,this.seen+=r,a=function(e){var t=n[e];if("number"===typeof t)o.totals.hasOwnProperty(e)||(o.totals[e]=0),o.totals[e]=o.totals[e]+t*r;else{var a;e in o.totals?a=o.totals[e]:o.totals[e]=0;var i=(0,io.tidy)((function(){return(0,io.add)(o.totals[e],(0,io.mul)(t,r))}));o.totals[e]=i,null!=a&&a.dispose()}},n)a(i);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){var r,a,i,o=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n){e.next=19;break}r=(0,B.Z)(this.params.metrics),e.prev=2,i=function(){var e=a.value;if(null==o.totals[e])return"continue";"number"===typeof o.totals[e]?n[e]=o.totals[e]/o.seen:(0,io.tidy)((function(){var t=(0,io.mul)((0,io.div)(1,o.seen),o.totals[e]);n[e]=t,o.totals[e].dispose(),(0,io.keep)(n[e])}))},r.s();case 5:if((a=r.n()).done){e.next=11;break}if("continue"!==i()){e.next=9;break}return e.abrupt("continue",9);case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[2,13,16,19]])})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(Kf),Jf=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.apply(this,arguments)}return(0,F.Z)(n,[{key:"onTrainBegin",value:function(){var e=(0,Bi.Z)(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.epoch=[],this.history={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in null==n&&(n={}),this.epoch.push(t),n)null==this.history[r]&&(this.history[r]=[]),this.history[r].push(n[r]);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"syncData",value:function(){var e=(0,Bi.Z)(A().mark((function e(){var t,n,r,a,i,o,u,s,c;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t=[],n=[],r=[],this.history)for(i=this.history[a],o=0;o<i.length;++o)"number"!==typeof i[o]&&(u=i[o],t.push(u.data()),n.push(a),r.push(o));return e.next=6,Promise.all(t);case 6:for(s=e.sent,c=0;c<s.length;++c)this.history[n[c]][r[c]].dispose(),this.history[n[c]][r[c]]=s[c][0];case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Kf),eh=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e,r){var a;if((0,D.Z)(this,n),(a=t.call(this)).currentEpoch=0,a.nowFunc=e.nowFunc,a.nextFrameFunc=e.nextFrameFunc||io.nextFrame,a.yieldEvery=r||"auto","auto"===a.yieldEvery&&(a.yieldEvery=125),"never"===a.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return io.util.isNumber(a.yieldEvery)&&(a.maybeWait=function(e,t,n){var r,a=null!=n?n():io.util.now();return function(){var i=null!=n?n():io.util.now();return i-a<t?r:(a=i,r=e.apply(void 0,arguments))}}(a.maybeWait.bind((0,Ac.Z)(a)),a.yieldEvery,a.nowFunc)),a.trainBegin=e.onTrainBegin,a.trainEnd=e.onTrainEnd,a.epochBegin=e.onEpochBegin,a.epochEnd=e.onEpochEnd,a.batchBegin=e.onBatchBegin,a.batchEnd=e.onBatchEnd,a.yield=e.onYield,a}return(0,F.Z)(n,[{key:"maybeWait",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n,r){var a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],null==this.yield){e.next=5;break}return e.next=4,Gf(r);case 4:a.push(this.yield(t,n,r));case 5:return a.push(this.nextFrameFunc()),e.next=8,Promise.all(a);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"onEpochBegin",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentEpoch=t,null==this.epochBegin){e.next=6;break}return e.next=4,Gf(n);case 4:return e.next=6,this.epochBegin(t,n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.epochEnd){e.next=5;break}return e.next=4,Gf(n);case 4:r.push(this.epochEnd(t,n));case 5:return"epoch"===this.yieldEvery&&r.push(this.nextFrameFunc()),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.batchBegin){e.next=5;break}return e.next=3,Gf(n);case 3:return e.next=5,this.batchBegin(t,n);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.batchEnd){e.next=5;break}return e.next=4,Gf(n);case 4:r.push(this.batchEnd(t,n));case 5:return"batch"===this.yieldEvery?r.push(this.nextFrameFunc()):io.util.isNumber(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,t,n)),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=(0,Bi.Z)(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainBegin){e.next=5;break}return e.next=3,Gf(t);case 3:return e.next=5,this.trainBegin(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=(0,Bi.Z)(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainEnd){e.next=5;break}return e.next=3,Gf(t);case 3:return e.next=5,this.trainEnd(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Kf);function th(e,t){return null==e&&(e={}),e instanceof Kf?[e]:Array.isArray(e)&&e[0]instanceof Kf?e:zc(e).map((function(e){return new eh(e,t)}))}var nh=function(){function e(){(0,D.Z)(this,e)}return(0,F.Z)(e,null,[{key:"registerCallbackConstructor",value:function(t,n){io.util.assert(t>=0&&Number.isInteger(t),(function(){return"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(t)})),e.checkForDuplicate(n),null==e.constructors[t]&&(e.constructors[t]=[]),e.constructors[t].push(n)}},{key:"checkForDuplicate",value:function(t){for(var n in e.constructors){e.constructors[+n].forEach((function(e){if(e===t)throw new Mc("Duplicate callback constructor.")}))}}},{key:"clear",value:function(){e.constructors={}}},{key:"createCallbacks",value:function(t){var n=[];for(var r in e.constructors){var a=+r;t>=a&&n.push.apply(n,(0,M.Z)(e.constructors[a]))}return n.map((function(e){return new e}))}}]),e}();function rh(e,t,n,r,a,i,o,u,s){var c=new Jf,l=[new Qf].concat((0,M.Z)(nh.createCallbacks(t)));null!=e&&l.push.apply(l,(0,M.Z)(e)),l.push(c);var f=new $f(l);return f.setParams({epochs:n,initialEpoch:r,samples:a,steps:i,batchSize:o,verbose:t,doValidation:u,metrics:s}),{callbackList:f,history:c}}function ah(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Vc(e,io.serialization.SerializationMap.getMap().classNameMap,t,"layer",n)}function ih(e,t){return(0,io.tidy)((function(){"float32"!==e.dtype&&(e=io.cast(e,"float32"));var n=io.sum(Zl(e),t,!0),r=io.fill(n.shape,_l()),a=io.sqrt(io.maximum(n,r));return io.div(e,a)}))}function oh(e,t){return(0,io.tidy)((function(){return io.mean(Zl(io.sub(t,e)),-1)}))}function uh(e,t){return(0,io.tidy)((function(){return io.mean(io.abs(io.sub(t,e)),-1)}))}function sh(e,t){return(0,io.tidy)((function(){var n=io.sub(e,t),r=io.clipByValue(io.abs(e),_l(),Number.MAX_VALUE),a=io.abs(io.div(n,r));return io.mul(100,io.mean(a,-1))}))}function ch(e,t){return(0,io.tidy)((function(){var n=io.clipByValue(t,_l(),Number.MAX_VALUE),r=io.log(io.add(1,n)),a=io.clipByValue(e,_l(),Number.MAX_VALUE),i=io.log(io.add(1,a));return io.mean(Zl(io.sub(r,i)),-1)}))}function lh(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,io.tidy)((function(){if(n)t=io.softmax(t);else{var r=io.sum(t,t.shape.length-1,!0);t=io.div(t,r)}return t=io.clipByValue(t,_l(),1-_l()),io.neg(io.sum(io.mul(io.cast(e,"float32"),io.log(t)),t.shape.length-1))}))}function fh(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,io.tidy)((function(){var r=io.cast(io.floor(El(e)),"int32"),a=(t=io.clipByValue(t,_l(),1-_l())).shape;return lh(io.reshape(io.oneHot(r,a[a.length-1]),a),t,n)}))}function hh(e,t){return(0,io.tidy)((function(){var n;return n=io.clipByValue(t,_l(),1-_l()),n=io.log(io.div(n,io.sub(1,n))),io.mean(function(e,t){if(!io.util.arraysEqual(e.shape,t.shape))throw new Mc("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return(0,io.tidy)((function(){var n=io.relu(t),r=io.neg(io.abs(t));return io.add(io.sub(n,io.mul(t,e)),io.log1p(io.exp(r)))}))}(e,n),-1)}))}function dh(e,t){return(0,io.tidy)((function(){var n=io.clipByValue(e,_l(),1),r=io.clipByValue(t,_l(),1);return io.sum(io.mul(e,io.log(io.div(n,r))),-1)}))}function ph(e,t){return(0,io.tidy)((function(){var n=ih(e,-1),r=ih(t,-1),a=io.mul(n,r);return io.neg(io.sum(a,-1))}))}nh.constructors={};var vh={meanSquaredError:oh,meanAbsoluteError:uh,meanAbsolutePercentageError:sh,meanSquaredLogarithmicError:ch,squaredHinge:function(e,t){return(0,io.tidy)((function(){var n=io.maximum(0,io.sub(1,io.mul(e,t)));return io.mean(Zl(n),-1)}))},hinge:function(e,t){return(0,io.tidy)((function(){var n=io.maximum(0,io.sub(1,io.mul(e,t)));return io.mean(n,-1)}))},categoricalHinge:function(e,t){return(0,io.tidy)((function(){var n=io.sum(io.mul(e,t),-1),r=io.max(io.mul(io.sub(1,e),t),-1);return io.maximum(0,io.add(1,io.sub(r,n)))}))},logcosh:function(e,t){return(0,io.tidy)((function(){var n=Math.log(2),r=io.sub(t,e),a=io.sub(io.add(r,io.softplus(io.mul(-2,r))),n);return io.mean(a,-1)}))},categoricalCrossentropy:lh,sparseCategoricalCrossentropy:fh,binaryCrossentropy:hh,kullbackLeiblerDivergence:dh,poisson:function(e,t){return(0,io.tidy)((function(){var n=io.log(io.add(_l(),t));return io.mean(io.sub(t,io.mul(e,n)),-1)}))},cosineProximity:ph};function gh(e){if("string"===typeof e){if(e in vh)return vh[e];var t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new Mc(t)}return e}function mh(e,t){return(0,io.tidy)((function(){var n=io.mul(.5,io.onesLike(t)),r=Sl(io.greater(t,n),e.dtype);return io.mean(io.equal(e,r),-1)}))}function yh(e,t){return(0,io.tidy)((function(){return Sl(io.equal(io.argMax(e,-1),io.argMax(t,-1)),"float32")}))}function bh(e,t){return(0,io.tidy)((function(){return io.cast(io.sum(io.logicalAnd(io.equal(e,1),io.equal(t,1))),"float32")}))}function xh(e,t){return hh(e,t)}function wh(e,t){return e.rank===t.rank&&(e=io.squeeze(e,[e.rank-1])),(t=io.argMax(t,-1)).dtype!==e.dtype&&(t=io.cast(t,e.dtype)),io.cast(io.equal(e,t),"float32")}var kh=lh,_h=fh,Sh={binaryAccuracy:mh,categoricalAccuracy:yh,precision:function(e,t){return(0,io.tidy)((function(){var n=bh(e,t),r=function(e,t){return(0,io.tidy)((function(){return io.cast(io.sum(io.logicalAnd(io.equal(e,0),io.equal(t,1))),"float32")}))}(e,t),a=io.add(n,r);return io.cast(io.where(io.greater(a,0),io.div(n,a),0),"float32")}))},categoricalCrossentropy:kh,sparseCategoricalCrossentropy:_h,mse:oh,MSE:oh,mae:uh,MAE:uh,mape:sh,MAPE:sh,cosine:ph};function Ch(e){if("string"===typeof e&&e in Sh)return Sh[e];if("string"!==typeof e&&null!=e)return e;throw new Mc("Unknown metric ".concat(e))}function Eh(e){if(Rc(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"===typeof e)return e;for(var t,n=0,r=Object.keys(vh);n<r.length;n++){var a=r[n];if(vh[a]===e){t=a;break}}if(void 0!==t)return t;for(var i=0,o=Object.keys(Sh);i<o.length;i++){var u=o[i];if(Sh[u]===e){t=u;break}}return void 0!==t?t:e.name}var Ah=1048576;function Nh(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!Th(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){var r=JSON.stringify(e);r.length>Ah&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(r.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(Ah,"."))}}function Th(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if("string"!==typeof r)return!1;if(!Th(e[r]))return!1}return!0}if(Array.isArray(e)){var a,i=(0,B.Z)(e);try{for(i.s();!(a=i.n()).done;){if(!Th(a.value))return!1}}catch(u){i.e(u)}finally{i.f()}return!0}return!1}var o=typeof e;return"string"===o||"number"===o||"boolean"===o}function Mh(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,i=Fh(e),o=["Layer (type)","Input Shape","Output shape","Param #"];if(i?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map((function(e){return Math.floor(t*e)}))),!i)for(var u in o.push("Receives inputs"),r=[],e.nodesByDepth){var s;(s=r).push.apply(s,(0,M.Z)(e.nodesByDepth[u]))}a("_".repeat(t)),Ih(o,n,a),a("=".repeat(t));for(var c=e.layers,l=0;l<c.length;++l)i?Oh(c[l],n,a):Rh(c[l],n,r,a),a((l===c.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();var f=Dh(e),h=vf(e.nonTrainableWeights);a("Total params: ".concat(f+h)),a("Trainable params: ".concat(f)),a("Non-trainable params: ".concat(h)),a("_".repeat(t))}function Dh(e){return null!=e.collectedTrainableWeights?vf(e.collectedTrainableWeights):vf(e.trainableWeights)}function Fh(e){var t=!0,n=[],r=[];for(var a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(var i=0,o=n;i<o.length;i++){var u=o[i];if(u.length>1||1===u.length&&u[0].inboundLayers.length>1){t=!1;break}r.push.apply(r,(0,M.Z)(u))}if(t){var s,c=(0,B.Z)(e.layers);try{for(c.s();!(s=c.n()).done;){var l,f=s.value,h=!1,d=(0,B.Z)(f.inboundNodes);try{for(d.s();!(l=d.n()).done;){var p=l.value;if(-1!==r.indexOf(p)){if(h){t=!1;break}h=!0}}}catch(v){d.e(v)}finally{d.f()}if(!t)break}}catch(v){c.e(v)}finally{c.f()}}return t}function Ih(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="",a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=e[a]).slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function Oh(e,t,n){var r,a;try{a=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch(u){a="multiple"}try{r=JSON.stringify(e.outputShape)}catch(u){r="multiple"}var i=e.name,o=e.getClassName();Ih(["".concat(i," (").concat(o,")"),a,r,e.countParams().toString()],t,n)}function Rh(e,t,n,r){var a,i;try{i=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch(y){i="multiple"}try{a=JSON.stringify(e.outputShape)}catch(y){a="multiple"}var o,u=[],s=(0,B.Z)(e.inboundNodes);try{for(s.s();!(o=s.n()).done;){var c=o.value;if(!(null!=n&&n.length>0&&-1===n.indexOf(c)))for(var l=0;l<c.inboundLayers.length;++l){var f=c.inboundLayers[l].name,h=c.nodeIndices[l],d=c.tensorIndices[l];u.push("".concat(f,"[").concat(h,"][").concat(d,"]"))}}}catch(y){s.e(y)}finally{s.f()}var p=e.name,v=e.getClassName(),g=0===u.length?"":u[0];Ih(["".concat(p," (").concat(v,")"),i,a,e.countParams().toString(),g],t,r);for(var m=1;m<u.length;++m)Ih(["","","","",u[m]],t,r)}function Zh(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function Bh(e,t){if(null===e)return null;if("string"===typeof e)return Pc(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];Zh(t,a,i)?n.push(i):n.push(Bh(i,t))}return n}for(var o={},u=0,s=Object.keys(e);u<s.length;u++){var c=s[u],l=e[c];if("name"===c&&"string"===typeof l)o[c]=l;else{var f=Pc(c);o[f]=Bh(l,f)}}return o}function zh(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return Lc(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];Zh(t,a,i)?n.push(i):n.push(zh(i,t))}return n}for(var o={},u=0,s=Object.keys(e);u<s.length;u++){var c=s[u],l=e[c],f=Lc(c);o[f]="name"!==c&&"className"!==c||"string"!==typeof l?zh(l,c):l}return o}var Lh="4.17.0",Ph=function(e){var t=Object.keys(e);if(0===t.length)return!1;var n=t[0].split("/");return!isNaN(parseInt(n[n.length-1],10))},jh=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;if((0,D.Z)(this,n),(r=t.call(this,{})).containerNodes=new Set,r.name=e.name,null==r.name){var a=r.getClassName().toLowerCase();r.name=nl(a)}if(r.supportsMasking=!1,r.trainable_=!0,Array.isArray(e.inputs)?r.inputs=e.inputs.slice():r.inputs=[e.inputs],Array.isArray(e.outputs)?r.outputs=e.outputs.slice():r.outputs=[e.outputs],Hc(r.inputs).length!==r.inputs.length)throw new Mc("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(r.inputs.map((function(e){return e.name}))));Hc(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(r.outputs.map((function(e){return e.name})))),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[],r.internalContainerRefs=[];var i,o=(0,B.Z)(r.outputs);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.sourceLayer,c=u.nodeIndex,l=u.tensorIndex;r.outputLayers.push(s),r.outputLayersNodeIndices.push(c),r.outputLayersTensorIndices.push(l)}}catch(Se){o.e(Se)}finally{o.f()}var f,h=(0,B.Z)(r.inputs);try{for(h.s();!(f=h.n()).done;){var d=f.value,p=d.sourceLayer,v=d.nodeIndex,g=d.tensorIndex;Rc(0===v,"input layer has >1 nodes"),Rc(0===g,"input layer has >1 tensors"),r.inputLayers.push(p),r.inputLayersNodeIndices.push(v),r.inputLayersTensorIndices.push(g)}}catch(Se){h.e(Se)}finally{h.f()}r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var m=0;m<r.inputLayers.length;m++){var y=r.inputLayers[m];if(!(y instanceof Af))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(m," (0-based) originates ")+"from layer type ".concat(y.getClassName(),"."));r.inputNames.push(y.name),r.feedInputShapes.push(y.batchInputShape),r.feedInputNames.push(y.name)}var b,x=(0,B.Z)(r.outputLayers);try{for(x.s();!(b=x.n()).done;){var w=b.value;r.outputNames.push(w.name)}}catch(Se){x.e(Se)}finally{x.f()}r.internalInputShapes=r.inputs.map((function(e){return e.shape})),r.internalOutputShapes=r.outputs.map((function(e){return e.shape}));var k,_={},S={},C={},E={},A={},N=[],T=function e(t,a,i,o,u,s){null!=o&&null!=u&&null!=s||(o=t.sourceLayer,u=t.nodeIndex,s=t.tensorIndex);var c=o.inboundNodes[u];if(-1!==i.indexOf(c))throw new Tc("The tensor ".concat(t.name,' at layer "').concat(o.name,'" ')+"is part of a cycle.");if(-1===a.indexOf(c)){r.containerNodes.add(n.nodeKey(o,u)),o.id in A||(A[o.id]=Object.keys(A).length),-1===i.indexOf(c)&&i.push(c);for(var l=c.inboundLayers.length,f=0;f<l;f++){e(c.inputTensors[f],a,i,c.inboundLayers[f],c.nodeIndices[f],c.tensorIndices[f])}for(a.push(c);i.indexOf(c)>=0;)i.splice(i.indexOf(c),1);N.push(c)}},M=[],F=[],I=(0,B.Z)(r.outputs);try{for(I.s();!(k=I.n()).done;){T(k.value,M,F)}}catch(Se){I.e(Se)}finally{I.f()}var O,R=N.slice().reverse(),Z=(0,B.Z)(R);try{for(Z.s();!(O=Z.n()).done;){var z=O.value;S[z.id]=z,z.id in _||(_[z.id]=0);var L=_[z.id],P=null==C[z.outboundLayer.id]?0:C[z.outboundLayer.id];L=Math.max(L,P),C[z.outboundLayer.id]=L,E[z.outboundLayer.id]=z.outboundLayer,_[z.id]=L;for(var j=0;j<z.inboundLayers.length;j++){var U=z.inboundLayers[j],W=z.nodeIndices[j],V=U.inboundNodes[W],q=null==_[V.id]?0:_[V.id];_[V.id]=Math.max(L+1,q),S[V.id]=V}}}catch(Se){Z.e(Se)}finally{Z.f()}var H={};for(var G in _){var X=_[G];X in H||(H[X]=[]),H[X].push(S[G])}var Y={};for(var K in C){var $=C[K];$ in Y||(Y[$]=[]),Y[$].push(E[K])}var Q=Object.keys(Y).map((function(e){return parseInt(e,10)})).sort(qc);r.layers=[];var J,ee=(0,B.Z)(Q);try{for(ee.s();!(J=ee.n()).done;){var te=Y[J.value];te.sort((function(e,t){var n=A[e.id],r=A[t.id];return n<r?-1:n>r?1:0}));var ne,re=(0,B.Z)(te);try{for(re.s();!(ne=re.n()).done;){var ae=ne.value;ae instanceof n&&r.internalContainerRefs.push(ae),r.layers.push(ae)}}catch(Se){re.e(Se)}finally{re.f()}}}catch(Se){ee.e(Se)}finally{ee.f()}r.layersByDepth=Y,Q=Object.keys(H).map((function(e){return parseInt(e,10)})).sort(qc);var ie,oe=r.inputs.slice(),ue=[],se=(0,B.Z)(Q);try{for(se.s();!(ie=se.n()).done;){var ce,le=ie.value,fe=(0,B.Z)(H[le]);try{for(fe.s();!(ce=fe.n()).done;){var he=ce.value,de=he.outboundLayer;if(null!=de){var pe,ve=(0,B.Z)(he.inputTensors);try{for(ve.s();!(pe=ve.n()).done;){var ge=pe.value;if(-1===oe.indexOf(ge))throw new Tc("Graph disconnected: cannot obtain value for tensor ".concat(ge)+' at layer "'.concat(de.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(ue))}}catch(Se){ve.e(Se)}finally{ve.f()}var me,ye=(0,B.Z)(he.outputTensors);try{for(ye.s();!(me=ye.n()).done;){var be=me.value;oe.push(be)}}catch(Se){ye.e(Se)}finally{ye.f()}ue.push(de.name)}}}catch(Se){fe.e(Se)}finally{fe.f()}}}catch(Se){se.e(Se)}finally{se.f()}r.nodesByDepth=H;var xe,we=r.layers.map((function(e){return e.name})),ke=(0,B.Z)(we);try{var _e=function(){var e=xe.value,t=we.filter((function(t){return t===e})).length;if(1!==t)throw new Tc('The name "'.concat(e,'" is used ').concat(t," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(we))};for(ke.s();!(xe=ke.n()).done;)_e()}catch(Se){ke.e(Se)}finally{ke.f()}return r.outboundNodes=[],r.inboundNodes=[],new _f({outboundLayer:(0,Ac.Z)(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map((function(e){return null})),outputMasks:r.outputs.map((function(e){return null})),inputShapes:r.inputs.map((function(e){return e.shape})),outputShapes:r.outputs.map((function(e){return e.shape}))}),r.built=!0,r._refCount=1,r}return(0,F.Z)(n,[{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){var t,n=(0,B.Z)(this.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.numDisposedVariables+=r.dispose().numDisposedVariables}}catch(u){n.e(u)}finally{n.f()}var a,i=(0,B.Z)(this.internalContainerRefs);try{for(i.s();!(a=i.n()).done;){var o=a.value;e.numDisposedVariables+=o.dispose().numDisposedVariables}}catch(u){i.e(u)}finally{i.f()}}return e.refCountAfterDispose=this._refCount,e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.layers.forEach((function(t){t._trainableWeights.forEach((function(t){return t.trainable=e}))})),this.trainable_=e}},{key:"trainableWeights",get:function(){if(this._trainableWeights.length>0)throw new Mc("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];var e,t=[],n=(0,B.Z)(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=t.concat(r.trainableWeights)}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=(0,B.Z)(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,M.Z)(r.nonTrainableWeights))}}catch(s){n.e(s)}finally{n.f()}if(!this.trainable){var a,i=[],o=(0,B.Z)(this.layers);try{for(o.s();!(a=o.n()).done;){var u=a.value;i.push.apply(i,(0,M.Z)(u.trainableWeights))}}catch(s){o.e(s)}finally{o.f()}return i.concat(t)}return t}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"loadWeights",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={},r=0,a=Ph(e);a&&this.parseWeights(e);var i,o=(0,B.Z)(this.layers);try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=(0,B.Z)(s.weights.entries());try{for(c.s();!(u=c.n()).done;){var l=(0,C.Z)(u.value,2),f=l[0],h=l[1],d=a?"".concat(h.name.split("/").slice(0,-1).join("/")+"/").concat(f):h.originalName;if(null!=n[d])throw new Mc("Duplicate weight name: ".concat(d));n[d]=h,r++}}catch(w){c.e(w)}finally{c.f()}}}catch(w){o.e(w)}finally{o.f()}var p=[];for(var v in e){var g=v;if(null==n[v]){var m=v.split("/"),y=m.slice(0,-2).concat([m[m.length-1]]);g=y.join("/")}if(null!=n[g])p.push([n[g],e[v]]);else if(t)throw new Mc("Provided weight data has no target variable: ".concat(v));delete n[g]}if(t){var b=[];for(var x in n)b.push(x);if(b.length>0)throw new Mc("".concat(b.length," of ").concat(r," weights are not set: ")+"".concat(b))}bf(p)}},{key:"parseWeights",value:function(e){var t=function(t){var n=t.split("/"),r=["vars","layer_checkpoint_dependencies"],a=n.map((function(e){return e.startsWith("_")?e.slice(1):e})).filter((function(e){return!r.includes(e)})).join("/");a!==t&&(e[a]=e[t],delete e[t])};for(var n in Object.keys(e))t(n)}},{key:"updatedConfig",value:function(){var e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(Lh),t.backend="TensorFlow.js",t}},{key:"toJSON",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=zh(this.updatedConfig());return t?JSON.stringify(n):n}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){e=zc(e);for(var r=new Tf,a=0;a<n.inputs.length;++a)r.add(n.inputs[a],e[a]);return Ff(n.outputs,r,t)}))}},{key:"computeMask",value:function(e,t){var n=this;return(0,io.tidy)((function(){var r;return e=zc(e),r=null==t?Oc(null,e.length):zc(t),n.runInternalGraph(e,r)[1]}))}},{key:"computeOutputShape",value:function(e){var t=hf(e);if(t.length!==this.inputLayers.length)throw new Mc("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));for(var n={},r=0;r<t.length;r++){var a=this.inputLayers[r],i=t[r];n[a.name+"_0_0"]=i}var o=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(qc);if(o.length>1){var u,s=(0,B.Z)(o);try{for(s.s();!(u=s.n()).done;){var c,l=u.value,f=this.nodesByDepth[l],h=(0,B.Z)(f);try{for(h.s();!(c=h.n()).done;){var d=c.value,p=d.outboundLayer;if(-1===this.inputLayers.map((function(e){return e.id})).indexOf(p.id)){for(var v=[],g=0;g<d.inboundLayers.length;g++){var m=d.inboundLayers[g],y=d.nodeIndices[g],b=d.tensorIndices[g],x=n["".concat(m.name,"_").concat(y,"_").concat(b)];v.push(x)}for(var w=hf(p.computeOutputShape(Bc(v))),k=p.inboundNodes.indexOf(d),_=0;_<w.length;_++){n["".concat(p.name,"_").concat(k,"_").concat(_)]=w[_]}}}}catch(I){h.e(I)}finally{h.f()}}}catch(I){s.e(I)}finally{s.f()}}for(var S=[],C=[],E=0;E<this.outputLayers.length;E++){var A=this.outputLayers[E],N=this.outputLayersNodeIndices[E],T=this.outputLayersTensorIndices[E],M="".concat(A.name,"_").concat(N,"_").concat(T);C.push(M)}for(var D=0;D<C.length;D++){var F=C[D];Rc(F in n),S.push(n[F])}return Bc(S)}},{key:"runInternalGraph",value:function(e,t){null==t&&(t=Oc(null,e.length));for(var n={},r=0;r<this.inputs.length;++r){var a=this.inputs[r],i=e[r],o=t[r];n[a.id]=[i,o]}var u,s=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(qc),c=(0,B.Z)(s);try{for(c.s();!(u=c.n()).done;){var l,f=u.value,h=this.nodesByDepth[f],d=(0,B.Z)(h);try{for(d.s();!(l=d.n()).done;){var p,v=l.value,g=v.outboundLayer,m=v.inputTensors,y=v.outputTensors,b=new Array,x=(0,B.Z)(m);try{for(x.s();!(p=x.n()).done;){var w=p.value;w.id in n&&b.push(n[w.id])}}catch(q){x.e(q)}finally{x.f()}if(b.length===m.length){var k={},_=void 0,S=void 0,E=void 0,A=void 0;if(null!=v.callArgs&&(k=v.callArgs),1===b.length){var N=(0,C.Z)(b[0],2),T=N[0],M=N[1];null==k.mask&&(k.mask=M),E=zc(g.call(T,k)),A=zc(g.computeMask(T,M)),_=[T],S=[M]}else _=b.map((function(e){return e[0]})),S=b.map((function(e){return e[1]})),null==k.mask&&(k.mask=S),E=zc(g.call(_,k)),A=zc(g.computeMask(_,S));if(g.activityRegularizer)throw new Dc("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(var D=0;D<y.length;++D){var F=y[D],I=E[D],O=A[D];n[F.id]=[I,O]}}}}catch(q){d.e(q)}finally{d.f()}}}catch(q){c.e(q)}finally{c.f()}var R,Z=[],z=[],L=[],P=(0,B.Z)(this.outputs);try{for(P.s();!(R=P.n()).done;){var j=R.value;Rc(j.id in n,"Could not compute output ".concat(j.name," : ").concat(j.id));var U=(0,C.Z)(n[j.id],2),W=U[0],V=U[1];L.push(W.shape),Z.push(W),z.push(V)}}catch(q){P.e(q)}finally{P.f()}return[Z,z,L]}},{key:"buildNodeConversionMap",value:function(e){var t,r,a={},i=(0,B.Z)(this.layers);try{for(i.s();!(r=i.n()).done;){var o=r.value;t=o instanceof n?1:0;for(var u=0;u<o.inboundNodes.length;u++){var s=n.nodeKey(o,u);this.containerNodes.has(s)&&(a[s]=t,t+=1)}}}catch(c){i.e(c)}finally{i.f()}return a}},{key:"getLayer",value:function(e,t){if(null!=t)return this.findLayer(t);if(null==e)throw new Mc("Provide either a layer name or layer index");if("number"===typeof e)return this.findLayer(e);var n,r=(0,B.Z)(this.layers);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.name===e)return a}}catch(i){r.e(i)}finally{r.f()}throw new Mc("No such layer: ".concat(e))}},{key:"findLayer",value:function(e){if(this.layers.length<=e)throw new Mc("Was asked to retrieve layer at index ".concat(e,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[e]}},{key:"calculateLosses",value:function(){var e=this;return(0,io.tidy)((function(){var t,r=[],a=(0,B.Z)(e.layers);try{for(a.s();!(t=a.n()).done;)for(var i=t.value,o=0;o<i.inboundNodes.length;++o){var u=n.nodeKey(i,o);e.containerNodes.has(u)&&r.push.apply(r,(0,M.Z)(i.calculateLosses()))}}catch(s){a.e(s)}finally{a.f()}return r}))}},{key:"getConfig",value:function(){var e,t={name:this.name},r=this.buildNodeConversionMap(this.layers),a=[],i=(0,B.Z)(this.layers);try{for(i.s();!(e=i.n()).done;){for(var o=e.value,u=o.getClassName(),s=o.getConfig(),c=[],l=0;l<o.inboundNodes.length;l++){var f=o.inboundNodes[l],h=n.nodeKey(o,l),d={};if(this.containerNodes.has(h)){if(f.callArgs)try{JSON.stringify(f.callArgs),d=f.callArgs}catch(R){console.warn("Layer ".concat(o.name," was passed ")+"non-serializable keyword arguments: "+"".concat(f.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),d={}}if(f.inboundLayers.length>0){for(var p=[],v=0;v<f.inboundLayers.length;v++){var g=f.inboundLayers[v],m=f.nodeIndices[v],y=f.tensorIndices[v],b=r[n.nodeKey(g,m)];null==b&&(b=0),p.push([g.name,b,y,d])}c.push(p)}}}var x={};x.name=o.name,x.className=u,x.config=s,x.inboundNodes=c,a.push(x)}}catch(R){i.e(R)}finally{i.f()}t.layers=a;for(var w=[],k=0;k<this.inputLayers.length;k++){var _=this.inputLayers[k],S=this.inputLayersNodeIndices[k],C=n.nodeKey(_,S);if(this.containerNodes.has(C)){var E=r[C];null!==E&&void 0!==E||(E=0);var A=this.inputLayersTensorIndices[k];w.push([_.name,E,A])}}t.inputLayers=w;for(var N=[],T=0;T<this.outputLayers.length;T++){var M=this.outputLayers[T],D=this.outputLayersNodeIndices[T],F=n.nodeKey(M,D);if(this.containerNodes.has(F)){var I=r[F];null!==I&&void 0!==I||(I=0);var O=this.outputLayersTensorIndices[T];N.push([M.name,I,O])}}return t.outputLayers=N,t}},{key:"stateful",get:function(){if(this._stateful)throw new Mc("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");var e,t=(0,B.Z)(this.layers);try{for(t.s();!(e=t.n()).done;){if(e.value.stateful)return!0}}catch(n){t.e(n)}finally{t.f()}return!1}},{key:"resetStates",value:function(){var e=this;(0,io.tidy)((function(){e.layers.forEach((function(e){e.stateful&&e.resetStates()}))}))}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={},a={};function i(e,t){e.name in a?a[e.name].push(t):a[e.name]=[t]}function o(e,t){var n,a,o=[],u=(0,B.Z)(t);try{for(u.s();!(a=u.n()).done;){var s=a.value,c=s[0],l=s[1],f=s[2];if(n=null==s[3]?{}:s[3],!(c in r))return void i(e,t);var h=r[c];if(h.inboundNodes.length<=l)return void i(e,t);var d=h.inboundNodes[l];o.push(d.outputTensors[f])}}catch(p){u.e(p)}finally{u.f()}o.length>0&&e.apply(Bc(o),n)}function u(e){var a=e.name,o=ah(e,null!=t.customObjects?t.customObjects:{});o.setFastWeightInitDuringBuild(n),r[a]=o,e.inboundNodes.forEach((function(e){if(!(e instanceof Array))throw new Mc("Corrupted configuration, expected array for nodeData: ".concat(e));i(o,e)}))}var s,c=t.name,l=t.layers,f=(0,B.Z)(l);try{for(f.s();!(s=f.n()).done;){var h=s.value;u(h)}}catch(U){f.e(U)}finally{f.f()}for(;!Gc(a);){var d,p=(0,B.Z)(l);try{for(p.s();!(d=p.n()).done;){var v=d.value,g=r[v.name];if(g.name in a){var m=a[g.name];delete a[g.name];var y,b=(0,B.Z)(m);try{for(b.s();!(y=b.n()).done;){var x=y.value;o(g,x)}}catch(U){b.e(U)}finally{b.f()}}}}catch(U){p.e(U)}finally{p.f()}}var w,k=[],_=[],S=t.inputLayers,C=(0,B.Z)(S);try{for(C.s();!(w=C.n()).done;){var E=w.value,A=E[0],N=E[1],T=E[2];Rc(A in r);var M=r[A],D=M.inboundNodes[N].outputTensors;k.push(D[T])}}catch(U){C.e(U)}finally{C.f()}var F,I=t.outputLayers,O=(0,B.Z)(I);try{for(O.s();!(F=O.n()).done;){var R=F.value,Z=R[0],z=R[1],L=R[2];Rc(Z in r);var P=r[Z],j=P.inboundNodes[z].outputTensors;_.push(j[L])}}catch(U){O.e(U)}finally{O.f()}return new e({inputs:k,outputs:_,name:c})}}]),n}(Cf);function Uh(e,t,n){var r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return null}));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," ")+"element(s), but the model has ".concat(r," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){var a=[];return t.forEach((function(t){t in e?a.push(e[t]):a.push(null)})),a}throw new Error("The model has multiple (".concat(r,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(r," elements or an object with ").concat(t," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(e)))}function Wh(e,t){return Uh(e,t,"classWeight")}function Vh(e,t,n,r){return qh.apply(this,arguments)}function qh(){return(qh=(0,Bi.Z)(A().mark((function e(t,n,r,a){var i,o,u;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&null==a){e.next=2;break}throw new Error("Support sampleWeight is not implemented yet");case 2:if(null==r){e.next=15;break}return i=(0,io.tidy)((function(){if(1===t.shape.length)return(0,io.clone)(t);if(2===t.shape.length){if(t.shape[1]>1){return(0,io.argMax)(t,1)}if(1===t.shape[1])return(0,io.reshape)(t,[t.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(t.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(t.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")})),e.t0=Array,e.next=7,i.data();case 7:return e.t1=e.sent,o=e.t0.from.call(e.t0,e.t1),(0,io.dispose)(i),u=[],o.forEach((function(e){if(null==r[e])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(e," exists in the data but not in ")+"classWeight");u.push(r[e])})),e.abrupt("return",(0,io.tensor1d)(u,"float32"));case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hh(e,t){return(0,io.mul)(e,t)}function Gh(e,t){var n,r,a=t;n=a.xs,r=a.ys,io.util.assert(null!=n&&null!=r,(function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t)}));var i=Xh("input",e.inputNames,n),o=Xh("output",e.outputNames,r),u=i[0].shape[0];io.util.assert(i.length===e.inputs.length,(function(){return"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(i.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")")})),io.util.assert(o.length===e.outputs.length,(function(){return"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(o.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")")}));for(var s=function(t){io.util.assert(i[t].shape[0]===u,(function(){return"Batch size mismatch: input "+"".concat(e.inputNames[t]," has ").concat(i[t].shape[0],"; ")+"expected  ".concat(u," based on input ").concat(e.inputNames[0],".")}))},c=0;c<i.length;c++)s(c);for(var l=function(t){io.util.assert(o[t].shape[0]===u,(function(){return"Batch size mismatch: output "+"".concat(e.outputNames[t]," has ").concat(o[t].shape[0],"; ")+"expected  ".concat(u," based on input ").concat(e.inputNames[0],".")}))},f=0;f<o.length;f++)l(f);return{xs:i,ys:o}}function Xh(e,t,n){if(n instanceof io.Tensor)return[n];if(Array.isArray(n))return io.util.assert(n.length===t.length,(function(){return"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")})),n;var r,a=[],i=(0,B.Z)(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(null==n[o])throw new Mc("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(o,"'."));a.push(n[o])}}catch(u){i.e(u)}finally{i.f()}return a}function Yh(e){if(3===e.length)throw new Dc("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}function Kh(e,t,n){return $h.apply(this,arguments)}function $h(){return $h=(0,Bi.Z)(A().mark((function e(t,n,r){var a,i,o,u,s,c,l,f,h,d,p,v,g,m,y,b,x,w,k,_,S,C,E,N,T,M,D,F,I,O,R,Z,B;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=r.batchesPerEpoch,io.util.assert(null!=t.optimizer,(function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."})),io.util.assert(null!=r,(function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."})),io.util.assert(null!=r.epochs&&r.epochs>0&&Number.isInteger(r.epochs),(function(){return"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(r.epochs)})),io.util.assert(!a||r.batchesPerEpoch>0&&Number.isInteger(r.batchesPerEpoch),(function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(r.batchesPerEpoch)})),io.util.assert(null==r.validationSplit,(function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."})),!t.isTraining){e.next=8;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 8:return t.isTraining=!0,e.prev=9,(i=null!=r.validationData)&&(Jh(r.validationData)?io.util.assert(null==r.validationBatches||r.validationBatches>0&&Number.isInteger(r.validationBatches),(function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(r.validationBatches)})):(s=Yh(r.validationData),o=s.xs,u=s.ys)),c=t.makeTrainFunction(),l=t.getDedupedMetricsNames(),f=i?l.slice().concat(l.map((function(e){return"val_"+e}))):l.slice(),h=th(r.callbacks,r.yieldEvery),d=null==r.verbose?1:r.verbose,p=rh(h,d,r.epochs,null,null,Qh(n,r),null,i,f),v=p.callbackList,g=p.history,v.setModel(t),t.history=g,e.next=22,v.onTrainBegin();case 22:return t.stopTraining_=!1,m=null==r.initialEpoch?0:r.initialEpoch,e.next=26,n.iterator();case 26:y=e.sent;case 27:if(!(m<r.epochs)){e.next=98;break}return b={},e.next=31,v.onEpochBegin(m);case 31:if(x=0,w=0,a){e.next=37;break}return e.next=36,n.iterator();case 36:y=e.sent;case 37:if(a&&!(x<r.batchesPerEpoch)){e.next=91;break}return e.next=40,y.next();case 40:if(k=e.sent,!a||!k.done){e.next=44;break}return console.warn("You provided `batchesPerEpoch` as "+"".concat(r.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(x," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(r.batchesPerEpoch*r.epochs," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("break",91);case 44:if(null==k.value){e.next=73;break}return _=Gh(t,k.value),S=_.xs,C=_.ys,(E={}).batch=w,E.size=S[0].shape[0],e.next=51,v.onBatchBegin(w,E);case 51:if(N=[],null==r.classWeight){e.next=64;break}T=Wh(r.classWeight,t.outputNames),M=0;case 55:if(!(M<T.length)){e.next=64;break}return e.t0=N,e.next=59,Vh(C[M],null,T[M]);case 59:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 61:++M,e.next=55;break;case 64:for(D=S.concat(C).concat(N),F=c(D),io.dispose(D),I=0;I<l.length;++I)O=l[I],R=F[I],E[O]=R,io.keep(R);return e.next=70,v.onBatchEnd(w,E);case 70:Yf(E),w++,x++;case 73:if(!(a?x>=r.batchesPerEpoch:k.done)){e.next=87;break}if(!i){e.next=86;break}if(Z=void 0,!Jh(r.validationData)){e.next=84;break}return e.t2=zc,e.next=80,t.evaluateDataset(r.validationData,{batches:r.validationBatches});case 80:e.t3=e.sent,Z=(0,e.t2)(e.t3),e.next=85;break;case 84:Z=zc(t.evaluate(o,u,{batchSize:null==r.validationBatchSize?32:r.validationBatchSize,verbose:0}));case 85:for(B=0;B<t.metricsNames.length;++B)b["val_".concat(t.metricsNames[B])]=Z[B];case 86:return e.abrupt("break",91);case 87:if(!t.stopTraining_){e.next=89;break}return e.abrupt("break",91);case 89:e.next=37;break;case 91:return e.next=93,v.onEpochEnd(m,b);case 93:if(m++,!t.stopTraining_){e.next=96;break}return e.abrupt("break",98);case 96:e.next=27;break;case 98:return e.next=100,v.onTrainEnd();case 100:return e.next=102,t.history.syncData();case 102:return e.abrupt("return",t.history);case 103:return e.prev=103,t.isTraining=!1,e.finish(103);case 106:case"end":return e.stop()}}),e,null,[[9,,103,106]])}))),$h.apply(this,arguments)}function Qh(e,t){var n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function Jh(e){return"function"===typeof e.iterator}function ed(e){return"function"===typeof e.next}function td(e,t,n){return nd.apply(this,arguments)}function nd(){return nd=(0,Bi.Z)(A().mark((function e(t,n,r){var a,i,o,u,s,c,l,f,h;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=(r=r||{}).batches,i=t.testFunction,o=[],!(r.verbose>0)){e.next=6;break}throw new Dc("Verbose mode is not implemented yet.");case 6:if(io.util.assert(!a||r.batches>0&&Number.isInteger(r.batches),(function(){return"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(r.batches))})),!ed(n)){e.next=11;break}e.t0=n,e.next=14;break;case 11:return e.next=13,n.iterator();case 13:e.t0=e.sent;case 14:u=e.t0,s=0,c=0,l=A().mark((function e(){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.next();case 2:if(n=e.sent,o=io.tidy((function(){return n.value&&function(){var e=Gh(t,n.value),r=e.xs,a=e.ys,u=r.concat(a),l=io.tidy((function(){return i(u)}));if(io.dispose(u),0===c)for(var f=0;f<l.length;++f)o.push((0,io.scalar)(0));for(var h=u[0].shape[0],d=function(e){var t=l[e],n=o[e];o[e]=io.tidy((function(){return io.add(o[e],io.mul(h,t))})),c>0&&io.dispose(n)},p=0;p<l.length;++p)d(p);io.dispose(l),s+=h,++c}(),o})),!n.done){e.next=7;break}return a&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(r.batches," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("return","break");case 7:case"end":return e.stop()}}),e)}));case 18:if(a&&!(c<r.batches)){e.next=25;break}return e.delegateYield(l(),"t1",20);case 20:if("break"!==e.t1){e.next=23;break}return e.abrupt("break",25);case 23:e.next=18;break;case 25:for(f=0;f<o.length;++f)h=o[f],o[f]=io.div(o[f],s),io.dispose(h);return e.abrupt("return",Bc(o));case 27:case"end":return e.stop()}}),e)}))),nd.apply(this,arguments)}function rd(e){io.util.assert(e>0&&Number.isInteger(e),(function(){return"batchSize is required to be a positive integer, but got ".concat(e)}))}function ad(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((function(e){return Al(e,t,n-t)})):Al(e,t,n-t)}function id(e,t){return io.tidy((function(){return null==e?null:Array.isArray(e)?e.map((function(e){return id(e,t)})):Rl(e,"int32"===t.dtype?t:io.cast(t,"int32"))}))}function od(e,t){for(var n=[],r=0,a=null;r<e;)(a=r+t)>=e&&(a=e),n.push([r,a]),r=a;return n}function ud(e){var t=[];e instanceof io.Tensor&&(e=[e]);for(var n=0;n<e.length;++n){var r=e[n];if(1===r.rank)t.push(Cl(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function sd(e,t){if(null!=e){var n=[];if(t instanceof io.Tensor)n.push(t.id);else if(Array.isArray(t))t.forEach((function(e){return n.push(e.id)}));else if(null!=t)for(var r in t){var a=t[r];n.push(a.id)}var i=[];if(e instanceof io.Tensor)-1===n.indexOf(e.id)&&i.push(e);else if(Array.isArray(e))e.forEach((function(e){-1===n.indexOf(e.id)&&i.push(e)}));else if(null!=e)for(var o in e){var u=e[o];-1===n.indexOf(u.id)&&i.push(u)}i.forEach((function(e){e.isDisposed||e.dispose()}))}}function cd(e){return Array.isArray(e)}function ld(e){return!function(e){return e instanceof io.Tensor}(e)&&!cd(e)}function fd(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){var o=!1;if(cd(e)&&e.length>0)o=!0;else if(ld(e)){for(var u in e)if(e.hasOwnProperty(u)){o=!0;break}}else o=!0;if(o)throw new Mc("Error when checking model ".concat(i," expected no data, ")+"but got ".concat(e))}return[]}if(null==e)return t.map((function(e){return null}));if(ld(e)){r=[];var s,c=(0,B.Z)(t);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(null==e[l])throw new Mc('No data provided for "'.concat(l,'". Need data for each key in: ')+"".concat(t));r.push(e[l])}}catch(g){c.e(g)}finally{c.f()}}else if(cd(e)){if(e.length!==t.length)throw new Mc("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));r=e}else{if(t.length>1)throw new Mc("The model ".concat(i," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));r=[e]}if(r=ud(r),null!=n)for(var f=0;f<t.length;++f)if(null!=n[f]){var h=r[f];if(h.shape.length!==n[f].length)throw new Mc("Error when checking ".concat(i,": expected ").concat(t[f]," ")+"to have ".concat(n[f].length," dimension(s). but got array with ")+"shape ".concat(h.shape));for(var d=0;d<n[f].length;++d)if(0!==d||a){var p=h.shape[d],v=n[f][d];if(null!=v&&v>=0&&p!==v)throw new Mc("".concat(i," expected a batch of elements where each ")+"example has shape [".concat(n[f].slice(1,n[f].length),"] ")+"(i.e.,tensor shape [*,".concat(n[f].slice(1,n[f].length),"])")+" but the ".concat(i," received an input with ").concat(h.shape[0])+" examples, each with shape [".concat(h.shape.slice(1,h.shape.length),"]")+" (tensor shape [".concat(h.shape,"])"))}}return r}function hd(e,t,n){var r=Hc(e.map((function(e){return e.shape[0]})));r.sort();var a=Hc(t.map((function(e){return e.shape[0]})));if(a.sort(),r.length>1)throw new Mc("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map((function(e){return e.shape})))));if(a.length>1)throw new Mc("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map((function(e){return e.shape})))));if(r.length>0&&a.length>0&&!io.util.arraysEqual(r,a))throw new Mc("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(r[0]," input sample(s) and ").concat(a[0]," target ")+"sample(s).")}function dd(e,t,n){for(var r=[oh,hh,lh],a=0;a<e.length;++a){var i=e[a],o=t[a],u=n[a];if(null!=o){if(o===lh&&1===i.shape[i.shape.length-1])throw new Mc("You are passing a target array of shape ".concat(i.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(o))for(var s=i.shape.slice(1),c=u.slice(1),l=0;l<s.length;++l){var f=s[l],h=c[l];if(null!=h&&f!==h)throw new Mc("A target Tensor with shape ".concat(i.shape," was passed for an ")+"output of shape ".concat(u,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}function pd(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new Mc("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new Mc("The model expects ".concat(t.length," ").concat(i," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(var o=0;o<t.length;++o)if(null!=n[o]){var u=r[o];if(u.shape.length!==n[o].length)throw new Mc("Error when checking ".concat(i,": expected ").concat(t[o]," ")+"to have ".concat(n[o].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(u.shape)));for(var s=0;s<n[o].length;++s)if(0!==s||a){var c=u.shape[s],l=n[o][s];if(null!=l&&l!==c)throw new Mc("Error when checking ".concat(i,": expected ")+"".concat(t[o]," to have shape ").concat(JSON.stringify(n[o])," but ")+"got array with shape ".concat(JSON.stringify(u.shape),"."))}}}var vd=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,e)).isTraining=!1,r}return(0,F.Z)(n,[{key:"summary",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new Mc("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");Mh(this,e,t,n)}},{key:"compile",value:function(e){var t=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){var t={Adagrad:function(){return io.train.adagrad(.01)},Adadelta:function(){return io.train.adadelta(1,.95,_l())},Adam:function(){return io.train.adam(.001,.9,.999,_l())},Adamax:function(){return io.train.adamax(.002,.9,.999,_l(),0)},RMSProp:function(){return io.train.rmsprop(.001,.9,0,_l())},SGD:function(){return io.train.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new Mc("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof io.Optimizer))throw new Mc("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}var n=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new Mc("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));var r=e.loss;n=r.map((function(e){return gh(e)}))}else{var a=gh(e.loss);this.outputs.forEach((function(e){n.push(a)}))}else{for(var i in e.loss=e.loss,e.loss)if(-1===this.outputNames.indexOf(i))throw new Mc('Unknown entry in loss dictionary: "'.concat(i,'". ')+"Only expected the following keys: ".concat(this.outputNames));var o,u=(0,B.Z)(this.outputNames);try{for(u.s();!(o=u.n()).done;){var s=o.value;null==e.loss[s]&&console.warn('Output "'.concat(s,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(s," during training")),n.push(gh(e.loss[s]))}}catch(v){u.e(v)}finally{u.f()}}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var c=0;c<this.outputs.length;++c){var l=this.internalOutputShapes[c],f=this.outputNames[c];this.feedOutputNames.push(f),this.feedOutputShapes.push(l),this.feedLossFns.push(this.lossFunctions[c])}var h=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],dl("loss",(function(){for(var e=0;e<t.outputs.length;++e)if(-1===h.indexOf(e)){var n=t.lossFunctions[e];t.outputs.length>1&&(t.metricsTensors.push([n,e]),t.metricsNames.push(t.outputNames[e]+"_loss"))}}));var d=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return[]}));var n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map((function(e){return n}));var r,a=[],i=(0,B.Z)(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,u=n.hasOwnProperty(o)?n[o]:[];Array.isArray(u)||(u=[u]),a.push(u)}}catch(v){i.e(v)}finally{i.f()}return a}(e.metrics,this.outputNames),p=function(e,n,r){t.outputNames.length>1&&(n=t.outputNames[e]+"_"+n),t.metricsNames.push(n),t.metricsTensors.push([r,e])};dl("metric",(function(){for(var e=function(e){if(-1!==h.indexOf(e))return"continue";!function(n){var r,a,i,o,u=(0,B.Z)(n);try{for(u.s();!(o=u.n()).done;){var s=o.value;if("string"===typeof s&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(s)){var c=t.internalOutputShapes[e];1===c[c.length-1]||t.lossFunctions[e]===hh?-1!==["accuracy","acc"].indexOf(s)?a=mh:-1!==["crossentropy","ce"].indexOf(s)&&(a=xh):t.lossFunctions[e]===fh?-1!==["accuracy","acc"].indexOf(s)?a=wh:-1!==["crossentropy","ce"].indexOf(s)&&(a=_h):-1!==["accuracy","acc"].indexOf(s)?a=yh:-1!==["crossentropy","ce"].indexOf(s)&&(a=kh);var l=void 0;-1!==["accuracy","acc"].indexOf(s)?l="acc":-1!==["crossentropy","ce"].indexOf(s)&&(l="ce"),i=a,r=""+l}else{var f=Ch(s);i=f,r=""+Eh(s)}var h=void 0;dl(r,(function(){h=i})),p(e,r,h)}}catch(v){u.e(v)}finally{u.f()}}(d[e])},n=0;n<t.outputs.length;++n)e(n)})),this.collectedTrainableWeights=this.trainableWeights}},{key:"checkTrainableWeightsConsistency",value:function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null==n.batchSize?32:n.batchSize;rd(r);var a=!0,i=this.standardizeUserDataXY(e,t,a,r);try{var o=i[0].concat(i[1]);this.makeTestFunction();var u=this.testFunction,s=this.testLoop(u,o,r,n.verbose,n.steps);return Bc(s)}finally{sd(i[0],e),sd(i[1],t)}}},{key:"evaluateDataset",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.makeTestFunction(),e.abrupt("return",td(this,t,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"checkNumSamples",value:function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new Mc("If ".concat(a," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(t))}else{if(null==e)throw new Mc("Either the input data should have a defined shape, or "+"".concat(a," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}},{key:"execute",value:function(e,t){if(Array.isArray(t)&&0===t.length)throw new Mc("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(t),r=n?t:[t],a=this.retrieveSymbolicTensors(r),i=new Tf;if(e instanceof io.Tensor&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new Mc("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(var o=0;o<this.inputs.length;++o)i.add(this.inputs[o],e[o])}else{var u,s=(0,B.Z)(this.inputs);try{for(s.s();!(u=s.n()).done;){var c=u.value,l=e[c.name];if(null==l)throw new Mc("No value is provided for the model's input ".concat(c.name));i.add(c,l)}}catch(h){s.e(h)}finally{s.f()}}var f=Ff(a,i);return n?f:f[0]}},{key:"retrieveSymbolicTensors",value:function(e){var t,n=Oc(null,e.length),r=e.length,a=(0,B.Z)(this.layers);try{for(a.s();!(t=a.n()).done;){for(var i=t.value,o=Array.isArray(i.output)?i.output:[i.output],u=o.map((function(e){return e.name})),s=0;s<e.length;++s){var c=u.indexOf(e[s]);if(-1!==c&&(n[s]=o[c],r--),0===r)break}if(0===r)break}}catch(f){a.e(f)}finally{a.f()}if(r>0){var l=[];throw n.forEach((function(t,n){null==t&&l.push(e[n])})),new Mc("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(l)))}return n}},{key:"predictLoop",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return io.tidy((function(){var a=t.checkNumSamples(e);if(r)throw new Dc("Verbose predictLoop() is not implemented yet.");for(var i=od(a,n),o=t.outputs.map((function(e){return[]})),u=function(n){io.tidy((function(){var r=i[n][0],a=i[n][1],o=ad(e,r,a),u=[];if(Array.isArray(o))for(var s=0;s<o.length;++s)u.push({key:t.inputs[s],value:o[s]});else u.push({key:t.inputs[0],value:o});var c=new Tf(u);return Ff(t.outputs,c)})).forEach((function(e,t){return o[t].push(e)}))},s=0;s<i.length;++s)u(s);return Bc(o.map((function(e){return io.concat(e,0)})))}))}},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ud(e);pd(n,this.inputNames,this.feedInputShapes,!1);try{var r=null==t.batchSize?32:t.batchSize;return rd(r),this.predictLoop(n,r)}finally{sd(n,e)}}},{key:"predictOnBatch",value:function(e){pd(e,this.inputNames,this.feedInputShapes,!0);var t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}},{key:"standardizeUserDataXY",value:function(e,t){var n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new Tc("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var r=[],a=0;a<this.feedOutputShapes.length;++a){var i=this.feedOutputShapes[a],o=this.feedLossFns[a];o===fh?r.push(i.slice(0,i.length-1).concat([1])):r.push(i)}if(hd(e=fd(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=fd(t,this.feedOutputNames,r,!1,"target")),dd(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new Mc("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}},{key:"standardizeUserData",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n,r,a){var i,o,u,s,c,l,f,h,d,p=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(p.length>4&&void 0!==p[4])||p[4],o=p.length>5?p[5]:void 0,u=this.standardizeUserDataXY(t,n,i,o),s=(0,C.Z)(u,2),c=s[0],l=s[1],null==r){e.next=5;break}throw new Error("sample weight is not supported yet.");case 5:if(f=null,null==a){e.next=19;break}h=Wh(a,this.outputNames),f=[],d=0;case 10:if(!(d<h.length)){e.next=19;break}return e.t0=f,e.next=14,Vh(l[d],null,h[d]);case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:++d,e.next=10;break;case 19:return e.abrupt("return",[c,l,f]);case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"testLoop",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;return io.tidy((function(){var o=r.checkNumSamples(t,n,i,"steps"),u=[];if(a>0)throw new Dc("Verbose mode is not implemented yet.");if(null!=i)throw new Dc("steps mode in testLoop() is not implemented yet");for(var s=od(o,n),c=(0,io.tensor1d)(kl(0,o)),l=0;l<s.length;++l){var f=s[l][0],h=s[l][1],d=Al(c,f,h-f),p=id(t,d),v=e(p);if(0===l)for(var g=0;g<v.length;++g)u.push((0,io.scalar)(0));for(var m=0;m<v.length;++m){var y=v[m];u[m]=io.add(u[m],io.mul(h-f,y))}}for(var b=0;b<u.length;++b)u[b]=io.div(u[b],o);return u}))}},{key:"getDedupedMetricsNames",value:function(){for(var e=this.metricsNames,t=[],n=0;n<e.length;++n){var r=e[n],a=r;if(Zc(e,r)>1){var i=Zc(e.slice(0,n),r);a+="_".concat(i)}t.push(a)}return t}},{key:"makeTrainFunction",value:function(){var e=this;return function(t){var n=[],r=t.slice(0,e.inputs.length),a=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),i=t.slice(e.inputs.length+e.outputs.length,e.inputs.length+2*e.outputs.length),o=[],u=e.collectedTrainableWeights.map((function(e){return e.read()}));return[e.optimizer_.minimize((function(){for(var t=[],u=0;u<e.inputs.length;++u)t.push({key:e.inputs[u],value:r[u]});for(var s,c=new Tf(t),l=Ff(e.outputs,c,{training:!0}),f=0;f<e.lossFunctions.length;++f){var h=(0,e.lossFunctions[f])(a[f],l[f]);null!=i[f]&&(h=Hh(h,i[f]));var d=io.mean(h);n.push(d),s=0===f?h:io.add(s,h)}for(var p=0;p<e.metricsTensors.length;++p){var v=void 0;if(e.outputs.length>1&&p<e.outputs.length)v=n[p];else{var g=e.metricsTensors[p][0],m=e.metricsTensors[p][1];v=io.mean(g(a[m],l[m]))}io.keep(v),o.push(v)}return s=io.mean(s),e.calculateLosses().forEach((function(e){s=io.add(s,e)})),s}),!0,u)].concat(o)}}},{key:"makeTestFunction",value:function(){var e=this;this.testFunction=function(t){return io.tidy((function(){for(var n,r=[],a=t.slice(0,e.inputs.length),i=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),o=[],u=0;u<e.inputs.length;++u)o.push({key:e.inputs[u],value:a[u]});for(var s=new Tf(o),c=Ff(e.outputs,s),l=0;l<e.lossFunctions.length;++l){var f=e.lossFunctions[l],h=io.mean(f(i[l],c[l]));n=0===l?h:io.add(n,h),r.push(n)}for(var d=0;d<e.metricsTensors.length;++d){var p=e.metricsTensors[d][0],v=e.metricsTensors[d][1],g=io.mean(p(i[v],c[v]));r.push(g)}return r}))}}},{key:"fit",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){var r,a,i,o,u,s,c,l,f,h,d,p,v,g,m,y,b,x,w,k,_,S,C,E,N,T,M=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=M.length>2&&void 0!==M[2]?M[2]:{},!this.isTraining){e.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return this.isTraining=!0,e.prev=4,rd(d=null==r.batchSize?32:r.batchSize),p=!1,e.next=10,this.standardizeUserData(t,n,r.sampleWeight,r.classWeight,p,d);case 10:if(v=e.sent,a=v[0],i=v[1],h=v[2],g=!1,!(null!=r.validationData&&r.validationData.length>0)){e.next=36;break}if(g=!0,2!==r.validationData.length){e.next=22;break}s=r.validationData[0],c=r.validationData[1],e.next=27;break;case 22:if(3!==r.validationData.length){e.next=26;break}throw new Dc("validationData including sample weights is not supported yet.");case 26:throw new Mc("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(r.validationData," is invalid."));case 27:return y=!0,e.next=30,this.standardizeUserData(s,c,null,null,y,d);case 30:b=e.sent,l=b[0],f=b[1],m=l.concat(f),e.next=37;break;case 36:null!=r.validationSplit&&r.validationSplit>0&&r.validationSplit<1?(g=!0,x=Math.floor(a[0].shape[0]*(1-r.validationSplit)),w=a[0].shape[0],l=ad(a,x,w),o=a,a=ad(a,0,x),f=ad(i,x,w),u=i,i=ad(i,0,x),m=l.concat(f)):null!=r.validationSteps&&(g=!0);case 37:return k=a.concat(i).concat(h),this.checkTrainableWeightsConsistency(),_=this.makeTrainFunction(),S=this.getDedupedMetricsNames(),g?(this.makeTestFunction(),C=this.testFunction,E=S.slice().concat(S.map((function(e){return"val_"+e})))):(C=null,m=[],E=S.slice()),N=th(r.callbacks,r.yieldEvery),e.next=45,this.fitLoop(_,k,S,d,r.epochs,r.verbose,N,C,m,r.shuffle,E,r.initialEpoch,null,null);case 45:return T=e.sent,e.abrupt("return",T);case 47:return e.prev=47,this.isTraining=!1,sd(a,t),sd(i,n),sd(o,t),sd(u,n),sd(l,s),sd(f,c),null!=h&&io.dispose(h),e.finish(47);case 57:case"end":return e.stop()}}),e,this,[[4,,47,57]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitLoop",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n,r,a,i,o,u,s,c,l,f,h,d,p){var v,g,m,y,b,x,w,k,_=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==a&&(a=32),null==i&&(i=1),null==l&&(l=!0),null==h&&(h=0),v=!1,null!=s&&null!=c&&(v=!0),null==p){e.next=10;break}if(v=!0,null!=d){e.next=10;break}throw new Mc("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");case 10:return null!=(g=this.checkNumSamples(n,a,d,"steps_per_epoch"))&&(m=kl(0,g)),null==o&&(o=1),y=rh(u,o,i,h,g,d,a,v,f),b=y.callbackList,x=y.history,b.setModel(this),this.history=x,e.next=18,b.onTrainBegin();case 18:this.stopTraining_=!1,w=A().mark((function e(i){var o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.onEpochBegin(i);case 2:if(o={},null==d){e.next=7;break}throw new Dc("stepsPerEpoch mode is not implemented yet.");case 7:return e.delegateYield(A().mark((function e(){var i,u,f,h;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("batch"!==l){e.next=4;break}throw new Dc("batch shuffling is not implemneted yet");case 4:l&&io.util.shuffle(m);case 5:i=(0,io.tensor1d)(m),u=od(g,a),f=A().mark((function e(l){var f;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f={},e.next=3,b.onBatchBegin(l,f);case 3:return io.tidy((function(){var e=u[l][0],h=u[l][1],d=Al(i,e,h-e);f.batch=l,f.size=h-e;for(var p=id(n,d),g=t(p),m=0;m<r.length;++m){var y=r[m],b=g[m];f[y]=b,io.keep(b)}if(l===u.length-1&&v)for(var x=_.testLoop(s,c,a),w=0;w<r.length;++w){var k=r[w],S=x[w];io.keep(S),o["val_"+k]=S}})),e.next=6,b.onBatchEnd(l,f);case 6:if(Yf(f),!_.stopTraining_){e.next=9;break}return e.abrupt("return","break");case 9:case"end":return e.stop()}}),e)})),h=0;case 9:if(!(h<u.length)){e.next=17;break}return e.delegateYield(f(h),"t0",11);case 11:if("break"!==e.t0){e.next=14;break}return e.abrupt("break",17);case 14:++h,e.next=9;break;case 17:i.dispose();case 18:case"end":return e.stop()}}),e)}))(),"t0",8);case 8:return e.next=10,b.onEpochEnd(i,o);case 10:if(!_.stopTraining_){e.next=12;break}return e.abrupt("return","break");case 12:case"end":return e.stop()}}),e)})),k=h;case 21:if(!(k<i)){e.next=29;break}return e.delegateYield(w(k),"t0",23);case 23:if("break"!==e.t0){e.next=26;break}return e.abrupt("break",29);case 26:++k,e.next=21;break;case 29:return e.next=31,b.onTrainEnd();case 31:return e.next=33,this.history.syncData();case 33:return e.abrupt("return",this.history);case 34:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,i,o,u,s,c,l,f,h,d,p){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kh(this,t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){var r,a,i,o,u,s,c,l,f,h;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.standardizeUserData(t,n);case 2:r=e.sent,a=r[0],i=r[1],o=this.makeTrainFunction(),u=o(a.concat(i)),s=[],c=(0,B.Z)(u),e.prev=9,c.s();case 11:if((l=c.n()).done){e.next=19;break}return f=l.value,e.next=15,f.data();case 15:h=e.sent,s.push(h[0]);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),c.e(e.t0);case 24:return e.prev=24,c.f(),e.finish(24);case 27:return io.dispose(u),sd(r[0],t),sd(r[1],n),e.abrupt("return",Bc(s));case 31:case"end":return e.stop()}}),e,this,[[9,21,24,27]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNamedWeights",value:function(e){for(var t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n),i=0;i<r.length;++i)n&&!r[i].trainable||t.push({name:r[i].originalName,tensor:a[i]});return t}},{key:"stopTraining",get:function(){return this.stopTraining_},set:function(e){this.stopTraining_=e}},{key:"optimizer",get:function(){return this.optimizer_},set:function(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}},{key:"dispose",value:function(){var e=(0,hn.Z)((0,dn.Z)(n.prototype),"dispose",this).call(this);if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){var t=io.memory().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-io.memory().numTensors}return e}},{key:"getLossIdentifiers",value:function(){var e;if("string"===typeof this.loss)e=Lc(this.loss);else if(Array.isArray(this.loss)){var t,n=(0,B.Z)(this.loss);try{for(n.s();!(t=n.n()).done;){if("string"!==typeof t.value)throw new Error("Serialization of non-string loss is not supported.")}}catch(s){n.e(s)}finally{n.f()}e=this.loss.map((function(e){return Lc(e)}))}else{var r=Object.keys(this.loss);e={};for(var a=this.loss,i=0,o=r;i<o.length;i++){var u=o[i];if("string"!==typeof a[u])throw new Error("Serialization of non-string loss is not supported.");e[u]=Lc(a[u])}}return e}},{key:"getMetricIdentifiers",value:function(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[Lc(Eh(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((function(e){return Lc(Eh(e))}));var e={};for(var t in this.metrics)e[t]=Lc(Eh(this.metrics[t]));return e}},{key:"getTrainingConfig",value:function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}},{key:"loadTrainingConfig",value:function(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");var t,n,r=ah(Bh(e.optimizer_config));if("string"===typeof e.loss)t=Pc(e.loss);else if(Array.isArray(e.loss))t=e.loss.map((function(e){return Pc(e)}));else if(null!=e.loss)for(var a in t={},e.loss)t[a]=Pc(e.loss[a]);if(Array.isArray(e.metrics))n=e.metrics.map((function(e){return Pc(e)}));else if(null!=e.metrics)for(var i in n={},e.metrics)n[i]=Pc(e.metrics[i]);this.compile({loss:t,metrics:n,optimizer:r})}},{key:"save",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){var r,a,i,o,u,s,c,l,f;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=9;break}if(0!==(r=io.io.getSaveHandlers(t)).length){e.next=6;break}throw new Mc("Cannot find any save handlers for URL '".concat(t,"'"));case 6:if(!(r.length>1)){e.next=8;break}throw new Mc("Found more than one (".concat(r.length,") save handlers for ")+"URL '".concat(t,"'"));case 8:t=r[0];case 9:if(null!=t.save){e.next=11;break}throw new Mc("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.next=13,io.io.encodeWeights(this.getNamedWeights(n));case 13:if(a=e.sent,!1,null,i=this.toJSON(null,false),o={modelTopology:i,format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(Lh),convertedBy:null},!(null!=n&&n.includeOptimizer)||null==this.optimizer){e.next=34;break}return o.trainingConfig=this.getTrainingConfig(),s="optimizer",e.t0=io.io,e.next=25,this.optimizer.getWeights();case 25:return e.t1=e.sent,e.t2=s,e.next=29,e.t0.encodeWeights.call(e.t0,e.t1,e.t2);case 29:c=e.sent,l=c.data,f=c.specs,(u=a.specs).push.apply(u,(0,M.Z)(f)),a.data=io.io.concatenateArrayBuffers([a.data,l]);case 34:return null!=this.userDefinedMetadata&&(!0,Nh(this.userDefinedMetadata,this.name,true),o.userDefinedMetadata=this.userDefinedMetadata),o.weightData=a.data,o.weightSpecs=a.specs,e.abrupt("return",t.save(o));case 38:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setUserDefinedMetadata",value:function(e){Nh(e,this.name),this.userDefinedMetadata=e}},{key:"getUserDefinedMetadata",value:function(){return this.userDefinedMetadata}}]),n}(jh);vd.className="Model",io.serialization.registerClass(vd);var gd=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.apply(this,arguments)}return(0,F.Z)(n)}(vd);gd.className="Functional",io.serialization.registerClass(gd);var md=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;if((0,D.Z)(this,n),e=e||{},(r=t.call(this,{inputs:[],outputs:[]})).trainable=!0,r.built=!1,r.name=null!=e.name?e.name:nl("sequential_"),null!=e.layers){var a,i=(0,B.Z)(e.layers);try{for(i.s();!(a=i.n()).done;){var o=a.value;r.add(o)}}catch(u){i.e(u)}finally{i.f()}}return r}return(0,F.Z)(n,[{key:"checkShape",value:function(e){if(e.inboundNodes[0].outputTensors[0].shape.some((function(e){return e<0})))throw new Mc("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}},{key:"add",value:function(e){var t,r=e instanceof n||e instanceof vd;if(r){if(1!==(t=e).outputs.length)throw new Mc("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==t.inputs.length)throw new Mc("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new Mc("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var a=Nf({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(a)}if(r)this.outputs=t.outputs,this.inputs=t.inputs;else{if(1!==e.inboundNodes.length)throw new Mc("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new Mc("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=Ef(this.outputs[0])}this.inboundNodes=[],new _f({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Oc(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((function(e){return e.shape})),outputShapes:this.outputs[0].shape})}else{var i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}},{key:"pop",value:function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}},{key:"call",value:function(e,t){return null==this.model&&this.build(),this.model.call(e,t)}},{key:"build",value:function(e){if(pf(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new vd({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}},{key:"countParams",value:function(){return this.built||this.build(),(0,hn.Z)((0,dn.Z)(n.prototype),"countParams",this).call(this)}},{key:"summary",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),(0,hn.Z)((0,dn.Z)(n.prototype),"summary",this).call(this,e,t,r)}},{key:"setWeights",value:function(e){null==this.model&&this.build(),this.model.setWeights(e)}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new Tc("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}},{key:"evaluateDataset",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new Tc("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.evaluateDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}},{key:"predictOnBatch",value:function(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}},{key:"compile",value:function(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}},{key:"optimizer",get:function(){return null==this.model?void 0:this.model.optimizer},set:function(e){this.model.optimizer=e}},{key:"fit",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){var r,a=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>2&&void 0!==a[2]?a[2]:{},this.built){e.next=3;break}throw new Tc("The model needs to be compiled before being used.");case 3:return e.abrupt("return",this.model.fit(t,n,r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new Tc("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.fitDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.trainOnBatch(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stopTraining",get:function(){if(null==this.model)throw new Mc("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(e){if(null==this.model)throw new Mc("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}},{key:"getConfig",value:function(){var e,t=[],n=(0,B.Z)(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value,a={};a.className=r.getClassName(),a.config=r.getConfig(),t.push(a)}}catch(i){n.e(i)}finally{n.f()}return{name:this.name,layers:t}}}],[{key:"fromConfig",value:function(e,t){var r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new Mc("Legacy serialization format not supported yet.");r=t}else io.util.assert(null!=t.layers,(function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."})),r=t.layers,delete t.layers,i=t;var o=new e(i);if(!(o instanceof n))throw new Dc("Sequential.fromConfig called on non-Sequential input: ".concat(o));var u,s=(0,B.Z)(r);try{for(s.s();!(u=s.n()).done;){var c=u.value,l=void 0,f=ah(c,l,a);a&&f.setFastWeightInitDuringBuild(!0),o.add(f)}}catch(h){s.e(h)}finally{s.f()}return o}}]),n}(vd);function yd(e){return new md(e)}md.className="Sequential",io.serialization.registerClass(md);var bd=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.apply(this,arguments)}return(0,F.Z)(n,[{key:"getConfig",value:function(){return{}}}]),n}(io.serialization.Serializable),xd=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.apply(this,arguments)}return(0,F.Z)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Ll(e,t)}}]),n}(bd);xd.className="elu",io.serialization.registerClass(xd);var wd=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.apply(this,arguments)}return(0,F.Z)(n,[{key:"apply",value:function(e){return io.selu(e)}}]),n}(bd);wd.className="selu",io.serialization.registerClass(wd);var kd=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.apply(this,arguments)}return(0,F.Z)(n,[{key:"apply",value:function(e){return io.relu(e)}}]),n}(bd);kd.className="relu",io.serialization.registerClass(kd);var _d=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.apply(this,arguments)}return(0,F.Z)(n,[{key:"apply",value:function(e){return(0,io.tidy)((function(){return io.minimum(6,io.relu(e))}))}}]),n}(bd);_d.className="relu6",io.serialization.registerClass(_d);var Sd=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.apply(this,arguments)}return(0,F.Z)(n,[{key:"apply",value:function(e){return e}}]),n}(bd);Sd.className="linear",io.serialization.registerClass(Sd);var Cd=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.apply(this,arguments)}return(0,F.Z)(n,[{key:"apply",value:function(e){return io.sigmoid(e)}}]),n}(bd);Cd.className="sigmoid",io.serialization.registerClass(Cd);var Ed=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.apply(this,arguments)}return(0,F.Z)(n,[{key:"apply",value:function(e){return function(e){return(0,io.tidy)((function(){var t=io.add(.5,io.mul(.2,e));return io.clipByValue(t,0,1)}))}(e)}}]),n}(bd);Ed.className="hardSigmoid",io.serialization.registerClass(Ed);var Ad=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.apply(this,arguments)}return(0,F.Z)(n,[{key:"apply",value:function(e){return io.softplus(e)}}]),n}(bd);Ad.className="softplus",io.serialization.registerClass(Ad);var Nd=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.apply(this,arguments)}return(0,F.Z)(n,[{key:"apply",value:function(e){return function(e){return(0,io.tidy)((function(){return io.div(e,io.add(io.abs(e),1))}))}(e)}}]),n}(bd);Nd.className="softsign",io.serialization.registerClass(Nd);var Td=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.apply(this,arguments)}return(0,F.Z)(n,[{key:"apply",value:function(e){return io.tanh(e)}}]),n}(bd);Td.className="tanh",io.serialization.registerClass(Td);var Md=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.apply(this,arguments)}return(0,F.Z)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return io.softmax(e,t)}}]),n}(bd);Md.className="softmax",io.serialization.registerClass(Md);var Dd=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.apply(this,arguments)}return(0,F.Z)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return io.logSoftmax(e,t)}}]),n}(bd);Dd.className="logSoftmax",io.serialization.registerClass(Dd);var Fd=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.apply(this,arguments)}return(0,F.Z)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,io.tidy)((function(){return io.mul(io.sigmoid(io.mul(e,t)),e)}))}}]),n}(bd);Fd.className="swish",io.serialization.registerClass(Fd);var Id=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.apply(this,arguments)}return(0,F.Z)(n,[{key:"apply",value:function(e){return(0,io.tidy)((function(){return io.mul(e,io.tanh(io.softplus(e)))}))}}]),n}(bd);function Od(e){return e.getClassName()}function Rd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Vc(e,io.serialization.SerializationMap.getMap().classNameMap,t,"activation")}function Zd(e){if(null==e){var t={className:"linear",config:{}};return Rd(t)}if("string"===typeof e){var n={};return n.className=e,n.config={},Rd(n)}return e instanceof bd?e:Rd(e)}function Bd(e){if(null!=e&&"object"!==typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}Id.className="mish",io.serialization.registerClass(Id);var zd=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.apply(this,arguments)}return(0,F.Z)(n)}(io.serialization.Serializable),Ld=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),r=t.call(this),Bd(e),r.l1=null==e||null==e.l1?.01:e.l1,r.l2=null==e||null==e.l2?.01:e.l2,r.hasL1=0!==r.l1,r.hasL2=0!==r.l2,r}return(0,F.Z)(n,[{key:"apply",value:function(e){var t=this;return(0,io.tidy)((function(){var n=(0,io.zeros)([1]);return t.hasL1&&(n=(0,io.add)(n,(0,io.sum)(io.mul(t.l1,(0,io.abs)(e))))),t.hasL2&&(n=(0,io.add)(n,(0,io.sum)(io.mul(t.l2,Zl(e))))),io.reshape(n,[])}))}},{key:"getConfig",value:function(){return{l1:this.l1,l2:this.l2}}}],[{key:"fromConfig",value:function(e,t){return new e({l1:t.l1,l2:t.l2})}}]),n}(zd);Ld.className="L1L2",io.serialization.registerClass(Ld);var Pd={l1l2:"L1L2"};function jd(e){return Uc(e)}function Ud(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Vc(e,io.serialization.SerializationMap.getMap().classNameMap,t,"regularizer")}function Wd(e){return null==e?null:"string"===typeof e?Ud({className:e in Pd?Pd[e]:e,config:{}}):e instanceof zd?e:Ud(e)}var Vd=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,null!=e&&(r.maxValue=e.maxValue),r}return(0,F.Z)(n,[{key:"call",value:function(e,t){e=df(e);var n=(0,io.relu)(e);return null!=this.maxValue&&(n=(0,io.clipByValue)(n,0,this.maxValue)),n}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={maxValue:this.maxValue},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Cf);Vd.className="ReLU",io.serialization.registerClass(Vd);var qd=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=.3,null==e&&(e={}),r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return(0,F.Z)(n,[{key:"call",value:function(e,t){var n=df(e);return(0,io.leakyRelu)(n,this.alpha)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Cf);qd.className="LeakyReLU",io.serialization.registerClass(qd);var Hd=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;if((0,D.Z)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),r.supportsMasking=!0,r.alphaInitializer=lf(e.alphaInitializer||r.DEFAULT_ALPHA_INITIALIZER),r.alphaRegularizer=Wd(e.alphaRegularizer),r.alphaConstraint=Hf(e.alphaConstraint),null==e.sharedAxes)r.sharedAxes=null;else if(Array.isArray(e.sharedAxes))r.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new Mc("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes));r.sharedAxes=[e.sharedAxes]}return r}return(0,F.Z)(n,[{key:"build",value:function(e){var t=(e=pf(e)).slice(1);if(null!=this.sharedAxes){var n,r=(0,B.Z)(this.sharedAxes);try{for(r.s();!(n=r.n()).done;){t[n.value-1]=1}}catch(o){r.e(o)}finally{r.f()}}this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var a={};if(null!=this.sharedAxes)for(var i=1;i<e.length;++i)a[i]=e[i];this.inputSpec=[new xf({ndim:e.length,axes:a})],this.built=!0}},{key:"call",value:function(e,t){return e=df(e),(0,io.prelu)(e,this.alpha.read())}},{key:"getConfig",value:function(){var e={alphaInitializer:cf(this.alphaInitializer),alphaRegularizer:jd(this.alphaRegularizer),alphaConstraint:Vf(this.alphaConstraint),sharedAxes:this.sharedAxes},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Cf);Hd.className="PReLU",io.serialization.registerClass(Hd);var Gd=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;if((0,D.Z)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==r.DEFAULT_ALPHA)throw new Dc("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");return r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return(0,F.Z)(n,[{key:"call",value:function(e,t){var n=df(e);return(0,io.elu)(n)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Cf);Gd.className="ELU",io.serialization.registerClass(Gd);var Xd=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_THETA=1,null==e&&(e={}),r.theta=null==e.theta?r.DEFAULT_THETA:e.theta,r}return(0,F.Z)(n,[{key:"call",value:function(e,t){var n=df(e);return(0,io.mul)(n,(0,io.cast)((0,io.greater)(n,this.theta),"float32"))}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={theta:this.theta},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Cf);Xd.className="ThresholdedReLU",io.serialization.registerClass(Xd);var Yd=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_AXIS=1,null==e&&(e={}),r.softmax=(new Md).apply,r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r}return(0,F.Z)(n,[{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){var r=df(e),a=t.mask;if(null!=a){var i=(0,io.mul)((0,io.sub)((0,io.ones)(r.shape),(0,io.cast)(a,r.dtype)),(0,io.scalar)(-1e9));r=(0,io.add)(r,i)}return n.axis instanceof Array?n.axis.length>1?(0,io.exp)((0,io.sub)(r,(0,io.logSumExp)(r,n.axis,!0))):n.softmax(r,n.axis[0]):n.softmax(r,n.axis)}))}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={axis:this.axis},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Cf);function Kd(e,t,n){if("number"===typeof e)return Oc(e,t);if(e.length!==t)throw new Mc("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(var r=0;r<t;++r){var a=e[r];if((i=a)!==parseInt(i.toString(),10))throw new Mc("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(a))}return e;var i}function $d(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(null==e)return e;var i,o=t+(t-1)*(a-1);return i="same"===n?e:e-o+1,Math.floor((i+r-1)/r)}function Qd(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+wl([n-t,0]);else{if("same"!==r)throw new Mc("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function Jd(e,t){return(0,io.tidy)((function(){return cl(t),"channelsFirst"===t?io.transpose(e,[0,2,3,1]):e}))}function ep(e,t){return(0,io.tidy)((function(){return cl(t),"channelsFirst"===t?io.transpose(e,[0,2,3,4,1]):e}))}function tp(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return(0,io.tidy)((function(){if(null==i&&(i="channelsLast"),cl(i),3!==e.shape.length)throw new Mc("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new Mc("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new Mc("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(t.shape.length," instead"));if("channelsFirst"===i&&(e=io.transpose(e,[0,2,1])),"causal"===a)throw new Dc("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var u=io.conv1d(e,t,r,"same"===a?"same":"valid","NWC",o);return null!=n&&(u=zl(u,n)),u}))}function np(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return(0,io.tidy)((function(){if(null==i&&(i="channelsLast"),cl(i),3!==e.rank&&4!==e.rank)throw new Mc("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new Mc("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));var s=Jd(e,i);if("causal"===a)throw new Dc("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return s=io.fused.conv2d({x:s,filter:t,strides:r,pad:"same"===a?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:u}),"channelsFirst"===i&&(s=io.transpose(s,[0,3,1,2])),s}))}function rp(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;return(0,io.tidy)((function(){if(null==i&&(i="channelsLast"),cl(i),4!==e.rank&&5!==e.rank)throw new Mc("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new Mc("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));var u=ep(e,i);if("causal"===a)throw new Dc("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return u=io.conv3d(u,t,r,"same"===a?"same":"valid","NDHWC",o),null!=n&&(u=zl(u,n)),"channelsFirst"===i&&(u=io.transpose(u,[0,4,1,2,3])),u}))}Yd.className="Softmax",io.serialization.registerClass(Yd);var ap=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e,r){var a;if((0,D.Z)(this,n),(a=t.call(this,r)).bias=null,a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_BIAS_INITIALIZER="zeros",n.verifyArgs(r),a.rank=e,Kc(a.rank,"rank"),1!==a.rank&&2!==a.rank&&3!==a.rank)throw new Dc("Convolution layer for rank other than 1, 2, or 3 (".concat(a.rank,") is ")+"not implemented yet.");if(a.kernelSize=Kd(r.kernelSize,e,"kernelSize"),a.strides=Kd(null==r.strides?1:r.strides,e,"strides"),a.padding=null==r.padding?"valid":r.padding,ll(a.padding),a.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,cl(a.dataFormat),a.activation=Zd(r.activation),a.useBias=null==r.useBias||r.useBias,a.biasInitializer=lf(r.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.biasConstraint=Hf(r.biasConstraint),a.biasRegularizer=Wd(r.biasRegularizer),a.activityRegularizer=Wd(r.activityRegularizer),a.dilationRate=Kd(null==r.dilationRate?1:r.dilationRate,e,"dilationRate"),1===a.rank&&Array.isArray(a.dilationRate)&&1!==a.dilationRate.length)throw new Mc("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(a.dilationRate)));if(2===a.rank){if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate];else if(2!==a.dilationRate.length)throw new Mc("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)))}else if(3===a.rank)if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate,a.dilationRate];else if(3!==a.dilationRate.length)throw new Mc("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)));return a}return(0,F.Z)(n,[{key:"getConfig",value:function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Od(this.activation),useBias:this.useBias,biasInitializer:cf(this.biasInitializer),biasRegularizer:jd(this.biasRegularizer),activityRegularizer:jd(this.activityRegularizer),biasConstraint:Vf(this.biasConstraint)},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(Rc("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!Yc(e.kernelSize,"number",1,3))throw new Mc("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(Cf),ip=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e,r){var a;return(0,D.Z)(this,n),(a=t.call(this,e,r)).kernel=null,n.verifyArgs(r),a.filters=r.filters,Kc(a.filters,"filters"),a.kernelInitializer=lf(r.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.kernelConstraint=Hf(r.kernelConstraint),a.kernelRegularizer=Wd(r.kernelRegularizer),a}return(0,F.Z)(n,[{key:"build",value:function(e){e=pf(e);var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new Mc("The channel dimension of the input should be defined. "+"Found ".concat(e[t]));var n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:(0,it.Z)({},t,n)}],this.built=!0}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){var t;e=df(e);var r=null==n.bias?null:n.bias.read(),a=Qc(n.activation.getClassName());if(null!=a&&2===n.rank)t=np(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate,a);else{if(1===n.rank)t=tp(e,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)t=np(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else{if(3!==n.rank)throw new Dc("convolutions greater than 3D are not implemented yet.");t=rp(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate)}null!=n.activation&&(t=n.activation.apply(t))}return t}))}},{key:"computeOutputShape",value:function(e){e=pf(e);for(var t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2),r=0;r<n.length;++r){var a=$d(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);t.push(a)}var i=[e[0]];return"channelsLast"===this.dataFormat?(i=i.concat(t)).push(this.filters):(i.push(this.filters),i=i.concat(t)),i}},{key:"getConfig",value:function(){var e={filters:this.filters,kernelInitializer:cf(this.kernelInitializer),kernelRegularizer:jd(this.kernelRegularizer),kernelConstraint:Vf(this.kernelConstraint)},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new Mc("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}]),n}(ap),op=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),r=t.call(this,2,e),n.verifyArgs(e),r}return(0,F.Z)(n,[{key:"getConfig",value:function(){var e=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!Yc(e.kernelSize,"number",1,2))throw new Mc("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(ip);op.className="Conv2D",io.serialization.registerClass(op);var up=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),r=t.call(this,3,e),n.verifyArgs(e),r}return(0,F.Z)(n,[{key:"getConfig",value:function(){var e=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new Mc("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(ip);up.className="Conv3D",io.serialization.registerClass(up);var sp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;if((0,D.Z)(this,n),(r=t.call(this,e)).inputSpec=[new xf({ndim:4})],"same"!==r.padding&&"valid"!==r.padding)throw new Mc("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return(0,F.Z)(n,[{key:"build",value:function(e){if(4!==(e=pf(e)).length)throw new Mc("Input should have rank 4; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new Mc("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new xf({ndim:4,axes:(0,it.Z)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return io.tidy((function(){var t=df(e);if(4!==t.shape.length)throw new Mc("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,i=t.shape,o=i[0];"channelsFirst"===n.dataFormat?(r=2,a=3):(r=1,a=2);var u=i[r],s=i[a],c=n.kernelSize[0],l=n.kernelSize[1],f=n.strides[0],h=n.strides[1],d=[o,Qd(u,f,c,n.padding),Qd(s,h,l,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=io.transpose(t,[0,2,3,1]));var p=io.conv2dTranspose(t,n.kernel.read(),d,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(p=io.transpose(p,[0,3,1,2])),null!=n.bias&&(p=zl(p,n.bias.read(),n.dataFormat)),null!=n.activation&&(p=n.activation.apply(p)),p}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=(e=pf(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);var i=this.kernelSize[0],o=this.kernelSize[1],u=this.strides[0],s=this.strides[1];return a[t]=this.filters,a[n]=Qd(a[n],u,i,this.padding),a[r]=Qd(a[r],s,o,this.padding),a}},{key:"getConfig",value:function(){var e=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(op);sp.className="Conv2DTranspose",io.serialization.registerClass(sp);var cp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;if((0,D.Z)(this,n),(r=t.call(this,e)).inputSpec=[new xf({ndim:5})],"same"!==r.padding&&"valid"!==r.padding)throw new Mc("Conv3DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return(0,F.Z)(n,[{key:"build",value:function(e){if(5!==(e=pf(e)).length)throw new Mc("Input should have rank 5; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new Mc("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new xf({ndim:5,axes:(0,it.Z)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return io.tidy((function(){var t=df(e);if(5!==t.shape.length)throw new Mc("Conv3DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,i,o=t.shape,u=o[0];"channelsFirst"===n.dataFormat?(i=2,r=3,a=4):(i=1,r=2,a=3);var s=o[i],c=o[r],l=o[a],f=n.kernelSize[0],h=n.kernelSize[1],d=n.kernelSize[2],p=n.strides[0],v=n.strides[1],g=n.strides[2],m=[u,Qd(s,p,f,n.padding),Qd(c,v,h,n.padding),Qd(l,g,d,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=io.transpose(t,[0,2,3,4,1]));var y=io.conv3dTranspose(t,n.kernel.read(),m,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(y=io.transpose(y,[0,4,1,2,3])),null!==n.bias&&(y=zl(y,n.bias.read(),n.dataFormat)),null!==n.activation&&(y=n.activation.apply(y)),y}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a,i=(e=pf(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3,a=4):(t=4,n=1,r=2,a=3);var o=this.kernelSize[0],u=this.kernelSize[1],s=this.kernelSize[2],c=this.strides[0],l=this.strides[1],f=this.strides[2];return i[t]=this.filters,i[n]=Qd(i[n],c,o,this.padding),i[r]=Qd(i[r],l,u,this.padding),i[a]=Qd(i[a],f,s,this.padding),i}},{key:"getConfig",value:function(){var e=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(up);cp.className="Conv3DTranspose",io.serialization.registerClass(cp);var lp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e,r){var a;if((0,D.Z)(this,n),(a=t.call(this,e,r)).DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",a.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",a.depthwiseKernel=null,a.pointwiseKernel=null,null==r.filters)throw new Mc("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=r.kernelInitializer||null!=r.kernelRegularizer||null!=r.kernelConstraint)throw new Mc("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=r.padding&&"same"!==r.padding&&"valid"!==r.padding)throw new Mc("SeparableConv".concat(a.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(r.padding)));return a.depthMultiplier=null==r.depthMultiplier?1:r.depthMultiplier,a.depthwiseInitializer=lf(r.depthwiseInitializer||a.DEFAULT_DEPTHWISE_INITIALIZER),a.depthwiseRegularizer=Wd(r.depthwiseRegularizer),a.depthwiseConstraint=Hf(r.depthwiseConstraint),a.pointwiseInitializer=lf(r.depthwiseInitializer||a.DEFAULT_POINTWISE_INITIALIZER),a.pointwiseRegularizer=Wd(r.pointwiseRegularizer),a.pointwiseConstraint=Hf(r.pointwiseConstraint),a}return(0,F.Z)(n,[{key:"build",value:function(e){if((e=pf(e)).length<this.rank+2)throw new Mc("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new Mc("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[t])));for(var n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[],i=0;i<this.rank;++i)a.push(1);a.push(n*this.depthMultiplier,this.filters);var o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new xf({ndim:this.rank+2,axes:(0,it.Z)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){var t;if(e=df(e),1===n.rank)throw new Dc("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(e=io.transpose(e,[0,2,3,1])),t=io.separableConv2d(e,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(t=zl(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),"channelsFirst"===n.dataFormat&&(t=io.transpose(t,[0,3,1,2])),t}))}},{key:"getConfig",value:function(){var e=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=cf(this.depthwiseInitializer),e.pointwiseInitializer=cf(this.pointwiseInitializer),e.depthwiseRegularizer=jd(this.depthwiseRegularizer),e.pointwiseRegularizer=jd(this.pointwiseRegularizer),e.depthwiseConstraint=Vf(this.depthwiseConstraint),e.pointwiseConstraint=Vf(this.pointwiseConstraint),e}}]),n}(ip);lp.className="SeparableConv";var fp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){return(0,D.Z)(this,n),t.call(this,2,e)}return(0,F.Z)(n)}(lp);fp.className="SeparableConv2D",io.serialization.registerClass(fp);var hp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),r=t.call(this,1,e),n.verifyArgs(e),r.inputSpec=[{ndim:3}],r}return(0,F.Z)(n,[{key:"getConfig",value:function(){var e=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.dataFormat,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!Yc(e.kernelSize,"number",1,1))throw new Mc("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(ip);hp.className="Conv1D",io.serialization.registerClass(hp);var dp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),r=t.call(this,e),"number"===typeof e.cropping?r.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?r.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:r.cropping=e.cropping,r.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,r.inputSpec=[{ndim:4}],r}return(0,F.Z)(n,[{key:"computeOutputShape",value:function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){if(e=df(e),"channelsLast"===n.dataFormat){var t=Tl(e,n.cropping[0][0],e.shape[1]-n.cropping[0][0]-n.cropping[0][1],2);return Tl(t,n.cropping[1][0],e.shape[2]-n.cropping[1][1]-n.cropping[1][0],3)}var r=Tl(e,n.cropping[0][0],e.shape[2]-n.cropping[0][0]-n.cropping[0][1],3);return Tl(r,n.cropping[1][0],e.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)}))}},{key:"getConfig",value:function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Cf);dp.className="Cropping2D",io.serialization.registerClass(dp);var pp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r,a;return(0,D.Z)(this,n),(r=t.call(this,e)).DEFAULT_SIZE=[2,2],r.inputSpec=[{ndim:4}],r.size=null==e.size?r.DEFAULT_SIZE:e.size,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,cl(r.dataFormat),r.interpolation=null==e.interpolation?"nearest":e.interpolation,a=r.interpolation,Xc(al,"InterpolationFormat",a),r}return(0,F.Z)(n,[{key:"computeOutputShape",value:function(e){if("channelsFirst"===this.dataFormat){var t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}var r=null==e[1]?null:this.size[0]*e[1],a=null==e[2]?null:this.size[1]*e[2];return[e[0],r,a,e[3]]}},{key:"call",value:function(e,t){var n=this;return io.tidy((function(){var t=df(e),r=t.shape;if("channelsFirst"===n.dataFormat){t=io.transpose(t,[0,2,3,1]);var a=n.size[0]*r[2],i=n.size[1]*r[3],o="nearest"===n.interpolation?io.image.resizeNearestNeighbor(t,[a,i]):io.image.resizeBilinear(t,[a,i]);return io.transpose(o,[0,3,1,2])}var u=n.size[0]*r[1],s=n.size[1]*r[2];return"nearest"===n.interpolation?io.image.resizeNearestNeighbor(t,[u,s]):io.image.resizeBilinear(t,[u,s])}))}},{key:"getConfig",value:function(){var e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Cf);pp.className="UpSampling2D",io.serialization.registerClass(pp);var vp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,2,e)).depthwiseKernel=null,r.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,r.depthwiseInitializer=lf(e.depthwiseInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.depthwiseConstraint=Hf(e.depthwiseConstraint),r.depthwiseRegularizer=Wd(e.depthwiseRegularizer),r}return(0,F.Z)(n,[{key:"build",value:function(e){if((e=pf(e)).length<4)throw new Mc("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));var t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new Mc("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[t],")."));var n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return(0,io.tidy)((function(){null==a&&(a="channelsLast"),cl(a);var o=Jd(e,a);if(4!==e.rank)throw new Mc("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(4!==t.rank)throw new Mc("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return o=io.depthwiseConv2d(o,t,n,"same"===r?"same":"valid","NHWC",i),"channelsFirst"===a&&(o=io.transpose(o,[0,3,1,2])),o}))}(e=df(e),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat,null);return n.useBias&&(t=zl(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),t}))}},{key:"computeOutputShape",value:function(e){e=pf(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=$d(t,this.kernelSize[0],this.padding,this.strides[0]),i=$d(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,i]:[e[0],a,i,r]}},{key:"getConfig",value:function(){var e=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=cf(this.depthwiseInitializer),e.depthwiseRegularizer=jd(this.depthwiseRegularizer),e.depthwiseConstraint=Vf(this.depthwiseRegularizer),e}}]),n}(ap);function gp(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new Mc("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function mp(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return io.tidy((function(){var s=t.shape.length;if(s<3)throw new Mc("Input should be at least 3D, but is ".concat(s,"D."));var c=[1,0].concat(kl(2,s));if(t=io.transpose(t,c),null!=i)throw new Dc("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&((a=io.cast(io.cast(a,"bool"),"float32")).rank===s-1&&(a=io.expandDims(a,-1)),a=io.transpose(a,c)),r&&(t=io.reverse(t,0),null!=a&&(a=io.reverse(a,0)));var l,f,h=[],d=n,p=t.shape[0],v=io.unstack(t);null!=a&&(f=io.unstack(a));for(var g,m=function(t){var n=v[t],r=io.tidy((function(){return e(n,d)}));if(null==a)l=r[0],d=r[1];else{var i=io.tidy((function(){var e=f[t],n=io.sub(io.onesLike(e),e);return{output:io.add(io.mul(r[0],e),io.mul(d[0],n)),newStates:d.map((function(t,a){return io.add(io.mul(r[1][a],e),io.mul(t,n))}))}}));l=i.output,d=i.newStates}u&&h.push(l)},y=0;y<p;++y)m(y);if(u){g=io.stack(h,1)}return[l,g,d]}))}vp.className="DepthwiseConv2D",io.serialization.registerClass(vp);var yp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r,a;if((0,D.Z)(this,n),r=t.call(this,e),null==e.cell)throw new Mc("cell property is missing for the constructor of RNN.");if(null==(a=Array.isArray(e.cell)?new Ep({cells:e.cell}):e.cell).stateSize)throw new Mc("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=a,r.returnSequences=null!=e.returnSequences&&e.returnSequences,r.returnState=null!=e.returnState&&e.returnState,r.goBackwards=null!=e.goBackwards&&e.goBackwards,r._stateful=null!=e.stateful&&e.stateful,r.unroll=null!=e.unroll&&e.unroll,r.supportsMasking=!0,r.inputSpec=[new xf({ndim:3})],r.stateSpec=null,r.states_=null,r.numConstants=null,r.keptStates=[],r}return(0,F.Z)(n,[{key:"getStates",value:function(){return null==this.states_?kl(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((function(e){return null})):this.states_}},{key:"setStates",value:function(e){this.states_=e}},{key:"computeOutputShape",value:function(e){ff(e)&&(e=e[0]);var t=this.cell.stateSize;Array.isArray(t)||(t=[t]);var n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){var a,i=[],o=(0,B.Z)(t);try{for(o.s();!(a=o.n()).done;){var u=a.value;i.push([e[0],u])}}catch(s){o.e(s)}finally{o.f()}return[n].concat(i)}return n}},{key:"computeMask",value:function(e,t){var n=this;return io.tidy((function(){Array.isArray(t)&&(t=t[0]);var e=n.returnSequences?t:null;if(n.returnState){var r=n.states.map((function(e){return null}));return[e].concat(r)}return e}))}},{key:"states",get:function(){if(null==this.states_){for(var e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[],n=0;n<e;++n)t.push(null);return t}return this.states_},set:function(e){this.states_=e}},{key:"build",value:function(e){if(null!=this.numConstants)throw new Dc("Constants support is not implemented in RNN yet.");ff(e)&&(e=e[0]);var t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new xf({shape:[t,null].concat((0,M.Z)(n))});var r,a=[e[0]].concat(e.slice(2));if(this.cell.build(a),r=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!io.util.arraysEqual(this.stateSpec.map((function(e){return e.shape[e.shape.length-1]})),r))throw new Mc("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=r.map((function(e){return new xf({shape:[null,e]})}));this.stateful&&this.resetStates()}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,io.tidy)((function(){if(!t.stateful)throw new Nc("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape[0];if(null==r)throw new Mc("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.states_)Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return io.zeros([r,e])})):t.states_=[io.zeros([r,t.cell.stateSize])];else if(null==e)io.dispose(t.states_),null!=t.keptStates&&(io.dispose(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return io.zeros([r,e])})):t.states_[0]=io.zeros([r,t.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new Mc("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));!0===n?t.keptStates.push(t.states_.slice()):io.dispose(t.states_);for(var a=0;a<t.states_.length;++a){var i=e[a],o=Array.isArray(t.cell.stateSize)?t.cell.stateSize[a]:t.cell.stateSize,u=[r,o];if(!io.util.arraysEqual(i.shape,u))throw new Mc("State ".concat(a," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(u,", received shape=").concat(i.shape));t.states_[a]=i}}t.states_=t.states_.map((function(e){return io.keep(e.clone())}))}))}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=gp(e,r,a,this.numConstants);e=i.inputs,r=i.initialState,a=i.constants;var o=[],u=[];if(null!=r){t.initialState=r,o=o.concat(r),this.stateSpec=[];var s,c=(0,B.Z)(r);try{for(c.s();!(s=c.n()).done;){var l=s.value;this.stateSpec.push(new xf({shape:l.shape}))}}catch(v){c.e(v)}finally{c.f()}u=u.concat(this.stateSpec)}if(null!=a&&(t.constants=a,o=o.concat(a),this.numConstants=a.length),o[0]instanceof wf){var f=[e].concat(o),h=this.inputSpec.concat(u),d=this.inputSpec;this.inputSpec=h;var p=(0,hn.Z)((0,dn.Z)(n.prototype),"apply",this).call(this,f,t);return this.inputSpec=d,p}return(0,hn.Z)((0,dn.Z)(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){var r=null==t?null:t.mask,a=null==t?null:t.training,i=null==t?null:t.initialState;e=df(e),null==i&&(i=n.stateful?n.states_:n.getInitialState(e));var o=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(i.length!==o)throw new Mc("RNN Layer has ".concat(o," state(s) but was passed ")+"".concat(i.length," initial state(s)."));n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var u={training:a},s=mp((function(e,t){var r=n.cell.call([e].concat(t),u);return[r[0],r.slice(1)]}),e,i,n.goBackwards,r,null,n.unroll,n.returnSequences),c=s[0],l=s[1],f=s[2];n.stateful&&n.resetStates(f,a);var h=n.returnSequences?l:c;return n.returnState?[h].concat(f):h}))}},{key:"getInitialState",value:function(e){var t=this;return(0,io.tidy)((function(){var n=io.zeros(e.shape);return n=Cl(n=io.sum(n,[1,2])),Array.isArray(t.cell.stateSize)?t.cell.stateSize.map((function(e){return e>1?Fl(n,[1,e]):n})):t.cell.stateSize>1?[Fl(n,[1,t.cell.stateSize])]:[n]}))}},{key:"trainableWeights",get:function(){return this.trainable?this.cell.trainableWeights:[]}},{key:"nonTrainableWeights",get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}},{key:"setFastWeightInitDuringBuild",value:function(e){(0,hn.Z)((0,dn.Z)(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);var r=this.cell.getConfig();return this.getClassName()===n.className&&(t.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),t)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.cell,a=ah(r,n);return new e(Object.assign(t,{cell:a}))}}]),n}(Cf);yp.className="RNN",io.serialization.registerClass(yp);var bp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.apply(this,arguments)}return(0,F.Z)(n)}(Cf),xp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,Kc(r.units,"units"),r.activation=Zd(null==e.activation?r.DEFAULT_ACTIVATION:e.activation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=lf(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=lf(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=lf(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=Wd(e.kernelRegularizer),r.recurrentRegularizer=Wd(e.recurrentRegularizer),r.biasRegularizer=Wd(e.biasRegularizer),r.kernelConstraint=Hf(e.kernelConstraint),r.recurrentConstraint=Hf(e.recurrentConstraint),r.biasConstraint=Hf(e.biasConstraint),r.dropout=xl([1,wl([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=xl([1,wl([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return(0,F.Z)(n,[{key:"build",value:function(e){e=pf(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){if(2!==e.length)throw new Mc("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));var r=e[1];e=e[0];var a,i=null!=t.training&&t.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Ap({ones:function(){return io.onesLike(e)},rate:n.dropout,training:i,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Ap({ones:function(){return io.onesLike(r)},rate:n.recurrentDropout,training:i,dropoutFunc:n.dropoutFunc}));var o=n.dropoutMask,u=n.recurrentDropoutMask;a=Ol(null!=o?io.mul(e,o):e,n.kernel.read()),null!=n.bias&&(a=zl(a,n.bias.read())),null!=u&&(r=io.mul(r,u));var s=io.add(a,Ol(r,n.recurrentKernel.read()));return null!=n.activation&&(s=n.activation.apply(s)),[s,s]}))}},{key:"getConfig",value:function(){var e=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:Od(this.activation),useBias:this.useBias,kernelInitializer:cf(this.kernelInitializer),recurrentInitializer:cf(this.recurrentInitializer),biasInitializer:cf(this.biasInitializer),kernelRegularizer:jd(this.kernelRegularizer),recurrentRegularizer:jd(this.recurrentRegularizer),biasRegularizer:jd(this.biasRegularizer),activityRegularizer:jd(this.activityRegularizer),kernelConstraint:Vf(this.kernelConstraint),recurrentConstraint:Vf(this.recurrentConstraint),biasConstraint:Vf(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}}]),n}(bp);xp.className="SimpleRNNCell",io.serialization.registerClass(xp);var wp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){return(0,D.Z)(this,n),e.cell=new xp(e),t.call(this,e)}return(0,F.Z)(n,[{key:"call",value:function(e,t){var r=this;return(0,io.tidy)((function(){null!=r.cell.dropoutMask&&(io.dispose(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(io.dispose(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return(0,hn.Z)((0,dn.Z)(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(yp);wp.className="SimpleRNN",io.serialization.registerClass(wp);var kp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;if((0,D.Z)(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new Mc("GRUCell does not support reset_after parameter set to true.");return r.units=e.units,Kc(r.units,"units"),r.activation=Zd(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=Zd(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=lf(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=lf(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=lf(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=Wd(e.kernelRegularizer),r.recurrentRegularizer=Wd(e.recurrentRegularizer),r.biasRegularizer=Wd(e.biasRegularizer),r.kernelConstraint=Hf(e.kernelConstraint),r.recurrentConstraint=Hf(e.recurrentConstraint),r.biasConstraint=Hf(e.biasConstraint),r.dropout=xl([1,wl([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=xl([1,wl([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return(0,F.Z)(n,[{key:"build",value:function(e){var t=(e=pf(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){if(2!==e.length)throw new Mc("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=null!=t.training&&t.training,a=e[1];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Ap({ones:function(){return io.onesLike(e)},rate:n.dropout,training:r,count:3,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Ap({ones:function(){return io.onesLike(a)},rate:n.recurrentDropout,training:r,count:3,dropoutFunc:n.dropoutFunc}));var i,o,u,s=n.dropoutMask,c=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=io.mul(e,s[0]));var l=Ol(e,n.kernel.read());n.useBias&&(l=zl(l,n.bias.read())),0<n.recurrentDropout&&n.recurrentDropout<1&&(a=io.mul(a,c[0]));var f=n.recurrentKernel.read(),h=io.split(f,[2*n.units,n.units],f.rank-1),d=(0,C.Z)(h,2),p=d[0],v=d[1],g=Ol(a,p),m=io.split(l,3,l.rank-1),y=(0,C.Z)(m,3),b=y[0],x=y[1],w=y[2],k=io.split(g,2,g.rank-1),_=(0,C.Z)(k,2),S=_[0],E=_[1];i=n.recurrentActivation.apply(io.add(b,S)),o=n.recurrentActivation.apply(io.add(x,E));var A=Ol(io.mul(o,a),v);u=n.activation.apply(io.add(w,A));var N=io.add(io.mul(i,a),io.mul(io.add(1,io.neg(i)),u));return[N,N]}))}},{key:"getConfig",value:function(){var e=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:Od(this.activation),recurrentActivation:Od(this.recurrentActivation),useBias:this.useBias,kernelInitializer:cf(this.kernelInitializer),recurrentInitializer:cf(this.recurrentInitializer),biasInitializer:cf(this.biasInitializer),kernelRegularizer:jd(this.kernelRegularizer),recurrentRegularizer:jd(this.recurrentRegularizer),biasRegularizer:jd(this.biasRegularizer),activityRegularizer:jd(this.activityRegularizer),kernelConstraint:Vf(this.kernelConstraint),recurrentConstraint:Vf(this.recurrentConstraint),biasConstraint:Vf(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}}]),n}(bp);kp.className="GRUCell",io.serialization.registerClass(kp);var _p=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){return(0,D.Z)(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new kp(e),t.call(this,e)}return(0,F.Z)(n,[{key:"call",value:function(e,t){var r=this;return(0,io.tidy)((function(){null!=r.cell.dropoutMask&&(io.dispose(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(io.dispose(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return(0,hn.Z)((0,dn.Z)(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(yp);_p.className="GRU",io.serialization.registerClass(_p);var Sp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,Kc(r.units,"units"),r.activation=Zd(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=Zd(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=lf(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=lf(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=lf(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.unitForgetBias=e.unitForgetBias,r.kernelRegularizer=Wd(e.kernelRegularizer),r.recurrentRegularizer=Wd(e.recurrentRegularizer),r.biasRegularizer=Wd(e.biasRegularizer),r.kernelConstraint=Hf(e.kernelConstraint),r.recurrentConstraint=Hf(e.recurrentConstraint),r.biasConstraint=Hf(e.biasConstraint),r.dropout=xl([1,wl([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=xl([1,wl([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=[r.units,r.units],r.dropoutMask=null,r.recurrentDropoutMask=null,r}return(0,F.Z)(n,[{key:"build",value:function(e){var t,n,r=(e=pf(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var a=this.biasInitializer,i=this.units;n=new(t=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.apply(this,arguments)}return(0,F.Z)(n,[{key:"apply",value:function(e,t){var n=a.apply([i]),r=(new Hl).apply([i]),o=a.apply([2*i]);return Dl(Dl(n,r),o)}}]),n}(Vl),t.className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){var r=null!=t.training&&t.training;if(3!==e.length)throw new Mc("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var a=e[1],i=e[2];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Ap({ones:function(){return io.onesLike(e)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Ap({ones:function(){return io.onesLike(a)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var o,u,s,c,l=n.dropoutMask,f=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=io.mul(e,l[0]));var h=Ol(e,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(a=io.mul(a,f[0])),h=io.add(h,Ol(a,n.recurrentKernel.read())),n.useBias&&(h=zl(h,n.bias.read()));var d=io.split(h,4,h.rank-1),p=(0,C.Z)(d,4),v=p[0],g=p[1],m=p[2],y=p[3];o=n.recurrentActivation.apply(v),u=n.recurrentActivation.apply(g),s=io.add(io.mul(u,i),io.mul(o,n.activation.apply(m))),c=n.recurrentActivation.apply(y);var b=io.mul(c,n.activation.apply(s));return[b,b,s]}))}},{key:"getConfig",value:function(){var e=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:Od(this.activation),recurrentActivation:Od(this.recurrentActivation),useBias:this.useBias,kernelInitializer:cf(this.kernelInitializer),recurrentInitializer:cf(this.recurrentInitializer),biasInitializer:cf(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:jd(this.kernelRegularizer),recurrentRegularizer:jd(this.recurrentRegularizer),biasRegularizer:jd(this.biasRegularizer),activityRegularizer:jd(this.activityRegularizer),kernelConstraint:Vf(this.kernelConstraint),recurrentConstraint:Vf(this.recurrentConstraint),biasConstraint:Vf(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}}]),n}(bp);Sp.className="LSTMCell",io.serialization.registerClass(Sp);var Cp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){return(0,D.Z)(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Sp(e),t.call(this,e)}return(0,F.Z)(n,[{key:"call",value:function(e,t){var r=this;return(0,io.tidy)((function(){null!=r.cell.dropoutMask&&(io.dispose(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(io.dispose(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return(0,hn.Z)((0,dn.Z)(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(yp);Cp.className="LSTM",io.serialization.registerClass(Cp);var Ep=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,e)).cells=e.cells,r}return(0,F.Z)(n,[{key:"stateSize",get:function(){var e,t=[],n=(0,B.Z)(this.cells.slice().reverse());try{for(n.s();!(e=n.n()).done;){var r=e.value;Array.isArray(r.stateSize)?t.push.apply(t,(0,M.Z)(r.stateSize)):t.push(r.stateSize)}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){var r,a=e.slice(1),i=[],o=(0,B.Z)(n.cells.slice().reverse());try{for(o.s();!(r=o.n()).done;){var u=r.value;Array.isArray(u.stateSize)?i.push(a.splice(0,u.stateSize.length)):i.push(a.splice(0,1))}}catch(g){o.e(g)}finally{o.f()}i.reverse();for(var s,c=[],l=0;l<n.cells.length;++l){var f=n.cells[l];a=i[l],s=0===l?[e[0]].concat(a):[s[0]].concat(a),s=f.call(s,t),c.push(s.slice(1))}a=[];var h,d=(0,B.Z)(c.slice().reverse());try{for(d.s();!(h=d.n()).done;){var p,v=h.value;(p=a).push.apply(p,(0,M.Z)(v))}}catch(g){d.e(g)}finally{d.f()}return[s[0]].concat(a)}))}},{key:"build",value:function(e){var t;ff(e)&&(e=e[0]),this.cells.forEach((function(n,r){dl("RNNCell_".concat(r),(function(){n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}},{key:"getConfig",value:function(){var e=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this),t={cells:this.cells.map((function(e){return{className:e.getClassName(),config:e.getConfig()}}))};return Object.assign(Object.assign({},e),t)}},{key:"trainableWeights",get:function(){if(!this.trainable)return[];var e,t=[],n=(0,B.Z)(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,M.Z)(r.trainableWeights))}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=(0,B.Z)(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,M.Z)(r.nonTrainableWeights))}}catch(s){n.e(s)}finally{n.f()}if(!this.trainable){var a,i=[],o=(0,B.Z)(this.cells);try{for(o.s();!(a=o.n()).done;){var u=a.value;i.push.apply(i,(0,M.Z)(u.trainableWeights))}}catch(s){o.e(s)}finally{o.f()}return i.concat(t)}return t}},{key:"getWeights",value:function(){var e,t=[],n=(0,B.Z)(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,M.Z)(r.weights))}}catch(a){n.e(a)}finally{n.f()}return yf(t)}},{key:"setWeights",value:function(e){var t,n=[],r=(0,B.Z)(this.cells);try{for(r.s();!(t=r.n()).done;)for(var a=t.value,i=a.weights.length,o=e.splice(i),u=0;u<a.weights.length;++u)n.push([a.weights[u],o[u]])}catch(s){r.e(s)}finally{r.f()}bf(n)}}],[{key:"fromConfig",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],i=(0,B.Z)(t.cells);try{for(i.s();!(n=i.n()).done;){var o=n.value;a.push(ah(o,r))}}catch(u){i.e(u)}finally{i.f()}return new e({cells:a})}}]),n}(bp);function Ap(e){var t=e.ones,n=e.rate,r=e.training,a=void 0!==r&&r,i=e.count,o=void 0===i?1:i,u=e.dropoutFunc,s=function(){return null!=u?u(t(),n):Pl(t(),n)},c=function(){return jl(s,t,a)};return!o||o<=1?io.keep(c().clone()):Array(o).fill(void 0).map(c).map((function(e){return io.keep(e.clone())}))}Ep.className="StackedRNNCells",io.serialization.registerClass(Ep);var Np=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Tp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;if((0,D.Z)(this,n),e.unroll)throw new Dc("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Dc("It is not possible at the moment to stack convolutional cells.");return(r=t.call(this,e)).inputSpec=[new xf({ndim:5})],r}return(0,F.Z)(n,[{key:"call",value:function(e,t){var r=this;return io.tidy((function(){if(null!=r.cell.dropoutMask&&(io.dispose(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(io.dispose(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t&&t.constants)throw new Mc("ConvRNN2D cell does not support constants");var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return(0,hn.Z)((0,dn.Z)(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}},{key:"computeOutputShape",value:function(e){var t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0]].concat((0,M.Z)(t.slice(2)))),this.returnState&&(t=[t].concat((0,M.Z)(Array(2).fill([e[0]].concat((0,M.Z)(t.slice(-3))))))),t}},{key:"getInitialState",value:function(e){var t=this;return io.tidy((function(){var n=t.cell.stateSize,r=e.shape,a=t.computeSingleOutputShape(r),i=[a[0]].concat((0,M.Z)(a.slice(2))),o=io.zeros(i);return Array.isArray(n)?Array(n.length).fill(o):[o]}))}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];io.tidy((function(){if(!t.stateful)throw new Nc("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape,a=t.computeSingleOutputShape(r),i=[a[0]].concat((0,M.Z)(a.slice(2)));if(null==r[0])throw new Mc("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.getStates())Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return io.zeros(i)})):t.states_=[io.zeros(i)];else if(null==e)io.dispose(t.states_),null!=t.keptStates&&(io.dispose(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return io.zeros(i)})):t.states_[0]=io.zeros(i);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new Mc("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));n?t.keptStates.push(t.states_.slice()):io.dispose(t.states_);for(var o=0;o<t.states_.length;++o){var u=e[o],s=i;if(!io.util.arraysEqual(u.shape,s))throw new Mc("State ".concat(o," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(s,", received shape=").concat(u.shape));t.states_[o]=u}}t.states_=t.states_.map((function(e){return io.keep(e.clone())}))}))}},{key:"computeSingleOutputShape",value:function(e){var t=this.cell,n=t.dataFormat,r=t.filters,a=t.kernelSize,i=t.padding,o=t.strides,u=t.dilationRate,s="channelsFirst"===n,c=e[s?3:2],l=e[s?4:3],f=$d(c,a[0],i,o[0],u[0]),h=$d(l,a[1],i,o[1],u[1]);return[].concat((0,M.Z)(e.slice(0,2)),(0,M.Z)(s?[r,f,h]:[f,h,r]))}}]),n}(yp);Tp.className="ConvRNN2D";var Mp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;(0,D.Z)(this,n);var a=e.filters,i=e.kernelSize,o=e.strides,u=e.padding,s=e.dataFormat,c=e.dilationRate;return(r=t.call(this,Object.assign(Object.assign({},e),{units:a}))).filters=a,Kc(r.filters,"filters"),r.kernelSize=Kd(i,2,"kernelSize"),r.kernelSize.forEach((function(e){return Kc(e,"kernelSize")})),r.strides=Kd(o||1,2,"strides"),r.strides.forEach((function(e){return Kc(e,"strides")})),r.padding=u||"valid",ll(r.padding),r.dataFormat=s||"channelsLast",cl(r.dataFormat),r.dilationRate=Kd(c||1,2,"dilationRate"),r.dilationRate.forEach((function(e){return Kc(e,"dilationRate")})),r}return(0,F.Z)(n,[{key:"build",value:function(e){var t;e=pf(e);var n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new Mc("The channel dimension of the input should be defined. "+"Found ".concat(e[n]));var r=e[n],a=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);var i=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",i,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){var o;if(this.unitForgetBias){var u=this.biasInitializer,s=this.filters;o=new(t=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.apply(this,arguments)}return(0,F.Z)(n,[{key:"apply",value:function(e,t){return Ml([u.apply([s]),io.ones([s]),u.apply([2*s])])}}]),n}(Vl),t.className="CustomInit",t)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,o,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}},{key:"call",value:function(e,t){var n=this;return io.tidy((function(){if(3!==e.length)throw new Mc("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=t.training||!1,a=e[0],i=e[1],o=e[2];0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Ap({ones:function(){return io.onesLike(a)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var u=n.dropoutMask,s=function(e,t,n){return t&&t[n]?io.mul(t[n],e):e},c=s(a,u,0),l=s(a,u,1),f=s(a,u,2),h=s(a,u,3);0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Ap({ones:function(){return io.onesLike(i)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var d=n.recurrentDropoutMask,p=s(i,d,0),v=s(i,d,1),g=s(i,d,2),m=s(i,d,3),y=io.split(n.kernel.read(),4,3),b=(0,C.Z)(y,4),x=b[0],w=b[1],k=b[2],_=b[3],S=n.useBias?io.split(n.bias.read(),4):[null,null,null,null],E=(0,C.Z)(S,4),A=E[0],N=E[1],T=E[2],M=E[3];c=n.inputConv(c,x,A,n.padding),l=n.inputConv(l,w,N,n.padding),f=n.inputConv(f,k,T,n.padding),h=n.inputConv(h,_,M,n.padding);var D=io.split(n.recurrentKernel.read(),4,3),F=(0,C.Z)(D,4),I=F[0],O=F[1],R=F[2],Z=F[3];p=n.recurrentConv(p,I),v=n.recurrentConv(v,O),g=n.recurrentConv(g,R),m=n.recurrentConv(m,Z);var B=n.recurrentActivation.apply(io.add(c,p)),z=n.recurrentActivation.apply(io.add(l,v)),L=io.add(io.mul(z,o),io.mul(B,n.activation.apply(io.add(f,g)))),P=io.mul(n.recurrentActivation.apply(io.add(h,m)),n.activation.apply(L));return[P,P,L]}))}},{key:"getConfig",value:function(){var e=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this),t=(e.units,Np(e,["units"])),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},t),r)}},{key:"inputConv",value:function(e,t,n,r){var a=io.conv2d(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?zl(a,n,this.dataFormat):a}},{key:"recurrentConv",value:function(e,t){return io.conv2d(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}]),n}(Sp);Mp.className="ConvLSTM2DCell",io.serialization.registerClass(Mp);var Dp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){(0,D.Z)(this,n);var r=new Mp(e);return t.call(this,Object.assign(Object.assign({},e),{cell:r}))}return(0,F.Z)(n,null,[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(Tp);Dp.className="ConvLSTM2D",io.serialization.registerClass(Dp);var Fp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,e)).rate=Math.max(Math.min(e.rate,1),0),r.noiseShape=e.noiseShape,r.seed=e.seed,r.supportsMasking=!0,r}return(0,F.Z)(n,[{key:"getNoiseShape",value:function(e){if(null==this.noiseShape)return this.noiseShape;for(var t=e.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){n.invokeCallHook(e,t);var r=df(e);if(0<n.rate&&n.rate<1){var a=null!=t.training&&t.training,i=n.getNoiseShape(r);return jl((function(){return Pl(r,n.rate,i,n.seed)}),(function(){return r}),a)}return e}))}},{key:"getConfig",value:function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"dispose",value:function(){return(0,hn.Z)((0,dn.Z)(n.prototype),"dispose",this).call(this)}}]),n}(Cf);Fp.className="Dropout",io.serialization.registerClass(Fp);var Ip=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,e)).inputSpec=[{ndim:3}],r}return(0,F.Z)(n,[{key:"getNoiseShape",value:function(e){var t=e.shape;return[t[0],1,t[2]]}}]),n}(Fp);Ip.className="SpatialDropout1D",io.serialization.registerClass(Ip);var Op=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;if((0,D.Z)(this,n),(r=t.call(this,e)).activation=null,r.useBias=!0,r.kernel=null,r.bias=null,r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){var a=null;null!=e.batchSize&&(a=e.batchSize),r.batchInputShape=[a,e.inputDim]}return r.units=e.units,Kc(r.units,"units"),r.activation=Zd(e.activation),null!=e.useBias&&(r.useBias=e.useBias),r.kernelInitializer=lf(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.biasInitializer=lf(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelConstraint=Hf(e.kernelConstraint),r.biasConstraint=Hf(e.biasConstraint),r.kernelRegularizer=Wd(e.kernelRegularizer),r.biasRegularizer=Wd(e.biasRegularizer),r.activityRegularizer=Wd(e.activityRegularizer),r.supportsMasking=!0,r.inputSpec=[{minNDim:2}],r}return(0,F.Z)(n,[{key:"build",value:function(e){var t=(e=pf(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:(0,it.Z)({},-1,t)}],this.built=!0}},{key:"computeOutputShape",value:function(e){var t=(e=pf(e)).slice();return t[t.length-1]=this.units,t}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){n.invokeCallHook(e,t);var r,a=df(e),i=Qc(n.activation.getClassName());return null!=i?r=Ol(a,n.kernel.read(),i,n.bias?n.bias.read():null):(r=Ol(a,n.kernel.read()),null!=n.bias&&(r=zl(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r))),r}))}},{key:"getConfig",value:function(){var e={units:this.units,activation:Od(this.activation),useBias:this.useBias,kernelInitializer:cf(this.kernelInitializer),biasInitializer:cf(this.biasInitializer),kernelRegularizer:jd(this.kernelRegularizer),biasRegularizer:jd(this.biasRegularizer),activityRegularizer:jd(this.activityRegularizer),kernelConstraint:Vf(this.kernelConstraint),biasConstraint:Vf(this.biasConstraint)},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Cf);Op.className="Dense",io.serialization.registerClass(Op);var Rp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),e=e||{},(r=t.call(this,e)).inputSpec=[{minNDim:3}],r.dataFormat=e.dataFormat,r}return(0,F.Z)(n,[{key:"computeOutputShape",value:function(e){e=pf(e);var t,n=(0,B.Z)(e.slice(1));try{for(n.s();!(t=n.n()).done;){if(null==t.value)throw new Mc('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.')}}catch(r){n.e(r)}finally{n.f()}return[e[0],bl(e,1)]}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){n.invokeCallHook(e,t);var r=df(e);if("channelsFirst"===n.dataFormat&&r.rank>1){for(var a=[0],i=2;i<r.rank;++i)a.push(i);a.push(1),r=(0,io.transpose)(r,a)}return function(e){if(e.rank<=1)throw new Mc("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));var t=[e.shape[0],bl(e.shape,1)];return io.reshape(e,t)}(r)}))}},{key:"getConfig",value:function(){var e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);var t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Cf);Rp.className="Flatten",io.serialization.registerClass(Rp);var Zp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.activation=Zd(e.activation),r}return(0,F.Z)(n,[{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){n.invokeCallHook(e,t);var r=df(e);return n.activation.apply(r)}))}},{key:"getConfig",value:function(){var e={activation:Od(this.activation)},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Cf);Zp.className="Activation",io.serialization.registerClass(Zp);var Bp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,e)).n=e.n,r.inputSpec=[{ndim:2}],r}return(0,F.Z)(n,[{key:"computeOutputShape",value:function(e){return[e[0],this.n,e[1]]}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){return e=df(e),t=e,r=n.n,(0,io.tidy)((function(){if(2!==t.shape.length)throw new Mc("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(t.shape.length," tensor."));return Fl(Cl(t,1),[1,r,1])}));var t,r}))}},{key:"getConfig",value:function(){var e={n:this.n},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Cf);Bp.className="RepeatVector",io.serialization.registerClass(Bp);var zp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;(0,D.Z)(this,n),(r=t.call(this,e)).targetShape=e.targetShape;for(var a=0;a<r.targetShape.length;++a)r.isUnknown(r.targetShape[a])&&(r.targetShape[a]=null);return r}return(0,F.Z)(n,[{key:"isUnknown",value:function(e){return e<0||null==e}},{key:"fixUnknownDimension",value:function(e,t){for(var n="Total size of new array must be unchanged.",r=t.slice(),a=1,i=null,o=0;o<r.length;++o){var u=r[o];if(this.isUnknown(u)){if(null!==i)throw new Mc("Can only specifiy one unknown dimension.");i=o}else a*=u}var s=bl(e);if(null!==i){if(0===a||s%a!==0)throw new Mc(n);r[i]=s/a}else if(s!==a)throw new Mc(n);return r}},{key:"computeOutputShape",value:function(e){for(var t=!1,n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){n.invokeCallHook(e,t);var r=df(e),a=r.shape,i=a.slice(0,1).concat(n.fixUnknownDimension(a.slice(1),n.targetShape));return(0,io.reshape)(r,i)}))}},{key:"getConfig",value:function(){var e={targetShape:this.targetShape},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Cf);zp.className="Reshape",io.serialization.registerClass(zp);var Lp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;if((0,D.Z)(this,n),r=t.call(this,e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));var a=kl(1,e.dims.length+1);if(!io.util.arraysEqual(e.dims.slice().sort(),a))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");return r.dims=e.dims,r.dimsIncludingBatch=[0].concat(r.dims),r.inputSpec=[new xf({ndim:r.dims.length+1})],r}return(0,F.Z)(n,[{key:"computeOutputShape",value:function(e){var t=(e=pf(e)).slice();return this.dims.forEach((function(n,r){t[r+1]=e[n]})),t}},{key:"call",value:function(e,t){return(0,io.transpose)(df(e),this.dimsIncludingBatch)}},{key:"getConfig",value:function(){var e={dims:this.dims},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Cf);Lp.className="Permute",io.serialization.registerClass(Lp);var Pp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,r.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0,r}return(0,F.Z)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this),t={maskValue:this.maskValue};return Object.assign(t,e),t}},{key:"computeMask",value:function(e,t){var n=df(e);return(0,io.any)((0,io.notEqual)(n,this.maskValue),-1)}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){n.invokeCallHook(e,t);var r=df(e),a=(0,io.any)((0,io.notEqual)(r,n.maskValue),-1,!0);return(0,io.mul)(r,(0,io.cast)(a,r.dtype))}))}}]),n}(Cf);Pp.className="Masking",io.serialization.registerClass(Pp);var jp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;if((0,D.Z)(this,n),(r=t.call(this,e)).embeddings=null,r.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){var a=null;null!=e.batchSize&&(a=e.batchSize),null==e.inputLength?r.batchInputShape=[a,null]:r.batchInputShape=[a].concat(zc(e.inputLength))}return r.inputDim=e.inputDim,Kc(r.inputDim,"inputDim"),r.outputDim=e.outputDim,Kc(r.outputDim,"outputDim"),r.embeddingsInitializer=lf(e.embeddingsInitializer||r.DEFAULT_EMBEDDINGS_INITIALIZER),r.embeddingsRegularizer=Wd(e.embeddingsRegularizer),r.activityRegularizer=Wd(e.activityRegularizer),r.embeddingsConstraint=Hf(e.embeddingsConstraint),r.maskZero=e.maskZero,r.supportsMasking=e.maskZero,r.inputLength=e.inputLength,r}return(0,F.Z)(n,[{key:"build",value:function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}},{key:"warnOnIncompatibleInputShape",value:function(e){}},{key:"computeMask",value:function(e,t){var n=this;return(0,io.tidy)((function(){return n.maskZero?(e=df(e),(0,io.notEqual)(e,(0,io.zerosLike)(e))):null}))}},{key:"computeOutputShape",value:function(e){if(e=pf(e),null==this.inputLength)return[].concat((0,M.Z)(e),[this.outputDim]);var t=zc(this.inputLength);if(t.length!==e.length-1)throw new Mc('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));for(var n=0,r=0;r<t.length;++r){var a=t[r],i=e[r+1];if(null!=a&&null!=i&&a!==i)throw new Mc('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));null==a&&(t[n]=i),n++}return[e[0]].concat((0,M.Z)(t),[this.outputDim])}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){n.invokeCallHook(e,t);var r=df(e);"int32"!==r.dtype&&(r=Sl(r,"int32"));var a=Rl(n.embeddings.read(),(0,io.reshape)(r,[r.size]));return(0,io.reshape)(a,pf(n.computeOutputShape(r.shape)))}))}},{key:"getConfig",value:function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:cf(this.embeddingsInitializer),embeddingsRegularizer:jd(this.embeddingsRegularizer),activityRegularizer:jd(this.activityRegularizer),embeddingsConstraint:Vf(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Cf);jp.className="Embedding",io.serialization.registerClass(jp);var Up=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,e||{})).supportsMasking=!0,r}return(0,F.Z)(n,[{key:"mergeFunction",value:function(e){throw new Dc}},{key:"computeElementwiseOpOutputShape",value:function(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;for(var n=e.slice(0,e.length-t.length),r=0;r<t.length;++r){var a=e[e.length-t.length+r],i=t[r];if(null==a||null==i||a<0||i<0)n.push(null);else if(1===a)n.push(i);else if(1===i)n.push(a);else{if(a!==i)throw new Mc("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}},{key:"build",value:function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[pf(e)]),e.length<2)throw new Mc("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));var t,n=[],r=(0,B.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;null!=a&&null!==a[0]&&n.push(a[0])}}catch(c){r.e(c)}finally{r.f()}if((n=Hc(n)).length>1)throw new Mc("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));for(var i=null==e[0]?null:e[0].slice(1),o=1;o<e.length;++o){var u=null==e[o]?null:e[o].slice(1);i=this.computeElementwiseOpOutputShape(i,u)}var s=e.map((function(e){return e.length}));-1===e.indexOf(null)&&1===Hc(s).length?this.reshapeRequired=!1:this.reshapeRequired=!0}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){if(n.reshapeRequired){var t=[],r=e.map((function(e){return e.rank}));if(-1===r.indexOf(null)){var a,i=wl(r),o=(0,B.Z)(e);try{for(o.s();!(a=o.n()).done;){for(var u=a.value,s=u.rank,c=0;c<i-s;++c)u=Cl(u,1);t.push(u)}}catch(E){o.e(E)}finally{o.f()}return n.mergeFunction(t)}var l,f=!1,h=(0,B.Z)(e);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=d.rank;if(null==p){var v=d.shape,g=v[0],m=v.slice(1).concat([g]),y=io.reshape(d,[g].concat(bl(v.slice(1))));y=io.transpose(y,[1,0]),y=io.reshape(y,m),t.push(y),f=!0}else if(p>1){var b=kl(1,p).concat([0]);t.push(io.transpose(d,b)),f=!0}else t.push(d)}}catch(E){h.e(E)}finally{h.f()}var x=n.mergeFunction(t),w=x.rank;if(f)if(null==w){var k=x.shape,_=k[k.length-1],S=[_].concat(k.slice(0,k.length-1));x=io.reshape(io.transpose(io.reshape(x,[-1,_]),[1,0]),S)}else if(w>1){var C=[w-1].concat(kl(0,w-1));x=io.transpose(x,C)}return x}return n.mergeFunction(e)}))}},{key:"computeOutputShape",value:function(e){var t;t=null==e[0]?null:e[0].slice(1);for(var n=1;n<e.length;++n){var r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}var a,i=[],o=(0,B.Z)(e);try{for(o.s();!(a=o.n()).done;){var u=a.value;null!=u&&null!==u[0]&&i.push(u[0])}}catch(s){o.e(s)}finally{o.f()}return t=1===(i=Hc(i)).length?i.concat(t):[null].concat(t)}},{key:"computeMask",value:function(e,t){return io.tidy((function(){if(null==t)return null;if(!Array.isArray(t))throw new Mc("`mask` should be an Array");if(!Array.isArray(e))throw new Mc("`inputs` should be an Array");if(t.length!==e.length)throw new Mc("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(t.length,")"));if(t.every((function(e){return null==e})))return null;for(var n=(t=t.map((function(e){return null==e?e:io.expandDims(e,0)})))[0],r=1;r<t.length-1;++r)n=io.logicalAnd(n,t[r]);return n}))}}]),n}(Cf),Wp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){return(0,D.Z)(this,n),t.call(this,e)}return(0,F.Z)(n,[{key:"mergeFunction",value:function(e){return(0,io.tidy)((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=io.add(t,e[n]);return t}))}}]),n}(Up);Wp.className="Add",io.serialization.registerClass(Wp);var Vp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){return(0,D.Z)(this,n),t.call(this,e)}return(0,F.Z)(n,[{key:"mergeFunction",value:function(e){return(0,io.tidy)((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=io.mul(t,e[n]);return t}))}}]),n}(Up);Vp.className="Multiply",io.serialization.registerClass(Vp);var qp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){return(0,D.Z)(this,n),t.call(this,e)}return(0,F.Z)(n,[{key:"mergeFunction",value:function(e){return(0,io.tidy)((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=io.add(t,e[n]);return io.mul(1/e.length,t)}))}}]),n}(Up);qp.className="Average",io.serialization.registerClass(qp);var Hp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){return(0,D.Z)(this,n),t.call(this,e)}return(0,F.Z)(n,[{key:"mergeFunction",value:function(e){return(0,io.tidy)((function(){for(var t=e[0],n=1;n<e.length;++n)t=io.maximum(t,e[n]);return t}))}}]),n}(Up);Hp.className="Maximum",io.serialization.registerClass(Hp);var Gp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){return(0,D.Z)(this,n),t.call(this,e)}return(0,F.Z)(n,[{key:"mergeFunction",value:function(e){return(0,io.tidy)((function(){for(var t=e[0],n=1;n<e.length;++n)t=io.minimum(t,e[n]);return t}))}}]),n}(Up);Gp.className="Minimum",io.serialization.registerClass(Gp);var Xp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,e)).DEFAULT_AXIS=-1,null==e&&(e={}),r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r.supportsMasking=!0,r.reshapeRequired=!1,r}return(0,F.Z)(n,[{key:"build",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new Mc("A `Concatenate` layer should be called on a list of at least 2 inputs");var t,n=!0,r=(0,B.Z)(e);try{for(r.s();!(t=r.n()).done;){if(null!=t.value){n=!1;break}}}catch(f){r.e(f)}finally{r.f()}if(!n){for(var a=[],i=0;i<e.length;++i){var o=e[i].slice();o.splice(this.axis,1);var u,s=!1,c=(0,B.Z)(a);try{for(c.s();!(u=c.n()).done;){var l=u.value;if(io.util.arraysEqual(l,o)){s=!0;break}}}catch(f){c.e(f)}finally{c.f()}s||a.push(o)}if(a.length>1)throw new Mc("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}}},{key:"mergeFunction",value:function(e){var t=this;return(0,io.tidy)((function(){return Ml(e,t.axis)}))}},{key:"computeOutputShape",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new Mc("A `Concatenate` layer should be called on a list of inputs.");var t,n=e,r=n[0].slice(),a=this.axis<0?r.length+this.axis:this.axis,i=(0,B.Z)(n.slice(1));try{for(i.s();!(t=i.n()).done;){var o=t.value;if(null==r[a]||null==o[a]){r[a]=null;break}r[a]+=o[a]}}catch(u){i.e(u)}finally{i.f()}return r}},{key:"computeMask",value:function(e,t){var n=this;if(null==t)return null;if(!Array.isArray(t))throw new Mc("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new Mc("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new Mc("Mismatch in the length of mask (".concat(t.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return io.tidy((function(){var r=!0;if(t.forEach((function(e){null==e||(r=!1)})),r)return null;for(var a=[],i=0;i<e.length;++i)null==t[i]?a.push(io.cast(io.onesLike(e[i]),"bool")):t[i].rank<e[i].rank?a.push(io.expandDims(t[i],-1)):a.push(t[i]);var o=io.concat(a,n.axis);return io.all(o,-1,!1)}))}},{key:"getConfig",value:function(){var e={axis:this.axis},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Up);function Yp(e,t){for(;e<0;)e+=t;return e}Xp.className="Concatenate",io.serialization.registerClass(Xp);var Kp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,e)).axes=e.axes,r.normalize=null!=e.normalize&&e.normalize,r.supportsMasking=!0,r.reshapeRequired=!1,r}return(0,F.Z)(n,[{key:"build",value:function(e){io.util.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0],n=e[1];if(t.length>3||n.length>3)throw new Dc("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new Mc("Dimension incompatibility: "+"".concat(t[r[0]]," !== ").concat(n[r[1]]))}},{key:"mergeFunction",value:function(e){if(2!==e.length)throw new Mc("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));var t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((function(t,n){return Yp(t,e[n].shape.length)})):[Yp(this.axes,n.shape.length),Yp(this.axes,r.shape.length)],this.normalize&&(n=ih(n,t[0]),r=ih(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new Dc("batchDot is not implemented for tensors of 4D or higher rank yet");if(io.util.assert(e.shape.length>=2,(function(){return"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length)})),io.util.assert(e.shape.length>=2,(function(){return"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length)})),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new Dc("batchDot is not implemented for complex64-type Tensors yet.");var r=e.shape.length,a=t.shape.length;null==n&&(n=[r-1,a-2]);var i=n;return io.tidy((function(){var n,o;if(r>a){n=r-a;for(var u=[],s=0;s<n;++s)u.push(1);t=io.reshape(t,t.shape.concat(u))}else if(a>r){n=a-r;for(var c=[],l=0;l<n;++l)c.push(1);e=io.reshape(e,e.shape.concat(c))}else n=0;if(2===e.shape.length&&2===t.shape.length)o=i[0]===i[1]?io.sum(io.mul(e,t),i[0]):io.sum(io.mul(io.transpose(e,[1,0]),t),i[1]);else{var f=i[0]!==e.shape.length-1,h=i[1]===t.shape.length-1;o=io.matMul(e,t,f,h)}if(n>0){for(var d,p=[],v=d=r>a?r+a-3:r-1;v<d+n;++v)p.push(v);o=io.squeeze(o,p)}return 1===o.shape.length&&(o=io.expandDims(o,1)),o}))}(n,r,t)}},{key:"interpretAxes",value:function(e,t){return Array.isArray(this.axes)?this.axes:[Yp(this.axes,e.length),Yp(this.axes,t.length)]}},{key:"computeOutputShape",value:function(e){io.util.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new Dc("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);var a=t.concat(n);return 1===a.length&&a.push(1),a}},{key:"computeMask",value:function(e,t){return null}},{key:"getConfig",value:function(){var e={axes:this.axes,normalize:this.normalize},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Up);Kp.className="Dot",io.serialization.registerClass(Kp);var $p=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.stddev=e.stddev,r}return(0,F.Z)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this),t={stddev:this.stddev};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){n.invokeCallHook(e,t);var r=df(e);return jl((function(){return(0,io.add)(Il(r.shape,0,n.stddev),r)}),(function(){return r}),t.training||!1)}))}}]),n}(Cf);$p.className="GaussianNoise",io.serialization.registerClass($p);var Qp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r}return(0,F.Z)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){n.invokeCallHook(e,t);var r=df(e);if(n.rate>0&&n.rate<1){return jl((function(){var e=Math.sqrt(n.rate/(1-n.rate));return(0,io.mul)(r,Il(r.shape,1,e))}),(function(){return r}),t.training||!1)}return r}))}}]),n}(Cf);Qp.className="GaussianDropout",io.serialization.registerClass(Qp);var Jp=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r.noiseShape=e.noiseShape,r}return(0,F.Z)(n,[{key:"_getNoiseShape",value:function(e){return this.noiseShape||df(e).shape}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){if(n.rate<1&&n.rate>0){var r=n._getNoiseShape(e);return jl((function(){var t=df(e),a=-1.7580993408473766,i=(0,io.greaterEqual)((0,io.randomUniform)(r),n.rate);i=Sl(i,"float32");var o=Math.pow((1-n.rate)*(1+n.rate*Math.pow(a,2)),-.5),u=-o*a*n.rate,s=(0,io.add)((0,io.mul)(t,i),(0,io.mul)((0,io.add)(i,-1),a));return(0,io.add)((0,io.mul)(s,o),u)}),(function(){return df(e)}),t.training||!1)}return e}))}}]),n}(Cf);function ev(e,t,n,r,a){var i,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)i=io.batchNorm2d(e,t,n,r,a,o);else if(3===e.rank)i=io.batchNorm3d(e,t,n,r,a,o);else{if(4!==e.rank)throw new Dc("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");i=io.batchNorm4d(e,t,n,r,a,o)}return i}function tv(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return(0,io.tidy)((function(){var i=io.moments(e,r),o=i.mean,u=i.variance;return[ev(e,o,u,n,t,a),o,u]}))}function nv(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return(0,io.tidy)((function(){var i,o=io.moments(e,r),u=o.mean,s=o.variance,c=[],l=(0,B.Z)(kl(0,e.rank));try{for(l.s();!(i=l.n()).done;){var f=i.value;-1!==r.indexOf(f)?c.push(1):c.push(e.shape[f])}}catch(g){l.e(g)}finally{l.f()}var h=(0,io.reshape)(u,c),d=(0,io.reshape)(s,c),p=null==t?null:(0,io.reshape)(t,c),v=null==n?null:(0,io.reshape)(n,c);return[ev(e,h,d,v,p,a),u,s]}))}Jp.className="AlphaDropout",io.serialization.registerClass(Jp);var rv=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),null==e&&(e={}),(r=t.call(this,e)).supportsMasking=!0,r.axis=null==e.axis?-1:e.axis,r.momentum=null==e.momentum?.99:e.momentum,r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=lf(e.betaInitializer||"zeros"),r.gammaInitializer=lf(e.gammaInitializer||"ones"),r.movingMeanInitializer=lf(e.movingMeanInitializer||"zeros"),r.movingVarianceInitializer=lf(e.movingVarianceInitializer||"ones"),r.betaConstraint=Hf(e.betaConstraint),r.gammaConstraint=Hf(e.gammaConstraint),r.betaRegularizer=Wd(e.betaRegularizer),r.gammaRegularizer=Wd(e.gammaRegularizer),r}return(0,F.Z)(n,[{key:"build",value:function(e){e=pf(e);var t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new Mc("Axis ".concat(t," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new xf({ndim:e.length,axes:(0,it.Z)({},t,n)})];var r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){var r=null!=t.training&&t.training,a=df(e),i=a.shape,o=i.length,u=kl(0,o),s=n.axis>=0?n.axis:n.axis+o;u.splice(s,1);var c=Oc(1,o);c[s]=i[s];var l=u.slice();l.sort();var f=!io.util.arraysEqual(l,kl(0,o).slice(0,o-1));if(!r)return function(){if(f){var e=(0,io.reshape)(n.movingMean.read(),c),t=(0,io.reshape)(n.movingVariance.read(),c),r=n.center?(0,io.reshape)(n.beta.read(),c):null,i=n.scale?(0,io.reshape)(n.gamma.read(),c):null;return ev(a,e,t,r,i,n.epsilon)}return ev(a,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var h=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return io.util.arraysEqual(r.slice().sort(),kl(0,e.rank-1))?tv(e,t,n,r,a):nv(e,t,n,r,a)}(a,n.gamma.read(),n.beta.read(),u,n.epsilon),d=(0,C.Z)(h,3),p=d[0],v=d[1],g=d[2],m=function(e,t,n){io.tidy((function(){var r=1-n,a=e.read(),i=io.mul(io.sub(a,t),r);e.write(io.sub(a,i))}))};return m(n.movingMean,v,n.momentum),m(n.movingVariance,g,n.momentum),p}))}},{key:"getConfig",value:function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:cf(this.betaInitializer),gammaInitializer:cf(this.gammaInitializer),movingMeanInitializer:cf(this.movingMeanInitializer),movingVarianceInitializer:cf(this.movingVarianceInitializer),betaRegularizer:jd(this.betaRegularizer),gammaRegularizer:jd(this.gammaRegularizer),betaConstraint:Vf(this.betaConstraint),gammaConstraint:Vf(this.gammaConstraint)},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Cf);rv.className="BatchNormalization",io.serialization.registerClass(rv);var av=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;if((0,D.Z)(this,n),null==e&&(e={}),(r=t.call(this,e)).axis=null==e.axis?-1:e.axis,"number"===typeof r.axis){if(!Number.isInteger(r.axis))throw new Error("Expected axis to be an integer, but received ".concat(r.axis))}else{if(!Array.isArray(r.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(r.axis)));var a,i=(0,B.Z)(r.axis);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(!Number.isInteger(o))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(r.axis)))}}catch(u){i.e(u)}finally{i.f()}}return r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=lf(e.betaInitializer||"zeros"),r.gammaInitializer=lf(e.gammaInitializer||"ones"),r.betaRegularizer=Wd(e.betaRegularizer),r.gammaRegularizer=Wd(e.gammaRegularizer),r.supportsMasking=!0,r}return(0,F.Z)(n,[{key:"build",value:function(e){var t=(e=pf(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(var n=0;n<this.axis.length;++n)this.axis[n]<0&&(this.axis[n]+=t);var r,a=(0,B.Z)(this.axis);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i<0||i>=t)throw new Error("Invalid axis: ".concat(i))}}catch(u){a.e(u)}finally{a.f()}if(this.axis.length!==Hc(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));var o=this.axis.map((function(t){return e[t]}));this.scale?this.gamma=this.addWeight("gamma",o,"float32",this.gammaInitializer,this.gammaRegularizer,true):this.gamma=null,this.center?this.beta=this.addWeight("beta",o,"float32",this.betaInitializer,this.betaRegularizer,true):this.beta=null,this.built=!0}},{key:"call",value:function(e,t){var n=this,r=df(e),a=r.shape,i=a.length;return(0,io.tidy)((function(){var e,t=(0,io.moments)(r,n.axis,!0),o=t.mean,u=t.variance,s=Oc(1,i),c=(0,B.Z)(n.axis);try{for(c.s();!(e=c.n()).done;){var l=e.value;s[l]=a[l]}}catch(m){c.e(m)}finally{c.f()}for(var f=function(e){return null!=e&&e.shape.length!==i?io.reshape(e,s):e},h=n.scale?f(n.gamma.read()):null,d=n.center?f(n.beta.read()):null,p=[],v=[],g=0;g<i;++g)-1!==n.axis.indexOf(g)?(p.push(a[g]),v.push(1)):(p.push(1),v.push(a[g]));return o=io.tile(o,p),u=io.tile(u,p),null!=h&&(h=io.tile(h,v)),null!=d&&(d=io.tile(d,v)),ev(r,o,u,d,h,n.epsilon)}))}},{key:"getConfig",value:function(){var e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:cf(this.betaInitializer),gammaInitializer:cf(this.gammaInitializer),betaRegularizer:jd(this.betaRegularizer),gammaRegularizer:jd(this.gammaRegularizer)},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Cf);av.className="LayerNormalization",io.serialization.registerClass(av);var iv=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;if((0,D.Z)(this,n),null==e&&(e={}),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)r.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)r.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new Mc("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));var a,i;if("number"===typeof e.padding[0])a=[e.padding[0],e.padding[0]],i=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new Mc("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(a=e.padding[0],2!==e.padding[1].length)throw new Mc("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));i=e.padding[1]}r.padding=[a,i]}return r.inputSpec=[new xf({ndim:4})],r}return(0,F.Z)(n,[{key:"computeOutputShape",value:function(e){var t,n;return e=pf(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){return t=df(e),r=n.padding,a=n.dataFormat,(0,io.tidy)((function(){if(4!==t.rank)throw new Mc("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(t.rank,"-D tensor."));if(null==r&&(r=[[1,1],[1,1]]),2!==r.length||2!==r[0].length||2!==r[1].length)throw new Mc("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==a&&(a="channelsLast"),"channelsLast"!==a&&"channelsFirst"!==a)throw new Mc("Unknown data format: ".concat(a,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");var e;return e="channelsFirst"===a?[[0,0],[0,0],r[0],r[1]]:[[0,0],r[0],r[1],[0,0]],io.pad(t,e)}));var t,r,a}))}},{key:"getConfig",value:function(){var e={padding:this.padding,dataFormat:this.dataFormat},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Cf);function ov(e,t,n,r,a,i){return(0,io.tidy)((function(){var o;cl(a),fl(i),ll(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=Jd(e,a);var u="same"===r?"same":"valid";return o="max"===i?io.maxPool(e,t,n,u):io.avgPool(e,t,n,u),"channelsFirst"===a&&(o=io.transpose(o,[0,3,1,2])),o}))}function uv(e,t,n,r,a,i){return(0,io.tidy)((function(){var o;cl(a),fl(i),ll(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=ep(e,a);var u="same"===r?"same":"valid";return o="max"===i?io.maxPool3d(e,t,n,u):io.avgPool3d(e,t,n,u),"channelsFirst"===a&&(o=io.transpose(o,[0,4,1,2,3])),o}))}iv.className="ZeroPadding2D",io.serialization.registerClass(iv);var sv=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;if((0,D.Z)(this,n),null==e.poolSize&&(e.poolSize=2),r=t.call(this,e),"number"===typeof e.poolSize)r.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new Mc("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));r.poolSize=e.poolSize}if(Kc(r.poolSize,"poolSize"),null==e.strides)r.strides=r.poolSize;else if("number"===typeof e.strides)r.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new Mc("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));r.strides=e.strides}return Kc(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,ll(r.padding),r.inputSpec=[new xf({ndim:3})],r}return(0,F.Z)(n,[{key:"computeOutputShape",value:function(e){var t=$d((e=pf(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){n.invokeCallHook(e,t),e=Cl(df(e),2);var r=n.poolingFunction(df(e),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return io.squeeze(r,[2])}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Cf),cv=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){return(0,D.Z)(this,n),t.call(this,e)}return(0,F.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return cl(a),ll(r),ov(e,t,n,r,a,"max")}}]),n}(sv);cv.className="MaxPooling1D",io.serialization.registerClass(cv);var lv=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){return(0,D.Z)(this,n),t.call(this,e)}return(0,F.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return cl(a),ll(r),ov(e,t,n,r,a,"avg")}}]),n}(sv);lv.className="AveragePooling1D",io.serialization.registerClass(lv);var fv=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;if((0,D.Z)(this,n),null==e.poolSize&&(e.poolSize=[2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new Mc("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides];return Kc(r.poolSize,"poolSize"),Kc(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,cl(r.dataFormat),ll(r.padding),r.inputSpec=[new xf({ndim:4})],r}return(0,F.Z)(n,[{key:"computeOutputShape",value:function(e){e=pf(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=$d(t,this.poolSize[0],this.padding,this.strides[0]),n=$d(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){return n.invokeCallHook(e,t),n.poolingFunction(df(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Cf),hv=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){return(0,D.Z)(this,n),t.call(this,e)}return(0,F.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return cl(a),ll(r),ov(e,t,n,r,a,"max")}}]),n}(fv);hv.className="MaxPooling2D",io.serialization.registerClass(hv);var dv=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){return(0,D.Z)(this,n),t.call(this,e)}return(0,F.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return cl(a),ll(r),ov(e,t,n,r,a,"avg")}}]),n}(fv);dv.className="AveragePooling2D",io.serialization.registerClass(dv);var pv=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;if((0,D.Z)(this,n),null==e.poolSize&&(e.poolSize=[2,2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new Mc("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides,e.strides];return Kc(r.poolSize,"poolSize"),Kc(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,cl(r.dataFormat),ll(r.padding),r.inputSpec=[new xf({ndim:5})],r}return(0,F.Z)(n,[{key:"computeOutputShape",value:function(e){e=pf(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=$d(t,this.poolSize[0],this.padding,this.strides[0]),n=$d(n,this.poolSize[1],this.padding,this.strides[1]),r=$d(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){return n.invokeCallHook(e,t),n.poolingFunction(df(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Cf),vv=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){return(0,D.Z)(this,n),t.call(this,e)}return(0,F.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return cl(a),ll(r),uv(e,t,n,r,a,"max")}}]),n}(pv);vv.className="MaxPooling3D",io.serialization.registerClass(vv);var gv=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){return(0,D.Z)(this,n),t.call(this,e)}return(0,F.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return cl(a),ll(r),uv(e,t,n,r,a,"avg")}}]),n}(pv);gv.className="AveragePooling3D",io.serialization.registerClass(gv);var mv=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,e)).inputSpec=[new xf({ndim:3})],r}return(0,F.Z)(n,[{key:"computeOutputShape",value:function(e){return[e[0],e[2]]}},{key:"call",value:function(e,t){throw new Dc}}]),n}(Cf),yv=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){return(0,D.Z)(this,n),t.call(this,e||{})}return(0,F.Z)(n,[{key:"call",value:function(e,t){return(0,io.tidy)((function(){var t=df(e);return io.mean(t,1)}))}}]),n}(mv);yv.className="GlobalAveragePooling1D",io.serialization.registerClass(yv);var bv=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){return(0,D.Z)(this,n),t.call(this,e||{})}return(0,F.Z)(n,[{key:"call",value:function(e,t){return(0,io.tidy)((function(){var t=df(e);return io.max(t,1)}))}}]),n}(mv);bv.className="GlobalMaxPooling1D",io.serialization.registerClass(bv);var xv=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,cl(r.dataFormat),r.inputSpec=[new xf({ndim:4})],r}return(0,F.Z)(n,[{key:"computeOutputShape",value:function(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}},{key:"call",value:function(e,t){throw new Dc}},{key:"getConfig",value:function(){var e={dataFormat:this.dataFormat},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Cf),wv=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.apply(this,arguments)}return(0,F.Z)(n,[{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){var t=df(e);return"channelsLast"===n.dataFormat?io.mean(t,[1,2]):io.mean(t,[2,3])}))}}]),n}(xv);wv.className="GlobalAveragePooling2D",io.serialization.registerClass(wv);var kv=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.apply(this,arguments)}return(0,F.Z)(n,[{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){var t=df(e);return"channelsLast"===n.dataFormat?io.max(t,[1,2]):io.max(t,[2,3])}))}}]),n}(xv);kv.className="GlobalMaxPooling2D",io.serialization.registerClass(kv);var _v=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,e)).layer=e.layer,r}return(0,F.Z)(n,[{key:"build",value:function(e){this.built=!0}},{key:"trainable",get:function(){return null!=this.layer&&this.layer.trainable},set:function(e){null!=this.layer&&(this.layer.trainable=e)}},{key:"trainableWeights",get:function(){return this.layer.trainableWeights}},{key:"nonTrainableWeights",get:function(){return this.layer.nonTrainableWeights}},{key:"updates",get:function(){return this.layer._updates}},{key:"losses",get:function(){return this.layer.losses}},{key:"getWeights",value:function(){return this.layer.getWeights()}},{key:"setWeights",value:function(e){this.layer.setWeights(e)}},{key:"getConfig",value:function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"setFastWeightInitDuringBuild",value:function(e){(0,hn.Z)((0,dn.Z)(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.layer,a=ah(r,n);delete t.layer;var i={layer:a};return Object.assign(i,t),new e(i)}}]),n}(Cf),Sv=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,e)).supportsMasking=!0,r}return(0,F.Z)(n,[{key:"build",value:function(e){if((e=pf(e)).length<3)throw new Mc("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];var t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),(0,hn.Z)((0,dn.Z)(n.prototype),"build",this).call(this,e)}},{key:"computeOutputShape",value:function(e){var t=[(e=pf(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){return mp((function(e,r){return[df(n.layer.call(e,t)),[]]}),e=df(e),[],!1,null,null,!1,!0)[1]}))}}]),n}(_v);Sv.className="TimeDistributed",io.serialization.registerClass(Sv);var Cv=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;(0,D.Z)(this,n),r=t.call(this,e);var a=e.layer.getConfig(),i={};i.className=e.layer.getClassName(),i.config=a,r.forwardLayer=ah(i),a.goBackwards=!0!==a.goBackwards;var o,u={};if(u.className=e.layer.getClassName(),u.config=a,r.backwardLayer=ah(u),r.forwardLayer.name="forward_"+r.forwardLayer.name,r.backwardLayer.name="backward_"+r.backwardLayer.name,r.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,o=r.mergeMode,Xc(ul,"BidirectionalMergeMode",o),e.weights)throw new Dc("weights support is not implemented for Bidirectional layer yet.");return r._stateful=e.layer.stateful,r.returnSequences=e.layer.returnSequences,r.returnState=e.layer.returnState,r.supportsMasking=!0,r._trainable=!0,r.inputSpec=e.layer.inputSpec,r.numConstants=null,r}return(0,F.Z)(n,[{key:"trainable",get:function(){return this._trainable},set:function(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}},{key:"getWeights",value:function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}},{key:"setWeights",value:function(e){var t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),this.returnState?(r=a.slice(1),t=a[0]):t=a[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):Bc(n)}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=gp(e,r,a,this.numConstants);if(e=i.inputs,r=i.initialState,a=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(null==r||0===r.length)&&null==a)return(0,hn.Z)((0,dn.Z)(n.prototype),"apply",this).call(this,e,t);var o=[],u=[];if(null!=r){var s=r.length;if(s%2>0)throw new Mc("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,o.push.apply(o,(0,M.Z)(r));var c=r.map((function(e){return new xf({shape:e.shape})}));this.forwardLayer.stateSpec=c.slice(0,s/2),this.backwardLayer.stateSpec=c.slice(s/2),u.push.apply(u,(0,M.Z)(c))}if(null!=a)throw new Dc("Support for constants in Bidirectional layers is not implemented yet.");for(var l=o[0]instanceof wf,f=0,h=o;f<h.length;f++){if(h[f]instanceof wf!==l)throw new Mc("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors")}if(l){var d=[e].concat(o),p=this.inputSpec.concat(u),v=this.inputSpec;this.inputSpec=p;var g=(0,hn.Z)((0,dn.Z)(n.prototype),"apply",this).call(this,d,t);return this.inputSpec=v,g}return(0,hn.Z)((0,dn.Z)(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){var r,a,i,o,u=t.initialState;if(null==u)r=n.forwardLayer.call(e,t),a=n.backwardLayer.call(e,t);else{var s=u.slice(0,u.length/2),c=u.slice(u.length/2);r=n.forwardLayer.call(e,Object.assign(t,{initialState:s})),a=n.backwardLayer.call(e,Object.assign(t,{initialState:c}))}return n.returnState&&(Array.isArray(r)&&(i=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),n.returnSequences&&(a=io.reverse(a,1)),"concat"===n.mergeMode?o=Ml([r,a]):"sum"===n.mergeMode?o=io.add(r,a):"ave"===n.mergeMode?o=io.mul(.5,io.add(r,a)):"mul"===n.mergeMode?o=io.mul(r,a):null==n.mergeMode&&(o=[r,a]),n.returnState?null==n.mergeMode?o.concat(i):[o].concat(i):o}))}},{key:"resetStates",value:function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}},{key:"build",value:function(e){var t=this;dl(this.forwardLayer.name,(function(){t.forwardLayer.build(e)})),dl(this.backwardLayer.name,(function(){t.backwardLayer.build(e)})),this.built=!0}},{key:"computeMask",value:function(e,t){var n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){var r=this.forwardLayer.states.map((function(e){return null}));return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}return n}},{key:"trainableWeights",get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}},{key:"nonTrainableWeights",get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}},{key:"setFastWeightInitDuringBuild",value:function(e){(0,hn.Z)((0,dn.Z)(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e={mergeMode:this.mergeMode},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"fromConfig",value:function(e,t){var n=ah(t.layer);if(delete t.layer,null!=t.numConstants)throw new Dc("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=t;return r.layer=n,new e(r)}}]),n}(_v);Cv.className="Bidirectional",io.serialization.registerClass(Cv);var Ev=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,e)).scale=e.scale,e.offset?r.offset=e.offset:r.offset=0,r}return(0,F.Z)(n,[{key:"getConfig",value:function(){var e={scale:this.scale,offset:this.offset},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){return"float32"!==(e=df(e)).dtype&&(e=Sl(e,"float32")),(0,io.add)((0,io.mul)(e,n.scale),n.offset)}))}}]),n}(Cf);Ev.className="Rescaling",io.serialization.registerClass(Ev);var Av=io.image.resizeBilinear,Nv=io.image.cropAndResize,Tv=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,e)).height=e.height,r.width=e.width,r}return(0,F.Z)(n,[{key:"centerCrop",value:function(e,t,n,r,a,i,o,u){return(0,io.tidy)((function(){var s,c=!1,l=[t/i,n/o,(r+t)/i,(a+n)/o],f=[];3===e.rank?(c=!0,s=(0,io.stack)([e])):s=e;for(var h=0;h<s.shape[0];h++)f.push(l);var d=(0,io.tensor)(f,[f.length,4]),p=(0,io.range)(0,f.length,1,"int32"),v=Nv(s,d,p,[r,a],"nearest");return Sl(c?df((0,io.unstack)(v)):v,u)}))}},{key:"upsize",value:function(e,t,n,r){return(0,io.tidy)((function(){return Sl(Av(e,[t,n]),r)}))}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){var t=df(e),r=t.dtype,a=t.shape,i=a[a.length-3],o=a[a.length-2],u=0;i!==n.height&&(u=Math.floor((i-n.height)/2));var s=0;return o!==n.width&&0===(s=Math.floor((o-n.width)/2))&&(s=1),u>=0&&s>=0?n.centerCrop(t,u,s,n.height,n.width,i,o,r):n.upsize(e,n.height,n.width,r)}))}},{key:"getConfig",value:function(){var e={height:this.height,width:this.width},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"computeOutputShape",value:function(e){var t=(e=pf(e)).length-3,n=e.length-2;return e[t]=this.height,e[n]=this.width,e}}]),n}(Cf);Tv.className="CenterCrop",io.serialization.registerClass(Tv);var Mv=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,e)).numTokens=e.numTokens,e.outputMode?r.outputMode=e.outputMode:r.outputMode="multiHot",r}return(0,F.Z)(n,[{key:"getConfig",value:function(){var e={numTokens:this.numTokens,outputMode:this.outputMode},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"computeOutputShape",value:function(e){return null==(e=pf(e))?[this.numTokens]:"oneHot"===this.outputMode&&1!==e[e.length-1]?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){var r;if("int32"!==(e=df(e)).dtype&&(e=Sl(e,"int32")),"undefined"!==typeof t.countWeights){if("count"!==n.outputMode)throw new Mc("countWeights is not used when outputMode !== count.\n              Received countWeights=".concat(t.countWeights));r=df(t.countWeights)}var a=(0,io.max)(e),i=(0,io.min)(e),o=(0,io.greater)(n.numTokens,a).bufferSync().get(0),u=(0,io.greaterEqual)(i,0).bufferSync().get(0);if(!o||!u)throw new Mc("Input values must be between 0 < values <="+" numTokens with numTokens=".concat(n.numTokens));return function(e,t,n,r){var a=df(e);if("int32"!==a.dtype&&(a=Sl(a,"int32")),"int"===t)return a;var i=a.shape;if(0===a.rank&&(a=(0,io.expandDims)(a,-1)),"oneHot"===t&&1!==a.shape[a.shape.length-1]&&(a=(0,io.expandDims)(a,-1)),a.rank>2)throw new Mc("When outputMode is not int, maximum output rank is 2"+" Received outputMode ".concat(t," and input shape ").concat(i)+" which would result in output rank ".concat(a.rank,"."));var o,u=["multiHot","oneHot"].includes(t),s=a;if(o="undefined"!==typeof r&&"count"===t?(0,io.denseBincount)(s,r,n,u):(0,io.denseBincount)(s,[],n,u),"tfIdf"!==t)return o;if(r)return(0,io.mul)(o,r);throw new Mc("When outputMode is 'tfIdf', weights must be provided.")}(e,n.outputMode,n.numTokens,r)}))}}]),n}(Cf);Mv.className="CategoryEncoding",io.serialization.registerClass(Mv);var Dv=new Set(["bilinear","nearest"]),Fv=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;if((0,D.Z)(this,n),(r=t.call(this,e)).height=e.height,r.width=e.width,e.interpolation){if(!Dv.has(e.interpolation))throw new Mc("Invalid interpolation parameter: ".concat(e.interpolation," is not implemented"));r.interpolation=e.interpolation}else r.interpolation="bilinear";return r.cropToAspectRatio=Boolean(e.cropToAspectRatio),r}return(0,F.Z)(n,[{key:"computeOutputShape",value:function(e){var t=(e=pf(e))[2];return[this.height,this.width,t]}},{key:"getConfig",value:function(){var e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){var t=[n.height,n.width];if("bilinear"===n.interpolation)return io.image.resizeBilinear(e,t,!n.cropToAspectRatio);if("nearest"===n.interpolation)return io.image.resizeNearestNeighbor(e,t,!n.cropToAspectRatio);throw new Error("Interpolation is ".concat(n.interpolation," but only ").concat((0,M.Z)(Dv)," are supported"))}))}}]),n}(Cf);Fv.className="Resizing",io.serialization.registerClass(Fv);var Iv=function(){function e(t){(0,D.Z)(this,e),this.seed=t}return(0,F.Z)(e,[{key:"next",value:function(){if(void 0!==this.seed)return this.seed++}}]),e}();Iv.className="RandomSeed";var Ov=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,e)).randomGenerator=new Iv(e.seed),r}return(0,F.Z)(n,[{key:"getConfig",value:function(){var e={seed:this.randomGenerator.seed},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Cf);Ov.className="BaseRandomLayer";var Rv=new Set(["bilinear","nearest"]),Zv=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;(0,D.Z)(this,n),r=t.call(this,e);var a=e.factor,i=e.interpolation,o=void 0===i?"bilinear":i;if(r.factor=a,Array.isArray(r.factor)&&2===r.factor.length)r.widthLower=r.factor[0],r.widthUpper=r.factor[1];else{if(Array.isArray(r.factor)||!(r.factor>0))throw new Mc("Invalid factor: ".concat(r.factor,". Must be positive number or tuple of 2 numbers"));r.widthLower=-r.factor,r.widthUpper=r.factor}if(r.widthLower<-1||r.widthUpper<-1)throw new Mc("factor must have values larger than -1. Got: ".concat(r.factor));if(r.widthUpper<r.widthLower)throw new Mc("factor cannot have upper bound less than lower bound.\n        Got upper bound: ".concat(r.widthUpper,".\n        Got lower bound: ").concat(r.widthLower,"\n      "));if(o){if(!Rv.has(o))throw new Mc("Invalid interpolation parameter: ".concat(o," is not implemented"));r.interpolation=o}return r}return(0,F.Z)(n,[{key:"getConfig",value:function(){var e={factor:this.factor,interpolation:this.interpolation},t=(0,hn.Z)((0,dn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"computeOutputShape",value:function(e){var t=(e=pf(e))[2];return[this.imgHeight,-1,t]}},{key:"call",value:function(e,t){var n=this;return(0,io.tidy)((function(){var t=df(e);n.imgHeight=t.shape[t.shape.length-3];var r=t.shape[t.shape.length-2];n.widthFactor=(0,io.randomUniform)([1],1+n.widthLower,1+n.widthUpper,"float32",n.randomGenerator.next());var a=n.widthFactor.dataSync()[0]*r;a=Math.round(a);var i=[n.imgHeight,a];switch(n.interpolation){case"bilinear":return io.image.resizeBilinear(e,i);case"nearest":return io.image.resizeNearestNeighbor(e,i);default:throw new Error("Interpolation is ".concat(n.interpolation,"\n          but only ").concat((0,M.Z)(Rv)," are supported"))}}))}}]),n}(Ov);function Bv(e){return new Op(e)}Zv.className="RandomWidth",io.serialization.registerClass(Zv);function zv(e,t){return yh(e,t)}function Lv(e,t){return kh(e,t)}var Pv,jv;(0,io.env)().registerFlag("KEEP_INTERMEDIATE_TENSORS",(function(){return!1}),(function(e){e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(Pv||(Pv={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(jv||(jv={}));var Uv={};function Wv(e){return Uv[e]}function Vv(e,t,n,r,a){var i=t.inputParams[e];if(i&&void 0!==i.inputIndexStart){var o=i.inputIndexStart,u=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?o+1:i.inputIndexEnd,s=o<0?t.inputNames.length+o:o;if("tensor"===i.type)return qv(t.inputNames[s],n,r,a);if("tensors"===i.type){var c=t.inputs.slice(o,u);return t.inputNames.slice(o,u).filter((function(e,t){var n;return"NoOp"!==(null===(n=c[t])||void 0===n?void 0:n.op)})).map((function(e){return qv(e,n,r,a)}))}var l=qv(t.inputNames[s],n,r,a),f=l.dataSync();return"number"===i.type?f[0]:io.util.toNestedArray(l.shape,f)}var h=t.attrParams[e];return h&&h.value}function qv(e,t,n,r){var a=Yv(e,n),i=(0,C.Z)(a,2),o=i[0],u=i[1];if(null!=r){var s=r.getHashTableHandleByName(o);if(null!=s)return s}var c=n.currentContextIds.find((function(e){return!!t[Xv(o,e)]}));return void 0!==c?t[Xv(o,c)][u]:void 0}function Hv(e,t,n){return t[Xv(e,n.currentContextId)]}function Gv(e,t){var n=Yv(e,t),r=(0,C.Z)(n,3),a=r[0],i=r[1],o=r[2];return[Xv(a,t&&t.currentContextId),i,o]}function Xv(e,t){return t?"".concat(e,"-").concat(t):e}function Yv(e,t){if(""===e)return["",0,void 0];var n=null!=t&&null!=t.parseNodeNameCache;if(n){var r=t.parseNodeNameCache.get(e);if(null!=r)return r}var a,i=e.split(":");if(1===i.length)a=[e,0,void 0];else{var o=i[0],u=3===i.length?i[1]:void 0;a=[o,Number(i[i.length-1]),u]}return n&&t.parseNodeNameCache.set(e,a),a}function Kv(e,t,n){var r=Vv("pad",e,t,n);if("explicit"===r){r=Vv("explicitPaddings",e,t,n);for(var a=[[0,0],[0,0],[0,0],[0,0]],i=0;i<4;i++)a[i][0]=r[2*i],a[i][1]=r[2*i+1];return a}return r}function $v(e){return e.kept?e:(0,io.clone)(e)}var Qv=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Jv=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],eg=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],tg=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],ng=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],rg=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],ag=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],ig=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],og=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],ug=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],sg=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],cg=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],lg=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],fg=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],hg=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],dg=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],pg=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],vg=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],gg=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],mg=function(){function n(){var x;(0,D.Z)(this,n);var w=[e,t,r,a,i,o,u,s,c,l,f,h,d,p,v,g,m,y,b],k=(x=[]).concat.apply(x,(0,M.Z)(w.map((function(e){return e.json}))));this.opMappers=k.reduce((function(e,t){return e[t.tfOpName]=t,e}),{})}return(0,F.Z)(n,[{key:"transformGraph",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.node,a=[],i=[],o=[],u=r.reduce((function(e,n){return e[n.name]=t.mapNode(n),n.op.startsWith("Placeholder")?a.push(e[n.name]):"Const"===n.op?i.push(e[n.name]):null!=n.input&&0!==n.input.length||o.push(e[n.name]),e}),{}),s=[],c=[],l={},f={};null!=n&&(l=this.mapSignatureEntries(n.inputs),f=this.mapSignatureEntries(n.outputs));var h=Object.keys(u);h.forEach((function(e){var t=u[e];t.inputNames.forEach((function(e,n){var r=Gv(e),a=(0,C.Z)(r,3),i=a[0],o=a[2],s=u[i];if(null!=s.outputs){var c=s.outputs.indexOf(o);if(-1!==c){var l="".concat(i,":").concat(c);t.inputNames[n]=l}}t.inputs.push(s),s.children.push(t)}))})),0===Object.keys(f).length?h.forEach((function(e){var t=u[e];0===t.children.length&&c.push(t)})):Object.keys(f).forEach((function(e){var t=Gv(e),n=(0,C.Z)(t,1)[0],r=u[n];null!=r&&(r.signatureKey=f[e],c.push(r))})),Object.keys(l).length>0?Object.keys(l).forEach((function(e){var t=Gv(e),n=(0,C.Z)(t,1)[0],r=u[n];r&&(r.signatureKey=l[e],s.push(r))})):s=a;var d={};null!=e.library&&null!=e.library.function&&(d=e.library.function.reduce((function(e,n){return e[n.signature.name]=t.mapFunction(n),e}),{}));var p={nodes:u,inputs:s,outputs:c,weights:i,placeholders:a,signature:n,functions:d};return o.length>0&&(p.initNodes=o),p}},{key:"mapSignatureEntries",value:function(e){return Object.keys(e||{}).reduce((function(t,n){return t[e[n].name]=n,t}),{})}},{key:"mapNode",value:function(e){var t=Wv(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});var n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((function(e){return e.startsWith("^")?e.slice(1):e})),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e}),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((function(t,n){var r=n.type,a=void 0;switch(n.type){case"string":void 0===(a=bg(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=bg(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(a=Tg(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Tg(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(a=wg(e.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(a=wg(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(a=Ng(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Ng(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(a=xg(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=xg(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(a=Dg(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Dg(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(a=Ag(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Ag(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(a=Mg(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Mg(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(a=Sg(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Sg(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(a=Cg(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Cg(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":void 0===(a=_g(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=_g(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:a,type:r},t}),{})),n}},{key:"mapFunction",value:function(e){var t=this,n=e.nodeDef,r=[],a={};null!=n&&(a=n.reduce((function(e,n){return e[n.name]=t.mapNode(n),"Const"===n.op&&r.push(e[n.name]),e}),{}));var i=[],o=[];e.signature.inputArg.forEach((function(e){var t=Gv(e.name),n=(0,C.Z)(t,1)[0],r={name:n,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:kg(e.type),type:"dtype"}},children:[]};r.signatureKey=e.name,i.push(r),a[n]=r})),Object.keys(a).forEach((function(e){var t=a[e];t.inputNames.forEach((function(e,n){var r=Gv(e),i=(0,C.Z)(r,3),o=i[0],u=i[2],s=a[o];if(null!=s.outputs){var c=s.outputs.indexOf(u);if(-1!==c){var l="".concat(o,":").concat(c);t.inputNames[n]=l}}t.inputs.push(s),s.children.push(t)}))}));var u=e.ret;e.signature.outputArg.forEach((function(e){var t=Gv(u[e.name]),n=(0,C.Z)(t,2),r=n[0],i=n[1],s=a[r];null!=s&&(s.defaultOutput=i,o.push(s))}));var s=this.mapArgsToSignature(e);return{nodes:a,inputs:i,outputs:o,weights:r,placeholders:[],signature:s}}},{key:"mapArgsToSignature",value:function(e){var t=this;return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((function(e,n){return e[n.name]=t.mapArgToTensorInfo(n),e}),{}),outputs:e.signature.outputArg.reduce((function(n,r){return n[r.name]=t.mapArgToTensorInfo(r,e.ret),n}),{})}}},{key:"mapArgToTensorInfo",value:function(e,t){var n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}],[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]),n}();function yg(e,t){var n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){var t=(0,io.env)().global;if("undefined"!==typeof t.atob)return t.atob(e);if("undefined"!==typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function bg(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return null!=a?yg(a.s,r):n}function xg(e,t,n){var r=e[t];return r?r.b:n}function wg(e,t,n){var r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"===typeof a?a:parseInt(a,10)}function kg(e){switch("string"===typeof e&&(e=Pv[e]),e){case Pv.DT_FLOAT:case Pv.DT_HALF:return"float32";case Pv.DT_INT32:case Pv.DT_INT64:case Pv.DT_INT8:case Pv.DT_UINT8:return"int32";case Pv.DT_BOOL:return"bool";case Pv.DT_DOUBLE:return"float32";case Pv.DT_STRING:return"string";case Pv.DT_COMPLEX64:case Pv.DT_COMPLEX128:return"complex64";default:return null}}function _g(e,t,n){var r=e[t];return r&&r.func?r.func.name:n}function Sg(e,t,n){var r=e[t];return r&&r.type?kg(r.type):n}function Cg(e,t,n){var r=e[t];return r&&r.list&&r.list.type?r.list.type.map((function(e){return kg(e)})):n}function Eg(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((function(e){return"number"===typeof e.size?e.size:parseInt(e.size,10)})):[]}function Ag(e,t,n){var r=e[t];return r&&r.shape?Eg(r.shape):n}function Ng(e,t,n){var r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((function(e){return"number"===typeof e?e:parseInt(e,10)})):n}function Tg(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return a&&a.list&&a.list.s?a.list.s.map((function(e){return yg(e,r)})):n}function Mg(e,t,n){var r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((function(e){return Eg(e)})):n}function Dg(e,t,n){var r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var Fg=function(){function e(t,n,r){var a=this;(0,D.Z)(this,e),this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map((function(e){return a.getInput(e)})),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((function(e,t){return e[t]=a.getAttr(t),e}),{}))}return(0,F.Z)(e,[{key:"getInput",value:function(e){return qv(e,this.tensorMap,this.context)}},{key:"getAttr",value:function(e,t){var n=this.node.rawAttrs[e];if(null!=n.tensor)return qv(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return wg(this.node.rawAttrs,e,t);if(null!=n.s)return bg(this.node.rawAttrs,e,t);if(null!=n.b)return xg(this.node.rawAttrs,e,t);if(null!=n.shape)return Ag(this.node.rawAttrs,e,t);if(null!=n.type)return Sg(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return Ng(this.node.rawAttrs,e,t);if(null!=n.list.s)return Tg(this.node.rawAttrs,e,t);if(null!=n.list.shape)return Mg(this.node.rawAttrs,e,t);if(null!=n.list.b)return Dg(this.node.rawAttrs,e,t);if(null!=n.list.type)return Cg(this.node.rawAttrs,e,t)}return t}}]),e}(),Ig=n(9503),Og=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(Vv("a",e,t,n),Vv("b",e,t,n))];case"AddN":return[r.addN(Vv("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(Vv("a",e,t,n),Vv("b",e,t,n))];case"Mul":return[r.mul(Vv("a",e,t,n),Vv("b",e,t,n))];case"RealDiv":case"Div":return[r.div(Vv("a",e,t,n),Vv("b",e,t,n))];case"DivNoNan":return[r.divNoNan(Vv("a",e,t,n),Vv("b",e,t,n))];case"FloorDiv":return[r.floorDiv(Vv("a",e,t,n),Vv("b",e,t,n))];case"Sub":return[r.sub(Vv("a",e,t,n),Vv("b",e,t,n))];case"Minimum":return[r.minimum(Vv("a",e,t,n),Vv("b",e,t,n))];case"Maximum":return[r.maximum(Vv("a",e,t,n),Vv("b",e,t,n))];case"Pow":return[r.pow(Vv("a",e,t,n),Vv("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(Vv("a",e,t,n),Vv("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Rg=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(Vv("x",e,t,n))];case"Acos":return[r.acos(Vv("x",e,t,n))];case"Acosh":return[r.acosh(Vv("x",e,t,n))];case"Asin":return[r.asin(Vv("x",e,t,n))];case"Asinh":return[r.asinh(Vv("x",e,t,n))];case"Atan":return[r.atan(Vv("x",e,t,n))];case"Atan2":return[r.atan2(Vv("x",e,t,n),Vv("y",e,t,n))];case"Atanh":return[r.atanh(Vv("x",e,t,n))];case"Ceil":return[r.ceil(Vv("x",e,t,n))];case"Complex":return[r.complex(Vv("real",e,t,n),Vv("imag",e,t,n))];case"Cos":return[r.cos(Vv("x",e,t,n))];case"Cosh":return[r.cosh(Vv("x",e,t,n))];case"Elu":return[r.elu(Vv("x",e,t,n))];case"Erf":return[r.erf(Vv("x",e,t,n))];case"Exp":return[r.exp(Vv("x",e,t,n))];case"Expm1":return[r.expm1(Vv("x",e,t,n))];case"Floor":return[r.floor(Vv("x",e,t,n))];case"Log":return[r.log(Vv("x",e,t,n))];case"Log1p":return[r.log1p(Vv("x",e,t,n))];case"Imag":return[r.imag(Vv("x",e,t,n))];case"Neg":return[r.neg(Vv("x",e,t,n))];case"Reciprocal":return[r.reciprocal(Vv("x",e,t,n))];case"Real":return[r.real(Vv("x",e,t,n))];case"Relu":return[r.relu(Vv("x",e,t,n))];case"Round":return[r.round(Vv("x",e,t,n))];case"Selu":return[r.selu(Vv("x",e,t,n))];case"Sigmoid":return[r.sigmoid(Vv("x",e,t,n))];case"Sin":return[r.sin(Vv("x",e,t,n))];case"Sign":return[r.sign(Vv("x",e,t,n))];case"Sinh":return[r.sinh(Vv("x",e,t,n))];case"Softplus":return[r.softplus(Vv("x",e,t,n))];case"Sqrt":return[r.sqrt(Vv("x",e,t,n))];case"Square":return[r.square(Vv("x",e,t,n))];case"Tanh":return[r.tanh(Vv("x",e,t,n))];case"Tan":return[r.tan(Vv("x",e,t,n))];case"ClipByValue":return[r.clipByValue(Vv("x",e,t,n),Vv("clipValueMin",e,t,n),Vv("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(Vv("x",e,t,n))];case"Rsqrt":return[r.rsqrt(qv(e.inputNames[0],t,n))];case"LeakyRelu":return[r.leakyRelu(Vv("x",e,t,n),Vv("alpha",e,t,n))];case"Prelu":return[r.prelu(Vv("x",e,t,n),Vv("alpha",e,t,n))];case"IsNan":return[r.isNaN(qv(e.inputNames[0],t,n))];case"IsInf":return[r.isInf(qv(e.inputNames[0],t,n))];case"IsFinite":return[r.isFinite(qv(e.inputNames[0],t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function Zg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!==typeof e&&"number"!==typeof t){io.util.assert(e.length===t.length,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}));for(var r=0;r<e.length;r++){var a=e[r],i=t[r];io.util.assert(a<0||i<0||a===i,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}}}function Bg(e){return"number"!==typeof e&&!e.some((function(e){return e<0}))}function zg(e,t,n){var r=Lg(e,n),a=!Bg(r);if(a&&0===t.length)throw new Error("Tried to calculate elements of an empty list"+" with non-fully-defined elementShape: ".concat(r));if(a&&t.forEach((function(e){r=Lg(e.shape,r)})),!Bg(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function Lg(e,t){if("number"===typeof e)return t;if("number"===typeof t)return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));for(var n=[],r=0;r<e.length;++r){var a=e[r],i=t[r];if(a>=0&&i>=0&&a!==i)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[r]=a>=0?a:i}return n}var Pg=function(){function e(t,n,r,a,i,o,u){(0,D.Z)(this,e),this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=u,this.tensors=[],this.closed_=!1,this.idTensor=(0,io.scalar)(0),(0,io.keep)(this.idTensor)}return(0,F.Z)(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"closed",get:function(){return this.closed_}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"read",value:function(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read ")+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}},{key:"readMany",value:function(e){var t=this;return e.map((function(e){return t.read(e)}))}},{key:"write",value:function(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));var n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),Zg(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,(0,io.keep)(t),n.written=!0,this.tensors[e]=n}},{key:"writeMany",value:function(e,t){var n=this;if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,")+"because the index size: ".concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach((function(e,r){return n.write(e,t[r])}))}},{key:"gather",value:function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(var n=0;n<this.size();n++)e.push(n)}if(0===e.length)return(0,io.tensor)([],[0].concat(this.elementShape));var r=this.readMany(e);return Zg(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),(0,io.stack)(r,0)}},{key:"concat",value:function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return(0,io.tensor)([],[0].concat(this.elementShape));for(var t=[],n=0;n<this.size();n++)t.push(n);var r=this.readMany(t);return Zg(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(r[0].shape,")")),(0,io.concat)(r,0)}},{key:"scatter",value:function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));var n=Math.max.apply(Math,(0,M.Z)(e));if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,(0,io.unstack)(t,0))}},{key:"split",value:function(e,t){var n=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));var r=0,a=e.map((function(e){return r+=e}));if(r!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), ")+"and the TensorArray is not marked as dynamically resizeable");var i=0===r?0:t.size/r,o=[];(0,io.tidy)((function(){t=(0,io.reshape)(t,[1,r,i]);for(var u=0;u<e.length;++u){var s=[0,0===u?0:a[u-1],0],c=[1,e[u],i];o[u]=(0,io.reshape)((0,io.slice)(t,s,c),n.elementShape)}return o}));for(var u=[],s=0;s<e.length;s++)u[s]=s;this.writeMany(u,o)}}]),e}(),jg=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;(0,D.Z)(this,e),this.tensors=t,this.elementShape=n,this.elementDtype=r,null!=t&&t.forEach((function(e){if(r!==e.dtype)throw new Error("Invalid data types; op elements ".concat(r,", but list elements ").concat(e.dtype));Zg(n,e.shape,"TensorList shape mismatch: "),(0,io.keep)(e)})),this.idTensor=(0,io.scalar)(0),this.maxNumElements=a,(0,io.keep)(this.idTensor)}return(0,F.Z)(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"copy",value:function(){return new e((0,M.Z)(this.tensors),this.elementShape,this.elementDtype)}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"stack",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(-1!==r&&this.tensors.length!==r)throw new Error("Operation expected a list with ".concat(r," elements but got a list with ").concat(this.tensors.length," elements."));Zg(e,this.elementShape,"TensorList shape mismatch: ");var a=zg(this.elementShape,this.tensors,e);return(0,io.tidy)((function(){var e=n.tensors.map((function(e){return(0,io.reshape)(e,a)}));return(0,io.stack)(e,0)}))}},{key:"popBack",value:function(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");var n=zg(this.elementShape,this.tensors,e),r=this.tensors.pop();return r.kept=!1,Zg(r.shape,e,"TensorList shape mismatch: "),(0,io.reshape)(r,n)}},{key:"pushBack",value:function(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(Zg(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");(0,io.keep)(e),this.tensors.push(e)}},{key:"resize",value:function(t){if(t<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(t));if(-1!==this.maxNumElements&&t>this.maxNumElements)throw new Error("TensorListResize input size ".concat(t," is greater maxNumElement ").concat(this.maxNumElements,"."));var n=new e([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=t;for(var r=0;r<Math.min(this.tensors.length,t);++r)n.tensors[r]=this.tensors[r];return n}},{key:"getItem",value:function(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[e])throw new Error("element at index ".concat(e," is null."));Zg(this.tensors[e].shape,t,"TensorList shape mismatch: ");var r=zg(this.elementShape,this.tensors,t);return(0,io.reshape)(this.tensors[e],r)}},{key:"setItem",value:function(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));Zg(this.elementShape,t.shape,"TensorList shape mismatch: "),(0,io.keep)(t),null!=this.tensors[e]&&(this.tensors[e].kept=!1),this.tensors[e]=t}},{key:"gather",value:function(e,t,n){var r=this;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));Zg(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());var a=zg(this.elementShape,this.tensors,n);return 0===e.length?(0,io.tensor)([],[0].concat(a)):(0,io.tidy)((function(){var t=e.map((function(e){return(0,io.reshape)(r.tensors[e],a)}));return(0,io.stack)(t,0)}))}},{key:"concat",value:function(e,t){var n=this;if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));Zg(this.elementShape,t,"TensorList shape mismatch: ");var r=zg(this.elementShape,this.tensors,t);return 0===this.size()?(0,io.tensor)([],[0].concat(r)):(0,io.tidy)((function(){var e=n.tensors.map((function(e){return(0,io.reshape)(e,r)}));return(0,io.concat)(e,0)}))}}]),e}();function Ug(e,t,n){var r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));Zg(e.shape.slice(1),t,"TensorList shape mismatch: ");var a=(0,io.unstack)(e);return new jg(a,t,r)}function Wg(e,t,n,r){return new jg([],e,t,r)}function Vg(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));var a=Math.max.apply(Math,(0,M.Z)(t));if(null!=r&&-1!==r&&a>=r)throw new Error("Max index must be < array size (".concat(a,"  vs. ").concat(r,")"));var i=new jg([],n,e.dtype,r),o=(0,io.unstack)(e,0);return t.forEach((function(e,t){i.setItem(e,o[t])})),i}function qg(e,t,n){var r=0,a=t.map((function(e){return r+=e}));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(e.shape));for(var i=Lg(e.shape.slice(1),n),o=0===r?0:e.size/r,u=(0,io.tidy)((function(){var n=[];e=(0,io.reshape)(e,[1,r,o]);for(var u=0;u<t.length;++u){var s=[0,0===u?0:a[u-1],0],c=[1,t[u],o];n[u]=(0,io.reshape)((0,io.slice)(e,s,c),i)}return e.dispose(),n})),s=new jg([],n,e.dtype,t.length),c=0;c<u.length;c++)s.setItem(c,u[c]);return s}var Hg=function(){var e=(0,Bi.Z)(A().mark((function e(t,n,r){var a,i,o,u,s,c,l,f,h,d,p,v,g,m,y,b,x,w,k,_,S,C,E,N,T,M,D,F,I,O,R,Z,B,z,L,P,j,U,W,V,q,H,G,X,Y,K,$,Q,J,ee,te,ne,re,ae,ie,oe,ue,se,ce,le,fe,he,de,pe,ve,ge,me,ye,be,xe,we,ke,_e,Se,Ce,Ee,Ae,Ne,Te,Me,De,Fe,Ie,Oe,Re,Ze,Be,ze,Le,Pe,je,Ue,We,Ve,qe,He,Ge,Xe,Ye,Ke,$e,Qe,Je;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="If"===e.t0||"StatelessIf"===e.t0?3:"While"===e.t0||"StatelessWhile"===e.t0?15:"LoopCond"===e.t0?19:"Switch"===e.t0?21:"Merge"===e.t0?32:"Enter"===e.t0?37:"Exit"===e.t0?41:"NextIteration"===e.t0?44:"TensorArrayV3"===e.t0?47:"TensorArrayWriteV3"===e.t0?57:"TensorArrayReadV3"===e.t0?63:"TensorArrayGatherV3"===e.t0?67:"TensorArrayScatterV3"===e.t0?72:"TensorArrayConcatV3"===e.t0?78:"TensorArraySplitV3"===e.t0?82:"TensorArraySizeV3"===e.t0?88:"TensorArrayCloseV3"===e.t0?91:"TensorListSetItem"===e.t0?95:"TensorListGetItem"===e.t0?101:"TensorListScatterV2"===e.t0||"TensorListScatter"===e.t0?107:"TensorListReserve"===e.t0||"EmptyTensorList"===e.t0?114:"TensorListGather"===e.t0?122:"TensorListStack"===e.t0?128:"TensorListFromTensor"===e.t0?134:"TensorListConcat"===e.t0||"TensorListConcatV2"===e.t0?140:"TensorListPushBack"===e.t0?145:"TensorListPopBack"===e.t0?150:"TensorListSplit"===e.t0?155:"TensorListLength"===e.t0?161:"TensorListResize"===e.t0?164:170;break;case 3:return a=Vv("thenBranch",t,n,r),i=Vv("elseBranch",t,n,r),o=Vv("cond",t,n,r),u=Vv("args",t,n,r),e.next=9,o.data();case 9:if(!e.sent[0]){e.next=14;break}return e.abrupt("return",r.functionMap[a].executeFunctionAsync(u,r.tensorArrayMap,r.tensorListMap));case 14:return e.abrupt("return",r.functionMap[i].executeFunctionAsync(u,r.tensorArrayMap,r.tensorListMap));case 15:return e.delegateYield(A().mark((function e(){var a,i,o,u,s,c,l,f;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Vv("body",t,n,r),i=Vv("cond",t,n,r),o=Vv("args",t,n,r),e.next=5,r.functionMap[i].executeFunctionAsync(o,r.tensorArrayMap,r.tensorListMap);case 5:return u=e.sent,s=o.map((function(e){return e.id})),e.next=9,u[0].data();case 9:c=e.sent,u.forEach((function(e){e.kept||-1!==s.indexOf(e.id)||e.dispose()})),l=o,f=A().mark((function e(){var t,n,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l,e.next=3,r.functionMap[a].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 3:return l=e.sent,n=l.map((function(e){return e.id})),t.forEach((function(e){e.kept||-1!==s.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()})),e.next=8,r.functionMap[i].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 8:return o=e.sent,e.next=11,o[0].data();case 11:c=e.sent,o.forEach((function(e){e.kept||-1!==s.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()}));case 13:case"end":return e.stop()}}),e)}));case 13:if(!c[0]){e.next=17;break}return e.delegateYield(f(),"t0",15);case 15:e.next=13;break;case 17:return e.abrupt("return",{v:l});case 18:case"end":return e.stop()}}),e)}))(),"t1",16);case 16:if("object"!==typeof(s=e.t1)){e.next=19;break}return e.abrupt("return",s.v);case 19:return c=Vv("pred",t,n,r),e.abrupt("return",[$v(c)]);case 21:return l=Vv("pred",t,n,r),(f=Vv("data",t,n,r)).kept||(f=$v(f)),e.next=26,l.data();case 26:if(!e.sent[0]){e.next=30;break}e.t2=[void 0,f],e.next=31;break;case 30:e.t2=[f,void 0];case 31:return e.abrupt("return",e.t2);case 32:if(h=t.inputNames.find((function(e){return void 0!==qv(e,n,r)})),!h){e.next=36;break}return d=qv(h,n,r),e.abrupt("return",[$v(d)]);case 36:return e.abrupt("return",void 0);case 37:return p=Vv("frameName",t,n,r),v=Vv("tensor",t,n,r),r.enterFrame(p),e.abrupt("return",[$v(v)]);case 41:return g=Vv("tensor",t,n,r),r.exitFrame(),e.abrupt("return",[$v(g)]);case 44:return m=Vv("tensor",t,n,r),r.nextIteration(),e.abrupt("return",[$v(m)]);case 47:return y=Vv("size",t,n,r),b=Vv("dtype",t,n,r),x=Vv("elementShape",t,n,r),w=Vv("dynamicSize",t,n,r),k=Vv("clearAfterRead",t,n,r),_=Vv("identicalElementShapes",t,n,r),S=Vv("name",t,n,r),C=new Pg(S,b,y,x,_,w,k),r.addTensorArray(C),e.abrupt("return",[C.idTensor,(0,io.scalar)(1)]);case 57:return E=Vv("tensorArrayId",t,n,r),N=Vv("index",t,n,r),T=Vv("tensor",t,n,r),(M=r.getTensorArray(E.id)).write(N,T),e.abrupt("return",[M.idTensor]);case 63:return D=Vv("tensorArrayId",t,n,r),F=Vv("index",t,n,r),I=r.getTensorArray(D.id),e.abrupt("return",[I.read(F)]);case 67:return O=Vv("tensorArrayId",t,n,r),R=Vv("indices",t,n,r),Z=Vv("dtype",t,n,r),B=r.getTensorArray(O.id),e.abrupt("return",[B.gather(R,Z)]);case 72:return z=Vv("tensorArrayId",t,n,r),L=Vv("indices",t,n,r),P=Vv("tensor",t,n,r),(j=r.getTensorArray(z.id)).scatter(L,P),e.abrupt("return",[j.idTensor]);case 78:return U=Vv("tensorArrayId",t,n,r),W=r.getTensorArray(U.id),V=Vv("dtype",t,n,r),e.abrupt("return",[W.concat(V)]);case 82:return q=Vv("tensorArrayId",t,n,r),H=Vv("tensor",t,n,r),G=Vv("lengths",t,n,r),(X=r.getTensorArray(q.id)).split(G,H),e.abrupt("return",[X.idTensor]);case 88:return Y=Vv("tensorArrayId",t,n,r),K=r.getTensorArray(Y.id),e.abrupt("return",[(0,io.scalar)(K.size(),"int32")]);case 91:return $=Vv("tensorArrayId",t,n,r),(Q=r.getTensorArray($.id)).clearAndClose(),e.abrupt("return",[Q.idTensor]);case 95:return J=Vv("tensorListId",t,n,r),ee=Vv("index",t,n,r),te=Vv("tensor",t,n,r),(ne=r.getTensorList(J.id)).setItem(ee,te),e.abrupt("return",[ne.idTensor]);case 101:return re=Vv("tensorListId",t,n,r),ae=Vv("index",t,n,r),ie=Vv("elementShape",t,n,r),oe=Vv("elementDType",t,n,r),ue=r.getTensorList(re.id),e.abrupt("return",[ue.getItem(ae,ie,oe)]);case 107:return se=Vv("indices",t,n,r),ce=Vv("tensor",t,n,r),le=Vv("elementShape",t,n,r),fe=Vv("numElements",t,n,r),he=Vg(ce,se,le,fe),r.addTensorList(he),e.abrupt("return",[he.idTensor]);case 114:return de=Vv("elementShape",t,n,r),pe=Vv("elementDType",t,n,r),ve="TensorListReserve"===t.op?"numElements":"maxNumElements",ge=Vv(ve,t,n,r),me="TensorListReserve"===t.op?-1:ge,ye=Wg(de,pe,0,me),r.addTensorList(ye),e.abrupt("return",[ye.idTensor]);case 122:return be=Vv("tensorListId",t,n,r),xe=Vv("indices",t,n,r),we=Vv("elementShape",t,n,r),ke=Vv("elementDType",t,n,r),_e=r.getTensorList(be.id),e.abrupt("return",[_e.gather(xe,ke,we)]);case 128:return Se=Vv("tensorListId",t,n,r),Ce=Vv("elementShape",t,n,r),Ee=Vv("elementDType",t,n,r),Ae=Vv("numElements",t,n,r),Ne=r.getTensorList(Se.id),e.abrupt("return",[Ne.stack(Ce,Ee,Ae)]);case 134:return Te=Vv("tensor",t,n,r),Me=Vv("elementShape",t,n,r),De=Vv("elementDType",t,n,r),Fe=Ug(Te,Me,De),r.addTensorList(Fe),e.abrupt("return",[Fe.idTensor]);case 140:return Ie=Vv("tensorListId",t,n,r),Oe=r.getTensorList(Ie.id),Re=Vv("dtype",t,n,r),Ze=Vv("elementShape",t,n,r),e.abrupt("return",[Oe.concat(Re,Ze)]);case 145:return Be=Vv("tensorListId",t,n,r),ze=Vv("tensor",t,n,r),(Le=r.getTensorList(Be.id)).pushBack(ze),e.abrupt("return",[Le.idTensor]);case 150:return Pe=Vv("tensorListId",t,n,r),je=Vv("elementShape",t,n,r),Ue=Vv("elementDType",t,n,r),We=r.getTensorList(Pe.id),e.abrupt("return",[We.popBack(je,Ue)]);case 155:return Ve=Vv("tensor",t,n,r),qe=Vv("elementShape",t,n,r),He=Vv("lengths",t,n,r),Ge=qg(Ve,He,qe),r.addTensorList(Ge),e.abrupt("return",[Ge.idTensor]);case 161:return Xe=Vv("tensorListId",t,n,r),Ye=r.getTensorList(Xe.id),e.abrupt("return",[(0,io.scalar)(Ye.size(),"int32")]);case 164:return Ke=Vv("tensorListId",t,n,r),$e=Vv("size",t,n,r),Qe=r.getTensorList(Ke.id),Je=Qe.resize($e),r.addTensorList(Je),e.abrupt("return",[Je.idTensor]);case 170:throw TypeError("Node type ".concat(t.op," is not implemented"));case 171:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function Gg(e,t,n){var r=Vv("fusedOps",e,t,n),a=(0,C.Z)(r,2),i=a[0],o=a[1],u="biasadd"===i,s=!u,c="prelu"===o,l="fusedbatchnorm"===i,f=Vv("numArgs",e,t,n);if(u){if(c&&2!==f)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!c&&u&&1!==f)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");var h=Vv("strides",e,t,n),d=Kv(e,t,n),p=Vv("dataFormat",e,t,n).toUpperCase(),v=Vv("dilations",e,t,n),g=Vv("args",e,t,n),m=(0,C.Z)(g,2),y=m[0],b=m[1];return s&&(b=y,y=void 0),{stride:h,pad:d,dataFormat:p,dilations:v,biasArg:y,preluArg:b,activationFunc:o,leakyreluAlpha:Vv("leakyreluAlpha",e,t,n)}}var Xg=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"Conv1D":var a=Vv("stride",e,t,n),i=Vv("pad",e,t,n),o=Vv("dataFormat",e,t,n).toUpperCase(),u=Vv("dilation",e,t,n);return[r.conv1d(Vv("x",e,t,n),Vv("filter",e,t,n),a,i,o,u)];case"Conv2D":var s=Vv("strides",e,t,n),c=Kv(e,t,n),l=Vv("dataFormat",e,t,n).toUpperCase(),f=Vv("dilations",e,t,n);return[r.conv2d(Vv("x",e,t,n),Vv("filter",e,t,n),[s[1],s[2]],c,l,[f[1],f[2]])];case"_FusedConv2D":var h=Gg(e,t,n),d=h.stride,p=h.pad,v=h.dataFormat,g=h.dilations,m=h.biasArg,y=h.preluArg,b=h.activationFunc,w=h.leakyreluAlpha;return[r.fused.conv2d({x:Vv("x",e,t,n),filter:Vv("filter",e,t,n),strides:[d[1],d[2]],pad:p,dataFormat:v,dilations:[g[1],g[2]],bias:m,activation:b,preluActivationWeights:y,leakyreluAlpha:w})];case"FusedDepthwiseConv2dNative":var k=Gg(e,t,n),_=k.stride,S=k.pad,C=k.dataFormat,E=k.dilations,A=k.biasArg,N=k.preluArg,T=k.activationFunc,M=k.leakyreluAlpha;return[r.fused.depthwiseConv2d({x:Vv("x",e,t,n),filter:Vv("filter",e,t,n),strides:[_[1],_[2]],pad:S,dataFormat:C,dilations:[E[1],E[2]],bias:A,activation:T,preluActivationWeights:N,leakyreluAlpha:M})];case"Conv2DBackpropInput":case"Conv2dTranspose":var D=Vv("outputShape",e,t,n),F=Vv("strides",e,t,n),I=Kv(e,t,n);return[r.conv2dTranspose(Vv("x",e,t,n),Vv("filter",e,t,n),D,[F[1],F[2]],I)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":var O=Vv("strides",e,t,n),R=Kv(e,t,n),Z=Vv("dilations",e,t,n),B=Vv("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(Vv("input",e,t,n),Vv("filter",e,t,n),[O[1],O[2]],R,B,[Z[1],Z[2]])];case"Conv3D":var z=Vv("strides",e,t,n),L=Vv("pad",e,t,n),P=Vv("dataFormat",e,t,n).toUpperCase(),j=Vv("dilations",e,t,n);return[r.conv3d(Vv("x",e,t,n),Vv("filter",e,t,n),[z[1],z[2],z[3]],L,P,[j[1],j[2],j[3]])];case"AvgPool":var U=Vv("strides",e,t,n),W=Vv("pad",e,t,n),V=Vv("kernelSize",e,t,n);return[r.avgPool(Vv("x",e,t,n),[V[1],V[2]],[U[1],U[2]],W)];case"MaxPool":var q=Vv("strides",e,t,n),H=Vv("pad",e,t,n),G=Vv("kernelSize",e,t,n);return[r.maxPool(Vv("x",e,t,n),[G[1],G[2]],[q[1],q[2]],H)];case"MaxPoolWithArgmax":var X=Vv("strides",e,t,n),Y=Vv("pad",e,t,n),K=Vv("kernelSize",e,t,n),$=Vv("includeBatchInIndex",e,t,n),Q=r.maxPoolWithArgmax(Vv("x",e,t,n),[K[1],K[2]],[X[1],X[2]],Y,$),J=Q.result,ee=Q.indexes;return[J,ee];case"AvgPool3D":var te=Vv("strides",e,t,n),ne=Vv("pad",e,t,n),re=Vv("kernelSize",e,t,n);return[r.avgPool3d(Vv("x",e,t,n),[re[1],re[2],re[3]],[te[1],te[2],te[3]],ne)];case"MaxPool3D":var ae=Vv("strides",e,t,n),ie=Vv("pad",e,t,n),oe=Vv("kernelSize",e,t,n);return[r.maxPool3d(Vv("x",e,t,n),[oe[1],oe[2],oe[3]],[ae[1],ae[2],ae[3]],ie)];case"Dilation2D":var ue=Vv("strides",e,t,n),se=Vv("pad",e,t,n),ce=Vv("dilations",e,t,n),le=ue[1],fe=ue[2],he=ce[1],de=ce[2];return[r.dilation2d(Vv("x",e,t,n),Vv("filter",e,t,n),[le,fe],se,[he,de],"NHWC")];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Yg=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"Fill":var a=Vv("shape",e,t,n),i=Vv("dtype",e,t,n),o=Vv("value",e,t,n);return[r.fill(a,o,i)];case"LinSpace":var u=Vv("start",e,t,n),s=Vv("stop",e,t,n),c=Vv("num",e,t,n);return[r.linspace(u,s,c)];case"Multinomial":var l=Vv("logits",e,t,n),f=Vv("numSamples",e,t,n),h=Vv("seed",e,t,n);return[r.multinomial(l,f,h)];case"OneHot":var d=Vv("indices",e,t,n),p=Vv("depth",e,t,n),v=Vv("onValue",e,t,n),g=Vv("offValue",e,t,n),m=Vv("dtype",e,t,n);return[r.oneHot(d,p,v,g,m)];case"Ones":return[r.ones(Vv("shape",e,t,n),Vv("dtype",e,t,n))];case"OnesLike":return[r.onesLike(Vv("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(Vv("shape",e,t,n),Vv("dtype",e,t,n),Vv("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(Vv("shape",e,t,n),Vv("minval",e,t,n),Vv("maxval",e,t,n),Vv("dtype",e,t,n))];case"RandomUniformInt":return[r.randomUniformInt(Vv("shape",e,t,n),Vv("minval",e,t,n),Vv("maxval",e,t,n),Vv("seed",e,t,n))];case"Range":var y=Vv("start",e,t,n),b=Vv("stop",e,t,n),w=Vv("step",e,t,n);return[r.range(y,b,w,Vv("dtype",e,t,n))];case"TruncatedNormal":var k=Vv("shape",e,t,n),_=Vv("mean",e,t,n),S=Vv("stdDev",e,t,n),C=Vv("seed",e,t,n);return[r.truncatedNormal(k,_,S,Vv("dtype",e,t,n),C)];case"Zeros":return[r.zeros(Vv("shape",e,t,n),Vv("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(Vv("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function Kg(e,t,n){return{boxes:Vv("boxes",e,t,n),scores:Vv("scores",e,t,n),maxOutputSize:Vv("maxOutputSize",e,t,n),iouThreshold:Vv("iouThreshold",e,t,n),scoreThreshold:Vv("scoreThreshold",e,t,n),softNmsSigma:Vv("softNmsSigma",e,t,n)}}var $g=function(){var e=(0,Bi.Z)(A().mark((function e(t,n,r,a){var i,o,u,s,c,l,f,h,d,p,v,g,m,y,b,w,k,_,S,C,E,N,T,M,D,F=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=F.length>4&&void 0!==F[4]?F[4]:x,e.t0=t.op,e.next="NonMaxSuppressionV5"===e.t0?4:"NonMaxSuppressionV4"===e.t0?9:"NonMaxSuppressionV3"===e.t0||"NonMaxSuppressionV2"===e.t0?15:"Where"===e.t0?20:"ListDiff"===e.t0?27:28;break;case 4:return o=Kg(t,n,r),u=o.boxes,s=o.scores,c=o.maxOutputSize,l=o.iouThreshold,f=o.scoreThreshold,h=o.softNmsSigma,e.next=7,i.image.nonMaxSuppressionWithScoreAsync(u,s,c,l,f,h);case 7:return d=e.sent,e.abrupt("return",[d.selectedIndices,d.selectedScores]);case 9:return p=Kg(t,n,r),v=p.boxes,g=p.scores,m=p.maxOutputSize,y=p.iouThreshold,b=p.scoreThreshold,w=Vv("padToMaxOutputSize",t,n,r),e.next=13,i.image.nonMaxSuppressionPaddedAsync(v,g,m,y,b,w);case 13:return k=e.sent,e.abrupt("return",[k.selectedIndices,k.validOutputs]);case 15:return _=Kg(t,n,r),S=_.boxes,C=_.scores,E=_.maxOutputSize,N=_.iouThreshold,T=_.scoreThreshold,e.next=18,i.image.nonMaxSuppressionAsync(S,C,E,N,T);case 18:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 20:return M=i.cast(Vv("condition",t,n,r),"bool"),e.next=23,i.whereAsync(M);case 23:return e.t2=e.sent,D=[e.t2],M.dispose(),e.abrupt("return",D);case 27:return e.abrupt("return",i.setdiff1dAsync(Vv("x",t,n,r),Vv("y",t,n,r)));case 28:throw TypeError("Node type ".concat(t.op," is not implemented"));case 29:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Qg=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"LowerBound":var a=Vv("sortedSequence",e,t,n),i=Vv("values",e,t,n);return[r.lowerBound(a,i)];case"TopKV2":var o=Vv("x",e,t,n),u=Vv("k",e,t,n),s=Vv("sorted",e,t,n),c=r.topk(o,u,s);return[c.values,c.indices];case"UpperBound":var l=Vv("sortedSequence",e,t,n),f=Vv("values",e,t,n);return[r.upperBound(l,f)];case"Unique":var h=Vv("x",e,t,n),d=r.unique(h);return[d.values,d.indices];case"UniqueV2":var p=Vv("x",e,t,n),v=Vv("axis",e,t,n),g=r.unique(p,v);return[g.values,g.indices];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Jg=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":var a=Vv("default",e,t,n);return[qv(e.name,t,n)||a];case"Placeholder":return[qv(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":var i=Vv("x",e,t,n);return[$v(i)];case"IdentityN":return Vv("x",e,t,n).map((function(e){return $v(e)}));case"Snapshot":var o=Vv("x",e,t,n);return[$v(o)];case"Shape":return[r.tensor1d(Vv("x",e,t,n).shape,"int32")];case"ShapeN":return Vv("x",e,t,n).map((function(e){return r.tensor1d(e.shape)}));case"Size":return[r.scalar(Vv("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(Vv("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":var u=Vv("x",e,t,n),s=Vv("data",e,t,n),c=Vv("message",e,t,n),l=Vv("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(c);for(var f=0;f<s.length;f++)console.log(Array.prototype.slice.call(s[f].dataSync()).slice(0,l));return[u];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},em=function(){function e(t,n){(0,D.Z)(this,e),this.keyDType=t,this.valueDType=n,this.handle=(0,io.scalar)(0),this.tensorMap=new Map,(0,io.keep)(this.handle)}return(0,F.Z)(e,[{key:"id",get:function(){return this.handle.id}},{key:"clearAndClose",value:function(){this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),this.handle.dispose()}},{key:"size",value:function(){return this.tensorMap.size}},{key:"tensorSize",value:function(){return po.i(this.size(),"int32")}},{key:"import",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){var r,a=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),e.abrupt("return",(0,io.tidy)((function(){var e=(0,io.unstack)(n),t=r.length,i=e.length;io.util.assert(t===i,(function(){return"The number of elements doesn't match, keys has "+"".concat(t," elements, the values has ").concat(i," ")+"elements."}));for(var o=0;o<t;o++){var u=r[o],s=e[o];(0,io.keep)(s),a.tensorMap.set(u,s)}return a.handle})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"find",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){var r,a=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,e.abrupt("return",(0,io.tidy)((function(){for(var e=[],t=0;t<r.length;t++){var i=r[t],o=a.findWithDefault(i,n);e.push(o)}return(0,io.stack)(e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"findWithDefault",value:function(e,t){var n=this.tensorMap.get(e);return null!=n?n:t}},{key:"checkKeyAndValueTensor",value:function(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ")+"".concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ")+"".concat(t.dtype))}}]),e}(),tm=function(){var e=(0,Bi.Z)(A().mark((function e(t,n,r,a){var i,o,u,s,c,l,f,h,d,p,v,g,m,y;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="HashTable"===e.t0||"HashTableV2"===e.t0?3:"InitializeTable"===e.t0||"InitializeTableV2"===e.t0||"LookupTableImport"===e.t0||"LookupTableImportV2"===e.t0?13:"LookupTableFind"===e.t0||"LookupTableFindV2"===e.t0?21:"LookupTableSize"===e.t0||"LookupTableSizeV2"===e.t0?29:32;break;case 3:if(null==(i=a.getHashTableHandleByName(t.name))){e.next=8;break}return e.abrupt("return",[i]);case 8:return o=Vv("keyDType",t,n,r),u=Vv("valueDType",t,n,r),s=new em(o,u),a.addHashTable(t.name,s),e.abrupt("return",[s.handle]);case 13:return c=Vv("tableHandle",t,n,r,a),l=Vv("keys",t,n,r),f=Vv("values",t,n,r),h=a.getHashTableById(c.id),e.next=19,h.import(l,f);case 19:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 21:return d=Vv("tableHandle",t,n,r,a),p=Vv("keys",t,n,r),v=Vv("defaultValue",t,n,r),g=a.getHashTableById(d.id),e.next=27,g.find(p,v);case 27:return e.t2=e.sent,e.abrupt("return",[e.t2]);case 29:return m=Vv("tableHandle",t,n,r,a),y=a.getHashTableById(m.id),e.abrupt("return",[y.tensorSize()]);case 32:throw TypeError("Node type ".concat(t.op," is not implemented"));case 33:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),nm=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"ResizeBilinear":var a=Vv("images",e,t,n),i=Vv("size",e,t,n),o=Vv("alignCorners",e,t,n),u=Vv("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(a,[i[0],i[1]],o,u)];case"ResizeNearestNeighbor":var s=Vv("images",e,t,n),c=Vv("size",e,t,n),l=Vv("alignCorners",e,t,n),f=Vv("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(s,[c[0],c[1]],l,f)];case"CropAndResize":var h=Vv("image",e,t,n),d=Vv("boxes",e,t,n),p=Vv("boxInd",e,t,n),v=Vv("cropSize",e,t,n),g=Vv("method",e,t,n),m=Vv("extrapolationValue",e,t,n);return[r.image.cropAndResize(h,d,p,v,g,m)];case"ImageProjectiveTransformV3":var y=Vv("images",e,t,n),b=Vv("transforms",e,t,n),w=Vv("outputShape",e,t,n),k=Vv("fillValue",e,t,n),_=Vv("interpolation",e,t,n),S=Vv("fillMode",e,t,n);return[r.image.transform(y,b,_.toLowerCase(),S.toLowerCase(),k,w)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},rm=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"Equal":return[r.equal(Vv("a",e,t,n),Vv("b",e,t,n))];case"NotEqual":return[r.notEqual(Vv("a",e,t,n),Vv("b",e,t,n))];case"Greater":return[r.greater(Vv("a",e,t,n),Vv("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(Vv("a",e,t,n),Vv("b",e,t,n))];case"Less":return[r.less(Vv("a",e,t,n),Vv("b",e,t,n))];case"LessEqual":return[r.lessEqual(Vv("a",e,t,n),Vv("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(Vv("a",e,t,n),Vv("b",e,t,n))];case"LogicalNot":return[r.logicalNot(Vv("a",e,t,n))];case"LogicalOr":return[r.logicalOr(Vv("a",e,t,n),Vv("b",e,t,n))];case"Select":case"SelectV2":return[r.where(Vv("condition",e,t,n),Vv("a",e,t,n),Vv("b",e,t,n))];case"BitwiseAnd":return[r.bitwiseAnd(Vv("a",e,t,n),Vv("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},am=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(Vv("a",e,t,n),Vv("b",e,t,n),Vv("transposeA",e,t,n),Vv("transposeB",e,t,n))];case"Einsum":return[r.einsum.apply(r,[Vv("equation",e,t,n)].concat((0,M.Z)(Vv("tensors",e,t,n))))];case"Transpose":return[r.transpose(Vv("x",e,t,n),Vv("perm",e,t,n))];case"_FusedMatMul":var a=Vv("fusedOps",e,t,n),i=(0,C.Z)(a,2),o=i[0],u=i[1],s="biasadd"===o,c="prelu"===u,l=Vv("numArgs",e,t,n),f=Vv("leakyreluAlpha",e,t,n);if(s){if(c&&2!==l)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!c&&1!==l)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var h=Vv("args",e,t,n),d=(0,C.Z)(h,2),p=d[0],v=d[1];return[r.fused.matMul({a:Vv("a",e,t,n),b:Vv("b",e,t,n),transposeA:Vv("transposeA",e,t,n),transposeB:Vv("transposeB",e,t,n),bias:p,activation:u,preluActivationWeights:v,leakyreluAlpha:f})];case"MatrixBandPart":return[r.linalg.bandPart(Vv("a",e,t,n),Vv("numLower",e,t,n),Vv("numUpper",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},im=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(Vv("x",e,t,n),Vv("axis",e,t,n),Vv("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[r.batchNorm(Vv("x",e,t,n),Vv("mean",e,t,n),Vv("variance",e,t,n),Vv("offset",e,t,n),Vv("scale",e,t,n),Vv("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(Vv("x",e,t,n),Vv("radius",e,t,n),Vv("bias",e,t,n),Vv("alpha",e,t,n),Vv("beta",e,t,n))];case"Softmax":return[r.softmax(Vv("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(Vv("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},om=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"RaggedGather":var a=r.raggedGather(Vv("paramsNestedSplits",e,t,n),Vv("paramsDenseValues",e,t,n),Vv("indices",e,t,n),Vv("outputRaggedRank",e,t,n)),i=a.outputNestedSplits,o=a.outputDenseValues;return i.concat(o);case"RaggedRange":var u=r.raggedRange(Vv("starts",e,t,n),Vv("limits",e,t,n),Vv("splits",e,t,n)),s=u.rtNestedSplits,c=u.rtDenseValues;return[s,c];case"RaggedTensorToTensor":return[r.raggedTensorToTensor(Vv("shape",e,t,n),Vv("values",e,t,n),Vv("defaultValue",e,t,n),Vv("rowPartitionTensors",e,t,n),Vv("rowPartitionTypes",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},um=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"Max":var a=Vv("axis",e,t,n),i=Vv("keepDims",e,t,n);return[r.max(Vv("x",e,t,n),a,i)];case"Mean":var o=Vv("axis",e,t,n),u=Vv("keepDims",e,t,n);return[r.mean(Vv("x",e,t,n),o,u)];case"Min":var s=Vv("axis",e,t,n),c=Vv("keepDims",e,t,n);return[r.min(Vv("x",e,t,n),s,c)];case"Sum":var l=Vv("axis",e,t,n),f=Vv("keepDims",e,t,n);return[r.sum(Vv("x",e,t,n),l,f)];case"All":var h=Vv("axis",e,t,n),d=Vv("keepDims",e,t,n);return[r.all(Vv("x",e,t,n),h,d)];case"Any":var p=Vv("axis",e,t,n),v=Vv("keepDims",e,t,n);return[r.any(Vv("x",e,t,n),p,v)];case"ArgMax":var g=Vv("axis",e,t,n);return[r.argMax(Vv("x",e,t,n),g)];case"ArgMin":var m=Vv("axis",e,t,n);return[r.argMin(Vv("x",e,t,n),m)];case"Prod":var y=Vv("axis",e,t,n),b=Vv("keepDims",e,t,n);return[r.prod(Vv("x",e,t,n),y,b)];case"Cumprod":var w=Vv("axis",e,t,n),k=Vv("exclusive",e,t,n),_=Vv("reverse",e,t,n);return[r.cumprod(Vv("x",e,t,n),w,k,_)];case"Cumsum":var S=Vv("axis",e,t,n),C=Vv("exclusive",e,t,n),E=Vv("reverse",e,t,n);return[r.cumsum(Vv("x",e,t,n),S,C,E)];case"Bincount":var A=Vv("x",e,t,n),N=Vv("weights",e,t,n),T=Vv("size",e,t,n);return[r.bincount(A,N,T)];case"DenseBincount":var M=Vv("x",e,t,n),D=Vv("weights",e,t,n),F=Vv("size",e,t,n),I=Vv("binaryOutput",e,t,n);return[r.denseBincount(M,D,F,I)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},sm=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"ConcatV2":case"Concat":var a=Vv("n",e,t,n),i=Vv("axis",e,t,n),o=Vv("tensors",e,t,n);return o=o.slice(0,a),[r.concat(o,i)];case"Gather":var u=Vv("x",e,t,n),s=Vv("indices",e,t,n);return[r.gather(u,r.cast(s,"int32"),0)];case"GatherV2":var c=Vv("axis",e,t,n),l=Vv("batchDims",e,t,n),f=Vv("x",e,t,n),h=Vv("indices",e,t,n);return[r.gather(f,r.cast(h,"int32"),c,l)];case"Reverse":for(var d=Vv("dims",e,t,n),p=[],v=0;v<d.length;v++)d[v]&&p.push(v);var g=Vv("x",e,t,n);return[r.reverse(g,p)];case"ReverseV2":var m=Vv("axis",e,t,n),y=Vv("x",e,t,n);return[r.reverse(y,m)];case"Slice":var b=Vv("begin",e,t,n),w=Vv("size",e,t,n);return[r.slice(Vv("x",e,t,n),b,w)];case"StridedSlice":var k=Vv("begin",e,t,n),_=Vv("end",e,t,n),S=Vv("strides",e,t,n),C=Vv("beginMask",e,t,n),E=Vv("endMask",e,t,n),A=Vv("ellipsisMask",e,t,n),N=Vv("newAxisMask",e,t,n),T=Vv("shrinkAxisMask",e,t,n),M=Vv("x",e,t,n);return[r.stridedSlice(M,k,_,S,C,E,A,N,T)];case"Pack":return(0,io.tidy)((function(){var a=Vv("axis",e,t,n),i=Vv("tensors",e,t,n),o=i[0].shape,u=r.squeeze(i[0]).shape,s=i.map((function(e){var t=io.util.arraysEqual(e.shape,o);if(!t&&!io.util.arraysEqual(r.squeeze(e).shape,u))throw new Error("the input tensors shape does not match");return t?e:r.reshape(e,o)}));return[r.stack(s,a)]}));case"Unpack":var D=Vv("axis",e,t,n),F=Vv("tensor",e,t,n);return r.unstack(F,D);case"Tile":var I=Vv("reps",e,t,n);return[r.tile(Vv("x",e,t,n),I)];case"Split":case"SplitV":var O=Vv("axis",e,t,n),R=Vv("numOrSizeSplits",e,t,n),Z=Vv("x",e,t,n);return r.split(Z,R,O);case"ScatterNd":var B=Vv("indices",e,t,n),z=Vv("values",e,t,n),L=Vv("shape",e,t,n);return[r.scatterND(B,z,L)];case"GatherNd":var P=Vv("x",e,t,n),j=Vv("indices",e,t,n);return[r.gatherND(P,j)];case"SparseToDense":var U=Vv("sparseIndices",e,t,n),W=Vv("outputShape",e,t,n),V=Vv("sparseValues",e,t,n),q=Vv("defaultValue",e,t,n);return[r.sparseToDense(U,V,W,V.dtype===q.dtype?q:r.cast(q,V.dtype))];case"TensorScatterUpdate":var H=Vv("indices",e,t,n),G=Vv("values",e,t,n),X=Vv("tensor",e,t,n);return[r.tensorScatterUpdate(X,H,G)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},cm=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"SparseFillEmptyRows":var a=r.sparse.sparseFillEmptyRows(Vv("indices",e,t,n),Vv("values",e,t,n),Vv("denseShape",e,t,n),Vv("defaultValue",e,t,n)),i=a.outputIndices,o=a.outputValues,u=a.emptyRowIndicator,s=a.reverseIndexMap;return[i,o,u,s];case"SparseReshape":var c=r.sparse.sparseReshape(Vv("inputIndices",e,t,n),Vv("inputShape",e,t,n),Vv("newShape",e,t,n)),l=c.outputIndices,f=c.outputShape;return[l,f];case"SparseSegmentMean":var h=r.sparse.sparseSegmentMean(Vv("data",e,t,n),Vv("indices",e,t,n),Vv("segmentIds",e,t,n));return[h];case"SparseSegmentSum":var d=r.sparse.sparseSegmentSum(Vv("data",e,t,n),Vv("indices",e,t,n),Vv("segmentIds",e,t,n));return[d];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},lm=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"FFT":return[r.fft(Vv("x",e,t,n))];case"IFFT":return[r.ifft(Vv("x",e,t,n))];case"RFFT":return[r.rfft(Vv("x",e,t,n))];case"IRFFT":return[r.irfft(Vv("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},fm=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(Vv("input",e,t,n),Vv("pattern",e,t,n),Vv("rewrite",e,t,n),Vv("replaceGlobal",e,t,n))];case"StringNGrams":var a=r.string.stringNGrams(Vv("data",e,t,n),Vv("dataSplits",e,t,n),Vv("separator",e,t,n),Vv("nGramWidths",e,t,n),Vv("leftPad",e,t,n),Vv("rightPad",e,t,n),Vv("padWidth",e,t,n),Vv("preserveShortSequences",e,t,n)),i=a.nGrams,o=a.nGramsSplits;return[i,o];case"StringSplit":var u=r.string.stringSplit(Vv("input",e,t,n),Vv("delimiter",e,t,n),Vv("skipEmpty",e,t,n)),s=u.indices,c=u.values,l=u.shape;return[s,c,l];case"StringToHashBucketFast":var f=r.string.stringToHashBucketFast(Vv("input",e,t,n),Vv("numBuckets",e,t,n));return[f];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},hm=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"Cast":return[r.cast(Vv("x",e,t,n),Vv("dtype",e,t,n))];case"ExpandDims":var a=Vv("axis",e,t,n);return[r.expandDims(Vv("x",e,t,n),a)];case"Squeeze":var i=Vv("axis",e,t,n);return[r.squeeze(Vv("x",e,t,n),i)];case"Reshape":return[r.reshape(Vv("x",e,t,n),Vv("shape",e,t,n))];case"EnsureShape":return[r.ensureShape(Vv("x",e,t,n),Vv("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(Vv("x",e,t,n),Vv("padding",e,t,n),Vv("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(Vv("x",e,t,n),Vv("padding",e,t,n),Vv("constantValue",e,t,n))];case"SpaceToBatchND":var o=Vv("blockShape",e,t,n),u=Vv("paddings",e,t,n);return[r.spaceToBatchND(Vv("x",e,t,n),o,u)];case"BatchToSpaceND":var s=Vv("blockShape",e,t,n),c=Vv("crops",e,t,n);return[r.batchToSpaceND(Vv("x",e,t,n),s,c)];case"DepthToSpace":var l=Vv("blockSize",e,t,n),f=Vv("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(Vv("x",e,t,n),l,f)];case"BroadcastTo":return[r.broadcastTo(Vv("x",e,t,n),Vv("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(Vv("s0",e,t,n),Vv("s1",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function dm(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:io.tidy,i=function(e,t,n){switch(e.category){case"arithmetic":return a((function(){return Og(e,t,n)}));case"basic_math":return a((function(){return Rg(e,t,n)}));case"control":return Hg(e,t,n);case"convolution":return a((function(){return Xg(e,t,n)}));case"creation":return a((function(){return Yg(e,t,n)}));case"dynamic":return $g(e,t,n);case"evaluation":return a((function(){return Qg(e,t,n)}));case"image":return a((function(){return nm(e,t,n)}));case"graph":return a((function(){return Jg(e,t,n)}));case"logical":return a((function(){return rm(e,t,n)}));case"matrices":return a((function(){return am(e,t,n)}));case"normalization":return a((function(){return im(e,t,n)}));case"ragged":return a((function(){return om(e,t,n)}));case"reduction":return a((function(){return um(e,t,n)}));case"slice_join":return a((function(){return sm(e,t,n)}));case"sparse":return a((function(){return cm(e,t,n)}));case"spectral":return a((function(){return lm(e,t,n)}));case"string":return a((function(){return fm(e,t,n)}));case"transformation":return a((function(){return hm(e,t,n)}));case"hash_table":return tm(e,t,n,r);case"custom":var i=Wv(e.op);if(i&&i.customExecutor)return i.customExecutor(new Fg(e,t,n));throw TypeError("Custom op ".concat(e.op," is not registered."));default:throw TypeError("Unknown op '".concat(e.op,"'. File an issue at ")+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(e,t,n);return io.util.isPromise(i)?i.then((function(e){return[].concat(e)})):[].concat(i)}var pm=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0;(0,D.Z)(this,e),this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return(0,F.Z)(e,[{key:"newFrame",value:function(e,t){return{id:e,frameName:t,iterationId:0}}},{key:"currentContext",get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}},{key:"currentContextId",get:function(){return this._currentContextIds[0]}},{key:"currentContextIds",get:function(){return this._currentContextIds}},{key:"generateCurrentContextIds",value:function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}},{key:"contextIdforContexts",value:function(e){return e?e.map((function(e){return 0===e.id&&0===e.iterationId?"":"".concat(e.frameName,"-").concat(e.iterationId)})).join("/"):""}},{key:"enterFrame",value:function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}},{key:"exitFrame",value:function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}},{key:"nextIteration",value:function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}},{key:"getWeight",value:function(e){return this.weightMap[e]}},{key:"addTensorArray",value:function(e){this.tensorArrayMap[e.id]=e}},{key:"getTensorArray",value:function(e){return this.tensorArrayMap[e]}},{key:"addTensorList",value:function(e){this.tensorListMap[e.id]=e}},{key:"getTensorList",value:function(e){return this.tensorListMap[e]}},{key:"dispose",value:function(e){for(var t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(var n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}]),e}();function vm(e,t,n,r){var a=new Set,i=[],o=null,u=null,s=new Set,c=new Set(Object.keys(e).map((function(e){return Yv(e)[0]})));r=r||[];for(var l=new Set(r.map((function(e){return Yv(e.name)[0]}))),f=(0,M.Z)(t);f.length>0;){var h=f.pop();(wm(h)||km(h)||_m(h))&&null==o&&(u=(o=h).children.map((function(e){return e.name})).filter((function(e){return a.has(e)}))),a.add(h.name),null==n[h.name]&&(c.has(h.name)||l.has(h.name)||(0!==h.inputs.length?h.inputs.forEach((function(e){s.has(e.name)||(s.add(e.name),f.push(e))})):i.push(h.name)))}return{inputs:e,outputs:t,usedNodes:a,missingInputs:i,dynamicNode:o,syncInputs:u}}function gm(e,t){var n=t.usedNodes,r=t.inputs,a=Object.keys(r).map((function(e){return Yv(e)[0]})).map((function(t){return e.nodes[t]})),i=e.initNodes||[],o=function(e){return n.has("string"===typeof e?e:e.name)};function u(e){return(0,M.Z)(new Map(e.map((function(e){return[e.name,e]}))).values())}var s,c=u([].concat((0,M.Z)(a),(0,M.Z)(e.weights),(0,M.Z)(i))).filter(o),l=u([].concat((0,M.Z)(c),(0,M.Z)(Object.values(e.nodes)))).filter(o),f=new Map(l.map((function(e){return[e.name,e]}))),h={},d=(0,B.Z)(l);try{for(d.s();!(s=d.n()).done;){var p=s.value;h[p.name]=h[p.name]||0;var v,g=(0,B.Z)(p.children);try{for(g.s();!(v=g.n()).done;){var m=v.value;o(m)||(h[m.name]=Number.POSITIVE_INFINITY),h[m.name]=(h[m.name]||0)+1}}catch(A){g.e(A)}finally{g.f()}}}catch(A){d.e(A)}finally{d.f()}for(var y=Object.entries(h).filter((function(e){return 0===(0,C.Z)(e,2)[1]})).map((function(e){return(0,C.Z)(e,1)[0]})),b=(0,M.Z)(y);y.length>0;){var x,w=y.pop(),k=f.get(w),_=(0,B.Z)(k.children.filter(o));try{for(_.s();!(x=_.n()).done;){var S=x.value;0===--h[S.name]&&(b.push(S.name),y.push(S.name))}}catch(A){_.e(A)}finally{_.f()}}var E=function(e,t){var n=new Map(e.map((function(e){return[e.name,e]}))),r=t.map((function(e){return e.name})),a=new Set(r);for(;r.length>0;){var i,o=r.pop(),u=n.get(o),s=(0,B.Z)(u.children);try{for(s.s();!(i=s.n()).done;){var c=i.value;n.has(c.name)&&!a.has(c.name)&&(a.add(c.name),r.push(c.name))}}catch(A){s.e(A)}finally{s.f()}}var l=e.filter((function(e){return a.has(e.name)}));return l}(b.map((function(e){return f.get(e)})),c);return function(e,t){var n,r=new Map(e.map((function(e,t){return[e.name,t]}))),a=new Set(t.map((function(e){return e.name}))),i=function(e){return a.has("string"===typeof e?e:e.name)},o=new Set(e.map((function(e){return e.name}))),u=function(e){return o.has("string"===typeof e?e:e.name)},s=(0,B.Z)(e);try{for(s.s();!(n=s.n()).done;){var c,l=n.value,f=(0,B.Z)(l.children.filter(u));try{for(f.s();!(c=f.n()).done;){var h=c.value;if(!r.has(h.name))throw new mm("Child ".concat(h.name," of node ").concat(l.name," is unreachable."));if(r.get(l.name)>r.get(h.name))throw new mm("Node ".concat(l.name," is scheduled to run after its child ").concat(h.name,"."))}}catch(A){f.e(A)}finally{f.f()}if(!i(l)){var d,p=(0,B.Z)(l.inputs);try{for(p.s();!(d=p.n()).done;){var v=d.value;if(!r.has(v.name))throw new mm("Input ".concat(v.name," of node ").concat(l.name," is unreachable."));if(r.get(v.name)>r.get(l.name))throw new mm("Node ".concat(l.name," is scheduled to run before its input ").concat(v.name,"."))}}catch(A){p.e(A)}finally{p.f()}}}}catch(A){s.e(A)}finally{s.f()}}(E,c),E}var mm=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){return(0,D.Z)(this,n),t.call(this,"NodesExecutionOrderError: ".concat(e))}return(0,F.Z)(n)}((0,R.Z)(Error));var ym=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),bm=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),xm=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function wm(e){return ym.has(e.op)}function km(e){return bm.has(e.op)}function _m(e){return xm.has(e.op)}var Sm=function(){function e(t,n){var r=this;(0,D.Z)(this,e),this.graph=t,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach((function(n){r._functionExecutorMap[n]=new e(t.functions[n],r)}))}return(0,F.Z)(e,[{key:"weightIds",get:function(){return this.parent?this.parent.weightIds:this._weightIds}},{key:"functionExecutorMap",get:function(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}},{key:"weightMap",get:function(){return this.parent?this.parent.weightMap:this._weightMap},set:function(e){var t,n=Object.keys(e).map((function(t){return e[t].map((function(e){return e.id}))}));this._weightIds=(t=[]).concat.apply(t,(0,M.Z)(n)),this._weightMap=e}},{key:"resourceManager",set:function(e){this._resourceManager=e}},{key:"inputs",get:function(){return this._inputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"outputs",get:function(){return this._outputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"inputNodes",get:function(){return this._inputs.map((function(e){return e.signatureKey||e.name}))}},{key:"outputNodes",get:function(){return this._outputs.map((function(e){var t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t}))}},{key:"functions",get:function(){var e=this;return Object.keys(this._functions).reduce((function(t,n){return t[n]=e._functions[n].signature,t}),{})}},{key:"getCompilationKey",value:function(e,t){var n=e.map((function(e){return e.name})).sort(),r=t.map((function(e){return e.name})).sort();return n.join(this.SEPARATOR)+"--"+r.join(this.SEPARATOR)}},{key:"compile",value:function(e,t){var n=vm(e,t,this.weightMap,this._initNodes),r=n.missingInputs,a=n.dynamicNode,i=n.syncInputs;if(null!=a)throw new Error("This execution contains the node '".concat(a.name,"', which has ")+"the dynamic op '".concat(a.op,"'. Please use ")+"model.executeAsync() instead. Alternatively, to avoid the "+"dynamic ops, specify the inputs [".concat(i,"]"));if(r.length>0){var o=t.map((function(e){return e.name})),u=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(o,"] from the provided inputs ")+"[".concat(u,"]. Missing the following inputs: [").concat(r,"]"))}var s=gm(this.graph,n),c=function(e){for(var t=new Map(e.map((function(e,t){return[e.name,t]}))),n=Number.MAX_SAFE_INTEGER,r=e.map((function(e,t){return wm(e)?n:t})),a=function(e){var n=r[t.get(e.name)];return null==n?-1:n},i=e.map((function(e,t){return e.children.map(a).reduce((function(e,t){return Math.max(e,t)}),r[t])})),o=new Map,u=0;u<e.length;++u){var s=i[u];if(s!==n){var c=e[u],l=e[s];o.has(l.name)||o.set(l.name,[]),o.get(l.name).push(c)}}return o}(s);return{orderedNodes:s,nodeLiveUntilMap:c}}},{key:"cloneAndKeepTensor",value:function(e){if(null==e)return null;var t=e.clone();return(0,io.keep)(t),t}},{key:"cloneTensorList",value:function(e){var t=this;return e?e.map((function(e){return t.cloneAndKeepTensor(e)})):null}},{key:"cloneTensorMap",value:function(e){var t=this;return Object.fromEntries(Object.entries(e).map((function(e){var n=(0,C.Z)(e,2),r=n[0],a=n[1];return[r,t.cloneTensorList(a)]})))}},{key:"execute",value:function(e,t){var n=this;this.disposeIntermediateTensors(),e=this.mapInputs(e);var r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);var a=r.map((function(e){return n.graph.nodes[Yv(e)[0]]})),i=t.map((function(e){return Yv(e)[0]})),o=new Set(i),u=i.map((function(e){return n.graph.nodes[e]}));0===u.length&&(u=this._outputs);var s=this.getCompilationKey(a,u),c=this.compiledMap.get(s);null==c&&(c=this.compile(e,u),this.compiledMap.set(s,c));try{this.keepIntermediateTensors=(0,io.env)().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(ZR){this.keepIntermediateTensors=!1,console.warn(ZR.message)}var l={},f={};return(0,io.tidy)((function(){var r=new pm(n.weightMap,l,f,n.functionExecutorMap,n.parseNodeNameCache),a=Object.assign({},n.weightMap);n.keepIntermediateTensors&&(n.clonedTensorsMap=n.cloneTensorMap(n.weightMap)),Object.keys(e).forEach((function(t){var i=Yv(t,r),o=(0,C.Z)(i,2),u=o[0],s=[];s[o[1]]=e[t],a[u]=s,n.keepIntermediateTensors&&(n.clonedTensorsMap[u]=n.cloneTensorList(s))}));var i,u=n.getFrozenTensorIds(a),s=c,h=s.orderedNodes,d=s.nodeLiveUntilMap,p=(0,B.Z)(h);try{for(p.s();!(i=p.n()).done;){var v=i.value;if(!a[v.name]){var g=dm(v,a,r,n._resourceManager);if(io.util.isPromise(g))throw new Error("The execution of the op '".concat(v.op,"' returned a promise. ")+"Please use model.executeAsync() instead.");a[v.name]=g,n.keepIntermediateTensors&&(n.clonedTensorsMap[v.name]=n.cloneTensorList(g)),n.checkTensorForDisposalWithNodeLiveUntilInfo(v,a,r,u,o,d.get(v.name))}}}catch(m){p.e(m)}finally{p.f()}return null==n.parent&&r.dispose(u),t.map((function(e){return qv(e,a,r)}))}))}},{key:"getFrozenTensorIds",value:function(e){var t=[].concat.apply([],Object.keys(e).map((function(t){return e[t]})).map((function(e){return e.map((function(e){return e.id}))})));return new Set(t)}},{key:"checkTensorForDisposal",value:function(e,t,n,r,a,i,o){if(!wm(t)&&!i.has(e)){var u,s=(0,B.Z)(n[e]);try{for(s.s();!(u=s.n()).done;){var c=u.value;null!=c&&(o[c.id]=(o[c.id]||0)+t.children.length)}}catch(y){s.e(y)}finally{s.f()}var l,f=(0,B.Z)(t.inputs);try{for(f.s();!(l=f.n()).done;){var h=l.value;if(!wm(h)){var d=Hv(h.name,n,r);if(null!=d){var p,v=(0,B.Z)(d);try{for(v.s();!(p=v.n()).done;){var g=p.value;if(g&&!g.kept&&!a.has(g.id)){var m=o[g.id];1===m?(g.dispose(),delete o[g.id]):null!=m&&o[g.id]--}}}catch(y){v.e(y)}finally{v.f()}}}}}catch(y){f.e(y)}finally{f.f()}}}},{key:"checkTensorForDisposalWithNodeLiveUntilInfo",value:function(e,t,n,r,a,i){function o(e){return wm(e)||a.has(e.name)}if(!wm(e)&&null!=i){var u,s=(0,B.Z)(i);try{for(s.s();!(u=s.n()).done;){var c=u.value;if(!o(c)){var l,f=Hv(c.name,t,n),h=(0,B.Z)(f);try{for(h.s();!(l=h.n()).done;){var d=l.value;!d||d.kept||r.has(d.id)||d.dispose()}}catch(p){h.e(p)}finally{h.f()}}}}catch(p){s.e(p)}finally{s.f()}}}},{key:"executeAsync",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._executeAsync(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"disposeIntermediateTensors",value:function(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach((function(e){var t,n=(0,B.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r&&!r.isDisposed&&r.dispose()}}catch(a){n.e(a)}finally{n.f()}})),this.clonedTensorsMap=null)}},{key:"getIntermediateTensors",value:function(){return this.clonedTensorsMap}},{key:"_executeAsync",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){var r,a,i,o,u,s,c,l,f,h=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=h.length>2&&void 0!==h[2]&&h[2],a=h.length>3&&void 0!==h[3]?h[3]:{},i=h.length>4&&void 0!==h[4]?h[4]:{},this.disposeIntermediateTensors(),r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=(0,io.env)().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(ZR){this.keepIntermediateTensors=!1,console.warn(ZR.message)}return o=new pm(this.weightMap,a,i,this.functionExecutorMap,this.parseNodeNameCache),this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),e.next=10,this.executeWithControlFlow(t,o,n,r);case 10:return u=e.sent,s=n.map((function(e){return qv(e,u,o)})),c=s.map((function(e){return e.id})),l=Object.keys(t).map((function(e){return t[e].id})),f=new Set([].concat((0,M.Z)(c),(0,M.Z)(l),(0,M.Z)(this.weightIds))),Object.values(u).forEach((function(e){e.forEach((function(e){!e||e.isDisposed||f.has(e.id)||e.dispose()}))})),null==this.parent&&o.dispose(f),e.abrupt("return",s);case 18:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"executeFunctionAsync",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n,r){var a,i=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.reduce((function(e,t,n){return e[i.inputs[n].name]=t,e}),{}),e.abrupt("return",this._executeAsync(a,this.outputNodes,!0,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeWithControlFlow",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n,r,a){var i,o,u,s,c,l,f,h,d,p,v,g,m,y,b,x,w,k,_=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Object.keys(t),o=i.map((function(e){return _.graph.nodes[Yv(e)[0]]})),u=r.map((function(e){return Yv(e)[0]})),s=new Set(u),0===(c=u.map((function(e){return _.graph.nodes[e]}))).length&&(c=this._outputs),l=vm(t,c,this.weightMap,this._initNodes),f=l.usedNodes,h=l.missingInputs,d=l.dynamicNode,p=l.syncInputs,v=[].concat((0,M.Z)(o),(0,M.Z)(this.graph.weights),(0,M.Z)(this._initNodes||[])).map((function(e){return{node:e,contexts:n.currentContext}})),g=Object.assign({},this.weightMap),Object.keys(t).forEach((function(e){var n=Yv(e),r=(0,C.Z)(n,2),a=r[0],i=[];i[r[1]]=t[e],g[a]=i})),m={},y=this.getFrozenTensorIds(g),b={};case 13:if(!(v.length>0)){e.next=19;break}return x=this.processStack(o,v,n,g,b,y,s,m,f),e.next=17,Promise.all(x);case 17:e.next=13;break;case 19:if(null!=d||a||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),!((w=c.filter((function(e){return!wm(e)&&!qv(e.name,g,n)})).map((function(e){return e.name}))).length>0)){e.next=25;break}throw k="",null!=d&&(k="Alternatively, to avoid the dynamic ops, use model.execute() "+"and specify the inputs [".concat(p,"]")),new Error("Cannot compute the outputs [".concat(w,"] from the provided ")+"inputs [".concat(i,"]. Consider providing the following inputs: ")+"[".concat(h,"]. ").concat(k));case 25:return e.abrupt("return",g);case 26:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"processStack",value:function(e,t,n,r,a,i,o,u,s){for(var c=this,l=[],f=function(){var e=t.pop();n.currentContext=e.contexts;var f="";if("Enter"===e.node.op&&Vv("isConstant",e.node,r,n)){var h=Gv(e.node.name,n),d=(0,C.Z)(h,1);f=d[0]}if(null==r[e.node.name]){var p=dm(e.node,r,n,c._resourceManager);if(!f){var v=Gv(e.node.name,n),g=(0,C.Z)(v,1);f=g[0]}var m=n.currentContext;io.util.isPromise(p)?l.push(p.then((function(l){return r[f]=l,c.keepIntermediateTensors&&(c.clonedTensorsMap[f]=c.cloneTensorList(l)),n.currentContext=m,c.checkTensorForDisposal(f,e.node,r,n,i,o,u),c.processChildNodes(e.node,t,n,r,a,s),l}))):(r[f]=p,c.keepIntermediateTensors&&(c.clonedTensorsMap[f]=c.cloneTensorList(p)),c.checkTensorForDisposal(f,e.node,r,n,i,o,u),c.processChildNodes(e.node,t,n,r,a,s))}else c.processChildNodes(e.node,t,n,r,a,s)};t.length>0;)f();return l}},{key:"processChildNodes",value:function(e,t,n,r,a,i){e.children.forEach((function(e){var o=Gv(e.name,n),u=(0,C.Z)(o,1)[0];!a[u]&&i.has(e.name)&&("Merge"===e.op?e.inputNames.some((function(e){return!!qv(e,r,n)}))&&(a[u]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((function(e){return!!qv(e,r,n)}))&&(a[u]=!0,t.push({contexts:n.currentContext,node:e})))}))}},{key:"dispose",value:function(){var e=this;Object.keys(this.weightMap).forEach((function(t){return e.weightMap[t].forEach((function(e){return e.dispose()}))}))}},{key:"checkInputShapeAndType",value:function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],a=Yv(n),i=(0,C.Z)(a,1)[0],o=t.graph.nodes[i];if(o.attrParams.shape&&o.attrParams.shape.value){var u=o.attrParams.shape.value,s=u.length===r.shape.length&&r.shape.every((function(e,t){return-1===u[t]||u[t]===e}));io.util.assert(s,(function(){return"The shape of dict['".concat(o.name,"'] provided in ")+"model.execute(dict) must be [".concat(u,"], but was ")+"[".concat(r.shape,"]")}))}o.attrParams.dtype&&o.attrParams.dtype.value&&io.util.assert(r.dtype===o.attrParams.dtype.value,(function(){return"The dtype of dict['".concat(o.name,"'] provided in ")+"model.execute(dict) must be "+"".concat(o.attrParams.dtype.value,", but was ").concat(r.dtype)}))}))}},{key:"mapInputs",value:function(e){var t,n,r={};for(var a in e){var i=null===(n=null===(t=this._signature)||void 0===t?void 0:t.inputs)||void 0===n?void 0:n[a];null!=i?r[i.name]=e[a]:r[a]=e[a]}return r}},{key:"checkInputs",value:function(e){var t=this,n=Object.keys(e).filter((function(e){var n=Yv(e),r=(0,C.Z)(n,1)[0];return null==t.graph.nodes[r]}));if(n.length>0)throw new Error("The dict provided in model.execute(dict) has "+"keys: [".concat(n,"] that are not part of graph"))}},{key:"mapOutputs",value:function(e){var t=this;return e.map((function(e){var n,r,a=null===(r=null===(n=t._signature)||void 0===n?void 0:n.outputs)||void 0===r?void 0:r[e];return null!=a?a.name:e}),{})}},{key:"checkOutputs",value:function(e){var t=this;e.forEach((function(e){var n=Yv(e),r=(0,C.Z)(n,1)[0];if(!t.graph.nodes[r])throw new Error("The output '".concat(e,"' is not found in the graph"))}))}}]),e}(),Cm=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,D.Z)(this,e),this.hashTableNameToHandle=t,this.hashTableMap=n}return(0,F.Z)(e,[{key:"addHashTable",value:function(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}},{key:"getHashTableHandleByName",value:function(e){return this.hashTableNameToHandle[e]}},{key:"getHashTableById",value:function(e){return this.hashTableMap[e]}},{key:"dispose",value:function(){for(var e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(var t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}]),e}(),Em=n(1434),Am=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:io.io;(0,D.Z)(this,e),this.modelUrl=t,this.loadOptions=n,this.version="n/a",this.io=r,null==n&&(this.loadOptions={}),this.resourceManager=new Cm}return(0,F.Z)(e,[{key:"modelVersion",get:function(){return this.version}},{key:"inputNodes",get:function(){return this.executor.inputNodes}},{key:"outputNodes",get:function(){return this.executor.outputNodes}},{key:"inputs",get:function(){return this.executor.inputs}},{key:"outputs",get:function(){return this.executor.outputs}},{key:"weights",get:function(){return this.executor.weightMap}},{key:"metadata",get:function(){return this.artifacts.userDefinedMetadata}},{key:"modelSignature",get:function(){return this.signature}},{key:"modelStructuredOutputKeys",get:function(){return this.structuredOutputKeys}},{key:"findIOHandler",value:function(){var e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{var t=this.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one (".concat(t.length,") load handlers for ")+"URL '".concat([e],"'"));this.handler=t[0]}}},{key:"load",value:function(){var e=this;if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");var t=this.handler.load();return io.util.isPromise(t)?t.then((function(t){return null==t.getWeightStream?e.loadSync(t):e.loadStreaming(t)})):this.loadSync(t)}},{key:"loadSync",value:function(e){var t=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,t)}},{key:"loadStreaming",value:function(){var e=(0,Bi.Z)(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.getWeightStream){e.next=2;break}throw new Error("Model artifacts missing streamWeights function");case 2:return e.next=4,(0,Em.r)(t.getWeightStream(),t.weightSpecs);case 4:return n=e.sent,e.abrupt("return",this.loadWithWeightMap(t,n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadWithWeightMap",value:function(e,t){this.artifacts=e;var n=this.artifacts.modelTopology,r=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){var a=this.artifacts.userDefinedMetadata;null!=a.signature&&(r=a.signature),null!=a.structuredOutputKeys&&(this.structuredOutputKeys=a.structuredOutputKeys)}if(this.signature=r,this.version="".concat(n.versions.producer,".").concat(n.versions.minConsumer),this.executor=new Sm(mg.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(t),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){var i=mg.Instance.transformGraph(e.modelInitializer);this.initializer=new Sm(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}},{key:"save",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=9;break}if(0!==(r=this.io.getSaveHandlers(t)).length){e.next=6;break}throw new Error("Cannot find any save handlers for URL '".concat(t,"'"));case 6:if(!(r.length>1)){e.next=8;break}throw new Error("Found more than one (".concat(r.length,") save handlers for ")+"URL '".concat(t,"'"));case 8:t=r[0];case 9:if(null!=t.save){e.next=11;break}throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.abrupt("return",t.save(this.artifacts));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"addStructuredOutputNames",value:function(e){var t=this;if(this.structuredOutputKeys){var n=e instanceof io.Tensor?[e]:e,r={};return n.forEach((function(e,n){return r[t.structuredOutputKeys[n]]=e})),r}return e}},{key:"predict",value:function(e,t){var n=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(n)}},{key:"predictAsync",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.executeAsync(t,this.outputNodes);case 2:return r=e.sent,e.abrupt("return",this.addStructuredOutputNames(r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"normalizeInputs",value:function(e){var t,n=this;if(!(e instanceof io.Tensor)&&!Array.isArray(e)){var r=null===(t=this.signature)||void 0===t?void 0:t.inputs;if(null!=r)for(var a in r){var i=r[a];null!=i.resourceId&&(e[a]=this.resourceIdToCapturedInput[i.resourceId])}return e}e=Array.isArray(e)?e:[e];var o=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+o!==this.inputNodes.length)throw new Error("Input tensor count mismatch, the graph model has ".concat(this.inputNodes.length-o," non-resource placeholders, while there are ").concat(e.length," input tensors provided."));var u=0;return this.inputNodes.reduce((function(t,r){var a,i,o,s=null===(o=null===(i=null===(a=n.signature)||void 0===a?void 0:a.inputs)||void 0===i?void 0:i[r])||void 0===o?void 0:o.resourceId;return t[r]=null!=s?n.resourceIdToCapturedInput[s]:e[u++],t}),{})}},{key:"normalizeOutputs",value:function(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}},{key:"executeInitializerGraph",value:function(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}},{key:"executeInitializerGraphAsync",value:function(){var e=(0,Bi.Z)(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.initializer){e.next=2;break}return e.abrupt("return",[]);case 2:if(null!=this.initializerSignature){e.next=6;break}return e.abrupt("return",this.initializer.executeAsync({},[]));case 6:return e.abrupt("return",this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setResourceIdToCapturedInput",value:function(e){if(this.resourceIdToCapturedInput={},this.initializerSignature)for(var t=this.initializerSignature.outputs,n=Object.keys(t),r=0;r<n.length;r++){var a=t[n[r]];this.resourceIdToCapturedInput[a.resourceId]=e[r]}}},{key:"execute",value:function(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);var n=this.executor.execute(e,t);return n.length>1?n:n[0]}},{key:"executeAsync",value:function(){var e=(0,Bi.Z)(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.resourceIdToCapturedInput){e.next=6;break}return e.t0=this,e.next=4,this.executeInitializerGraphAsync();case 4:e.t1=e.sent,e.t0.setResourceIdToCapturedInput.call(e.t0,e.t1);case 6:return t=this.normalizeInputs(t),n=this.normalizeOutputs(n),e.next=10,this.executor.executeAsync(t,n);case 10:return r=e.sent,e.abrupt("return",r.length>1?r:r[0]);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getIntermediateTensors",value:function(){return this.executor.getIntermediateTensors()}},{key:"disposeIntermediateTensors",value:function(){this.executor.disposeIntermediateTensors()}},{key:"convertTensorMapToTensorsMap",value:function(e){return Object.keys(e).reduce((function(t,n){return t[n]=[e[n]],t}),{})}},{key:"dispose",value:function(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&(0,io.dispose)(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}]),e}();function Nm(e){return Tm.apply(this,arguments)}function Tm(){return Tm=(0,Bi.Z)(A().mark((function e(t){var n,r,a,i=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:{},r=i.length>2&&void 0!==i[2]?i[2]:io.io,null!=t){e.next=4;break}throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");case 4:return null==n&&(n={}),n.fromTFHub&&"string"===typeof t&&(t=Mm(t)),a=new Am(t,n,r),e.next=9,a.load();case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),Tm.apply(this,arguments)}function Mm(e){return e.endsWith("/")||(e+="/"),"".concat(e).concat("model.json").concat("?tfjs-format=file")}var Dm=n(6699);function Fm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"===typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(Zm(e)){var i=Array.isArray(e)?[]:{};for(var o in r.add(e),e){var u=e[o],s=Fm(u,t,n,r);i[o]=s}return r.delete(e),e.__proto__&&(i.__proto__=e.__proto__),i}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,a.value),a.value}function Im(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rm;return Om(e,t)}function Om(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(Zm(r)){var i=Array.isArray(r)?[]:{};n.add(r);var o=function(r){var a=Om(e.map((function(e){return e[r]})),t,n);i[r]=a};for(var u in r)o(u);return n.delete(r),i}throw new Error("Can't recurse into non-iterable type: ".concat(r))}return a.value}function Rm(e){return null===e?null:Zm(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function Zm(e){var t=!1;io.env().get("IS_BROWSER")?t=e instanceof TextDecoder:t=e instanceof n(4977).StringDecoder;return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof io.Tensor)&&!(e instanceof Promise)&&!t)}function Bm(e){return function(e,t){return Fm(e,t)}(e,zm)}function zm(e){return e instanceof io.Tensor?{value:e.clone(),recurse:!1}:Zm(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var Lm=function(){function e(t){if((0,D.Z)(this,e),this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}return(0,F.Z)(e,[{key:"wrap",value:function(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}},{key:"get",value:function(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}},{key:"set",value:function(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}},{key:"length",value:function(){var e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}},{key:"isFull",value:function(){return this.length()===this.capacity}},{key:"isEmpty",value:function(){return 0===this.length()}},{key:"push",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}},{key:"pushAll",value:function(e){var t,n=(0,B.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.push(r)}}catch(a){n.e(a)}finally{n.f()}}},{key:"pop",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var e=this.get(this.end);return this.set(this.end,void 0),e}},{key:"unshift",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}},{key:"shift",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}},{key:"shuffleExcise",value:function(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}]),e}(),Pm=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){return(0,D.Z)(this,n),t.call(this,n.INITIAL_CAPACITY)}return(0,F.Z)(n,[{key:"isFull",value:function(){return!1}},{key:"push",value:function(e){(0,hn.Z)((0,dn.Z)(n.prototype),"isFull",this).call(this)&&this.expand(),(0,hn.Z)((0,dn.Z)(n.prototype),"push",this).call(this,e)}},{key:"unshift",value:function(e){(0,hn.Z)((0,dn.Z)(n.prototype),"isFull",this).call(this)&&this.expand(),(0,hn.Z)((0,dn.Z)(n.prototype),"unshift",this).call(this,e)}},{key:"expand",value:function(){for(var e=2*this.capacity,t=new Array(e),n=this.length(),r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}]),n}(Lm);function jm(e){return new Hm(e)}function Um(e,t){return new ry(e,t)}Pm.INITIAL_CAPACITY=32;var Wm,Vm=function(){function e(){(0,D.Z)(this,e)}return(0,F.Z)(e,[{key:"toArray",value:function(){var e=(0,Bi.Z)(A().mark((function e(){var t,n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.next();case 3:n=e.sent;case 4:if(n.done){e.next=11;break}return t.push(n.value),e.next=8,this.next();case 8:n=e.sent,e.next=4;break;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=(0,Bi.Z)(A().mark((function e(){var t,n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.prefetch(100),n=[],e.next=4,t.next();case 4:r=e.sent;case 5:if(r.done){e.next=12;break}return n.push(r.value),e.next=9,t.next();case 9:r=e.sent,e.next=5;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveFully",value:function(){var e=(0,Bi.Z)(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:t=e.sent;case 3:if(t.done){e.next=9;break}return e.next=6,this.next();case 6:t=e.sent,e.next=3;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveWhile",value:function(){var e=(0,Bi.Z)(A().mark((function e(t){var n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:n=e.sent,r=t(n.value);case 4:if(n.done||!r){e.next=11;break}return e.next=7,this.next();case 7:n=e.sent,r=t(n.value),e.next=4;break;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e){return new Jm(this,e)}},{key:"filter",value:function(e){return new $m(this,e)}},{key:"map",value:function(e){return new Qm(this,e)}},{key:"mapAsync",value:function(e){return new ey(this,e)}},{key:"serialMapAsync",value:function(e){return new ey(this,e).serial()}},{key:"flatmap",value:function(e){return new ny(this,e)}},{key:"forEachAsync",value:function(){var e=(0,Bi.Z)(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.map(t).resolveFully());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"serialForEach",value:function(){var e=(0,Bi.Z)(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.serialMapAsync(t).resolveWhile((function(e){return!0===e})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"rowMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Km(this,e,t)}},{key:"columnMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Rm,r=this.rowMajorBatch(e,t);return r.map((function(e){return Im(e,n)}))}},{key:"concatenate",value:function(e,t){return new ry(new qm([this,e]),t)}},{key:"take",value:function(e){return e<0||null==e?this:new Ym(this,e)}},{key:"skip",value:function(e){return e<0||null==e?this:new Xm(this,e)}},{key:"prefetch",value:function(e){return new ay(this,e)}},{key:"shuffle",value:function(e,t){return new iy(this,e,t)}},{key:"serial",value:function(){return new Gm(this)}}]),e}(),qm=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this)).items=e,r.trav=0,r}return(0,F.Z)(n,[{key:"summary",value:function(){return"Array of ".concat(this.items.length," items")}},{key:"next",value:function(){var e=(0,Bi.Z)(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.trav>=this.items.length)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=this.items[this.trav],this.trav++,e.abrupt("return",{value:Bm(t),done:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Vm),Hm=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this)).nextFn=e,r}return(0,F.Z)(n,[{key:"summary",value:function(){return"Function call"}},{key:"next",value:function(){var e=(0,Bi.Z)(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this.nextFn());case 4:throw e.prev=4,e.t0=e.catch(0),e.t0.message="Error thrown while iterating through a dataset: ".concat(e.t0.message),e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(){return e.apply(this,arguments)}}()}]),n}(Vm),Gm=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this)).upstream=e,r.lastRead=Promise.resolve({value:null,done:!1}),r}return(0,F.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Serial")}},{key:"next",value:function(){var e=(0,Bi.Z)(A().mark((function e(){var t=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,Bi.Z)(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.upstream.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Vm),Xm=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e,r){var a;return(0,D.Z)(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,F.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Skip")}},{key:"next",value:function(){var e=(0,Bi.Z)(A().mark((function e(){var t=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,Bi.Z)(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++<this.maxCount)){e.next=9;break}return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done){e.next=6;break}return e.abrupt("return",t);case 6:io.dispose(t.value),e.next=0;break;case 9:return e.abrupt("return",this.upstream.next());case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Vm),Ym=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e,r){var a;return(0,D.Z)(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a}return(0,F.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Take")}},{key:"next",value:function(){var e=(0,Bi.Z)(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++>=this.maxCount)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return e.abrupt("return",this.upstream.next());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Vm),Km=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e,r){var a,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(0,D.Z)(this,n),(a=t.call(this)).upstream=e,a.batchSize=r,a.enableSmallLastBatch=i,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,F.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}},{key:"next",value:function(){var e=(0,Bi.Z)(A().mark((function e(){var t=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,Bi.Z)(A().mark((function e(){var t,n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[];case 1:if(!(t.length<this.batchSize)){e.next=12;break}return e.next=4,this.upstream.next();case 4:if(!(n=e.sent).done){e.next=9;break}if(!(this.enableSmallLastBatch&&t.length>0)){e.next=8;break}return e.abrupt("return",{value:t,done:!1});case 8:return e.abrupt("return",{value:null,done:!0});case 9:t.push(n.value),e.next=1;break;case 12:return e.abrupt("return",{value:t,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Vm),$m=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e,r){var a;return(0,D.Z)(this,n),(a=t.call(this)).upstream=e,a.predicate=r,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,F.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Filter")}},{key:"next",value:function(){var e=(0,Bi.Z)(A().mark((function e(){var t=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,Bi.Z)(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done&&!this.predicate(t.value)){e.next=6;break}return e.abrupt("return",t);case 6:io.dispose(t.value),e.next=0;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Vm),Qm=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e,r){var a;return(0,D.Z)(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return(0,F.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Map")}},{key:"next",value:function(){var e=(0,Bi.Z)(A().mark((function e(){var t,n,r,a,i,o,u;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:n=io.tensor_util.getTensorsInContainer(t.value),r=this.transform(t.value),a=io.tensor_util.getTensorsInContainer(r),i=(0,B.Z)(n);try{for(i.s();!(o=i.n()).done;)u=o.value,io.tensor_util.isTensorInList(u,a)||u.dispose()}catch(s){i.e(s)}finally{i.f()}return e.abrupt("return",{value:r,done:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Vm),Jm=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e,r){var a;return(0,D.Z)(this,n),(a=t.call(this)).upstream=e,a.handler=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,F.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> handleErrors")}},{key:"next",value:function(){var e=(0,Bi.Z)(A().mark((function e(){var t=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,Bi.Z)(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,this.upstream.next();case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),this.handler(e.t0)){e.next=11;break}return e.abrupt("return",{value:null,done:!0});case 11:e.next=0;break;case 13:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()}]),n}(Vm),ey=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e,r){var a;return(0,D.Z)(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return(0,F.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> AsyncMap")}},{key:"next",value:function(){var e=(0,Bi.Z)(A().mark((function e(){var t,n,r,a,i,o,u;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:return n=io.tensor_util.getTensorsInContainer(t.value),e.next=8,this.transform(t.value);case 8:r=e.sent,a=io.tensor_util.getTensorsInContainer(r),i=(0,B.Z)(n);try{for(i.s();!(o=i.n()).done;)u=o.value,io.tensor_util.isTensorInList(u,a)||u.dispose()}catch(s){i.e(s)}finally{i.f()}return e.abrupt("return",{value:r,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Vm),ty=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){var e;return(0,D.Z)(this,n),(e=t.call(this)).outputQueue=new Pm,e.lastRead=Promise.resolve({value:null,done:!1}),e}return(0,F.Z)(n,[{key:"next",value:function(){var e=(0,Bi.Z)(A().mark((function e(){var t=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,Bi.Z)(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.outputQueue.length()){e.next=7;break}return e.next=3,this.pump();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:e.next=0;break;case 7:return e.abrupt("return",{value:this.outputQueue.shift(),done:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Vm),ny=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e,r){var a;return(0,D.Z)(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return(0,F.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Flatmap")}},{key:"pump",value:function(){var e=(0,Bi.Z)(A().mark((function e(){var t,n,r,a,i,o,u;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",!1);case 5:n=io.tensor_util.getTensorsInContainer(t.value),r=this.transform(t.value),a=io.tensor_util.getTensorsInContainer(r),this.outputQueue.pushAll(r),i=(0,B.Z)(n);try{for(i.s();!(o=i.n()).done;)u=o.value,io.tensor_util.isTensorInList(u,a)||u.dispose()}catch(s){i.e(s)}finally{i.f()}return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(ty),ry=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e,r){var a;return(0,D.Z)(this,n),(a=t.call(this)).baseErrorHandler=r,a.lastRead=null,a.iterator=null,a.moreIterators=e,a}return(0,F.Z)(n,[{key:"summary",value:function(){return"".concat("TODO: fill in upstream of chained summaries"," -> Chained")}},{key:"next",value:function(){var e=(0,Bi.Z)(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.readFromChain(this.lastRead),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readFromChain",value:function(){var e=(0,Bi.Z)(A().mark((function e(t){var n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(null!=this.iterator){e.next=10;break}return e.next=5,this.moreIterators.next();case 5:if(!(n=e.sent).done){e.next=8;break}return e.abrupt("return",{value:null,done:!0});case 8:this.iterator=n.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler));case 10:return e.next=12,this.iterator.next();case 12:if(!(r=e.sent).done){e.next=16;break}return this.iterator=null,e.abrupt("return",this.readFromChain(t));case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Vm);!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(Wm||(Wm={}));var ay=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e,r){var a;return(0,D.Z)(this,n),(a=t.call(this)).upstream=e,a.bufferSize=r,a.buffer=new Lm(r),a}return(0,F.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Prefetch")}},{key:"refill",value:function(){for(;!this.buffer.isFull();){var e=this.upstream.next();this.buffer.push(e)}}},{key:"next",value:function(){return this.refill(),this.buffer.shift()}}]),n}(Vm),iy=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e,r,a){var i;return(0,D.Z)(this,n),(i=t.call(this,e,r)).upstream=e,i.windowSize=r,i.upstreamExhausted=!1,i.random=Dm.alea(a||io.util.now().toString()),i.lastRead=Promise.resolve({value:null,done:!1}),i}return(0,F.Z)(n,[{key:"next",value:function(){var e=(0,Bi.Z)(A().mark((function e(){var t=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"randomInt",value:function(e){return Math.floor(this.random()*e)}},{key:"chooseIndex",value:function(){return this.randomInt(this.buffer.length())}},{key:"serialNext",value:function(){var e=(0,Bi.Z)(A().mark((function e(){var t,n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.upstreamExhausted||this.refill();case 1:if(this.buffer.isEmpty()){e.next=14;break}return t=this.chooseIndex(),e.next=5,this.buffer.shuffleExcise(t);case 5:if(!(n=e.sent).done){e.next=10;break}this.upstreamExhausted=!0,e.next=12;break;case 10:return this.refill(),e.abrupt("return",n);case 12:e.next=1;break;case 14:return e.abrupt("return",{value:null,done:!0});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(ay),oy=function(){function e(){(0,D.Z)(this,e),this.size=null}return(0,F.Z)(e,[{key:"batch",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;return io.util.assert(e>0,(function(){return"batchSize needs to be positive, but it is\n      ".concat(e)})),t=this.size===1/0||null==this.size?this.size:n?Math.ceil(this.size/e):Math.floor(this.size/e),uy((0,Bi.Z)(A().mark((function t(){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.iterator();case 2:return t.abrupt("return",t.sent.columnMajorBatch(e,n,sy));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"concatenate",value:function(e){var t,n=this;return t=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,uy((0,Bi.Z)(A().mark((function t(){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.t0=t.sent,t.next=5,e.iterator();case 5:return t.t1=t.sent,t.abrupt("return",t.t0.concatenate.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t)}))),t)}},{key:"filter",value:function(e){var t,n=this;return t=this.size===1/0?1/0:null,uy((0,Bi.Z)(A().mark((function t(){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.filter((function(t){return io.tidy((function(){return e(t)}))})));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"forEachAsync",value:function(){var e=(0,Bi.Z)(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.iterator();case 2:return e.abrupt("return",e.sent.forEachAsync(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"map",value:function(e){var t=this;return uy((0,Bi.Z)(A().mark((function n(){return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.map((function(t){return io.tidy((function(){return e(t)}))})));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"mapAsync",value:function(e){var t=this;return uy((0,Bi.Z)(A().mark((function n(){return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.mapAsync(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"prefetch",value:function(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var t=this;return uy((0,Bi.Z)(A().mark((function n(){return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.prefetch(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"repeat",value:function(e){var t,n=this;return t=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,uy((0,Bi.Z)(A().mark((function t(){var r;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=jm((0,Bi.Z)(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.iterator();case 2:return e.t0=e.sent,e.abrupt("return",{value:e.t0,done:!1});case 4:case"end":return e.stop()}}),e)})))),t.abrupt("return",Um(r.take(e)));case 2:case"end":return t.stop()}}),t)}))),t)}},{key:"skip",value:function(e){var t,n=this;return t=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,uy((0,Bi.Z)(A().mark((function t(){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.skip(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"shuffle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));var r=this,a=Dm.alea(t||io.util.now().toString());return uy((0,Bi.Z)(A().mark((function t(){var i;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.int32(),n&&(i+=a.int32()),t.next=4,r.iterator();case 4:return t.abrupt("return",t.sent.shuffle(e,i.toString()));case 5:case"end":return t.stop()}}),t)}))),this.size)}},{key:"take",value:function(e){var t,n=this;return t=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,uy((0,Bi.Z)(A().mark((function t(){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.take(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"toArray",value:function(){var e=(0,Bi.Z)(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArray());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=(0,Bi.Z)(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArrayForTest());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function uy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new(function(n){(0,I.Z)(a,n);var r=(0,O.Z)(a);function a(){var e;return(0,D.Z)(this,a),(e=r.apply(this,arguments)).size=t,e}return(0,F.Z)(a,[{key:"iterator",value:function(){var t=(0,Bi.Z)(A().mark((function t(){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),a}(oy))}function sy(e){return null===e?null:function(e){return null==e||null===(t=e)||"object"!==typeof t&&"function"!==typeof t||Array.isArray(e)||"object"===typeof e&&e instanceof io.Tensor||io.util.isTypedArray(e);var t}(e[0])?{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof io.Tensor?io.stack(e):io.tensor(e)}(e),recurse:!1}:{value:null,recurse:!0}}oy.MAX_BUFFER_SIZE=1e4;Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");function cy(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&io.util.assert("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))}var ly=io.kernel_impls.whereImpl,fy=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(){var e;return(0,D.Z)(this,n),(e=t.call(this)).blockSize=48,e.firstUse=!0,e.data=new io.DataStorage((0,Ac.Z)(e),(0,io.engine)()),e}return(0,F.Z)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"write",value:function(e,t,n){this.firstUse&&(this.firstUse=!1,(0,io.env)().get("IS_NODE")&&io.backend_util.warn("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));var r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&io.util.isString(n[0])){var a=n.map((function(e){return io.util.encodeString(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}},{key:"refCount",value:function(e){return this.data.has(e)?this.data.get(e).refCount:0}},{key:"incRef",value:function(e){this.data.get(e).refCount++}},{key:"decRef",value:function(e){this.data.has(e)&&this.data.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:function(){var e=(0,Bi.Z)(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readSync",value:function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensorInfos;if("complex64"===n){var a=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return io.backend_util.mergeRealAndImagArrays(a,i)}return io.util.convertBackendValuesAndArrayBuffer(this.data.get(e).values,n)}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return io.util.decodeString(e)}));return(0,io.buffer)(e.shape,e.dtype,n)}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return(0,io.buffer)(e.shape,e.dtype,t)}},{key:"makeOutput",value:function(e,t,n){return(0,io.engine)().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;var n=this.data.get(e),r=n.complexTensorInfos;null!=r&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"time",value:function(){var e=(0,Bi.Z)(A().mark((function e(t){var n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=io.util.now(),t(),r=io.util.now()-n,e.abrupt("return",{kernelMs:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(e){cy([e],"where");var t=this.readSync(e.dataId);return ly(e.shape,t)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return(0,hn.Z)((0,dn.Z)(n.prototype),"epsilon",this).call(this)}}]),n}(io.KernelBackend);fy.nextDataId=0;function hy(e){return function(t,n,r){for(var a=io.util.getArrayFromDType(n,t.length),i=0;i<t.length;++i)a[i]=e(t[i],r);return a}}function dy(e,t,n){return py(e,hy(t),n)}function py(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,u=a.x;cy(u,e);var s,c=o,l=c.data.get(u.dataId).values;if("string"===u.dtype){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");s=io.backend_util.fromUint8ToStringArray(l)}else s=l;var f=n||u.dtype,h=t(s,f,i);return c.makeTensorInfo(u.shape,f,h)}}(0,io.registerBackend)("cpu",(function(){return new fy}),1);var vy=dy(io.Elu,(function(e){return e>=0?e:Math.exp(e)-1})),gy={kernelName:io.Elu,backendName:"cpu",kernelFunc:vy};function my(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var yy={kernelName:io.Identity,backendName:"cpu",kernelFunc:my};function by(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha;cy([a],"leakyRelu");for(var o=io.util.sizeFromShape(a.shape),u=n.data.get(a.dataId).values,s=io.util.getTypedArrayFromDType("float32",o),c=0;c<u.length;c++)s[c]=u[c]<0?i*u[c]:u[c];return n.makeTensorInfo(a.shape,"float32",s)}var xy={kernelName:io.LeakyRelu,backendName:"cpu",kernelFunc:by};function wy(e){return function(t,n,r,a,i){var o=io.backend_util.assertAndGetBroadcastShape(t,n),u=o.length,s=io.util.computeStrides(o),c=io.util.sizeFromShape(o),l=io.util.getTypedArrayFromDType(i,c),f=t.length,h=n.length,d=io.util.computeStrides(t),p=io.util.computeStrides(n),v=io.backend_util.getBroadcastDims(t,o),g=io.backend_util.getBroadcastDims(n,o);if(v.length+g.length===0)for(var m=0;m<l.length;++m)l[m]=e(r[m%r.length],a[m%a.length]);else for(var y=function(t){var n=io.util.indexToLoc(t,u,s),i=n.slice(-f);v.forEach((function(e){return i[e]=0}));var o=io.util.locToIndex(i,f,d),c=n.slice(-h);g.forEach((function(e){return c[e]=0}));var m=io.util.locToIndex(c,h,p);l[t]=e(r[o],a[m])},b=0;b<l.length;++b)y(b);return[l,o]}}var ky=wy((function(e,t){return e<0?t*e:e}));function _y(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha;cy([r,a],"prelu");var i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,u=ky(r.shape,a.shape,i,o,"float32"),s=(0,C.Z)(u,2),c=s[0],l=s[1];return n.makeTensorInfo(l,"float32",c)}var Sy={kernelName:io.Prelu,backendName:"cpu",kernelFunc:_y},Cy=dy(io.Relu,(function(e){return Math.max(0,e)})),Ey={kernelName:io.Relu,backendName:"cpu",kernelFunc:Cy},Ay=dy(io.Relu6,(function(e){return Math.min(Math.max(0,e),6)})),Ny={kernelName:io.Relu6,backendName:"cpu",kernelFunc:Ay},Ty=hy((function(e){return 1/(1+Math.exp(-e))})),My=dy(io.Sigmoid,(function(e){return 1/(1+Math.exp(-e))})),Dy={kernelName:io.Sigmoid,backendName:"cpu",kernelFunc:My};function Fy(e,t,n,r,a){if("linear"===n)return my({inputs:{x:t},backend:e});if("relu"===n)return Cy({inputs:{x:t},backend:e});if("elu"===n)return vy({inputs:{x:t},backend:e});if("relu6"===n)return Ay({inputs:{x:t},backend:e});if("prelu"===n)return _y({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return by({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return My({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function Iy(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,u=n.makeTensorInfo(r.shape,"complex64");return n.data.get(u.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},u}var Oy={kernelName:io.Complex,backendName:"cpu",kernelFunc:Iy};function Ry(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){var r=Ry(e,t,"float32"),a=Ry(e,t,"float32");return Iy({inputs:{real:r,imag:a},backend:e})}var i=io.util.makeZerosTypedArray(io.util.sizeFromShape(t),n);return e.makeTensorInfo(t,n,i)}function Zy(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var By={kernelName:io.Real,backendName:"cpu",kernelFunc:Zy};function zy(e,t,n,r){if("int32"===r)return[t,"int32",Int32Array.from(e)];if("bool"===r){var a=io.util.toTypedArray([0],n),i=wy((function(e,t){return e!==t?1:0}))(t,[],e,a,"bool"),o=(0,C.Z)(i,2),u=o[0];return[o[1],"bool",u]}throw new Error("Error in Cast: failed to cast ".concat(n," to ").concat(r))}function Ly(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dtype;if("complex64"===i){if("complex64"===a.dtype)return my({inputs:{x:a},backend:n});var o=Ry(n,a.shape,a.dtype),u=Ly({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),s=Iy({inputs:{real:u,imag:o},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),s}if("complex64"===a.dtype){var c=Zy({inputs:{input:a},backend:n}),l=Ly({inputs:{x:c},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(c),l}if(!io.util.hasEncodingLoss(a.dtype,i)){var f=my({inputs:{x:a},backend:n});return{dataId:f.dataId,shape:f.shape,dtype:i}}var h=zy(n.data.get(a.dataId).values,a.shape,a.dtype,i),d=(0,C.Z)(h,3),p=d[0],v=d[1],g=d[2];return n.makeTensorInfo(p,v,g)}var Py={kernelName:io.Cast,backendName:"cpu",kernelFunc:Ly};function jy(e,t,n,r){return null==n?function(n){var a=n.inputs,i=n.backend,o=a.a,u=a.b,s=i;cy([o,u],e);var c=s.data.get(o.dataId).values,l=s.data.get(u.dataId).values,f="string"===o.dtype?io.backend_util.fromUint8ToStringArray(c):c,h="string"===o.dtype?io.backend_util.fromUint8ToStringArray(l):l,d=r||o.dtype,p=t(o.shape,u.shape,f,h,d),v=(0,C.Z)(p,2),g=v[0],m=v[1];return s.makeTensorInfo(m,d,g)}:function(e){var a=e.inputs,i=e.backend,o=a.a,u=a.b,s=i;if("complex64"===o.dtype||"complex64"===u.dtype){var c=Ly({inputs:{x:o},backend:s,attrs:{dtype:"complex64"}}),l=s.data.get(c.dataId),f=l.complexTensorInfos.real,h=l.complexTensorInfos.imag,d=s.data.get(f.dataId).values,p=s.data.get(h.dataId).values,v=Ly({inputs:{x:u},backend:s,attrs:{dtype:"complex64"}}),g=s.data.get(v.dataId),m=g.complexTensorInfos.real,y=g.complexTensorInfos.imag,b=s.data.get(m.dataId).values,x=s.data.get(y.dataId).values,w=n(o.shape,u.shape,d,p,b,x),k=(0,C.Z)(w,3),_=k[0],S=k[1],E=k[2],A=s.makeTensorInfo(E,"float32",_),N=s.makeTensorInfo(E,"float32",S),T=Iy({inputs:{real:A,imag:N},backend:s});return s.disposeIntermediateTensorInfo(c),s.disposeIntermediateTensorInfo(v),s.disposeIntermediateTensorInfo(A),s.disposeIntermediateTensorInfo(N),T}var M=s.data.get(o.dataId).values,D=s.data.get(u.dataId).values,F=r||o.dtype,I=t(o.shape,u.shape,M,D,F),O=(0,C.Z)(I,2),R=O[0],Z=O[1];return s.makeTensorInfo(Z,F,R)}}function Uy(e){return function(t,n,r,a,i,o){var u=io.backend_util.assertAndGetBroadcastShape(t,n),s=io.util.sizeFromShape(u),c=u.length,l=io.util.computeStrides(u),f=io.util.getTypedArrayFromDType("float32",s),h=io.util.getTypedArrayFromDType("float32",s),d=io.backend_util.getBroadcastDims(t,u),p=io.backend_util.getBroadcastDims(n,u),v=io.backend_util.mergeRealAndImagArrays(r,a),g=io.backend_util.mergeRealAndImagArrays(i,o),m=t.length,y=io.util.computeStrides(t),b=n.length,x=io.util.computeStrides(n);if(d.length+p.length===0)for(var w=0;w<f.length;w++){var k=w%v.length,_=w%g.length,S=e(v[2*k],v[2*k+1],g[2*_],g[2*_+1]);f[w]=S.real,h[w]=S.imag}else for(var C=function(t){var n=io.util.indexToLoc(t,c,l),r=n.slice(-m);d.forEach((function(e){return r[e]=0}));var a=io.util.locToIndex(r,m,y),i=n.slice(-b);p.forEach((function(e){return i[e]=0}));var o=io.util.locToIndex(i,b,x),u=e(v[2*a],v[2*a+1],g[2*o],g[2*o+1]);f[t]=u.real,h[t]=u.imag},E=0;E<f.length;E++)C(E);return[f,h,u]}}var Wy=wy((function(e,t){return e+t})),Vy=Uy((function(e,t,n,r){return{real:e+n,imag:t+r}})),qy=jy(io.Add,Wy,Vy),Hy={kernelName:io.Add,backendName:"cpu",kernelFunc:qy};function Gy(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=io.util.sizeFromShape(a.shape),u=io.util.inferFromImplicitShape(i,o),s=io.util.sizeFromShape(u);io.util.assert(o===s,(function(){return"The new shape (".concat(u,") has ").concat(s," elements and the old ")+"shape (".concat(a.shape,") has ").concat(o," elements. The new shape and old ")+"shape must have the same number of elements."})),n.incRef(a.dataId);var c=n.data.get(a.dataId);if(null!=c.complexTensorInfos){var l=c.complexTensorInfos.real,f=c.complexTensorInfos.imag;l.shape=u,f.shape=u}return{dataId:a.dataId,shape:u,dtype:a.dtype}}var Xy={kernelName:io.Reshape,backendName:"cpu",kernelFunc:Gy};function Yy(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=r.transposeA,u=r.transposeB;cy([a,i],"matMul");var s=a.shape.length,c=i.shape.length,l=o?a.shape[s-2]:a.shape[s-1],f=u?i.shape[c-1]:i.shape[c-2],h=o?a.shape[s-1]:a.shape[s-2],d=u?i.shape[c-2]:i.shape[c-1],p=a.shape.slice(0,-2),v=i.shape.slice(0,-2),g=io.util.sizeFromShape(p),m=io.util.sizeFromShape(v),y=io.broadcast_util.assertAndGetBroadcastShape(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([h,d]);io.util.assert(l===f,(function(){return"Error in matMul: inner shapes (".concat(l,") and (")+"".concat(f,") of Tensors with shapes ").concat(a.shape," and ")+"".concat(i.shape," and transposeA=").concat(o)+" and transposeB=".concat(u," must match.")}));for(var b=u?[m,d,f]:[m,f,d],x=Gy({inputs:{x:a},backend:n,attrs:{shape:o?[g,l,h]:[g,h,l]}}),w=Gy({inputs:{x:i},backend:n,attrs:{shape:b}}),k=o?x.shape[1]:x.shape[2],_=o?x.shape[2]:x.shape[1],S=u?w.shape[1]:w.shape[2],E=Math.max(g,m),A=n.data.get(x.dataId).values,N=n.data.get(w.dataId).values,T=io.util.computeStrides(x.shape),M=io.util.computeStrides(w.shape),D=o?[T[0],1,T[1]]:[T[0],T[1],1],F=(0,C.Z)(D,3),I=F[0],O=F[1],R=F[2],Z=u?[1,M[1],M[0]]:[M[1],1,M[0]],B=(0,C.Z)(Z,3),z=B[0],L=B[1],P=B[2],j=_*S,U=(0,io.buffer)([E,_,S],x.dtype),W=U.values,V=n.blockSize,q=0;q<E;q++)for(var H=q%g,G=q%m,X=0;X<_;X+=V)for(var Y=Math.min(X+V,_),K=0;K<S;K+=V)for(var $=Math.min(K+V,S),Q=0;Q<k;Q+=V)for(var J=Math.min(Q+V,k),ee=X;ee<Y;ee++)for(var te=K;te<$;te++){for(var ne=0,re=Q;re<J;re++){ne+=A[H*I+ee*O+re*R]*N[re*z+te*L+G*P]}W[q*j+(ee*S+te)]+=ne}return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w),n.makeTensorInfo(y,U.dtype,U.values)}var Ky={kernelName:io.BatchMatMul,backendName:"cpu",kernelFunc:Yy};var $y={kernelName:io._FusedMatMul,backendName:"cpu",kernelFunc:function(e){var t,n,r,a=e.inputs,i=e.backend,o=e.attrs,u=a.a,s=a.b,c=a.bias,l=a.preluActivationWeights,f=o.transposeA,h=o.transposeB,d=o.activation,p=o.leakyreluAlpha,v=[];t=Yy({inputs:{a:u,b:s},attrs:{transposeA:f,transposeB:h},backend:i}),c&&(n=qy({inputs:{a:t,b:c},backend:i}),v.push(t),t=n),d&&(r=Fy(i,t,d,l,p),v.push(t),t=r);for(var g=0,m=v;g<m.length;g++){var y=m[g];i.disposeIntermediateTensorInfo(y)}return t}};function Qy(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}var Jy={kernelName:io.Abs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs.x,n=e.backend;cy(t,"abs");var r=new Float32Array(io.util.sizeFromShape(t.shape));return r=Qy(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}},eb=dy(io.Acos,(function(e){return Math.acos(e)})),tb={kernelName:io.Acos,backendName:"cpu",kernelFunc:eb},nb=dy(io.Acosh,(function(e){return Math.acosh(e)})),rb={kernelName:io.Acosh,backendName:"cpu",kernelFunc:nb};var ab={kernelName:io.AddN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t;cy(t,"addN");for(var a=r.map((function(e){return n.data.get(e.dataId).values})),i=(0,io.buffer)(r[0].shape,r[0].dtype),o=i.values,u=0;u<r.length;u++)for(var s=a[u],c=0;c<o.length;c++)o[c]+=s[c];return n.makeTensorInfo(i.shape,i.dtype,i.values)}};function ib(e,t,n,r,a){for(var i=t.length,o=io.util.sizeFromShape(t),u=io.util.computeStrides(t),s=io.util.computeStrides(a),c=io.util.getTypedArrayFromDType(n,io.util.sizeFromShape(a)),l=0;l<o;++l){for(var f=io.util.indexToLoc(l,i,u),h=new Array(f.length),d=0;d<h.length;d++)h[d]=f[r[d]];c[io.util.locToIndex(h,i,s)]=e[l]}return c}function ob(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.perm;cy(a,"transpose");for(var o=a.shape.length,u=new Array(o),s=0;s<u.length;s++)u[s]=a.shape[i[s]];var c=ib(r.data.get(a.dataId).values,a.shape,a.dtype,i,u);return{dataId:r.write(c,u,a.dtype),shape:u,dtype:a.dtype}}var ub={kernelName:io.Transpose,backendName:"cpu",kernelFunc:ob};var sb={kernelName:io.All,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;cy(a,"all");var u=io.util.parseAxisParam(i,a.shape),s=u,c=io.backend_util.getAxesPermutation(s,a.shape.length),l=a;null!=c&&(l=ob({inputs:{x:a},backend:n,attrs:{perm:c}}),s=io.backend_util.getInnerMostAxes(s.length,a.shape.length)),io.backend_util.assertAxesAreInnerMostDims("all",s,l.shape.length);for(var f=io.backend_util.computeOutAndReduceShapes(l.shape,s),h=(0,C.Z)(f,2),d=h[0],p=h[1],v=io.util.sizeFromShape(p),g=io.util.makeZerosTypedArray(io.util.sizeFromShape(d),l.dtype),m=n.data.get(l.dataId).values,y=0;y<g.length;++y){for(var b=y*v,x=m[b],w=0;w<v;++w){var k=m[b+w];x=x&&k}g[y]=x}null!=c&&n.disposeIntermediateTensorInfo(l);var _=n.makeTensorInfo(d,l.dtype,g);if(o){var S=Gy({inputs:{x:_},backend:n,attrs:{shape:io.backend_util.expandShapeToKeepDim(d,u)}});return n.disposeIntermediateTensorInfo(_),S}return _}};var cb={kernelName:io.Any,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;cy(a,"any");var u=io.util.parseAxisParam(i,a.shape),s=u,c=io.backend_util.getAxesPermutation(s,a.shape.length),l=a;null!=c&&(l=ob({inputs:{x:a},backend:n,attrs:{perm:c}}),s=io.backend_util.getInnerMostAxes(s.length,a.shape.length)),io.backend_util.assertAxesAreInnerMostDims("any",s,l.shape.length);for(var f=io.backend_util.computeOutAndReduceShapes(l.shape,s),h=(0,C.Z)(f,2),d=h[0],p=h[1],v=io.util.sizeFromShape(p),g=io.util.makeZerosTypedArray(io.util.sizeFromShape(d),l.dtype),m=n.data.get(l.dataId).values,y=0;y<g.length;++y){for(var b=y*v,x=m[b],w=0;w<v;++w){var k=m[b+w];x=x||k}g[y]=x}null!=c&&n.disposeIntermediateTensorInfo(l);var _=n.makeTensorInfo(d,l.dtype,g);if(o){var S=Gy({inputs:{x:_},backend:n,attrs:{shape:io.backend_util.expandShapeToKeepDim(d,u)}});return n.disposeIntermediateTensorInfo(_),S}return _}};var lb={kernelName:io.ArgMax,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;cy(a,"argMax");var o=io.util.parseAxisParam(i,a.shape),u=io.backend_util.getAxesPermutation(o,a.shape.length),s=a,c=[];null!=u&&(s=ob({inputs:{x:a},backend:n,attrs:{perm:u}}),c.push(s),o=io.backend_util.getInnerMostAxes(o.length,s.shape.length)),o=[o[0]],io.backend_util.assertAxesAreInnerMostDims("argMax",o,s.shape.length);for(var l=io.backend_util.computeOutAndReduceShapes(s.shape,o),f=(0,C.Z)(l,2),h=f[0],d=f[1],p=io.util.sizeFromShape(h),v=io.util.makeZerosTypedArray(p,"int32"),g=io.util.sizeFromShape(d),m=n.data.get(s.dataId).values,y=0;y<v.length;++y){for(var b=y*g,x=m[b],w=0,k=0;k<g;++k){var _=m[b+k];_>x&&(x=_,w=k)}v[y]=w}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(h,"int32",v)}};var fb={kernelName:io.ArgMin,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;cy(a,"argMin");var o=io.util.parseAxisParam(i,a.shape),u=io.backend_util.getAxesPermutation(o,a.shape.length),s=a,c=[];null!=u&&(s=ob({inputs:{x:a},backend:n,attrs:{perm:u}}),c.push(s),o=io.backend_util.getInnerMostAxes(o.length,s.shape.length)),o=[o[0]],io.backend_util.assertAxesAreInnerMostDims("argMin",o,s.shape.length);for(var l=io.backend_util.computeOutAndReduceShapes(s.shape,o),f=(0,C.Z)(l,2),h=f[0],d=f[1],p=io.util.sizeFromShape(h),v=io.util.makeZerosTypedArray(p,"int32"),g=io.util.sizeFromShape(d),m=n.data.get(s.dataId).values,y=0;y<v.length;++y){for(var b=y*g,x=m[b],w=0,k=0;k<g;++k){var _=m[b+k];_<x&&(x=_,w=k)}v[y]=w}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(h,"int32",v)}},hb=dy(io.Asin,(function(e){return Math.asin(e)})),db={kernelName:io.Asin,backendName:"cpu",kernelFunc:hb},pb=dy(io.Asinh,(function(e){return Math.asinh(e)})),vb={kernelName:io.Asinh,backendName:"cpu",kernelFunc:pb},gb=dy(io.Atan,(function(e){return Math.atan(e)})),mb={kernelName:io.Atan,backendName:"cpu",kernelFunc:gb},yb=wy((function(e,t){return Math.atan2(e,t)})),bb=jy(io.Atan2,yb),xb={kernelName:io.Atan2,backendName:"cpu",kernelFunc:bb},wb=dy(io.Atanh,(function(e){return Math.atanh(e)})),kb={kernelName:io.Atanh,backendName:"cpu",kernelFunc:wb};function _b(e,t,n,r,a,i){for(var o=a.strideHeight,u=a.strideWidth,s=a.dilationHeight,c=a.dilationWidth,l=a.effectiveFilterHeight,f=a.effectiveFilterWidth,h=a.padInfo.top,d=a.padInfo.left,p="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=(0,io.buffer)(a.outShape,n),g=v.values,m=a.outShape[1]*a.outShape[2]*a.outShape[3],y=a.outShape[2]*a.outShape[3],b=a.outShape[3],x=0;x<a.batchSize;++x)for(var w=x*m,k=x*r[0],_=0;_<a.inChannels;++_)for(var S=0;S<a.outHeight;++S)for(var C=S*o-h,E=Math.max(0,C),A=Math.min(a.inHeight,l+C),N=w+S*y,T=0;T<a.outWidth;++T){for(var M=T*u-d,D=Math.max(0,M),F=Math.min(a.inWidth,f+M),I=p,O=0,R=0,Z=E;Z<A;Z+=s){for(var B=k+Z*r[1],z=D;z<F;z+=c){var L=e[B+z*r[2]+_];"max"===i&&L>I?I=L:"avg"===i&&(O+=L,R++)}if(isNaN(I))break}g[N+T*b+_]="avg"===i?O/R:I}return v}function Sb(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=(0,io.buffer)(r.outShape,"int32"),u=r.strideHeight,s=r.strideWidth,c=r.dilationHeight,l=r.dilationWidth,f=r.effectiveFilterHeight,h=r.effectiveFilterWidth,d=r.padInfo.top,p=r.padInfo.left,v=(0,io.buffer)(t,n,e),g=0;g<r.batchSize;++g)for(var m=0;m<r.inChannels;++m)for(var y=0;y<r.outHeight;++y){for(var b=y*u-d,x=b;x<0;)x+=c;for(var w=Math.min(r.inHeight,f+b),k=0;k<r.outWidth;++k){for(var _=k*s-p,S=_;S<0;)S+=l;for(var C=Math.min(r.inWidth,h+_),E=Number.NEGATIVE_INFINITY,A=-1,N=x;N<w;N+=c)for(var T=N-b,M=S;M<C;M+=l){var D=M-_,F=v.get(g,N,M,m);F>E&&(E=F,A=a?i?((g*r.inHeight+N)*r.inWidth+M)*r.inChannels+m:(N*r.inWidth+M)*r.inChannels+m:T*h+D)}o.set(A,g,y,k,m)}}return o}function Cb(e,t,n,r,a,i){for(var o=a.strideDepth,u=a.strideHeight,s=a.strideWidth,c=a.dilationDepth,l=a.dilationHeight,f=a.dilationWidth,h=a.effectiveFilterDepth,d=a.effectiveFilterHeight,p=a.effectiveFilterWidth,v=a.padInfo.front,g=a.padInfo.top,m=a.padInfo.left,y="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=(0,io.buffer)(a.outShape,n),x=b.values,w=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],k=a.outShape[2]*a.outShape[3]*a.outShape[4],_=a.outShape[3]*a.outShape[4],S=a.outShape[4],C=0;C<a.batchSize;++C)for(var E=C*w,A=C*r[0],N=0;N<a.inChannels;++N)for(var T=0;T<a.outDepth;++T){for(var M=T*o-v,D=M;D<0;)D+=c;for(var F=Math.min(a.inDepth,h+M),I=E+T*k,O=0;O<a.outHeight;++O){for(var R=O*u-g,Z=R;Z<0;)Z+=l;for(var B=Math.min(a.inHeight,d+R),z=I+O*_,L=0;L<a.outWidth;++L){for(var P=L*s-m,j=P;j<0;)j+=f;for(var U=Math.min(a.inWidth,p+P),W=z+L*S,V=y,q=0,H=0,G=D;G<F;G+=c){for(var X=A+G*r[1],Y=Z;Y<B;Y+=l){for(var K=X+Y*r[2],$=j;$<U;$+=f){var Q=e[K+$*r[3]+N];if("max"===i&&Q>V?V=Q:"avg"===i&&(q+=Q,H++),isNaN(V))break}if(isNaN(V))break}if(isNaN(V))break}x[W+N]="avg"===i?q/Math.max(H,1):V}}}return b}var Eb={kernelName:io.AvgPool,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;cy(a,"avgPool");var i=r.filterSize,o=r.strides,u=r.pad,s=r.dimRoundingMode;io.util.assert(io.backend_util.eitherStridesOrDilationsAreOne(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c,l=io.backend_util.computePool2DInfo(a.shape,i,o,1,u,s);if(1===l.filterWidth&&1===l.filterHeight&&io.util.arraysEqual(l.inShape,l.outShape))c=my({inputs:{x:a},backend:n});else{var f=n.data.get(a.dataId).values,h=io.util.computeStrides(a.shape),d=_b(f,a.shape,a.dtype,h,l,"avg");c=n.makeTensorInfo(l.outShape,a.dtype,d.values)}return c}};var Ab={kernelName:io.AvgPool3D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,u=r.pad,s=r.dimRoundingMode,c=r.dataFormat;cy(a,"avgPool3d");var l=io.backend_util.computePool3DInfo(a.shape,i,o,1,u,s,c),f=Cb(n.data.get(a.dataId).values,a.shape,a.dtype,io.util.computeStrides(a.shape),l,"avg");return n.makeTensorInfo(f.shape,"float32",f.values)}};var Nb={kernelName:io.AvgPool3DGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,u=r.strides,s=r.pad,c=r.dimRoundingMode;cy([a,i],"avgPool3DGrad");for(var l=io.backend_util.computePool3DInfo(i.shape,o,u,1,s,c),f=l.strideDepth,h=l.strideHeight,d=l.strideWidth,p=l.filterDepth,v=l.filterHeight,g=l.filterWidth,m=l.dilationDepth,y=l.dilationHeight,b=l.dilationWidth,x=l.effectiveFilterDepth,w=l.effectiveFilterHeight,k=l.effectiveFilterWidth,_=x-1-l.padInfo.front,S=k-1-l.padInfo.left,C=w-1-l.padInfo.top,E=(0,io.buffer)(i.shape,"float32"),A=1/(p*v*g),N=n.bufferSync(a),T=0;T<l.batchSize;++T)for(var M=0;M<l.inChannels;++M)for(var D=0;D<l.inDepth;++D)for(var F=0;F<l.inHeight;++F)for(var I=0;I<l.inWidth;++I){for(var O=D-_,R=F-C,Z=I-S,B=0,z=0;z<x;z+=m){var L=(O+z)/f;if(!(L<0||L>=l.outDepth||Math.floor(L)!==L))for(var P=0;P<w;P+=y){var j=(R+P)/h;if(!(j<0||j>=l.outHeight||Math.floor(j)!==j))for(var U=0;U<k;U+=b){var W=(Z+U)/d;if(!(W<0||W>=l.outWidth||Math.floor(W)!==W))B+=N.get(T,L,j,W,M)}}}E.set(B*A,T,D,F,I,M)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}};var Tb={kernelName:io.AvgPoolGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;cy([a,i],"avgPoolGrad");for(var u=r.filterSize,s=r.strides,c=r.pad,l=io.backend_util.computePool2DInfo(o.shape,u,s,1,c),f=l.strideHeight,h=l.strideWidth,d=l.filterHeight,p=l.filterWidth,v=l.dilationHeight,g=l.dilationWidth,m=l.effectiveFilterHeight,y=l.effectiveFilterWidth,b=y-1-l.padInfo.left,x=m-1-l.padInfo.top,w=(0,io.buffer)(o.shape,"float32"),k=1/(d*p),_=n.data.get(a.dataId).values,S=(0,io.buffer)(a.shape,"float32",_),C=0;C<l.batchSize;++C)for(var E=0;E<l.inChannels;++E)for(var A=0;A<l.inHeight;++A)for(var N=0;N<l.inWidth;++N){for(var T=A-x,M=N-b,D=0,F=0;F<m;F+=v){var I=(T+F)/f;if(!(I<0||I>=l.outHeight||Math.floor(I)!==I))for(var O=0;O<y;O+=g){var R=(M+O)/h;if(!(R<0||R>=l.outWidth||Math.floor(R)!==R))D+=S.get(C,I,R,E)}}w.set(D*k,C,A,N,E)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};var Mb={kernelName:io.FusedBatchNorm,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.scale,o=t.offset,u=t.mean,s=t.variance;io.util.assert(u.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),io.util.assert(null==o||u.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),io.util.assert(null==i||u.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),cy([a,u,s,i,o],"batchNorm");var c=r.varianceEpsilon;null==c&&(c=.001);for(var l=n.data.get(a.dataId).values,f=n.data.get(u.dataId).values,h=n.data.get(s.dataId).values,d=i?n.data.get(i.dataId).values:new Float32Array([1]),p=o?n.data.get(o.dataId).values:new Float32Array([0]),v=new Float32Array(l.length),g=p.length,m=d.length,y=h.length,b=f.length,x=0,w=0,k=0,_=0,S=0;S<l.length;++S)v[S]=p[x++]+(l[S]-f[w++])*d[k++]/Math.sqrt(h[_++]+c),x>=g&&(x=0),w>=b&&(w=0),k>=m&&(k=0),_>=y&&(_=0);return n.makeTensorInfo(a.shape,a.dtype,v)}};function Db(e,t,n,r,a){var i=io.slice_util.isSliceContinous(r,t,n),o=io.util.sizeFromShape(n),u=io.util.computeStrides(r);if(i){var s=io.slice_util.computeFlatOffset(t,u);return"string"===a?e.slice(s,s+o):e.subarray(s,s+o)}for(var c="string"===a?io.backend_util.fromUint8ToStringArray(e):e,l=(0,io.buffer)(r,a,c),f=(0,io.buffer)(n,a),h=0;h<f.size;++h){var d=f.indexToLoc(h),p=d.map((function(e,n){return e+t[n]}));f.set.apply(f,[l.get.apply(l,(0,M.Z)(p))].concat((0,M.Z)(d)))}return"string"===a?io.backend_util.fromStringArrayToUint8(f.values):f.values}function Fb(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.size;cy(a,"slice");var u=io.slice_util.parseSliceParams(a,i,o),s=(0,C.Z)(u,2),c=s[0],l=s[1];io.slice_util.assertParamsValid(a,c,l);var f=Db(n.data.get(a.dataId).values,c,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,f)}var Ib={kernelName:io.Slice,backendName:"cpu",kernelFunc:Fb};var Ob={kernelName:io.BatchToSpaceND,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;cy([a],"batchToSpaceND");var u=i.reduce((function(e,t){return e*t})),s=io.backend_util.getReshaped(a.shape,i,u),c=io.backend_util.getPermuted(s.length,i.length),l=io.backend_util.getReshapedPermuted(a.shape,i,u),f=io.backend_util.getSliceBeginCoords(o,i.length),h=io.backend_util.getSliceSize(l,o,i.length),d=Gy({inputs:{x:a},backend:n,attrs:{shape:s}}),p=ob({inputs:{x:d},backend:n,attrs:{perm:c}}),v=Gy({inputs:{x:p},backend:n,attrs:{shape:l}}),g=Fb({inputs:{x:v},backend:n,attrs:{begin:f,size:h}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),g}};function Rb(e,t,n,r,a){for(var i=io.util.sizeFromShape(r),o=io.util.makeZerosTypedArray(a,n),u=0;u<e.length;u++){var s=e[u];if(s<0)throw new Error("Input x must be non-negative!");s>=a||(o[s]+=i>0?t[u]:1)}return o}function Zb(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.shape[0],i=e.shape[1],o=(0,io.buffer)([a,n],t.dtype),u=0;u<a;u++)for(var s=0;s<i;s++){var c=e.get(u,s);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?o.set(1,u,c):t.size>0?o.set(o.get(u,c)+t.get(u,s),u,c):o.set(o.get(u,c)+1,u,c))}return o}var Bb={kernelName:io.Bincount,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,u=Rb(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}},zb=wy((function(e,t){return e&t})),Lb=jy(io.BitwiseAnd,zb),Pb={kernelName:io.BitwiseAnd,backendName:"cpu",kernelFunc:Lb};var jb={kernelName:io.BroadcastArgs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,u=io.backend_util.assertAndGetBroadcastShape(Array.from(i),Array.from(o));return n.makeTensorInfo([u.length],"int32",Int32Array.from(u))}},Ub=hy((function(e){return Math.ceil(e)})),Wb=py(io.Ceil,Ub),Vb={kernelName:io.Ceil,backendName:"cpu",kernelFunc:Wb},qb=dy(io.ClipByValue,(function(e,t){var n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),Hb={kernelName:io.ClipByValue,backendName:"cpu",kernelFunc:qb},Gb={kernelName:io.ComplexAbs,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs.x,n=e.backend,r=new Float32Array(io.util.sizeFromShape(t.shape)),a=n.data.get(t.dataId),i=a.complexTensorInfos.real,o=a.complexTensorInfos.imag,u=n.data.get(i.dataId).values,s=n.data.get(o.dataId).values,c=0;c<u.length;c++){var l=u[c],f=s[c];r[c]=Math.hypot(l,f)}return n.makeOutput(r,t.shape,"float32")}};function Xb(e,t,n,r){var a=io.util.getArrayFromDType(n,io.util.sizeFromShape(t));if(r&&"string"!==n){var i=0;e.forEach((function(e){var t=io.util.sizeFromShape(e.shape);a.set(e.vals,i),i+=t}))}else{var o=0;e.forEach((function(e){for(var r="string"===n?io.backend_util.fromUint8ToStringArray(e.vals):e.vals,i=0,u=0;u<e.shape[0];++u)for(var s=u*t[1]+o,c=0;c<e.shape[1];++c)a[s+c]=r[i++];o+=e.shape[1]}))}return a}function Yb(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var Kb={kernelName:io.Imag,backendName:"cpu",kernelFunc:Yb};function $b(e){var t=e.inputs,n=e.backend,r=e.attrs.axis,a=io.util.parseAxisParam(r,t[0].shape)[0],i=t.map((function(e){return e.shape}));io.backend_util.assertParamsConsistent(i,a);var o=io.backend_util.computeOutShape(t.map((function(e){return e.shape})),a);if(0===io.util.sizeFromShape(o))return n.makeTensorInfo(o,t[0].dtype,[]);var u=t.filter((function(e){return io.util.sizeFromShape(e.shape)>0}));if(1===u.length)return my({inputs:{x:u[0]},backend:n});if("complex64"===u[0].dtype){var s=u.map((function(e){return Zy({inputs:{input:e},backend:n})})),c=u.map((function(e){return Yb({inputs:{input:e},backend:n})})),l=$b({inputs:s,backend:n,attrs:{axis:a}}),f=$b({inputs:c,backend:n,attrs:{axis:a}}),h=Iy({inputs:{real:l,imag:f},backend:n});return s.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(f),h}var d=u.map((function(e){var t=io.util.sizeFromShape(e.shape.slice(a));return Gy({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),p=d.map((function(e){return{vals:n.data.get(e.dataId).values,shape:e.shape}}));o=io.backend_util.computeOutShape(d.map((function(e){return e.shape})),1);var v=1===d[0].shape[0],g=Xb(p,o,t[0].dtype,v),m=io.backend_util.computeOutShape(u.map((function(e){return e.shape})),a),y=n.makeTensorInfo(m,t[0].dtype,g);return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),y}var Qb={kernelName:io.Concat,backendName:"cpu",kernelFunc:$b};function Jb(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,u=r.pad,s=r.dataFormat,c=r.dilations,l=r.dimRoundingMode;cy([a,i],"conv2d");for(var f=io.backend_util.convertConv2DDataFormat(s),h=io.backend_util.computeConv2DInfo(a.shape,i.shape,o,c,u,l,!1,f),d=h.filterHeight,p=h.filterWidth,v=h.dilationHeight,g=h.dilationWidth,m=h.padInfo.left,y=h.padInfo.top,b="channelsLast"===h.dataFormat,x=new io.TensorBuffer(h.outShape,a.dtype),w=io.util.computeStrides(a.shape),k=io.util.computeStrides(i.shape),_=w[0],S=b?w[1]:w[2],C=b?w[2]:1,E=b?1:w[1],A=x.strides[0],N=b?x.strides[1]:x.strides[2],T=b?x.strides[2]:1,M=b?1:x.strides[1],D=n.data.get(a.dataId).values,F=n.data.get(i.dataId).values,I=x.values,O=0;O<h.batchSize;++O)for(var R=O*_,Z=O*A,B=0;B<h.outHeight;++B)for(var z=Z+B*N,L=B*h.strideHeight-y,P=0;P<d;++P){var j=L+P*v;if(!(j<0||j>=h.inHeight))for(var U=P*k[0],W=R+j*S,V=0;V<h.outWidth;++V)for(var q=z+V*T,H=V*h.strideWidth-m,G=0;G<p;++G){var X=H+G*g;if(!(X<0||X>=h.inWidth))for(var Y=W+X*C,K=U+G*k[1],$=0;$<h.inChannels;++$){for(var Q=D[Y+$*E],J=0;J<h.outChannels;++J)I[q+J*M]+=Q*F[K+J];K+=h.outChannels}}}return n.makeTensorInfo(x.shape,x.dtype,I)}var ex={kernelName:io.Conv2D,backendName:"cpu",kernelFunc:Jb};var tx={kernelName:io.Conv2DBackpropFilter,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,u=r.pad,s=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape;cy([a,i],"conv2dBackpropFilter");for(var f=io.backend_util.convertConv2DDataFormat(s),h=io.backend_util.computeConv2DInfo(a.shape,l,o,1,u,c,!1,f),d=h.strideHeight,p=h.strideWidth,v=h.filterHeight,g=h.filterWidth,m="channelsLast"===h.dataFormat,y=new io.TensorBuffer(h.filterShape,"float32"),b=h.padInfo.left,x=h.padInfo.top,w=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,_=new io.TensorBuffer(a.shape,a.dtype,w),S=new io.TensorBuffer(i.shape,i.dtype,k),C=0;C<v;++C)for(var E=Math.max(0,Math.ceil((x-C)/d)),A=Math.min(h.outHeight,(h.inHeight+x-C)/d),N=0;N<g;++N)for(var T=Math.max(0,Math.ceil((b-N)/p)),M=Math.min(h.outWidth,(h.inWidth+b-N)/p),D=0;D<h.inChannels;++D)for(var F=0;F<h.outChannels;++F){for(var I=0,O=0;O<h.batchSize;++O)for(var R=E;R<A;++R)for(var Z=C+R*d-x,B=T;B<M;++B){var z=N+B*p-b;I+=m?_.get(O,Z,z,D)*S.get(O,R,B,F):_.get(O,D,Z,z)*S.get(O,F,R,B)}y.set(I,C,N,D,F)}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var nx={kernelName:io.Conv2DBackpropInput,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,u=r.strides,s=r.pad,c=r.dataFormat,l=r.dimRoundingMode;cy([a,i],"conv2dBackpropInput");var f=io.util.computeStrides(i.shape),h=io.util.computeStrides(a.shape),d=io.backend_util.convertConv2DDataFormat(c),p=io.backend_util.computeConv2DInfo(o,i.shape,u,1,s,l,!1,d),v=new io.TensorBuffer(p.inShape,"float32"),g=v.values,m=n.data.get(a.dataId).values,y=n.data.get(i.dataId).values,b=(0,C.Z)(f,3),x=b[0],w=b[1],k=b[2],_=p.batchSize,S=p.filterHeight,E=p.filterWidth,A=p.inChannels,N=p.inHeight,T=p.inWidth,M=p.outChannels,D=p.outHeight,F=p.outWidth,I=p.strideHeight,O=p.strideWidth;d=p.dataFormat;for(var R=S-1-p.padInfo.top,Z=E-1-p.padInfo.left,B="channelsLast"===d,z=v.strides[0],L=B?v.strides[1]:v.strides[2],P=B?v.strides[2]:1,j=B?1:v.strides[1],U=h[0],W=B?h[1]:h[2],V=B?h[2]:1,q=B?1:h[1],H=0;H<_;++H)for(var G=0;G<A;++G)for(var X=0;X<N;++X)for(var Y=X-R,K=Math.max(0,Math.ceil(Y/I)),$=Math.min(D,(S+Y)/I),Q=0;Q<T;++Q){for(var J=Q-Z,ee=Math.max(0,Math.ceil(J/O)),te=Math.min(F,(E+J)/O),ne=0,re=K;re<$;++re)for(var ae=re*I-Y,ie=ee;ie<te;++ie)for(var oe=U*H+W*re+V*ie,ue=x*(S-1-ae)+w*(E-1-(ie*O-J))+k*G,se=0;se<M;++se){ne+=m[oe+q*se]*y[ue+se]}g[z*H+L*X+P*Q+j*G]=ne}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};var rx={kernelName:io.Conv3D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,u=r.pad,s=r.dilations;cy([a,i],"conv3d");for(var c=io.backend_util.computeConv3DInfo(a.shape,i.shape,o,s,u),l=c.filterDepth,f=c.filterHeight,h=c.filterWidth,d=c.dilationDepth,p=c.dilationHeight,v=c.dilationWidth,g=c.padInfo,m=g.front,y=g.left,b=g.top,x=new io.TensorBuffer(c.outShape,a.dtype),w=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,_=x.values,S=io.util.computeStrides(a.shape),C=io.util.computeStrides(i.shape),E=0;E<c.batchSize;++E)for(var A=E*S[0],N=E*x.strides[0],T=0;T<c.outDepth;++T)for(var M=N+T*x.strides[1],D=T*c.strideDepth-m,F=0;F<l;++F){var I=D+F*d;if(!(I<0||I>=c.inDepth))for(var O=F*C[0],R=A+I*S[1],Z=0;Z<c.outHeight;++Z)for(var B=M+Z*x.strides[2],z=Z*c.strideHeight-b,L=0;L<f;++L){var P=z+L*p;if(!(P<0||P>=c.inHeight))for(var j=O+L*C[1],U=R+P*S[2],W=0;W<c.outWidth;++W)for(var V=B+W*c.outChannels,q=W*c.strideWidth-y,H=0;H<h;++H){var G=q+H*v;if(!(G<0||G>=c.inWidth))for(var X=j+H*C[2],Y=U+G*c.inChannels,K=X,$=0;$<c.inChannels;++$){for(var Q=w[Y+$],J=0;J<c.outChannels;++J)_[V+J]+=Q*k[K+J];K+=c.outChannels}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var ax={kernelName:io.Conv3DBackpropFilterV2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,u=r.pad,s=r.filterShape;cy([a,i],"conv3dBackpropFilterV2");for(var c=io.util.computeStrides(a.shape),l=io.util.computeStrides(i.shape),f=io.backend_util.computeConv3DInfo(a.shape,s,o,1,u),h=f.strideDepth,d=f.strideHeight,p=f.strideWidth,v=f.filterDepth,g=f.filterHeight,m=f.filterWidth,y=new io.TensorBuffer(f.filterShape,"float32"),b=y.values,x=(0,C.Z)(y.strides,4),w=x[0],k=x[1],_=x[2],S=x[3],E=n.data.get(i.dataId).values,A=(0,C.Z)(l,4),N=A[0],T=A[1],M=A[2],D=A[3],F=n.data.get(a.dataId).values,I=(0,C.Z)(c,4),O=I[0],R=I[1],Z=I[2],B=I[3],z=f.padInfo.front,L=f.padInfo.left,P=f.padInfo.top,j=0;j<v;++j)for(var U=Math.max(0,Math.ceil((z-j)/h)),W=Math.min(f.outDepth,(f.inDepth+z-j)/h),V=j*w,q=0;q<g;++q)for(var H=Math.max(0,Math.ceil((P-q)/d)),G=Math.min(f.outHeight,(f.inHeight+P-q)/d),X=q*k+V,Y=0;Y<m;++Y)for(var K=Math.max(0,Math.ceil((L-Y)/p)),$=Math.min(f.outWidth,(f.inWidth+L-Y)/p),Q=Y*_+X,J=0;J<f.inChannels;++J)for(var ee=J*S+Q,te=0;te<f.outChannels;++te){for(var ne=0,re=0;re<f.batchSize;++re)for(var ae=re*O,ie=re*N,oe=U;oe<W;++oe)for(var ue=(j+oe*h-z)*R+ae,se=oe*T+ie,ce=H;ce<G;++ce)for(var le=(q+ce*d-P)*Z+ue,fe=ce*M+se,he=K;he<$;++he){var de=he*D+fe;ne+=F[(Y+he*p-L)*B+le+J]*E[de+te]}b[ee+te]=ne}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var ix={kernelName:io.Conv3DBackpropInputV2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,u=r.strides,s=r.inputShape;cy([a],"conv3dBackpropInputV2");for(var c=io.util.computeStrides(a.shape),l=io.util.computeStrides(i.shape),f=io.backend_util.computeConv3DInfo(s,i.shape,u,1,o),h=new io.TensorBuffer(f.inShape,"float32"),d=h.values,p=(0,C.Z)(h.strides,4),v=p[0],g=p[1],m=p[2],y=p[3],b=n.data.get(a.dataId).values,x=(0,C.Z)(c,4),w=x[0],k=x[1],_=x[2],S=x[3],E=n.data.get(i.dataId).values,A=(0,C.Z)(l,4),N=A[0],T=A[1],M=A[2],D=A[3],F=f.batchSize,I=f.filterDepth,O=f.filterHeight,R=f.filterWidth,Z=f.inChannels,B=f.inDepth,z=f.inHeight,L=f.inWidth,P=f.outChannels,j=f.outDepth,U=f.outHeight,W=f.outWidth,V=f.strideDepth,q=f.strideHeight,H=f.strideWidth,G=I-1-f.padInfo.front,X=O-1-f.padInfo.top,Y=R-1-f.padInfo.left,K=0;K<F;++K)for(var $=0;$<Z;++$)for(var Q=0;Q<B;++Q)for(var J=Q-G,ee=Math.max(0,Math.ceil(J/V)),te=Math.min(j,(I+J)/V),ne=0;ne<z;++ne)for(var re=ne-X,ae=Math.max(0,Math.ceil(re/q)),ie=Math.min(U,(O+re)/q),oe=0;oe<L;++oe){for(var ue=oe-Y,se=Math.max(0,Math.ceil(ue/H)),ce=Math.min(W,(R+ue)/H),le=0,fe=ee;fe<te;++fe)for(var he=fe*V-J,de=ae;de<ie;++de)for(var pe=de*q-re,ve=se;ve<ce;++ve)for(var ge=w*K+k*fe+_*de+S*ve,me=N*(I-1-he)+T*(O-1-pe)+M*(R-1-(ve*H-ue))+D*$,ye=0;ye<P;++ye){le+=b[ge+ye]*E[me+ye]}d[v*K+g*Q+m*ne+y*oe+$]=le}return n.makeTensorInfo(h.shape,h.dtype,h.values)}},ox=dy(io.Cos,(function(e){return Math.cos(e)})),ux={kernelName:io.Cos,backendName:"cpu",kernelFunc:ox},sx=dy(io.Cosh,(function(e){return Math.cosh(e)})),cx={kernelName:io.Cosh,backendName:"cpu",kernelFunc:sx};var lx={kernelName:io.CropAndResize,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,u=r.cropSize,s=r.method,c=r.extrapolationValue,l=(0,C.Z)(a.shape,4),f=l[0],h=l[1],d=l[2],p=l[3],v=i.shape[0],g=(0,C.Z)(u,2),m=g[0],y=g[1],b=(0,io.buffer)([v,m,y,p],"float32"),x=n.data.get(i.dataId).values,w=n.data.get(o.dataId).values,k=n.data.get(a.dataId).values,_=io.util.computeStrides(a.shape),S=io.util.computeStrides(b.shape),E=0;E<v;E++){var A=4*E,N=x[A],T=x[A+1],M=x[A+2],D=x[A+3],F=w[E];if(!(F>=f))for(var I=m>1?(M-N)*(h-1)/(m-1):0,O=y>1?(D-T)*(d-1)/(y-1):0,R=0;R<m;R++){var Z=m>1?N*(h-1)+R*I:.5*(N+M)*(h-1);if(Z<0||Z>h-1)for(var B=0;B<y;B++)for(var z=0;z<p;z++){var L=z+B*S[2]+R*S[1]+E*S[0];b.values[L]=c}else if("bilinear"===s)for(var P=Math.floor(Z),j=Math.ceil(Z),U=Z-P,W=0;W<y;W++){var V=y>1?T*(d-1)+W*O:.5*(T+D)*(d-1);if(V<0||V>d-1)for(var q=0;q<p;q++){var H=q+W*S[2]+R*S[1]+E*S[0];b.values[H]=c}else for(var G=Math.floor(V),X=Math.ceil(V),Y=V-G,K=0;K<p;K++){var $=K+G*_[2]+P*_[1]+F*_[0],Q=k[$],J=k[$=K+X*_[2]+P*_[1]+F*_[0]],ee=k[$=K+G*_[2]+j*_[1]+F*_[0]],te=Q+(J-Q)*Y,ne=ee+(k[$=K+X*_[2]+j*_[1]+F*_[0]]-ee)*Y;$=K+W*S[2]+R*S[1]+E*S[0],b.values[$]=te+(ne-te)*U}}else for(var re=0;re<y;++re){var ae=y>1?T*(d-1)+re*O:.5*(T+D)*(d-1);if(ae<0||ae>d-1)for(var ie=0;ie<p;ie++){var oe=ie+re*S[2]+R*S[1]+E*S[0];b.values[oe]=c}else for(var ue=Math.round(ae),se=Math.round(Z),ce=0;ce<p;ce++){var le=ce+ue*_[2]+se*_[1]+F*_[0],fe=ce+re*S[2]+R*S[1]+E*S[0];b.values[fe]=k[le]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};var fx={kernelName:io.Cumprod,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,u=r.reverse;cy(a,"cumprod");var s=io.backend_util.getAxesPermutation([i],a.shape.length),c=a;null!=s&&(c=ob({inputs:{x:a},backend:n,attrs:{perm:s}}));var l=io.backend_util.getInnerMostAxes(1,a.shape.length)[0];if(l!==c.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(l));for(var f=(0,io.upcastType)(c.dtype,"int32"),h=io.util.makeOnesTypedArray(io.util.sizeFromShape(c.shape),f),d=n.data.get(c.dataId).values,p=c.shape[c.shape.length-1],v=u?function(e,t){return e+p-t-1}:function(e,t){return e+t},g=0;g<d.length;g+=p)for(var m=0;m<p;m++){var y=v(g,m);if(0===m)h[y]=o?1:d[y];else{var b=v(g,m-1);h[y]=o?d[b]*h[b]:d[y]*h[b]}}var x=n.makeTensorInfo(c.shape,f,h);if(null!=s){var w=ob({inputs:{x:x},backend:n,attrs:{perm:io.backend_util.getUndoAxesPermutation(s)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(c),w}return x}};var hx={kernelName:io.Cumsum,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,u=r.reverse;cy(a,"cumsum");var s=io.backend_util.getAxesPermutation([i],a.shape.length),c=a;null!=s&&(c=ob({inputs:{x:a},backend:n,attrs:{perm:s}}));var l=io.backend_util.getInnerMostAxes(1,a.shape.length)[0];if(l!==c.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(l));for(var f=(0,io.upcastType)(c.dtype,"int32"),h=io.util.makeZerosTypedArray(io.util.sizeFromShape(c.shape),f),d=n.data.get(c.dataId).values,p=c.shape[c.shape.length-1],v=u?function(e,t){return e+p-t-1}:function(e,t){return e+t},g=0;g<d.length;g+=p)for(var m=0;m<p;m++){var y=v(g,m);if(0===m)h[y]=o?0:d[y];else{var b=v(g,m-1);h[y]=o?d[b]+h[b]:d[y]+h[b]}}var x=n.makeTensorInfo(c.shape,f,h);if(null!=s){var w=ob({inputs:{x:x},backend:n,attrs:{perm:io.backend_util.getUndoAxesPermutation(s)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(c),w}return x}};var dx={kernelName:io.DenseBincount,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,u=r.binaryOutput;if(1===a.shape.length){var s=Rb(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,s)}if(2===a.shape.length){var c=Zb(n.bufferSync(a),n.bufferSync(i),o,u);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}};var px={kernelName:io.DepthToSpace,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat;io.util.assert("NHWC"===o,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(o)}));for(var u=a.shape[0],s=a.shape[1],c=a.shape[2],l=a.shape[3],f=s*i,h=c*i,d=l/(i*i),p=n.data.get(a.dataId).values,v=new Float32Array(u*f*h*d),g=0,m=0;m<u;++m)for(var y=0;y<f;++y)for(var b=Math.floor(y/i),x=y%i,w=0;w<h;++w)for(var k=Math.floor(w/i),_=(x*i+w%i)*d,S=0;S<d;++S){var C=S+_+l*(k+c*(b+s*m));v[g++]=p[C]}return n.makeTensorInfo([u,f,h,d],a.dtype,v)}};function vx(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,u=r.pad,s=r.dilations,c=r.dimRoundingMode;cy([a,i],"depthwiseConv2DNative");var l=io.util.computeStrides(a.shape),f=io.util.computeStrides(i.shape),h=s;null==h&&(h=[1,1]),io.util.assert(io.backend_util.eitherStridesOrDilationsAreOne(o,h),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(h,"'")}));for(var d=io.backend_util.computeConv2DInfo(a.shape,i.shape,o,h,u,c,!0),p=d.filterHeight,v=d.filterWidth,g=d.dilationHeight,m=d.dilationWidth,y=d.padInfo,b=y.left,x=y.top,w=d.outChannels/d.inChannels,k=new io.TensorBuffer(d.outShape,a.dtype),_=n.data.get(a.dataId).values,S=n.data.get(i.dataId).values,C=k.values,E=0;E<d.batchSize;++E)for(var A=E*l[0],N=E*k.strides[0],T=0;T<d.outHeight;++T)for(var M=N+T*k.strides[1],D=T*d.strideHeight-x,F=0;F<p;++F){var I=D+F*g;if(!(I<0||I>=d.inHeight))for(var O=F*f[0],R=A+I*l[1],Z=0;Z<d.outWidth;++Z)for(var B=M+Z*k.strides[2],z=Z*d.strideWidth-b,L=0;L<v;++L){var P=z+L*m;if(!(P<0||P>=d.inWidth))for(var j=O+L*f[1],U=R+P*d.inChannels,W=B,V=j,q=0;q<d.inChannels;++q){for(var H=_[U+q],G=0;G<w;++G)C[W+G]+=H*S[V+G];W+=w,V+=w}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}var gx={kernelName:io.DepthwiseConv2dNative,backendName:"cpu",kernelFunc:vx};var mx={kernelName:io.DepthwiseConv2dNativeBackpropFilter,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,u=r.dilations,s=r.pad,c=r.dimRoundingMode,l=r.filterShape;cy([a,i],"depthwiseConv2dNativeBackpropFilter");for(var f=io.backend_util.computeConv2DInfo(a.shape,l,o,u,s,c,!0),h=f.strideHeight,d=f.strideWidth,p=f.filterHeight,v=f.filterWidth,g=new io.TensorBuffer(f.filterShape,"float32"),m=f.padInfo.left,y=f.padInfo.top,b=f.outChannels/f.inChannels,x=n.data.get(a.dataId).values,w=new io.TensorBuffer(a.shape,a.dtype,x),k=n.data.get(i.dataId).values,_=new io.TensorBuffer(i.shape,i.dtype,k),S=0;S<p;++S)for(var C=Math.max(0,Math.ceil((y-S)/h)),E=Math.min(f.outHeight,(f.inHeight+y-S)/h),A=0;A<v;++A)for(var N=Math.max(0,Math.ceil((m-A)/d)),T=Math.min(f.outWidth,(f.inWidth+m-A)/d),M=0;M<f.outChannels;++M){for(var D=Math.trunc(M/b),F=M%b,I=0,O=0;O<f.batchSize;++O)for(var R=C;R<E;++R)for(var Z=S+R*h-y,B=N;B<T;++B){var z=A+B*d-m;I+=w.get(O,Z,z,D)*_.get(O,R,B,M)}g.set(I,S,A,D,F)}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};var yx={kernelName:io.DepthwiseConv2dNativeBackpropInput,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,u=r.dilations,s=r.pad,c=r.dimRoundingMode,l=r.inputShape;cy([a,i],"depthwiseConv2DNativeBackpropInput");for(var f=io.util.computeStrides(a.shape),h=io.util.computeStrides(i.shape),d=io.backend_util.computeConv2DInfo(l,i.shape,o,u,s,c,!0),p=new io.TensorBuffer(d.inShape,"float32"),v=p.values,g=(0,C.Z)(p.strides,3),m=g[0],y=g[1],b=g[2],x=n.data.get(a.dataId).values,w=(0,C.Z)(f,3),k=w[0],_=w[1],S=w[2],E=n.data.get(i.dataId).values,A=(0,C.Z)(h,3),N=A[0],T=A[1],M=A[2],D=d.batchSize,F=d.filterHeight,I=d.filterWidth,O=d.inChannels,R=d.inHeight,Z=d.inWidth,B=d.outChannels,z=d.outHeight,L=d.outWidth,P=d.strideHeight,j=d.strideWidth,U=F-1-d.padInfo.top,W=I-1-d.padInfo.left,V=B/O,q=0;q<D;++q)for(var H=0;H<O;++H)for(var G=0;G<R;++G)for(var X=G-U,Y=Math.max(0,Math.ceil(X/P)),K=Math.min(z,(F+X)/P),$=0;$<Z;++$){for(var Q=$-W,J=Math.max(0,Math.ceil(Q/j)),ee=Math.min(L,(I+Q)/j),te=0,ne=Y;ne<K;++ne)for(var re=ne*P-X,ae=J;ae<ee;++ae)for(var ie=k*q+_*ne+S*ae,oe=N*(F-1-re)+T*(I-1-(ae*j-Q))+M*H,ue=0;ue<V;++ue){te+=x[ie+(H*V+ue)]*E[oe+ue]}v[m*q+y*G+b*$+H]=te}return n.makeTensorInfo(p.shape,p.dtype,p.values)}};var bx={kernelName:io.Diag,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=t.x,a=io.util.sizeFromShape(r.shape),i=n.data.get(r.dataId).values,o=(0,io.buffer)([a,a],r.dtype),u=o.values,s=0;s<i.length;s++)u[s*a+s]=i[s];var c=[].concat((0,M.Z)(r.shape),(0,M.Z)(r.shape));return n.makeTensorInfo(c,o.dtype,o.values)}},xx={kernelName:io.Dilation2D,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,u=r.pad,s=r.dilations,c=n,l=c.data.get(a.dataId).values,f=a.shape.length,h=c.data.get(i.dataId).values,d=i.shape.length,p=io.backend_util.computeDilation2DInfo(a.shape,i.shape,o,u,"NHWC",s),v=p.batchSize,g=p.inHeight,m=p.inWidth,y=p.inChannels,b=p.outHeight,x=p.outWidth,w=p.padInfo,k=p.strideHeight,_=p.strideWidth,S=p.filterHeight,C=p.filterWidth,E=p.dilationHeight,A=p.dilationWidth,N=p.outShape,T=io.util.sizeFromShape(N),M=N.length,D=io.util.getArrayFromDType(a.dtype,T),F=0;F<v;++F)for(var I=0;I<b;++I)for(var O=I*k-w.top,R=0;R<x;++R)for(var Z=R*_-w.left,B=0;B<y;++B){for(var z=Number.MIN_SAFE_INTEGER,L=0;L<S;++L){var P=O+L*E;if(P>=0&&P<g)for(var j=0;j<C;++j){var U=Z+j*A;if(U>=0&&U<m){var W=io.util.locToIndex([F,P,U,B],f,io.util.computeStrides(a.shape)),V=io.util.locToIndex([L,j,B],d,io.util.computeStrides(i.shape)),q=l[W]+h[V];q>z&&(z=q)}}}D[io.util.locToIndex([F,I,R,B],M,io.util.computeStrides(N))]=z}return{dataId:c.write(io.util.toTypedArray(D,a.dtype),N,a.dtype),shape:N,dtype:a.dtype}}},wx={kernelName:io.Dilation2DBackpropFilter,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,u=r.strides,s=r.pad,c=r.dilations,l=n,f=io.util.toNestedArray(a.shape,l.data.get(a.dataId).values),h=io.util.toNestedArray(i.shape,l.data.get(i.dataId).values),d=io.backend_util.computeDilation2DInfo(a.shape,i.shape,u,s,"NHWC",c),p=d.batchSize,v=d.inHeight,g=d.inWidth,m=d.inChannels,y=d.outHeight,b=d.outWidth,x=d.padInfo,w=d.strideHeight,k=d.strideWidth,_=d.filterHeight,S=d.filterWidth,C=d.dilationHeight,E=d.dilationWidth,A=d.outShape;io.util.assert(o.rank===A.length,(function(){return"Error in ".concat(io.Dilation2DBackpropFilter,", dy ")+"must have the same rank as output ".concat(A.length,", but got ")+"".concat(o.rank)}));for(var N=io.util.toNestedArray(A,l.data.get(o.dataId).values),T=io.util.makeZerosNestedTypedArray(i.shape,i.dtype),M=0;M<p;++M)for(var D=0;D<y;++D)for(var F=D*w-x.top,I=0;I<b;++I)for(var O=I*k-x.left,R=0;R<m;++R){for(var Z=Number.MIN_SAFE_INTEGER,B=0,z=0,L=0;L<_;++L){var P=F+L*C;if(P>=0&&P<v)for(var j=0;j<S;++j){var U=O+j*E;if(U>=0&&U<g){var W=f[M][P][U][R]+h[L][j][R];W>Z&&(Z=W,B=L,z=j)}}}T[B][z][R]+=N[M][D][I][R]}return{dataId:l.write(io.util.toTypedArray(T,a.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},kx={kernelName:io.Dilation2DBackpropInput,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,u=r.strides,s=r.pad,c=r.dilations,l=n,f=io.util.toNestedArray(a.shape,l.data.get(a.dataId).values),h=io.util.toNestedArray(i.shape,l.data.get(i.dataId).values),d=io.backend_util.computeDilation2DInfo(a.shape,i.shape,u,s,"NHWC",c),p=d.batchSize,v=d.inHeight,g=d.inWidth,m=d.inChannels,y=d.outHeight,b=d.outWidth,x=d.padInfo,w=d.strideHeight,k=d.strideWidth,_=d.filterHeight,S=d.filterWidth,C=d.dilationHeight,E=d.dilationWidth,A=d.outShape;io.util.assert(o.rank===A.length,(function(){return"Error in ".concat(io.Dilation2DBackpropInput,", dy ")+"must have the same rank as output ".concat(A.length,", but got ")+"".concat(o.rank)}));for(var N=io.util.toNestedArray(A,l.data.get(o.dataId).values),T=io.util.makeZerosNestedTypedArray(a.shape,a.dtype),M=0;M<p;++M)for(var D=0;D<y;++D)for(var F=D*w-x.top,I=0;I<b;++I)for(var O=I*k-x.left,R=0;R<m;++R){for(var Z=Number.MIN_SAFE_INTEGER,B=F<0?0:F,z=O<0?0:O,L=0;L<_;++L){var P=F+L*C;if(P>=0&&P<v)for(var j=0;j<S;++j){var U=O+j*E;if(U>=0&&U<g){var W=f[M][P][U][R]+h[L][j][R];W>Z&&(Z=W,B=P,z=U)}}}T[M][B][z][R]+=N[M][D][I][R]}return{dataId:l.write(io.util.toTypedArray(T,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};var _x={kernelName:io.Draw,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=r.canvas,o=r.options||{},u=o.contextOptions,s=o.imageOptions,c=(null===s||void 0===s?void 0:s.alpha)||1,l=(null===u||void 0===u?void 0:u.contextType)||"2d";if("2d"!==l)throw new Error("Context type ".concat(u.contextType," is not supported by the CPU backend."));var f=i.getContext(l,(null===u||void 0===u?void 0:u.contextAttributes)||{});if(null==f)throw new Error("Could not get the context with ".concat(l," type."));for(var h=a.shape.slice(0,2),d=(0,C.Z)(h,2),p=d[0],v=d[1],g=2===a.shape.length?1:a.shape[2],m=n.data.get(a.dataId).values,y="float32"===a.dtype?255:1,b=new Uint8ClampedArray(v*p*4),x=0;x<p*v;++x){for(var w=[0,0,0,255*c],k=0;k<g;k++){var _=m[x*g+k];if("float32"===a.dtype){if(_<0||_>1)throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(_,"."))}else if("int32"===a.dtype&&(_<0||_>255))throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(_,"."));1===g?(w[0]=_*y,w[1]=_*y,w[2]=_*y):w[k]=_*y}var S=4*x;b[S+0]=Math.round(w[0]),b[S+1]=Math.round(w[1]),b[S+2]=Math.round(w[2]),b[S+3]=Math.round(w[3])}i.width=v,i.height=p;var E=new ImageData(b,v,p);return f.putImageData(E,0,0),a}},Sx=wy((function(e,t){return e*t})),Cx=Uy((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})),Ex=jy(io.Multiply,Sx,Cx),Ax={kernelName:io.Multiply,backendName:"cpu",kernelFunc:Ex};function Nx(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,u=a.keepDims;cy(i,"sum");var s=(t="bool"===i.dtype?Ly({inputs:{x:i},backend:r,attrs:{dtype:"int32"}}):my({inputs:{x:i},backend:r})).shape.length,c=io.util.parseAxisParam(o,t.shape),l=io.backend_util.getAxesPermutation(c,s),f=c,h=t;null!=l&&(h=ob({inputs:{x:t},backend:r,attrs:{perm:l}}),f=io.backend_util.getInnerMostAxes(f.length,s)),io.backend_util.assertAxesAreInnerMostDims("sum",f,h.shape.length);for(var d=io.backend_util.computeOutAndReduceShapes(h.shape,f),p=(0,C.Z)(d,2),v=p[0],g=p[1],m=Ry(r,v,io.backend_util.upcastType(h.dtype,"int32")),y=io.util.sizeFromShape(g),b=r.data.get(m.dataId).values,x=r.data.get(h.dataId).values,w=0;w<b.length;++w){for(var k=w*y,_=0,S=0;S<y;++S)_+=x[k+S];b[w]=_}if(u){var E=m;m=Gy({inputs:{x:m},backend:r,attrs:{shape:io.backend_util.expandShapeToKeepDim(m.shape,c)}}),r.disposeIntermediateTensorInfo(E)}return r.disposeIntermediateTensorInfo(t),null!=l&&r.disposeIntermediateTensorInfo(h),m}var Tx={kernelName:io.Sum,backendName:"cpu",kernelFunc:Nx};var Mx={kernelName:io.Einsum,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.equation,a=t,i=io.backend_util.decodeEinsumEquation(r,a.length),o=i.allDims,u=i.summedDims,s=i.idDims;io.backend_util.checkEinsumDimSizes(o.length,s,a);for(var c=io.backend_util.getEinsumComputePath(u,s),l=c.path,f=c.steps,h=f.length,d=null,p=o.length,v=[],g=0;g<h;++g){var m,y=(0,B.Z)(f[g]);try{for(y.s();!(m=y.n()).done;){var b=m.value,x=io.backend_util.getEinsumPermutation(p,s[b]),w=x.permutationIndices,k=x.expandDims,_=void 0;io.backend_util.isIdentityPermutation(w)?_=a[b]:(_=ob({inputs:{x:a[b]},backend:n,attrs:{perm:w}}),v.push(_));for(var S=_.shape.slice(),C=0;C<k.length;++C)S.splice(k[C],0,1);io.util.arraysEqual(_.shape,S)||(_=Gy({inputs:{x:_},backend:n,attrs:{shape:S}}),v.push(_)),null===d?d=_:(d=Ex({inputs:{a:_,b:d},backend:n}),v.push(d))}}catch(T){y.e(T)}finally{y.f()}g<h-1&&(l[g]>=0&&(d=Nx({inputs:{x:d},backend:n,attrs:{axis:l[g]-(o.length-p),keepDims:!1}}),v.push(d)),p--)}for(var E=0,A=v;E<A.length;E++){var N=A[E];N!==d&&n.disposeIntermediateTensorInfo(N)}return d}};var Dx={kernelName:io.EluGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y;cy([r,a],"eluGrad");for(var i=new Float32Array(io.util.sizeFromShape(a.shape)),o=n.data.get(a.dataId).values,u=n.data.get(r.dataId).values,s=0;s<o.length;++s){var c=o[s];i[s]=c>=0?u[s]:u[s]*(c+1)}return n.makeTensorInfo(a.shape,"float32",i)}},Fx=wy((function(e,t){return e===t?1:0})),Ix=jy(io.Equal,Fx,null,"bool"),Ox={kernelName:io.Equal,backendName:"cpu",kernelFunc:Ix},Rx=io.backend_util.ERF_P,Zx=io.backend_util.ERF_A1,Bx=io.backend_util.ERF_A2,zx=io.backend_util.ERF_A3,Lx=io.backend_util.ERF_A4,Px=io.backend_util.ERF_A5,jx=dy(io.Erf,(function(e){var t=Math.sign(e),n=Math.abs(e),r=1/(1+Rx*n);return t*(1-((((Px*r+Lx)*r+zx)*r+Bx)*r+Zx)*r*Math.exp(-n*n))})),Ux={kernelName:io.Erf,backendName:"cpu",kernelFunc:jx},Wx=hy((function(e){return Math.exp(e)})),Vx=py(io.Exp,Wx,"float32"),qx={kernelName:io.Exp,backendName:"cpu",kernelFunc:Vx};function Hx(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.input,i=r.dim,o=a.shape.length,u=a.shape.slice(),s=i;return i<0&&(io.util.assert(-(o+1)<=i,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),s=o+i+1),u.splice(s,0,1),Gy({inputs:{x:a},backend:n,attrs:{shape:u}})}var Gx={kernelName:io.ExpandDims,backendName:"cpu",kernelFunc:Hx},Xx=hy((function(e){return Math.expm1(e)})),Yx=py(io.Expm1,Xx),Kx={kernelName:io.Expm1,backendName:"cpu",kernelFunc:Yx},$x=wy((function(e,t){return e/t})),Qx=jy(io.RealDiv,$x),Jx={kernelName:io.RealDiv,backendName:"cpu",kernelFunc:Qx},ew=wy((function(e,t){return e-t})),tw=Uy((function(e,t,n,r){return{real:e-n,imag:t-r}})),nw=jy(io.Sub,ew,tw),rw={kernelName:io.Sub,backendName:"cpu",kernelFunc:nw};function aw(e,t,n){for(var r=e.shape,a=r[0],i=r[1],o=n.data.get(e.dataId),u=o.complexTensorInfos.real,s=o.complexTensorInfos.imag,c=[a,i],l=io.util.sizeFromShape(c),f=io.util.getTypedArrayFromDType("float32",l),h=io.util.getTypedArrayFromDType("float32",l),d=0;d<a;d++){for(var p=Fb({inputs:{x:u},backend:n,attrs:{begin:[d,0],size:[1,i]}}),v=Fb({inputs:{x:s},backend:n,attrs:{begin:[d,0],size:[1,i]}}),g=Iy({inputs:{real:p,imag:v},backend:n}),m=iw(g,t,n),y=m.real,b=m.imag,x=io.backend_util.mergeRealAndImagArrays(y,b),w=0;w<i;w++){var k=io.backend_util.getComplexWithIndex(x,w);f[d*i+w]=k.real,h[d*i+w]=k.imag}n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g)}var _=n.makeTensorInfo(c,"float32",f),S=n.makeTensorInfo(c,"float32",h),C=Iy({inputs:{real:_,imag:S},backend:n});return n.disposeIntermediateTensorInfo(_),n.disposeIntermediateTensorInfo(S),C}function iw(e,t,n){var r=io.util.sizeFromShape(e.shape),a=n.data.get(e.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,o=n.data.get(a.complexTensorInfos.imag.dataId).values;if(function(e){return 0===(e&e-1)}(r)){var u=ow(i,o,r,t,n),s=[e.shape[0],e.shape[1]];if(t){var c=n.makeTensorInfo(s,"float32",u.real),l=n.makeTensorInfo(s,"float32",u.imag),f=n.makeTensorInfo([],"float32",io.util.createScalarValue(r,"float32")),h=my({inputs:{x:f},backend:n}),d=Jx.kernelFunc({inputs:{a:c,b:f},backend:n}),p=Jx.kernelFunc({inputs:{a:l,b:h},backend:n}),v=n.data.get(d.dataId).values,g=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),{real:v,imag:g}}return u}var m=function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var i=0,o=0,u=0;u<t;u++){var s=io.backend_util.exponent(a*u,t,n),c=io.backend_util.getComplexWithIndex(e,u);i+=c.real*s.real-c.imag*s.imag,o+=c.real*s.imag+c.imag*s.real}n&&(i/=t,o/=t),io.backend_util.assignToTypedArray(r,i,o,a)}return r}(io.backend_util.mergeRealAndImagArrays(i,o),r,t);return io.backend_util.splitRealAndImagArrays(m)}function ow(e,t,n,r,a){if(1===n)return{real:e,imag:t};var i=io.backend_util.mergeRealAndImagArrays(e,t),o=n/2,u=io.backend_util.complexWithEvenIndex(i),s=u.real,c=u.imag,l=[s.length],f=a.makeTensorInfo(l,"float32",s),h=a.makeTensorInfo(l,"float32",c),d=Iy({inputs:{real:f,imag:h},backend:a}),p=io.backend_util.complexWithOddIndex(i),v=p.real,g=p.imag,m=[v.length],y=a.makeTensorInfo(m,"float32",v),b=a.makeTensorInfo(m,"float32",g),x=Iy({inputs:{real:y,imag:b},backend:a}),w=ow(s,c,o,r,a),k=w.real,_=w.imag,S=[k.length],C=a.makeTensorInfo(S,"float32",k),E=a.makeTensorInfo(S,"float32",_),A=Iy({inputs:{real:C,imag:E},backend:a}),N=ow(v,g,o,r,a),T=N.real,M=N.imag,D=[T.length],F=a.makeTensorInfo(D,"float32",T),I=a.makeTensorInfo(D,"float32",M),O=Iy({inputs:{real:F,imag:I},backend:a}),R=io.backend_util.exponents(n,r),Z=[R.real.length],B=a.makeTensorInfo(Z,"float32",R.real),z=a.makeTensorInfo(Z,"float32",R.imag),L=Iy({inputs:{real:B,imag:z},backend:a}),P=Ex({inputs:{a:L,b:O},backend:a}),j=qy({inputs:{a:A,b:P},backend:a}),U=nw({inputs:{a:A,b:P},backend:a}),W=Zy({inputs:{input:j},backend:a}),V=Zy({inputs:{input:U},backend:a}),q=Yb({inputs:{input:j},backend:a}),H=Yb({inputs:{input:U},backend:a}),G=$b({inputs:[W,V],backend:a,attrs:{axis:0}}),X=$b({inputs:[q,H],backend:a,attrs:{axis:0}}),Y=a.data.get(G.dataId).values,K=a.data.get(X.dataId).values;return a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(h),a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(y),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(C),a.disposeIntermediateTensorInfo(E),a.disposeIntermediateTensorInfo(A),a.disposeIntermediateTensorInfo(F),a.disposeIntermediateTensorInfo(I),a.disposeIntermediateTensorInfo(O),a.disposeIntermediateTensorInfo(B),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(L),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(X),{real:Y,imag:K}}var uw={kernelName:io.FFT,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=io.util.sizeFromShape(r.shape),i=r.shape[r.shape.length-1],o=Gy({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),u=aw(o,!1,n),s=Gy({inputs:{x:u},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),s}};function sw(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype||io.util.inferDtype(a),o=io.util.getArrayFromDType(i,io.util.sizeFromShape(r));return function(e,t,n){e.fill(t)}(o,a),t.makeTensorInfo(r,i,o)}var cw={kernelName:io.Fill,backendName:"cpu",kernelFunc:sw};var lw={kernelName:io.FlipLeftRight,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=(e.attrs,e.backend),r=t.image,a=n,i=io.util.getTypedArrayFromDType(r.dtype,io.util.sizeFromShape(r.shape)),o=(0,C.Z)(r.shape,4),u=o[0],s=o[1],c=o[2],l=o[3],f=a.data.get(r.dataId).values,h=0;h<u;h++)for(var d=h*c*s*l,p=0;p<s;p++)for(var v=p*(c*l),g=0;g<c;g++)for(var m=g*l,y=0;y<l;y++){var b=Math.round(c-g-1),x=d+v+m+y,w=f[x];if(b>=0&&b<c)w=f[d+v+b*l+y];i[x]=w}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},fw=hy((function(e){return Math.floor(e)})),hw=py(io.Floor,fw),dw={kernelName:io.Floor,backendName:"cpu",kernelFunc:hw},pw=wy((function(e,t){return Math.floor(e/t)})),vw=jy(io.FloorDiv,pw,null,"int32"),gw={kernelName:io.FloorDiv,backendName:"cpu",kernelFunc:vw};var mw={kernelName:io.FusedConv2D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,u=t.preluActivationWeights,s=r.strides,c=r.pad,l=r.dataFormat,f=r.dilations,h=r.dimRoundingMode,d=r.activation,p=r.leakyreluAlpha,v=Jb({inputs:{x:a,filter:i},backend:n,attrs:{strides:s,pad:c,dataFormat:l,dilations:f,dimRoundingMode:h}});if(o){var g=v;if("NCHW"===l&&1===o.shape.length&&1!==o.shape[0]){var m=Gy({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});v=qy({inputs:{a:v,b:m},backend:n}),n.disposeIntermediateTensorInfo(m)}else v=qy({inputs:{a:v,b:o},backend:n});n.disposeIntermediateTensorInfo(g)}if(d){var y=v;if("NCHW"===l&&"prelu"===d&&1===u.shape.length&&1!==u.shape[0]){var b=Gy({inputs:{x:u},backend:n,attrs:{shape:[u.shape[0],1,1]}});v=Fy(n,v,d,b,p),n.disposeIntermediateTensorInfo(b)}else v=Fy(n,v,d,u,p);n.disposeIntermediateTensorInfo(y)}return v}};var yw={kernelName:io.FusedDepthwiseConv2D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,u=t.preluActivationWeights,s=r.strides,c=r.pad,l=r.dataFormat,f=r.dilations,h=r.dimRoundingMode,d=r.activation,p=r.leakyreluAlpha,v=vx({inputs:{x:a,filter:i},backend:n,attrs:{strides:s,pad:c,dataFormat:l,dilations:f,dimRoundingMode:h}});if(o){var g=v;v=qy({inputs:{a:v,b:o},backend:n}),n.disposeIntermediateTensorInfo(g)}if(d){var m=v;v=Fy(n,v,d,u,p),n.disposeIntermediateTensorInfo(m)}return v}};function bw(e,t,n,r,a,i,o,u,s){for(var c=(0,io.buffer)([r,i],n),l=0;l<r;l++){for(var f=[],h=0,d=0;d<a;d++){var p=e[l*a+d];h+=p*o[d],f.push(p)}if(h<0||h>=s/i)throw new Error("Invalid indices: ".concat(f," does not index into ").concat(u));for(var v=0;v<i;v++)c.values[l*i+v]=t.get.apply(t,(0,M.Z)(t.indexToLoc(h*i+v)))}return c}var xw={kernelName:io.GatherNd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=io.util.sizeFromShape(r.shape),o=a.shape,u=o[o.length-1],s=io.backend_util.prepareAndValidate(r,a),c=(0,C.Z)(s,4),l=c[0],f=c[1],h=c[2],d=c[3];if(0===f)return n.makeTensorInfo(l,r.dtype,[]);var p=bw(n.data.get(a.dataId).values,n.bufferSync(r),r.dtype,f,u,h,d,r.shape,i);return n.makeTensorInfo(l,r.dtype,p.values)}};function ww(e,t,n){for(var r=(0,io.buffer)(n,e.dtype),a=0;a<r.size;++a){var i=r.indexToLoc(a).slice(),o=i[0],u=i[2],s=t.locToIndex([o,u]);i[2]=t.values[s];var c=e.locToIndex(i);0<=c&&c<e.values.length&&(r.values[a]=e.values[c])}return r}var kw={kernelName:io.GatherV2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,u=r.batchDims;cy([a,i],"gatherV2");for(var s=io.util.parseAxisParam(o,a.shape)[0],c=n.data.get(i.dataId).values,l=a.shape[s],f=function(e){var t=c[e];io.util.assert(t<=l-1&&t>=0,(function(){return"GatherV2: the index value ".concat(t," is not in [0, ").concat(l-1,"]")}))},h=0;h<c.length;++h)f(h);var d=u;null==u&&(d=0);var p=io.util.sizeFromShape(i.shape),v=io.backend_util.segment_util.collectGatherOpShapeInfo(a,i,s,d),g=Gy({inputs:{x:a},backend:n,attrs:{shape:[v.batchSize,v.outerSize,v.dimSize,v.sliceSize]}}),m=Gy({inputs:{x:i},backend:n,attrs:{shape:[v.batchSize,p/v.batchSize]}}),y=[v.batchSize,v.outerSize,p/v.batchSize,v.sliceSize],b=n.bufferSync(m),x=ww(n.bufferSync(g),b,y);return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(v.outputShape,x.dtype,x.values)}},_w=wy((function(e,t){return e>t?1:0})),Sw=jy(io.Greater,_w,null,"bool"),Cw={kernelName:io.Greater,backendName:"cpu",kernelFunc:Sw},Ew=wy((function(e,t){return e>=t?1:0})),Aw=jy(io.GreaterEqual,Ew,null,"bool"),Nw={kernelName:io.GreaterEqual,backendName:"cpu",kernelFunc:Aw};var Tw={kernelName:io.IFFT,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=io.util.sizeFromShape(r.shape),i=r.shape[r.shape.length-1],o=Gy({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),u=aw(o,!0,n),s=Gy({inputs:{x:u},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),s}},Mw=dy(io.IsFinite,(function(e){return Number.isFinite(e)?1:0}),"bool"),Dw={kernelName:io.IsFinite,backendName:"cpu",kernelFunc:Mw},Fw=dy(io.IsInf,(function(e){return Math.abs(e)===1/0?1:0}),"bool"),Iw={kernelName:io.IsInf,backendName:"cpu",kernelFunc:Fw},Ow=dy(io.IsNan,(function(e){return Number.isNaN(e)?1:0}),"bool"),Rw={kernelName:io.IsNan,backendName:"cpu",kernelFunc:Ow},Zw=wy((function(e,t){return e<t?1:0})),Bw=jy(io.Less,Zw,null,"bool"),zw={kernelName:io.Less,backendName:"cpu",kernelFunc:Bw},Lw=wy((function(e,t){return e<=t?1:0})),Pw=jy(io.LessEqual,Lw,null,"bool"),jw={kernelName:io.LessEqual,backendName:"cpu",kernelFunc:Pw};function Uw(e,t,n){var r=(t-e)/(n-1),a=io.util.makeZerosTypedArray(n,"float32");a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}var Ww={kernelName:io.LinSpace,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=Uw(n.start,n.stop,n.num);return t.makeTensorInfo([r.length],"float32",r)}},Vw=hy((function(e){return Math.log(e)})),qw=py(io.Log,Vw),Hw={kernelName:io.Log,backendName:"cpu",kernelFunc:qw},Gw=dy(io.Log1p,(function(e){return Math.log1p(e)})),Xw={kernelName:io.Log1p,backendName:"cpu",kernelFunc:Gw},Yw=wy((function(e,t){return e&&t})),Kw=jy(io.LogicalAnd,Yw,null,"bool"),$w={kernelName:io.LogicalAnd,backendName:"cpu",kernelFunc:Kw},Qw=dy(io.LogicalNot,(function(e){return e?0:1}),"bool"),Jw={kernelName:io.LogicalNot,backendName:"cpu",kernelFunc:Qw},ek=wy((function(e,t){return e||t})),tk=jy(io.LogicalOr,ek,null,"bool"),nk={kernelName:io.LogicalOr,backendName:"cpu",kernelFunc:tk};var rk={kernelName:io.LRN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,u=r.alpha,s=r.beta;cy(a,"LRN");var c=a.shape[3],l=c-1,f=n.data.get(a.dataId).values,h=io.util.sizeFromShape(a.shape),d=new Float32Array(h);function p(e){for(var t=e%c,n=e-t+Math.max(0,t-i),r=e-t+Math.min(t+i,l),a=0;n<=r;n++){var o=f[n];a+=o*o}return a}for(var v=0;v<h;v++){var g=p(v),m=f[v]*Math.pow(o+u*g,-s);d[v]=m}return n.makeTensorInfo(a.shape,a.dtype,d)}};var ak={kernelName:io.LRNGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,u=r.depthRadius,s=r.bias,c=r.alpha,l=r.beta;cy(o,"LRNGrad");for(var f=io.util.sizeFromShape(o.shape),h=o.shape[3],d=n.data.get(o.dataId).values,p=n.data.get(a.dataId).values,v=n.data.get(i.dataId).values,g=new Float32Array(f),m=f,y=0;y<m;y++){for(var b=y%h,x=y-b+Math.max(0,b-u),w=y-b+Math.min(h,b+u+1),k=0,_=x;_<w;_++)k+=Math.pow(p[_],2);k=c*k+s;for(var S=x;S<w;S++){var C=-2*c*l*p[S]*v[y]/k;y===S&&(C+=Math.pow(k,-l)),C*=d[y],g[S]+=C}}return n.makeTensorInfo(o.shape,a.dtype,g)}};function ik(e,t,n,r){for(var a=io.util.getTypedArrayFromDType(r,io.util.sizeFromShape(n)),i=0;i<a.length;++i){for(var o=i*t,u=e[o],s=0;s<t;++s){var c=e[o+s];(Number.isNaN(c)||c>u)&&(u=c)}a[i]=u}return a}function ok(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,u=n,s=a.shape,c=s.length,l=io.util.parseAxisParam(i,s),f=l,h=io.backend_util.getAxesPermutation(f,c),d=u.data.get(a.dataId).values;if(null!=h){for(var p=new Array(c),v=0;v<p.length;v++)p[v]=s[h[v]];d=ib(d,s,a.dtype,h,p),f=io.backend_util.getInnerMostAxes(f.length,c),s=p}cy(a,"max"),io.backend_util.assertAxesAreInnerMostDims("max",f,c);var g=io.backend_util.computeOutAndReduceShapes(s,f),m=(0,C.Z)(g,2),y=m[0],b=m[1],x=ik(d,io.util.sizeFromShape(b),y,a.dtype),w=u.write(x,y,a.dtype),k=y;o&&(k=p=io.backend_util.expandShapeToKeepDim(y,l));return{dataId:w,shape:k,dtype:a.dtype}}var uk={kernelName:io.Max,backendName:"cpu",kernelFunc:ok},sk=wy((function(e,t){return Math.max(e,t)})),ck=jy(io.Maximum,sk),lk={kernelName:io.Maximum,backendName:"cpu",kernelFunc:ck};var fk={kernelName:io.MaxPool,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;cy(a,"maxPool");var i=r.filterSize,o=r.strides,u=r.pad,s=r.dimRoundingMode;io.util.assert(io.backend_util.eitherStridesOrDilationsAreOne(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c,l=io.backend_util.computePool2DInfo(a.shape,i,o,1,u,s);if(1===l.filterWidth&&1===l.filterHeight&&io.util.arraysEqual(l.inShape,l.outShape))c=my({inputs:{x:a},backend:n});else{var f=n.data.get(a.dataId).values,h=io.util.computeStrides(a.shape),d=_b(f,a.shape,a.dtype,h,l,"max");c=n.makeTensorInfo(l.outShape,a.dtype,d.values)}return c}};var hk={kernelName:io.MaxPool3D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,u=r.pad,s=r.dimRoundingMode,c=r.dataFormat;cy(a,"maxPool3d");var l=io.backend_util.computePool3DInfo(a.shape,i,o,1,u,s,c),f=Cb(n.data.get(a.dataId).values,a.shape,a.dtype,io.util.computeStrides(a.shape),l,"max");return n.makeTensorInfo(f.shape,"float32",f.values)}};var dk={kernelName:io.MaxPool3DGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,u=r.strides,s=r.pad,c=r.dimRoundingMode;cy([a,i],"maxPool3DGrad");for(var l=io.backend_util.computePool3DInfo(i.shape,o,u,1,s,c),f=function(e,t){for(var n=(0,io.buffer)(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,o=t.dilationDepth,u=t.dilationHeight,s=t.dilationWidth,c=t.effectiveFilterDepth,l=t.effectiveFilterHeight,f=t.effectiveFilterWidth,h=t.padInfo.front,d=t.padInfo.top,p=t.padInfo.left,v=0;v<t.batchSize;++v)for(var g=0;g<t.inChannels;++g)for(var m=0;m<t.outDepth;++m){for(var y=m*r-h,b=y;b<0;)b+=o;for(var x=Math.min(t.inDepth,c+y),w=0;w<t.outHeight;++w){for(var k=w*a-d,_=k;_<0;)_+=u;for(var S=Math.min(t.inHeight,l+k),C=0;C<t.outWidth;++C){for(var E=C*i-p,A=E;A<0;)A+=s;for(var N=Math.min(t.inWidth,f+E),T=Number.NEGATIVE_INFINITY,M=-1,D=b;D<x;D+=o)for(var F=D-y,I=_;I<S;I+=u)for(var O=I-k,R=A;R<N;R+=s){var Z=R-E,B=e.get(v,D,I,R,g);B>=T&&(T=B,M=F*l*f+O*l+Z)}n.set(M,v,m,w,C,g)}}}return n}(n.bufferSync(i),l),h=l.strideDepth,d=l.strideHeight,p=l.strideWidth,v=l.dilationDepth,g=l.dilationHeight,m=l.dilationWidth,y=l.effectiveFilterDepth,b=l.effectiveFilterHeight,x=l.effectiveFilterWidth,w=y-1-l.padInfo.front,k=x-1-l.padInfo.left,_=b-1-l.padInfo.top,S=(0,io.buffer)(i.shape,"float32"),C=n.bufferSync(a),E=0;E<l.batchSize;++E)for(var A=0;A<l.inChannels;++A)for(var N=0;N<l.inDepth;++N)for(var T=0;T<l.inHeight;++T)for(var M=0;M<l.inWidth;++M){for(var D=N-w,F=T-_,I=M-k,O=0,R=0;R<y;R+=v){var Z=(D+R)/h;if(!(Z<0||Z>=l.outDepth||Math.floor(Z)!==Z))for(var B=0;B<b;B+=g){var z=(F+B)/d;if(!(z<0||z>=l.outHeight||Math.floor(z)!==z))for(var L=0;L<x;L+=m){var P=(I+L)/p;if(!(P<0||P>=l.outWidth||Math.floor(P)!==P)){var j=y*b*x-1-f.get(E,Z,z,P,A)===R*b*x+B*x+L?1:0;if(0!==j)O+=C.get(E,Z,z,P,A)*j}}}}S.set(O,E,N,T,M,A)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}};var pk={kernelName:io.MaxPoolGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;cy([i,t.output],"maxPoolGrad");for(var u=r.filterSize,s=r.strides,c=r.pad,l=r.dimRoundingMode,f=io.backend_util.computePool2DInfo(o.shape,u,s,1,c,l),h=n.data.get(o.dataId).values,d=(0,io.buffer)(f.outShape,o.dtype,Sb(h,o.shape,o.dtype,f).values),p=f.strideHeight,v=f.strideWidth,g=f.dilationHeight,m=f.dilationWidth,y=f.effectiveFilterHeight,b=f.effectiveFilterWidth,x=b-1-f.padInfo.left,w=y-1-f.padInfo.top,k=(0,io.buffer)(o.shape,"float32"),_=n.data.get(a.dataId).values,S=(0,io.buffer)(a.shape,"float32",_),C=0;C<f.batchSize;++C)for(var E=0;E<f.inChannels;++E)for(var A=0;A<f.inHeight;++A)for(var N=0;N<f.inWidth;++N){for(var T=A-w,M=N-x,D=0,F=0;F<y;F+=g){var I=(T+F)/p;if(!(I<0||I>=f.outHeight||Math.floor(I)!==I))for(var O=0;O<b;O+=m){var R=(M+O)/v;if(!(R<0||R>=f.outWidth||Math.floor(R)!==R)){var Z=y*b-1-d.get(C,I,R,E)===F*b+O?1:0;if(0!==Z)D+=S.get(C,I,R,E)*Z}}}k.set(D,C,A,N,E)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}};var vk={kernelName:io.MaxPoolWithArgmax,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,u=n.pad,s=n.includeBatchInIndex,c=r;cy(a,"MaxPoolWithArgmax");var l=c.data.get(a.dataId).values,f=io.backend_util.computePool2DInfo(a.shape,i,o,[1,1],u),h=function(e,t,n,r,a){var i=_b(e,0,n,io.util.computeStrides(t),a,"max"),o=Sb(e,t,n,a,!0,r);return[i.values,o.values]}(l,a.shape,a.dtype,s,f),d=(0,C.Z)(h,2),p=d[0],v=d[1],g=c.write(p,f.outShape,a.dtype),m=c.write(v,f.outShape,a.dtype);return[{dataId:g,shape:f.outShape,dtype:a.dtype},{dataId:m,shape:f.outShape,dtype:"int32"}]}};var gk={kernelName:io.Mean,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,u=io.util.parseAxisParam(i,a.shape),s=io.backend_util.computeOutAndReduceShapes(a.shape,u)[1],c=io.util.sizeFromShape(s),l=[],f=n.makeTensorInfo([],"float32",new Float32Array([c]));l.push(f);var h=Ly({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});l.push(h);var d=Qx({inputs:{a:h,b:f},backend:n});l.push(d);var p=Nx({inputs:{x:d},backend:n,attrs:{axis:i,keepDims:o}});return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),p}};var mk={kernelName:io.Min,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;cy(a,"min");var u=io.util.parseAxisParam(i,a.shape),s=u,c=io.backend_util.getAxesPermutation(s,a.shape.length),l=a;null!=c&&(l=ob({inputs:{x:a},backend:n,attrs:{perm:c}}),s=io.backend_util.getInnerMostAxes(s.length,a.shape.length)),io.backend_util.assertAxesAreInnerMostDims("min",s,l.shape.length);for(var f=io.backend_util.computeOutAndReduceShapes(l.shape,s),h=(0,C.Z)(f,2),d=h[0],p=h[1],v=io.util.sizeFromShape(p),g=io.util.makeZerosTypedArray(io.util.sizeFromShape(d),l.dtype),m=n.data.get(l.dataId).values,y=0;y<g.length;++y){for(var b=y*v,x=m[b],w=0;w<v;++w){var k=m[b+w];(Number.isNaN(k)||k<x)&&(x=k)}g[y]=x}null!=c&&n.disposeIntermediateTensorInfo(l);var _=n.makeTensorInfo(d,l.dtype,g);if(o){var S=Gy({inputs:{x:_},backend:n,attrs:{shape:io.backend_util.expandShapeToKeepDim(d,u)}});return n.disposeIntermediateTensorInfo(_),S}return _}},yk=wy((function(e,t){return Math.min(e,t)})),bk=jy(io.Minimum,yk),xk={kernelName:io.Minimum,backendName:"cpu",kernelFunc:bk};var wk={kernelName:io.MirrorPad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode;cy(a,"mirrorPad");for(var u=i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),s=i.map((function(e){return e[0]})),c=i.map((function(e,t){return e[0]+a.shape[t]})),l="reflect"===o?0:1,f=n.data.get(a.dataId).values,h=a.shape.length,d=io.util.computeStrides(a.shape),p=io.util.sizeFromShape(u),v=u.length,g=io.util.computeStrides(u),m=io.util.getTypedArrayFromDType(a.dtype,p),y=0;y<p;y++){for(var b=io.util.indexToLoc(y,v,g),x=0;x<v;x++)b[x]<s[x]?b[x]=2*s[x]-b[x]-l:b[x]>=c[x]&&(b[x]=2*(c[x]-1)-b[x]+l);b=b.map((function(e,t){return e-s[t]}));var w=io.util.locToIndex(b,h,d);m[y]=f[w]}return{dataId:n.write(m,u,a.dtype),shape:u,dtype:a.dtype}}},kk=wy((function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),_k=jy(io.Mod,kk),Sk={kernelName:io.Mod,backendName:"cpu",kernelFunc:_k};function Ck(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.dim,o=a.shape.length,u=i;if(-1===u&&(u=o-1),u!==o-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(o," and dim was ").concat(u));var s=io.util.parseAxisParam([u],a.shape),c=ok({inputs:{x:a},backend:n,attrs:{reductionIndices:s,keepDims:!1}}),l=io.backend_util.expandShapeToKeepDim(c.shape,s),f=Gy({inputs:{x:c},backend:n,attrs:{shape:l}}),h=nw({inputs:{a:a,b:f},backend:n}),d=Vx({inputs:{x:h},backend:n}),p=Nx({inputs:{x:d},backend:n,attrs:{axis:s,keepDims:!1}}),v=Gy({inputs:{x:p},backend:n,attrs:{shape:l}}),g=Qx({inputs:{a:d,b:v},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),g}var Ek={kernelName:io.Softmax,backendName:"cpu",kernelFunc:Ck};var Ak={kernelName:io.Multinomial,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,u=r.normalized;cy(a,"multinomial");for(var s=u?a:Ck({inputs:{logits:a},backend:n,attrs:{dim:-1}}),c=s.shape[0],l=s.shape[1],f=n.data.get(s.dataId).values,h=[c,i],d=io.util.makeZerosTypedArray(io.util.sizeFromShape(h),"int32"),p=0;p<c;++p){var v=p*l,g=new Float32Array(l-1);g[0]=f[v];for(var m=1;m<g.length;++m)g[m]=g[m-1]+f[v+m];for(var y=Dm.alea(o.toString()),b=p*i,x=0;x<i;++x){var w=y();d[b+x]=g.length;for(var k=0;k<g.length;k++)if(w<g[k]){d[b+x]=k;break}}}return u||n.disposeIntermediateTensorInfo(s),n.makeTensorInfo(h,"int32",d)}};function Nk(e,t,n){var r=io.util.createScalarValue(-1,n);return Sx([],t,r,e,n)}var Tk={kernelName:io.Neg,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x;cy(r,"neg");var a=Nk(n.data.get(r.dataId).values,r.shape,r.dtype),i=(0,C.Z)(a,2),o=i[0],u=i[1];return n.makeTensorInfo(u,r.dtype,o)}},Mk=io.kernel_impls.nonMaxSuppressionV3Impl;var Dk={kernelName:io.NonMaxSuppressionV3,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,u=r.iouThreshold,s=r.scoreThreshold;cy(a,"NonMaxSuppression");var c=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,f=Mk(c,l,o,u,s).selectedIndices;return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}},Fk=io.kernel_impls.nonMaxSuppressionV4Impl;var Ik={kernelName:io.NonMaxSuppressionV4,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,u=r.iouThreshold,s=r.scoreThreshold,c=r.padToMaxOutputSize;cy(a,"NonMaxSuppressionPadded");var l=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values,h=Fk(l,f,o,u,s,c),d=h.selectedIndices,p=h.validOutputs;return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},Ok=io.kernel_impls.nonMaxSuppressionV5Impl;var Rk={kernelName:io.NonMaxSuppressionV5,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,u=r.iouThreshold,s=r.scoreThreshold,c=r.softNmsSigma;cy(a,"NonMaxSuppressionWithScore");var l=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values,h=Ok(l,f,o,u,s,c),d=h.selectedIndices,p=h.selectedScores;return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([p.length],"float32",new Float32Array(p))]}},Zk=wy((function(e,t){return e!==t?1:0})),Bk=jy(io.NotEqual,Zk,null,"bool"),zk={kernelName:io.NotEqual,backendName:"cpu",kernelFunc:Bk};var Lk={kernelName:io.OneHot,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.dtype,o=r.depth,u=r.onValue,s=r.offValue;cy(a,"oneHot");var c=io.util.sizeFromShape(a.shape),l=new Float32Array(c*o);l.fill(s);for(var f=n.data.get(a.dataId).values,h=0;h<c;++h)f[h]>=0&&f[h]<o&&(l[h*o+f[h]]=u);return n.makeTensorInfo([].concat((0,M.Z)(a.shape),[o]),i,l)}};function Pk(e){var t=e.inputs,n=e.backend,r=t.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var a=Zy({inputs:{input:r},backend:n}),i=Pk({inputs:{x:a},backend:n}),o=Yb({inputs:{input:r},backend:n}),u=Pk({inputs:{x:o},backend:n}),s=Iy({inputs:{real:i,imag:u},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),s}return sw({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var jk={kernelName:io.ZerosLike,backendName:"cpu",kernelFunc:Pk};var Uk={kernelName:io.OnesLike,backendName:"cpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){var i=Zy({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),u=Yb({inputs:{input:a},backend:r}),s=Pk({inputs:{x:u},backend:r}),c=Iy({inputs:{real:o,imag:s},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(u),r.disposeIntermediateTensorInfo(s),c}return sw({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function Wk(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return Hx({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){io.util.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes"),io.util.assert(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],u=$b({inputs:t.map((function(e){var t=Hx({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),u}var Vk={kernelName:io.Pack,backendName:"cpu",kernelFunc:Wk};var qk={kernelName:io.PadV2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;cy(a,"pad");var u=i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),s=i.map((function(e){return e[0]})),c=n.data.get(a.dataId).values,l=io.util.sizeFromShape(a.shape),f=a.shape.length,h=io.util.computeStrides(a.shape),d=io.util.sizeFromShape(u),p=u.length,v=io.util.computeStrides(u),g=io.util.getTypedArrayFromDType(a.dtype,d);0!==o&&g.fill(o);for(var m=0;m<l;m++){var y=io.util.indexToLoc(m,f,h).map((function(e,t){return e+s[t]}));g[io.util.locToIndex(y,p,v)]=c[m]}return{dataId:n.write(g,u,a.dtype),shape:u,dtype:a.dtype}}},Hk=wy((function(e,t){return Math.pow(e,t)})),Gk=jy(io.Pow,Hk),Xk={kernelName:io.Pow,backendName:"cpu",kernelFunc:Gk};function Yk(e,t,n,r){for(var a=io.backend_util.computeOutAndReduceShapes(e,r),i=(0,C.Z)(a,2),o=i[0],u=i[1],s=(0,io.upcastType)(t,"int32"),c=io.util.makeZerosTypedArray(io.util.sizeFromShape(o),s),l=io.util.sizeFromShape(u),f=0;f<c.length;++f){for(var h=f*l,d=1,p=0;p<l;++p)d*=n[h+p];c[f]=d}return{outVals:c,outShape:o,outDtype:s}}var Kk={kernelName:io.Prod,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;cy(a,"prod");var u=a.shape.length,s=io.util.parseAxisParam(i,a.shape),c=io.backend_util.getAxesPermutation(s,u),l=s,f=a,h=[];null!=c&&(f=ob({inputs:{x:a},backend:n,attrs:{perm:c}}),h.push(f),l=io.backend_util.getInnerMostAxes(l.length,u));var d=n.data.get(f.dataId).values,p=Yk(f.shape,f.dtype,d,l),v=p.outVals,g=p.outShape,m=p.outDtype,y=g;return o&&(y=io.backend_util.expandShapeToKeepDim(g,s)),h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(y,m,v)}};function $k(e,t,n,r){var a=[],i=0,o=t.length-1+n.length,u=new Array(o).fill(null).map((function(){return[0]}));!function(e,t){for(var n=0;n<e.length;++n){var r=e[n],a=n===e.length-1?t:e[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(var i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}(n,r);for(var s=1,c=0;c<t.length-1;++c){s*=t[c];for(var l=t[c+1],f=1;f<s+1;++f)u[c].push(f*l)}for(var h=0;h<e.length;++h){for(var d=e[h],p=e[h]+1,v=0;v<n.length;++v){var g=n[v],m=v+t.length-1;if(m>=0)for(var y=u[m],b=y[y.length-1]-g[d],x=d;x<p;++x)u[m].push(g[x+1]+b);d=g[d],p=g[p]}p!==d&&(a.push([d,p]),i+=p-d)}return{outSplits:u,valueSlices:a,numValues:i}}function Qk(e,t){for(var n=e.slice(0,t);n.length<t;)n.push(1);for(var r=t;r<e.length;r++)n[t-1]*=e[r];return n}function Jk(e,t,n,r,a){var i=t.slice();i[0]=a;var o=io.util.getArrayFromDType(n,io.util.sizeFromShape(i)),u=e.length;return function(e,t,n,r,a,i){var o,u=Qk(t,2)[1],s=Qk(i,2)[1],c=0,l=(0,B.Z)(n);try{for(l.s();!(o=l.n()).done;)for(var f=o.value,h=f[0];h<f[1];++h){for(var d=0;d<r;++d)a[c*s+d]=e[h*u+d];++c}}catch(p){l.e(p)}finally{l.f()}}(e,t,r,0===u?0:u/t[0],o,i),[o,i]}function e_(e,t,n,r,a,i,o,u){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach((function(e,r){if(e<0||e>=n){var a=io.util.indexToLoc(r,t.length,io.util.computeStrides(t)).join(",");throw new Error("indices[".concat(a,"] = ").concat(e," is not in [0, ").concat(n,")"))}}))}(i,o,t[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");var s=$k(i,o,e,r[0]),c=s.outSplits,l=s.valueSlices,f=s.numValues,h=function(e){for(var t=[],n=function(n){var r=e[n].length,a=io.util.getArrayFromDType("int32",r);t.push(a),e[n].forEach((function(e,t){return a[t]=e}))},r=0;r<e.length;++r)n(r);return t}(c),d=Jk(n,r,a,l,f);return[h,d[0],d[1]]}var t_={kernelName:io.RaggedGather,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.paramsNestedSplits,i=t.paramsDenseValues,o=t.indices,u=(r.outputRaggedRank,a.map((function(e){return n.data.get(e.dataId).values}))),s=a.map((function(e){return e.shape})),c=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,f=e_(u,s,c,i.shape,i.dtype,l,o.shape),h=(0,C.Z)(f,3),d=h[0],p=h[1],v=h[2],g=d.map((function(e){return n.makeTensorInfo([e.length],"int32",e)})),m=n.makeTensorInfo(v,i.dtype,p);return g.concat([m])}},n_=2147483647;function r_(e,t,n,r,a,i,o){if(t.length>1)throw new Error("starts must be a scalar or vector");if(a.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");var u=0===t.length,s=0===a.length,c=0===o.length,l=[];u||l.push(t[0]),s||l.push(a[0]),c||l.push(o[0]);for(var f=1;f<l.length;++f)if(l[f]!==l[f-1])throw new Error("starts, limits, and deltas must have the same shape");var h=0===l.length?1:l[0],d=io.util.getArrayFromDType("int32",h+1);d[0]=0;for(var p=0;p<h;++p){var v=u?e[0]:e[p],g=s?r[0]:r[p],m=c?i[0]:i[p];if(0===m)throw new Error("Requires delta != 0");var y=void 0;if(m>0&&g<v||m<0&&g>v)y=0;else if((y=Math.ceil(Math.abs((g-v)/m)))>n_)throw new Error("Requires ((limit - start) / delta) <= ".concat(n_));d[p+1]=d[p]+y}for(var b=d[h],x=io.util.getArrayFromDType(n,b),w=0,k=0;k<h;++k)for(var _=d[k+1]-d[k],S=u?e[0]:e[k],C=c?i[0]:i[k],E=0;E<_;++E)x[w++]=S,S+=C;return[d,x]}var a_={kernelName:io.RaggedRange,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.starts,a=t.limits,i=t.deltas,o=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,s=n.data.get(i.dataId).values,c=r_(o,r.shape,r.dtype,u,a.shape,s,i.shape),l=(0,C.Z)(c,2),f=l[0],h=l[1];return[n.makeTensorInfo([f.length],"int32",f),n.makeTensorInfo([h.length],r.dtype,h)]}},i_=io.backend_util.RowPartitionType,o_=function(){function e(t,n,r,a,i,o,u,s,c,l){(0,D.Z)(this,e),this.shape=t,this.shapeShape=n,this.values=r,this.valuesShape=a,this.valuesDType=i,this.defaultValue=o,this.defaultValueShape=u,this.rowPartitionValues=s,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=io.backend_util.getRowPartitionTypesHelper(l),this.raggedRank=io.backend_util.getRaggedRank(this.rowPartitionTypes)}return(0,F.Z)(e,[{key:"getRowPartitionTypeByDimension",value:function(e){return this.rowPartitionTypes[0]===i_.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}},{key:"getRowPartitionTensor",value:function(e){return this.rowPartitionTypes[0]===i_.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}},{key:"getMaxWidth",value:function(t){var n=this.getRowPartitionTensor(t-1);switch(this.getRowPartitionTypeByDimension(t-1)){case i_.VALUE_ROWIDS:return e.getMaxWidthValueRowID(n);case i_.ROW_SPLITS:return e.getMaxWidthRowSplit(n);default:throw new Error("Cannot handle partition type ".concat(i_[this.getRowPartitionTypeByDimension(t-1)]))}}},{key:"tensorShapeFromTensor",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return s_(e,n)}},{key:"calculateOutputSize",value:function(e){var t=this.valuesShape,n=this.defaultValueShape;io.backend_util.validateDefaultValueShape(n,t);var r=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=io.backend_util.combineRaggedTensorToTensorShapes(this.raggedRank,r,t);a[0]<0&&(a[0]=e);for(var i=1;i<=this.raggedRank;++i)a[i]<0&&(a[i]=this.getMaxWidth(i));return a}},{key:"calculateFirstParentOutputIndex",value:function(e,t,n){for(var r=Math.min(e,n),a=[],i=0,o=0;o<r;++o,i+=t)a.push(i);for(var u=r;u<e;++u)a.push(-1);return io.util.assert(a.length===e,(function(){return"Final length of result must be equal to firstDimension."})),a}},{key:"calculateOutputIndexRowSplit",value:function(e,t,n,r){for(var a=e.length,i=[],o=0;o<a-1;++o){var u=e[o+1]-e[o],s=Math.min(r,u),c=t[o];-1===c&&(s=0);for(var l=0;l<s;++l)i.push(c),c+=n;for(var f=0;f<u-s;++f)i.push(-1)}if(a>0&&i.length!==e[a-1])throw new Error("Invalid row split size.");return i}},{key:"calculateOutputIndexValueRowID",value:function(e,t,n,r){var a=e.length,i=[];if(0===a)return[];var o=0,u=e[0];if(u>=t.length)throw new Error("Got currentValueRowId=".concat(u,", which is not less than ").concat(t.length));var s=t[u];i.push(s);for(var c=1;c<a;++c){var l=e[c];if(l===u)s>=0&&(++o<r?s+=n:s=-1);else{if(o=0,u=l,l>=t.length)throw new Error("Got nextValueRowId=".concat(l," which is not less than ").concat(t.length));s=t[l]}i.push(s)}if(i.length!==e.length)throw new Error("Invalid row ids.");return i}},{key:"calculateOutputIndex",value:function(e,t,n,r){var a=this.getRowPartitionTensor(e),i=this.getRowPartitionTypeByDimension(e);switch(i){case i_.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,t,n,r);case i_.ROW_SPLITS:if(a.length-1>t.length)throw new Error("Row partition size is greater than output size: ".concat(a.length-1," > ").concat(t.length));return this.calculateOutputIndexRowSplit(a,t,n,r);default:throw new Error("Unsupported partition type: ".concat(i_[i]))}}},{key:"getFirstDimensionSize",value:function(){var e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");var t=this.rowPartitionTypes[0];switch(t){case i_.FIRST_DIM_SIZE:return e[0];case i_.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case i_.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type ".concat(i_[t]))}}},{key:"compute",value:function(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");var e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(var r=n.length-2;r>=0;--r)n[r]=n[r+1]*t[r+1];var a=s_(t,!1),i=io.util.getArrayFromDType(this.valuesDType,io.util.sizeFromShape(a));if(n[0]*t[0]>0){for(var o=this.calculateFirstParentOutputIndex(e,n[0],t[0]),u=1;u<=this.raggedRank;++u){o=this.calculateOutputIndex(u-1,o,n[u],t[u])}this.setOutput(this.raggedRank,o,i,a)}return[a,i]}},{key:"setOutput",value:function(e,t,n,r){if(0!==n.length){var a=this.values,i=n,o=r.slice();o=o.slice(e+1);var u=io.util.sizeFromShape(o),s=t.length,c=this.defaultValue;if(c.length!==u&&1!==c.length){var l=this.defaultValueShape;(0,io.tidy)((function(){var e=(0,io.reshape)(c,l),t=(0,io.broadcastTo)(e,o);c=t.dataSync()}))}for(var f=0,h=0,d=0,p=0;p<=s;++p){var v=p<s?t[p]:-1;if(v!==d){if(h<d){var g=a.subarray(f*u);u_(i.subarray(h*u),g,(d-h)*u)}if(p>=s){var m=n.length;v=Math.floor(m/u)}if(v>d)if(1===this.defaultValue.length)i.subarray(d*u,v*u).fill(this.defaultValue[0]),d=v;else for(;v>d;){u_(i.slice(d*u),c,u),++d}v<0?(f=p+1,h=d):(f=p,d=(h=d)+1)}else++d}}}}],[{key:"getMaxWidthRowSplit",value:function(e){var t=e.length;if(0===t||1===t)return 0;for(var n=0,r=0;r<t-1;++r){var a=e[r+1]-e[r];a>n&&(n=a)}return n}},{key:"getMaxWidthValueRowID",value:function(e){var t=e.length;if(0===t)return 0;for(var n=0,r=e[0],a=0,i=1;i<t;++i){var o=e[i];o!==r&&(r=o,a=Math.max(i-n,a),n=i)}return Math.max(t-n,a)}}]),e}();function u_(e,t,n){for(var r=0;r<n;r++)e[r]=t[r]}function s_(e,t){var n,r=[],a=(0,B.Z)(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i<0){if(!t)throw new Error("Dimension ".concat(i," must be >= 0"));if(i<-1)throw new Error("Dimension ".concat(i," must be >= -1"));i=-1}r.push(i)}}catch(o){a.e(o)}finally{a.f()}return r}function c_(e,t,n,r,a,i,o,u,s,c){return new o_(e,t,n,r,a,i,o,u,s,c).compute()}var l_={kernelName:io.RaggedTensorToTensor,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.shape,i=t.values,o=t.defaultValue,u=t.rowPartitionTensors,s=r.rowPartitionTypes,c=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,f=n.data.get(o.dataId).values,h=u.map((function(e){return n.data.get(e.dataId).values})),d=u.map((function(e){return e.shape})),p=c_(c,a.shape,l,i.shape,i.dtype,f,o.shape,h,d,s),v=(0,C.Z)(p,2),g=v[0],m=v[1];return n.makeTensorInfo(g,i.dtype,m)}};function f_(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return io.util.makeZerosTypedArray(0,r);var a=Math.abs(Math.ceil((t-e)/n)),i=io.util.makeZerosTypedArray(a,r);t<e&&1===n&&(n=-1),i[0]=e;for(var o=1;o<i.length;o++)i[o]=i[o-1]+n;return i}var h_={kernelName:io.Range,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.dtype,o=f_(r,a,n.step,i);return t.makeTensorInfo([o.length],i,o)}},d_=dy(io.Reciprocal,(function(e){return 1/e})),p_={kernelName:io.Reciprocal,backendName:"cpu",kernelFunc:d_};var v_={kernelName:io.ResizeBilinear,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,u=r.size;cy(a,"resizeBilinear");for(var s=io.util.computeStrides(a.shape),c=(0,C.Z)(u,2),l=c[0],f=c[1],h=(0,C.Z)(a.shape,4),d=h[0],p=h[1],v=h[2],g=h[3],m=n.data.get(a.dataId).values,y=new Float32Array(io.util.sizeFromShape([d,l,f,g])),b=[i&&l>1?p-1:p,i&&f>1?v-1:v],x=[i&&l>1?l-1:l,i&&f>1?f-1:f],w=0,k=b[0]/x[0],_=b[1]/x[1],S=0;S<d;S++)for(var E=0;E<l;E++){var A=void 0;A=o?k*(E+.5)-.5:k*E;for(var N=Math.max(0,Math.floor(A)),T=A-N,M=Math.min(p-1,Math.ceil(A)),D=S*s[0]+N*s[1],F=S*s[0]+M*s[1],I=0;I<f;I++){var O=void 0;O=o?_*(I+.5)-.5:_*I;for(var R=Math.max(0,Math.floor(O)),Z=O-R,B=Math.min(v-1,Math.ceil(O)),z=D+R*s[2],L=F+R*s[2],P=D+B*s[2],j=F+B*s[2],U=0;U<g;U++){var W=m[z+U],V=m[L+U],q=W+(m[P+U]-W)*Z,H=q+(V+(m[j+U]-V)*Z-q)*T;y[w++]=H}}}return n.makeTensorInfo([d,l,f,g],"float32",y)}};var g_={kernelName:io.ResizeBilinearGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;cy([i,a],"resizeBilinearGrad");for(var u=io.util.computeStrides(a.shape),s=(0,C.Z)(a.shape,4),c=s[0],l=s[1],f=s[2],h=s[3],d=(0,C.Z)(i.shape,3),p=d[1],v=d[2],g=new Float32Array(c*l*f*h),m=[o&&p>1?l-1:l,o&&v>1?f-1:f],y=[o&&p>1?p-1:p,o&&v>1?v-1:v],b=m[0]/y[0],x=m[1]/y[1],w=n.data.get(i.dataId).values,k=0,_=0;_<c;_++)for(var S=_*u[0],E=0;E<p;E++)for(var A=E*b,N=Math.floor(A),T=Math.min(Math.ceil(A),l-1),M=S+N*u[1],D=S+T*u[1],F=A-N,I=1-F,O=0;O<v;O++)for(var R=O*x,Z=Math.floor(R),B=Math.min(Math.ceil(R),f-1),z=R-Z,L=1-z,P=M+Z*u[2],j=M+B*u[2],U=D+Z*u[2],W=D+B*u[2],V=I*L,q=I*z,H=F*L,G=F*z,X=0;X<h;X++){var Y=w[k++];g[P+X]+=Y*V,g[j+X]+=Y*q,g[U+X]+=Y*H,g[W+X]+=Y*G}return n.makeTensorInfo([c,f,l,h],"float32",g)}};var m_={kernelName:io.ResizeNearestNeighbor,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,u=r.size;cy(a,"resizeNearestNeighbor");for(var s=io.util.computeStrides(a.shape),c=(0,C.Z)(u,2),l=c[0],f=c[1],h=(0,C.Z)(a.shape,4),d=h[0],p=h[1],v=h[2],g=h[3],m=n.data.get(a.dataId).values,y=new Float32Array(d*l*f*g),b=[i&&l>1?p-1:p,i&&f>1?v-1:v],x=[i&&l>1?l-1:l,i&&f>1?f-1:f],w=b[0]/x[0],k=b[1]/x[1],_=0,S=0;S<d;S++)for(var E=S*s[0],A=0;A<l;A++){var N=o?w*(A+.5):w*A,T=Math.min(p-1,i?Math.round(N):Math.floor(N));o&&(T=Math.max(0,T));for(var M=E+T*s[1],D=0;D<f;D++){var F=o?k*(D+.5):k*D,I=Math.min(v-1,i?Math.round(F):Math.floor(F));o&&(I=Math.max(0,I));for(var O=M+I*s[2],R=0;R<g;R++){var Z=m[O+R];y[_++]=Z}}}return n.makeTensorInfo([d,l,f,g],a.dtype,y)}};var y_={kernelName:io.ResizeNearestNeighborGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;cy([i,a],"resizeNearestNeighborGrad");for(var u=io.util.computeStrides(a.shape),s=io.util.computeStrides(i.shape),c=(0,C.Z)(a.shape,4),l=c[0],f=c[1],h=c[2],d=c[3],p=(0,C.Z)(i.shape,3),v=p[1],g=p[2],m=new Float32Array(l*f*h*d),y=n.data.get(i.dataId).values,b=[o&&v>1?f-1:f,o&&g>1?h-1:h],x=[o&&v>1?v-1:v,o&&g>1?g-1:g],w=b[0]/x[0],k=b[1]/x[1],_=1/w,S=1/k,E=2*Math.ceil(_)+2,A=2*Math.ceil(S)+2,N=0;N<l;N++)for(var T=N*u[0],M=0;M<f;M++)for(var D=T+M*u[1],F=Math.floor(M*_),I=Math.floor(F-E/2),O=0;O<h;O++)for(var R=D+O*u[2],Z=Math.floor(O*S),B=Math.floor(Z-A/2),z=0;z<d;z++){for(var L=0,P=0;P<E;P++){var j=P+I;if(!(j<0||j>=v)){var U=T+j*s[1],W=j*w;if(M===Math.min(f-1,o?Math.round(W):Math.floor(W)))for(var V=0;V<A;V++){var q=V+B;if(!(q<0||q>=g)){var H=U+q*s[2],G=q*k;O===Math.min(h-1,o?Math.round(G):Math.floor(G))&&(L+=y[H+z])}}}}m[R+z]=L}return n.makeTensorInfo(a.shape,a.dtype,m)}};var b_={kernelName:io.Reverse,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims;cy(a,"reverse");var o=a.shape.length,u=io.util.parseAxisParam(i,a.shape);if(0===o)return my({inputs:{x:a},backend:n});for(var s=new io.TensorBuffer(a.shape,a.dtype),c=n.bufferSync(a),l=function(e){var t=s.indexToLoc(e),n=t.slice();u.forEach((function(e){return n[e]=a.shape[e]-1-n[e]})),s.set.apply(s,[c.get.apply(c,(0,M.Z)(n))].concat((0,M.Z)(t)))},f=0;f<s.size;f++)l(f);return n.makeTensorInfo(s.shape,s.dtype,s.values)}},x_={kernelName:io.RotateWithOffset,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,u=n.center,s=r,c=io.util.getTypedArrayFromDType(a.dtype,io.util.sizeFromShape(a.shape)),l=(0,C.Z)(a.shape,4),f=l[0],h=l[1],d=l[2],p=l[3],v=io.backend_util.getImageCenter(u,h,d),g=(0,C.Z)(v,2),m=g[0],y=g[1],b=Math.sin(i),x=Math.cos(i),w=s.data.get(a.dataId).values,k=0;k<f;k++)for(var _=k*d*h*p,S=0;S<h;S++)for(var E=S*(d*p),A=0;A<d;A++)for(var N=A*p,T=0;T<p;T++){var M=[f,S,A,T],D=M[2],F=M[1],I=(D-m)*x-(F-y)*b,O=(D-m)*b+(F-y)*x;I=Math.round(I+m),O=Math.round(O+y);var R=o;if("number"!==typeof o&&(R=3===T?255:o[T]),I>=0&&I<d&&O>=0&&O<h)R=w[_+O*(d*p)+I*p+T];c[_+E+N+T]=R}return{dataId:s.write(c,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},w_=dy(io.Round,(function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),k_={kernelName:io.Round,backendName:"cpu",kernelFunc:w_},__=hy((function(e){return 1/Math.sqrt(e)})),S_=py(io.Rsqrt,__),C_={kernelName:io.Rsqrt,backendName:"cpu",kernelFunc:S_};function E_(e,t,n,r,a,i,o,u,s,c){var l=[r/a,a],f=e.values,h=t.values;if(0===r)return(0,io.buffer)(n,t.dtype);var d=s instanceof io.TensorBuffer?s:(0,io.buffer)(l,t.dtype);"string"===typeof s||"number"===typeof s?d.values.fill(s):"boolean"===typeof s&&d.values.fill(+s);for(var p=0;p<i;p++){for(var v=[],g=0,m=0;m<o;m++){var y=f[p*o+m];v.push(y),g+=y*u[m]}if(g<0||g>=r/a)throw new Error("Invalid indices: ".concat(v," does not index into ").concat(n));for(var b=0;b<a;b++)c?d.values[g*a+b]+=h[p*a+b]:d.values[g*a+b]=0===t.rank?h[0]:h[p*a+b]}return d}var A_={kernelName:io.ScatterNd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,u=io.backend_util.calculateShapes(i,a,o),s=u.sliceRank,c=u.numUpdates,l=u.sliceSize,f=u.strides,h=u.outputSize,d=E_(n.bufferSync(a),n.bufferSync(i),o,h,l,c,s,f,0,!0);return n.makeTensorInfo(o,d.dtype,d.values)}};function N_(e,t){for(var n=0,r=e.length,a=0;n<r;)e[a=Math.floor((n+r)/2)]<t?n=a+1:r=a;return r}function T_(e,t){for(var n=0,r=e.length,a=0;n<r;)e[a=Math.floor((n+r)/2)]<=t?n=a+1:r=a;return r}var M_={kernelName:io.SearchSorted,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,i=t.values,o=r.side,u=function(e,t,n,r,a,i){for(var o=io.util.getArrayFromDType("int32",n*a),u=0;u<n;++u)for(var s=e.slice(u*r,(u+1)*r),c=u*a,l=0;l<a;++l)o[c+l]="left"===i?N_(s,t[l+c]):T_(s,t[l+c]);return o}(n.data.get(a.dataId).values,n.data.get(i.dataId).values,a.shape[0],a.shape[1],i.shape[1],o);return n.makeTensorInfo(i.shape,"int32",u)}};var D_={kernelName:io.Select,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e;cy([r,a,i],"select");for(var o=r.shape.length,u=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,l=(0,io.upcastType)(a.dtype,i.dtype),f=io.util.makeZerosTypedArray(io.util.sizeFromShape(a.shape),l),h=0,d=0===o||o>1||1===a.shape.length?1:io.util.sizeFromShape(a.shape.slice(1)),p=0;p<u.length;p++)for(var v=0;v<d;v++)1===u[p]?f[h++]=s[p]:f[h++]=c[p];return n.makeTensorInfo(a.shape,l,f)}},F_=io.backend_util.SELU_SCALEALPHA,I_=io.backend_util.SELU_SCALE,O_=dy(io.Selu,(function(e){return e>=0?I_*e:F_*(Math.exp(e)-1)})),R_={kernelName:io.Selu,backendName:"cpu",kernelFunc:O_},Z_=dy(io.Sign,(function(e){return e<0?-1:e>0?1:0})),B_={kernelName:io.Sign,backendName:"cpu",kernelFunc:Z_},z_=dy(io.Sin,(function(e){return Math.sin(e)})),L_={kernelName:io.Sin,backendName:"cpu",kernelFunc:z_},P_=dy(io.Sinh,(function(e){return Math.sinh(e)})),j_={kernelName:io.Sinh,backendName:"cpu",kernelFunc:P_},U_=Math.log(1.1920928955078125e-7)+2,W_=dy(io.Softplus,(function(e){var t=e>-U_,n=e<U_,r=Math.exp(e);return n?r:t?e:Math.log(1+r)})),V_={kernelName:io.Softplus,backendName:"cpu",kernelFunc:W_};var q_={kernelName:io.SpaceToBatchND,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;cy([a],"spaceToBatchND");var u=io.util.sizeFromShape(i),s=[[0,0]];s.push.apply(s,(0,M.Z)(o));for(var c=1+i.length;c<a.shape.length;++c)s.push([0,0]);var l=qk.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:s,constantValue:0}}),f=io.backend_util.getReshaped(l.shape,i,u,!1),h=io.backend_util.getPermuted(f.length,i.length,!1),d=io.backend_util.getReshapedPermuted(l.shape,i,u,!1),p=Gy({inputs:{x:l},backend:n,attrs:{shape:f}}),v=ob({inputs:{x:p},backend:n,attrs:{perm:h}}),g=Gy({inputs:{x:v},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),g}};function H_(e,t,n,r,a,i,o){var u=t[0],s=i[0],c=new Array(s),l=new Array(u),f=t[1];if(0===s){if(0!==u)throw new Error(io.backend_util.getSparseFillEmptyRowsIndicesDenseShapeMismatch(u));return[io.util.getArrayFromDType(n,0),[0,f],io.util.getArrayFromDType(a,0),c,l]}for(var h=!0,d=0,p=new Array(s).fill(0),v=0;v<u;++v){var g=e[v*f];if(g<0)throw new Error(io.backend_util.getSparseFillEmptyRowsNegativeIndexErrorMessage(v,g));if(g>=s)throw new Error(io.backend_util.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(v,g,s));++p[g],h=h&&g>=d,d=g}for(var m=!0,y=0;y<s;++y){var b=0===p[y];c[y]=b,m=m&&!b,p[y]=Math.max(p[y],1),y>0&&(p[y]+=p[y-1])}if(m&&h){for(var x=e,w=r,k=0;k<u;++k)l[k]=k;return[x,[u,f],w,c,l]}for(var _=p[s-1],S=io.util.getArrayFromDType(n,_*f),C=io.util.getArrayFromDType(a,_),E=new Array(s).fill(0),A=0;A<u;++A){var N=e[A*f],T=E[N],M=(0===N?0:p[N-1])+T;E[N]++;for(var D=0;D<f;++D)S[M*f+D]=e[A*f+D];C[M]=r[A],l[A]=M}for(var F=0;F<s;++F){if(0===E[F]){var I=0===F?0:p[F-1];S[I*f+0]=F;for(var O=1;O<f;++O)S[I*f+O]=0;C[I]=o}}return[S,[_,f],C,c,l]}var G_={kernelName:io.SparseFillEmptyRows,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var u=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values[0],f=H_(u,r.shape,r.dtype,s,a.dtype,c,l),h=(0,C.Z)(f,5),d=h[0],p=h[1],v=h[2],g=h[3],m=h[4];return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],a.dtype,v),n.makeTensorInfo([g.length],"bool",new Uint8Array(g.map((function(e){return Number(e)})))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};function X_(e,t,n,r,a){for(var i=io.util.sizeFromShape(r),o=t[0],u=a.length,s=[],c=1,l=-1,f=0;f<u;++f){var h=a[f];if(-1===h){if(-1!==l)throw new Error(io.backend_util.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(l,f));l=f,s.push(1)}else{if(h<0)throw new Error(io.backend_util.getSparseReshapeNegativeOutputDimErrorMessage(f,h));c*=h,s.push(h)}}if(-1!==l){if(c<=0)throw new Error(io.backend_util.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());var d=Math.trunc(i/c);if(c*d!==i)throw new Error(io.backend_util.getSparseReshapeInputOutputMultipleErrorMessage(r,s));s[l]=d}if(io.util.sizeFromShape(s)!==i)throw new Error(io.backend_util.getSparseReshapeInputOutputMismatchErrorMessage(r,s));var p=r.length,v=[];if(p>0){v[p-1]=1;for(var g=p-2;g>=0;--g)v[g]=v[g+1]*r[g+1]}var m=[];if(u>0){m[u-1]=1;for(var y=u-2;y>=0;--y)m[y]=m[y+1]*s[y+1]}for(var b=io.util.getArrayFromDType(n,o*u),x=0;x<o;++x){for(var w=0,k=0;k<p;++k)w+=e[x*p+k]*v[k];for(var _=0;_<u;++_)b[x*u+_]=Math.trunc(w/m[_]),w%=m[_]}return[b,[o,u],s]}var Y_={kernelName:io.SparseReshape,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.data.get(a.dataId).values),u=n.data.get(r.dataId).values,s=Array.from(n.data.get(i.dataId).values),c=X_(u,r.shape,r.dtype,o,s),l=(0,C.Z)(c,3),f=l[0],h=l[1],d=l[2];return[n.makeTensorInfo(h,r.dtype,f),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}};function K_(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=r.length,s=[t[0],e.length/t[0]],c=s[1],l=u>0?a[u-1]+1:0,f=l;if(f<0)throw new Error(io.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());var h=t.slice();h[0]=f;var d=h.reduce((function(e,t){return e*t}),1),p=io.util.getArrayFromDType(n,d);if(0===u)return f>0&&p.fill(o),[p,h];if(f<=0)throw new Error(io.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());for(var v=0,g=1,m=0,y=a[v];;){var b=0;if(g<u){if(y===(b=a[g])){++g;continue}if(y>=b)throw new Error(io.backend_util.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(y<0||y>=f)throw new Error(io.backend_util.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(y,f));y>m&&p.fill(o,m*c,y*c);for(var x=v;x<g;++x){var w=r[x];if(w<0||w>=s[0])throw new Error(io.backend_util.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(x,r[x],s[0]));for(var k=0;k<c;k++)p[y*c+k]+=e[w*c+k]}if(i)for(var _=0;_<c;_++)p[y*c+_]/=g-v;if(v=g,m=y+1,y=b,++g>u)break}return m<f&&p.fill(o,m*c,f*c),[p,h]}var $_={kernelName:io.SparseSegmentMean,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,s=n.data.get(i.dataId).values,c=K_(o,r.shape,r.dtype,u,s,!0),l=(0,C.Z)(c,2),f=l[0],h=l[1];return n.makeTensorInfo(h,r.dtype,f)}};var Q_={kernelName:io.SparseSegmentSum,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,s=n.data.get(i.dataId).values,c=K_(o,r.shape,r.dtype,u,s),l=(0,C.Z)(c,2),f=l[0],h=l[1];return n.makeTensorInfo(h,r.dtype,f)}};var J_={kernelName:io.SparseToDense,backendName:"cpu",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.sparseIndices,o=n.sparseValues,u=n.defaultValue,s=a.outputShape,c=io.backend_util.calculateShapes(o,i,s),l=c.sliceRank,f=c.numUpdates,h=c.sliceSize,d=c.strides,p=c.outputSize,v=!1,g=r.bufferSync(i);switch(o.dtype){case"bool":t=E_(g,r.bufferSync(o),s,p,h,f,l,d,Boolean(r.data.get(u.dataId).values[0]),v);break;case"float32":t=E_(g,r.bufferSync(o),s,p,h,f,l,d,r.data.get(u.dataId).values[0],v);break;case"int32":t=E_(g,r.bufferSync(o),s,p,h,f,l,d,r.data.get(u.dataId).values[0],v);break;case"string":t=E_(g,r.bufferSync(o),s,p,h,f,l,d,io.util.decodeString(r.data.get(u.dataId).values[0]),v);break;default:throw new Error("Unsupported type ".concat(o.dtype))}return r.makeTensorInfo(s,t.dtype,t.values)}};var eS={kernelName:io.SplitV,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=r.axis,u=io.util.parseAxisParam(o,a.shape)[0],s=io.backend_util.prepareSplitSize(a,i,u),c=new Array(a.shape.length).fill(0),l=a.shape.slice();return s.map((function(e){var t=(0,M.Z)(l);t[u]=e;var r=Fb({inputs:{x:a},backend:n,attrs:{begin:c,size:t}});return c[u]+=e,r}))}},tS=hy((function(e){return Math.sqrt(e)})),nS=dy(io.Sqrt,(function(e){return Math.sqrt(e)})),rS={kernelName:io.Sqrt,backendName:"cpu",kernelFunc:nS},aS={kernelName:io.Square,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;cy(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),u=0;u<i.length;++u){var s=i[u];o[u]=s*s}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},iS=wy((function(e,t){var n=e-t;return n*n})),oS=jy(io.SquaredDifference,iS),uS={kernelName:io.SquaredDifference,backendName:"cpu",kernelFunc:oS},sS=hy((function(e,t){var n=t.pattern,r=t.replaceGlobal,a=t.rewrite;return e.replace(new RegExp(n,r?"g":""),a)})),cS=py(io.StaticRegexReplace,sS),lS={kernelName:io.StaticRegexReplace,backendName:"cpu",kernelFunc:cS},fS=dy(io.Step,(function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),hS={kernelName:io.Step,backendName:"cpu",kernelFunc:fS};function dS(e,t,n,r){for(var a=(0,io.buffer)(e,t.dtype),i=0;i<a.size;i++){for(var o=a.indexToLoc(i),u=new Array(o.length),s=0;s<u.length;s++)u[s]=o[s]*n[s]+r[s];a.set.apply(a,[t.get.apply(t,u)].concat((0,M.Z)(o)))}return a}var pS={kernelName:io.StridedSlice,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.end,u=r.strides,s=r.beginMask,c=r.endMask,l=r.ellipsisMask,f=r.newAxisMask,h=r.shrinkAxisMask;cy(a,"stridedSlice");var d,p=io.slice_util.sliceInfo(a.shape,i,o,u,s,c,l,f,h),v=p.finalShapeSparse,g=p.finalShape,m=p.isIdentity,y=p.sliceDim0,b=p.isSimpleSlice,x=p.begin,w=p.end,k=p.strides;if(m)d=Gy({inputs:{x:a},backend:n,attrs:{shape:g}});else if(y||b){io.util.assert(a.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(a.shape.length)}));var _=io.slice_util.computeOutShape(x,w,k),S=Fb({inputs:{x:a},backend:n,attrs:{begin:x,size:_}});d=Gy({inputs:{x:S},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(S)}else{var C=dS(v,n.bufferSync(a),k,x);d=n.makeTensorInfo(g,C.dtype,C.values)}return d}},vS=function(){function e(t,n,r,a,i,o){(0,D.Z)(this,e),this.separator=io.util.encodeString(t),this.nGramWidths=n,this.leftPad=io.util.encodeString(r),this.rightPad=io.util.encodeString(a),this.padWidth=i,this.preserveShort=o}return(0,F.Z)(e,[{key:"getPadWidth",value:function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}},{key:"getNumNGrams",value:function(e,t){var n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}},{key:"createNGrams",value:function(e,t,n,r,a,i){for(var o=this,u=function(u){var s=o.getPadWidth(i),c=Math.max(0,s-u),l=Math.max(0,s-(a-(u+1))),f=i-(c+l),h=t+(c>0?0:u-s),d=0;d+=c*o.leftPad.length;for(var p=0;p<f;++p)d+=e[h+p].length;d+=l*o.rightPad.length,d+=(c+l+f-1)*o.separator.length,n[r+u]=new Uint8Array(d);for(var v=n[r+u],g=0,m=function(e){return e.forEach((function(e){return v[g++]=e}))},y=0;y<c;++y)m(o.leftPad),m(o.separator);for(var b=0;b<f-1;++b)m(e[h+b]),m(o.separator);if(f>0){m(e[h+f-1]);for(var x=0;x<l;++x)m(o.separator),m(o.rightPad)}else{for(var w=0;w<l-1;++w)m(o.rightPad),m(o.separator);m(o.rightPad)}},s=0;s<a;++s)u(s)}},{key:"compute",value:function(e,t){var n=this,r=e.length,a=t.length;if(a>0){var i=t[0];if(0!==i)throw new Error("First split value must be 0, got ".concat(i));for(var o=1;o<a;++o){var u=t[o]>=i;if(!(u=u&&t[o]<=r))throw new Error("Invalid split value ".concat(t[o],", must be in [").concat(i,", ").concat(r,"]"));i=t[o]}if(i!==r)throw new Error("Last split value must be data size. Expected ".concat(r,", got ").concat(i))}var s=a-1,c=io.util.getArrayFromDType("int32",a);if(0===r||0===a){for(var l=new Array(r),f=0;f<=s;++f)c[f]=0;return[l,c]}c[0]=0;for(var h=function(e){var r=t[e]-t[e-1],a=0;n.nGramWidths.forEach((function(e){a+=n.getNumNGrams(r,e)})),n.preserveShort&&r>0&&0===a&&(a=1),c[e]=c[e-1]+a},d=1;d<=s;++d)h(d);for(var p=new Array(c[s]),v=function(r){var a=t[r],i=c[r];if(n.nGramWidths.forEach((function(o){var u=t[r+1]-t[r],s=n.getNumNGrams(u,o);n.createNGrams(e,a,p,i,s,o),i+=s})),n.preserveShort&&i===c[r]){var o=t[r+1]-t[r];if(0===o)return"continue";var u=o+2*n.padWidth;n.createNGrams(e,a,p,i,1,u)}},g=0;g<s;++g)v(g);return[p,c]}}]),e}();function gS(e,t,n,r,a,i,o,u){return new vS(n,r,a,i,o,u).compute(e,t)}var mS={kernelName:io.StringNGrams,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,u=r.rightPad,s=r.padWidth,c=r.preserveShortSequences,l=t.data,f=t.dataSplits,h=gS(n.data.get(l.dataId).values,n.data.get(f.dataId).values,a,i,o,u,s,c),d=(0,C.Z)(h,2),p=d[0],v=d[1];return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(f.shape,"int32",v)]}};function yS(e,t,n,r){if(e.length)if(0!==t.length)if(1!==t.length){for(var a=0,i=0;i<e.length+1;i++)if(i===e.length||-1!==t.indexOf(e[i])){var o=e.subarray(a,i);n&&0===o.length||r.push(o),a=i+1}}else{for(var u=t[0],s=e.indexOf(u);-1!==s;){var c=e.subarray(0,s);n&&0===c.length||r.push(c),s=(e=e.subarray(s+1)).indexOf(u)}n&&0===e.length||r.push(e)}else for(var l=0;l<e.length;++l)r.push(e.subarray(l,l+1))}function bS(e,t,n){for(var r=e.length,a=[],i=0,o=0,u=new Array(r),s=0;s<r;++s){var c=a.length;yS(e[s],t,n,a);var l=a.length-c;u[s]=l,i+=l,o=Math.max(o,l)}for(var f=io.util.getArrayFromDType("int32",2*i),h=new Array(i),d=[r,o],p=0,v=0;v<r;++v)for(var g=0;g<u[v];++g)f[2*p]=v,f[2*p+1]=g,h[p]=a[p],++p;return[f,h,d]}var xS={kernelName:io.StringSplit,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=bS(n.data.get(a.dataId).values,n.data.get(i.dataId).values[0],r),u=(0,C.Z)(o,3),s=u[0],c=u[1],l=u[2],f=c.length;return[n.makeTensorInfo([f,2],"int32",s),n.makeTensorInfo([f],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(l))]}};function wS(e,t){for(var n=io.util.getArrayFromDType("int32",e.length),r=0;r<e.length;++r)n[r]=io.util.fingerPrint64(e[r]).modulo(t).getLowBitsUnsigned();return n}var kS={kernelName:io.StringToHashBucketFast,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=wS(n.data.get(a.dataId).values,r);return n.makeTensorInfo(a.shape,"int32",i)}},_S=dy(io.Tan,(function(e){return Math.tan(e)})),SS={kernelName:io.Tan,backendName:"cpu",kernelFunc:_S},CS=dy(io.Tanh,(function(e){return Math.tanh(e)})),ES={kernelName:io.Tanh,backendName:"cpu",kernelFunc:CS};var AS={kernelName:io.TensorScatterUpdate,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.tensor,a=t.indices,i=t.updates,o=io.backend_util.calculateShapes(i,a,r.shape),u=o.sliceRank,s=o.numUpdates,c=o.sliceSize,l=o.strides,f=o.outputSize,h=n.bufferSync(a),d=n.bufferSync(i),p=n.bufferSync(r),v=E_(h,d,r.shape,f,c,s,u,l,p,!1);return n.makeTensorInfo(r.shape,v.dtype,v.values)}};function NS(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=(0,io.buffer)(n,e.dtype),i=0;i<a.values.length;++i){for(var o=a.indexToLoc(i),u=new Array(e.rank),s=0;s<u.length;s++)u[s]=o[s]%e.shape[s];var c=e.locToIndex(u);a.values[i]=e.values[c]}return a}var TS={kernelName:io.Tile,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;cy(a,"tile");var o=NS(n.bufferSync(a),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}},MS=function(e,t){var n=t.value-e.value;return 0===n?e.index-t.index:n};function DS(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;r>n;){if(r-n>600){var a=r-n+1,i=t-n+1,o=Math.log(a),u=.5*Math.exp(2*o/3),s=.5*Math.sqrt(o*u*(a-u)/a)*Math.sign(i-a/2),c=Math.max(n,Math.floor(t-i*u/a+s)),l=Math.min(r,Math.floor(t+(a-i)*u/a+s));DS(e,t,c,l)}var f=e[t],h=n,d=r;for(io.util.swap(e,n,t),MS(e[r],f)>0&&io.util.swap(e,n,r);h<d;){for(io.util.swap(e,h,d),h++,d--;MS(e[h],f)<0;)h+=1;for(;MS(e[d],f)>0;)d-=1}0===MS(e[n],f)?io.util.swap(e,n,d):(d+=1,io.util.swap(e,d,r)),d<=t&&(n=d+1),t<=d&&(r=d-1)}}function FS(e,t,n,r,a){for(var i=t[t.length-1],o=e.length/i,u=i,s=io.util.getTypedArrayFromDType(n,o*r),c=io.util.getTypedArrayFromDType("int32",o*r),l=function(t){var n=t*u,i=e.subarray(n,n+u),o=new Array(i.length);i.forEach((function(e,t){return o[t]={value:e,index:t}})),r<o.length&&(DS(o,r),o=o.slice(0,r)),a&&o.sort(MS);for(var l=t*r,f=s.subarray(l,l+r),h=c.subarray(l,l+r),d=0;d<r;d++)f[d]=o[d].value,h[d]=o[d].index},f=0;f<o;f++)l(f);var h=t.slice();return h[h.length-1]=r,[(0,io.buffer)(h,n,s),(0,io.buffer)(h,"int32",c)]}var IS={kernelName:io.TopK,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted;cy(a,"topk");var u=FS(n.data.get(a.dataId).values,a.shape,a.dtype,i,o),s=(0,C.Z)(u,2),c=s[0],l=s[1];return[n.makeTensorInfo(c.shape,c.dtype,c.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}};var OS={kernelName:io.Transform,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=t.transforms,o=n.interpolation,u=n.fillMode,s=n.fillValue,c=n.outputShape,l=(0,C.Z)(a.shape,4),f=l[0],h=l[1],d=l[2],p=l[3],v=null!=c?c:[h,d],g=(0,C.Z)(v,2),m=g[0],y=g[1],b=[f,m,y,p],x=io.util.computeStrides(a.shape),w=x[0],k=x[1],_=x[2],S=io.util.computeStrides(b),E=S[0],A=S[1],N=S[2],T=io.util.getTypedArrayFromDType(a.dtype,io.util.sizeFromShape(b));T.fill(s);for(var M=r.data.get(a.dataId).values,D=r.data.get(i.dataId).values,F=0;F<f;++F){for(var I=1===i.shape[0]?D:D.subarray(8*F,8*F+8),O=0;O<m;++O)for(var R=0;R<y;++R)for(var Z=0;Z<p;++Z){var B=void 0,z=I[6]*R+I[7]*O+1;if(0!==z){var L=(I[0]*R+I[1]*O+I[2])/z,P=(I[3]*R+I[4]*O+I[5])/z,j=RS(L,d,u),U=RS(P,h,u);switch(o){case"nearest":B=BS(M,h,d,w,k,_,F,U,j,Z,s);break;case"bilinear":B=zS(M,h,d,w,k,_,F,U,j,Z,s);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(o))}T[F*E+O*A+R*N+Z]=B}}return r.makeTensorInfo(b,a.dtype,T)}return{dataId:r.write(T,b,a.dtype),shape:a.shape,dtype:a.dtype}}};function RS(e,t,n){switch(n){case"reflect":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{var a=2*t;(n-=a*Math.trunc(n/a))>=t&&(n=a-n-1)}return io.util.clamp(0,n,t-1)}(e,t);case"wrap":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{var a=t-1;n-=t*Math.trunc(n/a)}return io.util.clamp(0,n,t-1)}(e,t);case"nearest":return function(e,t){return io.util.clamp(0,e,t-1)}(e,t);default:return function(e,t){return e}(e)}}function ZS(e,t,n,r,a,i,o,u,s,c,l){return 0<=u&&u<t&&0<=s&&s<n?e[o*r+u*a+s*i+c]:l}function BS(e,t,n,r,a,i,o,u,s,c,l){return ZS(e,t,n,r,a,i,o,Math.round(u),Math.round(s),c,l)}function zS(e,t,n,r,a,i,o,u,s,c,l){var f=Math.floor(u),h=Math.floor(s),d=f+1,p=h+1;return(d-u)*((p-s)*ZS(e,t,n,r,a,i,o,f,h,c,l)+(s-h)*ZS(e,t,n,r,a,i,o,f,p,c,l))+(u-f)*((p-s)*ZS(e,t,n,r,a,i,o,d,h,c,l)+(s-h)*ZS(e,t,n,r,a,i,o,d,p,c,l))}function LS(e,t,n,r){for(var a=io.util.parseAxisParam(t,n)[0],i=[1,n[0],1],o=0;o<a;o++)i[0]*=n[o];i[1]=n[a];for(var u=a+1;u<n.length;u++)i[2]*=n[u];for(var s=new Map,c=new Int32Array(n[a]),l=new io.TensorBuffer(i,r,e),f=[],h=1===i[0]&&1===i[2],d=0;d<n[a];d++){var p=void 0;if(h)p=e[d].toString();else{for(var v=[],g=0;g<i[0];g++)for(var m=0;m<i[2];m++)v.push(l.get(g,d,m));p=v.join(",")}var y=s.get(p);if(null!=y)c[d]=y;else{var b=s.size;s.set(p,b),c[d]=b,f.push(d)}}var x=i.slice();x[1]=s.size;var w=new io.TensorBuffer(x,r);f.forEach((function(e,t){for(var n=0;n<i[0];n++)for(var r=0;r<i[2];r++)w.set(l.get(n,e,r),n,t,r)}));var k=n.slice();return k[a]=x[1],{outputValues:w.values,outputShape:k,indices:c}}var PS={kernelName:io.Unique,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;cy(i,"unique");var o=LS(r.data.get(i.dataId).values,a,i.shape,i.dtype),u=o.outputValues,s=o.outputShape,c=o.indices;return[r.makeTensorInfo(s,i.dtype,u),r.makeTensorInfo([c.length],"int32",c)]}};var jS={kernelName:io.Unpack,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a.shape.length,u=a.shape[i],s=new Array(o-1),c=0,l=0;l<o;l++)l!==i&&(s[c++]=a.shape[l]);var f=new Array(o).fill(0),h=a.shape.slice();h[i]=1;for(var d=new Array(u),p=0;p<d.length;p++){f[i]=p;var v=Fb({inputs:{x:a},backend:n,attrs:{begin:f,size:h}});d[p]=Gy({inputs:{x:v},backend:n,attrs:{shape:s}}),n.disposeIntermediateTensorInfo(v)}return d}};for(var US={kernelName:io.UnsortedSegmentSum,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments;cy(a,"unsortedSegmentSum");for(var u=[],s=[],c=a.shape.length-i.shape.length,l=i,f=0;f<c;++f){var h=Hx({inputs:{input:l},backend:n,attrs:{dim:f+1}});l=h,s.push(h)}for(var d=0;d<o;++d){var p=io.util.createScalarValue(d,"int32"),v=n.makeTensorInfo([],"int32",p),g=Ix({inputs:{a:v,b:l},backend:n}),m=Ly({inputs:{x:g},backend:n,attrs:{dtype:"float32"}}),y=Ex({inputs:{a:m,b:a},backend:n}),b=Nx({inputs:{x:y},backend:n,attrs:{axis:0,keepDims:!1}});u.push(b),s.push(v),s.push(g),s.push(m),s.push(y),s.push(b)}var x=Wk({inputs:u,backend:n,attrs:{axis:0}});return s.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}},WS=0,VS=[$y,Jy,tb,rb,Hy,ab,sb,cb,lb,fb,db,vb,mb,xb,kb,Eb,Ab,Nb,Tb,Ky,Mb,Ob,Bb,Pb,jb,Py,Vb,Hb,Oy,Gb,Qb,ex,tx,nx,rx,ax,ix,ux,cx,lx,fx,hx,dx,px,gx,mx,yx,bx,xx,wx,kx,_x,Mx,gy,Dx,Ox,Ux,qx,Gx,Kx,uw,cw,lw,dw,gw,mw,yw,xw,kw,Cw,Nw,yy,Tw,Kb,Dw,Iw,Rw,xy,zw,jw,Ww,Hw,Xw,$w,Jw,nk,rk,ak,uk,lk,fk,hk,dk,pk,vk,gk,mk,xk,wk,Sk,Ak,Ax,Tk,Dk,Ik,Rk,zk,Lk,Uk,Vk,qk,Xk,Sy,Kk,t_,a_,l_,h_,By,Jx,p_,Ey,Ny,Xy,v_,g_,m_,y_,b_,x_,k_,C_,A_,M_,D_,R_,Dy,B_,L_,j_,Ib,Ek,V_,q_,G_,Y_,$_,Q_,J_,eS,rS,aS,uS,lS,hS,pS,mS,xS,kS,rw,Tx,SS,ES,AS,TS,IS,OS,ub,PS,jS,US,jk];WS<VS.length;WS++){var qS=VS[WS];(0,io.registerKernel)(qS)}var HS,GS,XS,YS={},KS={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function $S(e,t){if(!(e in YS)||null!=t){var n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=null==t?function(e){if((0,io.env)().getBool("IS_SAFARI")||"undefined"===typeof OffscreenCanvas||2!==e){if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}return new OffscreenCanvas(300,150)}(e):t;n.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete YS[e]}),!1),(0,io.env)().getBool("SOFTWARE_WEBGL_ENABLED")&&(KS.failIfMajorPerformanceCaveat=!1);if(1===e)return n.getContext("webgl",KS)||n.getContext("experimental-webgl",KS);return n.getContext("webgl2",KS)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;YS[e]=n}var r=YS[e];return null==r||r.isContextLost()?(delete YS[e],$S(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),YS[e])}function QS(e,t){return[t,e]}function JS(e){var t=io.util.sizeFromShape(e),n=Math.ceil(t/4);return io.util.sizeToSquarishShape(n)}function eC(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function tC(e,t){var n,r,a,i,o,u,s,c,l,f,h=e;return 2===(0,io.env)().getNumber("WEBGL_VERSION")?(n=h.R32F,r=h.R16F,a=h.RGBA16F,i=h.RGBA32F,o=h.RED,s=4,c=1,l=h.HALF_FLOAT,f=h.FLOAT,u=h.RGBA8):(n=e.RGBA,r=e.RGBA,a=e.RGBA,i=h.RGBA,o=e.RGBA,s=4,c=4,l=null!=t?t.HALF_FLOAT_OES:null,f=e.FLOAT,u=e.RGBA),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:u,downloadUnpackNumChannels:s,defaultNumChannels:c,textureTypeHalfFloat:l,textureTypeFloat:f}}function nC(e,t){var n=t();return(0,io.env)().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(HS||(HS={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(GS||(GS={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(XS||(XS={}));function rC(e){return!!((0,io.env)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function aC(e,t){return mC(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}var iC,oC,uC=/ERROR: [0-9]+:([0-9]+):/g;function sC(e,t){var n=uC.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+n[1],a=e.split("\n"),i=a.length.toString().length+2,o=a.map((function(e,t){return io.util.rightPad((t+1).toString(),i)+e})),u=0,s=0;s<o.length;s++)u=Math.max(o[s].length,u);var c=o.slice(0,r-1),l=o.slice(r-1,r),f=o.slice(r);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(io.util.rightPad(l[0],u)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join("\n"))}function cC(e,t){if(nC(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function lC(e,t,n,r,a,i,o){var u=e.getAttribLocation(t,n);return-1!==u&&(nC(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),nC(e,(function(){return e.vertexAttribPointer(u,a,e.FLOAT,!1,i,o)})),nC(e,(function(){return e.enableVertexAttribArray(u)})),!0)}function fC(e,t,n){return mC(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}function hC(e,t,n){return e.getUniformLocation(t,n)}function dC(e,t,n,r){nC(e,(function(){return function(e,t,n){yC(e,n),nC(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),nC(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}(e,t,r)})),nC(e,(function(){return e.uniform1i(n,r)}))}function pC(e,t,n){nC(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),nC(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function vC(e,t){nC(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),nC(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function gC(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function mC(e,t,n){var r=nC(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function yC(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){var a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function bC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return io.util.sizeFromShape(e.slice(0,e.length-t))}function xC(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function wC(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[bC(e)].concat((0,M.Z)(xC(e)))),t}function kC(e){return e%2===0}function _C(e,t){if(e=e.slice(-2),t=t.slice(-2),io.util.arraysEqual(e,t))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e[e.length-1],r=t[t.length-1];if(n===r)return!0;if(kC(n)&&kC(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&kC(e[0])&&kC(t[0])}function SC(e,t){return null!=e.getExtension(t)}function CC(e){try{if(null!=$S(e))return!0}catch(ZR){return console.log("Error when getting WebGL context: ",ZR),!1}return!1}function EC(e){if(0===e)return!1;var t=$S(e);if(1!==e){if(SC(t,"EXT_color_buffer_float"))return AC(t);var n="EXT_color_buffer_half_float";if(SC(t,n)){var r=t.getExtension(n);return function(e,t){var n=tC(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=1,i=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var u=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),u}(t,r)}return!1}return!!SC(t,"OES_texture_float")&&(!!SC(t,"WEBGL_color_buffer_float")&&AC(t))}function AC(e){var t=tC(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function NC(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&io.util.assert("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."}))}))}var TC=(0,io.env)();function MC(){var e,t,n,r,a,i,o,u,s,c;return 2===(0,io.env)().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",u=(0,io.env)().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",s="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",u="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",s="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:u,defineSpecialInf:s,defineRound:c}}function DC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=io.util.computeStrides(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / ").concat(t),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t);return"".concat(i,"; ").concat(o,";")})).join("")}function FC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=io.util.computeStrides(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / outShapeStrides[").concat(a,"]"),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * outShapeStrides[").concat(a,"]"):"index -= ".concat(e[a]," * outShapeStrides[").concat(a,"]");return"".concat(i,"; ").concat(o,";")})).join("")}function IC(e,t){var n=e.length,r=e.map((function(e){return"".concat(t,"[").concat(e,"]")})),a=new Array(n-1);a[n-2]=r[n-1];for(var i=n-3;i>=0;--i)a[i]="(".concat(a[i+1]," * ").concat(r[i+1],")");return a}function OC(e){var t=io.util.computeStrides(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}TC.registerFlag("HAS_WEBGL",(function(){return TC.getNumber("WEBGL_VERSION")>0})),TC.registerFlag("WEBGL_VERSION",(function(){return CC(2)?2:CC(1)?1:0})),TC.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),TC.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===TC.get("WEBGL_VERSION")})),TC.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),TC.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),TC.registerFlag("WEBGL_PACK",(function(){return TC.getBool("HAS_WEBGL")})),TC.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return TC.getBool("WEBGL_PACK")})),TC.registerFlag("WEBGL_PACK_CLIP",(function(){return TC.getBool("WEBGL_PACK")})),TC.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return TC.getBool("WEBGL_PACK")})),TC.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return TC.getBool("WEBGL_PACK")})),TC.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return TC.getBool("WEBGL_PACK")})),TC.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return TC.getBool("WEBGL_PACK")})),TC.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return TC.getBool("WEBGL_PACK")})),TC.registerFlag("WEBGL_PACK_REDUCE",(function(){return TC.getBool("WEBGL_PACK")})),TC.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return TC.getBool("WEBGL_PACK")})),TC.registerFlag("WEBGL_CONV_IM2COL",(function(){return TC.getBool("WEBGL_PACK")})),TC.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",(function(){return TC.getBool("WEBGL_PACK")})),TC.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return function(e){if(null==iC){var t=$S(e);iC=t.getParameter(t.MAX_TEXTURE_SIZE)}return iC}(TC.getNumber("WEBGL_VERSION"))})),TC.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return function(e){if(null==oC){var t=$S(e);oC=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,oC)}(TC.getNumber("WEBGL_VERSION"))})),TC.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=TC.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;var t=$S(e);return SC(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:SC(t,"EXT_disjoint_timer_query")?1:0}(e)})),TC.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return TC.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!io.device_util.isMobile()})),TC.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return function(e){if(0===e)return!1;var t=$S(e);if(1===e){if(!SC(t,"OES_texture_float"))return!1}else if(!SC(t,"EXT_color_buffer_float"))return!1;return AC(t)}(TC.getNumber("WEBGL_VERSION"))})),TC.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!TC.getBool("WEBGL_FORCE_F16_TEXTURES")&&TC.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),TC.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return EC(TC.getNumber("WEBGL_VERSION"))})),TC.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return 2===(e=TC.getNumber("WEBGL_VERSION"))&&null!=$S(e).fenceSync;var e})),TC.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return TC.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),TC.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if("number"!==typeof e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but "+"got ".concat(e,"."));if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))})),TC.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return io.device_util.isMobile()?1:-1}),(function(e){if("number"!==typeof e)throw new Error("WEBGL_FLUSH_THRESHOLD must be a number but got "+"".concat(e,"."));if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))})),TC.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 128})),TC.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(function(){return!1})),TC.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e5})),TC.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(function(){return 128})),TC.registerFlag("WEBGL_EXP_CONV",(function(){return!1})),TC.registerFlag("SOFTWARE_WEBGL_ENABLED",(function(){return TC.getBool("IS_TEST")})),TC.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",(function(){return 1/0})),TC.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",(function(){return!1})),TC.registerFlag("WEBGL2_ISNAN_CUSTOM",(function(){return!1})),TC.registerFlag("ENGINE_COMPILE_ONLY",(function(){return!1}));var RC="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",ZC=io.backend_util.getBroadcastDims;function BC(e,t,n){var r=[];if(e.forEach((function(e){var t=io.util.sizeFromShape(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){switch(nE(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape).uniformShape.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((function(e){r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));var a,i,o=r.join("\n"),u=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a="";a+=n?LC(e,r):zC(e,r);var i=e.shapeInfo.logicalShape,o=t.logicalShape;i.length<=o.length&&(a+=n?JC(e,t):eE(e,t));return a}(e,t,n.packedInputs,n.enableShapeUniforms)})).join("\n"),s=t.texShape,c=MC(),l=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(c),f=function(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(PC,"\n    ").concat(jC,"\n    ").concat(UC,"\n  ")}(c);return t.isPacked?(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    ");if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(io.util.arraysEqual(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");var a=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),i=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";for(var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),i=a*Math.ceil(e[e.length-2]/2),o=i,u="",s="b, r, c",c=2;c<e.length-1;c++)o*=e[e.length-c-1],u="\n      int b".concat(c," = index / ").concat(o,";\n      index -= b").concat(c," * ").concat(o,";\n    ")+u,s="b".concat(c,", ")+s;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(u,"\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(s,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,s,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(c)):(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(io.util.arraysEqual(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){var r=FC(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(r,"\n    return ivec3(r, c, d);\n  }\n")}var a=DC(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){var r=FC(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}var a=DC(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){var n=DC(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=DC(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,s,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(c)),n.packedInputs&&(f+=WC),[f,l,i,o,a,u,n.userCode].join("\n")}function zC(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.shapeInfo.logicalShape;switch(n.length){case 0:return qC(e,t);case 1:return HC(e,t);case 2:return GC(e,t);case 3:return XC(e,t);case 4:return YC(e,t);case 5:return KC(e);case 6:return $C(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function LC(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=MC();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=MC();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ");var o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(o[0],", ").concat(o[1],", index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=i[0],u=i[1],s=MC();if(null!=i&&io.util.arraysEqual(n,i))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(s.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(u,".0, ").concat(o,".0);\n\n        return ").concat(s.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(s.texture2D,"(").concat(r,", uv);\n    }\n  ");var c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],l=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(l,", ").concat(c[0],", ").concat(c[1],", row, col);\n      return ").concat(s.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===n[0]){var u=[1,2],s=rE(e,n.slice(1)),c=["b","row","col"];return"\n        ".concat(LC(s,t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(aE(c,u),");\n        }\n      ")}var l=MC();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ");var f=o[0],h=o[1],d=Math.ceil(n[2]/2),p=d*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(f,", ").concat(h,", ").concat(p,", ").concat(d,", b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=MC();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");for(var i=e.shapeInfo.logicalShape,o=i.length,u=e.shapeInfo.texShape,s=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],c=s[0],l=s[1],f=Math.ceil(i[o-1]/2),h=f*Math.ceil(i[o-2]/2),d="int b, int row, int col",p="b * ".concat(h," + (row / 2) * ").concat(f," + (col / 2)"),v=2;v<o-1;v++)d="int b".concat(v,", ")+d,h*=i[o-v-1],p="b".concat(v," * ").concat(h," + ")+p;return"\n    vec4 ".concat(r,"(").concat(d,") {\n      int index = ").concat(p,";\n      int texR = index / ").concat(l,";\n      int texC = index - texR * ").concat(l,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(l,", ").concat(c,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}var PC="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",jC="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",UC="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",WC="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function VC(e){return"offset".concat(e)}function qC(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");var a=(0,C.Z)(e.shapeInfo.texShape,2),i=a[0],o=a[1];if(1===i&&1===o)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var u=VC(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(u,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var s=(0,C.Z)(e.shapeInfo.texShape,2),c=s[0],l=s[1];return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(c,", ").concat(l,", ").concat(u,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function HC(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(QC(e),"\n      }\n    ");var a=e.shapeInfo.texShape,i=a[0],o=a[1];if(1===o&&1===i)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var u=VC(n);return 1===o?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(u,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(u,") + 0.5) / ").concat(i,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):1===i?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(u,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(u,") + 0.5) / ").concat(o,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):t?"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(u,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  "):"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(i,", ").concat(o,", index + ").concat(u,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function GC(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(null!=i&&io.util.arraysEqual(n,i)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var o=i[0],u=i[1];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(u,".0, ").concat(o,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}var s=io.util.squeezeShape(n),c=s.newShape,l=s.keptDims,f=c;if(f.length<n.length){var h=rE(e,f);return"\n      ".concat(zC(h,t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat(aE(["row","col"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(QC(e),"\n      }\n    ");var d=i[0],p=i[1],v=VC(r);return 1===p?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(d,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):1===d?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(p,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):t?"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(v,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(v,";\n    vec2 uv = uvFromFlat(").concat(d,", ").concat(p,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}function XC(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],u=io.util.squeezeShape(n),s=u.newShape,c=u.keptDims,l=s;if(l.length<n.length){var f=rE(e,l);return"\n        ".concat(zC(f,t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat(aE(["row","col","depth"],c),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(i,", ").concat(o,", 1)));\n        ").concat(QC(e),"\n      }\n    ");var h=e.shapeInfo.texShape,d=h[0],p=h[1],v=e.shapeInfo.flatOffset;if(p===i&&null==v)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(o,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(p,".0, ").concat(d,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(p===o&&null==v)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(p,".0, ").concat(d,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");var g=VC(r);return t?"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    "):"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(g,";\n        vec2 uv = uvFromFlat(").concat(d,", ").concat(p,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}function YC(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,u=n[1]*o,s=io.util.squeezeShape(n),c=s.newShape,l=s.keptDims;if(c.length<n.length){var f=rE(e,c);return"\n      ".concat(zC(f,t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat(aE(["row","col","depth","depth2"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(u,", ").concat(o,", ").concat(i,", 1)));\n        ").concat(QC(e),"\n      }\n    ");var h=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],v=d[1],g="int stride2 = ".concat(r,"Shape[3];"),m="int stride1 = ".concat(r,"Shape[2] * stride2;"),y="int stride0 = ".concat(r,"Shape[1] * stride1;");if(v===u&&null==h)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(g,"\n        ").concat(m,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(o,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(p,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(v===i&&null==h)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(p,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var b=VC(r);return t?"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(g,"\n      ").concat(m,"\n      ").concat(y,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(u," + col * ").concat(o," +\n          depth * ").concat(i," + depth2;\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(v,", index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}function KC(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],i=t[3]*a,o=t[2]*i,u=t[1]*o,s=io.util.squeezeShape(t),c=s.newShape,l=s.keptDims;if(c.length<t.length){var f=rE(e,c);return"\n      ".concat(zC(f),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(aE(["row","col","depth","depth2","depth3"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(u,", ").concat(o,", ").concat(i,", ").concat(a,")) +\n          depth3;\n        ").concat(QC(e),"\n      }\n    ");var h=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],v=d[1];if(v===u&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(o,", ").concat(i,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(v===a&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var g=VC(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(u," + col * ").concat(o," + depth * ").concat(i," +\n          depth2 * ").concat(a," + depth3 + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(v,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function $C(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=io.util.squeezeShape(t),i=a.newShape,o=a.keptDims;if(i.length<t.length){var u=rE(e,i);return"\n      ".concat(zC(u),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(aE(["row","col","depth","depth2","depth3","depth4"],o),");\n      }\n    ")}var s=t[5],c=t[4]*s,l=t[3]*c,f=t[2]*l,h=t[1]*f;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(h,", ").concat(f,", ").concat(l,", ").concat(c,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(s,", 1)));\n        ").concat(QC(e),"\n      }\n    ");var d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,v=p[0],g=p[1];if(g===h&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(f,", ").concat(l,", ").concat(c,", ").concat(s,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(g,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(g===s&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(g,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var m=VC(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(h," + col * ").concat(f," + depth * ").concat(l," +\n          depth2 * ").concat(c," + depth3 * ").concat(s," + depth4 + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(v,", ").concat(g,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function QC(e){var t=e.name,n=io.util.sizeFromShape(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function JC(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),i="get"+a+"AtOutCoords",o=e.shapeInfo.logicalShape.length,u=t.logicalShape.length,s=ZC(e.shapeInfo.logicalShape,t.logicalShape),c=tE(u),l=u-o,f=["x","y","z","w","u","v"];n=0===o?"":u<2&&s.length>=1?"coords = 0;":s.map((function(e){return"coords.".concat(f[e+l]," = 0;")})).join("\n");var h="";h=u<2&&o>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(f[t+l])})).join(", ");var d="return outputValue;",p=1===io.util.sizeFromShape(e.shapeInfo.logicalShape),v=1===io.util.sizeFromShape(t.logicalShape);if(1!==o||p||v){if(p&&!v)d=1===u?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(s.length){var g=o-2,m=o-1;s.indexOf(g)>-1&&s.indexOf(m)>-1?d="return vec4(outputValue.x);":s.indexOf(g)>-1?d="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(m)>-1&&(d="return vec4(outputValue.xx, outputValue.zz);")}}else d="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(i,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(a,"(").concat(h,");\n      ").concat(d,"\n    }\n  ")}function eE(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.texShape,o=e.shapeInfo.texShape,u=e.shapeInfo.logicalShape.length,s=t.logicalShape.length;if(!e.shapeInfo.isUniform&&u===s&&null==e.shapeInfo.flatOffset&&io.util.arraysEqual(o,i))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var c,l=tE(s),f=ZC(e.shapeInfo.logicalShape,t.logicalShape),h=s-u,d=["x","y","z","w","u","v"];c=0===u?"":s<2&&f.length>=1?"coords = 0;":f.map((function(e){return"coords.".concat(d[e+h]," = 0;")})).join("\n");var p="";return p=s<2&&u>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(d[t+h])})).join(", "),"\n    float ".concat(a,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(c,"\n      return get").concat(r,"(").concat(p,");\n    }\n  ")}function tE(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function nE(e,t,n){var r=io.util.squeezeShape(t),a=r.newShape,i=r.keptDims,o=t.length,u=e&&3===o&&1===t[0],s=u?t.slice(1):a,c=!e&&o>1&&!io.util.arraysEqual(t,n)&&a.length<o||u;return{useSqueezeShape:c,uniformShape:c?s:t,keptDims:i}}function rE(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function aE(e,t){return t.map((function(t){return e[t]})).join(", ")}function iE(e,t,n,r){var a=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),i=a.map((function(e){return e.shapeInfo})),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},u=BC(a,o,t),s=function(e,t){var n=mC(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(nC(e,(function(){return e.shaderSource(n,t)})),nC(e,(function(){return e.compileShader(n)})),(0,io.env)().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw sC(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,u),c=e.createProgram(s);return(0,io.env)().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:s,source:u,webGLProgram:c,inShapeInfos:i,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(c),Object.assign({program:t,fragmentShader:s,source:u,webGLProgram:c,inShapeInfos:i,outShapeInfo:o},oE(e,t,c)))}function oE(e,t,n){var r,a,i,o,u=[],s=[],c=null;o=e.getUniformLocation(n,"NAN",!1),1===(0,io.env)().getNumber("WEBGL_VERSION")&&(c=e.getUniformLocation(n,"INFINITY",!1));var l,f=!1,h=(0,B.Z)(t.variableNames);try{for(h.s();!(l=h.n()).done;){var d=l.value,p={name:d,uniform:e.getUniformLocation(n,d,f),offset:e.getUniformLocation(n,"offset".concat(d),f)};t.enableShapeUniforms&&(p.shape=e.getUniformLocation(n,"".concat(d,"Shape"),f),p.texShape=e.getUniformLocation(n,"".concat(d,"TexShape"),f)),u.push(p)}}catch(y){h.e(y)}finally{h.f()}if(t.enableShapeUniforms&&(r=e.getUniformLocation(n,"outShape",f),i=e.getUniformLocation(n,"outShapeStrides",f),a=e.getUniformLocation(n,"outTexShape",f)),t.customUniforms){var v,g=(0,B.Z)(t.customUniforms);try{for(g.s();!(v=g.n()).done;){var m=v.value;s.push(e.getUniformLocation(n,m.name,f))}}catch(y){g.e(y)}finally{g.f()}}return{variablesLocations:u,customUniformLocations:s,infLoc:c,nanLoc:o,outShapeLocation:r,outShapeStridesLocation:i,outTexShapeLocation:a}}function uE(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((function(e,n){var r=e.logicalShape,a=t[n],i=a.shape;if(!io.util.arraysEqual(r,i))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(i," must match"));if(!e.isUniform||!a.isUniform){var o=e.texShape,u=a.isUniform?null:a.texData.texShape;if(!io.util.arraysEqual(o,u))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(o," and ").concat(u," must match"))}}))}function sE(e,t,n,r,a){t.program.enableShapeUniforms||(uE(t.inShapeInfos,n),uE([t.outShapeInfo],[r]));var i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):e.setOutputMatrixTexture(i.texture,o[0],o[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),1===(0,io.env)().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN);for(var u=0;u<n.length;++u){var s=n[u],c=t.variablesLocations[u],l=c.uniform,f=c.offset,h=c.shape,d=c.texShape;if(h){var p=nE(t.program.packedInputs,s.shape,s.texData.texShape).uniformShape;switch(p.length){case 1:e.gl.uniform1iv(h,new Int32Array(p));break;case 2:e.gl.uniform2iv(h,new Int32Array(p));break;case 3:e.gl.uniform3iv(h,new Int32Array(p));break;case 4:e.gl.uniform4iv(h,new Int32Array(p))}}if(d&&e.gl.uniform2i(d,s.texData.texShape[0],s.texData.texShape[1]),null!=l)if(s.isUniform)if(io.util.sizeFromShape(s.shape)<2)e.gl.uniform1f(l,s.uniformValues[0]);else{var v=s.uniformValues;v instanceof Float32Array||(v=new Float32Array(v)),e.gl.uniform1fv(l,v)}else null!=s.texData.slice&&null!=f&&e.gl.uniform1i(f,s.texData.slice.flatOffset),e.setInputMatrixTexture(s.texData.texture.texture,l,u)}var g=t.outShapeLocation;if(g)switch(r.shape.length){case 1:e.gl.uniform1iv(g,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(g,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(g,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(g,new Int32Array(r.shape))}if(t.outShapeStridesLocation){var m=io.util.computeStrides(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(m));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(m));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(m))}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a)for(var y=0;y<t.program.customUniforms.length;++y){var b=t.program.customUniforms[y],x=t.customUniformLocations[y],w=a[y];if("float"===b.type)e.gl.uniform1fv(x,w);else if("vec2"===b.type)e.gl.uniform2fv(x,w);else if("vec3"===b.type)e.gl.uniform3fv(x,w);else if("vec4"===b.type)e.gl.uniform4fv(x,w);else if("int"===b.type)e.gl.uniform1iv(x,w);else if("ivec2"===b.type)e.gl.uniform2iv(x,w);else if("ivec3"===b.type)e.gl.uniform3iv(x,w);else{if("ivec4"!==b.type)throw Error("uniform type ".concat(b.type," is not supported yet."));e.gl.uniform4iv(x,w)}}e.executeProgram()}function cE(e,t,n){var r="";t.concat(n).forEach((function(t){var a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){var i=t.texData.texShape,o=nE(e.packedInputs,t.shape,i),u=o.useSqueezeShape,s=o.uniformShape,c=o.keptDims,l="",f="",h="";if(1===s.length&&e.packedInputs){var d=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];l="".concat(d[0]>1,"_").concat(d[1]>1)}else if(2!==s.length||e.packedInputs){if(s.length>2&&!e.packedInputs){var p=io.util.computeStrides(s);h="".concat(p[0]===i[1],"_").concat(p[p.length-1]===i[1])}}else f="".concat(s[0]>1,"_").concat(s[1]>1);var v=t.shape.length,g=2===s.length&&io.util.arraysEqual(t.shape,i),m=1===io.util.sizeFromShape(t.shape),y=io.backend_util.getBroadcastDims(t.shape,n.shape),b=!e.packedInputs&&v===n.shape.length&&io.util.arraysEqual(i,n.texData.texShape),x=e.packedInputs||s.length>2?"":"".concat(i[0]>1,"_").concat(i[1]>1);r+="".concat(v,"_").concat(b,"_").concat(u?c:"","_").concat(s.length,"_").concat(m,"_").concat(y,"_").concat(g,"_").concat(l,"_").concat(f,"_").concat(h,"_").concat(x,"_").concat(a)}else{var w=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(w,"_").concat(a)}}));var a=e.userCode,i=e.constructor.name;return i+="_"+r+"_"+a+"".concat((0,io.env)().getNumber("WEBGL_VERSION"))}function lE(e){return(0,io.env)().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var fE=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=HS.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=MC();this.outputShape=t,this.enableShapeUniforms=lE(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?FC(["r","c","d"],t):DC(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),hE=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=HS.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=MC();this.outputShape=t,this.enableShapeUniforms=lE(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?FC(["r","c","d"],t):DC(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),dE=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.variableNames=["A"],this.outTexUsage=GS.DOWNLOAD;var n=MC();this.outputShape=t,this.userCode="\n      ".concat(RC,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),pE=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=GS.DOWNLOAD;var n=MC();this.outputShape=t,this.userCode="\n      ".concat(RC,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),vE={R:0,G:1,B:2,A:3},gE=(0,F.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RGBA";(0,D.Z)(this,e),this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];var a=MC();this.outputShape=t,this.enableShapeUniforms=lE(this.outputShape.length);var i="result";n&&(i="floor(result * 255. + 0.5)");for(var o="",u=0;u<r.length;u++){var s=r[u];o+="\n          if(offset == ".concat(u,") {\n            result = values[").concat(vE[s],"];\n          }")}this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":OC(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ").concat(r.length,");\n\n        flatIndex = idiv(flatIndex, ").concat(r.length,", 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ").concat(a.texture2D,"(A, uv);\n          ").concat(o,"\n        }\n        ").concat(a.output," = vec4(").concat(i,", 0., 0., 0.);\n      }\n    ")})),mE=(0,F.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,D.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=MC();this.outputShape=t,this.enableShapeUniforms=lE(this.outputShape.length);var a="",i="result";n&&(i="floor(result * 255. + 0.5)");for(var o=0;o<=1;o++)for(var u=0;u<=1;u++){var s=2*o+u;a+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(u," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(t[2]),") {\n          localCoords[2] += ").concat(u,";\n          if (localCoords[1] + ").concat(o," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(t[1]),") {\n            localCoords[1] += ").concat(o,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(r.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(s,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(s,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(s,"] = values[2];\n            } else {\n              result[").concat(s,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":OC(t),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(a,"\n\n          ").concat(r.output," = ").concat(i,";\n        }\n    ")}));function yE(e){var t=MC();return function(e,t){var n=mC(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(nC(e,(function(){return e.shaderSource(n,t)})),nC(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function bE(e){return function(e,t){var n=mC(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return nC(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),nC(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function xE(e){return function(e,t){var n=mC(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return nC(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),nC(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Uint16Array([0,1,2,2,1,3]))}function wE(e,t,n,r,a,i){!function(e,t){var n=(0,io.env)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){var a="[".concat(e,"x").concat(t,"]"),i="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+i+".")}}(t,n);var o=function(e){return mC(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}(e),u=e.TEXTURE_2D;return nC(e,(function(){return e.bindTexture(u,o)})),nC(e,(function(){return e.texParameteri(u,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),nC(e,(function(){return e.texParameteri(u,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),nC(e,(function(){return e.texParameteri(u,e.TEXTURE_MIN_FILTER,e.NEAREST)})),nC(e,(function(){return e.texParameteri(u,e.TEXTURE_MAG_FILTER,e.NEAREST)})),1===(0,io.env)().getNumber("WEBGL_VERSION")?nC(e,(function(){return e.texImage2D(u,0,r,t,n,0,a,i,null)})):nC(e,(function(){return e.texStorage2D(u,1,r,t,n)})),nC(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),{texture:o,texShape:[n,t]}}function kE(e){return e.internalFormatFloat}function _E(e){return e.internalFormatHalfFloat}function SE(e){return e.downloadTextureFormat}function CE(e){return e.internalFormatPackedFloat}function EE(e){return e.internalFormatPackedHalfFloat}function AE(e,t,n,r,a,i,o,u){var s=e,c=new Float32Array(function(e,t){var n=eC(e,t),r=(0,C.Z)(n,2);return r[0]*r[1]*4}(i,o));return s.bindBuffer(s.PIXEL_PACK_BUFFER,t),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,c),s.bindBuffer(s.PIXEL_PACK_BUFFER,null),c}var NE=function(){function e(t){(0,D.Z)(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];var n=(0,io.env)().getNumber("WEBGL_VERSION");if(null!=t?(this.gl=t,function(e,t){YS[e]=t}(n,t)):this.gl=$S(n),t=this.gl,2===(0,io.env)().getNumber("WEBGL_VERSION")){var r=t;this.createVertexArray=function(){return nC(r,(function(){return r.createVertexArray()}))},this.bindVertexArray=function(e){return nC(r,(function(){return r.bindVertexArray(e)}))},this.deleteVertexArray=function(e){return nC(r,(function(){return r.deleteVertexArray(e)}))},this.getVertexArray=function(){return nC(r,(function(){return r.getParameter(r.VERTEX_ARRAY_BINDING)}))}}else if(null!=t){var a=t.getExtension("OES_vertex_array_object");if(null==a)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=function(){return nC(t,(function(){return a.createVertexArrayOES()}))},this.bindVertexArray=function(e){return nC(t,(function(){return a.bindVertexArrayOES(e)}))},this.deleteVertexArray=function(e){return nC(t,(function(){return a.deleteVertexArrayOES(e)}))},this.getVertexArray=function(){return nC(t,(function(){return t.getParameter(a.VERTEX_ARRAY_BINDING_OES)}))}}var i="WEBGL_color_buffer_float",o="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===(0,io.env)().getNumber("WEBGL_VERSION")){var u="OES_texture_half_float";if(this.textureFloatExtension=aC(this.gl,"OES_texture_float"),SC(this.gl,u))this.textureHalfFloatExtension=aC(this.gl,u);else if((0,io.env)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(i),SC(this.gl,o))this.colorBufferHalfFloatExtension=aC(this.gl,o);else if((0,io.env)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(i="EXT_color_buffer_float",SC(this.gl,i))this.colorBufferFloatExtension=this.gl.getExtension(i);else{if(!SC(this.gl,o))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(o)}this.vertexBuffer=bE(this.gl),this.indexBuffer=xE(this.gl),this.framebuffer=function(e){return mC(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=tC(this.gl,this.textureHalfFloatExtension)}return(0,F.Z)(e,[{key:"debug",get:function(){return(0,io.env)().getBool("DEBUG")}},{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;nC(t,(function(){return t.finish()})),nC(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),nC(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),nC(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),nC(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),nC(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=QS(t,n),i=(0,C.Z)(a,2);return wE(e,i[0],i[1],kE(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=QS(t,n),i=(0,C.Z)(a,2);return wE(e,i[0],i[1],_E(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=QS(t,n),i=(0,C.Z)(a,2);return wE(e,i[0],i[1],SE(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),function(e,t,n){nC(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?2===(0,io.env)().getNumber("WEBGL_VERSION")?nC(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)})):nC(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):2===(0,io.env)().getNumber("WEBGL_VERSION")?nC(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)})):nC(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),nC(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,i){var o,u,s;nC(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(o=new Uint8Array(n*r*4),u=e.UNSIGNED_BYTE,s=e.RGBA):(o=new Float32Array(n*r*4),u=e.FLOAT,s=i.internalFormatPackedFloat),o.set(a),2===(0,io.env)().getNumber("WEBGL_VERSION")?nC(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,u,o)})):nC(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,s,n,r,0,e.RGBA,u,o)})),nC(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=eC(t,n),i=(0,C.Z)(a,2);return wE(e,i[0],i[1],EE(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=eC(t,n),i=(0,C.Z)(a,2);return wE(e,i[0],i[1],CE(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(vC(this.gl,this.framebuffer),this.outputTexture=null),nC(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n,r){var a=QS(t,n),i=(0,C.Z)(a,2),o=i[0],u=i[1],s=new Uint8Array(t*n*4);return nC(e,(function(){return e.readPixels(0,0,o,u,r.downloadTextureFormat,e.UNSIGNED_BYTE,s)})),new Float32Array(s.buffer)}(r.gl,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,i){return AE(this.gl,e,0,0,0,a,i,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return function(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=function(e,t,n,r){var a=e.createBuffer();nC(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var i=16*t*n;return nC(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)})),nC(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),nC(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if((0,io.env)().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(i,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=i}else(0,io.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,(0,io.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n){var r=new Float32Array(t*n*4);return nC(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}(r.gl,t,n)}))}},{key:"createProgram",value:function(e){var t=this;this.throwIfDisposed();var n=this.gl;null==this.vertexShader&&(this.vertexShader=yE(n));var r=function(e){return mC(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}(n);nC(n,(function(){return n.attachShader(r,t.vertexShader)})),nC(n,(function(){return n.attachShader(r,e)})),function(e,t){if(nC(e,(function(){return e.linkProgram(t)})),!(0,io.env)().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(n,r);var a=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&cC(n,a),a}},{key:"buildVao",value:function(e){var t=this;this.setProgram(e),this.bindVertexArray(e.vao);var n=this.gl;nC(n,(function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.indexBuffer)})),function(e,t,n){nC(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),lC(e,t,"clipSpacePos",n,3,20,0)&&lC(e,t,"uv",n,2,20,12)}(n,e,this.vertexBuffer)}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&(nC(this.gl,(function(){return t.gl.deleteProgram(e)})),this.deleteVertexArray(e.vao))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&cC(this.gl,this.program),nC(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?fC(this.gl,e,t):hC(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),nC(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),dC(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=eC(t,n),a=(0,C.Z)(r,2),i=a[0],o=a[1];this.setOutputMatrixTextureDriver(e,i,o)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&cC(this.gl,this.program),gC(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;if(this.debug){var t=this.getVertexArray();console.assert(t===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}nC(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),nC(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=aC(this.gl,2===(0,io.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===(0,io.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==(0,io.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:function(){var e=(0,Bi.Z)(A().mark((function e(t){var n=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,io.util.repeatedTry((function(){return n.disposed||n.isQueryAvailable(t,(0,io.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,(0,io.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var i=this.getQueryTimerExtensionWebGL1(),o=i.getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),!(this.itemsToPoll.length>1)){var r=void 0;"setTimeoutCustom"in(0,io.env)().platform&&(r=(0,io.env)().platform.setTimeoutCustom.bind((0,io.env)().platform)),io.util.repeatedTry((function(){return n.pollItems(),0===n.itemsToPoll.length}),(function(){return 0}),null,r)}}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),pC(this.gl,e,this.framebuffer),this.debug&&gC(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(pC(this.gl,this.outputTexture,this.framebuffer),this.debug&&gC(this.gl)):vC(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;pC(r,e,this.framebuffer),this.debug&&gC(r),this.outputTexture=e,nC(r,(function(){return r.viewport(0,0,t,n)})),nC(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),nC(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}}]),e}();var TE=Wy,ME=Rb,DE=Zb,FE=zb,IE=zy,OE=Ub,RE=Xb,ZE=Fx,BE=Wx,zE=Xx,LE=fw,PE=bw,jE=ww,UE=_w,WE=Ew,VE=Zw,qE=Lw,HE=Uw,GE=Vw,XE=ik,YE=sk,KE=yk,$E=Sx,QE=Nk,JE=Zk,eA=Yk,tA=e_,nA=r_,rA=c_,aA=f_,iA=__,oA=E_,uA=Ty,sA=Qy,cA=Db,lA=H_,fA=X_,hA=K_,dA=tS,pA=sS,vA=dS,gA=gS,mA=bS,yA=wS,bA=ew,xA=NS,wA=FS,kA=ib,_A=LS;function SA(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function CA(e,t){return 1===t?[e]:SA(e,t)}var EA=function(){function e(t){if((0,D.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=lE(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=CA("rc",this.rank),r=tE(this.rank),a=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode="\n        void main() {\n          ".concat(r," rc = getOutputCoords();\n\n          if(").concat(a,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(i,"\n\n            setOutput(vec4(").concat(o,"));\n          }\n        }\n      ")}}return(0,F.Z)(e,[{key:"getSourceCoordsArr",value:function(e){for(var t=[],n=0;n<=1;n++)for(var r=0;r<=1;r++){for(var a="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1"),i=2;i<this.rank;i++)a="".concat(e[e.length-1-i],",")+a;t.push(a)}return t}},{key:"getOutOfBoundsCondition",value:function(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);for(var t="",n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}},{key:"getSetup",value:function(e){if(1===this.rank)return"";var t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}},{key:"getOutput",value:function(e){var t=this.getSourceCoordsArr(e);if(1===this.rank){var n=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(n," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}]),e}(),AA=(0,F.Z)((function e(t,n){(0,D.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=lE(this.outputShape.length);for(var r="",a=0;a<4;a++){var i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),r+="\n        ".concat(i,"\n        ").concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(a,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(a>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){var n=t?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=e.map((function(e,t){return t})),a=IC(r,t);return a.map((function(t,r){var i="int ".concat(e[r]," = ").concat(n," / ").concat(a[r]),o=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(a[r]):"index -= ".concat(e[r]," * ").concat(a[r]);return"".concat(i,"; ").concat(o,";")})).join("")}(["r","c","d"],"inputShape"):DC(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(n,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":OC(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":t[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":t[2],";\n\n        ").concat(r,"\n\n        setOutput(result);\n      }\n    ")}));var NA=function(){function e(t){(0,D.Z)(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}return(0,F.Z)(e,[{key:"acquireTexture",value:function(e,t,n){var r=MA(t,n),a=DA(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var i,o=TA(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();var u=this.freeTextures[a].pop();return this.usedTextures[a].push(u),u}return r===XS.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===XS.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===XS.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===XS.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===XS.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(i),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),i}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var a=MA(n,r),i=DA(t,a,r);i in this.freeTextures||(this.freeTextures[i]=[]);var o=TA(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),u=(0,io.env)().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==u&&this._numBytesAllocated>u?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;var s=this.usedTextures[i],c=s&&s.indexOf(e);if(null==c||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");s[c]=s[s.length-1],s.pop(),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}]),e}();function TA(e,t,n,r,a){var i,o=function(e,t){switch(e){case XS.PACKED_2X2_FLOAT32:return CE(t);case XS.PACKED_2X2_FLOAT16:return EE(t);case XS.UNPACKED_FLOAT32:return kE(t);case XS.UNPACKED_FLOAT16:return _E(t);case XS.PACKED_4X1_UNSIGNED_BYTE:return SE(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(a){var u=eC(e[0],e[1]),s=(0,C.Z)(u,2);i=s[0]*s[1]}else{var c=QS(e[0],e[1]),l=(0,C.Z)(c,2);i=l[0]*l[1]}var f=function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,o);return i*f}function MA(e,t){if(e===GS.UPLOAD)return XS.PACKED_2X2_FLOAT32;if(e===GS.RENDER||null==e)return function(e){return(0,io.env)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?XS.PACKED_2X2_FLOAT32:XS.UNPACKED_FLOAT32:e?XS.PACKED_2X2_FLOAT16:XS.UNPACKED_FLOAT16}(t);if(e===GS.DOWNLOAD||e===GS.PIXELS)return XS.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function DA(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var FA=(0,F.Z)((function e(t,n){(0,D.Z)(this,e),this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=lE(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),IA="if (isnan(x)) return x;",OA="return x;",RA="return abs(x);";var ZA="return (x >= 0.0) ? x : (exp(x) - 1.0);",BA=IA+"\n  return (x < 0.0) ? 0.0 : x;\n",zA=IA+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",LA="return x;",PA="return 1.0 / (1.0 + exp(-1.0 * x));",jA="return x;",UA="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",WA="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",VA="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",qA="return 1.0 / (1.0 + exp(-1.0 * x));",HA=(0,F.Z)((function e(t,n){(0,D.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=lE(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),GA=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=lE(this.outputShape.length);var n=t.length,r=CA("rc",n),a=tE(n),i=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),o=r.slice(-2),u=n<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(i,");\n\n        setOutput(getChannel(packedInput, ").concat(u,"));\n      }\n    ")})),XA=io.kernel_impls.whereImpl,YA={};var KA=(0,io.env)().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");var $A=function(e){(0,I.Z)(n,e);var t=(0,O.Z)(n);function n(e){var r,a,i;if((0,D.Z)(this,n),(r=t.call(this)).pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.lastGlFlushTime=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!(0,io.env)().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null!=e){if(e instanceof NE)a=e;else{var o=$S((0,io.env)().getNumber("WEBGL_VERSION"),e);a=new NE(o)}r.binaryCache={},r.gpgpuCreatedLocally=!1}else{var u=$S((0,io.env)().getNumber("WEBGL_VERSION"));a=new NE(u),r.binaryCache=((i=(0,io.env)().getNumber("WEBGL_VERSION"))in YA||(YA[i]={}),YA[i]),r.gpgpuCreatedLocally=!0}return r.gpgpu=a,r.canvas=r.gpgpu.gl.canvas,r.textureManager=new NA(r.gpgpu),r.numMBBeforeWarning=null==(0,io.env)().global.screen?1024:(0,io.env)().global.screen.height*(0,io.env)().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new io.DataStorage((0,Ac.Z)(r),(0,io.engine)()),r}return(0,F.Z)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()-this.pendingDeletes}},{key:"writeTexture",value:function(e,t,n,r,a,i){var o=this.makeTensorInfo(t,n),u=this.texData.get(o.dataId);u.isPacked=!1,u.texture={texture:e,texShape:[r,a]},u.texShape=[r,a];var s=wC(t),c=new gE(s,!1,i),l=this.runWebGLProgram(c,[o],n,[[r,a]]);return l.shape=t,u.texture=null,this.disposeIntermediateTensorInfo(o),l.dataId}},{key:"write",value:function(e,t,n){if(((0,io.env)().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||(0,io.env)().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:GS.UPLOAD,refCount:1}),r}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){if((0,io.env)().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:GS.UPLOAD,refCount:a})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensorInfos,i=t.slice,o=t.shape,u=t.isPacked;if(null!=i){var s;s=u?new HA(o,LA):new FA(o,LA);var c=this.runWebGLProgram(s,[{dataId:e,shape:o,dtype:r}],r),l=this.readSync(c.dataId);return this.disposeIntermediateTensorInfo(c),l}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var f,h,d=null!=this.activeTimers;if(d&&(f=io.util.now()),"complex64"===r){var p=this.readSync(a.real.dataId),v=this.readSync(a.imag.dataId);h=io.backend_util.mergeRealAndImagArrays(p,v)}else h=this.getValuesFromTexture(e);return d&&(this.downloadWaitMs+=io.util.now()-f),this.convertAndCacheOnCPU(e,h)}},{key:"read",value:function(){var e=(0,Bi.Z)(A().mark((function e(t){var n,r,a,i,o,u,s,c,l,f,h,d,p,v,g,m,y,b,x,w,k,_,S;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(r=this.texData.get(t),a=r.values,i=r.shape,o=r.slice,u=r.dtype,s=r.complexTensorInfos,c=r.isPacked,null==o){e.next=11;break}return l=c?new HA(i,LA):new FA(i,LA),f=this.runWebGLProgram(l,[{dataId:t,shape:i,dtype:u}],u),h=this.read(f.dataId),this.disposeIntermediateTensorInfo(f),e.abrupt("return",h);case 11:if(null==a){e.next=13;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 13:if(!(0,io.env)().getBool("DEBUG")){e.next=16;break}if((0,io.env)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==(0,io.env)().getNumber("WEBGL_VERSION")){e.next=16;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 16:if(d=null,"complex64"!==u&&(0,io.env)().get("WEBGL_BUFFER_SUPPORTED")&&(p=this.decode(t),g=this.texData.get(p.dataId),d=(v=this.gpgpu).createBufferFromTexture.apply(v,[g.texture.texture].concat((0,M.Z)(JS(i))))),this.pendingRead.set(t,[]),"complex64"===u){e.next=22;break}return e.next=22,this.gpgpu.createAndWaitForFence();case 22:if("complex64"!==u){e.next=31;break}return e.next=25,Promise.all([this.read(s.real.dataId),this.read(s.imag.dataId)]);case 25:y=e.sent,b=y[0],x=y[1],m=io.backend_util.mergeRealAndImagArrays(b,x),e.next=32;break;case 31:null==d?m=this.getValuesFromTexture(t):(w=io.util.sizeFromShape(i),m=this.gpgpu.downloadFloat32MatrixFromBuffer(d,w));case 32:return null!=p&&this.disposeIntermediateTensorInfo(p),null!=d&&nC(k=this.gpgpu.gl,(function(){return k.deleteBuffer(d)})),_=this.convertAndCacheOnCPU(t,m),S=this.pendingRead.get(t),this.pendingRead.delete(t),S.forEach((function(e){return e(_)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&(0,io.engine)().removeDataId(t,this),this.pendingDeletes--),e.abrupt("return",_);case 40:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readToGPU",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.texData.get(e),r=n.values,a=n.shape,i=n.slice,o=n.dtype,u=n.isPacked,s=n.texture;if("complex64"===o)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=i){var c;c=u?new HA(a,LA):new FA(a,LA);var l=this.runWebGLProgram(c,[{dataId:e,shape:a,dtype:o}],o),f=this.readToGPU(l,t);return this.disposeIntermediateTensorInfo(l),f}if(null==s)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");var h=this.decode(e,t.customTexShape),d=(0,io.engine)().makeTensorFromTensorInfo(h),p=this.texData.get(h.dataId);return Object.assign({tensorRef:d},p.texture)}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return io.util.decodeString(e)}));return(0,io.buffer)(e.shape,e.dtype,n)}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return(0,io.buffer)(e.shape,e.dtype,t)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!rC(n)){if((0,io.env)().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.isPacked,i=io.util.sizeFromShape(n);if((0,io.env)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var o,u=this.decode(e),s=this.texData.get(u.dataId),c=(o=this.gpgpu).downloadMatrixFromPackedTexture.apply(o,[s.texture.texture].concat((0,M.Z)(JS(n)))).subarray(0,i);return this.disposeIntermediateTensorInfo(u),c}var l=(0,io.env)().getBool("WEBGL_PACK")&&!0===a,f=l?wC(n):n,h=l?new pE(f):new dE(f),d=this.runWebGLProgram(h,[{shape:f,dtype:r,dataId:e}],"float32"),p=this.texData.get(d.dataId),v=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(p.texture.texture,p.texShape[0],p.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(d),v}},{key:"timerAvailable",value:function(){return(0,io.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:function(e){var t=this,n=this.activeTimers,r=[],a=!1;null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();var i=io.util.flatten(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),o=io.util.flatten(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e}));this.activeTimers=n,a&&(this.programTimersStack=null);var u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(0,Bi.Z)(A().mark((function e(){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((0,io.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=8;break}return e.next=3,Promise.all(i);case 3:n=e.sent,u.kernelMs=io.util.sum(n),u.getExtraProfileInfo=function(){return n.map((function(e,t){return{name:o[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=9;break;case 8:u.kernelMs={error:"WebGL query timers are not supported in this environment."};case 9:return t.uploadWaitMs=0,t.downloadWaitMs=0,e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)})))()}},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return(0,io.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:io.util.now(),endMs:null}}},{key:"endTimer",value:function(e){return(0,io.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=io.util.now(),e)}},{key:"getQueryTime",value:function(){var e=(0,Bi.Z)(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((0,io.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e),r=n.complexTensorInfos;return null!=r&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,i=t.usage,o=t.isPacked,u=t.slice,s=u&&u.origDataId||e,c=this.dataRefCount.get(s);c>1?this.dataRefCount.set(s,c-1):(this.dataRefCount.delete(s),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));var l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:KA;return(0,io.env)().getBool("WEBGL_CPU_FORWARD")&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&io.util.sizeFromShape(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){io.backend_util.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return XA(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new HA(e.shape,t),a=this.compileAndRun(r,[e],n);return(0,io.engine)().makeTensorFromTensorInfo(a)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=sA(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if((0,io.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,RA,e.dtype);var n=new FA(e.shape,RA),r=this.compileAndRun(n,[e]);return(0,io.engine)().makeTensorFromTensorInfo(r)}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&io.util.isString(n[0])){var a=n.map((function(e){return io.util.encodeString(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){return(0,io.engine)().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}},{key:"unpackTensor",value:function(e){var t=new GA(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new EA(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[bC(e.shape)].concat((0,M.Z)(xC(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[bC(t)].concat((0,M.Z)(xC(t))),i=new AA(a,n),o=[n],u=this.runWebGLProgram(i,[r],e.dtype,o,!0);return{dataId:u.dataId,shape:t,dtype:u.dtype}}},{key:"decode",value:function(e,t){var n=this.texData.get(e),r=n.isPacked,a=n.shape,i=n.dtype;if(null!=t){var o=io.util.sizeFromShape(a),u=t[0]*t[1]*4;io.util.assert(o<=u,(function(){return"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."}))}var s,c=wC(a);s=r?new hE(c):new fE(c);var l=[null!=t?t:JS(c)];return{dtype:i,shape:a,dataId:this.runWebGLProgram(s,[{shape:c,dtype:i,dataId:e}],i,l,!0,t).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,r){var a=this,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,u=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(u.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===HS.DENSE){var c=null!=o?o:JS(e.outputShape);s.texShape=c.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===io.util.sizeFromShape(u.shape))return s.values=io.util.getTypedArrayFromDType(u.dtype,0),u;var l=[],f=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&io.util.sizeFromShape(t.shape)<=(0,io.env)().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(a.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),l.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!_C(n.shape,t.shape)){var r=t,i=t.shape;t.shape=n.shape,t=a.packedReshape(t,i),l.push(t),n=a.texData.get(t.dataId),r.shape=i}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(u.dataId);var h,d={shape:u.shape,texData:s,isUniform:!1},p=cE(e,f,d),v=this.getAndSaveBinary(p,(function(){return iE(a.gpgpu,e,f,d)})),g=null!=this.activeTimers;g&&(h=this.startTimer()),(0,io.env)().get("ENGINE_COMPILE_ONLY")||sE(this.gpgpu,v,f,d,r),l.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),g&&(h=this.endTimer(h),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(h)}));var m=(0,io.env)().getNumber("WEBGL_FLUSH_THRESHOLD");if(m>0){var y=io.util.now();y-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!(0,io.env)().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===i){var b=this.unpackTensor(u);return this.disposeIntermediateTensorInfo(u),b}return u}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;var i=this.runWebGLProgram(e,t,n,r,a);return i}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;if(!this.disposed){if(!(0,io.env)().getBool("IS_TEST"))Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}));this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=(0,io.tidy)((function(){if(!(0,io.env)().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=(0,io.env)().getBool("DEBUG");(0,io.env)().set("DEBUG",!1);var n=e.abs((0,io.scalar)(1e-8)).dataSync()[0];if((0,io.env)().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.values,i=t.texture,o=t.usage,u=t.isPacked;if(null==i){var s,c=null!=this.activeTimers;c&&(s=io.util.now());var l=t.texShape;if(null==l&&(l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,io.env)().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=(0,io.env)().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(r===1/0&&(0,io.env)().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n*=2,r*=2,1===(e=e.map((function(t,n){return n>=e.length-2?io.util.nearestLargerEven(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var a=io.util.squeezeShape(e);e=a.newShape}var i=io.util.sizeFromShape(e),o=null;e.length<=1&&i<=n?o=[1,i]:2===e.length&&e[0]<=n&&e[1]<=n?o=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?o=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?o=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?o=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(o=[e[0],e[1]*e[2]*e[3]]);var u=null!=o&&Math.max.apply(Math,(0,M.Z)(o))>r&&Math.min.apply(Math,(0,M.Z)(o))<=(t?2:1)&&Math.min.apply(Math,(0,M.Z)(o))>0;if(null==o||u)if(t){var s=bC(e),c=2,l=2;if(e.length){var f=xC(e),h=(0,C.Z)(f,2);c=h[0],l=h[1]}i=s*(c/2)*(l/2),o=io.util.sizeToSquarishShape(i).map((function(e){return 2*e}))}else o=io.util.sizeToSquarishShape(i);return o}(n,u),t.texShape=l),null!=a){var f,h=wC(n),d=l[1],p=l[0],v=a instanceof Uint8Array||a instanceof Uint8ClampedArray;if(u||!v){var g=eC(l[0],l[1]),m=(0,C.Z)(g,2);d=m[0],p=m[1]}f=u?new mE(h,v):new gE(h,v);var y=v?[p,d]:l,b=this.makeTensorInfo(y,r),x=this.texData.get(b.dataId);x.usage=v?GS.PIXELS:GS.UPLOAD,x.texShape=y,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),d,p,a);var w=[[p,d]],k=this.runWebGLProgram(f,[b],r,w,!0),_=this.texData.get(k.dataId);t.texShape=_.texShape,t.isPacked=_.isPacked,t.usage=_.usage,(0,io.env)().get("ENGINE_COMPILE_ONLY")?this.disposeData(k.dataId):(t.texture=_.texture,t.values=null,this.texData.delete(k.dataId)),this.disposeIntermediateTensorInfo(b),c&&(this.uploadWaitMs+=io.util.now()-s)}else{var S=this.acquireTexture(l,o,r,u);t.texture=S}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*io.util.bytesPerElement(t)}},{key:"checkCompileCompletion",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=(0,C.Z)(t[e],2)[1];this.checkCompletion_(n)}}},{key:"checkCompileCompletionAsync",value:function(){var e=(0,Bi.Z)(A().mark((function e(){var t,n,r,a,i,o,u,s,c=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!this.gpgpu.parallelCompilationExtension){e.next=6;break}for(n=0,r=Object.entries(this.binaryCache);n<r.length;n++)a=(0,C.Z)(r[n],2),i=a[1],t.push(this.checkCompletionAsync_(i));return e.abrupt("return",Promise.all(t));case 6:for(o=function(){var e=(0,C.Z)(s[u],2)[1],n=new Promise((function(t){try{c.checkCompletion_(e),t(!0)}catch(n){throw n}}));t.push(n)},u=0,s=Object.entries(this.binaryCache);u<s.length;u++)o();return e.abrupt("return",Promise.all(t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkCompletionAsync_",value:function(){var e=(0,Bi.Z)(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)){e.next=4;break}return e.abrupt("return",this.checkCompletion_(t));case 4:return e.next=6,(0,io.nextFrame)();case 6:return e.abrupt("return",this.checkCompletionAsync_(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkCompletion_",value:function(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw sC(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}},{key:"getUniformLocations",value:function(){for(var e=0,t=Object.values(this.binaryCache);e<t.length;e++){var n=t[e];this.gpgpu.buildVao(n.webGLProgram);var r=oE(this.gpgpu,n.program,n.webGLProgram),a=r.variablesLocations,i=r.customUniformLocations,o=r.infLoc,u=r.nanLoc,s=r.outShapeLocation,c=r.outShapeStridesLocation,l=r.outTexShapeLocation;n.variablesLocations=a,n.customUniformLocations=i,n.infLoc=o,n.nanLoc=u,n.outShapeLocation=s,n.outShapeStridesLocation=c,n.outTexShapeLocation=l}}},{key:"createTensorFromGPUData",value:function(e,t,n){e.channels=e.channels||"RGBA";var r=e.texture,a=e.height,i=e.width,o=e.channels,u=(0,io.engine)().backend;if(!u.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");var s=u.writeTexture(r,t,n,a,i,o);return(0,io.engine)().makeTensorFromDataId(s,t,n,u)}}]),n}(io.KernelBackend);$A.nextDataId=0;io.device_util.isBrowser()&&(0,io.registerBackend)("webgl",(function(){return new $A}),2);var QA=(0,F.Z)((function e(t,n,r){(0,D.Z)(this,e),this.variableNames=["A","B"],this.outputShape=io.backend_util.assertAndGetBroadcastShape(n,r),this.enableShapeUniforms=lE(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")})),JA="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n",eN=(0,F.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,D.Z)(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=io.backend_util.assertAndGetBroadcastShape(n,r);var i=this.outputShape.length;this.enableShapeUniforms=lE(i);var o="";if(a)if(0===i||1===io.util.sizeFromShape(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{var u=tE(i);if(o="\n          ".concat(u," coords = getOutputCoords();\n        "),1===i)this.enableShapeUniforms?o+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":o+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var s=CA("coords",i);this.enableShapeUniforms?o+="\n            bool nextRowOutOfBounds =\n              (".concat(s[i-2]," + 1) >= outShape[").concat(i," - 2];\n            bool nextColOutOfBounds =\n              (").concat(s[i-1]," + 1) >= outShape[").concat(i," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):o+="\n            bool nextRowOutOfBounds =\n              (".concat(s[i-2]," + 1) >= ").concat(this.outputShape[i-2],";\n            bool nextColOutOfBounds =\n              (").concat(s[i-1]," + 1) >= ").concat(this.outputShape[i-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(o,"\n\n        setOutput(result);\n      }\n    ")}));function tN(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var nN={kernelName:io.Identity,backendName:"webgl",kernelFunc:tN};function rN(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),u=tN({inputs:{x:r},backend:n}),s=tN({inputs:{x:a},backend:n});return o.complexTensorInfos={real:u,imag:s},i}var aN={kernelName:io.Complex,backendName:"webgl",kernelFunc:rN},iN="return (a < 0.) ? b * a : a;",oN="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var uN={kernelName:io.LeakyRelu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha,o=n.makeTensorInfo([],"float32",io.util.createScalarValue(i,"float32")),u=(0,io.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new eN(oN,a.shape,o.shape):new QA(iN,a.shape,o.shape),s=n.runWebGLProgram(u,[a,o],"float32");return n.disposeIntermediateTensorInfo(o),s}},sN="return (a < 0.) ? b * a : a;",cN="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var lN={kernelName:io.Prelu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,i=(0,io.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new eN(cN,r.shape,a.shape):new QA(sN,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}};function fN(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(e){var i,o=e.inputs,u=e.backend,s=o.x,c=u,l=a||s.dtype;if(c.shouldExecuteOnCPU([s])&&null!=r){var f=c.texData.get(s.dataId),h=r(f.values,l);return c.makeTensorInfo(s.shape,l,h)}return i=(0,io.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new HA(s.shape,n):new FA(s.shape,t),c.runWebGLProgram(i,[s],l)}}function hN(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,a=void 0!==r&&r,i=e.supportsComplex,o=void 0!==i&&i,u=e.cpuKernelImpl,s=e.dtype;return function(e){var r=e.inputs,i=e.backend,c=r.a,l=r.b,f=i;if(o&&"complex64"===c.dtype){var h=f.texData.get(c.dataId),d=f.texData.get(l.dataId),p=[[h.complexTensorInfos.real,d.complexTensorInfos.real],[h.complexTensorInfos.imag,d.complexTensorInfos.imag]].map((function(e){var n=(0,C.Z)(e,2),r=n[0],a=n[1],i={dataId:r.dataId,dtype:r.dtype,shape:c.shape},o={dataId:a.dataId,dtype:a.dtype,shape:l.shape},u=new QA(t,c.shape,l.shape);return f.runWebGLProgram(u,[i,o],(0,io.upcastType)(r.dtype,a.dtype))})),v=(0,C.Z)(p,2),g=v[0],m=v[1],y=rN({inputs:{real:g,imag:m},backend:f});return f.disposeIntermediateTensorInfo(g),f.disposeIntermediateTensorInfo(m),y}var b,x=s||(0,io.upcastType)(c.dtype,l.dtype);if(("string"===c.dtype||"string"===l.dtype||f.shouldExecuteOnCPU([c,l]))&&null!=u){var w=f.texData.get(c.dataId).values,k=f.texData.get(l.dataId).values,_="string"===c.dtype?io.backend_util.fromUint8ToStringArray(w):w,S="string"===c.dtype?io.backend_util.fromUint8ToStringArray(k):k,E=u(c.shape,l.shape,_,S,x),A=(0,C.Z)(E,2),N=A[0],T=A[1],M=f.makeTensorInfo(T,x);return f.texData.get(M.dataId).values=N,M}return b=(0,io.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new eN(n,c.shape,l.shape,a):new QA(t,c.shape,l.shape),f.runWebGLProgram(b,[c,l],x)}}function dN(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?jA:OA;if("relu"===e)return t?WA:BA;if("elu"===e)return t?UA:ZA;if("relu6"===e)return t?VA:zA;if("prelu"===e)return t?cN:sN;if("leakyrelu"===e)return t?oN:iN;if("sigmoid"===e)return t?qA:PA;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var pN=(0,F.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];(0,D.Z)(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=lE(this.outputShape.length);var l=a?t[1]:t[2],f=Math.ceil(l/2),h=a?"i * 2, rc.y":"rc.y, i * 2",d=i?"rc.z, i * 2":"i * 2, rc.z",p=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],g="",m="";u&&(g=s?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(u,"\n        }"):c?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(u,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(u,"\n        }"),m="result = activation(result);");var y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");var b="rc.x",x="rc.x";t[0]<n[0]?b="imod(rc.x, ".concat(t[0],")"):n[0]<t[0]&&(x="imod(rc.x, ".concat(n[0],")")),this.userCode="\n      ".concat(g,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(f,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ").concat(b,";\n        int batchB = ").concat(x,";\n        for (int i = 0; i < ").concat(f,"; i++) {\n          vec4 a = getMatrixA(batchA, ").concat(h,");\n          vec4 b = getMatrixB(batchB, ").concat(d,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(p[0]," * ").concat(v[0],");\n          result += (").concat(p[1]," * ").concat(v[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(y,"\n\n        ").concat(m,"\n\n        setOutput(result);\n      }\n    ")})),vN="return areal * breal - aimag * bimag;",gN="return areal * bimag + aimag * breal;",mN=(0,F.Z)((function e(t,n,r){(0,D.Z)(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=io.backend_util.assertAndGetBroadcastShape(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")})),yN="return a * b;";function bN(e){var t,n=e.inputs,r=e.backend,a=n.a,i=n.b,o=io.backend_util.upcastType(a.dtype,i.dtype);if("complex64"===a.dtype){var u=r.texData.get(a.dataId),s=r.texData.get(i.dataId),c=new mN(vN,a.shape,i.shape),l=new mN(gN,a.shape,i.shape),f=[{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:a.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:i.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:i.shape}],h=r.runWebGLProgram(c,f,"float32"),d=r.runWebGLProgram(l,f,"float32"),p=rN({inputs:{real:h,imag:d},backend:r});return r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(d),p}if(r.shouldExecuteOnCPU([a,i])){var v=r.texData.get(a.dataId),g=r.texData.get(i.dataId),m=$E(a.shape,i.shape,v.values,g.values,o),y=(0,C.Z)(m,2),b=y[0],x=y[1],w=r.makeTensorInfo(x,o);return r.texData.get(w.dataId).values=b,w}return t=(0,io.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new eN(yN,a.shape,i.shape):new QA(yN,a.shape,i.shape),r.runWebGLProgram(t,[a,i],o)}var xN={kernelName:io.Multiply,backendName:"webgl",kernelFunc:bN};function wN(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=n,u=io.util.sizeFromShape(a.shape),s=io.util.inferFromImplicitShape(i,u),c=io.util.sizeFromShape(s);io.util.assert(u===c,(function(){return"The new shape (".concat(s,") has ").concat(c," elements and the old ")+"shape (".concat(a.shape,") has ").concat(u," elements. The new shape and old ")+"shape must have the same number of elements."}));var l=o.texData.get(a.dataId);return!l.isPacked||_C(a.shape,s)||null!==l.texture&&_C(l.shape,s)?(o.incRef(a.dataId),{dataId:a.dataId,shape:s,dtype:a.dtype}):function(e,t,n){var r=[bC(e.shape)].concat((0,M.Z)(xC(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[bC(t)].concat((0,M.Z)(xC(t))),o=new AA(i,r),u=[r],s=n.runWebGLProgram(o,[a],e.dtype,u,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}(a,s,o)}var kN={kernelName:io.Reshape,backendName:"webgl",kernelFunc:wN},_N=(0,F.Z)((function e(t,n){(0,D.Z)(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var u=4*Math.floor(r/4),s=r%4,c="sumValue += dot(values, ones);";if(null!=n){var l=1/n;c="sumValue += dot(values * ".concat(io.util.isInt(l)?l.toPrecision(2):l,", ones);")}var f="";i%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(f,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===s,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(2===s,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(3===s,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(c,"\n        }\n        setOutput(sumValue);\n      }\n    ")})),SN=(0,F.Z)((function e(t,n){(0,D.Z)(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var u="0.0",s="";"prod"===n?u="1.0":"min"===n?(u="1.0 / 1e-20",s="min"):"max"===n&&(u="-1.0 / 1e-20",s="max");var c="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===n?c="sumValue":"prod"===n?c="prodValue":"all"===n?c="allValue":"any"===n&&(c="anyValue");var l=4*Math.floor(r/4),f=r%4,h="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(s,"(values, minMaxValue);\n        if (").concat("min"===n," || ").concat("max"===n,") {\n          minMaxValue = ").concat(s,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),d="vec4";"all"===n?(u="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===n&&(u="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");var p="";i%r>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(u,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(p,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(u,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(h,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===f,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(h,"\n        } else if (").concat(2===f,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(h,"\n        } else if (").concat(3===f,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(h,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")}));function CN(e,t,n,r){for(var a=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=io.backend_util.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),i=e,o=0;o<a.length;o++){var u,s=a[o],c=s.inSize,l=s.windowSize,f=s.outSize,h=void 0;h="mean"===n?0===o?new _N({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:f},c):new _N({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:f}):new SN({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:f},n),u=i,i=r.runWebGLProgram(h,[i],t),u.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(u)}return i}var EN=(0,F.Z)((function e(t,n){(0,D.Z)(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var i=tE(this.rank),o=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(n);this.userCode="\n    void main() {\n      ".concat(i," resRC = getOutputCoords();\n      setOutput(getA(").concat(o,"));\n    }\n    ")}));var AN=(0,F.Z)((function e(t,n){(0,D.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var i=tE(this.rank),o=SA("rc",this.rank),u=new Array(this.rank),s=0;s<n.length;s++)u[n[s]]=o[s];var c="vec2(".concat(u.slice(-2).join(),")"),l="++".concat(o[this.rank-1]," < ").concat(r[this.rank-1]),f="getChannel(getA(".concat(u.join(),"), ").concat(c,")");this.userCode="\n    void main() {\n      ".concat(i," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(f,";\n      if(").concat(l,") {\n        result[1] = ").concat(f,";\n      }\n      --").concat(o[this.rank-1],";\n      if(++").concat(o[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(f,";\n        if(").concat(l,") {\n          result[3] = ").concat(f,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}));function NN(e,t,n){var r=(0,io.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new AN(e.shape,t):new EN(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function TN(e){var t=e.inputs,n=e.backend,r=e.attrs;return function(e,t,n,r){var a=t,i=e.shape.length,o=io.util.parseAxisParam(a,e.shape),u=o,s=io.backend_util.getAxesPermutation(u,i),c=null!=s,l=e;c&&(l=NN(e,s,r),u=io.backend_util.getInnerMostAxes(u.length,i)),io.backend_util.assertAxesAreInnerMostDims("sum",u,i);var f=io.backend_util.computeOutAndReduceShapes(l.shape,u),h=(0,C.Z)(f,2),d=h[0],p=h[1],v=d;n&&(v=io.backend_util.expandShapeToKeepDim(d,o));var g=io.util.sizeFromShape(p),m=wN({inputs:{x:l},attrs:{shape:[io.util.sizeFromShape(e.shape)/g,g]},backend:r}),y=CN(m,(0,io.sumOutType)(e.dtype),"sum",r),b=wN({inputs:{x:y},attrs:{shape:v},backend:r});return r.disposeIntermediateTensorInfo(m),r.disposeIntermediateTensorInfo(y),c&&r.disposeIntermediateTensorInfo(l),b}(t.x,r.axis,r.keepDims,n)}var MN={kernelName:io.Sum,backendName:"webgl",kernelFunc:TN};function DN(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.perm,u=r,s=i.shape.length,c=new Array(s),l=0;l<c.length;l++)c[l]=i.shape[o[l]];if(u.shouldExecuteOnCPU([i])){var f=u.texData.get(i.dataId).values,h=kA(f,i.shape,i.dtype,o,c);t=u.makeTensorInfo(c,i.dtype),u.texData.get(t.dataId).values=h}else t=NN(i,o,u);return t}var FN={kernelName:io.Transpose,backendName:"webgl",kernelFunc:DN};function IN(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,i=e.backend,o=e.bias,u=void 0===o?null:o,s=e.preluActivationWeights,c=void 0===s?null:s,l=e.leakyreluAlpha,f=void 0===l?0:l,h=e.activation,d=void 0===h?null:h,p=t.shape.length,v=n.shape.length,g=r?t.shape[p-2]:t.shape[p-1],m=a?n.shape[v-1]:n.shape[v-2],y=r?t.shape[p-1]:t.shape[p-2],b=a?n.shape[v-2]:n.shape[v-1],x=t.shape.slice(0,-2),w=n.shape.slice(0,-2),k=io.util.sizeFromShape(x),_=io.util.sizeFromShape(w),S=io.broadcast_util.assertAndGetBroadcastShape(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([y,b]);io.util.assert(g===m,(function(){return"Error in matMul: inner shapes (".concat(g,") and (")+"".concat(m,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(a," must match.")}));var C,E=r?[k,g,y]:[k,y,g],A=a?[_,b,m]:[_,m,b],N=wN({inputs:{x:t},backend:i,attrs:{shape:E}}),T=wN({inputs:{x:n},backend:i,attrs:{shape:A}}),M=[N,T],D=Math.max(k,_),F=r?N.shape[1]:N.shape[2],I=null!=u,O=null!=c,R="leakyrelu"===d,Z=null!=d?dN(d,!0):null;if((1===y||1===b)&&F>1e3&&!1===(I||O||R||null!=Z)){var B=N,z=T;r&&(B=DN({inputs:{x:N},backend:i,attrs:{perm:[0,2,1]}}),M.push(B)),a&&(z=DN({inputs:{x:T},backend:i,attrs:{perm:[0,2,1]}}),M.push(z));var L=1===b,P=B;1!==b&&(P=wN({inputs:{x:B},backend:i,attrs:{shape:[D,F,1]}}),M.push(P));var j=1===b?2:1,U=z;L&&(U=wN({inputs:{x:z},backend:i,attrs:{shape:[D,1,F]}}),M.push(U));var W=bN({inputs:{a:P,b:U},backend:i});C=TN({inputs:{x:W},backend:i,attrs:{axis:j,keepDims:!0}}),M.push(W)}else{var V=(0,io.upcastType)(t.dtype,n.dtype),q=new pN(E,A,[D,y,b],r,a,I,Z,O,R),H=[N,T];if(null!=u&&H.push(u),O&&H.push(c),R){var G=i.makeTensorInfo([],"float32",io.util.createScalarValue(f,"float32"));H.push(G),M.push(G)}C=i.runWebGLProgram(q,H,V)}var X=wN({inputs:{x:C},backend:i,attrs:{shape:S}});M.push(C);for(var Y=0,K=M;Y<K.length;Y++){var $=K[Y];i.disposeIntermediateTensorInfo($)}return X}var ON={kernelName:io._FusedMatMul,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,u=t.preluActivationWeights,s=r.transposeA,c=r.transposeB,l=r.activation;return IN({a:a,b:i,transposeA:s,transposeB:c,backend:n,bias:o,preluActivationWeights:u,leakyreluAlpha:r.leakyreluAlpha,activation:l})}},RN="return abs(x);";var ZN={kernelName:io.Abs,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var i=r.texData.get(a.dataId),o=sA(i.values);return r.makeTensorInfo(a.shape,a.dtype,o)}return t=(0,io.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new HA(a.shape,RN):new FA(a.shape,RN),r.runWebGLProgram(t,[a],a.dtype)}},BN=fN({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),zN={kernelName:io.Acos,backendName:"webgl",kernelFunc:BN},LN=fN({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),PN={kernelName:io.Acosh,backendName:"webgl",kernelFunc:LN},jN="return a + b;",UN=hN({opSnippet:jN,packedOpSnippet:jN,supportsComplex:!0,cpuKernelImpl:TE}),WN={kernelName:io.Add,backendName:"webgl",kernelFunc:UN},VN=(0,F.Z)((function e(t,n){(0,D.Z)(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")})),qN=(0,F.Z)((function e(t,n){(0,D.Z)(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}));var HN={kernelName:io.AddN,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n;if(1===a.length)return tN({inputs:{x:a[0]},backend:r});if(a.length>(0,io.env)().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(a.length/2),o=e({inputs:a.slice(0,i),backend:r}),u=e({inputs:a.slice(i),backend:r});return e({inputs:[o,u],backend:r})}var s=a.map((function(e){return e.dtype})).reduce((function(e,t){return(0,io.upcastType)(e,t)})),c=a.map((function(e){return e.shape})),l=(0,io.env)().getBool("WEBGL_PACK")?new qN(a[0].shape,c):new VN(a[0].shape,c);return r.runWebGLProgram(l,a,s)}};var GN={kernelName:io.All,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,u=a.shape.length,s=io.util.parseAxisParam(i,a.shape),c=s,l=io.backend_util.getAxesPermutation(c,u),f=a;null!=l&&(f=DN({inputs:{x:a},backend:n,attrs:{perm:l}}),c=io.backend_util.getInnerMostAxes(c.length,u)),io.backend_util.assertAxesAreInnerMostDims("all",c,u);var h,d=io.backend_util.computeOutAndReduceShapes(f.shape,c),p=(0,C.Z)(d,2),v=p[0],g=p[1],m=wN({inputs:{x:f},backend:n,attrs:{shape:[-1,io.util.sizeFromShape(g)]}}),y=CN(m,m.dtype,"all",n);return h=wN(o?{inputs:{x:y},backend:n,attrs:{shape:io.backend_util.expandShapeToKeepDim(v,s)}}:{inputs:{x:y},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),null!=l&&n.disposeIntermediateTensorInfo(f),h}};var XN={kernelName:io.Any,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,u=a.shape.length,s=io.util.parseAxisParam(i,a.shape),c=s,l=io.backend_util.getAxesPermutation(c,u),f=a;null!=l&&(f=DN({inputs:{x:a},backend:n,attrs:{perm:l}}),c=io.backend_util.getInnerMostAxes(c.length,u)),io.backend_util.assertAxesAreInnerMostDims("any",c,u);var h,d=io.backend_util.computeOutAndReduceShapes(f.shape,c),p=(0,C.Z)(d,2),v=p[0],g=p[1],m=wN({inputs:{x:f},backend:n,attrs:{shape:[-1,io.util.sizeFromShape(g)]}}),y=CN(m,m.dtype,"any",n);return h=wN(o?{inputs:{x:y},backend:n,attrs:{shape:io.backend_util.expandShapeToKeepDim(v,s)}}:{inputs:{x:y},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),null!=l&&n.disposeIntermediateTensorInfo(f),h}},YN=(0,F.Z)((function e(t,n,r){(0,D.Z)(this,e),this.variableNames=["A"];var a=t.windowSize,i=t.batchSize,o=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var u="max"===n?">":"<",s=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(s,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(u," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")})),KN=(0,F.Z)((function e(t,n,r,a){(0,D.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,io.util.assert(t.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var i=t[t.length-1],o=Math.ceil(i/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),a||this.variableNames.push("bestIndicesA");var u,s,c=this.outputShape,l=c.length,f=tE(l),h=CA("coords",l);if(1===o){var d=tE(s=l+1);u="\n        ".concat(d," sourceLocR = ").concat(d,"(").concat(h.join(),", 0);\n        ++").concat(h[l-1],";\n        ").concat(d," sourceLocG = ").concat(d,"(").concat(h.join(),", 0);\n        ++").concat(h[l-2],";\n        ").concat(d," sourceLocA = ").concat(d,"(").concat(h.join(),", 0);\n        --").concat(h[l-1],";\n        ").concat(d," sourceLocB = ").concat(d,"(").concat(h.join(),", 0);\n        --").concat(h[l-2],";")}else s=l,u="\n        ".concat(f," sourceLocR = coords;\n        ++").concat(h[l-1],";\n        ").concat(f," sourceLocG = coords;\n        ++").concat(h[l-2],";\n        ").concat(f," sourceLocA = coords;\n        --").concat(h[l-1],";\n        ").concat(f," sourceLocB = coords;\n        --").concat(h[l-2],";");var p=["x","y","z","w","u","v"].slice(0,s),v="."+p[s-1],g=p.map((function(e){return"int "+e})),m=CA("sourceLocR",s-1).concat("inIdx.r"),y=CA("sourceLocG",s-1).concat("inIdx.g"),b=CA("sourceLocB",s-1).concat("inIdx.b"),x=CA("sourceLocA",s-1).concat("inIdx.a"),w="max"===r?"greaterThan":"lessThan",k=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(m.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(x.join(),")));"),_="vec4(\n            getAChannel(".concat(m.join(),"),\n            hasNextCol ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(b.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(x.join(),") : 0.)"),S=a?"":"\n      float getBestIndicesAChannel(".concat(g.join(),") {\n        return getChannel(getBestIndicesA(").concat(p.join(),"),\n                                          vec2(").concat(p.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(g.join(),") {\n        return getChannel(getA(").concat(p.join(),"),\n                               vec2(").concat(p.slice(-2).join(),"));\n      }\n      ").concat(S,"\n      void main() {\n        ").concat(f," coords = getOutputCoords();\n        bool hasNextCol = ").concat(h[l-1]," < ").concat(c[l-1]-1,";\n        bool hasNextRow = ").concat(h[l-2]," < ").concat(c[l-2]-1,";\n        ").concat(u,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(v,", sourceLocG").concat(v,",\n          sourceLocB").concat(v,", sourceLocA").concat(v,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(_,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(k,"\n          vec4 candidate = ").concat(_,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(w,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}));function $N(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],i=t.shape[1];null!=r&&(a=r.shape[0],i=r.shape[1]);var o=io.backend_util.computeOptimalWindowSize(i),u={windowSize:o,inSize:i,batchSize:a,outSize:Math.ceil(i/o)},s=new YN(u,n,null==r),c=[t];null!=r&&c.push(r);var l=e.runWebGLProgram(s,c,"int32");if(1===l.shape[1])return l;var f=$N(e,t,n,l);return e.disposeIntermediateTensorInfo(l),f}function QN(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null!=r?r.shape:t.shape,i=a[a.length-1],o=io.backend_util.computeOptimalWindowSize(i),u=new KN(a,o,n,null==r),s=null==r?[t]:[t,r],c=e.runWebGLProgram(u,s,"int32");if(c.shape.length===t.shape.length){var l=QN(e,t,n,c);return e.disposeIntermediateTensorInfo(c),l}return c}function JN(e,t,n,r){var a=[n];if(io.backend_util.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!(0,io.env)().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var i=[],o=e.texData.get(t.dataId),u=t;null!==o&&o.isPacked&&(u=e.unpackTensor(t),i.push(u));var s=io.backend_util.computeOutAndReduceShapes(u.shape,a),c=(0,C.Z)(s,2),l=c[0],f=c[1],h=io.util.sizeFromShape(f),d=wN({inputs:{x:u},backend:e,attrs:{shape:[-1,h]}});i.push(d);var p=$N(e,d,r);i.push(p);var v=wN({inputs:{x:p},backend:e,attrs:{shape:l}});return i.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),v}return QN(e,t,r)}var eT={kernelName:io.ArgMax,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=io.util.parseAxisParam(i,a.shape),u=io.backend_util.getAxesPermutation(o,a.shape.length),s=a,c=[];null!=u&&(s=DN({inputs:{x:a},backend:n,attrs:{perm:u}}),c.push(s),o=io.backend_util.getInnerMostAxes(o.length,s.shape.length)),io.backend_util.assertAxesAreInnerMostDims("argMax",[o[0]],s.shape.length);var l=JN(n,s,o[0],"max");return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l}};var tT={kernelName:io.ArgMin,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=io.util.parseAxisParam(i,a.shape),u=io.backend_util.getAxesPermutation(o,a.shape.length),s=a,c=[];null!=u&&(s=DN({inputs:{x:a},backend:n,attrs:{perm:u}}),c.push(s),o=io.backend_util.getInnerMostAxes(o.length,s.shape.length)),io.backend_util.assertAxesAreInnerMostDims("argMin",[o[0]],s.shape.length);var l=JN(n,s,o[0],"min");return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l}},nT=fN({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),rT={kernelName:io.Asin,backendName:"webgl",kernelFunc:nT},aT=fN({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),iT={kernelName:io.Asinh,backendName:"webgl",kernelFunc:aT},oT=fN({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),uT={kernelName:io.Atan,backendName:"webgl",kernelFunc:oT},sT=hN({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n"}),cT={kernelName:io.Atan2,backendName:"webgl",kernelFunc:sT},lT=fN({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),fT={kernelName:io.Atanh,backendName:"webgl",kernelFunc:lT},hT=(0,F.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if((0,D.Z)(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,u=t.strideHeight,s=t.strideWidth,c=t.dilationHeight,l=t.dilationWidth,f=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;var v="avg"===n,g="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),m="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),y="0.0";if(v||(y="-1.0 / 1e-20"),r){var b=">=";this.userCode="\n        const ivec2 strides = ivec2(".concat(u,", ").concat(s,");\n        const ivec2 pads = ivec2(").concat(d,", ").concat(p,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(f,";\n              wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(h,";\n                wC += ").concat(l,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(b," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?i?g:m:"wR * ".concat(h," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var x="max",w="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(w="avgValue / max(count, 1.0)");var k=4*Math.floor(o/4),_=o%4,S="\n      if (".concat(v,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(x,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(u,", ").concat(s,");\n      const ivec2 pads = ivec2(").concat(d,", ").concat(p,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(f,";\n            wR += ").concat(c,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(k,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              getValue(batch, xR, xC + 3 * ").concat(l,", d)\n            );\n\n            ").concat(S,"\n          }\n\n          int xC = xCCorner + ").concat(k,";\n          if (").concat(1===_,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(S,"\n          } else if (").concat(2===_,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(S,"\n          } else if (").concat(3===_,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              initializationValue\n            );\n\n            ").concat(S,"\n          }\n        }\n        setOutput(").concat(w,");\n      }\n    ")}})),dT=(0,F.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if((0,D.Z)(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,u=t.strideDepth,s=t.strideHeight,c=t.strideWidth,l=t.dilationDepth,f=t.dilationHeight,h=t.dilationWidth,d=t.effectiveFilterDepth,p=t.effectiveFilterHeight,v=t.effectiveFilterWidth,g=t.padInfo.front,m=t.padInfo.top,y=t.padInfo.left;this.outputShape=t.outShape;var b="avg"===n,x="0.0";if(b||(x="-1.0 / 1e-20"),r){var w=">=";this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(u,", ").concat(s,", ").concat(c,");\n        const ivec3 pads = ivec3(").concat(g,", ").concat(m,", ").concat(y,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(d,";\n              wD += ").concat(l,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(p,";\n                wR += ").concat(f,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(v,";\n                  wC += ").concat(h,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(w," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?i?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(p," * ").concat(v," +\n                      wR * ").concat(v," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var k="max",_="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(_="avgValue / max(count, 1.0)");var S=4*Math.floor(o/4),C=o%4,E="\n      if (".concat(b,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(k,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(u,", ").concat(s,", ").concat(c,");\n      const ivec3 pads = ivec3(").concat(g,", ").concat(m,", ").concat(y,");\n      const float initializationValue = ").concat(x,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(x,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(d,";\n            wD += ").concat(l,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(p,";\n            wR += ").concat(f,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(S,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(h,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(h,", ch)\n              );\n\n              ").concat(E,"\n            }\n\n            int xC = xCCorner + ").concat(S,";\n            if (").concat(1===C,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(E,"\n            } else if (").concat(2===C,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(E,"\n            } else if (").concat(3===C,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(h,", ch),\n                initializationValue\n              );\n\n              ").concat(E,"\n            }\n          }\n        }\n        setOutput(").concat(_,");\n      }\n    ")}}));var pT={kernelName:io.AvgPool,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;NC(a,"avgPool");var i=r.filterSize,o=r.strides,u=r.pad,s=r.dimRoundingMode;io.util.assert(io.backend_util.eitherStridesOrDilationsAreOne(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c=io.backend_util.computePool2DInfo(a.shape,i,o,1,u,s);if(1===c.filterWidth&&1===c.filterHeight&&io.util.arraysEqual(c.inShape,c.outShape))return tN({inputs:{x:a},backend:n});var l=new hT(c,"avg",!1);return n.runWebGLProgram(l,[a],"float32")}};var vT={kernelName:io.AvgPool3D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,u=r.pad,s=r.dimRoundingMode,c=r.dataFormat,l=io.backend_util.computePool3DInfo(a.shape,i,o,[1,1,1],u,s,c),f=new dT(l,"avg",!1);return n.runWebGLProgram(f,[a],"float32")}},gT=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,u=t.dilationWidth,s=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=s-1-t.padInfo.top,f=c-1-t.padInfo.left,h=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(l,", ").concat(f,");\n      const float avgMultiplier = float(").concat(h,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(s,";\n            wR += ").concat(o,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(c,";\n            wC+= ").concat(u,") {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),mT=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,u=t.strideWidth,s=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,f=t.effectiveFilterDepth,h=t.effectiveFilterHeight,d=t.effectiveFilterWidth,p=f-1-t.padInfo.front,v=h-1-t.padInfo.top,g=d-1-t.padInfo.left,m=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(p,", ").concat(v,", ").concat(g,");\n      const float avgMultiplier = float(").concat(m,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(f,";\n            wD += ").concat(s,") {\n          float dyD = float(dyDCorner + wD) / ").concat(i,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(h,";\n              wR += ").concat(c,") {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(d,";\n                wC += ").concat(l,") {\n              float dyC = float(dyCCorner + wC) / ").concat(u,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var yT={kernelName:io.AvgPool3DGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,u=r.strides,s=r.pad,c=r.dimRoundingMode,l=io.backend_util.computePool3DInfo(i.shape,o,u,[1,1,1],s,c),f=new mT(l);return n.runWebGLProgram(f,[a],i.dtype)}};var bT={kernelName:io.AvgPoolGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;NC([a,i],"avgPoolGrad");var u=r.filterSize,s=r.strides,c=r.pad,l=io.backend_util.computePool2DInfo(o.shape,u,s,1,c),f=new gT(l);return n.runWebGLProgram(f,[a],o.dtype)}};var xT={kernelName:io.BatchMatMul,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return IN({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},wT=(0,F.Z)((function e(t,n,r,a,i,o){(0,D.Z)(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],io.backend_util.assertAndGetBroadcastShape(t,n),io.backend_util.assertAndGetBroadcastShape(t,r);var u="0.0";null!=a&&(io.backend_util.assertAndGetBroadcastShape(t,a),this.variableNames.push("offset"),u="getOffsetAtOutCoords()");var s="1.0";null!=i&&(io.backend_util.assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(u,";\n        float scale = ").concat(s,";\n        float inv = scale * inversesqrt(variance + float(").concat(o,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")})),kT=(0,F.Z)((function e(t,n,r,a,i,o){(0,D.Z)(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],io.backend_util.assertAndGetBroadcastShape(t,n),io.backend_util.assertAndGetBroadcastShape(t,r);var u="vec4(0.0)";null!=a&&(io.backend_util.assertAndGetBroadcastShape(t,a),this.variableNames.push("offset"),u="getOffsetAtOutCoords()");var s="vec4(1.0)";null!=i&&(io.backend_util.assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(u,";\n        vec4 scale = ").concat(s,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(o,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")})),_T={kernelName:io.FusedBatchNorm,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.mean,o=t.variance,u=t.offset,s=t.scale;io.util.assert(i.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),io.util.assert(null==u||i.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),io.util.assert(null==s||i.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var c=r.varianceEpsilon;null==c&&(c=.001);var l=[a,i,o],f=null;null!=u&&(f=u.shape,l.push(u));var h=null;null!=s&&(h=s.shape,l.push(s));var d=(0,io.env)().getBool("WEBGL_PACK_NORMALIZATION")?new kT(a.shape,i.shape,o.shape,f,h,c):new wT(a.shape,i.shape,o.shape,f,h,c);return n.runWebGLProgram(d,l,l[0].dtype)}},ST=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n=tE(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var r,a=function(e){if(1===e)return"sourceLoc";if(e<=6)return CT.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank),i=t.map((function(e,t){return"sourceLoc.".concat(CT[t]," = start[").concat(t,"] + coords.").concat(CT[t],";")}));r="\n        ".concat(n," sourceLoc;\n        ").concat(n," coords = getOutputCoords();\n        ").concat(i.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(a,"));\n      }\n    ")})),CT=["x","y","z","w","u","v"];var ET=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var n=tE(this.rank),r=CA("coords",this.rank),a=CA("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),o="getChannel(getSource(".concat(a.join(),"), ").concat(i,")"),u="\n      result.x = ".concat(o,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(a[this.rank-1],";\n      }\n    "),s=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),c=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      void main() {\n        ".concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(c,"\n        vec4 result = vec4(0.);\n        ").concat(u,"\n        ").concat(s,"\n        setOutput(result);\n      }\n    ")}));function AT(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.size,u=io.slice_util.parseSliceParams(a,i,o),s=(0,C.Z)(u,2),c=s[0],l=s[1];if(io.slice_util.assertParamsValid(a,c,l),0===io.util.sizeFromShape(l))return n.makeTensorInfo(l,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){var f=n.texData.get(a.dataId),h=cA(f.values,c,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,h)}var d=n.texData.get(a.dataId).isPacked,p=io.slice_util.isSliceContinous(a.shape,c,l);if(d||!p){var v=(0,io.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ET(l):new ST(l),g=[c];return n.runWebGLProgram(v,[a],a.dtype,g)}return n.uploadToGPU(a.dataId),function(e,t,n,r){var a=r.texData.get(e.dataId),i=r.makeTensorInfo(n,e.dtype),o=r.texData.get(i.dataId);Object.assign(o,a),o.refCount=1,o.shape=n,o.dtype=e.dtype;var u=io.slice_util.computeFlatOffset(t,io.util.computeStrides(e.shape));a.slice&&(u+=a.slice.flatOffset),o.slice={flatOffset:u,origDataId:a.slice&&a.slice.origDataId||e.dataId};var s=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,s+1),i}(a,c,l,n)}var NT={kernelName:io.Slice,backendName:"webgl",kernelFunc:AT},TT={kernelName:io.BatchToSpaceND,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;io.util.assert(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var u=i.reduce((function(e,t){return e*t})),s=io.backend_util.getReshaped(a.shape,i,u),c=io.backend_util.getPermuted(s.length,i.length),l=io.backend_util.getReshapedPermuted(a.shape,i,u),f=io.backend_util.getSliceBeginCoords(o,i.length),h=io.backend_util.getSliceSize(l,o,i.length),d=[],p=wN({inputs:{x:a},backend:n,attrs:{shape:s}}),v=DN({inputs:{x:p},backend:n,attrs:{perm:c}}),g=wN({inputs:{x:v},backend:n,attrs:{shape:l}}),m=AT({inputs:{x:g},backend:n,attrs:{begin:f,size:h}});return d.push(p),d.push(v),d.push(g),d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}};var MT={kernelName:io.Bincount,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,u=n.readSync(a.dataId),s=n.readSync(i.dataId),c=ME(u,s,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}};var DT={kernelName:io.BitwiseAnd,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.a,i=n.b,o=(0,io.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS"),u=(0,io.env)().getNumber("WEBGL_VERSION");if(r.shouldExecuteOnCPU([a,i])||1===u){var s=r.texData.get(a.dataId).values,c=r.texData.get(i.dataId).values,l=FE(a.shape,i.shape,s,c,a.dtype),f=(0,C.Z)(l,2),h=f[0],d=f[1],p=r.makeTensorInfo(d,a.dtype);return r.texData.get(p.dataId).values=h,p}return t=o?new eN("\n  int r = int(a.r) & int(b.r);\n  int g = int(a.g) & int(b.g);\n  int rb = int(a.b) & int(b.b);\n  int ra = int(a.a) & int(b.a);\n  return vec4(r, g, rb, ra);\n",a.shape,i.shape,!1):new QA("\n  return float(int(a.r) & int(b.r));\n",a.shape,i.shape),r.runWebGLProgram(t,[a,i],a.dtype)}};var FT={kernelName:io.BroadcastArgs,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.readSync(r.dataId),o=n.readSync(a.dataId),u=io.backend_util.assertAndGetBroadcastShape(Array.from(i),Array.from(o));return n.makeTensorInfo([u.length],"int32",Int32Array.from(u))}},IT=hN({opSnippet:"return float(a != b);",cpuKernelImpl:JE,dtype:"bool"}),OT={kernelName:io.NotEqual,backendName:"webgl",kernelFunc:IT};function RT(e){var t=e.inputs,n=e.backend,r=t.input;return tN({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var ZT={kernelName:io.Real,backendName:"webgl",kernelFunc:RT};var BT={kernelName:io.Cast,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=t.attrs,i=n.x,o=a.dtype;if("complex64"===o){if("complex64"===i.dtype)return tN({inputs:{x:i},backend:r});var u=io.zeros(i.shape),s=e({inputs:{x:i},backend:r,attrs:{dtype:"float32"}}),c=rN({inputs:{real:s,imag:u},backend:r});return u.dispose(),r.disposeIntermediateTensorInfo(s),c}if("complex64"===i.dtype){var l=RT({inputs:{input:i},backend:r}),f=e({inputs:{x:l},backend:r,attrs:{dtype:o}});return r.disposeIntermediateTensorInfo(l),f}if(!io.util.hasEncodingLoss(i.dtype,o)){var h=tN({inputs:{x:i},backend:r});return{dataId:h.dataId,shape:h.shape,dtype:o}}if(r.shouldExecuteOnCPU([i])){var d=r.texData.get(i.dataId).values,p=IE(d,i.shape,i.dtype,o),v=(0,C.Z)(p,3),g=v[0],m=v[1],y=v[2];return r.makeTensorInfo(g,m,y)}if("int32"===o)return function(e,t){var n=new FA(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,r);if("bool"===o){var b=r.makeTensorInfo([],"bool",io.util.getTypedArrayFromDType("bool",1)),x=IT({inputs:{a:i,b:b},backend:r});return r.disposeIntermediateTensorInfo(b),x}throw new Error("Error in Cast: failed to cast ".concat(i.dtype," to ").concat(o))}},zT="return ceil(x);",LT=fN({opSnippet:zT,packedOpSnippet:zT,cpuKernelImpl:OE}),PT={kernelName:io.Ceil,backendName:"webgl",kernelFunc:LT},jT=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "})),UT=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}));var WT={kernelName:io.ClipByValue,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.clipValueMin,u=a.clipValueMax;t=(0,io.env)().getBool("WEBGL_PACK_CLIP")?new UT(i.shape):new jT(i.shape);var s=[[o],[u]];return r.runWebGLProgram(t,[i],i.dtype,s)}},VT=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}));function qT(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var HT={kernelName:io.ComplexAbs,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),i=new VT(r.shape),o=[qT(r,a.complexTensorInfos.real),qT(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}},GT=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.outputShape=[],this.outputShape=io.backend_util.computeOutShape(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],i=1;i<n.length;i++){var o=n[i-1];a.push("else if (yC < ".concat(n[i],") ")+"setOutput(getT".concat(i,"(yR, yC-").concat(o,"));"))}var u=n.length,s=n[n.length-1];a.push("else setOutput(getT".concat(u,"(yR, yC-").concat(s,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")})),XT=(0,F.Z)((function e(t,n){(0,D.Z)(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=io.backend_util.computeOutShape(t,n);var r=this.outputShape,a=r.length,i=tE(a),o=CA("coords",a),u=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var s=new Array(t.length-1);s[0]=t[0][n];for(var c=1;c<s.length;c++)s[c]=s[c-1]+t[c][n];for(var l=u[n],f=u.slice(-2),h=u.join(),d="if (".concat(l," < ").concat(s[0],") {\n        return getChannel(\n            getT0(").concat(h,"), vec2(").concat(f.join(),"));\n        }"),p=1;p<s.length;p++){var v=s[p-1];d+="\n        if (".concat(l," < ").concat(s[p],"  && ").concat(l," >= ").concat(s[p-1],") {\n          return getChannel(\n            getT").concat(p,"(").concat(YT(u,l,v),"),\n            vec2(").concat(YT(f,l,v),"));\n        }")}var g=s.length,m=s[s.length-1];d+="\n        return getChannel(\n          getT".concat(g,"(").concat(YT(u,l,m),"),\n          vec2(").concat(YT(f,l,m),"));"),this.userCode="\n      float getValue(".concat(u.map((function(e){return"int "+e})),") {\n        ").concat(d,"\n      }\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(o,"), 0., 0., 0.);\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," + 1;\n        if (").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-2]," = ").concat(o[a-2]," + 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," - 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2]," &&\n            ").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(o,");\n        }\n        setOutput(result);\n      }\n    ")}));function YT(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e})).join()}function KT(e){var t=e.inputs,n=e.backend,r=t.input;return tN({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var $T={kernelName:io.Imag,backendName:"webgl",kernelFunc:KT};function QT(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return RT({inputs:{input:e},backend:n})})),i=e.map((function(e){return KT({inputs:{input:e},backend:n})})),o=QT(a,t,n),u=QT(i,t,n),s=rN({inputs:{real:o,imag:u},backend:n});return a.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),s}var c=n.shouldExecuteOnCPU(e);if("string"===r&&(c=!0),c){var l=e.map((function(e){var r=io.util.sizeFromShape(e.shape.slice(t));return wN({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),f=l.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),h=io.backend_util.computeOutShape(l.map((function(e){return e.shape})),1),d=1===l[0].shape[0],p=RE(f,h,r,d),v=io.backend_util.computeOutShape(e.map((function(e){return e.shape})),t),g=n.makeTensorInfo(v,r,p);return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}var m=e.filter((function(e){return io.util.sizeFromShape(e.shape)>0})),y=(0,io.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&m[0].shape.length>1;if(1===m.length){var b=y?new FA(e[0].shape,LA):new HA(e[0].shape,LA);return n.runWebGLProgram(b,e,r)}var x=(0,io.env)().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(m.length>x){for(var w=[],k=0;k<m.length;k+=x){var _=m.slice(k,k+x);w.push(QT(_,t,n))}for(var S=QT(w,t,n),C=0,E=w;C<E.length;C++){var A=E[C];n.disposeIntermediateTensorInfo(A)}return S}if(y){var N=new XT(m.map((function(e){return e.shape})),t);return n.runWebGLProgram(N,m,r)}var T=function(e,t,n){var r=io.backend_util.computeOutShape(e.map((function(e){return e.shape})),t);return{tensors2D:e.map((function(e){return wN({inputs:{x:e},attrs:{shape:[-1,io.util.sizeFromShape(e.shape.slice(t))]},backend:n})})),outShape:r}}(m,t,n),M=T.tensors2D,D=T.outShape,F=new GT(M.map((function(e){return e.shape}))),I=n.runWebGLProgram(F,M,r);M.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var O=wN({inputs:{x:I},attrs:{shape:D},backend:n});return n.disposeIntermediateTensorInfo(I),O}function JT(e){var t=e.inputs,n=e.backend,r=e.attrs.axis,a=io.util.parseAxisParam(r,t[0].shape)[0],i=t.map((function(e){return e.shape}));io.backend_util.assertParamsConsistent(i,a);var o=io.backend_util.computeOutShape(t.map((function(e){return e.shape})),a);if(0===io.util.sizeFromShape(o))return n.makeTensorInfo(o,t[0].dtype,[]);var u=t.filter((function(e){return io.util.sizeFromShape(e.shape)>0}));return 1===u.length?tN({inputs:{x:u[0]},backend:n}):QT(u,a,n)}var eM={kernelName:io.Concat,backendName:"webgl",kernelFunc:JT},tM=(0,F.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,D.Z)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,u=t.padInfo.left,s=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,f=t.dilationWidth,h=t.filterHeight,d=t.filterWidth,p=4*Math.floor(t.inChannels/4),v=t.inChannels%4,g="channelsLast"===t.dataFormat,m=g?1:2,y=g?2:3,b=g?3:1,x="",w="";r&&(x=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),w="result = activation(result);");var k=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(x,"\n\n      const ivec2 strides = ivec2(").concat(s,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(o,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(b,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(m,"], coords[").concat(y,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(h,"; wR++) {\n          int xR = xRCorner + wR * ").concat(l,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(d,"; wC++) {\n            int xC = xCCorner + wC * ").concat(f,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(g,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===v,") {\n\n              if (").concat(g,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(p,") *\n                    getW(wR, wC, ").concat(p,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(p,", xR, xC) *\n                    getW(wR, wC, ").concat(p,", d2);\n              }\n\n            } else if (").concat(2===v,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2)\n              );\n\n              if (").concat(g,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===v,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2),\n                getW(wR, wC, ").concat(p," + 2, d2)\n              );\n\n              if (").concat(g,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1),\n                  getX(batch, xR, xC, ").concat(p," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC),\n                  getX(batch, ").concat(p," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(k,"\n        ").concat(w,"\n        setOutput(result);\n      }\n    ")})),nM=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,u=t.strideWidth,s=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,f=t.filterDepth,h=t.filterHeight,d=t.filterWidth,p=4*Math.floor(t.inChannels/4),v=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(i,", ").concat(o,", ").concat(u,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(f,"; wF++) {\n          int xF = xFCorner + wF * ").concat(s,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(h,"; wR++) {\n            int xR = xRCorner + wR * ").concat(c,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(d,"; wC++) {\n              int xC = xCCorner + wC * ").concat(l,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===v,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(p,") *\n                  getW(wF, wR, wC, ").concat(p,", d2);\n              } else if (").concat(2===v,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===v,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1),\n                  getX(batch, xF, xR, xC, ").concat(p," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2),\n                  getW(wF, wR, wC, ").concat(p," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),rM=(0,F.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,D.Z)(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=lE(this.outputShape.length);for(var o=t.padInfo.left,u=t.strideWidth,s=t.dilationWidth,c=t.filterHeight,l=t.filterWidth,f=l,h="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;",d=0;d<l;d++)h+="\n           vec4 xTexelC".concat(2*d,";\n           int xTexelC").concat(2*d,"Ready;\n           vec4 xTexelC").concat(2*d+1,";\n           int xTexelC").concat(2*d+1,"Ready;\n           vec4 xC").concat(d,";");h+="\n     for (int r = 0; r < ".concat(c,"; r++) {\n      for (int d1 = 0; d1 < ").concat(t.inChannels,"; d1 += 2) {\n       ");for(var p=0;p<l;p++)h+="\n           xTexelC".concat(2*p," = vec4(0.0);\n           xTexelC").concat(2*p,"Ready = 0;\n           xTexelC").concat(2*p+1," = vec4(0.0);\n           xTexelC").concat(2*p+1,"Ready = 0;\n           xC").concat(p," = vec4(0.0);");h+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(var v=0;v<(f+1)/2;v++){var g=2*v;if(h+="\n           xC = xCCorner + ".concat(g*s,";\n           "),1===u){if(g<l&&(o%2===1?(h+="\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                   xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(g,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g,"Ready = 1;\n                 }\n               "),h+=1===s&&g>0?"\n                 xC".concat(g," = vec4(xTexelC").concat(g-2,".zw, xTexelC").concat(g,".xy);\n                 "):"\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC".concat(g," = vec4(previous.zw, xTexelC").concat(g,".xy);\n                   } else {\n                     xC").concat(g," = vec4(0.0, 0.0, xTexelC").concat(g,".xy);\n                   }\n                   ")):h+="\n                 if (xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                   xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(g,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g,"Ready = 1;\n                 }\n\n                 xC").concat(g," = xTexelC").concat(g,";\n                 "),g+1<l)){var m=o%2===0?io.util.nearestLargerEven(s):s;s%2===0&&o%2===1||s%2!==0&&o%2!==1?(h+="\n                   xCOffset = xC + imod(pads[1], 2) + ".concat(m,";\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                     xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC").concat(g+1,".zw = vec2(0.0);\n                     }\n                     xTexelC").concat(g+1,"Ready = 1;\n                   }\n                   "),h+=s>1?"\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC".concat(g+1," = vec4(previous.zw, xTexelC").concat(g+1,".xy);\n                     } else {\n                      xC").concat(g+1," = vec4(0.0, 0.0, xTexelC").concat(g+1,".xy);\n                     }\n                     "):"\n                     xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".xy);\n                     ")):h+=1===m?"\n                     xC".concat(g+1," = xTexelC").concat(g,";\n                     "):"\n                     xCOffset = xC + ".concat(m,";\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                       xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC").concat(g+1,".zw = vec2(0.0);\n                       }\n                       xTexelC").concat(g+1,"Ready = 1;\n                     }\n\n                     xC").concat(g+1," = xTexelC").concat(g+1,";\n                     ")}}else g<l&&(o%2===1?(h+="\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                   xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(g,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g,"Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                   xTexelC").concat(g+1," = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC").concat(g+1,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g+1,"Ready = 1;\n                 }\n\n                 xC").concat(g," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n               "),g+1<l&&(h+="\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC".concat(g+1," = vec4(xTexelC").concat(g+1,".xy, final.xy);\n                 "))):(h+="\n                 if(xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                   xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(g,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g,"Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                   xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(g+1,".zw = vec2(0.);\n                   }\n                   xTexelC").concat(g+1,"Ready = 1;\n                 }\n\n                 xC").concat(g," = vec4(\n                   xTexelC").concat(g,".xy, xTexelC").concat(g+1,".xy);\n               "),g+1<l&&(h+="\n                   xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n                 "))));g<l&&(h+="\n             wTexel = getW(r, ".concat(g,", d1, d2);\n             dotProd += xC").concat(g,".xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ").concat(t.inChannels,") {\n               dotProd += xC").concat(g,".yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           "),g+1<l&&(h+="\n               wTexel = getW(r, ".concat(g+1,", d1, d2);\n               dotProd += xC").concat(g+1,".xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ").concat(t.inChannels,") {\n                 dotProd += xC").concat(g+1,".yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             ")))}h+="\n     }\n   ",h+="\n     }\n   ",h+="\n     }\n   ";var y="",b="";r&&(y=a?"vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ".concat(r,"\n         }"):i?"vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ".concat(r,"\n         }"):"vec4 activation(vec4 x) {\n           ".concat(r,"\n         }"),b="result = activation(result);");var x=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n       ".concat(y,"\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ").concat(h,"\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ").concat(x,"\n         ").concat(b,"\n         setOutput(result);\n       }\n     ")})),aM=(0,F.Z)((function e(t,n){(0,D.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=lE(this.outputShape.length);for(var r=n.dataFormat,a=MC(),i="channelsLast"===r,o=i?1:2,u=i?2:3,s=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(t[2]," && pos < ").concat(t[1],") {"),c="",l=0;l<=1;l++)for(var f=0;f<=1;f++)c+="\n          blockIndex = rc.z + ".concat(f,";\n          pos = rc.y + ").concat(l,";\n\n          ").concat(s,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(o,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(u,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(i,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*l+f,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*l+f,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(c,"\n\n        ").concat(a.output," = result;\n      }\n    ")}));function iM(e,t){var n=e.length;return n>=3?[].concat((0,M.Z)(e.slice(0,-3)),t?[e[n-3]*e[n-2],e[n-1]]:[e[n-3],e[n-2]*e[n-1]]):!t&&1===n&&e[0]>1?[e[0],1]:null}function oM(e){var t,n=e.x,r=e.filter,a=e.convInfo,i=e.backend,o=e.bias,u=void 0===o?null:o,s=e.preluActivationWeights,c=void 0===s?null:s,l=e.leakyreluAlpha,f=void 0===l?0:l,h=e.activation,d=void 0===h?null:h,p=n.shape,v=i.texData.get(n.dataId),g=a.inChannels,m=p[0]*p[1]*p[2],y=a.outChannels,b="channelsLast"===a.dataFormat,x=[];if(null!=c){var w=iM(c.shape,b);null!=w&&(c=wN({inputs:{x:c},backend:i,attrs:{shape:w}}),x.push(c))}if(null!=u){var k=iM(u.shape,b);null!=k&&(u=wN({inputs:{x:u},backend:i,attrs:{shape:k}}),x.push(u))}if(!((1===m||1===y)&&g>1e3)&&v.isPacked&&b&&null!=v.texture&&p[2]%2!==0&&io.util.arraysEqual(v.shape.slice(-3),p.slice(-3))){var _=p[0]*p[1]*(p[2]+1),S={dataId:n.dataId,shape:[1,_,a.inChannels],dtype:n.dtype},C=v.shape;v.shape=v.shape.slice(),v.shape[v.shape.length-2]++,io.util.assert(_C(v.shape,S.shape),(function(){return"packed reshape ".concat(v.shape," to ").concat(S.shape," isn't free")}));var E=wN({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}});x.push(E);var A=IN({a:S,b:E,backend:i,transposeA:!1,transposeB:false,bias:u,activation:d,preluActivationWeights:c,leakyreluAlpha:f}),N=i.texData.get(A.dataId);io.util.assert(N.isPacked,(function(){return"batchMatMul result is expected to be packed"})),v.shape=C,N.shape=a.outShape,(t=tN({inputs:{x:A},backend:i})).shape=a.outShape,x.push(A)}else{var T=a.outHeight*a.outWidth,M=wN({inputs:{x:n},backend:i,attrs:{shape:b?[a.batchSize,T,a.inChannels]:[a.batchSize,a.inChannels,T]}}),D=wN({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}}),F=IN({a:b?M:D,b:b?D:M,transposeA:!b,transposeB:false,backend:i,bias:u,activation:d,preluActivationWeights:c,leakyreluAlpha:f});t=wN({inputs:{x:F},backend:i,attrs:{shape:a.outShape}}),x.push(M),x.push(D),x.push(F)}for(var I=0,O=x;I<O.length;I++){var R=O[I];i.disposeIntermediateTensorInfo(R)}return t}function uM(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,i=e.bias,o=void 0===i?null:i,u=e.preluActivationWeights,s=void 0===u?null:u,c=e.leakyreluAlpha,l=void 0===c?0:c,f=e.activation,h=void 0===f?null:f,d=r.filterWidth,p=r.filterHeight,v=r.inChannels,g=r.outWidth,m=r.outHeight,y="channelsLast"===r.dataFormat,b=d*p*v,x=m*g,w=[r.batchSize,b,x],k=[];if(null!=s){var _=iM(s.shape,y);null!=_&&(s=wN({inputs:{x:s},backend:a,attrs:{shape:_}}),k.push(s))}if(null!=o){var S=iM(o.shape,y);null!=S&&(o=wN({inputs:{x:o},backend:a,attrs:{shape:S}}),k.push(o))}var C=wN({inputs:{x:n},backend:a,attrs:{shape:[1,b,io.util.sizeFromShape(n.shape)/b]}});k.push(C);var E=new aM(w,r),A=[t.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],N=a.runWebGLProgram(E,[t],"float32",A),T=wN({inputs:{x:N},backend:a,attrs:{shape:w}});k.push(N),k.push(T);var M=null!=o,D=null!=s,F="leakyrelu"===h,I=h?dN(h,!0):null,O=new pN(y?T.shape:C.shape,y?C.shape:T.shape,y?[r.batchSize,x,r.outChannels]:[r.batchSize,r.outChannels,x],!0,!1,M,I,D,F),R=y?[T,C]:[C,T];if(o&&R.push(o),D&&R.push(s),F){var Z=a.makeTensorInfo([],"float32",io.util.createScalarValue(l,"float32"));R.push(Z),k.push(Z)}var B=a.runWebGLProgram(O,R,"float32"),z=wN({inputs:{x:B},backend:a,attrs:{shape:r.outShape}});k.push(B);for(var L=0,P=k;L<P.length;L++){var j=P[L];a.disposeIntermediateTensorInfo(j)}return z}var sM={kernelName:io.Conv2D,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,u=a.strides,s=a.pad,c=a.dataFormat,l=a.dilations,f=a.dimRoundingMode,h=io.backend_util.convertConv2DDataFormat(c),d=io.backend_util.computeConv2DInfo(i.shape,o.shape,u,l,s,f,!1,h);if(1!==d.filterHeight||1!==d.filterWidth||1!==d.dilationHeight||1!==d.dilationWidth||1!==d.strideHeight||1!==d.strideWidth||"SAME"!==d.padInfo.type&&"VALID"!==d.padInfo.type)if(d.strideWidth<=2&&"channelsLast"===h&&(0,io.env)().getBool("WEBGL_EXP_CONV")){var p=new rM(d),v=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];t=r.runWebGLProgram(p,[i,o],"float32",v)}else if((0,io.env)().getBool("WEBGL_CONV_IM2COL"))t=uM({x:i,filter:o,convInfo:d,backend:r});else{var g=new tM(d);t=r.runWebGLProgram(g,[i,o],"float32")}else t=oM({x:i,filter:o,convInfo:d,backend:r});var m=wN({inputs:{x:t},backend:r,attrs:{shape:d.outShape}});return r.disposeIntermediateTensorInfo(t),m}},cM=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              ").concat(o?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);","\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),lM=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o="channelsLast"===t.dataFormat,u=n-1-t.padInfo.top,s=r-1-t.padInfo.left,c=o?1:2,l=o?2:3,f=o?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(u,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(f,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(c,"], coords[").concat(l,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(o,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),fM=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,u=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(i,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(o,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(u,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),hM=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,u=t.strideWidth,s=n-1-t.padInfo.front,c=r-1-t.padInfo.top,l=a-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(s,", ").concat(c,", ").concat(l,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(i,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(u,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var dM={kernelName:io.Conv2DBackpropFilter,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,u=r.pad,s=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape,f=io.backend_util.convertConv2DDataFormat(s),h=io.backend_util.computeConv2DInfo(a.shape,l,o,1,u,c,!1,f),d=new cM(h);return n.runWebGLProgram(d,[a,i],"float32")}},pM=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=t.inShape,this.enableShapeUniforms=lE(this.outputShape.length);var n=t.filterHeight,r=t.filterWidth,a=n-1-t.padInfo.top,i=r-1-t.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2(".concat(a,", ").concat(i,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ").concat(t.outWidth,".0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ").concat(t.outWidth,".0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    ")}));var vM={kernelName:io.Conv2DBackpropInput,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,u=r.strides,s=r.pad,c=r.dataFormat,l=r.dimRoundingMode,f=io.backend_util.convertConv2DDataFormat(c),h=io.backend_util.computeConv2DInfo(o,i.shape,u,1,s,l,!1,f);if((0,io.env)().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&"channelsLast"===f){var d=[[h.strideHeight,h.strideWidth]],p=new pM(h);return n.runWebGLProgram(p,[a,i],"float32",d)}var v=new lM(h);return n.runWebGLProgram(v,[a,i],"float32")}};var gM={kernelName:io.Conv3D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,u=r.pad,s=r.dilations,c=io.backend_util.computeConv3DInfo(a.shape,i.shape,o,s,u),l=new nM(c);return n.runWebGLProgram(l,[a,i],"float32")}};var mM={kernelName:io.Conv3DBackpropFilterV2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,u=r.pad,s=r.filterShape,c=io.backend_util.computeConv3DInfo(a.shape,s,o,1,u),l=new fM(c);return n.runWebGLProgram(l,[a,i],"float32")}};var yM,bM={kernelName:io.Conv3DBackpropInputV2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,u=r.strides,s=r.inputShape,c=io.backend_util.computeConv3DInfo(s,i.shape,u,1,o),l=new hM(c);return n.runWebGLProgram(l,[a,i],"float32")}},xM=fN({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n",packedOpSnippet:"\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(JA,"\n  return result;\n")}),wM={kernelName:io.Cos,backendName:"webgl",kernelFunc:xM},kM=fN({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),_M={kernelName:io.Cosh,backendName:"webgl",kernelFunc:kM},SM=(0,F.Z)((function e(t,n,r,a,i){(0,D.Z)(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=(0,C.Z)(t,4),u=o[0],s=o[1],c=o[2],l=o[3],f=(0,C.Z)(n,1)[0],h=(0,C.Z)(r,2),d=h[0],p=h[1];this.outputShape=[f,d,p,l];var v="bilinear"===a?1:0,g="".concat(s-1,".0"),m="".concat(c-1,".0"),y=d>1?["".concat((s-1)/(d-1)),"(y2-y1) * height_ratio","y1*".concat(g," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(g)],b=(0,C.Z)(y,3),x=b[0],w=b[1],k=b[2],_=p>1?["".concat((c-1)/(p-1)),"(x2-x1) * width_ratio","x1*".concat(m," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(m)],S=(0,C.Z)(_,3),E=S[0],A=S[1],N=S[2];this.userCode="\n      const float height_ratio = float(".concat(x,");\n      const float width_ratio = float(").concat(E,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(u,") {\n          return;\n        }\n\n        float height_scale = ").concat(w,";\n        float width_scale = ").concat(A,";\n\n        float in_y = ").concat(k,";\n        if( in_y < 0.0 || in_y > ").concat(g," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n        float in_x = ").concat(N,";\n        if( in_x < 0.0 || in_x > ").concat(m," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(v," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")})),CM={kernelName:io.CropAndResize,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,u=r.cropSize,s=r.method,c=r.extrapolationValue,l=new SM(a.shape,i.shape,u,s,c);return n.runWebGLProgram(l,[a,i,o],"float32")}};!function(e){e.Prod="*",e.Sum="+"}(yM||(yM={}));var EM=(0,F.Z)((function e(t,n,r,a){(0,D.Z)(this,e),this.op=t,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];var i=this.outputShape.length,o=this.op===yM.Prod?"1.0":"0.0",u=r?o:"getX(".concat(AM(i,"coords",this.op),")"),s=this.outputShape[this.outputShape.length-1],c="",l="";r?(c=a?"end != ".concat(s-1):"end != 0",l=a?"end + 1":"end - 1"):(c=a?"end + pow2 < ".concat(s):"end >= pow2",l=a?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(tE(i)," coords = getOutputCoords();\n        int end = ").concat(NM(i,"coords",this.op),";\n        float val = ").concat(u,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(c,") {\n          int idx = ").concat(l,";\n          ").concat(NM(i,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(AM(i,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}));function AM(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function NM(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function TM(e,t,n,r,a,i){var o=t.shape.length,u=io.backend_util.getAxesPermutation([r],o),s=t;null!=u&&(s=DN({inputs:{x:t},backend:n,attrs:{perm:u}}));var c=io.backend_util.getInnerMostAxes(1,o)[0];if(c!==o-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," ")+"but got axis=".concat(r));for(var l=s.shape[c],f=tN({inputs:{x:s},backend:n}),h=0;h<=Math.ceil(Math.log2(l))-1;h++){var d=new EM(e,s.shape,!1,i),p=[[h]],v=f;f=n.runWebGLProgram(d,[f],f.dtype,p),n.disposeIntermediateTensorInfo(v)}if(a){var g=new EM(e,s.shape,a,i),m=f;f=n.runWebGLProgram(g,[f],f.dtype),n.disposeIntermediateTensorInfo(m)}if(null!=u){var y=DN({inputs:{x:f},backend:n,attrs:{perm:io.backend_util.getUndoAxesPermutation(u)}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(s),y}return f}var MM={kernelName:io.Cumprod,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,u=r.reverse;return TM(yM.Prod,a,n,i,o,u)}};var DM={kernelName:io.Cumsum,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,u=r.reverse;return TM(yM.Sum,a,n,i,o,u)}};var FM={kernelName:io.DenseBincount,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,u=r.binaryOutput;if(1===a.shape.length){var s=n.readSync(a.dataId),c=n.readSync(i.dataId),l=ME(s,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,l)}if(2===a.shape.length){var f=n.bufferSync(a),h=n.bufferSync(i),d=DE(f,h,o,u);return n.makeTensorInfo(d.shape,i.dtype,d.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}},IM=function(){function e(t,n,r){(0,D.Z)(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return(0,F.Z)(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}();var OM={kernelName:io.DepthToSpace,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat,u=a.shape[0],s=("NHWC"===o?a.shape[1]:a.shape[2])*i,c=("NHWC"===o?a.shape[2]:a.shape[3])*i,l=("NHWC"===o?a.shape[3]:a.shape[1])/(i*i),f=new IM("NHWC"===o?[u,s,c,l]:[u,l,s,c],i,o);return n.runWebGLProgram(f,[a],a.dtype)}},RM=(0,F.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,D.Z)(this,e),this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=lE(this.outputShape.length);var o=t.filterHeight,u=t.filterWidth,s=t.outChannels/t.inChannels,c="",l="";r&&(c=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),l="result = activation(result);");var f=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(c,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(s,";\n        int q = d2 - d1 * ").concat(s,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(o,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(u,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(f,"\n        ").concat(l,"\n        setOutput(result);\n      }\n    ")})),ZM=(0,F.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,D.Z)(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=lE(this.outputShape.length);for(var o=t.outChannels/t.inChannels,u=t.padInfo.left,s=t.strideWidth,c=t.dilationWidth,l=t.filterHeight,f=t.filterWidth,h=f,d="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;",p=0;p<f;p++)d+="\n          vec4 xTexelC".concat(2*p,";\n          int xTexelC").concat(2*p,"Ready;\n          vec4 xTexelC").concat(2*p+1,";\n          int xTexelC").concat(2*p+1,"Ready;\n          vec4 xC").concat(p,";");d+="\n    for (int r = 0; r < ".concat(l,"; r++) {\n      ");for(var v=0;v<f;v++)d+="\n          xTexelC".concat(2*v," = vec4(0.0);\n          xTexelC").concat(2*v,"Ready = 0;\n          xTexelC").concat(2*v+1," = vec4(0.0);\n          xTexelC").concat(2*v+1,"Ready = 0;\n          xC").concat(v," = vec4(0.0);");d+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(var g=0;g<(h+1)/2;g++){var m=2*g;if(d+="\n          xC = xCCorner + ".concat(m*c,";\n          "),1===s){if(m<f&&(u%2===1?(d+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                  xTexelC").concat(m," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(m,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(m,"Ready = 1;\n                }\n              "),d+=1===c&&m>0?"\n                xC".concat(m," = vec4(xTexelC").concat(m-2,".zw, xTexelC").concat(m,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(m," = vec4(previous.zw, xTexelC").concat(m,".xy);\n                  } else {\n                    xC").concat(m," = vec4(0.0, 0.0, xTexelC").concat(m,".xy);\n                  }\n                  ")):d+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                  xTexelC").concat(m," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(m,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(m,"Ready = 1;\n                }\n\n                xC").concat(m," = xTexelC").concat(m,";\n                "),m+1<f)){var y=u%2===0?io.util.nearestLargerEven(c):c;c%2===0&&u%2===1||c%2!==0&&u%2!==1?(d+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(y,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(m+1,"Ready == 0) {\n                    xTexelC").concat(m+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(m+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(m+1,"Ready = 1;\n                  }\n                  "),d+=c>1?"\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC".concat(m+1," = vec4(previous.zw, xTexelC").concat(m+1,".xy);\n                    } else {\n                     xC").concat(m+1," = vec4(0.0, 0.0, xTexelC").concat(m+1,".xy);\n                    }\n                    "):"\n                    xC".concat(m+1," = vec4(xTexelC").concat(m,".zw, xTexelC").concat(m+1,".xy);\n                    ")):d+=1===y?"\n                    xC".concat(m+1," = xTexelC").concat(m,";\n                    "):"\n                    xCOffset = xC + ".concat(y,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(m+1,"Ready == 0) {\n                      xTexelC").concat(m+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(m+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(m+1,"Ready = 1;\n                    }\n\n                    xC").concat(m+1," = xTexelC").concat(m+1,";\n                    ")}}else m<f&&(u%2===1?(d+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                  xTexelC").concat(m," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(m,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(m,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(m+1,"Ready == 0) {\n                  xTexelC").concat(m+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(m+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(m+1,"Ready = 1;\n                }\n\n                xC").concat(m," = vec4(xTexelC").concat(m,".zw, xTexelC").concat(m+1,".zw);\n              "),m+1<f&&(d+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(m+1," = vec4(xTexelC").concat(m+1,".xy, final.xy);\n                "))):(d+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                  xTexelC").concat(m," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(m,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(m,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(m+1,"Ready == 0) {\n                  xTexelC").concat(m+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(m+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(m+1,"Ready = 1;\n                }\n\n                xC").concat(m," = vec4(\n                  xTexelC").concat(m,".xy, xTexelC").concat(m+1,".xy);\n              "),m+1<f&&(d+="\n                  xC".concat(m+1," = vec4(xTexelC").concat(m,".zw, xTexelC").concat(m+1,".zw);\n                "))));m<f&&(d+="\n            wTexel = getW(r, ".concat(m,", d1, q);\n            dotProd += xC").concat(m," * vec4(wTexel.xz, wTexel.xz);\n          "),m+1<f&&(d+="\n              wTexel = getW(r, ".concat(m+1,", d1, q);\n              dotProd += xC").concat(m+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}d+="\n    }\n  ",d+="\n      }\n    ";var b="",x="";r&&(b=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),x="result = activation(result);");var w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(b,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(o,";\n        int q = d2 - d1 * ").concat(o,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(d,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(w,"\n        ").concat(x,"\n        setOutput(result);\n      }\n    ")}));var BM={kernelName:io.DepthwiseConv2dNative,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,u=r.pad,s=r.dilations,c=r.dimRoundingMode,l=s;null==l&&(l=[1,1]),io.util.assert(io.backend_util.eitherStridesOrDilationsAreOne(o,l),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(l,"'")}));var f,h=io.backend_util.computeConv2DInfo(a.shape,i.shape,o,l,u,c,!0);f=(0,io.env)().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels===1?new ZM(h):new RM(h);var d=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];return n.runWebGLProgram(f,[a,i],"float32",d)}},zM=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(o," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),LM=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=n-1-t.padInfo.top,u=r-1-t.padInfo.left,s=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(s,"; dm++) {\n              int d2 = d1 * ").concat(s," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var PM={kernelName:io.DepthwiseConv2dNativeBackpropFilter,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,u=r.dilations,s=r.pad,c=r.dimRoundingMode,l=r.filterShape,f=io.backend_util.computeConv2DInfo(a.shape,l,o,u,s,c,!0),h=new zM(f);return n.runWebGLProgram(h,[a,i],"float32")}};var jM={kernelName:io.DepthwiseConv2dNativeBackpropInput,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,u=r.dilations,s=r.pad,c=r.dimRoundingMode,l=r.inputShape,f=io.backend_util.computeConv2DInfo(l,i.shape,o,u,s,c,!0),h=new LM(f);return n.runWebGLProgram(h,[a,i],"float32")}},UM=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}));var WM={kernelName:io.Diag,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=[].concat((0,M.Z)(r.shape),(0,M.Z)(r.shape)),i=io.util.sizeFromShape(r.shape),o=wN({inputs:{x:r},backend:n,attrs:{shape:[i]}}),u=new UM(i),s=n.runWebGLProgram(u,[o],o.dtype),c=wN({inputs:{x:s},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),c}},VM=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,i=t.strideHeight,o=t.strideWidth,u=t.filterHeight,s=t.filterWidth,c=t.dilationHeight,l=t.dilationWidth,f=a.top,h=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(f,", ").concat(h,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(u,"; h++) {\n          int hIn = hBeg + h * ").concat(c,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(s,"; w++) {\n              int wIn = wBeg + w * ").concat(l,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}));var qM={kernelName:io.Dilation2D,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,u=a.strides,s=a.pad,c=a.dilations,l=io.backend_util.computeDilation2DInfo(i.shape,o.shape,u,s,"NHWC",c),f=new VM(l),h=wN({inputs:{x:t=r.runWebGLProgram(f,[i,o],"float32")},backend:r,attrs:{shape:l.outShape}});return r.disposeIntermediateTensorInfo(t),h}};var HM={kernelName:io.Einsum,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.equation,a=t,i=io.backend_util.decodeEinsumEquation(r,a.length),o=i.allDims,u=i.summedDims,s=i.idDims;io.backend_util.checkEinsumDimSizes(o.length,s,a);for(var c=io.backend_util.getEinsumComputePath(u,s),l=c.path,f=c.steps,h=f.length,d=null,p=o.length,v=[],g=0;g<h;++g){var m,y=(0,B.Z)(f[g]);try{for(y.s();!(m=y.n()).done;){var b=m.value,x=io.backend_util.getEinsumPermutation(p,s[b]),w=x.permutationIndices,k=x.expandDims,_=void 0;io.backend_util.isIdentityPermutation(w)?_=a[b]:(_=DN({inputs:{x:a[b]},backend:n,attrs:{perm:w}}),v.push(_));for(var S=_.shape.slice(),C=0;C<k.length;++C)S.splice(k[C],0,1);io.util.arraysEqual(_.shape,S)||(_=wN({inputs:{x:_},backend:n,attrs:{shape:S}}),v.push(_)),null===d?d=_:(d=bN({inputs:{a:_,b:d},backend:n}),v.push(d))}}catch(T){y.e(T)}finally{y.f()}g<h-1&&(l[g]>=0&&(d=TN({inputs:{x:d},backend:n,attrs:{axis:l[g]-(o.length-p),keepDims:!1}}),v.push(d)),p--)}for(var E=0,A=v;E<A.length;E++){var N=A[E];N!==d&&n.disposeIntermediateTensorInfo(N)}return d}},GM=fN({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),XM={kernelName:io.Elu,backendName:"webgl",kernelFunc:GM},YM={kernelName:io.EluGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,i=(0,io.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new eN("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new QA("return (b >= 0.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)}},KM=hN({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:ZE}),$M={kernelName:io.Equal,backendName:"webgl",kernelFunc:KM},QM=fN({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(io.backend_util.ERF_P,";\n  float a1 = ").concat(io.backend_util.ERF_A1,";\n  float a2 = ").concat(io.backend_util.ERF_A2,";\n  float a3 = ").concat(io.backend_util.ERF_A3,";\n  float a4 = ").concat(io.backend_util.ERF_A4,";\n  float a5 = ").concat(io.backend_util.ERF_A5,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),JM={kernelName:io.Erf,backendName:"webgl",kernelFunc:QM},eD=fN({opSnippet:"if (isnan(x)) return x;\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:BE,dtype:"float32"}),tD={kernelName:io.Exp,backendName:"webgl",kernelFunc:eD};function nD(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,i=t.input,o=i.shape.length,u=i.shape.slice(),s=a;return a<0&&(io.util.assert(-(o+1)<=a,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),s=o+a+1),u.splice(s,0,1),wN({inputs:{x:i},backend:r,attrs:{shape:u}})}var rD={kernelName:io.ExpandDims,backendName:"webgl",kernelFunc:nD},aD="return exp(x) - 1.0;",iD=fN({opSnippet:aD,packedOpSnippet:aD,cpuKernelImpl:zE}),oD={kernelName:io.Expm1,backendName:"webgl",kernelFunc:iD},uD=(0,F.Z)((function e(t,n,r){(0,D.Z)(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var i,o=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),u=r?"".concat(a,".0"):"1.0";if("real"===t)i="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));i="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(o,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(i,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(u,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}));function sD(e,t,n){var r=n.texData.get(e.dataId),a=io.util.sizeFromShape(e.shape),i=e.shape[e.shape.length-1],o=wN({inputs:{x:e},backend:n,attrs:{shape:[a/i,i]}}),u=o.shape,s=new uD("real",u,t),c=new uD("imag",u,t),l=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:u},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:u}],f=n.runWebGLProgram(s,l,"float32"),h=n.runWebGLProgram(c,l,"float32"),d=rN({inputs:{real:f,imag:h},backend:n});n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h);var p=wN({inputs:{x:d},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(d),p}var cD={kernelName:io.FFT,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return sD(t.input,!1,n)}},lD=(0,F.Z)((function e(t,n){(0,D.Z)(this,e),this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}));function fD(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype;if("string"===(i=i||io.util.inferDtype(a))){var o=io.util.getArrayFromDType(i,io.util.sizeFromShape(r));return o.fill(a),t.makeTensorInfo(r,i,o)}var u=new lD(r,a),s=[[a]];return t.runWebGLProgram(u,[],i,s)}var hD,dD={kernelName:io.Fill,backendName:"webgl",kernelFunc:fD},pD=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),vD={kernelName:io.FlipLeftRight,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,i=new pD(r.shape);return a.runWebGLProgram(i,[r],r.dtype)}},gD="return floor(x);",mD=fN({opSnippet:gD,packedOpSnippet:gD,cpuKernelImpl:LE}),yD={kernelName:io.Floor,backendName:"webgl",kernelFunc:mD},bD=hN({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),xD={kernelName:io.FloorDiv,backendName:"webgl",kernelFunc:bD},wD=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.variableNames=["A"];var n=MC(),r=(0,C.Z)(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(i,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")})),kD=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=MC(),r=(0,C.Z)(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(i,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),_D={kernelName:io.FromPixels,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,i=r.numChannels,o="undefined"!==typeof HTMLVideoElement&&a instanceof HTMLVideoElement,u="undefined"!==typeof HTMLImageElement&&a instanceof HTMLImageElement,s=o?[a.videoWidth,a.videoHeight]:[a.width,a.height],c=(0,C.Z)(s,2),l=c[0],f=c[1],h=[f,l],d=[f,l,i];if(u||o){var p=(0,io.env)().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=hD&&p===SD||(SD=p,hD=document.createElement("canvas").getContext("2d",{willReadFrequently:SD})),hD.canvas.width=l,hD.canvas.height=f,hD.drawImage(a,0,0,l,f),a=hD.canvas}var v=n.makeTensorInfo(h,"int32");n.texData.get(v.dataId).usage=GS.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(v.dataId),a);var g=(0,io.env)().getBool("WEBGL_PACK")?new kD(d):new wD(d),m=n.runWebGLProgram(g,[v],"int32");return n.disposeData(v.dataId),m}},SD=(0,io.env)().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");var CD={kernelName:io.FusedConv2D,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,u=n.bias,s=n.preluActivationWeights,c=a.strides,l=a.pad,f=a.dataFormat,h=a.dilations,d=a.dimRoundingMode,p=a.activation,v=a.leakyreluAlpha,g=io.backend_util.convertConv2DDataFormat(f),m=io.backend_util.computeConv2DInfo(i.shape,o.shape,c,h,l,d,!1,g),y=[],b=null!=u,x=null!=s,w="leakyrelu"===p,k=function(){var e=[i,o],t=function(e,t){if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){var n=wN({inputs:{x:e},backend:r,attrs:{shape:[e.shape[0],1,1]}});return y.push(n),n}return e};if(b&&e.push(t(u,f)),x&&e.push(t(s,f)),w){var n=r.makeTensorInfo([],"float32",io.util.createScalarValue(v,"float32"));e.push(n),y.push(n)}return e};if(1!==m.filterHeight||1!==m.filterWidth||1!==m.dilationHeight||1!==m.dilationWidth||1!==m.strideHeight||1!==m.strideWidth||"SAME"!==m.padInfo.type&&"VALID"!==m.padInfo.type)if(m.strideWidth<=2&&"channelsLast"===g&&(0,io.env)().getBool("WEBGL_EXP_CONV")){var _=p?dN(p,!0):null,S=new rM(m,b,_,x,w),C=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],E=k();t=r.runWebGLProgram(S,E,"float32",C)}else if((0,io.env)().getBool("WEBGL_CONV_IM2COL"))t=uM({x:i,filter:o,convInfo:m,backend:r,bias:u,activation:p,preluActivationWeights:s,leakyreluAlpha:v});else{var A=p?dN(p,!1):null,N=new tM(m,b,A,x,w),T=k();t=r.runWebGLProgram(N,T,"float32")}else t=oM({x:i,filter:o,convInfo:m,backend:r,bias:u,activation:p,preluActivationWeights:s,leakyreluAlpha:v});var M=wN({inputs:{x:t},backend:r,attrs:{shape:m.outShape}});return y.push(t),y.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),M}};var ED={kernelName:io.FusedDepthwiseConv2D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,u=t.preluActivationWeights,s=r.strides,c=r.pad,l=r.dilations,f=r.dimRoundingMode,h=r.activation,d=r.leakyreluAlpha,p=[],v=l;null==v&&(v=[1,1]),io.util.assert(io.backend_util.eitherStridesOrDilationsAreOne(s,v),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(s," and dilations '").concat(v,"'")}));var g,m=io.backend_util.computeConv2DInfo(a.shape,i.shape,s,v,c,f,!0),y=(0,io.env)().getBool("WEBGL_PACK_DEPTHWISECONV")&&m.strideWidth<=2&&m.outChannels/m.inChannels===1,b=h?dN(h,y):null,x=[a,i],w=null!=o,k=null!=u,_="leakyrelu"===h;if(w&&x.push(o),k&&x.push(u),_){var S=n.makeTensorInfo([],"float32",io.util.createScalarValue(d,"float32"));x.push(S),p.push(S)}g=y?new ZM(m,w,b,k,_):new RM(m,w,b,k,_);var C=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],E=n.runWebGLProgram(g,x,"float32",C);return p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),E}},AD=(0,F.Z)((function e(t,n,r,a){(0,D.Z)(this,e),this.sliceDim=t,this.strides=n,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=r;for(var i=tE(r.length),o="\n    int index;",u=0;u<this.sliceDim;u++)o+="\n          index = round(getIndices(coords[0], ".concat(u,"));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ").concat(this.paramsShape[u],";\n          flattenIndex += index * ").concat(this.strides[u],";");this.userCode="\n         void main() {\n          ".concat(i," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ").concat(o,"\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}));var ND={kernelName:io.GatherNd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=a.shape,o=i[i.length-1],u=io.util.sizeFromShape(r.shape),s=io.backend_util.prepareAndValidate(r,a),c=(0,C.Z)(s,4),l=c[0],f=c[1],h=c[2],d=c[3],p=wN({inputs:{x:a},backend:n,attrs:{shape:[f,o]}}),v=wN({inputs:{x:r},backend:n,attrs:{shape:[io.util.sizeFromShape(r.shape)/h,h]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){var g=n.readSync(a.dataId),m=n.bufferSync(r),y=PE(g,m,r.dtype,f,o,h,d,r.shape,u);return n.makeTensorInfo(l,r.dtype,y.values)}var b=new AD(o,d,[f,h],r.shape),x=n.runWebGLProgram(b,[v,p],v.dtype),w=wN({inputs:{x:x},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x),w}},TD=(0,F.Z)((function e(t,n){(0,D.Z)(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=tE(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("index"):r.push("".concat(n[a]));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(t[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(a,"));\n      }\n    ")}));function MD(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,u=r.batchDims,s=io.util.parseAxisParam(o,a.shape)[0];(0,io.env)().get("DEBUG")&&function(){for(var e=n.readSync(i.dataId),t=a.shape[s],r=function(n){var r=e[n];io.util.assert(r<=t-1&&r>=0,(function(){return"GatherV2: the index value ".concat(r," is not in [0, ").concat(t-1,"]")}))},o=0;o<e.length;++o)r(o)}();var c=io.backend_util.segment_util.collectGatherOpShapeInfo(a,i,s,u),l=io.util.sizeFromShape(i.shape),f=[],h=wN({inputs:{x:a},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),d=wN({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,l/c.batchSize]}});f.push(h),f.push(d);var p=[c.batchSize,c.outerSize,l/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([a,i])||"string"===a.dtype){var v=n.bufferSync(d),g=n.bufferSync(h),m=jE(g,v,p);return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(c.outputShape,m.dtype,m.values)}var y=new TD(h.shape,p),b=n.runWebGLProgram(y,[h,d],h.dtype);f.push(b);var x=wN({inputs:{x:b},backend:n,attrs:{shape:c.outputShape}});return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}var DD={kernelName:io.GatherV2,backendName:"webgl",kernelFunc:MD},FD=hN({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:UE,dtype:"bool"}),ID={kernelName:io.Greater,backendName:"webgl",kernelFunc:FD},OD=hN({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:WE}),RD={kernelName:io.GreaterEqual,backendName:"webgl",kernelFunc:OD};var ZD={kernelName:io.IFFT,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return sD(t.input,!0,n)}},BD=fN({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),zD={kernelName:io.IsFinite,backendName:"webgl",kernelFunc:BD},LD=fN({opSnippet:"return float(isinf(x));",dtype:"bool"}),PD={kernelName:io.IsInf,backendName:"webgl",kernelFunc:LD},jD=fN({opSnippet:"return float(isnan(x));",dtype:"bool"}),UD={kernelName:io.IsNan,backendName:"webgl",kernelFunc:jD},WD=hN({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:VE,dtype:"bool"}),VD={kernelName:io.Less,backendName:"webgl",kernelFunc:WD},qD=hN({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:qE,dtype:"bool"}),HD={kernelName:io.LessEqual,backendName:"webgl",kernelFunc:qD};var GD={kernelName:io.LinSpace,backendName:"webgl",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.num,o=HE(r,a,i);return t.makeTensorInfo([o.length],"float32",o)}},XD=fN({opSnippet:"if (isnan(x)) return x;\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:GE}),YD={kernelName:io.Log,backendName:"webgl",kernelFunc:XD},KD=fN({opSnippet:"if (isnan(x)) return x;\n  return log(1.0 + x);\n"}),$D={kernelName:io.Log1p,backendName:"webgl",kernelFunc:KD},QD=hN({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),JD={kernelName:io.LogicalAnd,backendName:"webgl",kernelFunc:QD},eF=fN({opSnippet:"return float(!(x >= 1.0));"}),tF={kernelName:io.LogicalNot,backendName:"webgl",kernelFunc:eF},nF=hN({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),rF={kernelName:io.LogicalOr,backendName:"webgl",kernelFunc:nF},aF=(0,F.Z)((function e(t,n,r,a,i){(0,D.Z)(this,e),this.variableNames=["x"],this.outputShape=[];var o,u=n,s=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(u,"; j <= ").concat(u,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(s,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(o,";\n        setOutput(val);\n      }\n    ")})),iF=(0,F.Z)((function e(t,n,r,a,i){(0,D.Z)(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,u=n,s=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(u,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(u,"; j <= ").concat(u,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(s,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(o,";\n        setOutput(result);\n      }\n    ")})),oF={kernelName:io.LRN,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,u=r.alpha,s=r.beta,c=(0,io.env)().getBool("WEBGL_PACK_NORMALIZATION")?new iF(a.shape,i,o,u,s):new aF(a.shape,i,o,u,s);return n.runWebGLProgram(c,[a],a.dtype)}},uF=(0,F.Z)((function e(t,n,r,a,i){(0,D.Z)(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(i,")\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(i,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")})),sF={kernelName:io.LRNGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,u=r.depthRadius,s=r.bias,c=r.alpha,l=r.beta,f=new uF(a.shape,u,s,c,l);return n.runWebGLProgram(f,[a,i,o],a.dtype)}};function cF(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,u=a.shape.length,s=io.util.parseAxisParam(i,a.shape),c=s,l=io.backend_util.getAxesPermutation(c,u),f=null!=l,h=n.shouldExecuteOnCPU([a]),d=a;if(f){if(h){for(var p=n.texData.get(d.dataId).values,v=new Array(u),g=0;g<v.length;g++)v[g]=a.shape[l[g]];var m=kA(p,a.shape,a.dtype,l,v);d=n.makeTensorInfo(v,a.dtype),n.texData.get(d.dataId).values=m}else d=NN(a,l,n);c=io.backend_util.getInnerMostAxes(c.length,u)}io.backend_util.assertAxesAreInnerMostDims("max",c,u);var y,b=io.backend_util.computeOutAndReduceShapes(d.shape,c),x=(0,C.Z)(b,2),w=x[0],k=x[1],_=w;if(o&&(_=io.backend_util.expandShapeToKeepDim(w,s)),h){p=n.texData.get(d.dataId).values;var S=XE(p,io.util.sizeFromShape(k),_,a.dtype);y=n.makeTensorInfo(_,a.dtype),n.texData.get(y.dataId).values=S}else y=function(e,t,n,r){var a=io.util.sizeFromShape(t),i=wN({inputs:{x:e},attrs:{shape:[io.util.sizeFromShape(e.shape)/a,a]},backend:r}),o=CN(i,e.dtype,"max",r),u=wN({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),u}(d,k,_,n);return f&&n.disposeIntermediateTensorInfo(d),y}var lF={kernelName:io.Max,backendName:"webgl",kernelFunc:cF},fF=hN({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:YE}),hF={kernelName:io.Maximum,backendName:"webgl",kernelFunc:fF};var dF={kernelName:io.MaxPool,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;NC(a,"maxPool");var i=r.filterSize,o=r.strides,u=r.pad,s=r.dimRoundingMode;io.util.assert(io.backend_util.eitherStridesOrDilationsAreOne(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c=io.backend_util.computePool2DInfo(a.shape,i,o,1,u,s);if(1===c.filterWidth&&1===c.filterHeight&&io.util.arraysEqual(c.inShape,c.outShape))return tN({inputs:{x:a},backend:n});var l=new hT(c,"max",!1);return n.runWebGLProgram(l,[a],a.dtype)}};var pF={kernelName:io.MaxPool3D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,u=r.pad,s=r.dataFormat,c=r.dimRoundingMode,l=io.backend_util.computePool3DInfo(a.shape,i,o,[1,1,1],u,c,s),f=new dT(l,"max",!1);return n.runWebGLProgram(f,[a],a.dtype)}},vF=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,u=i-1-t.padInfo.top,s=o-1-t.padInfo.left,c=i*o-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(u,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(i,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(c," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(o," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),gF=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,u=t.dilationWidth,s=t.effectiveFilterDepth,c=t.effectiveFilterHeight,l=t.effectiveFilterWidth,f=s-1-t.padInfo.front,h=c-1-t.padInfo.top,d=l-1-t.padInfo.left,p=s*c*l-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(f,", ").concat(h,", ").concat(d,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(s,";\n           wD += ").concat(i,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(o,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(l,";\n                wC += ").concat(u,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(p," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(c," * ").concat(l," +\n                  wR * ").concat(l," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var mF={kernelName:io.MaxPool3DGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,u=r.strides,s=r.pad,c=r.dimRoundingMode,l=io.backend_util.computePool3DInfo(i.shape,o,u,[1,1,1],s,c),f=new dT(l,"max",!0),h=n.runWebGLProgram(f,[i],i.dtype),d=new gF(l),p=n.runWebGLProgram(d,[a,h],i.dtype);return n.disposeIntermediateTensorInfo(h),p}};var yF={kernelName:io.MaxPoolGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;NC([i,t.output],"maxPoolGrad");var u=r.filterSize,s=r.strides,c=r.pad,l=r.dimRoundingMode,f=io.backend_util.computePool2DInfo(o.shape,u,s,1,c,l),h=new hT(f,"max",!0),d=n.runWebGLProgram(h,[o],o.dtype),p=new vF(f),v=n.runWebGLProgram(p,[a,d],o.dtype);return n.disposeIntermediateTensorInfo(d),v}};var bF={kernelName:io.MaxPoolWithArgmax,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,u=n.pad,s=n.includeBatchInIndex,c=r;io.util.assert(4===a.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,".")}));var l=[1,1];io.util.assert(io.backend_util.eitherStridesOrDilationsAreOne(o,l),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(l,"'")}));var f=io.backend_util.computePool2DInfo(a.shape,i,o,l,u),h=function(e,t,n,r){var a=new hT(n,"max",!1),i=r.runWebGLProgram(a,[e],"float32");return a=new hT(n,"max",!0,!0,t),[i,r.runWebGLProgram(a,[e],"float32")]}(a,s,f,c),d=(0,C.Z)(h,2);return[d[0],d[1]]}};var xF={kernelName:io.Mean,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.keepDims,o=n.axis,u=r,s=a.shape.length,c=io.util.parseAxisParam(o,a.shape),l=c,f=io.backend_util.getAxesPermutation(l,s),h=null!=f,d=u.shouldExecuteOnCPU([a]),p=[],v=a;if(h){if(d){for(var g=u.texData.get(v.dataId).values,m=new Array(s),y=0;y<m.length;y++)m[y]=a.shape[f[y]];var b=kA(g,a.shape,a.dtype,f,m);v=u.makeTensorInfo(m,a.dtype),u.texData.get(v.dataId).values=b}else v=NN(a,f,u);p.push(v),l=io.backend_util.getInnerMostAxes(l.length,s)}io.backend_util.assertAxesAreInnerMostDims("sum",l,s);var x=io.backend_util.computeOutAndReduceShapes(v.shape,l),w=(0,C.Z)(x,2),k=w[0],_=w[1],S=k;i&&(S=io.backend_util.expandShapeToKeepDim(k,c));for(var E=function(e,t,n,r){var a=io.util.sizeFromShape(t),i=wN({inputs:{x:e},attrs:{shape:[io.util.sizeFromShape(e.shape)/a,a]},backend:r}),o=CN(i,"float32","mean",r),u=wN({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),u}(v,_,S,u),A=0,N=p;A<N.length;A++){y=N[A];u.disposeIntermediateTensorInfo(y)}return E}};var wF={kernelName:io.Min,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,u=a.shape.length,s=io.util.parseAxisParam(i,a.shape),c=s,l=io.backend_util.getAxesPermutation(c,u),f=a;null!=l&&(f=DN({inputs:{x:a},backend:n,attrs:{perm:l}}),c=io.backend_util.getInnerMostAxes(c.length,a.shape.length)),io.backend_util.assertAxesAreInnerMostDims("min",c,u);var h,d=io.backend_util.computeOutAndReduceShapes(f.shape,c),p=(0,C.Z)(d,2),v=p[0],g=p[1],m=wN({inputs:{x:f},backend:n,attrs:{shape:[-1,io.util.sizeFromShape(g)]}}),y=CN(m,m.dtype,"min",n);return h=wN(o?{inputs:{x:y},backend:n,attrs:{shape:io.backend_util.expandShapeToKeepDim(v,s)}}:{inputs:{x:y},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),null!=l&&n.disposeIntermediateTensorInfo(f),h}},kF=hN({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:KE}),_F={kernelName:io.Minimum,backendName:"webgl",kernelFunc:kF},SF=(0,F.Z)((function e(t,n,r){(0,D.Z)(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=tE(a),o=n.map((function(e){return e[0]})).join(","),u=n.map((function(e,n){return e[0]+t[n]})).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),c="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(u,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(c,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(c,";\n          }\n        }\n        ").concat(i," coords = outC - start;\n        setOutput(getX(").concat(s,"));\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(u,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(c,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(c,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")})),CF=(0,F.Z)((function e(t,n,r){(0,D.Z)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=tE(a),o=n.map((function(e){return e[0]})).join(","),u=n.map((function(e,n){return e[0]+t[n]})).join(","),s=CA("rc",a),c=CA("source",a),l="".concat(s[a-1]," < ").concat(this.outputShape[a-1]),f=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),h="reflect"===r?0:1,d="";if(1===a){var p="\n        ".concat(i," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(h,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(h,";\n        }\n        source -= start;\n      ");d="\n        ".concat(i," rc = outputLoc;\n        ").concat(p,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n        ").concat(s[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(p,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n        }\n      ")}else{var v="\n        ".concat(i," source = rc;\n        ").concat(i," lt = ").concat(i,"(lessThan(source, start));\n        ").concat(i," gte = ").concat(i,"(greaterThanEqual(source, end));\n        ").concat(i," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(h,") +\n                gte * ((end - 1) * 2 - source + ").concat(h,");\n        source -= start;\n      ");d="\n        ".concat(i," rc = outputLoc;\n        ").concat(v,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n        ").concat(s[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(v,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n        }\n        rc = outputLoc;\n        ").concat(s[a-2]," += 1;\n        if(").concat(s[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(v,"\n          result[2] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n          ").concat(s[a-1]," += 1;\n          if(").concat(l,") {\n            ").concat(v,"\n            result[3] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(u,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(d,"\n        setOutput(result);\n      }\n    ")})),EF={kernelName:io.MirrorPad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode,u=(0,io.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new CF(a.shape,i,o):new SF(a.shape,i,o);return n.runWebGLProgram(u,[a],a.dtype)}},AF=hN({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n"}),NF={kernelName:io.Mod,backendName:"webgl",kernelFunc:AF},TF=(0,F.Z)((function e(t,n,r){(0,D.Z)(this,e),this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")})),MF=hN({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),DF={kernelName:io.RealDiv,backendName:"webgl",kernelFunc:MF},FF="return a - b;",IF=hN({opSnippet:FF,packedOpSnippet:FF,supportsComplex:!0,cpuKernelImpl:bA}),OF={kernelName:io.Sub,backendName:"webgl",kernelFunc:IF};function RF(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.dim,o=io.util.parseAxisParam([i],a.shape),u=cF({inputs:{x:a},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),s=io.backend_util.expandShapeToKeepDim(u.shape,o),c=wN({inputs:{x:u},backend:n,attrs:{shape:s}}),l=IF({inputs:{a:a,b:c},backend:n}),f=eD({inputs:{x:l},backend:n}),h=TN({inputs:{x:f},backend:n,attrs:{axis:o,keepDims:!1}}),d=wN({inputs:{x:h},backend:n,attrs:{shape:s}}),p=MF({inputs:{a:f,b:d},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),p}var ZF={kernelName:io.Softmax,backendName:"webgl",kernelFunc:RF};var BF={kernelName:io.Multinomial,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,u=r.normalized,s=u?a:RF({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),c=s.shape[0],l=s.shape[1],f=new TF(c,l,i),h=[[o]],d=n.runWebGLProgram(f,[s],"int32",h);return u||n.disposeIntermediateTensorInfo(s),d}};var zF={kernelName:io.Neg,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])){var i=r.texData.get(a.dataId),o=QE(i.values,a.shape,a.dtype),u=(0,C.Z)(o,2),s=u[0],c=u[1];return r.makeTensorInfo(c,a.dtype,s)}return t=(0,io.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new HA(a.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new FA(a.shape,"if (isnan(x)) return x;\n  return -x;\n"),r.runWebGLProgram(t,[a],a.dtype)}},LF=io.kernel_impls.nonMaxSuppressionV3Impl;var PF={kernelName:io.NonMaxSuppressionV3,backendName:"webgl",kernelFunc:function(e){io.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,u=r.iouThreshold,s=r.scoreThreshold,c=n.readSync(a.dataId),l=n.readSync(i.dataId),f=LF(c,l,o,u,s).selectedIndices;return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}},jF=io.kernel_impls.nonMaxSuppressionV4Impl;var UF={kernelName:io.NonMaxSuppressionV4,backendName:"webgl",kernelFunc:function(e){io.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,u=r.iouThreshold,s=r.scoreThreshold,c=r.padToMaxOutputSize,l=n.readSync(a.dataId),f=n.readSync(i.dataId),h=jF(l,f,o,u,s,c),d=h.selectedIndices,p=h.validOutputs;return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},WF=io.kernel_impls.nonMaxSuppressionV5Impl;var VF={kernelName:io.NonMaxSuppressionV5,backendName:"webgl",kernelFunc:function(e){io.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,u=r.iouThreshold,s=r.scoreThreshold,c=r.softNmsSigma,l=n.readSync(a.dataId),f=n.readSync(i.dataId),h=WF(l,f,o,u,s,c),d=h.selectedIndices,p=h.selectedScores;return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([p.length],"float32",new Float32Array(p))]}},qF=(0,F.Z)((function e(t,n,r,a){(0,D.Z)(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")})),HF={kernelName:io.OneHot,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.dtype,o=r.depth,u=r.onValue,s=r.offValue,c=io.util.sizeFromShape(a.shape),l=new qF(c,o,u,s),f=wN({inputs:{x:a},backend:n,attrs:{shape:[c]}}),h=n.runWebGLProgram(l,[f],i);n.disposeIntermediateTensorInfo(f);var d=wN({inputs:{x:h},backend:n,attrs:{shape:[].concat((0,M.Z)(a.shape),[o])}});return n.disposeIntermediateTensorInfo(h),d}};function GF(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=RT({inputs:{input:r},backend:n}),i=GF({inputs:{x:a},backend:n}),o=KT({inputs:{input:r},backend:n}),u=GF({inputs:{x:o},backend:n}),s=rN({inputs:{real:i,imag:u},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),s}return fD({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var XF={kernelName:io.ZerosLike,backendName:"webgl",kernelFunc:GF};var YF={kernelName:io.OnesLike,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var i=RT({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),u=KT({inputs:{input:a},backend:r}),s=GF({inputs:{x:u},backend:r}),c=rN({inputs:{real:o,imag:s},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(u),r.disposeIntermediateTensorInfo(s),c}return fD({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};var KF={kernelName:io.Pack,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return nD({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){io.util.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes"),io.util.assert(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],u=JT({inputs:t.map((function(e){var t=nD({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),u}},$F=(0,F.Z)((function e(t,n,r){(0,D.Z)(this,e),this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=tE(a),o=n.map((function(e){return e[0]})).join(","),u=n.map((function(e,n){return e[0]+t[n]})).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(u,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(i," coords = outC - start;\n          setOutput(getX(").concat(s,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(u,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")})),QF=(0,F.Z)((function e(t,n,r){(0,D.Z)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,i=tE(a),o=n.map((function(e){return e[0]})).join(","),u=n.map((function(e,n){return e[0]+t[n]})).join(","),s=CA("rc",a),c=CA("source",a),l="".concat(s[a-1]," < ").concat(this.outputShape[a-1]),f=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),h=["".concat(i," rc = outputLoc;"),"".concat(s[a-1]," += 1;\n       if(").concat(l,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(s[a-2]," += 1;\n       if(").concat(s[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(s[a-1]," += 1;\n         if(").concat(l,") {")],d=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="",v=0,g=1===a?2:4;v<g;v++)p+="\n        ".concat(h[v],"\n        if (").concat(d,") {\n          result[").concat(v,"] = float(value);\n        } else {\n          ").concat(i," source = rc - start;\n          result[").concat(v,"] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n        }\n      ");p+=1===a?"} ":"}}",this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(u,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")})),JF=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;if(0===io.util.sizeFromShape(a.shape)){var u=i.map((function(e,t){return e[0]+a.shape[t]+e[1]}));return fD({backend:n,attrs:{shape:u,value:o,dtype:a.dtype}})}var s=(0,io.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new QF(a.shape,i,o):new $F(a.shape,i,o),c=[[o]];return n.runWebGLProgram(s,[a],a.dtype,c)},eI={kernelName:io.PadV2,backendName:"webgl",kernelFunc:JF},tI=hN({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n"}),nI={kernelName:io.Pow,backendName:"webgl",kernelFunc:tI};var rI={kernelName:io.Prod,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,u=a.keepDims,s=i.shape.length,c=[],l=io.util.parseAxisParam(o,i.shape),f=l,h=io.backend_util.getAxesPermutation(f,s),d=i;if(null!=h&&(d=DN({inputs:{x:i},backend:r,attrs:{perm:h}}),f=io.backend_util.getInnerMostAxes(f.length,s),c.push(d)),io.backend_util.assertAxesAreInnerMostDims("prod",f,s),r.shouldExecuteOnCPU([d])){var p=r.texData.get(d.dataId).values,v=eA(d.shape,d.dtype,p,f),g=v.outVals,m=v.outShape,y=v.outDtype;t=r.makeTensorInfo(m,y,g)}else{var b=io.backend_util.computeOutAndReduceShapes(d.shape,f),x=(0,C.Z)(b,2),w=x[0],k=x[1],_=io.util.sizeFromShape(k),S=wN({inputs:{x:d},backend:r,attrs:{shape:[-1,_]}}),E=CN(S,(0,io.sumOutType)(i.dtype),"prod",r);t=wN({inputs:{x:E},backend:r,attrs:{shape:w}}),c.push(S),c.push(E)}if(u){c.push(t);var A=io.backend_util.expandShapeToKeepDim(t.shape,l);t=wN({inputs:{x:t},backend:r,attrs:{shape:A}})}return c.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}};var aI={kernelName:io.RaggedGather,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.paramsNestedSplits,i=t.paramsDenseValues,o=t.indices,u=r.outputRaggedRank,s=a.map((function(e){return n.readSync(e.dataId)})),c=a.map((function(e){return e.shape})),l=n.readSync(i.dataId),f=n.readSync(o.dataId),h=tA(s,c,l,i.shape,i.dtype,f,o.shape,u),d=(0,C.Z)(h,3),p=d[0],v=d[1],g=d[2],m=p.map((function(e){return n.makeTensorInfo([e.length],"int32",e)})),y=n.makeTensorInfo(g,i.dtype,v);return m.concat([y])}};var iI={kernelName:io.RaggedRange,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.starts,a=t.limits,i=t.deltas,o=n.readSync(r.dataId),u=n.readSync(a.dataId),s=n.readSync(i.dataId),c=nA(o,r.shape,r.dtype,u,a.shape,s,i.shape),l=(0,C.Z)(c,2),f=l[0],h=l[1];return[n.makeTensorInfo([f.length],"int32",f),n.makeTensorInfo([h.length],r.dtype,h)]}};var oI={kernelName:io.RaggedTensorToTensor,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.shape,i=t.values,o=t.defaultValue,u=t.rowPartitionTensors,s=r.rowPartitionTypes,c=n.readSync(a.dataId),l=n.readSync(i.dataId),f=n.readSync(o.dataId),h=u.map((function(e){return n.readSync(e.dataId)})),d=u.map((function(e){return e.shape})),p=rA(c,a.shape,l,i.shape,i.dtype,f,o.shape,h,d,s),v=(0,C.Z)(p,2),g=v[0],m=v[1];return n.makeTensorInfo(g,i.dtype,m)}},uI=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,u=aA(r,a,i,o);return t.makeTensorInfo([u.length],o,u)},sI={kernelName:io.Range,backendName:"webgl",kernelFunc:uI},cI=fN({opSnippet:"return 1.0 / x;"}),lI={kernelName:io.Reciprocal,backendName:"webgl",kernelFunc:cI},fI=fN({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),hI={kernelName:io.Relu,backendName:"webgl",kernelFunc:fI},dI=fN({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),pI={kernelName:io.Relu6,backendName:"webgl",kernelFunc:dI},vI=(0,F.Z)((function e(t,n,r,a,i){(0,D.Z)(this,e),this.variableNames=["A"],this.outputShape=[];var o=(0,C.Z)(t,4),u=o[0],s=o[1],c=o[2],l=o[3];this.outputShape=[u,n,r,l];var f,h=[a&&n>1?s-1:s,a&&r>1?c-1:c],d=[a&&n>1?n-1:n,a&&r>1?r-1:r];f=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(h[0]/d[0],",\n          ").concat(h[1]/d[1],");\n      const vec2 inputShapeRC = vec2(").concat(s,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")})),gI=(0,F.Z)((function e(t,n,r,a,i){(0,D.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=(0,C.Z)(t,4),u=o[0],s=o[1],c=o[2],l=o[3];this.outputShape=[u,n,r,l];var f,h=[a&&n>1?s-1:s,a&&r>1?c-1:c],d=[a&&n>1?n-1:n,a&&r>1?r-1:r];f=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(h[0]/d[0],",\n          ").concat(h[1]/d[1],",\n          ").concat(h[1]/d[1],");\n      const vec3 inputShapeRC = vec3(").concat(s,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}));var mI={kernelName:io.ResizeBilinear,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,u=r.size,s=(0,C.Z)(u,2),c=s[0],l=s[1],f=(0,io.env)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new gI(a.shape,c,l,i,o):new vI(a.shape,c,l,i,o);return n.runWebGLProgram(f,[a],"float32")}},yI=(0,F.Z)((function e(t,n,r){(0,D.Z)(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=(0,C.Z)(n,3),i=a[1],o=a[2],u=(0,C.Z)(t,3),s=u[1],c=u[2],l=[r&&s>1?i-1:i,r&&c>1?o-1:o],f=[r&&s>1?s-1:s,r&&c>1?c-1:c],h=l[0]/f[0],d=l[1]/f[1],p=1/h,v=1/d,g=2*Math.ceil(p)+2,m=2*Math.ceil(v)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(h,");\n        const float widthScale = float(").concat(d,");\n\n        const float invHeightScale = float(").concat(p,");\n        const float invWidthScale = float(").concat(v,");\n\n        const int winHeight = int(").concat(g,");\n        const int winWidth = int(").concat(m,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(s,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(i-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(o-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var bI={kernelName:io.ResizeBilinearGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,u=new yI(i.shape,a.shape,o);return n.runWebGLProgram(u,[i],i.dtype)}},xI=(0,F.Z)((function e(t,n,r,a,i){(0,D.Z)(this,e),this.variableNames=["A"],this.outputShape=[];var o=(0,C.Z)(t,4),u=o[0],s=o[1],c=o[2],l=o[3];this.outputShape=[u,n,r,l];var f,h=[a&&n>1?s-1:s,a&&r>1?c-1:c],d=[a&&n>1?n-1:n,a&&r>1?r-1:r],p=a?"0.5":"0.0";f=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(h[0]/d[0],",\n          ").concat(h[1]/d[1],");\n      const vec2 inputShapeRC = vec2(").concat(s,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(p,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")})),wI=(0,F.Z)((function e(t,n,r,a,i){(0,D.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=(0,C.Z)(t,4),u=o[0],s=o[1],c=o[2],l=o[3];this.outputShape=[u,n,r,l];var f,h=[a&&n>1?s-1:s,a&&r>1?c-1:c],d=[a&&n>1?n-1:n,a&&r>1?r-1:r],p=a?"0.5":"0.0";f=i?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(h[0]/d[0],",\n          ").concat(h[1]/d[1],",\n          ").concat(h[1]/d[1],");\n      const vec3 inputShapeRC = vec3(").concat(s,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(p,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}));var kI={kernelName:io.ResizeNearestNeighbor,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,u=r.size,s=(0,C.Z)(u,2),c=s[0],l=s[1],f=(0,io.env)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new wI(a.shape,c,l,i,o):new xI(a.shape,c,l,i,o);return n.runWebGLProgram(f,[a],a.dtype)}},_I=(0,F.Z)((function e(t,n,r){(0,D.Z)(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=(0,C.Z)(n,3),i=a[1],o=a[2],u=(0,C.Z)(t,3),s=u[1],c=u[2],l=[r&&s>1?i-1:i,r&&c>1?o-1:o],f=[r&&s>1?s-1:s,r&&c>1?c-1:c],h=l[0]/f[0],d=l[1]/f[1],p=1/h,v=1/d,g=2*Math.ceil(p)+2,m=2*Math.ceil(v)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(h,");\n        const float widthScale = float(").concat(d,");\n\n        const float invHeightScale = float(").concat(p,");\n        const float invWidthScale = float(").concat(v,");\n\n        const int winHeight = int(").concat(g,");\n        const int winWidth = int(").concat(m,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(s,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(l[0],") *\n                (float(dyR) / float(").concat(f[0],"));\n\n            float sourceFracCol =\n                float(").concat(l[1],") *\n                  (float(dyC) / float(").concat(f[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var SI={kernelName:io.ResizeNearestNeighborGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,u=new _I(i.shape,a.shape,o);return n.runWebGLProgram(u,[i],i.dtype)}},CI=(0,F.Z)((function e(t,n){(0,D.Z)(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),i=tE(r);this.userCode="\n      void main() {\n        ".concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")})),EI=(0,F.Z)((function e(t,n){(0,D.Z)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=CA("rc",r),i="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),o="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),u=tE(r);function s(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)})),a=r.join(","),i=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(i,"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(i,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(u," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return s(e)}(a.slice()),";\n          if(").concat(i,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",s(e)}(a.slice()),";\n          }\n          if(").concat(o,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",s(e)}(a.slice()),";\n            if(").concat(i,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",s(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}));var AI={kernelName:io.Reverse,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims,o=a.shape.length,u=io.util.parseAxisParam(i,a.shape);if(0===o)return tN({inputs:{x:a},backend:n});var s=(0,io.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new EI(a.shape,u):new CI(a.shape,u);return n.runWebGLProgram(s,[a],a.dtype)}},NI=(0,F.Z)((function e(t,n){(0,D.Z)(this,e),this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];var r=t[1],a=t[2];this.outputShape=t;var i="";i="number"===typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(i,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(r,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),TI={kernelName:io.RotateWithOffset,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,u=n.center,s=r,c=new NI(a.shape,o),l=io.backend_util.getImageCenter(u,a.shape[1],a.shape[2]),f=(0,C.Z)(l,2),h=[[f[0],f[1],Math.sin(i),Math.cos(i)]];return s.runWebGLProgram(c,[a],a.dtype,h)}},MI=fN({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),DI={kernelName:io.Round,backendName:"webgl",kernelFunc:MI},FI=fN({opSnippet:"return inversesqrt(x);",cpuKernelImpl:iA}),II={kernelName:io.Rsqrt,backendName:"webgl",kernelFunc:FI},OI=(0,F.Z)((function e(t,n,r,a,i,o){var u=arguments.length>7&&void 0!==arguments[7]&&arguments[7];(0,D.Z)(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=tE(i.length),c=tE(o.length),l="";1===r?l="i":2===r&&(l="i, j");var f="getIndices(".concat(l,")"),h="";1===a?h="i":2===a&&(h="i, coords[1]");var d="getUpdates(".concat(h,")"),p="";u&&(p="coords[0], coords[1]");var v="getDefaultValue(".concat(p,")"),g=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(i,");\n\n        void main() {\n          ").concat(c," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(f,");\n              flattenedIndex += index * ").concat(g,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(d,";\n              found = true;\n            }\n          }\n          setOutput(mix(").concat(v,", sum, float(found)));\n        }\n      ")})),RI=(0,F.Z)((function e(t,n,r,a,i,o){var u=arguments.length>7&&void 0!==arguments[7]&&arguments[7];(0,D.Z)(this,e),this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;var s=tE(i.length),c=tE(o.length),l="";1===r?l="i":2===r&&(l="i, j");var f="getIndices(".concat(l,")"),h="";1===a?h="i":2===a&&(h="i, coords[1]");var d="getUpdates(".concat(h,")"),p="";u&&(p="coords[0], coords[1]");var v="getDefaultValue(".concat(p,")"),g=n>1?"strides[j]":"strides",m=n>1?"strides[j + 1]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(i,");\n\n        void main() {\n          ").concat(c," coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ").concat(t,"; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ").concat(n,"; j+=2) {\n              ivec4 index = round(").concat(f,");\n              flattenedIndex += index.xz * ").concat(g,";\n              if (j + 1 < ").concat(n,") {\n                flattenedIndex += index.yw * ").concat(m,";\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = ").concat(d,";\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(").concat(v,", sum, found));\n        }\n      ")}));var ZI={kernelName:io.ScatterNd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,u=io.backend_util.calculateShapes(i,a,o),s=u.sliceRank,c=u.numUpdates,l=u.sliceSize,f=u.strides,h=u.outputSize,d=[h/l,l];if(0===h)return n.makeTensorInfo(o,a.dtype);var p,v=wN({inputs:{x:a},backend:n,attrs:{shape:[c,s]}}),g=wN({inputs:{x:i},backend:n,attrs:{shape:[c,l]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));p=(0,io.env)().getBool("WEBGL_PACK")?new RI(c,s,v.shape.length,g.shape.length,f,d):new OI(c,s,v.shape.length,g.shape.length,f,d);var y=n.runWebGLProgram(p,[g,v,m],g.dtype),b=wN({inputs:{x:y},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(m),b}},BI=(0,F.Z)((function e(t,n,r,a){(0,D.Z)(this,e),this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,r];var i="for (int i = 0; i < ".concat(Math.ceil(Math.log2(n+1)),"; ++i) { if (left >= right) break;"),o=2===(0,io.env)().getNumber("WEBGL_VERSION")?"while (left < right) {":i,u="left"===a?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(o,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(u," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}));var zI={kernelName:io.SearchSorted,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,i=t.values,o=r.side,u=new BI(a.shape[0],a.shape[1],i.shape[1],o),s=[[a.shape[1]]];return n.runWebGLProgram(u,[a,i],"int32",s)}},LI=(0,F.Z)((function e(t,n,r){var a,i;if((0,D.Z)(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)i="resRC",a="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],u=[],s=[],c=0;c<n.length;c++)s.push("".concat(o[c])),c<t&&u.push("".concat(o[c]));a=u.join(),i=s.join()}var l=tE(r);this.userCode="\n      void main() {\n        ".concat(l," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(i,"));\n        } else {\n          setOutput(getB(").concat(i,"));\n        }\n      }\n    ")}));var PI={kernelName:io.Select,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e,o=new LI(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(o,[r,a,i],(0,io.upcastType)(a.dtype,i.dtype))}},jI=fN({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(io.backend_util.SELU_SCALEALPHA,";\n  float scale = ").concat(io.backend_util.SELU_SCALE,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),UI={kernelName:io.Selu,backendName:"webgl",kernelFunc:jI},WI=fN({opSnippet:"if (isnan(x)) return x;\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:uA}),VI={kernelName:io.Sigmoid,backendName:"webgl",kernelFunc:WI},qI=fN({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),HI={kernelName:io.Sign,backendName:"webgl",kernelFunc:qI},GI=fN({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n",packedOpSnippet:"\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(JA,"\n  return result;\n")}),XI={kernelName:io.Sin,backendName:"webgl",kernelFunc:GI},YI=fN({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),KI={kernelName:io.Sinh,backendName:"webgl",kernelFunc:YI},$I=fN({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),QI={kernelName:io.Softplus,backendName:"webgl",kernelFunc:$I},JI={kernelName:io.SpaceToBatchND,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;io.util.assert(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var u=i.reduce((function(e,t){return e*t})),s=[[0,0]];s.push.apply(s,(0,M.Z)(o));for(var c=1+i.length;c<a.shape.length;++c)s.push([0,0]);var l=[],f=JF({inputs:{x:a},backend:n,attrs:{paddings:s,constantValue:0}}),h=io.backend_util.getReshaped(f.shape,i,u,!1),d=io.backend_util.getPermuted(h.length,i.length,!1),p=io.backend_util.getReshapedPermuted(f.shape,i,u,!1),v=wN({inputs:{x:f},backend:n,attrs:{shape:h}}),g=DN({inputs:{x:v},backend:n,attrs:{perm:d}}),m=wN({inputs:{x:g},backend:n,attrs:{shape:p}});return l.push(f),l.push(v),l.push(g),l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}};var eO={kernelName:io.SparseFillEmptyRows,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var u=n.readSync(r.dataId),s=n.readSync(a.dataId),c=n.readSync(i.dataId),l=n.readSync(o.dataId)[0],f=lA(u,r.shape,r.dtype,s,a.dtype,c,l),h=(0,C.Z)(f,5),d=h[0],p=h[1],v=h[2],g=h[3],m=h[4];return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],a.dtype,v),n.makeTensorInfo([g.length],"bool",new Uint8Array(g.map((function(e){return Number(e)})))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};var tO={kernelName:io.SparseReshape,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.readSync(a.dataId)),u=n.readSync(r.dataId),s=Array.from(n.readSync(i.dataId)),c=fA(u,r.shape,r.dtype,o,s),l=(0,C.Z)(c,3),f=l[0],h=l[1],d=l[2];return[n.makeTensorInfo(h,r.dtype,f),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}};var nO={kernelName:io.SparseSegmentMean,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(i.shape));var o=n.readSync(r.dataId),u=n.readSync(a.dataId),s=n.readSync(i.dataId),c=hA(o,r.shape,r.dtype,u,s,!0),l=(0,C.Z)(c,2),f=l[0],h=l[1];return n.makeTensorInfo(h,r.dtype,f)}};var rO={kernelName:io.SparseSegmentSum,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(i.shape));var o=n.readSync(r.dataId),u=n.readSync(a.dataId),s=n.readSync(i.dataId),c=hA(o,r.shape,r.dtype,u,s),l=(0,C.Z)(c,2),f=l[0],h=l[1];return n.makeTensorInfo(h,r.dtype,f)}};var aO={kernelName:io.SparseToDense,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,i=t.sparseValues,o=t.defaultValue,u=r.outputShape,s=io.backend_util.calculateShapes(i,a,u),c=s.sliceRank,l=s.numUpdates,f=s.sliceSize,h=s.strides,d=s.outputSize;if("string"===i.dtype){var p=n.bufferSync(a),v=n.bufferSync(i),g=io.util.decodeString(n.readSync(o.dataId)[0]),m=oA(p,v,u,d,f,l,c,h,g,false);return n.makeTensorInfo(u,m.dtype,m.values)}var y=new OI(l,c,a.shape.length,i.shape.length,h,[d,1],false),b=n.runWebGLProgram(y,[i,a,o],i.dtype),x=wN({inputs:{x:b},backend:n,attrs:{shape:u}});return n.disposeIntermediateTensorInfo(b),x}};var iO={kernelName:io.SplitV,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=r.axis,u=io.util.parseAxisParam(o,a.shape)[0],s=io.backend_util.prepareSplitSize(a,i,u),c=a.shape.length,l=new Array(c).fill(0),f=a.shape.slice();return s.map((function(e){var t=(0,M.Z)(f);t[u]=e;var r=AT({inputs:{x:a},backend:n,attrs:{begin:l,size:t}});return l[u]+=e,r}))}},oO="return sqrt(x);",uO=fN({opSnippet:oO,packedOpSnippet:oO,cpuKernelImpl:dA}),sO={kernelName:io.Sqrt,backendName:"webgl",kernelFunc:uO},cO=fN({opSnippet:"return x * x;"}),lO={kernelName:io.Square,backendName:"webgl",kernelFunc:cO},fO="return (a - b) * (a - b);",hO=hN({opSnippet:fO,packedOpSnippet:fO}),dO={kernelName:io.SquaredDifference,backendName:"webgl",kernelFunc:hO};var pO={kernelName:io.StaticRegexReplace,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;if("string"!==a.dtype)throw new Error("Input must be of datatype string");var i=n.readSync(a.dataId),o=io.backend_util.fromUint8ToStringArray(i),u=pA(o,"string",r);return n.makeTensorInfo(a.shape,"string",u)}};var vO={kernelName:io.Step,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=IA+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),o=new FA(a.shape,i);return r.runWebGLProgram(o,[a],a.dtype)}},gO=(0,F.Z)((function e(t,n,r){(0,D.Z)(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,i=tE(r.length),o=tE(r.length),u="";if(1===a)u="coords * strides + begin";else{var s=0;u=r.map((function(e,t){return s++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(s-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(i," begin = ").concat(i,"(").concat(t,");\n      ").concat(i," strides = ").concat(i,"(").concat(n,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(u,"));\n      }\n    ")}));var mO={kernelName:io.StridedSlice,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.begin,u=a.end,s=a.strides,c=a.beginMask,l=a.endMask,f=a.ellipsisMask,h=a.newAxisMask,d=a.shrinkAxisMask,p=io.slice_util.sliceInfo(i.shape,o,u,s,c,l,f,h,d),v=p.finalShapeSparse,g=p.finalShape,m=p.isIdentity,y=p.sliceDim0,b=p.isSimpleSlice,x=p.begin,w=p.end,k=p.strides;if(m)t=wN({inputs:{x:i},backend:r,attrs:{shape:g}});else if(y||b){io.util.assert(i.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(i.shape.length)}));var _=io.slice_util.computeOutShape(x,w,k),S=AT({inputs:{x:i},backend:r,attrs:{begin:x,size:_}});t=wN({inputs:{x:S},backend:r,attrs:{shape:g}}),r.disposeIntermediateTensorInfo(S)}else{if(r.shouldExecuteOnCPU([i])){var C=r.readSync(i.dataId),E=(0,io.buffer)(i.shape,i.dtype,C),A=vA(v,E,k,x);t=r.makeTensorInfo(g,i.dtype,A.values)}else{var N=new gO(x,k,v);t=r.runWebGLProgram(N,[i],i.dtype)}}var T=wN({inputs:{x:t},backend:r,attrs:{shape:g}});return r.disposeIntermediateTensorInfo(t),T}};var yO={kernelName:io.StringNGrams,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,u=r.rightPad,s=r.padWidth,c=r.preserveShortSequences,l=t.data,f=t.dataSplits,h=n.readSync(l.dataId),d=n.readSync(f.dataId),p=gA(h,d,a,i,o,u,s,c),v=(0,C.Z)(p,2),g=v[0],m=v[1];return[n.makeTensorInfo([g.length],"string",g),n.makeTensorInfo(f.shape,"int32",m)]}};var bO={kernelName:io.StringSplit,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=n.readSync(a.dataId),u=n.readSync(i.dataId)[0],s=mA(o,u,r),c=(0,C.Z)(s,3),l=c[0],f=c[1],h=c[2],d=f.length;return[n.makeTensorInfo([d,2],"int32",l),n.makeTensorInfo([d],"string",f),n.makeTensorInfo([2],"int32",new Int32Array(h))]}};var xO={kernelName:io.StringToHashBucketFast,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=n.readSync(a.dataId),o=yA(i,r);return n.makeTensorInfo(a.shape,"int32",o)}},wO=fN({opSnippet:"return tan(x);"}),kO={kernelName:io.Tan,backendName:"webgl",kernelFunc:wO},_O=fN({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),SO={kernelName:io.Tanh,backendName:"webgl",kernelFunc:_O};var CO={kernelName:io.TensorScatterUpdate,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.tensor,i=t.indices,o=t.updates;!function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(r);var u=io.backend_util.calculateShapes(o,i,a.shape),s=u.sliceRank,c=u.numUpdates,l=u.sliceSize,f=u.strides,h=u.outputSize,d=[h/l,l];if(0===h)return n.makeTensorInfo(a.shape,i.dtype);var p=wN({inputs:{x:i},backend:n,attrs:{shape:[c,s]}}),v=wN({inputs:{x:o},backend:n,attrs:{shape:[c,l]}}),g=wN({inputs:{x:a},backend:n,attrs:{shape:d}}),m=new OI(c,s,p.shape.length,v.shape.length,f,d,!1,!0),y=n.runWebGLProgram(m,[v,p,g],g.dtype),b=wN({inputs:{x:y},backend:n,attrs:{shape:a.shape}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),b}},EO=(0,F.Z)((function e(t,n){(0,D.Z)(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var i=tE(this.rank),o=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        setOutput(getA(").concat(o,"));\n      }\n    ")}));function AO(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;if("string"===a.dtype||a.shape.length>5){var o=n.readSync(a.dataId),u="string"===a.dtype?o.map((function(e){return io.util.decodeString(e)})):o,s=(0,io.buffer)(a.shape,a.dtype,u),c=xA(s,i);return n.makeTensorInfo(c.shape,c.dtype,c.values)}var l=new EO(a.shape,i);return n.runWebGLProgram(l,[a],a.dtype)}var NO={kernelName:io.Tile,backendName:"webgl",kernelFunc:AO},TO=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "})),MO=(0,F.Z)((function e(t){(0,D.Z)(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}));function DO(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function FO(e){for(var t=1;t<e;)t*=2;return t}var IO={kernelName:io.TopK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted,u=(0,io.env)().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),s=(0,io.env)().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=a.shape,l=c[c.length-1];if(n.shouldExecuteOnCPU([a])||l<u||i>s){var f=n.readSync(a.dataId),h=wA(f,c,a.dtype,i,o),d=(0,C.Z)(h,2),p=d[0],v=d[1];return[n.makeTensorInfo(p.shape,p.dtype,p.values),n.makeTensorInfo(v.shape,v.dtype,v.values)]}if(0===i)return c[c.length-1]=0,[n.makeTensorInfo(c,a.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(1===l)return[a,fD({attrs:{shape:c,dtype:"int32",value:0},backend:n})];var g=n.texData.get(a.dataId),m=null!==g&&g.isPacked,y=m?n.unpackTensor(a):a,b=io.util.sizeFromShape(c)/l,x=wN({inputs:{x:y},attrs:{shape:[b,l]},backend:n});m&&DO(n,y);for(var w=FO(i),k=FO(l),_=null,S=function(){return null===_?[x,x]:[x,_]},E=function(e,t,r){var a=S(),i=new TO(r),o=[[l],[null===_?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],u=_;_=n.runWebGLProgram(i,a,"int32",o),DO(n,u)},A=1;A<w;A*=2)for(var N=2*A,T=A;T>=1;T/=2)E(N,T,[b,k]);for(var M=k;M>w;M/=2){var D=S(),F=new MO([b,M/2]),I=[[l],[null===_?1:0],[w]],O=_;_=n.runWebGLProgram(F,D,"int32",I),DO(n,O);for(var R=w/2,Z=2*R,B=R;B>=1;B/=2)E(Z,B,_.shape)}var z=_;_=AT({inputs:{x:_},backend:n,attrs:{begin:0,size:[b,i]}}),DO(n,z);var L=MD({inputs:{x:x,indices:_},backend:n,attrs:{axis:1,batchDims:1}});DO(n,x);var P=c.slice(0,-1);P.push(i),z=_,_=wN({inputs:{x:_},attrs:{shape:P},backend:n}),DO(n,z);var j=L;return L=wN({inputs:{x:L},attrs:{shape:P},backend:n}),DO(n,j),[L,_]}},OO=(0,F.Z)((function e(t,n,r,a,i,o){(0,D.Z)(this,e),this.variableNames=["Image","Transforms"],this.outputShape=o;var u,s="nearest"===r?1:2;switch(a){case"constant":default:u=1;break;case"reflect":u=2;break;case"wrap":u=3;break;case"nearest":u=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(u," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(u," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(u," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(t," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(i,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(i,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(t,"));\n\n                if (").concat(s," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}));var RO={kernelName:io.Transform,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.transforms,o=r.interpolation,u=r.fillMode,s=r.fillValue,c=r.outputShape,l=(0,C.Z)(a.shape,4),f=l[0],h=l[1],d=l[2],p=l[3],v=null!=c?c:[h,d],g=(0,C.Z)(v,2),m=g[0],y=g[1],b=new OO(h,d,o,u,s,[f,m,y,p]);return n.runWebGLProgram(b,[a,i],"float32")}};var ZO={kernelName:io.Unique,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;NC(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var o=r.readSync(i.dataId),u=_A(o,a,i.shape,i.dtype),s=u.outputValues,c=u.outputShape,l=u.indices;return[r.makeTensorInfo(c,i.dtype,s),r.makeTensorInfo([l.length],"int32",l)]}};var BO={kernelName:io.Unpack,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a,u=o.shape.length,s=a.shape[i],c=new Array(u-1),l=0,f=0;f<u;f++)f!==i&&(c[l++]=o.shape[f]);var h=[],d=new Array(u).fill(0),p=o.shape.slice();p[i]=1;for(var v=new Array(s),g=0;g<v.length;g++){d[i]=g;var m=AT({inputs:{x:o},backend:n,attrs:{begin:d,size:p}}),y=wN({inputs:{x:m},backend:n,attrs:{shape:c}});v[g]=y,h.push(m)}return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}},zO=(0,F.Z)((function e(t,n){(0,D.Z)(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.numSegments,u=o*Math.ceil(i/r);this.outputShape=[a,u];var s=4*Math.floor(r/4),c=r%4,l="\n        sumValue += dot(values, segFilter);\n    ",f="";i%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      "));var h="";i%r>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(f,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(h,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(l,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(l,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(l,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}));for(var LO={kernelName:io.UnsortedSegmentSum,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments,u=a.shape.length,s=[],c=0,l=io.backend_util.getAxesPermutation([c],u),f=a;null!=l&&(f=DN({inputs:{x:a},backend:n,attrs:{perm:l}}),s.push(f),c=io.backend_util.getInnerMostAxes(1,u)[0]);var h=io.backend_util.segment_util.computeOutShape(f.shape,c,o),d=io.util.sizeFromShape([f.shape[c]]),p=wN({inputs:{x:f},backend:n,attrs:{shape:[-1,d]}});s.push(p);var v=function e(t,r,a,i,o){var u=t.shape[0],c=t.shape[1],l=io.backend_util.segment_util.segOpComputeOptimalWindowSize(c,o),f=new zO({windowSize:l,inSize:c,batchSize:u,numSegments:o},r),h=n.compileAndRun(f,[t,a],i);if(s.push(h),h.shape[1]===o)return h;var d=uI({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),p=AO({inputs:{x:d},backend:n,attrs:{reps:[c/l]}});return s.push(d),s.push(p),e(h,r,p,i,o)}(p,"unsortedSegmentSum",i,(0,io.sumOutType)(a.dtype),o),g=wN({inputs:{x:v},backend:n,attrs:{shape:h}}),m=g;if(null!=l){s.push(g);var y=io.backend_util.getUndoAxesPermutation(l);m=DN({inputs:{x:m},backend:n,attrs:{perm:y}})}return s.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}},PO=0,jO=[ON,ZN,zN,PN,WN,HN,GN,XN,eT,tT,rT,iT,uT,cT,fT,pT,vT,yT,bT,xT,_T,TT,MT,DT,FT,BT,PT,WT,aN,HT,eM,sM,dM,vM,gM,mM,bM,wM,_M,CM,MM,DM,FM,OM,BM,PM,jM,WM,qM,HM,XM,YM,$M,JM,tD,rD,oD,cD,dD,vD,yD,xD,_D,CD,ED,ND,DD,ID,RD,nN,ZD,$T,zD,PD,UD,uN,VD,HD,GD,YD,$D,JD,tF,rF,oF,sF,lF,hF,dF,pF,mF,yF,bF,xF,wF,_F,EF,NF,BF,xN,zF,PF,UF,VF,OT,HF,YF,KF,eI,nI,lN,rI,aI,iI,oI,sI,ZT,DF,lI,hI,pI,kN,mI,bI,kI,SI,AI,TI,DI,II,ZI,zI,PI,UI,VI,HI,XI,KI,NT,ZF,QI,JI,eO,tO,nO,rO,aO,iO,sO,lO,dO,pO,vO,mO,yO,bO,xO,OF,MN,kO,SO,CO,NO,IO,RO,FN,ZO,BO,LO,XF];PO<jO.length;PO++){var UO=jO[PO];(0,io.registerKernel)(UO)}io.version_core;var WO=n(386);function VO(e){return qO.apply(this,arguments)}function qO(){return(qO=(0,Bi.Z)(A().mark((function e(t){var n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r=[],["church","face","fish","dog","parachute"].forEach((function(e,a){for(var i=function(i){var o=new Image;o.src="images/"+e+"/"+i.toString()+".jpeg",o.onload=function(){var e=io.tidy((function(){var e=io.browser.fromPixels(o);return e=io.div(e,255),t.predict(e.expandDims()).squeeze()}));n.push(e),r.push(a)}},o=0;o<100;o++)i(o)})),e.abrupt("return",[n,r]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function HO(){return GO.apply(this,arguments)}function GO(){return(GO=(0,Bi.Z)(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://tfhub.dev/google/tfjs-model/imagenet/mobilenet_v3_small_100_224/feature_vector/5/default/1",e.next=3,Nm("https://tfhub.dev/google/tfjs-model/imagenet/mobilenet_v3_small_100_224/feature_vector/5/default/1",{fromTFHub:!0});case 3:return t=e.sent,io.tidy((function(){t.predict(io.zeros([1,224,224,3]))})),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function XO(e,t){return YO.apply(this,arguments)}function YO(){return YO=(0,Bi.Z)(A().mark((function e(t,n){var r,a,i,o,u,s,c,l,f,h,d,p,v,g,m,y,b,x,w,k,_,S,C=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=C.length>2&&void 0!==C[2]?C[2]:32,a=C.length>3&&void 0!==C[3]?C[3]:15,i=C.length>4&&void 0!==C[4]?C[4]:.001,(o=document.getElementById("train-logs")).innerHTML="Training...",o.style.display="block",(u=yd()).add(Bv({inputShape:[1024],units:16,activation:"relu"})),u.add(Bv({units:5,activation:"softmax"})),u.compile({optimizer:io.train.adam(parseFloat(i)),loss:Lv,metrics:[zv]}),io.util.shuffleCombo(t,n),s=io.tensor1d(n,"int32"),c=io.oneHot(s,5),l=io.stack(t),e.prev=14,e.next=17,u.fit(l,c,{shuffle:!0,batchSize:parseInt(r),epochs:parseInt(a),validationSplit:.2});case 17:f=e.sent,e.next=23;break;case 20:e.prev=20,e.t0=e.catch(14),console.log(e.t0);case 23:return o.innerHTML+="<br>\nVisualizing...",h=f.history.loss.map((function(e,t){return{x:t,y:e}})),d=f.history.categoricalAccuracy.map((function(e,t){return{x:t,y:e}})),p=f.history.val_loss.map((function(e,t){return{x:t,y:e}})),v=f.history.val_categoricalAccuracy.map((function(e,t){return{x:t,y:e}})),m={values:[h,p],series:g=["training","validation"]},y={name:"Loss versus Epochs",tab:"Training"},WO.render.linechart(y,m,{xLabel:"Epochs",yLabel:"Loss",zoomToFit:!0}),b={values:[d,v],series:g},x={name:"Accuracy versus Epochs",tab:"Training"},WO.render.linechart(x,b,{xLabel:"Epochs",yLabel:"Accuracy",zoomToFit:!0}),w=u.predict(l).squeeze(),k=w.argMax(1),e.next=39,WO.metrics.confusionMatrix(s,k,5);case 39:return _=e.sent,S={name:"Confusion Matrix",tab:"Evaluation"},WO.render.confusionMatrix(S,{values:_,tickLabels:["church","face","fish","dog","parachute"]}),WO.visor().setActiveTab("Training"),WO.visor().isOpen()||WO.visor().open(),s.dispose(),c.dispose(),l.dispose(),e.abrupt("return",u);case 48:case"end":return e.stop()}}),e,null,[[14,20]])}))),YO.apply(this,arguments)}var KO=function(e){var t=e.setClassifier,n=e.setHead,r=(0,k.useState)(void 0),a=(0,C.Z)(r,2),i=a[0],o=a[1],u=(0,k.useState)(void 0),s=(0,C.Z)(u,2),c=s[0],l=s[1],f=(0,k.useState)(128),h=(0,C.Z)(f,2),d=h[0],p=h[1],v=(0,k.useState)(20),g=(0,C.Z)(v,2),m=g[0],y=g[1],b=(0,k.useState)(1e-4),x=(0,C.Z)(b,2),w=x[0],_=x[1];function S(){return(S=(0,Bi.Z)(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.getElementById("loaddmspn").style.display="inline",HO().then((function(e){t(e),VO(e).then((function(e){o(e[0]),l(e[1])}))})),document.getElementById("loaddm").disabled=!0;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=(0,Bi.Z)(A().mark((function e(t){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),document.getElementById("train").disabled=!0,e.next=4,XO(i,c,d,m,w);case 4:r=e.sent,n(r),document.getElementById("train").disabled=!1;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,k.useEffect)((function(){i&&c?(document.getElementById("loaddmspn").style.display="none",document.getElementById("train").disabled=!1,document.getElementById("select-lr").disabled=!1,document.getElementById("select-bz").disabled=!1,document.getElementById("select-epochs").disabled=!1):(document.getElementById("train").disabled=!0,document.getElementById("select-lr").disabled=!0,document.getElementById("select-bz").disabled=!0,document.getElementById("select-epochs").disabled=!0)}),[i,c]),(0,rt.jsxs)("div",{style:{marginBottom:50},children:[(0,rt.jsx)("h2",{className:"display-6",children:"Training the Model"}),(0,rt.jsxs)("div",{className:"container-sm",style:{marginTop:50,maxWidth:800},children:[(0,rt.jsxs)("div",{style:{textAlign:"justify"},children:["Now that we have looked over the dataset and understood how different layers in the model work, let's finally train a classifier on it! We will be working with three hyperparameters, i.e., variables that we will try to find the best values for so that the classifier performs best on unseen images according to some metric: ",(0,rt.jsx)("span",{className:"emph",children:"learning rate"})," of the optimizer, ",(0,rt.jsx)("span",{className:"emph",children:"batch size"})," for inputs, and ",(0,rt.jsx)("span",{className:"emph",children:"number of epochs"})," (complete passes over the dataset while training). Since our dataset comprises of a total of 500 images, we will randomly choose 400 of them for training and the rest for validating classifier performance (unseen during training).",(0,rt.jsx)("br",{}),(0,rt.jsx)("br",{}),"Metrics that we will look at are:",(0,rt.jsxs)("div",{children:["[1] ",(0,rt.jsx)("span",{className:"emph",children:"Loss"}),': Measure of the "cost" associated with trying to bring classifier predictions closer to actual image labels. Loss values should go down while training!',(0,rt.jsx)("br",{}),"[2] ",(0,rt.jsx)("span",{className:"emph",children:"Accuracy"}),": Fraction of images the classifier gets correct. Accuracy should go up while training!",(0,rt.jsx)("br",{}),"[3] ",(0,rt.jsx)("span",{className:"emph",children:"Confusion Matrix"}),': A square matrix that quantifies how "confused" the model gets on various classes. For example, the "face" row tells us about the number of images the model predicts as belonging to classes listed as columns when they were, in actuality, images of "faces". Think about why having large numbers along the diagonal make sense!',(0,rt.jsx)("br",{})]}),(0,rt.jsx)("br",{}),"When analyzing model performance, keep in mind that you should be focusing more on the validation set loss and accuracy since these inputs were unseen by the model during training, revealing if the model has generalization capabilities. The closer the validation loss and accuracy curves are to their training set counterparts, the better the model performs (it hasn't overfit or underfit)!",(0,rt.jsx)("br",{}),(0,rt.jsx)("br",{}),"To open or close the visualization pane, press ",(0,rt.jsx)("tt",{children:"~"}),".",(0,rt.jsx)("br",{}),(0,rt.jsx)("br",{})]}),(0,rt.jsx)("div",{children:(0,rt.jsxs)(pa,{style:{textAlign:"left"},children:[(0,rt.jsxs)(Wi,{children:[(0,rt.jsx)(Gr,{xs:!0,lg:"4",children:(0,rt.jsx)(kt,{id:"loaddm",onClick:function(){return S.apply(this,arguments)},children:"Load Dataset and MobileNet"})}),(0,rt.jsx)(Gr,{xs:!0,lg:"2",style:{justifyContent:"left"},children:(0,rt.jsx)(Pi,{id:"loaddmspn",style:{display:"none"}})})]}),(0,rt.jsxs)(Wi,{style:{marginTop:15},children:[(0,rt.jsx)(Gr,{xs:!0,lg:"2",children:(0,rt.jsxs)(pa.Group,{controlId:"select-lr",children:[(0,rt.jsx)(pa.Label,{children:"Learning Rate"}),(0,rt.jsxs)(pa.Select,{"aria-label":"Learning rate",value:w,onChange:function(e){return _(e.target.value)},children:[(0,rt.jsx)("option",{value:.01,children:"0.01"}),(0,rt.jsx)("option",{value:.001,children:"0.001"}),(0,rt.jsx)("option",{value:1e-4,children:"0.0001"}),(0,rt.jsx)("option",{value:1e-5,children:"0.00001"})]})]})}),(0,rt.jsx)(Gr,{xs:!0,lg:"2",children:(0,rt.jsxs)(pa.Group,{controlId:"select-bz",children:[(0,rt.jsx)(pa.Label,{children:"Batch Size"}),(0,rt.jsxs)(pa.Select,{"aria-label":"Learning rate",value:d,onChange:function(e){return p(e.target.value)},children:[(0,rt.jsx)("option",{value:32,children:"32"}),(0,rt.jsx)("option",{value:64,children:"64"}),(0,rt.jsx)("option",{value:128,children:"128"}),(0,rt.jsx)("option",{value:256,children:"256"})]})]})}),(0,rt.jsx)(Gr,{xs:!0,lg:"2",children:(0,rt.jsxs)(pa.Group,{controlId:"select-epochs",children:[(0,rt.jsx)(pa.Label,{children:"Epochs"}),(0,rt.jsxs)(pa.Select,{"aria-label":"Learning rate",value:m,onChange:function(e){return y(e.target.value)},children:[(0,rt.jsx)("option",{value:3,children:"3"}),(0,rt.jsx)("option",{value:5,children:"5"}),(0,rt.jsx)("option",{value:10,children:"10"}),(0,rt.jsx)("option",{value:15,children:"15"}),(0,rt.jsx)("option",{value:20,children:"20"})]})]})}),(0,rt.jsx)(Gr,{xs:!0,lg:"3",style:{alignItems:"flex-end"},children:(0,rt.jsx)(kt,{id:"train",onClick:function(e){return E.apply(this,arguments)},children:"Train Classifier Head!"})})]})]})}),(0,rt.jsx)("div",{id:"train-logs",style:{marginTop:30,textAlign:"left",color:"#226c1f",display:"none",fontWeight:500}})]})]})},$O=n(4525),QO=function(){return QO=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},QO.apply(this,arguments)};function JO(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}s((r=r.apply(e,t||[])).next())}))}function eR(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}var tR=["rightEye","leftEye","noseTip","mouthCenter","rightEarTragion","leftEarTragion"],nR={modelType:"short",runtime:"mediapipe",maxFaces:1},rR=function(){function e(e){var t=this;this.width=0,this.height=0,this.selfieMode=!1,this.faceDetectorSolution=new $O.FaceDetection({locateFile:function(t,n){if(e.solutionPath){var r=e.solutionPath.replace(/\/+$/,"");return"".concat(r,"/").concat(t)}return"".concat(n,"/").concat(t)}}),this.faceDetectorSolution.setOptions({selfieMode:this.selfieMode,model:e.modelType}),this.faceDetectorSolution.onResults((function(e){if(t.height=e.image.height,t.width=e.image.width,t.faces=[],null!==e.detections)for(var n=0,r=e.detections;n<r.length;n++){var a=r[n];t.faces.push(t.normalizedToAbsolute(a.landmarks,(void 0,void 0,void 0,{xMin:o=(i=a.boundingBox).xCenter-i.width/2,xMax:o+i.width,yMin:u=i.yCenter-i.height/2,yMax:u+i.height,width:i.width,height:i.height})))}var i,o,u}))}return e.prototype.normalizedToAbsolute=function(e,t){var n=this;return{keypoints:e.map((function(e,t){return{x:e.x*n.width,y:e.y*n.height,name:tR[t]}})),box:{xMin:t.xMin*this.width,yMin:t.yMin*this.height,xMax:t.xMax*this.width,yMax:t.yMax*this.height,width:t.width*this.width,height:t.height*this.height}}},e.prototype.estimateFaces=function(e,t){return JO(this,void 0,void 0,(function(){var n,r;return eR(this,(function(a){switch(a.label){case 0:return t&&t.flipHorizontal&&t.flipHorizontal!==this.selfieMode&&(this.selfieMode=t.flipHorizontal,this.faceDetectorSolution.setOptions({selfieMode:this.selfieMode})),e instanceof io.Tensor?(r=ImageData.bind,[4,io.browser.toPixels(e)]):[3,2];case 1:return n=new(r.apply(ImageData,[void 0,a.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:n=e,a.label=3;case 3:return e=n,[4,this.faceDetectorSolution.send({image:e})];case 4:return a.sent(),[2,this.faces]}}))}))},e.prototype.dispose=function(){this.faceDetectorSolution.close()},e.prototype.reset=function(){this.faceDetectorSolution.reset(),this.width=0,this.height=0,this.faces=null,this.selfieMode=!1},e.prototype.initialize=function(){return this.faceDetectorSolution.initialize()},e}();function aR(e){return JO(this,void 0,void 0,(function(){var t,n;return eR(this,(function(r){switch(r.label){case 0:return t=function(e){if(null==e)return QO({},nR);var t=QO({},e);return t.runtime="mediapipe",null==t.modelType&&(t.modelType=nR.modelType),null==t.maxFaces&&(t.maxFaces=nR.maxFaces),t}(e),[4,(n=new rR(t)).initialize()];case 1:return r.sent(),[2,n]}}))}))}function iR(e){return e instanceof io.Tensor?{height:e.shape[0],width:e.shape[1]}:{height:e.height,width:e.width}}function oR(e){return e instanceof io.Tensor?e:io.browser.fromPixels(e)}function uR(e,t){io.util.assert(0!==e.width,(function(){return"".concat(t," width cannot be 0.")})),io.util.assert(0!==e.height,(function(){return"".concat(t," height cannot be 0.")}))}function sR(e,t,n){var r=t.outputTensorSize,a=t.keepAspectRatio,i=t.borderMode,o=t.outputTensorFloatRange,u=iR(e),s=function(e,t){return t?{xCenter:t.xCenter*e.width,yCenter:t.yCenter*e.height,width:t.width*e.width,height:t.height*e.height,rotation:t.rotation}:{xCenter:.5*e.width,yCenter:.5*e.height,width:e.width,height:e.height,rotation:0}}(u,n),c=function(e,t,n){if(void 0===n&&(n=!1),!n)return{top:0,left:0,right:0,bottom:0};var r=t.height,a=t.width;uR(t,"targetSize"),uR(e,"roi");var i,o,u=r/a,s=e.height/e.width,c=0,l=0;return u>s?(i=e.width,o=e.width*u,l=(1-s/u)/2):(i=e.height/u,o=e.height,c=(1-u/s)/2),e.width=i,e.height=o,{top:l,left:c,right:c,bottom:l}}(s,r,a),l=function(e,t,n,r){var a=e.width,i=e.height,o=r?-1:1,u=Math.cos(e.rotation),s=Math.sin(e.rotation),c=e.xCenter,l=e.yCenter,f=1/t,h=1/n,d=new Array(16);return d[0]=a*u*o*f,d[1]=-i*s*f,d[2]=0,d[3]=(-.5*a*u*o+.5*i*s+c)*f,d[4]=a*s*o*h,d[5]=i*u*h,d[6]=0,d[7]=(-.5*i*u-.5*a*s*o+l)*h,d[8]=0,d[9]=0,d[10]=a*f,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,function(e){if(16!==e.length)throw new Error("Array length must be 16 but got ".concat(e.length));return[[e[0],e[1],e[2],e[3]],[e[4],e[5],e[6],e[7]],[e[8],e[9],e[10],e[11]],[e[12],e[13],e[14],e[15]]]}(d)}(s,u.width,u.height,!1),f=(0,io.tidy)((function(){var t=oR(e),n=(0,io.tensor2d)(function(e,t,n){return uR(n,"inputResolution"),[1/n.width*e[0][0]*t.width,1/n.height*e[0][1]*t.width,e[0][3]*t.width,1/n.width*e[1][0]*t.height,1/n.height*e[1][1]*t.height,e[1][3]*t.height,0,0]}(l,u,r),[1,8]),a="zero"===i?"constant":"nearest",s=io.image.transform((0,io.expandDims)((0,io.cast)(t,"float32")),n,"bilinear",a,0,[r.height,r.width]);return null!=o?function(e,t){var n=function(e,t,n,r){var a=(r-n)/255;return{scale:a,offset:n-0*a}}(0,0,t[0],t[1]);return(0,io.tidy)((function(){return(0,io.add)((0,io.mul)(e,n.scale),n.offset)}))}(s,o):s}));return{imageTensor:f,padding:c,transformationMatrix:l}}function cR(e){null==e.reduceBoxesInLowestLayer&&(e.reduceBoxesInLowestLayer=!1),null==e.interpolatedScaleAspectRatio&&(e.interpolatedScaleAspectRatio=1),null==e.fixedAnchorSize&&(e.fixedAnchorSize=!1);for(var t=[],n=0;n<e.numLayers;){for(var r=[],a=[],i=[],o=[],u=n;u<e.strides.length&&e.strides[u]===e.strides[n];){var s=lR(e.minScale,e.maxScale,u,e.strides.length);if(0===u&&e.reduceBoxesInLowestLayer)i.push(1),i.push(2),i.push(.5),o.push(.1),o.push(s),o.push(s);else{for(var c=0;c<e.aspectRatios.length;++c)i.push(e.aspectRatios[c]),o.push(s);if(e.interpolatedScaleAspectRatio>0){var l=u===e.strides.length-1?1:lR(e.minScale,e.maxScale,u+1,e.strides.length);o.push(Math.sqrt(s*l)),i.push(e.interpolatedScaleAspectRatio)}}u++}for(var f=0;f<i.length;++f){var h=Math.sqrt(i[f]);r.push(o[f]/h),a.push(o[f]*h)}var d=0,p=0;if(e.featureMapHeight.length>0)d=e.featureMapHeight[n],p=e.featureMapWidth[n];else{var v=e.strides[n];d=Math.ceil(e.inputSizeHeight/v),p=Math.ceil(e.inputSizeWidth/v)}for(var g=0;g<d;++g)for(var m=0;m<p;++m)for(var y=0;y<r.length;++y){var b={xCenter:(m+e.anchorOffsetX)/p,yCenter:(g+e.anchorOffsetY)/d,width:0,height:0};e.fixedAnchorSize?(b.width=1,b.height=1):(b.width=a[y],b.height=r[y]),t.push(b)}n=u}return t}function lR(e,t,n,r){return 1===r?.5*(e+t):e+(t-e)*n/(r-1)}function fR(e,t){var n=t[0],r=t[1];return[n*e[0]+r*e[1]+e[3],n*e[4]+r*e[5]+e[7]]}function hR(e,t,n,r){return JO(this,void 0,void 0,(function(){var r,a,i,o,u;return eR(this,(function(s){switch(s.label){case 0:return e.sort((function(e,t){return Math.max.apply(Math,t.score)-Math.max.apply(Math,e.score)})),r=(0,io.tensor2d)(e.map((function(e){return[e.locationData.relativeBoundingBox.yMin,e.locationData.relativeBoundingBox.xMin,e.locationData.relativeBoundingBox.yMax,e.locationData.relativeBoundingBox.xMax]}))),a=(0,io.tensor1d)(e.map((function(e){return e.score[0]}))),[4,io.image.nonMaxSuppressionAsync(r,a,t,n)];case 1:return[4,(i=s.sent()).array()];case 2:return o=s.sent(),u=e.filter((function(e,t){return o.indexOf(t)>-1})),(0,io.dispose)([r,a,i]),[2,u]}}))}))}function dR(e,t,n){return JO(this,void 0,void 0,(function(){var r,a,i,o,u;return eR(this,(function(s){switch(s.label){case 0:return r=e[0],a=e[1],i=function(e,t,n){return(0,io.tidy)((function(){var r,a,i,o;n.reverseOutputOrder?(a=(0,io.squeeze)((0,io.slice)(e,[0,n.boxCoordOffset+0],[-1,1])),r=(0,io.squeeze)((0,io.slice)(e,[0,n.boxCoordOffset+1],[-1,1])),o=(0,io.squeeze)((0,io.slice)(e,[0,n.boxCoordOffset+2],[-1,1])),i=(0,io.squeeze)((0,io.slice)(e,[0,n.boxCoordOffset+3],[-1,1]))):(r=(0,io.squeeze)((0,io.slice)(e,[0,n.boxCoordOffset+0],[-1,1])),a=(0,io.squeeze)((0,io.slice)(e,[0,n.boxCoordOffset+1],[-1,1])),i=(0,io.squeeze)((0,io.slice)(e,[0,n.boxCoordOffset+2],[-1,1])),o=(0,io.squeeze)((0,io.slice)(e,[0,n.boxCoordOffset+3],[-1,1]))),a=(0,io.add)((0,io.mul)((0,io.div)(a,n.xScale),t.w),t.x),r=(0,io.add)((0,io.mul)((0,io.div)(r,n.yScale),t.h),t.y),n.applyExponentialOnBoxSize?(i=(0,io.mul)((0,io.exp)((0,io.div)(i,n.hScale)),t.h),o=(0,io.mul)((0,io.exp)((0,io.div)(o,n.wScale)),t.w)):(i=(0,io.mul)((0,io.div)(i,n.hScale),t.h),o=(0,io.mul)((0,io.div)(o,n.wScale),t.h));var u=(0,io.sub)(r,(0,io.div)(i,2)),s=(0,io.sub)(a,(0,io.div)(o,2)),c=(0,io.add)(r,(0,io.div)(i,2)),l=(0,io.add)(a,(0,io.div)(o,2)),f=(0,io.concat)([(0,io.reshape)(u,[n.numBoxes,1]),(0,io.reshape)(s,[n.numBoxes,1]),(0,io.reshape)(c,[n.numBoxes,1]),(0,io.reshape)(l,[n.numBoxes,1])],1);if(n.numKeypoints)for(var h=0;h<n.numKeypoints;++h){var d=n.keypointCoordOffset+h*n.numValuesPerKeypoint,p=void 0,v=void 0;n.reverseOutputOrder?(p=(0,io.squeeze)((0,io.slice)(e,[0,d],[-1,1])),v=(0,io.squeeze)((0,io.slice)(e,[0,d+1],[-1,1]))):(v=(0,io.squeeze)((0,io.slice)(e,[0,d],[-1,1])),p=(0,io.squeeze)((0,io.slice)(e,[0,d+1],[-1,1])));var g=(0,io.add)((0,io.mul)((0,io.div)(p,n.xScale),t.w),t.x),m=(0,io.add)((0,io.mul)((0,io.div)(v,n.yScale),t.h),t.y);f=(0,io.concat)([f,(0,io.reshape)(g,[n.numBoxes,1]),(0,io.reshape)(m,[n.numBoxes,1])],1)}return f}))}(a,t,n),o=(0,io.tidy)((function(){var e=r;return n.sigmoidScore?(null!=n.scoreClippingThresh&&(e=(0,io.clipByValue)(r,-n.scoreClippingThresh,n.scoreClippingThresh)),e=(0,io.sigmoid)(e)):e})),[4,pR(i,o,n)];case 1:return u=s.sent(),(0,io.dispose)([i,o]),[2,u]}}))}))}function pR(e,t,n){return JO(this,void 0,void 0,(function(){var r,a,i,o,u,s,c,l,f,h,d,p;return eR(this,(function(v){switch(v.label){case 0:return r=[],[4,e.data()];case 1:return a=v.sent(),[4,t.data()];case 2:for(i=v.sent(),o=0;o<n.numBoxes;++o)if(!(null!=n.minScoreThresh&&i[o]<n.minScoreThresh||(u=o*n.numCoords,s=vR(a[u+0],a[u+1],a[u+2],a[u+3],i[o],n.flipVertically,o),(c=s.locationData.relativeBoundingBox).width<0||c.height<0))){if(n.numKeypoints>0)for((l=s.locationData).relativeKeypoints=[],f=n.numKeypoints*n.numValuesPerKeypoint,h=0;h<f;h+=n.numValuesPerKeypoint)d=u+n.keypointCoordOffset+h,p={x:a[d+0],y:n.flipVertically?1-a[d+1]:a[d+1]},l.relativeKeypoints.push(p);r.push(s)}return[2,r]}}))}))}function vR(e,t,n,r,a,i,o){return{score:[a],ind:o,locationData:{relativeBoundingBox:{xMin:t,yMin:i?1-n:e,xMax:r,yMax:i?1-e:n,width:r-t,height:n-e}}}}var gR,mR={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:4,minScale:.1484375,maxScale:.75,inputSizeHeight:128,inputSizeWidth:128,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,16,16],aspectRatios:[1],fixedAnchorSize:!0},yR={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:0,featureMapHeight:[],featureMapWidth:[],numLayers:1,minScale:.1484375,maxScale:.75,inputSizeHeight:192,inputSizeWidth:192,anchorOffsetX:.5,anchorOffsetY:.5,strides:[4],aspectRatios:[1],fixedAnchorSize:!0},bR={runtime:"tfjs",modelType:"short",maxFaces:1,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/face_detection/short/1"},xR={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:896,numCoords:16,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:6,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:128,yScale:128,hScale:128,wScale:128,minScoreThresh:.5},wR={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:2304,numCoords:16,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:6,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:192,yScale:192,hScale:192,wScale:192,minScoreThresh:.6},kR={outputTensorSize:{width:128,height:128},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},_R={outputTensorSize:{width:192,height:192},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},SR=function(){function e(e,t,n){this.detectorModel=t,this.maxFaces=n,"full"===e?(this.imageToTensorConfig=_R,this.tensorsToDetectionConfig=wR,this.anchors=cR(yR)):(this.imageToTensorConfig=kR,this.tensorsToDetectionConfig=xR,this.anchors=cR(mR));var r=(0,io.tensor1d)(this.anchors.map((function(e){return e.width}))),a=(0,io.tensor1d)(this.anchors.map((function(e){return e.height}))),i=(0,io.tensor1d)(this.anchors.map((function(e){return e.xCenter}))),o=(0,io.tensor1d)(this.anchors.map((function(e){return e.yCenter})));this.anchorTensor={x:i,y:o,w:r,h:a}}return e.prototype.dispose=function(){this.detectorModel.dispose(),(0,io.dispose)([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h])},e.prototype.reset=function(){},e.prototype.detectFaces=function(e,t){return void 0===t&&(t=!1),JO(this,void 0,void 0,(function(){var n,r,a,i,o,u,s,c,l,f,h;return eR(this,(function(d){switch(d.label){case 0:return null==e?(this.reset(),[2,[]]):(n=(0,io.tidy)((function(){var n=(0,io.cast)(oR(e),"float32");return t&&(n=(0,io.squeeze)(io.image.flipLeftRight((0,io.expandDims)(n,0)),[0])),n})),r=sR(n,this.imageToTensorConfig),a=r.imageTensor,i=r.transformationMatrix,o=this.detectorModel.execute(a,"Identity:0"),u=function(e){return(0,io.tidy)((function(){var t=function(e){return(0,io.tidy)((function(){return[(0,io.slice)(e,[0,0,0],[1,-1,1]),(0,io.slice)(e,[0,0,1],[1,-1,-1])]}))}(e),n=t[0],r=t[1];return{boxes:(0,io.squeeze)(r),logits:(0,io.squeeze)(n)}}))}(o),s=u.boxes,[4,dR([c=u.logits,s],this.anchorTensor,this.tensorsToDetectionConfig)]);case 1:return 0===(l=d.sent()).length?((0,io.dispose)([n,a,o,c,s]),[2,l]):[4,hR(l,this.maxFaces,.3)];case 2:return f=d.sent(),h=function(e,t){void 0===e&&(e=[]);var n,r=(n=t,[].concat.apply([],n));return e.forEach((function(e){var t=e.locationData;t.relativeKeypoints.forEach((function(e){var t=fR(r,[e.x,e.y]),n=t[0],a=t[1];e.x=n,e.y=a}));var n=t.relativeBoundingBox,a=Number.MAX_VALUE,i=Number.MAX_VALUE,o=Number.MIN_VALUE,u=Number.MIN_VALUE;[[n.xMin,n.yMin],[n.xMin+n.width,n.yMin],[n.xMin+n.width,n.yMin+n.height],[n.xMin,n.yMin+n.height]].forEach((function(e){var t=fR(r,e),n=t[0],s=t[1];a=Math.min(a,n),o=Math.max(o,n),i=Math.min(i,s),u=Math.max(u,s)})),t.relativeBoundingBox={xMin:a,xMax:o,yMin:i,yMax:u,width:o-a,height:u-i}})),e}(f,i),(0,io.dispose)([n,a,o,c,s]),[2,h]}}))}))},e.prototype.estimateFaces=function(e,t){return JO(this,void 0,void 0,(function(){var n,r;return eR(this,(function(a){return n=iR(e),r=!!t&&t.flipHorizontal,[2,this.detectFaces(e,r).then((function(e){return e.map((function(e){for(var t=e.locationData.relativeKeypoints.map((function(e,t){return QO(QO({},e),{x:e.x*n.width,y:e.y*n.height,name:tR[t]})})),r=e.locationData.relativeBoundingBox,a=0,i=["width","xMax","xMin"];a<i.length;a++)r[i[a]]*=n.width;for(var o=0,u=["height","yMax","yMin"];o<u.length;o++)r[u[o]]*=n.height;return{keypoints:t,box:r}}))}))]}))}))},e}();function CR(e){return JO(this,void 0,void 0,(function(){var t,n,r;return eR(this,(function(a){switch(a.label){case 0:return t=function(e){if(null==e)return QO({},bR);var t=QO({},e);return null==t.modelType&&(t.modelType=bR.modelType),null==t.maxFaces&&(t.maxFaces=bR.maxFaces),null==t.detectorModelUrl&&("full"===t.modelType?t.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/face_detection/full/1":t.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/face_detection/short/1"),t}(e),n="string"==typeof t.detectorModelUrl&&t.detectorModelUrl.indexOf("https://tfhub.dev")>-1,[4,Nm(t.detectorModelUrl,{fromTFHub:n})];case 1:return r=a.sent(),[2,new SR(t.modelType,r,t.maxFaces)]}}))}))}function ER(e,t){return JO(this,void 0,void 0,(function(){var n,r;return eR(this,(function(a){if(e===gR.MediaPipeFaceDetector){if(r=void 0,null!=(n=t)){if("tfjs"===n.runtime)return[2,CR(n)];if("mediapipe"===n.runtime)return[2,aR(n)];r=n.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' "+"or 'mediapipe', but got ".concat(r))}throw new Error("".concat(e," is not a supported model name."))}))}))}function AR(){return NR.apply(this,arguments)}function NR(){return NR=(0,Bi.Z)(A().mark((function e(){var t,n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=gR.MediaPipeFaceDetector,n={runtime:"tfjs"},e.next=4,ER(t,n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),NR.apply(this,arguments)}function TR(e,t){return MR.apply(this,arguments)}function MR(){return(MR=(0,Bi.Z)(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.estimateFaces(n);case 2:e.sent.length>0&&(document.getElementById("has-faces").style.display="block");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function DR(e,t,n){return FR.apply(this,arguments)}function FR(){return FR=(0,Bi.Z)(A().mark((function e(t,n,r){var a,i,o,u,s,c,l;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=["church","face","fish","dog","parachute"],i=0;i<5;i++)document.getElementById(a[i]).classList.remove("emph");for(o=io.tidy((function(){var e=io.browser.fromPixels(r).toFloat().div(255);return t.predict(e.expandDims()).squeeze()})),u=n.predict(o.expandDims()).squeeze(),s=u.arraySync(),c=u.argMax().arraySync(),l=0;l<5;l++)document.getElementById(a[l]).innerHTML=s[l].toFixed(3);document.getElementById(a[c]).classList.add("emph"),document.getElementById("output-spn").style.display="none",document.getElementById("pred").style.display="block",document.getElementById("ps").style.display="block";case 11:case"end":return e.stop()}}),e)}))),FR.apply(this,arguments)}(gR||(gR={})).MediaPipeFaceDetector="MediaPipeFaceDetector";var IR=function(e){var t=e.classifier,n=e.head,r=(0,k.useState)(void 0),a=(0,C.Z)(r,2),i=a[0],o=a[1];function u(e){document.getElementById("output-spn").style.display="none",document.getElementById("has-faces").style.display="none",document.getElementById("pred").style.display="none";var t=document.getElementById("source-img").getContext("2d",{willReadFrequently:!0}),n=new Image;document.getElementById("source-spn").style.display="inline-block",document.getElementById("source-img").style.display="none",n.src=e,n.onload=function(){t.drawImage(n,0,0,224,224)},document.getElementById("source-spn").style.display="none",document.getElementById("source-img").style.display="inline-block",document.getElementById("output-spn").style.display="inline-block",document.getElementById("has-faces").style.display="none",document.getElementById("pred").style.display="none",setTimeout((function(){return function(){return c.apply(this,arguments)}()}),1e3)}function s(){return s=(0,Bi.Z)(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.getElementById("loadfdspn").style.display="block",document.getElementById("loadfd").disabled=!0,AR().then((function(e){o(e),document.getElementById("loadfdspn").style.display="none"}));case 3:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function c(){return(c=(0,Bi.Z)(A().mark((function e(){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=document.getElementById("source-img").getContext("2d").getImageData(0,0,224,224),e.next=3,TR(i,r);case 3:return e.next=5,DR(t,n,r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return l=(0,Bi.Z)(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),u("random/"+Math.floor(10*Math.random()).toString()+".jpeg");case 2:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}return(0,k.useEffect)((function(){i?(document.getElementById("random").disabled=!1,document.getElementById("user").disabled=!1):(document.getElementById("random").disabled=!0,document.getElementById("user").disabled=!0)}),[i]),(0,k.useEffect)((function(){document.getElementById("loadfd").disabled=!t||!n}),[t,n]),(0,rt.jsxs)("div",{style:{marginBottom:50},children:[(0,rt.jsx)("h2",{className:"display-6",children:"How Does The Model Perform?"}),(0,rt.jsxs)("div",{className:"container-sm",style:{marginTop:50,maxWidth:800},children:[(0,rt.jsxs)("div",{style:{textAlign:"justify"},children:["Now that we've learned how the model works \"under-the-hood\" and what dataset it was trained on, let's see how it performs on unseen samples. Over-reliance on model predictions can do more harm than good, especially because these models are not always right! Sometimes, models can be extremely wrong with very high confidence. AI systems should keep humans in the loop, since humans are ultimately responsible and accountable for the tasks [5].",(0,rt.jsx)("br",{}),(0,rt.jsx)("br",{}),"How does the model do on an unseen image? The pipeline that we will be following is:",(0,rt.jsx)("br",{}),(0,rt.jsxs)("div",{className:"emph",children:["[1] Get an input image",(0,rt.jsx)("br",{}),"[2] Detect faces in the image",(0,rt.jsx)("br",{}),"[3] Pass image through the model to get predictions!"]}),(0,rt.jsx)("br",{})]}),(0,rt.jsxs)("div",{children:[(0,rt.jsx)("div",{style:{marginBottom:15,textAlign:"left"},children:(0,rt.jsxs)(Wi,{children:[(0,rt.jsx)(Gr,{xs:!0,lg:"3",children:(0,rt.jsx)(kt,{id:"loadfd",onClick:function(){return s.apply(this,arguments)},children:"Load Face Detector"})}),(0,rt.jsx)(Gr,{xs:!0,lg:"2",style:{justifyContent:"left"},children:(0,rt.jsx)(Pi,{id:"loadfdspn",style:{display:"none"}})})]})}),(0,rt.jsx)("button",{id:"random",className:"random-img-gen",onClick:function(e){return l.apply(this,arguments)},children:"Use Random Image"}),(0,rt.jsx)("span",{style:{margin:"0 20px"},children:"OR"}),(0,rt.jsx)("input",{id:"user",type:"file",accept:"image/*",onChange:function(e){u(URL.createObjectURL(e.target.files[0]))},style:{marginBottom:20,justifyContent:"center",cursor:"pointer"}}),(0,rt.jsx)("br",{}),(0,rt.jsx)("canvas",{id:"source-img",width:224,height:224,style:{display:"none"}}),(0,rt.jsx)(Pi,{id:"source-spn",style:{display:"none"}})]}),(0,rt.jsxs)("div",{children:[(0,rt.jsx)(Pi,{id:"output-spn",style:{display:"none",marginTop:10}}),(0,rt.jsx)("div",{id:"has-faces",style:{display:"none",color:"red",marginTop:20,textAlign:"left"},children:"BlazeFace has detected presence of faces (sometimes even dog faces \ud83d\ude1e) in the provided image. As detailed above, always keep in mind concerns around privacy and data protection!"}),(0,rt.jsxs)("div",{id:"pred",style:{display:"none",marginTop:20},children:[(0,rt.jsx)("span",{style:{textDecoration:"underline"},children:"Prediction"}),(0,rt.jsx)("br",{}),"Church: ",(0,rt.jsx)("span",{id:"church"}),(0,rt.jsx)("br",{}),"Dog: ",(0,rt.jsx)("span",{id:"dog"}),(0,rt.jsx)("br",{}),"Face: ",(0,rt.jsx)("span",{id:"face"}),(0,rt.jsx)("br",{}),"Fish: ",(0,rt.jsx)("span",{id:"fish"}),(0,rt.jsx)("br",{}),"Parachute: ",(0,rt.jsx)("span",{id:"parachute"})]}),(0,rt.jsx)("div",{id:"ps",style:{textAlign:"justify",marginTop:20,display:"none"},children:"Two of the many reasons why a model might incorrectly classify a test image, given that it performs decently well on the training and validation sets, are: (1) the image is out-of-distribution (image styles not present in the dataset; for example, a face at a different angle, a different dog breed, etc.), or (2) the image is out-of-domain (images from classes the model might not have seen during training). Always have humans in the loop!"})]})]})]})},OR=function(){var e=(0,k.useState)(!1),t=(0,C.Z)(e,2),n=t[0],r=t[1],a=(0,k.useState)(void 0),i=(0,C.Z)(a,2),o=i[0],u=i[1],s=(0,k.useState)(void 0),c=(0,C.Z)(s,2),l=c[0],f=c[1];return(0,k.useEffect)((function(){window.scrollTo(0,0)}),[]),(0,rt.jsxs)("div",{className:"container-sm",style:{maxWidth:1e3},children:[(0,rt.jsxs)("div",{className:"frame",style:{backgroundColor:"#ffddc1",justifyContent:"center"},children:[(0,rt.jsxs)("h1",{className:"display-4",children:["Image Classification Using",(0,rt.jsx)("br",{}),"Convolutional Neural Networks"]}),(0,rt.jsxs)("div",{className:"container-sm",style:{marginTop:50,maxWidth:800,textAlign:"justify"},children:['The task of Image Classification is concerned with categorizing (labelling) images into different classes based on what those images depict. For example, an image of a cat would be classified as belonging to the "cat" class. Convolutional Neural Networks (CNNs) are a family of neural networks that leverage the powerful spatial structure present in images. This spatial structure can comprise of the fact that [1]:',(0,rt.jsx)("div",{className:"container-sm",style:{justifyContent:"center",display:"flex"},children:(0,rt.jsxs)("ul",{children:[(0,rt.jsxs)("li",{children:[(0,rt.jsx)("span",{className:"emph",children:"Translational Invariance"}),": A cat at different locations in an image, like sleeping on the floor or jumping over a fence, are all images of cats."]}),(0,rt.jsxs)("li",{children:[(0,rt.jsx)("span",{className:"emph",children:"Locality"}),": A pixel representing the sky is likely to be surrounded by pixels that also represent the sky."]}),(0,rt.jsxs)("li",{children:[(0,rt.jsx)("span",{className:"emph",children:"Composition"}),": Objects in images are composed of parts, like a face is composed of eyes, a nose, lips, ears, etc."]})]})})]}),(0,rt.jsx)("hr",{style:{margin:"30px 20px"}}),(0,rt.jsx)(Zi,{}),(0,rt.jsx)("hr",{style:{margin:"30px 20px"}}),(0,rt.jsx)(ao,{}),(0,rt.jsx)("hr",{style:{margin:"30px 20px"}}),(0,rt.jsx)(KO,{setClassifier:u,setHead:f}),(0,rt.jsx)("hr",{style:{margin:"30px 20px"}}),(0,rt.jsx)(IR,{classifier:o,head:l}),(0,rt.jsx)("hr",{style:{margin:"30px 20px"}}),(0,rt.jsxs)("div",{className:"container-sm",style:{maxWidth:750,textAlign:"justify"},children:["Thanks for completing this module! Please fill out this exit ticket and feedback survey to self-assess learning outcomes and help improve this module!",(0,rt.jsx)("br",{}),(0,rt.jsx)("br",{})]}),(0,rt.jsx)(kt,{onClick:function(){r(!0)},children:"Exit Ticket and Feedback Survey"}),(0,rt.jsxs)(br,{show:n,onHide:function(){r(!1)},size:"lg",children:[(0,rt.jsx)(br.Header,{closeButton:!0}),(0,rt.jsx)("iframe",{title:"E2AI: Exit Ticket and Feedback Survey",src:"https://docs.google.com/forms/d/e/1FAIpQLScNfuLRDLLNNKRSLZqzP1l3QLdC-4XfNw31JNyr6MaRGOEtXQ/viewform?embedded=true",width:"100%",height:"100%",position:"relative",children:"Loading\u2026"})]}),(0,rt.jsx)("hr",{style:{margin:"30px 20px"}}),(0,rt.jsx)("h3",{className:"display-8",style:{marginTop:30},children:"References"}),(0,rt.jsxs)("div",{className:"container-sm",style:{maxWidth:750,textAlign:"justify",fontSize:"0.9rem"},children:["[1] Aston Zhang, Zachary C. Lipton, Mu Li, and Alexander J. Smola. ",(0,rt.jsx)("em",{children:"Dive into Deep Learning"}),". Cambridge University Press, 2023. ",(0,rt.jsx)("a",{href:"https://D2L.ai",children:"https://D2L.ai"}),".",(0,rt.jsx)("br",{}),"[2] ",(0,rt.jsx)("a",{href:"http://karpathy.github.io/2019/04/25/recipe/",children:"http://karpathy.github.io/2019/04/25/recipe/"}),(0,rt.jsx)("br",{}),"[3] Zhiqiang Gong, Ping Zhong, and Weidong Hu. Diversity in machine learning. ",(0,rt.jsx)("em",{children:"IEEE Access"}),", 7:64323-64350, 2019. ",(0,rt.jsx)("a",{href:"http://dx.doi.org/10.1109/ACCESS.2019.2917620",children:"http://dx.doi.org/10.1109/ACCESS.2019.2917620"}),".",(0,rt.jsx)("br",{}),"[4] U.S. Department of Education, Office of Educational Technology, ",(0,rt.jsx)("em",{children:"Artificial Intelligence and Future of Teaching and Learning: Insights and Recommendations"}),", Washington, DC, 2023.",(0,rt.jsx)("br",{}),"[5] ",(0,rt.jsx)("a",{href:"https://www.unesco.org/en/artificial-intelligence",children:"https://www.unesco.org/en/artificial-intelligence"}),(0,rt.jsx)("br",{}),"[6] Carlos Hinojosa, Miguel Marquez, Henry Arguello, Ehsan Adeli, Li Fei-Fei, and Juan Carlos Niebles. ",(0,rt.jsx)("em",{children:"PrivHAR: Recognizing Human Actions from Privacy-Preserving Lens"}),", pp. 314-332. Springer Nature Switzerland, 2022. ISBN 9783031197727. ",(0,rt.jsx)("a",{href:"http://dx.doi.org/10.1007/978-3-031-19772-7_19",children:"http://dx.doi.org/10.1007/978-3-031-19772-7_19"}),".",(0,rt.jsx)("br",{}),'[7] Jia Deng, Wei Dong, Richard Socher, Li-Jia Li, Kai Li, and Li Fei-Fei, "ImageNet: A large-scale hierarchical image database," ',(0,rt.jsx)("em",{children:"2009 IEEE Conference on Computer Vision and Pattern Recognition"}),", Miami, FL, USA, 2009, pp. 248-255, doi: 10.1109/CVPR.2009.5206848.",(0,rt.jsx)("br",{}),'[8] Tero Karras, Samuli Laine, and Timo Aila. "A style-based generator architecture for generative adversarial networks." ',(0,rt.jsx)("em",{children:"Proceedings of the IEEE/CVF conference on computer vision and pattern recognition"}),". 2019.",(0,rt.jsx)("br",{}),'[9] Valentin Bazarevsky, Yury Kartynnik, Andrey Vakunov, Karthik Raveendran, and Matthias Grundmann. "Blazeface: Sub-millisecond neural face detection on mobile gpus." arXiv preprint arXiv:1907.05047 (2019).',(0,rt.jsx)("br",{}),"[10] Xavier Glorot, Antonie Bordes, and Yoshua Bengio. Deep Sparse Rectifier Neural Networks. ",(0,rt.jsx)("i",{children:"Proceedings of the Fourteenth International Conference on Artificial Intelligence and Statistics"}),", in ",(0,rt.jsx)("i",{children:"Proceedings of Machine Learning Research"})," 15:315-323 (2011). ",(0,rt.jsx)("a",{href:"https://proceedings.mlr.press/v15/glorot11a.html",children:"https://proceedings.mlr.press/v15/glorot11a.html"}),".",(0,rt.jsx)("br",{}),'[11] Andrew Howard, Mark Sandler, Grace Chu, Liang-Chieh Chen, Bo Chen, Mingxing Tan, Weijun Wang et al. "Searching for mobilenetv3." In Proceedings of the IEEE/CVF international conference on computer vision, pp. 1314-1324. 2019.']})]}),(0,rt.jsx)("hr",{style:{margin:0},className:"border border-2 "}),(0,rt.jsxs)("div",{className:"footer",children:["Designed and Developed by ",(0,rt.jsx)("a",{href:"https://ynshah3.github.io",className:"link-offset-3 footer-link",children:"Yash Shah"})]})]})};var RR=function(){return(0,rt.jsx)("div",{children:(0,rt.jsxs)(We,{children:[(0,rt.jsx)(je,{path:"/",element:(0,rt.jsx)(at,{})}),(0,rt.jsx)(je,{path:"/cnn",element:(0,rt.jsx)(OR,{})})]})})};S.createRoot(document.getElementById("root")).render((0,rt.jsx)(k.StrictMode,{children:(0,rt.jsx)($e,{children:(0,rt.jsx)(RR,{})})}))}()}();
//# sourceMappingURL=main.0ca27c29.js.map